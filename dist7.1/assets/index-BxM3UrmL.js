function aQ(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in e)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(e,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var q8e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ok={exports:{}},tb={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CO;function nQ(){if(CO)return tb;CO=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(n,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:e,type:n,key:o,ref:s!==void 0?s:null,props:i}}return tb.Fragment=t,tb.jsx=r,tb.jsxs=r,tb}var kO;function sQ(){return kO||(kO=1,ok.exports=nQ()),ok.exports}var a=sQ(),lk={exports:{}},ja={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _O;function iQ(){if(_O)return ja;_O=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),h=Symbol.iterator;function m(Y){return Y===null||typeof Y!="object"?null:(Y=h&&Y[h]||Y["@@iterator"],typeof Y=="function"?Y:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,g={};function b(Y,oe,M){this.props=Y,this.context=oe,this.refs=g,this.updater=M||p}b.prototype.isReactComponent={},b.prototype.setState=function(Y,oe){if(typeof Y!="object"&&typeof Y!="function"&&Y!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Y,oe,"setState")},b.prototype.forceUpdate=function(Y){this.updater.enqueueForceUpdate(this,Y,"forceUpdate")};function y(){}y.prototype=b.prototype;function C(Y,oe,M){this.props=Y,this.context=oe,this.refs=g,this.updater=M||p}var w=C.prototype=new y;w.constructor=C,v(w,b.prototype),w.isPureReactComponent=!0;var k=Array.isArray,S={H:null,A:null,T:null,S:null,V:null},D=Object.prototype.hasOwnProperty;function E(Y,oe,M,V,H,ee){return M=ee.ref,{$$typeof:e,type:Y,key:oe,ref:M!==void 0?M:null,props:ee}}function T(Y,oe){return E(Y.type,oe,void 0,void 0,void 0,Y.props)}function A(Y){return typeof Y=="object"&&Y!==null&&Y.$$typeof===e}function L(Y){var oe={"=":"=0",":":"=2"};return"$"+Y.replace(/[=:]/g,function(M){return oe[M]})}var P=/\/+/g;function O(Y,oe){return typeof Y=="object"&&Y!==null&&Y.key!=null?L(""+Y.key):oe.toString(36)}function Z(){}function z(Y){switch(Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason;default:switch(typeof Y.status=="string"?Y.then(Z,Z):(Y.status="pending",Y.then(function(oe){Y.status==="pending"&&(Y.status="fulfilled",Y.value=oe)},function(oe){Y.status==="pending"&&(Y.status="rejected",Y.reason=oe)})),Y.status){case"fulfilled":return Y.value;case"rejected":throw Y.reason}}throw Y}function K(Y,oe,M,V,H){var ee=typeof Y;(ee==="undefined"||ee==="boolean")&&(Y=null);var re=!1;if(Y===null)re=!0;else switch(ee){case"bigint":case"string":case"number":re=!0;break;case"object":switch(Y.$$typeof){case e:case t:re=!0;break;case u:return re=Y._init,K(re(Y._payload),oe,M,V,H)}}if(re)return H=H(Y),re=V===""?"."+O(Y,0):V,k(H)?(M="",re!=null&&(M=re.replace(P,"$&/")+"/"),K(H,oe,M,"",function(ie){return ie})):H!=null&&(A(H)&&(H=T(H,M+(H.key==null||Y&&Y.key===H.key?"":(""+H.key).replace(P,"$&/")+"/")+re)),oe.push(H)),1;re=0;var ae=V===""?".":V+":";if(k(Y))for(var ne=0;ne<Y.length;ne++)V=Y[ne],ee=ae+O(V,ne),re+=K(V,oe,M,ee,H);else if(ne=m(Y),typeof ne=="function")for(Y=ne.call(Y),ne=0;!(V=Y.next()).done;)V=V.value,ee=ae+O(V,ne++),re+=K(V,oe,M,ee,H);else if(ee==="object"){if(typeof Y.then=="function")return K(z(Y),oe,M,V,H);throw oe=String(Y),Error("Objects are not valid as a React child (found: "+(oe==="[object Object]"?"object with keys {"+Object.keys(Y).join(", ")+"}":oe)+"). If you meant to render a collection of children, use an array instead.")}return re}function B(Y,oe,M){if(Y==null)return Y;var V=[],H=0;return K(Y,V,"","",function(ee){return oe.call(M,ee,H++)}),V}function Q(Y){if(Y._status===-1){var oe=Y._result;oe=oe(),oe.then(function(M){(Y._status===0||Y._status===-1)&&(Y._status=1,Y._result=M)},function(M){(Y._status===0||Y._status===-1)&&(Y._status=2,Y._result=M)}),Y._status===-1&&(Y._status=0,Y._result=oe)}if(Y._status===1)return Y._result.default;throw Y._result}var U=typeof reportError=="function"?reportError:function(Y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var oe=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Y=="object"&&Y!==null&&typeof Y.message=="string"?String(Y.message):String(Y),error:Y});if(!window.dispatchEvent(oe))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Y);return}console.error(Y)};function J(){}return ja.Children={map:B,forEach:function(Y,oe,M){B(Y,function(){oe.apply(this,arguments)},M)},count:function(Y){var oe=0;return B(Y,function(){oe++}),oe},toArray:function(Y){return B(Y,function(oe){return oe})||[]},only:function(Y){if(!A(Y))throw Error("React.Children.only expected to receive a single React element child.");return Y}},ja.Component=b,ja.Fragment=r,ja.Profiler=s,ja.PureComponent=C,ja.StrictMode=n,ja.Suspense=c,ja.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=S,ja.__COMPILER_RUNTIME={__proto__:null,c:function(Y){return S.H.useMemoCache(Y)}},ja.cache=function(Y){return function(){return Y.apply(null,arguments)}},ja.cloneElement=function(Y,oe,M){if(Y==null)throw Error("The argument must be a React element, but you passed "+Y+".");var V=v({},Y.props),H=Y.key,ee=void 0;if(oe!=null)for(re in oe.ref!==void 0&&(ee=void 0),oe.key!==void 0&&(H=""+oe.key),oe)!D.call(oe,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&oe.ref===void 0||(V[re]=oe[re]);var re=arguments.length-2;if(re===1)V.children=M;else if(1<re){for(var ae=Array(re),ne=0;ne<re;ne++)ae[ne]=arguments[ne+2];V.children=ae}return E(Y.type,H,void 0,void 0,ee,V)},ja.createContext=function(Y){return Y={$$typeof:o,_currentValue:Y,_currentValue2:Y,_threadCount:0,Provider:null,Consumer:null},Y.Provider=Y,Y.Consumer={$$typeof:i,_context:Y},Y},ja.createElement=function(Y,oe,M){var V,H={},ee=null;if(oe!=null)for(V in oe.key!==void 0&&(ee=""+oe.key),oe)D.call(oe,V)&&V!=="key"&&V!=="__self"&&V!=="__source"&&(H[V]=oe[V]);var re=arguments.length-2;if(re===1)H.children=M;else if(1<re){for(var ae=Array(re),ne=0;ne<re;ne++)ae[ne]=arguments[ne+2];H.children=ae}if(Y&&Y.defaultProps)for(V in re=Y.defaultProps,re)H[V]===void 0&&(H[V]=re[V]);return E(Y,ee,void 0,void 0,null,H)},ja.createRef=function(){return{current:null}},ja.forwardRef=function(Y){return{$$typeof:l,render:Y}},ja.isValidElement=A,ja.lazy=function(Y){return{$$typeof:u,_payload:{_status:-1,_result:Y},_init:Q}},ja.memo=function(Y,oe){return{$$typeof:d,type:Y,compare:oe===void 0?null:oe}},ja.startTransition=function(Y){var oe=S.T,M={};S.T=M;try{var V=Y(),H=S.S;H!==null&&H(M,V),typeof V=="object"&&V!==null&&typeof V.then=="function"&&V.then(J,U)}catch(ee){U(ee)}finally{S.T=oe}},ja.unstable_useCacheRefresh=function(){return S.H.useCacheRefresh()},ja.use=function(Y){return S.H.use(Y)},ja.useActionState=function(Y,oe,M){return S.H.useActionState(Y,oe,M)},ja.useCallback=function(Y,oe){return S.H.useCallback(Y,oe)},ja.useContext=function(Y){return S.H.useContext(Y)},ja.useDebugValue=function(){},ja.useDeferredValue=function(Y,oe){return S.H.useDeferredValue(Y,oe)},ja.useEffect=function(Y,oe,M){var V=S.H;if(typeof M=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return V.useEffect(Y,oe)},ja.useId=function(){return S.H.useId()},ja.useImperativeHandle=function(Y,oe,M){return S.H.useImperativeHandle(Y,oe,M)},ja.useInsertionEffect=function(Y,oe){return S.H.useInsertionEffect(Y,oe)},ja.useLayoutEffect=function(Y,oe){return S.H.useLayoutEffect(Y,oe)},ja.useMemo=function(Y,oe){return S.H.useMemo(Y,oe)},ja.useOptimistic=function(Y,oe){return S.H.useOptimistic(Y,oe)},ja.useReducer=function(Y,oe,M){return S.H.useReducer(Y,oe,M)},ja.useRef=function(Y){return S.H.useRef(Y)},ja.useState=function(Y){return S.H.useState(Y)},ja.useSyncExternalStore=function(Y,oe,M){return S.H.useSyncExternalStore(Y,oe,M)},ja.useTransition=function(){return S.H.useTransition()},ja.version="19.1.0",ja}var EO;function H0(){return EO||(EO=1,lk.exports=iQ()),lk.exports}var N=H0();const Gt=Yu(N),VN=aQ({__proto__:null,default:Gt},[N]);var ck={exports:{}},rb={},dk={exports:{}},uk={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DO;function oQ(){return DO||(DO=1,function(e){function t(B,Q){var U=B.length;B.push(Q);e:for(;0<U;){var J=U-1>>>1,Y=B[J];if(0<s(Y,Q))B[J]=Q,B[U]=Y,U=J;else break e}}function r(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var Q=B[0],U=B.pop();if(U!==Q){B[0]=U;e:for(var J=0,Y=B.length,oe=Y>>>1;J<oe;){var M=2*(J+1)-1,V=B[M],H=M+1,ee=B[H];if(0>s(V,U))H<Y&&0>s(ee,V)?(B[J]=ee,B[H]=U,J=H):(B[J]=V,B[M]=U,J=M);else if(H<Y&&0>s(ee,U))B[J]=ee,B[H]=U,J=H;else break e}}return Q}function s(B,Q){var U=B.sortIndex-Q.sortIndex;return U!==0?U:B.id-Q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,p=!1,v=!1,g=!1,b=!1,y=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function k(B){for(var Q=r(d);Q!==null;){if(Q.callback===null)n(d);else if(Q.startTime<=B)n(d),Q.sortIndex=Q.expirationTime,t(c,Q);else break;Q=r(d)}}function S(B){if(g=!1,k(B),!v)if(r(c)!==null)v=!0,D||(D=!0,O());else{var Q=r(d);Q!==null&&K(S,Q.startTime-B)}}var D=!1,E=-1,T=5,A=-1;function L(){return b?!0:!(e.unstable_now()-A<T)}function P(){if(b=!1,D){var B=e.unstable_now();A=B;var Q=!0;try{e:{v=!1,g&&(g=!1,C(E),E=-1),p=!0;var U=m;try{t:{for(k(B),h=r(c);h!==null&&!(h.expirationTime>B&&L());){var J=h.callback;if(typeof J=="function"){h.callback=null,m=h.priorityLevel;var Y=J(h.expirationTime<=B);if(B=e.unstable_now(),typeof Y=="function"){h.callback=Y,k(B),Q=!0;break t}h===r(c)&&n(c),k(B)}else n(c);h=r(c)}if(h!==null)Q=!0;else{var oe=r(d);oe!==null&&K(S,oe.startTime-B),Q=!1}}break e}finally{h=null,m=U,p=!1}Q=void 0}}finally{Q?O():D=!1}}}var O;if(typeof w=="function")O=function(){w(P)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,z=Z.port2;Z.port1.onmessage=P,O=function(){z.postMessage(null)}}else O=function(){y(P,0)};function K(B,Q){E=y(function(){B(e.unstable_now())},Q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(B){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var U=m;m=Q;try{return B()}finally{m=U}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var U=m;m=B;try{return Q()}finally{m=U}},e.unstable_scheduleCallback=function(B,Q,U){var J=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?J+U:J):U=J,B){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=U+Y,B={id:u++,callback:Q,priorityLevel:B,startTime:U,expirationTime:Y,sortIndex:-1},U>J?(B.sortIndex=U,t(d,B),r(c)===null&&B===r(d)&&(g?(C(E),E=-1):g=!0,K(S,U-J))):(B.sortIndex=Y,t(c,B),v||p||(v=!0,D||(D=!0,O()))),B},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(B){var Q=m;return function(){var U=m;m=Q;try{return B.apply(this,arguments)}finally{m=U}}}}(uk)),uk}var AO;function lQ(){return AO||(AO=1,dk.exports=oQ()),dk.exports}var hk={exports:{}},io={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TO;function cQ(){if(TO)return io;TO=1;var e=H0();function t(c){var d="https://react.dev/errors/"+c;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)d+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},s=Symbol.for("react.portal");function i(c,d,u){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:h==null?null:""+h,children:c,containerInfo:d,implementation:u}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,d){if(c==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return io.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,io.createPortal=function(c,d){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return i(c,d,null,u)},io.flushSync=function(c){var d=o.T,u=n.p;try{if(o.T=null,n.p=2,c)return c()}finally{o.T=d,n.p=u,n.d.f()}},io.preconnect=function(c,d){typeof c=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(c,d))},io.prefetchDNS=function(c){typeof c=="string"&&n.d.D(c)},io.preinit=function(c,d){if(typeof c=="string"&&d&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,p=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;u==="style"?n.d.S(c,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:h,integrity:m,fetchPriority:p}):u==="script"&&n.d.X(c,{crossOrigin:h,integrity:m,fetchPriority:p,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},io.preinitModule=function(c,d){if(typeof c=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var u=l(d.as,d.crossOrigin);n.d.M(c,{crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(c)},io.preload=function(c,d){if(typeof c=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var u=d.as,h=l(u,d.crossOrigin);n.d.L(c,u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},io.preloadModule=function(c,d){if(typeof c=="string")if(d){var u=l(d.as,d.crossOrigin);n.d.m(c,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:u,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(c)},io.requestFormReset=function(c){n.d.r(c)},io.unstable_batchedUpdates=function(c,d){return c(d)},io.useFormState=function(c,d,u){return o.H.useFormState(c,d,u)},io.useFormStatus=function(){return o.H.useHostTransitionStatus()},io.version="19.1.0",io}var IO;function H7(){if(IO)return hk.exports;IO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),hk.exports=cQ(),hk.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PO;function dQ(){if(PO)return rb;PO=1;var e=lQ(),t=H0(),r=H7();function n(f){var x="https://react.dev/errors/"+f;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)x+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+f+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(f){return!(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)}function i(f){var x=f,j=f;if(f.alternate)for(;x.return;)x=x.return;else{f=x;do x=f,(x.flags&4098)!==0&&(j=x.return),f=x.return;while(f)}return x.tag===3?j:null}function o(f){if(f.tag===13){var x=f.memoizedState;if(x===null&&(f=f.alternate,f!==null&&(x=f.memoizedState)),x!==null)return x.dehydrated}return null}function l(f){if(i(f)!==f)throw Error(n(188))}function c(f){var x=f.alternate;if(!x){if(x=i(f),x===null)throw Error(n(188));return x!==f?null:f}for(var j=f,_=x;;){var R=j.return;if(R===null)break;var q=R.alternate;if(q===null){if(_=R.return,_!==null){j=_;continue}break}if(R.child===q.child){for(q=R.child;q;){if(q===j)return l(R),f;if(q===_)return l(R),x;q=q.sibling}throw Error(n(188))}if(j.return!==_.return)j=R,_=q;else{for(var me=!1,Ee=R.child;Ee;){if(Ee===j){me=!0,j=R,_=q;break}if(Ee===_){me=!0,_=R,j=q;break}Ee=Ee.sibling}if(!me){for(Ee=q.child;Ee;){if(Ee===j){me=!0,j=q,_=R;break}if(Ee===_){me=!0,_=q,j=R;break}Ee=Ee.sibling}if(!me)throw Error(n(189))}}if(j.alternate!==_)throw Error(n(190))}if(j.tag!==3)throw Error(n(188));return j.stateNode.current===j?f:x}function d(f){var x=f.tag;if(x===5||x===26||x===27||x===6)return f;for(f=f.child;f!==null;){if(x=d(f),x!==null)return x;f=f.sibling}return null}var u=Object.assign,h=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),C=Symbol.for("react.consumer"),w=Symbol.for("react.context"),k=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function O(f){return f===null||typeof f!="object"?null:(f=P&&f[P]||f["@@iterator"],typeof f=="function"?f:null)}var Z=Symbol.for("react.client.reference");function z(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===Z?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case v:return"Fragment";case b:return"Profiler";case g:return"StrictMode";case S:return"Suspense";case D:return"SuspenseList";case A:return"Activity"}if(typeof f=="object")switch(f.$$typeof){case p:return"Portal";case w:return(f.displayName||"Context")+".Provider";case C:return(f._context.displayName||"Context")+".Consumer";case k:var x=f.render;return f=f.displayName,f||(f=x.displayName||x.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case E:return x=f.displayName||null,x!==null?x:z(f.type)||"Memo";case T:x=f._payload,f=f._init;try{return z(f(x))}catch{}}return null}var K=Array.isArray,B=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,U={pending:!1,data:null,method:null,action:null},J=[],Y=-1;function oe(f){return{current:f}}function M(f){0>Y||(f.current=J[Y],J[Y]=null,Y--)}function V(f,x){Y++,J[Y]=f.current,f.current=x}var H=oe(null),ee=oe(null),re=oe(null),ae=oe(null);function ne(f,x){switch(V(re,x),V(ee,f),V(H,null),x.nodeType){case 9:case 11:f=(f=x.documentElement)&&(f=f.namespaceURI)?ZP(f):0;break;default:if(f=x.tagName,x=x.namespaceURI)x=ZP(x),f=eO(x,f);else switch(f){case"svg":f=1;break;case"math":f=2;break;default:f=0}}M(H),V(H,f)}function ie(){M(H),M(ee),M(re)}function G(f){f.memoizedState!==null&&V(ae,f);var x=H.current,j=eO(x,f.type);x!==j&&(V(ee,f),V(H,j))}function de(f){ee.current===f&&(M(H),M(ee)),ae.current===f&&(M(ae),Xg._currentValue=U)}var X=Object.prototype.hasOwnProperty,le=e.unstable_scheduleCallback,Se=e.unstable_cancelCallback,ue=e.unstable_shouldYield,se=e.unstable_requestPaint,ye=e.unstable_now,Ne=e.unstable_getCurrentPriorityLevel,Ue=e.unstable_ImmediatePriority,Qe=e.unstable_UserBlockingPriority,ot=e.unstable_NormalPriority,xt=e.unstable_LowPriority,Le=e.unstable_IdlePriority,dt=e.log,Tt=e.unstable_setDisableYieldValue,At=null,Vt=null;function xe(f){if(typeof dt=="function"&&Tt(f),Vt&&typeof Vt.setStrictMode=="function")try{Vt.setStrictMode(At,f)}catch{}}var he=Math.clz32?Math.clz32:De,ve=Math.log,pe=Math.LN2;function De(f){return f>>>=0,f===0?32:31-(ve(f)/pe|0)|0}var Ye=256,Nt=4194304;function Je(f){var x=f&42;if(x!==0)return x;switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return f&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return f}}function Xe(f,x,j){var _=f.pendingLanes;if(_===0)return 0;var R=0,q=f.suspendedLanes,me=f.pingedLanes;f=f.warmLanes;var Ee=_&134217727;return Ee!==0?(_=Ee&~q,_!==0?R=Je(_):(me&=Ee,me!==0?R=Je(me):j||(j=Ee&~f,j!==0&&(R=Je(j))))):(Ee=_&~q,Ee!==0?R=Je(Ee):me!==0?R=Je(me):j||(j=_&~f,j!==0&&(R=Je(j)))),R===0?0:x!==0&&x!==R&&(x&q)===0&&(q=R&-R,j=x&-x,q>=j||q===32&&(j&4194048)!==0)?x:R}function Be(f,x){return(f.pendingLanes&~(f.suspendedLanes&~f.pingedLanes)&x)===0}function qe(f,x){switch(f){case 1:case 2:case 4:case 8:case 64:return x+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ft(){var f=Ye;return Ye<<=1,(Ye&4194048)===0&&(Ye=256),f}function Ie(){var f=Nt;return Nt<<=1,(Nt&62914560)===0&&(Nt=4194304),f}function Ke(f){for(var x=[],j=0;31>j;j++)x.push(f);return x}function Ge(f,x){f.pendingLanes|=x,x!==268435456&&(f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0)}function lt(f,x,j,_,R,q){var me=f.pendingLanes;f.pendingLanes=j,f.suspendedLanes=0,f.pingedLanes=0,f.warmLanes=0,f.expiredLanes&=j,f.entangledLanes&=j,f.errorRecoveryDisabledLanes&=j,f.shellSuspendCounter=0;var Ee=f.entanglements,Ze=f.expirationTimes,Dt=f.hiddenUpdates;for(j=me&~j;0<j;){var Wt=31-he(j),tr=1<<Wt;Ee[Wt]=0,Ze[Wt]=-1;var It=Dt[Wt];if(It!==null)for(Dt[Wt]=null,Wt=0;Wt<It.length;Wt++){var Pt=It[Wt];Pt!==null&&(Pt.lane&=-536870913)}j&=~tr}_!==0&&Mt(f,_,0),q!==0&&R===0&&f.tag!==0&&(f.suspendedLanes|=q&~(me&~x))}function Mt(f,x,j){f.pendingLanes|=x,f.suspendedLanes&=~x;var _=31-he(x);f.entangledLanes|=x,f.entanglements[_]=f.entanglements[_]|1073741824|j&4194090}function Ae(f,x){var j=f.entangledLanes|=x;for(f=f.entanglements;j;){var _=31-he(j),R=1<<_;R&x|f[_]&x&&(f[_]|=x),j&=~R}}function ke(f){switch(f){case 2:f=1;break;case 8:f=4;break;case 32:f=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:f=128;break;case 268435456:f=134217728;break;default:f=0}return f}function it(f){return f&=-f,2<f?8<f?(f&134217727)!==0?32:268435456:8:2}function bt(){var f=Q.p;return f!==0?f:(f=window.event,f===void 0?32:bO(f.type))}function Xt(f,x){var j=Q.p;try{return Q.p=f,x()}finally{Q.p=j}}var Ft=Math.random().toString(36).slice(2),rr="__reactFiber$"+Ft,pr="__reactProps$"+Ft,jr="__reactContainer$"+Ft,vt="__reactEvents$"+Ft,Lt="__reactListeners$"+Ft,fe="__reactHandles$"+Ft,Me="__reactResources$"+Ft,Te="__reactMarker$"+Ft;function _e(f){delete f[rr],delete f[pr],delete f[vt],delete f[Lt],delete f[fe]}function Fe(f){var x=f[rr];if(x)return x;for(var j=f.parentNode;j;){if(x=j[jr]||j[rr]){if(j=x.alternate,x.child!==null||j!==null&&j.child!==null)for(f=nO(f);f!==null;){if(j=f[rr])return j;f=nO(f)}return x}f=j,j=f.parentNode}return null}function Ve(f){if(f=f[rr]||f[jr]){var x=f.tag;if(x===5||x===6||x===13||x===26||x===27||x===3)return f}return null}function mt(f){var x=f.tag;if(x===5||x===26||x===27||x===6)return f.stateNode;throw Error(n(33))}function wt(f){var x=f[Me];return x||(x=f[Me]={hoistableStyles:new Map,hoistableScripts:new Map}),x}function nt(f){f[Te]=!0}var St=new Set,Ct={};function Jt(f,x){ir(f,x),ir(f+"Capture",x)}function ir(f,x){for(Ct[f]=x,f=0;f<x.length;f++)St.add(x[f])}var xr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),or={},ze={};function dr(f){return X.call(ze,f)?!0:X.call(or,f)?!1:xr.test(f)?ze[f]=!0:(or[f]=!0,!1)}function ur(f,x,j){if(dr(x))if(j===null)f.removeAttribute(x);else{switch(typeof j){case"undefined":case"function":case"symbol":f.removeAttribute(x);return;case"boolean":var _=x.toLowerCase().slice(0,5);if(_!=="data-"&&_!=="aria-"){f.removeAttribute(x);return}}f.setAttribute(x,""+j)}}function Vr(f,x,j){if(j===null)f.removeAttribute(x);else{switch(typeof j){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(x);return}f.setAttribute(x,""+j)}}function va(f,x,j,_){if(_===null)f.removeAttribute(j);else{switch(typeof _){case"undefined":case"function":case"symbol":case"boolean":f.removeAttribute(j);return}f.setAttributeNS(x,j,""+_)}}var en,zs;function zn(f){if(en===void 0)try{throw Error()}catch(j){var x=j.stack.trim().match(/\n( *(at )?)/);en=x&&x[1]||"",zs=-1<j.stack.indexOf(`
    at`)?" (<anonymous>)":-1<j.stack.indexOf("@")?"@unknown:0:0":""}return`
`+en+f+zs}var fs=!1;function ks(f,x){if(!f||fs)return"";fs=!0;var j=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var _={DetermineComponentFrameRoot:function(){try{if(x){var tr=function(){throw Error()};if(Object.defineProperty(tr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(tr,[])}catch(Pt){var It=Pt}Reflect.construct(f,[],tr)}else{try{tr.call()}catch(Pt){It=Pt}f.call(tr.prototype)}}else{try{throw Error()}catch(Pt){It=Pt}(tr=f())&&typeof tr.catch=="function"&&tr.catch(function(){})}}catch(Pt){if(Pt&&It&&typeof Pt.stack=="string")return[Pt.stack,It.stack]}return[null,null]}};_.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(_.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(_.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var q=_.DetermineComponentFrameRoot(),me=q[0],Ee=q[1];if(me&&Ee){var Ze=me.split(`
`),Dt=Ee.split(`
`);for(R=_=0;_<Ze.length&&!Ze[_].includes("DetermineComponentFrameRoot");)_++;for(;R<Dt.length&&!Dt[R].includes("DetermineComponentFrameRoot");)R++;if(_===Ze.length||R===Dt.length)for(_=Ze.length-1,R=Dt.length-1;1<=_&&0<=R&&Ze[_]!==Dt[R];)R--;for(;1<=_&&0<=R;_--,R--)if(Ze[_]!==Dt[R]){if(_!==1||R!==1)do if(_--,R--,0>R||Ze[_]!==Dt[R]){var Wt=`
`+Ze[_].replace(" at new "," at ");return f.displayName&&Wt.includes("<anonymous>")&&(Wt=Wt.replace("<anonymous>",f.displayName)),Wt}while(1<=_&&0<=R);break}}}finally{fs=!1,Error.prepareStackTrace=j}return(j=f?f.displayName||f.name:"")?zn(j):""}function yt(f){switch(f.tag){case 26:case 27:case 5:return zn(f.type);case 16:return zn("Lazy");case 13:return zn("Suspense");case 19:return zn("SuspenseList");case 0:case 15:return ks(f.type,!1);case 11:return ks(f.type.render,!1);case 1:return ks(f.type,!0);case 31:return zn("Activity");default:return""}}function mr(f){try{var x="";do x+=yt(f),f=f.return;while(f);return x}catch(j){return`
Error generating stack: `+j.message+`
`+j.stack}}function hr(f){switch(typeof f){case"bigint":case"boolean":case"number":case"string":case"undefined":return f;case"object":return f;default:return""}}function Yr(f){var x=f.type;return(f=f.nodeName)&&f.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function Mr(f){var x=Yr(f)?"checked":"value",j=Object.getOwnPropertyDescriptor(f.constructor.prototype,x),_=""+f[x];if(!f.hasOwnProperty(x)&&typeof j<"u"&&typeof j.get=="function"&&typeof j.set=="function"){var R=j.get,q=j.set;return Object.defineProperty(f,x,{configurable:!0,get:function(){return R.call(this)},set:function(me){_=""+me,q.call(this,me)}}),Object.defineProperty(f,x,{enumerable:j.enumerable}),{getValue:function(){return _},setValue:function(me){_=""+me},stopTracking:function(){f._valueTracker=null,delete f[x]}}}}function on(f){f._valueTracker||(f._valueTracker=Mr(f))}function Ho(f){if(!f)return!1;var x=f._valueTracker;if(!x)return!0;var j=x.getValue(),_="";return f&&(_=Yr(f)?f.checked?"true":"false":f.value),f=_,f!==j?(x.setValue(f),!0):!1}function es(f){if(f=f||(typeof document<"u"?document:void 0),typeof f>"u")return null;try{return f.activeElement||f.body}catch{return f.body}}var Io=/[\n"\\]/g;function xa(f){return f.replace(Io,function(x){return"\\"+x.charCodeAt(0).toString(16)+" "})}function ni(f,x,j,_,R,q,me,Ee){f.name="",me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"?f.type=me:f.removeAttribute("type"),x!=null?me==="number"?(x===0&&f.value===""||f.value!=x)&&(f.value=""+hr(x)):f.value!==""+hr(x)&&(f.value=""+hr(x)):me!=="submit"&&me!=="reset"||f.removeAttribute("value"),x!=null?Go(f,me,hr(x)):j!=null?Go(f,me,hr(j)):_!=null&&f.removeAttribute("value"),R==null&&q!=null&&(f.defaultChecked=!!q),R!=null&&(f.checked=R&&typeof R!="function"&&typeof R!="symbol"),Ee!=null&&typeof Ee!="function"&&typeof Ee!="symbol"&&typeof Ee!="boolean"?f.name=""+hr(Ee):f.removeAttribute("name")}function Wo(f,x,j,_,R,q,me,Ee){if(q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(f.type=q),x!=null||j!=null){if(!(q!=="submit"&&q!=="reset"||x!=null))return;j=j!=null?""+hr(j):"",x=x!=null?""+hr(x):j,Ee||x===f.value||(f.value=x),f.defaultValue=x}_=_??R,_=typeof _!="function"&&typeof _!="symbol"&&!!_,f.checked=Ee?f.checked:!!_,f.defaultChecked=!!_,me!=null&&typeof me!="function"&&typeof me!="symbol"&&typeof me!="boolean"&&(f.name=me)}function Go(f,x,j){x==="number"&&es(f.ownerDocument)===f||f.defaultValue===""+j||(f.defaultValue=""+j)}function Oi(f,x,j,_){if(f=f.options,x){x={};for(var R=0;R<j.length;R++)x["$"+j[R]]=!0;for(j=0;j<f.length;j++)R=x.hasOwnProperty("$"+f[j].value),f[j].selected!==R&&(f[j].selected=R),R&&_&&(f[j].defaultSelected=!0)}else{for(j=""+hr(j),x=null,R=0;R<f.length;R++){if(f[R].value===j){f[R].selected=!0,_&&(f[R].defaultSelected=!0);return}x!==null||f[R].disabled||(x=f[R])}x!==null&&(x.selected=!0)}}function Va(f,x,j){if(x!=null&&(x=""+hr(x),x!==f.value&&(f.value=x),j==null)){f.defaultValue!==x&&(f.defaultValue=x);return}f.defaultValue=j!=null?""+hr(j):""}function Mi(f,x,j,_){if(x==null){if(_!=null){if(j!=null)throw Error(n(92));if(K(_)){if(1<_.length)throw Error(n(93));_=_[0]}j=_}j==null&&(j=""),x=j}j=hr(x),f.defaultValue=j,_=f.textContent,_===j&&_!==""&&_!==null&&(f.value=_)}function _s(f,x){if(x){var j=f.firstChild;if(j&&j===f.lastChild&&j.nodeType===3){j.nodeValue=x;return}}f.textContent=x}var oc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ed(f,x,j){var _=x.indexOf("--")===0;j==null||typeof j=="boolean"||j===""?_?f.setProperty(x,""):x==="float"?f.cssFloat="":f[x]="":_?f.setProperty(x,j):typeof j!="number"||j===0||oc.has(x)?x==="float"?f.cssFloat=j:f[x]=(""+j).trim():f[x]=j+"px"}function yl(f,x,j){if(x!=null&&typeof x!="object")throw Error(n(62));if(f=f.style,j!=null){for(var _ in j)!j.hasOwnProperty(_)||x!=null&&x.hasOwnProperty(_)||(_.indexOf("--")===0?f.setProperty(_,""):_==="float"?f.cssFloat="":f[_]="");for(var R in x)_=x[R],x.hasOwnProperty(R)&&j[R]!==_&&ed(f,R,_)}else for(var q in x)x.hasOwnProperty(q)&&ed(f,q,x[q])}function td(f){if(f.indexOf("-")===-1)return!1;switch(f){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nl(f){return lc.test(""+f)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":f}var cc=null;function ms(f){return f=f.target||f.srcElement||window,f.correspondingUseElement&&(f=f.correspondingUseElement),f.nodeType===3?f.parentNode:f}var dc=null,wl=null;function Jr(f){var x=Ve(f);if(x&&(f=x.stateNode)){var j=f[pr]||null;e:switch(f=x.stateNode,x.type){case"input":if(ni(f,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name),x=j.name,j.type==="radio"&&x!=null){for(j=f;j.parentNode;)j=j.parentNode;for(j=j.querySelectorAll('input[name="'+xa(""+x)+'"][type="radio"]'),x=0;x<j.length;x++){var _=j[x];if(_!==f&&_.form===f.form){var R=_[pr]||null;if(!R)throw Error(n(90));ni(_,R.value,R.defaultValue,R.defaultValue,R.checked,R.defaultChecked,R.type,R.name)}}for(x=0;x<j.length;x++)_=j[x],_.form===f.form&&Ho(_)}break e;case"textarea":Va(f,j.value,j.defaultValue);break e;case"select":x=j.value,x!=null&&Oi(f,!!j.multiple,x,!1)}}}var ih=!1;function _f(f,x,j){if(ih)return f(x,j);ih=!0;try{var _=f(x);return _}finally{if(ih=!1,(dc!==null||wl!==null)&&(ej(),dc&&(x=dc,f=wl,wl=dc=null,Jr(x),f)))for(x=0;x<f.length;x++)Jr(f[x])}}function rt(f,x){var j=f.stateNode;if(j===null)return null;var _=j[pr]||null;if(_===null)return null;j=_[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(f=f.type,_=!(f==="button"||f==="input"||f==="select"||f==="textarea")),f=!_;break e;default:f=!1}if(f)return null;if(j&&typeof j!="function")throw Error(n(231,x,typeof j));return j}var fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ar=!1;if(fr)try{var Er={};Object.defineProperty(Er,"passive",{get:function(){ar=!0}}),window.addEventListener("test",Er,Er),window.removeEventListener("test",Er,Er)}catch{ar=!1}var kr=null,kn=null,Yo=null;function Ef(){if(Yo)return Yo;var f,x=kn,j=x.length,_,R="value"in kr?kr.value:kr.textContent,q=R.length;for(f=0;f<j&&x[f]===R[f];f++);var me=j-f;for(_=1;_<=me&&x[j-_]===R[q-_];_++);return Yo=R.slice(f,1<_?1-_:void 0)}function uc(f){var x=f.keyCode;return"charCode"in f?(f=f.charCode,f===0&&x===13&&(f=13)):f=x,f===10&&(f=13),32<=f||f===13?f:0}function Ko(){return!0}function Xo(){return!1}function Es(f){function x(j,_,R,q,me){this._reactName=j,this._targetInst=R,this.type=_,this.nativeEvent=q,this.target=me,this.currentTarget=null;for(var Ee in f)f.hasOwnProperty(Ee)&&(j=f[Ee],this[Ee]=j?j(q):q[Ee]);return this.isDefaultPrevented=(q.defaultPrevented!=null?q.defaultPrevented:q.returnValue===!1)?Ko:Xo,this.isPropagationStopped=Xo,this}return u(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var j=this.nativeEvent;j&&(j.preventDefault?j.preventDefault():typeof j.returnValue!="unknown"&&(j.returnValue=!1),this.isDefaultPrevented=Ko)},stopPropagation:function(){var j=this.nativeEvent;j&&(j.stopPropagation?j.stopPropagation():typeof j.cancelBubble!="unknown"&&(j.cancelBubble=!0),this.isPropagationStopped=Ko)},persist:function(){},isPersistent:Ko}),x}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(f){return f.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hc=Es(vi),Qo=u({},vi,{view:0,detail:0}),Df=Es(Qo),rd,Af,zd,Po=u({},Qo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Of,button:0,buttons:0,relatedTarget:function(f){return f.relatedTarget===void 0?f.fromElement===f.srcElement?f.toElement:f.fromElement:f.relatedTarget},movementX:function(f){return"movementX"in f?f.movementX:(f!==zd&&(zd&&f.type==="mousemove"?(rd=f.screenX-zd.screenX,Af=f.screenY-zd.screenY):Af=rd=0,zd=f),rd)},movementY:function(f){return"movementY"in f?f.movementY:Af}}),fc=Es(Po),fg=u({},Po,{dataTransfer:0}),Hd=Es(fg),Sl=u({},Qo,{relatedTarget:0}),oh=Es(Sl),lh=u({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),mg=Es(lh),Tf=u({},vi,{clipboardData:function(f){return"clipboardData"in f?f.clipboardData:window.clipboardData}}),pg=Es(Tf),sp=u({},vi,{data:0}),If=Es(sp),Qx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ip={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function op(f){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(f):(f=ip[f])?!!x[f]:!1}function Of(){return op}var xg=u({},Qo,{key:function(f){if(f.key){var x=Qx[f.key]||f.key;if(x!=="Unidentified")return x}return f.type==="keypress"?(f=uc(f),f===13?"Enter":String.fromCharCode(f)):f.type==="keydown"||f.type==="keyup"?Pf[f.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Of,charCode:function(f){return f.type==="keypress"?uc(f):0},keyCode:function(f){return f.type==="keydown"||f.type==="keyup"?f.keyCode:0},which:function(f){return f.type==="keypress"?uc(f):f.type==="keydown"||f.type==="keyup"?f.keyCode:0}}),Mf=Es(xg),ch=u({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Rf=Es(ch),Wd=u({},Qo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Of}),lp=Es(Wd),W=u({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),be=Es(W),We=u({},Po,{deltaX:function(f){return"deltaX"in f?f.deltaX:"wheelDeltaX"in f?-f.wheelDeltaX:0},deltaY:function(f){return"deltaY"in f?f.deltaY:"wheelDeltaY"in f?-f.wheelDeltaY:"wheelDelta"in f?-f.wheelDelta:0},deltaZ:0,deltaMode:0}),tt=Es(We),jt=u({},vi,{newState:0,oldState:0}),$t=Es(jt),lr=[9,13,27,32],wr=fr&&"CompositionEvent"in window,Rr=null;fr&&"documentMode"in document&&(Rr=document.documentMode);var ua=fr&&"TextEvent"in window&&!Rr,la=fr&&(!wr||Rr&&8<Rr&&11>=Rr),Ia=" ",Tn=!1;function Rn(f,x){switch(f){case"keyup":return lr.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ts(f){return f=f.detail,typeof f=="object"&&"data"in f?f.data:null}var rs=!1;function Hs(f,x){switch(f){case"compositionend":return ts(x);case"keypress":return x.which!==32?null:(Tn=!0,Ia);case"textInput":return f=x.data,f===Ia&&Tn?null:f;default:return null}}function Cl(f,x){if(rs)return f==="compositionend"||!wr&&Rn(f,x)?(f=Ef(),Yo=kn=kr=null,rs=!1,f):null;switch(f){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return la&&x.locale!=="ko"?null:x.data;default:return null}}var Oo={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kl(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x==="input"?!!Oo[f.type]:x==="textarea"}function cp(f,x,j,_){dc?wl?wl.push(_):wl=[_]:dc=_,x=ij(x,"onChange"),0<x.length&&(j=new hc("onChange","change",null,j,_),f.push({event:j,listeners:x}))}var ad=null,nd=null;function Ff(f){YP(f,0)}function Gd(f){var x=mt(f);if(Ho(x))return f}function Lf(f,x){if(f==="change")return x}var dh=!1;if(fr){var Ds;if(fr){var Yd="oninput"in document;if(!Yd){var uh=document.createElement("div");uh.setAttribute("oninput","return;"),Yd=typeof uh.oninput=="function"}Ds=Yd}else Ds=!1;dh=Ds&&(!document.documentMode||9<document.documentMode)}function hh(){ad&&(ad.detachEvent("onpropertychange",Bf),nd=ad=null)}function Bf(f){if(f.propertyName==="value"&&Gd(nd)){var x=[];cp(x,nd,f,ms(f)),_f(Ff,x)}}function to(f,x,j){f==="focusin"?(hh(),ad=x,nd=j,ad.attachEvent("onpropertychange",Bf)):f==="focusout"&&hh()}function vg(f){if(f==="selectionchange"||f==="keyup"||f==="keydown")return Gd(nd)}function dp(f,x){if(f==="click")return Gd(x)}function Jx(f,x){if(f==="input"||f==="change")return Gd(x)}function Jo(f,x){return f===x&&(f!==0||1/f===1/x)||f!==f&&x!==x}var Ws=typeof Object.is=="function"?Object.is:Jo;function Kd(f,x){if(Ws(f,x))return!0;if(typeof f!="object"||f===null||typeof x!="object"||x===null)return!1;var j=Object.keys(f),_=Object.keys(x);if(j.length!==_.length)return!1;for(_=0;_<j.length;_++){var R=j[_];if(!X.call(x,R)||!Ws(f[R],x[R]))return!1}return!0}function up(f){for(;f&&f.firstChild;)f=f.firstChild;return f}function sd(f,x){var j=up(f);f=0;for(var _;j;){if(j.nodeType===3){if(_=f+j.textContent.length,f<=x&&_>=x)return{node:j,offset:x-f};f=_}e:{for(;j;){if(j.nextSibling){j=j.nextSibling;break e}j=j.parentNode}j=void 0}j=up(j)}}function Xd(f,x){return f&&x?f===x?!0:f&&f.nodeType===3?!1:x&&x.nodeType===3?Xd(f,x.parentNode):"contains"in f?f.contains(x):f.compareDocumentPosition?!!(f.compareDocumentPosition(x)&16):!1:!1}function Ri(f){f=f!=null&&f.ownerDocument!=null&&f.ownerDocument.defaultView!=null?f.ownerDocument.defaultView:window;for(var x=es(f.document);x instanceof f.HTMLIFrameElement;){try{var j=typeof x.contentWindow.location.href=="string"}catch{j=!1}if(j)f=x.contentWindow;else break;x=es(f.document)}return x}function si(f){var x=f&&f.nodeName&&f.nodeName.toLowerCase();return x&&(x==="input"&&(f.type==="text"||f.type==="search"||f.type==="tel"||f.type==="url"||f.type==="password")||x==="textarea"||f.contentEditable==="true")}var Qd=fr&&"documentMode"in document&&11>=document.documentMode,ro=null,_l=null,mc=null,El=!1;function Hn(f,x,j){var _=j.window===j?j.document:j.nodeType===9?j:j.ownerDocument;El||ro==null||ro!==es(_)||(_=ro,"selectionStart"in _&&si(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),mc&&Kd(mc,_)||(mc=_,_=ij(_l,"onSelect"),0<_.length&&(x=new hc("onSelect","select",null,x,j),f.push({event:x,listeners:_}),x.target=ro)))}function Dl(f,x){var j={};return j[f.toLowerCase()]=x.toLowerCase(),j["Webkit"+f]="webkit"+x,j["Moz"+f]="moz"+x,j}var ps={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionrun:Dl("Transition","TransitionRun"),transitionstart:Dl("Transition","TransitionStart"),transitioncancel:Dl("Transition","TransitionCancel"),transitionend:Dl("Transition","TransitionEnd")},ao={},fh={};fr&&(fh=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function pc(f){if(ao[f])return ao[f];if(!ps[f])return f;var x=ps[f],j;for(j in x)if(x.hasOwnProperty(j)&&j in fh)return ao[f]=x[j];return f}var Uf=pc("animationend"),Jd=pc("animationiteration"),Zd=pc("animationstart"),eu=pc("transitionrun"),mh=pc("transitionstart"),$f=pc("transitioncancel"),tu=pc("transitionend"),id=new Map,ph="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ph.push("scrollEnd");function Wn(f,x){id.set(f,x),Jt(x,[f])}var Mo=new WeakMap;function Ca(f,x){if(typeof f=="object"&&f!==null){var j=Mo.get(f);return j!==void 0?j:(x={value:f,source:x,stack:mr(x)},Mo.set(f,x),x)}return{value:f,source:x,stack:mr(x)}}var ka=[],jn=0,as=0;function Zo(){for(var f=jn,x=as=jn=0;x<f;){var j=ka[x];ka[x++]=null;var _=ka[x];ka[x++]=null;var R=ka[x];ka[x++]=null;var q=ka[x];if(ka[x++]=null,_!==null&&R!==null){var me=_.pending;me===null?R.next=R:(R.next=me.next,me.next=R),_.pending=R}q!==0&&Zx(j,R,q)}}function ru(f,x,j,_){ka[jn++]=f,ka[jn++]=x,ka[jn++]=j,ka[jn++]=_,as|=_,f.lanes|=_,f=f.alternate,f!==null&&(f.lanes|=_)}function au(f,x,j,_){return ru(f,x,j,_),xh(f)}function od(f,x){return ru(f,null,null,x),xh(f)}function Zx(f,x,j){f.lanes|=j;var _=f.alternate;_!==null&&(_.lanes|=j);for(var R=!1,q=f.return;q!==null;)q.childLanes|=j,_=q.alternate,_!==null&&(_.childLanes|=j),q.tag===22&&(f=q.stateNode,f===null||f._visibility&1||(R=!0)),f=q,q=q.return;return f.tag===3?(q=f.stateNode,R&&x!==null&&(R=31-he(j),f=q.hiddenUpdates,_=f[R],_===null?f[R]=[x]:_.push(x),x.lane=j|536870912),q):null}function xh(f){if(50<Vg)throw Vg=0,TC=null,Error(n(185));for(var x=f.return;x!==null;)f=x,x=f.return;return f.tag===3?f.stateNode:null}var Gs={};function el(f,x,j,_){this.tag=f,this.key=j,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gi(f,x,j,_){return new el(f,x,j,_)}function Vf(f){return f=f.prototype,!(!f||!f.isReactComponent)}function xc(f,x){var j=f.alternate;return j===null?(j=gi(f.tag,x,f.key,f.mode),j.elementType=f.elementType,j.type=f.type,j.stateNode=f.stateNode,j.alternate=f,f.alternate=j):(j.pendingProps=x,j.type=f.type,j.flags=0,j.subtreeFlags=0,j.deletions=null),j.flags=f.flags&65011712,j.childLanes=f.childLanes,j.lanes=f.lanes,j.child=f.child,j.memoizedProps=f.memoizedProps,j.memoizedState=f.memoizedState,j.updateQueue=f.updateQueue,x=f.dependencies,j.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},j.sibling=f.sibling,j.index=f.index,j.ref=f.ref,j.refCleanup=f.refCleanup,j}function hp(f,x){f.flags&=65011714;var j=f.alternate;return j===null?(f.childLanes=0,f.lanes=x,f.child=null,f.subtreeFlags=0,f.memoizedProps=null,f.memoizedState=null,f.updateQueue=null,f.dependencies=null,f.stateNode=null):(f.childLanes=j.childLanes,f.lanes=j.lanes,f.child=j.child,f.subtreeFlags=0,f.deletions=null,f.memoizedProps=j.memoizedProps,f.memoizedState=j.memoizedState,f.updateQueue=j.updateQueue,f.type=j.type,x=j.dependencies,f.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext}),f}function vh(f,x,j,_,R,q){var me=0;if(_=f,typeof f=="function")Vf(f)&&(me=1);else if(typeof f=="string")me=zX(f,j,H.current)?26:f==="html"||f==="head"||f==="body"?27:5;else e:switch(f){case A:return f=gi(31,j,x,R),f.elementType=A,f.lanes=q,f;case v:return ld(j.children,R,q,x);case g:me=8,R|=24;break;case b:return f=gi(12,j,x,R|2),f.elementType=b,f.lanes=q,f;case S:return f=gi(13,j,x,R),f.elementType=S,f.lanes=q,f;case D:return f=gi(19,j,x,R),f.elementType=D,f.lanes=q,f;default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case y:case w:me=10;break e;case C:me=9;break e;case k:me=11;break e;case E:me=14;break e;case T:me=16,_=null;break e}me=29,j=Error(n(130,f===null?"null":typeof f,"")),_=null}return x=gi(me,j,x,R),x.elementType=f,x.type=_,x.lanes=q,x}function ld(f,x,j,_){return f=gi(7,f,_,x),f.lanes=j,f}function ev(f,x,j){return f=gi(6,f,null,x),f.lanes=j,f}function fp(f,x,j){return x=gi(4,f.children!==null?f.children:[],f.key,x),x.lanes=j,x.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},x}var nu=[],cd=0,qf=null,tv=0,tl=[],Ro=0,gh=null,dd=1,ud="";function bh(f,x){nu[cd++]=tv,nu[cd++]=qf,qf=f,tv=x}function S1(f,x,j){tl[Ro++]=dd,tl[Ro++]=ud,tl[Ro++]=gh,gh=f;var _=dd;f=ud;var R=32-he(_)-1;_&=~(1<<R),j+=1;var q=32-he(x)+R;if(30<q){var me=R-R%5;q=(_&(1<<me)-1).toString(32),_>>=me,R-=me,dd=1<<32-he(x)+R|j<<R|_,ud=q+f}else dd=1<<q|j<<R|_,ud=f}function mp(f){f.return!==null&&(bh(f,1),S1(f,1,0))}function pp(f){for(;f===qf;)qf=nu[--cd],nu[cd]=null,tv=nu[--cd],nu[cd]=null;for(;f===gh;)gh=tl[--Ro],tl[Ro]=null,ud=tl[--Ro],tl[Ro]=null,dd=tl[--Ro],tl[Ro]=null}var As=null,Gn=null,qa=!1,su=null,vc=!1,gg=Error(n(519));function yh(f){var x=Error(n(418,""));throw zf(Ca(x,f)),gg}function C1(f){var x=f.stateNode,j=f.type,_=f.memoizedProps;switch(x[rr]=f,x[pr]=_,j){case"dialog":Oa("cancel",x),Oa("close",x);break;case"iframe":case"object":case"embed":Oa("load",x);break;case"video":case"audio":for(j=0;j<zg.length;j++)Oa(zg[j],x);break;case"source":Oa("error",x);break;case"img":case"image":case"link":Oa("error",x),Oa("load",x);break;case"details":Oa("toggle",x);break;case"input":Oa("invalid",x),Wo(x,_.value,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name,!0),on(x);break;case"select":Oa("invalid",x);break;case"textarea":Oa("invalid",x),Mi(x,_.value,_.defaultValue,_.children),on(x)}j=_.children,typeof j!="string"&&typeof j!="number"&&typeof j!="bigint"||x.textContent===""+j||_.suppressHydrationWarning===!0||JP(x.textContent,j)?(_.popover!=null&&(Oa("beforetoggle",x),Oa("toggle",x)),_.onScroll!=null&&Oa("scroll",x),_.onScrollEnd!=null&&Oa("scrollend",x),_.onClick!=null&&(x.onclick=oj),x=!0):x=!1,x||yh(f)}function hd(f){for(As=f.return;As;)switch(As.tag){case 5:case 13:vc=!1;return;case 27:case 3:vc=!0;return;default:As=As.return}}function Fi(f){if(f!==As)return!1;if(!qa)return hd(f),qa=!0,!1;var x=f.tag,j;if((j=x!==3&&x!==27)&&((j=x===5)&&(j=f.type,j=!(j!=="form"&&j!=="button")||GC(f.type,f.memoizedProps)),j=!j),j&&Gn&&yh(f),hd(f),x===13){if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));e:{for(f=f.nextSibling,x=0;f;){if(f.nodeType===8)if(j=f.data,j==="/$"){if(x===0){Gn=yd(f.nextSibling);break e}x--}else j!=="$"&&j!=="$!"&&j!=="$?"||x++;f=f.nextSibling}Gn=null}}else x===27?(x=Gn,om(f.type)?(f=QC,QC=null,Gn=f):Gn=x):Gn=As?yd(f.stateNode.nextSibling):null;return!0}function Fo(){Gn=As=null,qa=!1}function k1(){var f=su;return f!==null&&(nl===null?nl=f:nl.push.apply(nl,f),su=null),f}function zf(f){su===null?su=[f]:su.push(f)}var gc=oe(null),Ys=null,fd=null;function iu(f,x,j){V(gc,x._currentValue),x._currentValue=j}function bc(f){f._currentValue=gc.current,M(gc)}function rv(f,x,j){for(;f!==null;){var _=f.alternate;if((f.childLanes&x)!==x?(f.childLanes|=x,_!==null&&(_.childLanes|=x)):_!==null&&(_.childLanes&x)!==x&&(_.childLanes|=x),f===j)break;f=f.return}}function av(f,x,j,_){var R=f.child;for(R!==null&&(R.return=f);R!==null;){var q=R.dependencies;if(q!==null){var me=R.child;q=q.firstContext;e:for(;q!==null;){var Ee=q;q=R;for(var Ze=0;Ze<x.length;Ze++)if(Ee.context===x[Ze]){q.lanes|=j,Ee=q.alternate,Ee!==null&&(Ee.lanes|=j),rv(q.return,j,f),_||(me=null);break e}q=Ee.next}}else if(R.tag===18){if(me=R.return,me===null)throw Error(n(341));me.lanes|=j,q=me.alternate,q!==null&&(q.lanes|=j),rv(me,j,f),me=null}else me=R.child;if(me!==null)me.return=R;else for(me=R;me!==null;){if(me===f){me=null;break}if(R=me.sibling,R!==null){R.return=me.return,me=R;break}me=me.return}R=me}}function Hf(f,x,j,_){f=null;for(var R=x,q=!1;R!==null;){if(!q){if((R.flags&524288)!==0)q=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var me=R.alternate;if(me===null)throw Error(n(387));if(me=me.memoizedProps,me!==null){var Ee=R.type;Ws(R.pendingProps.value,me.value)||(f!==null?f.push(Ee):f=[Ee])}}else if(R===ae.current){if(me=R.alternate,me===null)throw Error(n(387));me.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(f!==null?f.push(Xg):f=[Xg])}R=R.return}f!==null&&av(x,f,j,_),x.flags|=262144}function nv(f){for(f=f.firstContext;f!==null;){if(!Ws(f.context._currentValue,f.memoizedValue))return!0;f=f.next}return!1}function yc(f){Ys=f,fd=null,f=f.dependencies,f!==null&&(f.firstContext=null)}function Ts(f){return sv(Ys,f)}function ou(f,x){return Ys===null&&yc(f),sv(f,x)}function sv(f,x){var j=x._currentValue;if(x={context:x,memoizedValue:j,next:null},fd===null){if(f===null)throw Error(n(308));fd=x,f.dependencies={lanes:0,firstContext:x},f.flags|=524288}else fd=fd.next=x;return j}var rC=typeof AbortController<"u"?AbortController:function(){var f=[],x=this.signal={aborted:!1,addEventListener:function(j,_){f.push(_)}};this.abort=function(){x.aborted=!0,f.forEach(function(j){return j()})}},_1=e.unstable_scheduleCallback,aC=e.unstable_NormalPriority,Is={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function bg(){return{controller:new rC,data:new Map,refCount:0}}function xp(f){f.refCount--,f.refCount===0&&_1(aC,function(){f.controller.abort()})}var vp=null,yg=0,jh=0,md=null;function nC(f,x){if(vp===null){var j=vp=[];yg=0,jh=LC(),md={status:"pending",value:void 0,then:function(_){j.push(_)}}}return yg++,x.then(E1,E1),x}function E1(){if(--yg===0&&vp!==null){md!==null&&(md.status="fulfilled");var f=vp;vp=null,jh=0,md=null;for(var x=0;x<f.length;x++)(0,f[x])()}}function D1(f,x){var j=[],_={status:"pending",value:null,reason:null,then:function(R){j.push(R)}};return f.then(function(){_.status="fulfilled",_.value=x;for(var R=0;R<j.length;R++)(0,j[R])(x)},function(R){for(_.status="rejected",_.reason=R,R=0;R<j.length;R++)(0,j[R])(void 0)}),_}var I=B.S;B.S=function(f,x){typeof x=="object"&&x!==null&&typeof x.then=="function"&&nC(f,x),I!==null&&I(f,x)};var F=oe(null);function te(){var f=F.current;return f!==null?f:Pn.pooledCache}function ce(f,x){x===null?V(F,F.current):V(F,x.pool)}function ge(){var f=te();return f===null?null:{parent:Is._currentValue,pool:f}}var je=Error(n(460)),we=Error(n(474)),Ce=Error(n(542)),Pe={then:function(){}};function $e(f){return f=f.status,f==="fulfilled"||f==="rejected"}function at(){}function Et(f,x,j){switch(j=f[j],j===void 0?f.push(x):j!==x&&(x.then(at,at),x=j),x.status){case"fulfilled":return x.value;case"rejected":throw f=x.reason,Zt(f),f;default:if(typeof x.status=="string")x.then(at,at);else{if(f=Pn,f!==null&&100<f.shellSuspendCounter)throw Error(n(482));f=x,f.status="pending",f.then(function(_){if(x.status==="pending"){var R=x;R.status="fulfilled",R.value=_}},function(_){if(x.status==="pending"){var R=x;R.status="rejected",R.reason=_}})}switch(x.status){case"fulfilled":return x.value;case"rejected":throw f=x.reason,Zt(f),f}throw kt=x,je}}var kt=null;function pt(){if(kt===null)throw Error(n(459));var f=kt;return kt=null,f}function Zt(f){if(f===je||f===Ce)throw Error(n(483))}var Rt=!1;function st(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ut(f,x){f=f.updateQueue,x.updateQueue===f&&(x.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,callbacks:null})}function Ht(f){return{lane:f,tag:0,payload:null,callback:null,next:null}}function er(f,x,j){var _=f.updateQueue;if(_===null)return null;if(_=_.shared,(fn&2)!==0){var R=_.pending;return R===null?x.next=x:(x.next=R.next,R.next=x),_.pending=x,x=xh(f),Zx(f,null,j),x}return ru(f,_,x,j),xh(f)}function Yt(f,x,j){if(x=x.updateQueue,x!==null&&(x=x.shared,(j&4194048)!==0)){var _=x.lanes;_&=f.pendingLanes,j|=_,x.lanes=j,Ae(f,j)}}function Sr(f,x){var j=f.updateQueue,_=f.alternate;if(_!==null&&(_=_.updateQueue,j===_)){var R=null,q=null;if(j=j.firstBaseUpdate,j!==null){do{var me={lane:j.lane,tag:j.tag,payload:j.payload,callback:null,next:null};q===null?R=q=me:q=q.next=me,j=j.next}while(j!==null);q===null?R=q=x:q=q.next=x}else R=q=x;j={baseState:_.baseState,firstBaseUpdate:R,lastBaseUpdate:q,shared:_.shared,callbacks:_.callbacks},f.updateQueue=j;return}f=j.lastBaseUpdate,f===null?j.firstBaseUpdate=x:f.next=x,j.lastBaseUpdate=x}var br=!1;function qr(){if(br){var f=md;if(f!==null)throw f}}function yr(f,x,j,_){br=!1;var R=f.updateQueue;Rt=!1;var q=R.firstBaseUpdate,me=R.lastBaseUpdate,Ee=R.shared.pending;if(Ee!==null){R.shared.pending=null;var Ze=Ee,Dt=Ze.next;Ze.next=null,me===null?q=Dt:me.next=Dt,me=Ze;var Wt=f.alternate;Wt!==null&&(Wt=Wt.updateQueue,Ee=Wt.lastBaseUpdate,Ee!==me&&(Ee===null?Wt.firstBaseUpdate=Dt:Ee.next=Dt,Wt.lastBaseUpdate=Ze))}if(q!==null){var tr=R.baseState;me=0,Wt=Dt=Ze=null,Ee=q;do{var It=Ee.lane&-536870913,Pt=It!==Ee.lane;if(Pt?(Ba&It)===It:(_&It)===It){It!==0&&It===jh&&(br=!0),Wt!==null&&(Wt=Wt.next={lane:0,tag:Ee.tag,payload:Ee.payload,callback:null,next:null});e:{var ia=f,Qr=Ee;It=x;var wn=j;switch(Qr.tag){case 1:if(ia=Qr.payload,typeof ia=="function"){tr=ia.call(wn,tr,It);break e}tr=ia;break e;case 3:ia.flags=ia.flags&-65537|128;case 0:if(ia=Qr.payload,It=typeof ia=="function"?ia.call(wn,tr,It):ia,It==null)break e;tr=u({},tr,It);break e;case 2:Rt=!0}}It=Ee.callback,It!==null&&(f.flags|=64,Pt&&(f.flags|=8192),Pt=R.callbacks,Pt===null?R.callbacks=[It]:Pt.push(It))}else Pt={lane:It,tag:Ee.tag,payload:Ee.payload,callback:Ee.callback,next:null},Wt===null?(Dt=Wt=Pt,Ze=tr):Wt=Wt.next=Pt,me|=It;if(Ee=Ee.next,Ee===null){if(Ee=R.shared.pending,Ee===null)break;Pt=Ee,Ee=Pt.next,Pt.next=null,R.lastBaseUpdate=Pt,R.shared.pending=null}}while(!0);Wt===null&&(Ze=tr),R.baseState=Ze,R.firstBaseUpdate=Dt,R.lastBaseUpdate=Wt,q===null&&(R.shared.lanes=0),am|=me,f.lanes=me,f.memoizedState=tr}}function Fa(f,x){if(typeof f!="function")throw Error(n(191,f));f.call(x)}function Ya(f,x){var j=f.callbacks;if(j!==null)for(f.callbacks=null,f=0;f<j.length;f++)Fa(j[f],x)}var Sa=oe(null),ya=oe(0);function ln(f,x){f=Th,V(ya,f),V(Sa,x),Th=f|x.baseLanes}function Ka(){V(ya,Th),V(Sa,Sa.current)}function da(){Th=ya.current,M(Sa),M(ya)}var hn=0,Gr=null,aa=null,Ra=null,La=!1,Ks=!1,Ps=!1,ns=0,ss=0,xs=null,rl=0;function Xa(){throw Error(n(321))}function vs(f,x){if(x===null)return!1;for(var j=0;j<x.length&&j<f.length;j++)if(!Ws(f[j],x[j]))return!1;return!0}function Al(f,x,j,_,R,q){return hn=q,Gr=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,B.H=f===null||f.memoizedState===null?II:PI,Ps=!1,q=j(_,R),Ps=!1,Ks&&(q=Nh(x,j,_,R)),lu(f),q}function lu(f){B.H=$1;var x=aa!==null&&aa.next!==null;if(hn=0,Ra=aa=Gr=null,La=!1,ss=0,xs=null,x)throw Error(n(300));f===null||bi||(f=f.dependencies,f!==null&&nv(f)&&(bi=!0))}function Nh(f,x,j,_){Gr=f;var R=0;do{if(Ks&&(xs=null),ss=0,Ks=!1,25<=R)throw Error(n(301));if(R+=1,Ra=aa=null,f.updateQueue!=null){var q=f.updateQueue;q.lastEffect=null,q.events=null,q.stores=null,q.memoCache!=null&&(q.memoCache.index=0)}B.H=tX,q=x(j,_)}while(Ks);return q}function cu(){var f=B.H,x=f.useState()[0];return x=typeof x.then=="function"?du(x):x,f=f.useState()[0],(aa!==null?aa.memoizedState:null)!==f&&(Gr.flags|=1024),x}function In(){var f=ns!==0;return ns=0,f}function gp(f,x,j){x.updateQueue=f.updateQueue,x.flags&=-2053,f.lanes&=~j}function iv(f){if(La){for(f=f.memoizedState;f!==null;){var x=f.queue;x!==null&&(x.pending=null),f=f.next}La=!1}hn=0,Ra=aa=Gr=null,Ks=!1,ss=ns=0,xs=null}function Li(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ra===null?Gr.memoizedState=Ra=f:Ra=Ra.next=f,Ra}function Fn(){if(aa===null){var f=Gr.alternate;f=f!==null?f.memoizedState:null}else f=aa.next;var x=Ra===null?Gr.memoizedState:Ra.next;if(x!==null)Ra=x,aa=f;else{if(f===null)throw Gr.alternate===null?Error(n(467)):Error(n(310));aa=f,f={memoizedState:aa.memoizedState,baseState:aa.baseState,baseQueue:aa.baseQueue,queue:aa.queue,next:null},Ra===null?Gr.memoizedState=Ra=f:Ra=Ra.next=f}return Ra}function wh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(f){var x=ss;return ss+=1,xs===null&&(xs=[]),f=Et(xs,f,x),x=Gr,(Ra===null?x.memoizedState:Ra.next)===null&&(x=x.alternate,B.H=x===null||x.memoizedState===null?II:PI),f}function no(f){if(f!==null&&typeof f=="object"){if(typeof f.then=="function")return du(f);if(f.$$typeof===w)return Ts(f)}throw Error(n(438,String(f)))}function uu(f){var x=null,j=Gr.updateQueue;if(j!==null&&(x=j.memoCache),x==null){var _=Gr.alternate;_!==null&&(_=_.updateQueue,_!==null&&(_=_.memoCache,_!=null&&(x={data:_.data.map(function(R){return R.slice()}),index:0})))}if(x==null&&(x={data:[],index:0}),j===null&&(j=wh(),Gr.updateQueue=j),j.memoCache=x,j=x.data[x.index],j===void 0)for(j=x.data[x.index]=Array(f),_=0;_<f;_++)j[_]=L;return x.index++,j}function so(f,x){return typeof x=="function"?x(f):x}function bp(f){var x=Fn();return Wf(x,aa,f)}function Wf(f,x,j){var _=f.queue;if(_===null)throw Error(n(311));_.lastRenderedReducer=j;var R=f.baseQueue,q=_.pending;if(q!==null){if(R!==null){var me=R.next;R.next=q.next,q.next=me}x.baseQueue=R=q,_.pending=null}if(q=f.baseState,R===null)f.memoizedState=q;else{x=R.next;var Ee=me=null,Ze=null,Dt=x,Wt=!1;do{var tr=Dt.lane&-536870913;if(tr!==Dt.lane?(Ba&tr)===tr:(hn&tr)===tr){var It=Dt.revertLane;if(It===0)Ze!==null&&(Ze=Ze.next={lane:0,revertLane:0,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),tr===jh&&(Wt=!0);else if((hn&It)===It){Dt=Dt.next,It===jh&&(Wt=!0);continue}else tr={lane:0,revertLane:Dt.revertLane,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},Ze===null?(Ee=Ze=tr,me=q):Ze=Ze.next=tr,Gr.lanes|=It,am|=It;tr=Dt.action,Ps&&j(q,tr),q=Dt.hasEagerState?Dt.eagerState:j(q,tr)}else It={lane:tr,revertLane:Dt.revertLane,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null},Ze===null?(Ee=Ze=It,me=q):Ze=Ze.next=It,Gr.lanes|=tr,am|=tr;Dt=Dt.next}while(Dt!==null&&Dt!==x);if(Ze===null?me=q:Ze.next=Ee,!Ws(q,f.memoizedState)&&(bi=!0,Wt&&(j=md,j!==null)))throw j;f.memoizedState=q,f.baseState=me,f.baseQueue=Ze,_.lastRenderedState=q}return R===null&&(_.lanes=0),[f.memoizedState,_.dispatch]}function ov(f){var x=Fn(),j=x.queue;if(j===null)throw Error(n(311));j.lastRenderedReducer=f;var _=j.dispatch,R=j.pending,q=x.memoizedState;if(R!==null){j.pending=null;var me=R=R.next;do q=f(q,me.action),me=me.next;while(me!==R);Ws(q,x.memoizedState)||(bi=!0),x.memoizedState=q,x.baseQueue===null&&(x.baseState=q),j.lastRenderedState=q}return[q,_]}function yp(f,x,j){var _=Gr,R=Fn(),q=qa;if(q){if(j===void 0)throw Error(n(407));j=j()}else j=x();var me=!Ws((aa||R).memoizedState,j);me&&(R.memoizedState=j,bi=!0),R=R.queue;var Ee=Gf.bind(null,_,R,f);if(Xf(2048,8,Ee,[f]),R.getSnapshot!==x||me||Ra!==null&&Ra.memoizedState.tag&1){if(_.flags|=2048,xd(9,Sp(),jp.bind(null,_,R,j,x),null),Pn===null)throw Error(n(349));q||(hn&124)!==0||lv(_,x,j)}return j}function lv(f,x,j){f.flags|=16384,f={getSnapshot:x,value:j},x=Gr.updateQueue,x===null?(x=wh(),Gr.updateQueue=x,x.stores=[f]):(j=x.stores,j===null?x.stores=[f]:j.push(f))}function jp(f,x,j,_){x.value=j,x.getSnapshot=_,A1(x)&&T1(f)}function Gf(f,x,j){return j(function(){A1(x)&&T1(f)})}function A1(f){var x=f.getSnapshot;f=f.value;try{var j=x();return!Ws(f,j)}catch{return!0}}function T1(f){var x=od(f,2);x!==null&&Rl(x,f,2)}function Np(f){var x=Li();if(typeof f=="function"){var j=f;if(f=j(),Ps){xe(!0);try{j()}finally{xe(!1)}}}return x.memoizedState=x.baseState=f,x.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:f},x}function pd(f,x,j,_){return f.baseState=j,Wf(f,aa,typeof _=="function"?_:so)}function sC(f,x,j,_,R){if(U1(f))throw Error(n(485));if(f=x.action,f!==null){var q={payload:R,action:f,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(me){q.listeners.push(me)}};B.T!==null?j(!0):q.isTransition=!1,_(q),j=x.pending,j===null?(q.next=x.pending=q,I1(x,q)):(q.next=j.next,x.pending=j.next=q)}}function I1(f,x){var j=x.action,_=x.payload,R=f.state;if(x.isTransition){var q=B.T,me={};B.T=me;try{var Ee=j(R,_),Ze=B.S;Ze!==null&&Ze(me,Ee),P1(f,x,Ee)}catch(Dt){Yf(f,x,Dt)}finally{B.T=q}}else try{q=j(R,_),P1(f,x,q)}catch(Dt){Yf(f,x,Dt)}}function P1(f,x,j){j!==null&&typeof j=="object"&&typeof j.then=="function"?j.then(function(_){jg(f,x,_)},function(_){return Yf(f,x,_)}):jg(f,x,j)}function jg(f,x,j){x.status="fulfilled",x.value=j,Ng(x),f.state=j,x=f.pending,x!==null&&(j=x.next,j===x?f.pending=null:(j=j.next,x.next=j,I1(f,j)))}function Yf(f,x,j){var _=f.pending;if(f.pending=null,_!==null){_=_.next;do x.status="rejected",x.reason=j,Ng(x),x=x.next;while(x!==_)}f.action=null}function Ng(f){f=f.listeners;for(var x=0;x<f.length;x++)(0,f[x])()}function wg(f,x){return x}function wp(f,x){if(qa){var j=Pn.formState;if(j!==null){e:{var _=Gr;if(qa){if(Gn){t:{for(var R=Gn,q=vc;R.nodeType!==8;){if(!q){R=null;break t}if(R=yd(R.nextSibling),R===null){R=null;break t}}q=R.data,R=q==="F!"||q==="F"?R:null}if(R){Gn=yd(R.nextSibling),_=R.data==="F!";break e}}yh(_)}_=!1}_&&(x=j[0])}}return j=Li(),j.memoizedState=j.baseState=x,_={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wg,lastRenderedState:x},j.queue=_,j=DI.bind(null,Gr,_),_.dispatch=j,_=Np(!1),q=iC.bind(null,Gr,!1,_.queue),_=Li(),R={state:x,dispatch:null,action:f,pending:null},_.queue=R,j=sC.bind(null,Gr,R,q,j),R.dispatch=j,_.memoizedState=f,[x,j,!1]}function cv(f){var x=Fn();return Kf(x,aa,f)}function Kf(f,x,j){if(x=Wf(f,x,wg)[0],f=bp(so)[0],typeof x=="object"&&x!==null&&typeof x.then=="function")try{var _=du(x)}catch(me){throw me===je?Ce:me}else _=x;x=Fn();var R=x.queue,q=R.dispatch;return j!==x.memoizedState&&(Gr.flags|=2048,xd(9,Sp(),O1.bind(null,R,j),null)),[_,q,f]}function O1(f,x){f.action=x}function M1(f){var x=Fn(),j=aa;if(j!==null)return Kf(x,j,f);Fn(),x=x.memoizedState,j=Fn();var _=j.queue.dispatch;return j.memoizedState=f,[x,_,!1]}function xd(f,x,j,_){return f={tag:f,create:j,deps:_,inst:x,next:null},x=Gr.updateQueue,x===null&&(x=wh(),Gr.updateQueue=x),j=x.lastEffect,j===null?x.lastEffect=f.next=f:(_=j.next,j.next=f,f.next=_,x.lastEffect=f),f}function Sp(){return{destroy:void 0,resource:void 0}}function dv(){return Fn().memoizedState}function Tl(f,x,j,_){var R=Li();_=_===void 0?null:_,Gr.flags|=f,R.memoizedState=xd(1|x,Sp(),j,_)}function Xf(f,x,j,_){var R=Fn();_=_===void 0?null:_;var q=R.memoizedState.inst;aa!==null&&_!==null&&vs(_,aa.memoizedState.deps)?R.memoizedState=xd(x,q,j,_):(Gr.flags|=f,R.memoizedState=xd(1|x,q,j,_))}function Sg(f,x){Tl(8390656,8,f,x)}function R1(f,x){Xf(2048,8,f,x)}function Cg(f,x){return Xf(4,2,f,x)}function Sh(f,x){return Xf(4,4,f,x)}function F1(f,x){if(typeof x=="function"){f=f();var j=x(f);return function(){typeof j=="function"?j():x(null)}}if(x!=null)return f=f(),x.current=f,function(){x.current=null}}function kg(f,x,j){j=j!=null?j.concat([f]):null,Xf(4,4,F1.bind(null,x,f),j)}function _g(){}function Eg(f,x){var j=Fn();x=x===void 0?null:x;var _=j.memoizedState;return x!==null&&vs(x,_[1])?_[0]:(j.memoizedState=[f,x],f)}function L1(f,x){var j=Fn();x=x===void 0?null:x;var _=j.memoizedState;if(x!==null&&vs(x,_[1]))return _[0];if(_=f(),Ps){xe(!0);try{f()}finally{xe(!1)}}return j.memoizedState=[_,x],_}function Ch(f,x,j){return j===void 0||(hn&1073741824)!==0?f.memoizedState=x:(f.memoizedState=j,f=CP(),Gr.lanes|=f,am|=f,j)}function uv(f,x,j,_){return Ws(j,x)?j:Sa.current!==null?(f=Ch(f,j,_),Ws(f,x)||(bi=!0),f):(hn&42)===0?(bi=!0,f.memoizedState=j):(f=CP(),Gr.lanes|=f,am|=f,x)}function Cp(f,x,j,_,R){var q=Q.p;Q.p=q!==0&&8>q?q:8;var me=B.T,Ee={};B.T=Ee,iC(f,!1,x,j);try{var Ze=R(),Dt=B.S;if(Dt!==null&&Dt(Ee,Ze),Ze!==null&&typeof Ze=="object"&&typeof Ze.then=="function"){var Wt=D1(Ze,_);Ig(f,x,Wt,Ml(f))}else Ig(f,x,_,Ml(f))}catch(tr){Ig(f,x,{then:function(){},status:"rejected",reason:tr},Ml())}finally{Q.p=q,B.T=me}}function vd(){}function jc(f,x,j,_){if(f.tag!==5)throw Error(n(476));var R=gd(f).queue;Cp(f,R,x,U,j===null?vd:function(){return kp(f),j(_)})}function gd(f){var x=f.memoizedState;if(x!==null)return x;x={memoizedState:U,baseState:U,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:U},next:null};var j={};return x.next={memoizedState:j,baseState:j,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:so,lastRenderedState:j},next:null},f.memoizedState=x,f=f.alternate,f!==null&&(f.memoizedState=x),x}function kp(f){var x=gd(f).next.queue;Ig(f,x,{},Ml())}function _p(){return Ts(Xg)}function Dg(){return Fn().memoizedState}function B1(){return Fn().memoizedState}function Ag(f){for(var x=f.return;x!==null;){switch(x.tag){case 24:case 3:var j=Ml();f=Ht(j);var _=er(x,f,j);_!==null&&(Rl(_,x,j),Yt(_,x,j)),x={cache:bg()},f.payload=x;return}x=x.return}}function Tg(f,x,j){var _=Ml();j={lane:_,revertLane:0,action:j,hasEagerState:!1,eagerState:null,next:null},U1(f)?AI(x,j):(j=au(f,x,j,_),j!==null&&(Rl(j,f,_),TI(j,x,_)))}function DI(f,x,j){var _=Ml();Ig(f,x,j,_)}function Ig(f,x,j,_){var R={lane:_,revertLane:0,action:j,hasEagerState:!1,eagerState:null,next:null};if(U1(f))AI(x,R);else{var q=f.alternate;if(f.lanes===0&&(q===null||q.lanes===0)&&(q=x.lastRenderedReducer,q!==null))try{var me=x.lastRenderedState,Ee=q(me,j);if(R.hasEagerState=!0,R.eagerState=Ee,Ws(Ee,me))return ru(f,x,R,0),Pn===null&&Zo(),!1}catch{}finally{}if(j=au(f,x,R,_),j!==null)return Rl(j,f,_),TI(j,x,_),!0}return!1}function iC(f,x,j,_){if(_={lane:2,revertLane:LC(),action:_,hasEagerState:!1,eagerState:null,next:null},U1(f)){if(x)throw Error(n(479))}else x=au(f,j,_,2),x!==null&&Rl(x,f,2)}function U1(f){var x=f.alternate;return f===Gr||x!==null&&x===Gr}function AI(f,x){Ks=La=!0;var j=f.pending;j===null?x.next=x:(x.next=j.next,j.next=x),f.pending=x}function TI(f,x,j){if((j&4194048)!==0){var _=x.lanes;_&=f.pendingLanes,j|=_,x.lanes=j,Ae(f,j)}}var $1={readContext:Ts,use:no,useCallback:Xa,useContext:Xa,useEffect:Xa,useImperativeHandle:Xa,useLayoutEffect:Xa,useInsertionEffect:Xa,useMemo:Xa,useReducer:Xa,useRef:Xa,useState:Xa,useDebugValue:Xa,useDeferredValue:Xa,useTransition:Xa,useSyncExternalStore:Xa,useId:Xa,useHostTransitionStatus:Xa,useFormState:Xa,useActionState:Xa,useOptimistic:Xa,useMemoCache:Xa,useCacheRefresh:Xa},II={readContext:Ts,use:no,useCallback:function(f,x){return Li().memoizedState=[f,x===void 0?null:x],f},useContext:Ts,useEffect:Sg,useImperativeHandle:function(f,x,j){j=j!=null?j.concat([f]):null,Tl(4194308,4,F1.bind(null,x,f),j)},useLayoutEffect:function(f,x){return Tl(4194308,4,f,x)},useInsertionEffect:function(f,x){Tl(4,2,f,x)},useMemo:function(f,x){var j=Li();x=x===void 0?null:x;var _=f();if(Ps){xe(!0);try{f()}finally{xe(!1)}}return j.memoizedState=[_,x],_},useReducer:function(f,x,j){var _=Li();if(j!==void 0){var R=j(x);if(Ps){xe(!0);try{j(x)}finally{xe(!1)}}}else R=x;return _.memoizedState=_.baseState=R,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:R},_.queue=f,f=f.dispatch=Tg.bind(null,Gr,f),[_.memoizedState,f]},useRef:function(f){var x=Li();return f={current:f},x.memoizedState=f},useState:function(f){f=Np(f);var x=f.queue,j=DI.bind(null,Gr,x);return x.dispatch=j,[f.memoizedState,j]},useDebugValue:_g,useDeferredValue:function(f,x){var j=Li();return Ch(j,f,x)},useTransition:function(){var f=Np(!1);return f=Cp.bind(null,Gr,f.queue,!0,!1),Li().memoizedState=f,[!1,f]},useSyncExternalStore:function(f,x,j){var _=Gr,R=Li();if(qa){if(j===void 0)throw Error(n(407));j=j()}else{if(j=x(),Pn===null)throw Error(n(349));(Ba&124)!==0||lv(_,x,j)}R.memoizedState=j;var q={value:j,getSnapshot:x};return R.queue=q,Sg(Gf.bind(null,_,q,f),[f]),_.flags|=2048,xd(9,Sp(),jp.bind(null,_,q,j,x),null),j},useId:function(){var f=Li(),x=Pn.identifierPrefix;if(qa){var j=ud,_=dd;j=(_&~(1<<32-he(_)-1)).toString(32)+j,x="«"+x+"R"+j,j=ns++,0<j&&(x+="H"+j.toString(32)),x+="»"}else j=rl++,x="«"+x+"r"+j.toString(32)+"»";return f.memoizedState=x},useHostTransitionStatus:_p,useFormState:wp,useActionState:wp,useOptimistic:function(f){var x=Li();x.memoizedState=x.baseState=f;var j={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return x.queue=j,x=iC.bind(null,Gr,!0,j),j.dispatch=x,[f,x]},useMemoCache:uu,useCacheRefresh:function(){return Li().memoizedState=Ag.bind(null,Gr)}},PI={readContext:Ts,use:no,useCallback:Eg,useContext:Ts,useEffect:R1,useImperativeHandle:kg,useInsertionEffect:Cg,useLayoutEffect:Sh,useMemo:L1,useReducer:bp,useRef:dv,useState:function(){return bp(so)},useDebugValue:_g,useDeferredValue:function(f,x){var j=Fn();return uv(j,aa.memoizedState,f,x)},useTransition:function(){var f=bp(so)[0],x=Fn().memoizedState;return[typeof f=="boolean"?f:du(f),x]},useSyncExternalStore:yp,useId:Dg,useHostTransitionStatus:_p,useFormState:cv,useActionState:cv,useOptimistic:function(f,x){var j=Fn();return pd(j,aa,f,x)},useMemoCache:uu,useCacheRefresh:B1},tX={readContext:Ts,use:no,useCallback:Eg,useContext:Ts,useEffect:R1,useImperativeHandle:kg,useInsertionEffect:Cg,useLayoutEffect:Sh,useMemo:L1,useReducer:ov,useRef:dv,useState:function(){return ov(so)},useDebugValue:_g,useDeferredValue:function(f,x){var j=Fn();return aa===null?Ch(j,f,x):uv(j,aa.memoizedState,f,x)},useTransition:function(){var f=ov(so)[0],x=Fn().memoizedState;return[typeof f=="boolean"?f:du(f),x]},useSyncExternalStore:yp,useId:Dg,useHostTransitionStatus:_p,useFormState:M1,useActionState:M1,useOptimistic:function(f,x){var j=Fn();return aa!==null?pd(j,aa,f,x):(j.baseState=f,[f,j.queue.dispatch])},useMemoCache:uu,useCacheRefresh:B1},hv=null,Pg=0;function V1(f){var x=Pg;return Pg+=1,hv===null&&(hv=[]),Et(hv,f,x)}function Og(f,x){x=x.props.ref,f.ref=x!==void 0?x:null}function q1(f,x){throw x.$$typeof===h?Error(n(525)):(f=Object.prototype.toString.call(x),Error(n(31,f==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":f)))}function OI(f){var x=f._init;return x(f._payload)}function MI(f){function x(gt,ct){if(f){var _t=gt.deletions;_t===null?(gt.deletions=[ct],gt.flags|=16):_t.push(ct)}}function j(gt,ct){if(!f)return null;for(;ct!==null;)x(gt,ct),ct=ct.sibling;return null}function _(gt){for(var ct=new Map;gt!==null;)gt.key!==null?ct.set(gt.key,gt):ct.set(gt.index,gt),gt=gt.sibling;return ct}function R(gt,ct){return gt=xc(gt,ct),gt.index=0,gt.sibling=null,gt}function q(gt,ct,_t){return gt.index=_t,f?(_t=gt.alternate,_t!==null?(_t=_t.index,_t<ct?(gt.flags|=67108866,ct):_t):(gt.flags|=67108866,ct)):(gt.flags|=1048576,ct)}function me(gt){return f&&gt.alternate===null&&(gt.flags|=67108866),gt}function Ee(gt,ct,_t,Qt){return ct===null||ct.tag!==6?(ct=ev(_t,gt.mode,Qt),ct.return=gt,ct):(ct=R(ct,_t),ct.return=gt,ct)}function Ze(gt,ct,_t,Qt){var Ar=_t.type;return Ar===v?Wt(gt,ct,_t.props.children,Qt,_t.key):ct!==null&&(ct.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===T&&OI(Ar)===ct.type)?(ct=R(ct,_t.props),Og(ct,_t),ct.return=gt,ct):(ct=vh(_t.type,_t.key,_t.props,null,gt.mode,Qt),Og(ct,_t),ct.return=gt,ct)}function Dt(gt,ct,_t,Qt){return ct===null||ct.tag!==4||ct.stateNode.containerInfo!==_t.containerInfo||ct.stateNode.implementation!==_t.implementation?(ct=fp(_t,gt.mode,Qt),ct.return=gt,ct):(ct=R(ct,_t.children||[]),ct.return=gt,ct)}function Wt(gt,ct,_t,Qt,Ar){return ct===null||ct.tag!==7?(ct=ld(_t,gt.mode,Qt,Ar),ct.return=gt,ct):(ct=R(ct,_t),ct.return=gt,ct)}function tr(gt,ct,_t){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return ct=ev(""+ct,gt.mode,_t),ct.return=gt,ct;if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case m:return _t=vh(ct.type,ct.key,ct.props,null,gt.mode,_t),Og(_t,ct),_t.return=gt,_t;case p:return ct=fp(ct,gt.mode,_t),ct.return=gt,ct;case T:var Qt=ct._init;return ct=Qt(ct._payload),tr(gt,ct,_t)}if(K(ct)||O(ct))return ct=ld(ct,gt.mode,_t,null),ct.return=gt,ct;if(typeof ct.then=="function")return tr(gt,V1(ct),_t);if(ct.$$typeof===w)return tr(gt,ou(gt,ct),_t);q1(gt,ct)}return null}function It(gt,ct,_t,Qt){var Ar=ct!==null?ct.key:null;if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return Ar!==null?null:Ee(gt,ct,""+_t,Qt);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case m:return _t.key===Ar?Ze(gt,ct,_t,Qt):null;case p:return _t.key===Ar?Dt(gt,ct,_t,Qt):null;case T:return Ar=_t._init,_t=Ar(_t._payload),It(gt,ct,_t,Qt)}if(K(_t)||O(_t))return Ar!==null?null:Wt(gt,ct,_t,Qt,null);if(typeof _t.then=="function")return It(gt,ct,V1(_t),Qt);if(_t.$$typeof===w)return It(gt,ct,ou(gt,_t),Qt);q1(gt,_t)}return null}function Pt(gt,ct,_t,Qt,Ar){if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number"||typeof Qt=="bigint")return gt=gt.get(_t)||null,Ee(ct,gt,""+Qt,Ar);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case m:return gt=gt.get(Qt.key===null?_t:Qt.key)||null,Ze(ct,gt,Qt,Ar);case p:return gt=gt.get(Qt.key===null?_t:Qt.key)||null,Dt(ct,gt,Qt,Ar);case T:var Da=Qt._init;return Qt=Da(Qt._payload),Pt(gt,ct,_t,Qt,Ar)}if(K(Qt)||O(Qt))return gt=gt.get(_t)||null,Wt(ct,gt,Qt,Ar,null);if(typeof Qt.then=="function")return Pt(gt,ct,_t,V1(Qt),Ar);if(Qt.$$typeof===w)return Pt(gt,ct,_t,ou(ct,Qt),Ar);q1(ct,Qt)}return null}function ia(gt,ct,_t,Qt){for(var Ar=null,Da=null,zr=ct,Zr=ct=0,ji=null;zr!==null&&Zr<_t.length;Zr++){zr.index>Zr?(ji=zr,zr=null):ji=zr.sibling;var Qa=It(gt,zr,_t[Zr],Qt);if(Qa===null){zr===null&&(zr=ji);break}f&&zr&&Qa.alternate===null&&x(gt,zr),ct=q(Qa,ct,Zr),Da===null?Ar=Qa:Da.sibling=Qa,Da=Qa,zr=ji}if(Zr===_t.length)return j(gt,zr),qa&&bh(gt,Zr),Ar;if(zr===null){for(;Zr<_t.length;Zr++)zr=tr(gt,_t[Zr],Qt),zr!==null&&(ct=q(zr,ct,Zr),Da===null?Ar=zr:Da.sibling=zr,Da=zr);return qa&&bh(gt,Zr),Ar}for(zr=_(zr);Zr<_t.length;Zr++)ji=Pt(zr,gt,Zr,_t[Zr],Qt),ji!==null&&(f&&ji.alternate!==null&&zr.delete(ji.key===null?Zr:ji.key),ct=q(ji,ct,Zr),Da===null?Ar=ji:Da.sibling=ji,Da=ji);return f&&zr.forEach(function(hm){return x(gt,hm)}),qa&&bh(gt,Zr),Ar}function Qr(gt,ct,_t,Qt){if(_t==null)throw Error(n(151));for(var Ar=null,Da=null,zr=ct,Zr=ct=0,ji=null,Qa=_t.next();zr!==null&&!Qa.done;Zr++,Qa=_t.next()){zr.index>Zr?(ji=zr,zr=null):ji=zr.sibling;var hm=It(gt,zr,Qa.value,Qt);if(hm===null){zr===null&&(zr=ji);break}f&&zr&&hm.alternate===null&&x(gt,zr),ct=q(hm,ct,Zr),Da===null?Ar=hm:Da.sibling=hm,Da=hm,zr=ji}if(Qa.done)return j(gt,zr),qa&&bh(gt,Zr),Ar;if(zr===null){for(;!Qa.done;Zr++,Qa=_t.next())Qa=tr(gt,Qa.value,Qt),Qa!==null&&(ct=q(Qa,ct,Zr),Da===null?Ar=Qa:Da.sibling=Qa,Da=Qa);return qa&&bh(gt,Zr),Ar}for(zr=_(zr);!Qa.done;Zr++,Qa=_t.next())Qa=Pt(zr,gt,Zr,Qa.value,Qt),Qa!==null&&(f&&Qa.alternate!==null&&zr.delete(Qa.key===null?Zr:Qa.key),ct=q(Qa,ct,Zr),Da===null?Ar=Qa:Da.sibling=Qa,Da=Qa);return f&&zr.forEach(function(rQ){return x(gt,rQ)}),qa&&bh(gt,Zr),Ar}function wn(gt,ct,_t,Qt){if(typeof _t=="object"&&_t!==null&&_t.type===v&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case m:e:{for(var Ar=_t.key;ct!==null;){if(ct.key===Ar){if(Ar=_t.type,Ar===v){if(ct.tag===7){j(gt,ct.sibling),Qt=R(ct,_t.props.children),Qt.return=gt,gt=Qt;break e}}else if(ct.elementType===Ar||typeof Ar=="object"&&Ar!==null&&Ar.$$typeof===T&&OI(Ar)===ct.type){j(gt,ct.sibling),Qt=R(ct,_t.props),Og(Qt,_t),Qt.return=gt,gt=Qt;break e}j(gt,ct);break}else x(gt,ct);ct=ct.sibling}_t.type===v?(Qt=ld(_t.props.children,gt.mode,Qt,_t.key),Qt.return=gt,gt=Qt):(Qt=vh(_t.type,_t.key,_t.props,null,gt.mode,Qt),Og(Qt,_t),Qt.return=gt,gt=Qt)}return me(gt);case p:e:{for(Ar=_t.key;ct!==null;){if(ct.key===Ar)if(ct.tag===4&&ct.stateNode.containerInfo===_t.containerInfo&&ct.stateNode.implementation===_t.implementation){j(gt,ct.sibling),Qt=R(ct,_t.children||[]),Qt.return=gt,gt=Qt;break e}else{j(gt,ct);break}else x(gt,ct);ct=ct.sibling}Qt=fp(_t,gt.mode,Qt),Qt.return=gt,gt=Qt}return me(gt);case T:return Ar=_t._init,_t=Ar(_t._payload),wn(gt,ct,_t,Qt)}if(K(_t))return ia(gt,ct,_t,Qt);if(O(_t)){if(Ar=O(_t),typeof Ar!="function")throw Error(n(150));return _t=Ar.call(_t),Qr(gt,ct,_t,Qt)}if(typeof _t.then=="function")return wn(gt,ct,V1(_t),Qt);if(_t.$$typeof===w)return wn(gt,ct,ou(gt,_t),Qt);q1(gt,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint"?(_t=""+_t,ct!==null&&ct.tag===6?(j(gt,ct.sibling),Qt=R(ct,_t),Qt.return=gt,gt=Qt):(j(gt,ct),Qt=ev(_t,gt.mode,Qt),Qt.return=gt,gt=Qt),me(gt)):j(gt,ct)}return function(gt,ct,_t,Qt){try{Pg=0;var Ar=wn(gt,ct,_t,Qt);return hv=null,Ar}catch(zr){if(zr===je||zr===Ce)throw zr;var Da=gi(29,zr,null,gt.mode);return Da.lanes=Qt,Da.return=gt,Da}finally{}}}var fv=MI(!0),RI=MI(!1),Nc=oe(null),hu=null;function Qf(f){var x=f.alternate;V(ii,ii.current&1),V(Nc,f),hu===null&&(x===null||Sa.current!==null||x.memoizedState!==null)&&(hu=f)}function FI(f){if(f.tag===22){if(V(ii,ii.current),V(Nc,f),hu===null){var x=f.alternate;x!==null&&x.memoizedState!==null&&(hu=f)}}else Jf()}function Jf(){V(ii,ii.current),V(Nc,Nc.current)}function kh(f){M(Nc),hu===f&&(hu=null),M(ii)}var ii=oe(0);function z1(f){for(var x=f;x!==null;){if(x.tag===13){var j=x.memoizedState;if(j!==null&&(j=j.dehydrated,j===null||j.data==="$?"||XC(j)))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}function oC(f,x,j,_){x=f.memoizedState,j=j(_,x),j=j==null?x:u({},x,j),f.memoizedState=j,f.lanes===0&&(f.updateQueue.baseState=j)}var lC={enqueueSetState:function(f,x,j){f=f._reactInternals;var _=Ml(),R=Ht(_);R.payload=x,j!=null&&(R.callback=j),x=er(f,R,_),x!==null&&(Rl(x,f,_),Yt(x,f,_))},enqueueReplaceState:function(f,x,j){f=f._reactInternals;var _=Ml(),R=Ht(_);R.tag=1,R.payload=x,j!=null&&(R.callback=j),x=er(f,R,_),x!==null&&(Rl(x,f,_),Yt(x,f,_))},enqueueForceUpdate:function(f,x){f=f._reactInternals;var j=Ml(),_=Ht(j);_.tag=2,x!=null&&(_.callback=x),x=er(f,_,j),x!==null&&(Rl(x,f,j),Yt(x,f,j))}};function LI(f,x,j,_,R,q,me){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(_,q,me):x.prototype&&x.prototype.isPureReactComponent?!Kd(j,_)||!Kd(R,q):!0}function BI(f,x,j,_){f=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(j,_),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(j,_),x.state!==f&&lC.enqueueReplaceState(x,x.state,null)}function Ep(f,x){var j=x;if("ref"in x){j={};for(var _ in x)_!=="ref"&&(j[_]=x[_])}if(f=f.defaultProps){j===x&&(j=u({},j));for(var R in f)j[R]===void 0&&(j[R]=f[R])}return j}var H1=typeof reportError=="function"?reportError:function(f){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var x=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof f=="object"&&f!==null&&typeof f.message=="string"?String(f.message):String(f),error:f});if(!window.dispatchEvent(x))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",f);return}console.error(f)};function UI(f){H1(f)}function $I(f){console.error(f)}function VI(f){H1(f)}function W1(f,x){try{var j=f.onUncaughtError;j(x.value,{componentStack:x.stack})}catch(_){setTimeout(function(){throw _})}}function qI(f,x,j){try{var _=f.onCaughtError;_(j.value,{componentStack:j.stack,errorBoundary:x.tag===1?x.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function cC(f,x,j){return j=Ht(j),j.tag=3,j.payload={element:null},j.callback=function(){W1(f,x)},j}function zI(f){return f=Ht(f),f.tag=3,f}function HI(f,x,j,_){var R=j.type.getDerivedStateFromError;if(typeof R=="function"){var q=_.value;f.payload=function(){return R(q)},f.callback=function(){qI(x,j,_)}}var me=j.stateNode;me!==null&&typeof me.componentDidCatch=="function"&&(f.callback=function(){qI(x,j,_),typeof R!="function"&&(nm===null?nm=new Set([this]):nm.add(this));var Ee=_.stack;this.componentDidCatch(_.value,{componentStack:Ee!==null?Ee:""})})}function rX(f,x,j,_,R){if(j.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){if(x=j.alternate,x!==null&&Hf(x,j,R,!0),j=Nc.current,j!==null){switch(j.tag){case 13:return hu===null?PC():j.alternate===null&&gs===0&&(gs=3),j.flags&=-257,j.flags|=65536,j.lanes=R,_===Pe?j.flags|=16384:(x=j.updateQueue,x===null?j.updateQueue=new Set([_]):x.add(_),MC(f,_,R)),!1;case 22:return j.flags|=65536,_===Pe?j.flags|=16384:(x=j.updateQueue,x===null?(x={transitions:null,markerInstances:null,retryQueue:new Set([_])},j.updateQueue=x):(j=x.retryQueue,j===null?x.retryQueue=new Set([_]):j.add(_)),MC(f,_,R)),!1}throw Error(n(435,j.tag))}return MC(f,_,R),PC(),!1}if(qa)return x=Nc.current,x!==null?((x.flags&65536)===0&&(x.flags|=256),x.flags|=65536,x.lanes=R,_!==gg&&(f=Error(n(422),{cause:_}),zf(Ca(f,j)))):(_!==gg&&(x=Error(n(423),{cause:_}),zf(Ca(x,j))),f=f.current.alternate,f.flags|=65536,R&=-R,f.lanes|=R,_=Ca(_,j),R=cC(f.stateNode,_,R),Sr(f,R),gs!==4&&(gs=2)),!1;var q=Error(n(520),{cause:_});if(q=Ca(q,j),$g===null?$g=[q]:$g.push(q),gs!==4&&(gs=2),x===null)return!0;_=Ca(_,j),j=x;do{switch(j.tag){case 3:return j.flags|=65536,f=R&-R,j.lanes|=f,f=cC(j.stateNode,_,f),Sr(j,f),!1;case 1:if(x=j.type,q=j.stateNode,(j.flags&128)===0&&(typeof x.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(nm===null||!nm.has(q))))return j.flags|=65536,R&=-R,j.lanes|=R,R=zI(R),HI(R,f,j,_),Sr(j,R),!1}j=j.return}while(j!==null);return!1}var WI=Error(n(461)),bi=!1;function Bi(f,x,j,_){x.child=f===null?RI(x,null,j,_):fv(x,f.child,j,_)}function GI(f,x,j,_,R){j=j.render;var q=x.ref;if("ref"in _){var me={};for(var Ee in _)Ee!=="ref"&&(me[Ee]=_[Ee])}else me=_;return yc(x),_=Al(f,x,j,me,q,R),Ee=In(),f!==null&&!bi?(gp(f,x,R),_h(f,x,R)):(qa&&Ee&&mp(x),x.flags|=1,Bi(f,x,_,R),x.child)}function YI(f,x,j,_,R){if(f===null){var q=j.type;return typeof q=="function"&&!Vf(q)&&q.defaultProps===void 0&&j.compare===null?(x.tag=15,x.type=q,KI(f,x,q,_,R)):(f=vh(j.type,null,_,x,x.mode,R),f.ref=x.ref,f.return=x,x.child=f)}if(q=f.child,!vC(f,R)){var me=q.memoizedProps;if(j=j.compare,j=j!==null?j:Kd,j(me,_)&&f.ref===x.ref)return _h(f,x,R)}return x.flags|=1,f=xc(q,_),f.ref=x.ref,f.return=x,x.child=f}function KI(f,x,j,_,R){if(f!==null){var q=f.memoizedProps;if(Kd(q,_)&&f.ref===x.ref)if(bi=!1,x.pendingProps=_=q,vC(f,R))(f.flags&131072)!==0&&(bi=!0);else return x.lanes=f.lanes,_h(f,x,R)}return dC(f,x,j,_,R)}function XI(f,x,j){var _=x.pendingProps,R=_.children,q=f!==null?f.memoizedState:null;if(_.mode==="hidden"){if((x.flags&128)!==0){if(_=q!==null?q.baseLanes|j:j,f!==null){for(R=x.child=f.child,q=0;R!==null;)q=q|R.lanes|R.childLanes,R=R.sibling;x.childLanes=q&~_}else x.childLanes=0,x.child=null;return QI(f,x,_,j)}if((j&536870912)!==0)x.memoizedState={baseLanes:0,cachePool:null},f!==null&&ce(x,q!==null?q.cachePool:null),q!==null?ln(x,q):Ka(),FI(x);else return x.lanes=x.childLanes=536870912,QI(f,x,q!==null?q.baseLanes|j:j,j)}else q!==null?(ce(x,q.cachePool),ln(x,q),Jf(),x.memoizedState=null):(f!==null&&ce(x,null),Ka(),Jf());return Bi(f,x,R,j),x.child}function QI(f,x,j,_){var R=te();return R=R===null?null:{parent:Is._currentValue,pool:R},x.memoizedState={baseLanes:j,cachePool:R},f!==null&&ce(x,null),Ka(),FI(x),f!==null&&Hf(f,x,_,!0),null}function G1(f,x){var j=x.ref;if(j===null)f!==null&&f.ref!==null&&(x.flags|=4194816);else{if(typeof j!="function"&&typeof j!="object")throw Error(n(284));(f===null||f.ref!==j)&&(x.flags|=4194816)}}function dC(f,x,j,_,R){return yc(x),j=Al(f,x,j,_,void 0,R),_=In(),f!==null&&!bi?(gp(f,x,R),_h(f,x,R)):(qa&&_&&mp(x),x.flags|=1,Bi(f,x,j,R),x.child)}function JI(f,x,j,_,R,q){return yc(x),x.updateQueue=null,j=Nh(x,_,j,R),lu(f),_=In(),f!==null&&!bi?(gp(f,x,q),_h(f,x,q)):(qa&&_&&mp(x),x.flags|=1,Bi(f,x,j,q),x.child)}function ZI(f,x,j,_,R){if(yc(x),x.stateNode===null){var q=Gs,me=j.contextType;typeof me=="object"&&me!==null&&(q=Ts(me)),q=new j(_,q),x.memoizedState=q.state!==null&&q.state!==void 0?q.state:null,q.updater=lC,x.stateNode=q,q._reactInternals=x,q=x.stateNode,q.props=_,q.state=x.memoizedState,q.refs={},st(x),me=j.contextType,q.context=typeof me=="object"&&me!==null?Ts(me):Gs,q.state=x.memoizedState,me=j.getDerivedStateFromProps,typeof me=="function"&&(oC(x,j,me,_),q.state=x.memoizedState),typeof j.getDerivedStateFromProps=="function"||typeof q.getSnapshotBeforeUpdate=="function"||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(me=q.state,typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount(),me!==q.state&&lC.enqueueReplaceState(q,q.state,null),yr(x,_,q,R),qr(),q.state=x.memoizedState),typeof q.componentDidMount=="function"&&(x.flags|=4194308),_=!0}else if(f===null){q=x.stateNode;var Ee=x.memoizedProps,Ze=Ep(j,Ee);q.props=Ze;var Dt=q.context,Wt=j.contextType;me=Gs,typeof Wt=="object"&&Wt!==null&&(me=Ts(Wt));var tr=j.getDerivedStateFromProps;Wt=typeof tr=="function"||typeof q.getSnapshotBeforeUpdate=="function",Ee=x.pendingProps!==Ee,Wt||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(Ee||Dt!==me)&&BI(x,q,_,me),Rt=!1;var It=x.memoizedState;q.state=It,yr(x,_,q,R),qr(),Dt=x.memoizedState,Ee||It!==Dt||Rt?(typeof tr=="function"&&(oC(x,j,tr,_),Dt=x.memoizedState),(Ze=Rt||LI(x,j,Ze,_,It,Dt,me))?(Wt||typeof q.UNSAFE_componentWillMount!="function"&&typeof q.componentWillMount!="function"||(typeof q.componentWillMount=="function"&&q.componentWillMount(),typeof q.UNSAFE_componentWillMount=="function"&&q.UNSAFE_componentWillMount()),typeof q.componentDidMount=="function"&&(x.flags|=4194308)):(typeof q.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=_,x.memoizedState=Dt),q.props=_,q.state=Dt,q.context=me,_=Ze):(typeof q.componentDidMount=="function"&&(x.flags|=4194308),_=!1)}else{q=x.stateNode,ut(f,x),me=x.memoizedProps,Wt=Ep(j,me),q.props=Wt,tr=x.pendingProps,It=q.context,Dt=j.contextType,Ze=Gs,typeof Dt=="object"&&Dt!==null&&(Ze=Ts(Dt)),Ee=j.getDerivedStateFromProps,(Dt=typeof Ee=="function"||typeof q.getSnapshotBeforeUpdate=="function")||typeof q.UNSAFE_componentWillReceiveProps!="function"&&typeof q.componentWillReceiveProps!="function"||(me!==tr||It!==Ze)&&BI(x,q,_,Ze),Rt=!1,It=x.memoizedState,q.state=It,yr(x,_,q,R),qr();var Pt=x.memoizedState;me!==tr||It!==Pt||Rt||f!==null&&f.dependencies!==null&&nv(f.dependencies)?(typeof Ee=="function"&&(oC(x,j,Ee,_),Pt=x.memoizedState),(Wt=Rt||LI(x,j,Wt,_,It,Pt,Ze)||f!==null&&f.dependencies!==null&&nv(f.dependencies))?(Dt||typeof q.UNSAFE_componentWillUpdate!="function"&&typeof q.componentWillUpdate!="function"||(typeof q.componentWillUpdate=="function"&&q.componentWillUpdate(_,Pt,Ze),typeof q.UNSAFE_componentWillUpdate=="function"&&q.UNSAFE_componentWillUpdate(_,Pt,Ze)),typeof q.componentDidUpdate=="function"&&(x.flags|=4),typeof q.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof q.componentDidUpdate!="function"||me===f.memoizedProps&&It===f.memoizedState||(x.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||me===f.memoizedProps&&It===f.memoizedState||(x.flags|=1024),x.memoizedProps=_,x.memoizedState=Pt),q.props=_,q.state=Pt,q.context=Ze,_=Wt):(typeof q.componentDidUpdate!="function"||me===f.memoizedProps&&It===f.memoizedState||(x.flags|=4),typeof q.getSnapshotBeforeUpdate!="function"||me===f.memoizedProps&&It===f.memoizedState||(x.flags|=1024),_=!1)}return q=_,G1(f,x),_=(x.flags&128)!==0,q||_?(q=x.stateNode,j=_&&typeof j.getDerivedStateFromError!="function"?null:q.render(),x.flags|=1,f!==null&&_?(x.child=fv(x,f.child,null,R),x.child=fv(x,null,j,R)):Bi(f,x,j,R),x.memoizedState=q.state,f=x.child):f=_h(f,x,R),f}function eP(f,x,j,_){return Fo(),x.flags|=256,Bi(f,x,j,_),x.child}var uC={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function hC(f){return{baseLanes:f,cachePool:ge()}}function fC(f,x,j){return f=f!==null?f.childLanes&~j:0,x&&(f|=wc),f}function tP(f,x,j){var _=x.pendingProps,R=!1,q=(x.flags&128)!==0,me;if((me=q)||(me=f!==null&&f.memoizedState===null?!1:(ii.current&2)!==0),me&&(R=!0,x.flags&=-129),me=(x.flags&32)!==0,x.flags&=-33,f===null){if(qa){if(R?Qf(x):Jf(),qa){var Ee=Gn,Ze;if(Ze=Ee){e:{for(Ze=Ee,Ee=vc;Ze.nodeType!==8;){if(!Ee){Ee=null;break e}if(Ze=yd(Ze.nextSibling),Ze===null){Ee=null;break e}}Ee=Ze}Ee!==null?(x.memoizedState={dehydrated:Ee,treeContext:gh!==null?{id:dd,overflow:ud}:null,retryLane:536870912,hydrationErrors:null},Ze=gi(18,null,null,0),Ze.stateNode=Ee,Ze.return=x,x.child=Ze,As=x,Gn=null,Ze=!0):Ze=!1}Ze||yh(x)}if(Ee=x.memoizedState,Ee!==null&&(Ee=Ee.dehydrated,Ee!==null))return XC(Ee)?x.lanes=32:x.lanes=536870912,null;kh(x)}return Ee=_.children,_=_.fallback,R?(Jf(),R=x.mode,Ee=Y1({mode:"hidden",children:Ee},R),_=ld(_,R,j,null),Ee.return=x,_.return=x,Ee.sibling=_,x.child=Ee,R=x.child,R.memoizedState=hC(j),R.childLanes=fC(f,me,j),x.memoizedState=uC,_):(Qf(x),mC(x,Ee))}if(Ze=f.memoizedState,Ze!==null&&(Ee=Ze.dehydrated,Ee!==null)){if(q)x.flags&256?(Qf(x),x.flags&=-257,x=pC(f,x,j)):x.memoizedState!==null?(Jf(),x.child=f.child,x.flags|=128,x=null):(Jf(),R=_.fallback,Ee=x.mode,_=Y1({mode:"visible",children:_.children},Ee),R=ld(R,Ee,j,null),R.flags|=2,_.return=x,R.return=x,_.sibling=R,x.child=_,fv(x,f.child,null,j),_=x.child,_.memoizedState=hC(j),_.childLanes=fC(f,me,j),x.memoizedState=uC,x=R);else if(Qf(x),XC(Ee)){if(me=Ee.nextSibling&&Ee.nextSibling.dataset,me)var Dt=me.dgst;me=Dt,_=Error(n(419)),_.stack="",_.digest=me,zf({value:_,source:null,stack:null}),x=pC(f,x,j)}else if(bi||Hf(f,x,j,!1),me=(j&f.childLanes)!==0,bi||me){if(me=Pn,me!==null&&(_=j&-j,_=(_&42)!==0?1:ke(_),_=(_&(me.suspendedLanes|j))!==0?0:_,_!==0&&_!==Ze.retryLane))throw Ze.retryLane=_,od(f,_),Rl(me,f,_),WI;Ee.data==="$?"||PC(),x=pC(f,x,j)}else Ee.data==="$?"?(x.flags|=192,x.child=f.child,x=null):(f=Ze.treeContext,Gn=yd(Ee.nextSibling),As=x,qa=!0,su=null,vc=!1,f!==null&&(tl[Ro++]=dd,tl[Ro++]=ud,tl[Ro++]=gh,dd=f.id,ud=f.overflow,gh=x),x=mC(x,_.children),x.flags|=4096);return x}return R?(Jf(),R=_.fallback,Ee=x.mode,Ze=f.child,Dt=Ze.sibling,_=xc(Ze,{mode:"hidden",children:_.children}),_.subtreeFlags=Ze.subtreeFlags&65011712,Dt!==null?R=xc(Dt,R):(R=ld(R,Ee,j,null),R.flags|=2),R.return=x,_.return=x,_.sibling=R,x.child=_,_=R,R=x.child,Ee=f.child.memoizedState,Ee===null?Ee=hC(j):(Ze=Ee.cachePool,Ze!==null?(Dt=Is._currentValue,Ze=Ze.parent!==Dt?{parent:Dt,pool:Dt}:Ze):Ze=ge(),Ee={baseLanes:Ee.baseLanes|j,cachePool:Ze}),R.memoizedState=Ee,R.childLanes=fC(f,me,j),x.memoizedState=uC,_):(Qf(x),j=f.child,f=j.sibling,j=xc(j,{mode:"visible",children:_.children}),j.return=x,j.sibling=null,f!==null&&(me=x.deletions,me===null?(x.deletions=[f],x.flags|=16):me.push(f)),x.child=j,x.memoizedState=null,j)}function mC(f,x){return x=Y1({mode:"visible",children:x},f.mode),x.return=f,f.child=x}function Y1(f,x){return f=gi(22,f,null,x),f.lanes=0,f.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},f}function pC(f,x,j){return fv(x,f.child,null,j),f=mC(x,x.pendingProps.children),f.flags|=2,x.memoizedState=null,f}function rP(f,x,j){f.lanes|=x;var _=f.alternate;_!==null&&(_.lanes|=x),rv(f.return,x,j)}function xC(f,x,j,_,R){var q=f.memoizedState;q===null?f.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:_,tail:j,tailMode:R}:(q.isBackwards=x,q.rendering=null,q.renderingStartTime=0,q.last=_,q.tail=j,q.tailMode=R)}function aP(f,x,j){var _=x.pendingProps,R=_.revealOrder,q=_.tail;if(Bi(f,x,_.children,j),_=ii.current,(_&2)!==0)_=_&1|2,x.flags|=128;else{if(f!==null&&(f.flags&128)!==0)e:for(f=x.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&rP(f,j,x);else if(f.tag===19)rP(f,j,x);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===x)break e;for(;f.sibling===null;){if(f.return===null||f.return===x)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}_&=1}switch(V(ii,_),R){case"forwards":for(j=x.child,R=null;j!==null;)f=j.alternate,f!==null&&z1(f)===null&&(R=j),j=j.sibling;j=R,j===null?(R=x.child,x.child=null):(R=j.sibling,j.sibling=null),xC(x,!1,R,j,q);break;case"backwards":for(j=null,R=x.child,x.child=null;R!==null;){if(f=R.alternate,f!==null&&z1(f)===null){x.child=R;break}f=R.sibling,R.sibling=j,j=R,R=f}xC(x,!0,j,null,q);break;case"together":xC(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function _h(f,x,j){if(f!==null&&(x.dependencies=f.dependencies),am|=x.lanes,(j&x.childLanes)===0)if(f!==null){if(Hf(f,x,j,!1),(j&x.childLanes)===0)return null}else return null;if(f!==null&&x.child!==f.child)throw Error(n(153));if(x.child!==null){for(f=x.child,j=xc(f,f.pendingProps),x.child=j,j.return=x;f.sibling!==null;)f=f.sibling,j=j.sibling=xc(f,f.pendingProps),j.return=x;j.sibling=null}return x.child}function vC(f,x){return(f.lanes&x)!==0?!0:(f=f.dependencies,!!(f!==null&&nv(f)))}function aX(f,x,j){switch(x.tag){case 3:ne(x,x.stateNode.containerInfo),iu(x,Is,f.memoizedState.cache),Fo();break;case 27:case 5:G(x);break;case 4:ne(x,x.stateNode.containerInfo);break;case 10:iu(x,x.type,x.memoizedProps.value);break;case 13:var _=x.memoizedState;if(_!==null)return _.dehydrated!==null?(Qf(x),x.flags|=128,null):(j&x.child.childLanes)!==0?tP(f,x,j):(Qf(x),f=_h(f,x,j),f!==null?f.sibling:null);Qf(x);break;case 19:var R=(f.flags&128)!==0;if(_=(j&x.childLanes)!==0,_||(Hf(f,x,j,!1),_=(j&x.childLanes)!==0),R){if(_)return aP(f,x,j);x.flags|=128}if(R=x.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),V(ii,ii.current),_)break;return null;case 22:case 23:return x.lanes=0,XI(f,x,j);case 24:iu(x,Is,f.memoizedState.cache)}return _h(f,x,j)}function nP(f,x,j){if(f!==null)if(f.memoizedProps!==x.pendingProps)bi=!0;else{if(!vC(f,j)&&(x.flags&128)===0)return bi=!1,aX(f,x,j);bi=(f.flags&131072)!==0}else bi=!1,qa&&(x.flags&1048576)!==0&&S1(x,tv,x.index);switch(x.lanes=0,x.tag){case 16:e:{f=x.pendingProps;var _=x.elementType,R=_._init;if(_=R(_._payload),x.type=_,typeof _=="function")Vf(_)?(f=Ep(_,f),x.tag=1,x=ZI(null,x,_,f,j)):(x.tag=0,x=dC(null,x,_,f,j));else{if(_!=null){if(R=_.$$typeof,R===k){x.tag=11,x=GI(null,x,_,f,j);break e}else if(R===E){x.tag=14,x=YI(null,x,_,f,j);break e}}throw x=z(_)||_,Error(n(306,x,""))}}return x;case 0:return dC(f,x,x.type,x.pendingProps,j);case 1:return _=x.type,R=Ep(_,x.pendingProps),ZI(f,x,_,R,j);case 3:e:{if(ne(x,x.stateNode.containerInfo),f===null)throw Error(n(387));_=x.pendingProps;var q=x.memoizedState;R=q.element,ut(f,x),yr(x,_,null,j);var me=x.memoizedState;if(_=me.cache,iu(x,Is,_),_!==q.cache&&av(x,[Is],j,!0),qr(),_=me.element,q.isDehydrated)if(q={element:_,isDehydrated:!1,cache:me.cache},x.updateQueue.baseState=q,x.memoizedState=q,x.flags&256){x=eP(f,x,_,j);break e}else if(_!==R){R=Ca(Error(n(424)),x),zf(R),x=eP(f,x,_,j);break e}else{switch(f=x.stateNode.containerInfo,f.nodeType){case 9:f=f.body;break;default:f=f.nodeName==="HTML"?f.ownerDocument.body:f}for(Gn=yd(f.firstChild),As=x,qa=!0,su=null,vc=!0,j=RI(x,null,_,j),x.child=j;j;)j.flags=j.flags&-3|4096,j=j.sibling}else{if(Fo(),_===R){x=_h(f,x,j);break e}Bi(f,x,_,j)}x=x.child}return x;case 26:return G1(f,x),f===null?(j=lO(x.type,null,x.pendingProps,null))?x.memoizedState=j:qa||(j=x.type,f=x.pendingProps,_=lj(re.current).createElement(j),_[rr]=x,_[pr]=f,$i(_,j,f),nt(_),x.stateNode=_):x.memoizedState=lO(x.type,f.memoizedProps,x.pendingProps,f.memoizedState),null;case 27:return G(x),f===null&&qa&&(_=x.stateNode=sO(x.type,x.pendingProps,re.current),As=x,vc=!0,R=Gn,om(x.type)?(QC=R,Gn=yd(_.firstChild)):Gn=R),Bi(f,x,x.pendingProps.children,j),G1(f,x),f===null&&(x.flags|=4194304),x.child;case 5:return f===null&&qa&&((R=_=Gn)&&(_=TX(_,x.type,x.pendingProps,vc),_!==null?(x.stateNode=_,As=x,Gn=yd(_.firstChild),vc=!1,R=!0):R=!1),R||yh(x)),G(x),R=x.type,q=x.pendingProps,me=f!==null?f.memoizedProps:null,_=q.children,GC(R,q)?_=null:me!==null&&GC(R,me)&&(x.flags|=32),x.memoizedState!==null&&(R=Al(f,x,cu,null,null,j),Xg._currentValue=R),G1(f,x),Bi(f,x,_,j),x.child;case 6:return f===null&&qa&&((f=j=Gn)&&(j=IX(j,x.pendingProps,vc),j!==null?(x.stateNode=j,As=x,Gn=null,f=!0):f=!1),f||yh(x)),null;case 13:return tP(f,x,j);case 4:return ne(x,x.stateNode.containerInfo),_=x.pendingProps,f===null?x.child=fv(x,null,_,j):Bi(f,x,_,j),x.child;case 11:return GI(f,x,x.type,x.pendingProps,j);case 7:return Bi(f,x,x.pendingProps,j),x.child;case 8:return Bi(f,x,x.pendingProps.children,j),x.child;case 12:return Bi(f,x,x.pendingProps.children,j),x.child;case 10:return _=x.pendingProps,iu(x,x.type,_.value),Bi(f,x,_.children,j),x.child;case 9:return R=x.type._context,_=x.pendingProps.children,yc(x),R=Ts(R),_=_(R),x.flags|=1,Bi(f,x,_,j),x.child;case 14:return YI(f,x,x.type,x.pendingProps,j);case 15:return KI(f,x,x.type,x.pendingProps,j);case 19:return aP(f,x,j);case 31:return _=x.pendingProps,j=x.mode,_={mode:_.mode,children:_.children},f===null?(j=Y1(_,j),j.ref=x.ref,x.child=j,j.return=x,x=j):(j=xc(f.child,_),j.ref=x.ref,x.child=j,j.return=x,x=j),x;case 22:return XI(f,x,j);case 24:return yc(x),_=Ts(Is),f===null?(R=te(),R===null&&(R=Pn,q=bg(),R.pooledCache=q,q.refCount++,q!==null&&(R.pooledCacheLanes|=j),R=q),x.memoizedState={parent:_,cache:R},st(x),iu(x,Is,R)):((f.lanes&j)!==0&&(ut(f,x),yr(x,null,null,j),qr()),R=f.memoizedState,q=x.memoizedState,R.parent!==_?(R={parent:_,cache:_},x.memoizedState=R,x.lanes===0&&(x.memoizedState=x.updateQueue.baseState=R),iu(x,Is,_)):(_=q.cache,iu(x,Is,_),_!==R.cache&&av(x,[Is],j,!0))),Bi(f,x,x.pendingProps.children,j),x.child;case 29:throw x.pendingProps}throw Error(n(156,x.tag))}function Eh(f){f.flags|=4}function sP(f,x){if(x.type!=="stylesheet"||(x.state.loading&4)!==0)f.flags&=-16777217;else if(f.flags|=16777216,!fO(x)){if(x=Nc.current,x!==null&&((Ba&4194048)===Ba?hu!==null:(Ba&62914560)!==Ba&&(Ba&536870912)===0||x!==hu))throw kt=Pe,we;f.flags|=8192}}function K1(f,x){x!==null&&(f.flags|=4),f.flags&16384&&(x=f.tag!==22?Ie():536870912,f.lanes|=x,vv|=x)}function Mg(f,x){if(!qa)switch(f.tailMode){case"hidden":x=f.tail;for(var j=null;x!==null;)x.alternate!==null&&(j=x),x=x.sibling;j===null?f.tail=null:j.sibling=null;break;case"collapsed":j=f.tail;for(var _=null;j!==null;)j.alternate!==null&&(_=j),j=j.sibling;_===null?x||f.tail===null?f.tail=null:f.tail.sibling=null:_.sibling=null}}function is(f){var x=f.alternate!==null&&f.alternate.child===f.child,j=0,_=0;if(x)for(var R=f.child;R!==null;)j|=R.lanes|R.childLanes,_|=R.subtreeFlags&65011712,_|=R.flags&65011712,R.return=f,R=R.sibling;else for(R=f.child;R!==null;)j|=R.lanes|R.childLanes,_|=R.subtreeFlags,_|=R.flags,R.return=f,R=R.sibling;return f.subtreeFlags|=_,f.childLanes=j,x}function nX(f,x,j){var _=x.pendingProps;switch(pp(x),x.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(x),null;case 1:return is(x),null;case 3:return j=x.stateNode,_=null,f!==null&&(_=f.memoizedState.cache),x.memoizedState.cache!==_&&(x.flags|=2048),bc(Is),ie(),j.pendingContext&&(j.context=j.pendingContext,j.pendingContext=null),(f===null||f.child===null)&&(Fi(x)?Eh(x):f===null||f.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,k1())),is(x),null;case 26:return j=x.memoizedState,f===null?(Eh(x),j!==null?(is(x),sP(x,j)):(is(x),x.flags&=-16777217)):j?j!==f.memoizedState?(Eh(x),is(x),sP(x,j)):(is(x),x.flags&=-16777217):(f.memoizedProps!==_&&Eh(x),is(x),x.flags&=-16777217),null;case 27:de(x),j=re.current;var R=x.type;if(f!==null&&x.stateNode!=null)f.memoizedProps!==_&&Eh(x);else{if(!_){if(x.stateNode===null)throw Error(n(166));return is(x),null}f=H.current,Fi(x)?C1(x):(f=sO(R,_,j),x.stateNode=f,Eh(x))}return is(x),null;case 5:if(de(x),j=x.type,f!==null&&x.stateNode!=null)f.memoizedProps!==_&&Eh(x);else{if(!_){if(x.stateNode===null)throw Error(n(166));return is(x),null}if(f=H.current,Fi(x))C1(x);else{switch(R=lj(re.current),f){case 1:f=R.createElementNS("http://www.w3.org/2000/svg",j);break;case 2:f=R.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;default:switch(j){case"svg":f=R.createElementNS("http://www.w3.org/2000/svg",j);break;case"math":f=R.createElementNS("http://www.w3.org/1998/Math/MathML",j);break;case"script":f=R.createElement("div"),f.innerHTML="<script><\/script>",f=f.removeChild(f.firstChild);break;case"select":f=typeof _.is=="string"?R.createElement("select",{is:_.is}):R.createElement("select"),_.multiple?f.multiple=!0:_.size&&(f.size=_.size);break;default:f=typeof _.is=="string"?R.createElement(j,{is:_.is}):R.createElement(j)}}f[rr]=x,f[pr]=_;e:for(R=x.child;R!==null;){if(R.tag===5||R.tag===6)f.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===x)break e;for(;R.sibling===null;){if(R.return===null||R.return===x)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}x.stateNode=f;e:switch($i(f,j,_),j){case"button":case"input":case"select":case"textarea":f=!!_.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Eh(x)}}return is(x),x.flags&=-16777217,null;case 6:if(f&&x.stateNode!=null)f.memoizedProps!==_&&Eh(x);else{if(typeof _!="string"&&x.stateNode===null)throw Error(n(166));if(f=re.current,Fi(x)){if(f=x.stateNode,j=x.memoizedProps,_=null,R=As,R!==null)switch(R.tag){case 27:case 5:_=R.memoizedProps}f[rr]=x,f=!!(f.nodeValue===j||_!==null&&_.suppressHydrationWarning===!0||JP(f.nodeValue,j)),f||yh(x)}else f=lj(f).createTextNode(_),f[rr]=x,x.stateNode=f}return is(x),null;case 13:if(_=x.memoizedState,f===null||f.memoizedState!==null&&f.memoizedState.dehydrated!==null){if(R=Fi(x),_!==null&&_.dehydrated!==null){if(f===null){if(!R)throw Error(n(318));if(R=x.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(n(317));R[rr]=x}else Fo(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;is(x),R=!1}else R=k1(),f!==null&&f.memoizedState!==null&&(f.memoizedState.hydrationErrors=R),R=!0;if(!R)return x.flags&256?(kh(x),x):(kh(x),null)}if(kh(x),(x.flags&128)!==0)return x.lanes=j,x;if(j=_!==null,f=f!==null&&f.memoizedState!==null,j){_=x.child,R=null,_.alternate!==null&&_.alternate.memoizedState!==null&&_.alternate.memoizedState.cachePool!==null&&(R=_.alternate.memoizedState.cachePool.pool);var q=null;_.memoizedState!==null&&_.memoizedState.cachePool!==null&&(q=_.memoizedState.cachePool.pool),q!==R&&(_.flags|=2048)}return j!==f&&j&&(x.child.flags|=8192),K1(x,x.updateQueue),is(x),null;case 4:return ie(),f===null&&VC(x.stateNode.containerInfo),is(x),null;case 10:return bc(x.type),is(x),null;case 19:if(M(ii),R=x.memoizedState,R===null)return is(x),null;if(_=(x.flags&128)!==0,q=R.rendering,q===null)if(_)Mg(R,!1);else{if(gs!==0||f!==null&&(f.flags&128)!==0)for(f=x.child;f!==null;){if(q=z1(f),q!==null){for(x.flags|=128,Mg(R,!1),f=q.updateQueue,x.updateQueue=f,K1(x,f),x.subtreeFlags=0,f=j,j=x.child;j!==null;)hp(j,f),j=j.sibling;return V(ii,ii.current&1|2),x.child}f=f.sibling}R.tail!==null&&ye()>J1&&(x.flags|=128,_=!0,Mg(R,!1),x.lanes=4194304)}else{if(!_)if(f=z1(q),f!==null){if(x.flags|=128,_=!0,f=f.updateQueue,x.updateQueue=f,K1(x,f),Mg(R,!0),R.tail===null&&R.tailMode==="hidden"&&!q.alternate&&!qa)return is(x),null}else 2*ye()-R.renderingStartTime>J1&&j!==536870912&&(x.flags|=128,_=!0,Mg(R,!1),x.lanes=4194304);R.isBackwards?(q.sibling=x.child,x.child=q):(f=R.last,f!==null?f.sibling=q:x.child=q,R.last=q)}return R.tail!==null?(x=R.tail,R.rendering=x,R.tail=x.sibling,R.renderingStartTime=ye(),x.sibling=null,f=ii.current,V(ii,_?f&1|2:f&1),x):(is(x),null);case 22:case 23:return kh(x),da(),_=x.memoizedState!==null,f!==null?f.memoizedState!==null!==_&&(x.flags|=8192):_&&(x.flags|=8192),_?(j&536870912)!==0&&(x.flags&128)===0&&(is(x),x.subtreeFlags&6&&(x.flags|=8192)):is(x),j=x.updateQueue,j!==null&&K1(x,j.retryQueue),j=null,f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(j=f.memoizedState.cachePool.pool),_=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(_=x.memoizedState.cachePool.pool),_!==j&&(x.flags|=2048),f!==null&&M(F),null;case 24:return j=null,f!==null&&(j=f.memoizedState.cache),x.memoizedState.cache!==j&&(x.flags|=2048),bc(Is),is(x),null;case 25:return null;case 30:return null}throw Error(n(156,x.tag))}function sX(f,x){switch(pp(x),x.tag){case 1:return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 3:return bc(Is),ie(),f=x.flags,(f&65536)!==0&&(f&128)===0?(x.flags=f&-65537|128,x):null;case 26:case 27:case 5:return de(x),null;case 13:if(kh(x),f=x.memoizedState,f!==null&&f.dehydrated!==null){if(x.alternate===null)throw Error(n(340));Fo()}return f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 19:return M(ii),null;case 4:return ie(),null;case 10:return bc(x.type),null;case 22:case 23:return kh(x),da(),f!==null&&M(F),f=x.flags,f&65536?(x.flags=f&-65537|128,x):null;case 24:return bc(Is),null;case 25:return null;default:return null}}function iP(f,x){switch(pp(x),x.tag){case 3:bc(Is),ie();break;case 26:case 27:case 5:de(x);break;case 4:ie();break;case 13:kh(x);break;case 19:M(ii);break;case 10:bc(x.type);break;case 22:case 23:kh(x),da(),f!==null&&M(F);break;case 24:bc(Is)}}function Rg(f,x){try{var j=x.updateQueue,_=j!==null?j.lastEffect:null;if(_!==null){var R=_.next;j=R;do{if((j.tag&f)===f){_=void 0;var q=j.create,me=j.inst;_=q(),me.destroy=_}j=j.next}while(j!==R)}}catch(Ee){_n(x,x.return,Ee)}}function Zf(f,x,j){try{var _=x.updateQueue,R=_!==null?_.lastEffect:null;if(R!==null){var q=R.next;_=q;do{if((_.tag&f)===f){var me=_.inst,Ee=me.destroy;if(Ee!==void 0){me.destroy=void 0,R=x;var Ze=j,Dt=Ee;try{Dt()}catch(Wt){_n(R,Ze,Wt)}}}_=_.next}while(_!==q)}}catch(Wt){_n(x,x.return,Wt)}}function oP(f){var x=f.updateQueue;if(x!==null){var j=f.stateNode;try{Ya(x,j)}catch(_){_n(f,f.return,_)}}}function lP(f,x,j){j.props=Ep(f.type,f.memoizedProps),j.state=f.memoizedState;try{j.componentWillUnmount()}catch(_){_n(f,x,_)}}function Fg(f,x){try{var j=f.ref;if(j!==null){switch(f.tag){case 26:case 27:case 5:var _=f.stateNode;break;case 30:_=f.stateNode;break;default:_=f.stateNode}typeof j=="function"?f.refCleanup=j(_):j.current=_}}catch(R){_n(f,x,R)}}function fu(f,x){var j=f.ref,_=f.refCleanup;if(j!==null)if(typeof _=="function")try{_()}catch(R){_n(f,x,R)}finally{f.refCleanup=null,f=f.alternate,f!=null&&(f.refCleanup=null)}else if(typeof j=="function")try{j(null)}catch(R){_n(f,x,R)}else j.current=null}function cP(f){var x=f.type,j=f.memoizedProps,_=f.stateNode;try{e:switch(x){case"button":case"input":case"select":case"textarea":j.autoFocus&&_.focus();break e;case"img":j.src?_.src=j.src:j.srcSet&&(_.srcset=j.srcSet)}}catch(R){_n(f,f.return,R)}}function gC(f,x,j){try{var _=f.stateNode;kX(_,f.type,j,x),_[pr]=x}catch(R){_n(f,f.return,R)}}function dP(f){return f.tag===5||f.tag===3||f.tag===26||f.tag===27&&om(f.type)||f.tag===4}function bC(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||dP(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.tag===27&&om(f.type)||f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function yC(f,x,j){var _=f.tag;if(_===5||_===6)f=f.stateNode,x?(j.nodeType===9?j.body:j.nodeName==="HTML"?j.ownerDocument.body:j).insertBefore(f,x):(x=j.nodeType===9?j.body:j.nodeName==="HTML"?j.ownerDocument.body:j,x.appendChild(f),j=j._reactRootContainer,j!=null||x.onclick!==null||(x.onclick=oj));else if(_!==4&&(_===27&&om(f.type)&&(j=f.stateNode,x=null),f=f.child,f!==null))for(yC(f,x,j),f=f.sibling;f!==null;)yC(f,x,j),f=f.sibling}function X1(f,x,j){var _=f.tag;if(_===5||_===6)f=f.stateNode,x?j.insertBefore(f,x):j.appendChild(f);else if(_!==4&&(_===27&&om(f.type)&&(j=f.stateNode),f=f.child,f!==null))for(X1(f,x,j),f=f.sibling;f!==null;)X1(f,x,j),f=f.sibling}function uP(f){var x=f.stateNode,j=f.memoizedProps;try{for(var _=f.type,R=x.attributes;R.length;)x.removeAttributeNode(R[0]);$i(x,_,j),x[rr]=f,x[pr]=j}catch(q){_n(f,f.return,q)}}var Dh=!1,Os=!1,jC=!1,hP=typeof WeakSet=="function"?WeakSet:Set,yi=null;function iX(f,x){if(f=f.containerInfo,HC=mj,f=Ri(f),si(f)){if("selectionStart"in f)var j={start:f.selectionStart,end:f.selectionEnd};else e:{j=(j=f.ownerDocument)&&j.defaultView||window;var _=j.getSelection&&j.getSelection();if(_&&_.rangeCount!==0){j=_.anchorNode;var R=_.anchorOffset,q=_.focusNode;_=_.focusOffset;try{j.nodeType,q.nodeType}catch{j=null;break e}var me=0,Ee=-1,Ze=-1,Dt=0,Wt=0,tr=f,It=null;t:for(;;){for(var Pt;tr!==j||R!==0&&tr.nodeType!==3||(Ee=me+R),tr!==q||_!==0&&tr.nodeType!==3||(Ze=me+_),tr.nodeType===3&&(me+=tr.nodeValue.length),(Pt=tr.firstChild)!==null;)It=tr,tr=Pt;for(;;){if(tr===f)break t;if(It===j&&++Dt===R&&(Ee=me),It===q&&++Wt===_&&(Ze=me),(Pt=tr.nextSibling)!==null)break;tr=It,It=tr.parentNode}tr=Pt}j=Ee===-1||Ze===-1?null:{start:Ee,end:Ze}}else j=null}j=j||{start:0,end:0}}else j=null;for(WC={focusedElem:f,selectionRange:j},mj=!1,yi=x;yi!==null;)if(x=yi,f=x.child,(x.subtreeFlags&1024)!==0&&f!==null)f.return=x,yi=f;else for(;yi!==null;){switch(x=yi,q=x.alternate,f=x.flags,x.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&q!==null){f=void 0,j=x,R=q.memoizedProps,q=q.memoizedState,_=j.stateNode;try{var ia=Ep(j.type,R,j.elementType===j.type);f=_.getSnapshotBeforeUpdate(ia,q),_.__reactInternalSnapshotBeforeUpdate=f}catch(Qr){_n(j,j.return,Qr)}}break;case 3:if((f&1024)!==0){if(f=x.stateNode.containerInfo,j=f.nodeType,j===9)KC(f);else if(j===1)switch(f.nodeName){case"HEAD":case"HTML":case"BODY":KC(f);break;default:f.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(n(163))}if(f=x.sibling,f!==null){f.return=x.return,yi=f;break}yi=x.return}}function fP(f,x,j){var _=j.flags;switch(j.tag){case 0:case 11:case 15:em(f,j),_&4&&Rg(5,j);break;case 1:if(em(f,j),_&4)if(f=j.stateNode,x===null)try{f.componentDidMount()}catch(me){_n(j,j.return,me)}else{var R=Ep(j.type,x.memoizedProps);x=x.memoizedState;try{f.componentDidUpdate(R,x,f.__reactInternalSnapshotBeforeUpdate)}catch(me){_n(j,j.return,me)}}_&64&&oP(j),_&512&&Fg(j,j.return);break;case 3:if(em(f,j),_&64&&(f=j.updateQueue,f!==null)){if(x=null,j.child!==null)switch(j.child.tag){case 27:case 5:x=j.child.stateNode;break;case 1:x=j.child.stateNode}try{Ya(f,x)}catch(me){_n(j,j.return,me)}}break;case 27:x===null&&_&4&&uP(j);case 26:case 5:em(f,j),x===null&&_&4&&cP(j),_&512&&Fg(j,j.return);break;case 12:em(f,j);break;case 13:em(f,j),_&4&&xP(f,j),_&64&&(f=j.memoizedState,f!==null&&(f=f.dehydrated,f!==null&&(j=pX.bind(null,j),PX(f,j))));break;case 22:if(_=j.memoizedState!==null||Dh,!_){x=x!==null&&x.memoizedState!==null||Os,R=Dh;var q=Os;Dh=_,(Os=x)&&!q?tm(f,j,(j.subtreeFlags&8772)!==0):em(f,j),Dh=R,Os=q}break;case 30:break;default:em(f,j)}}function mP(f){var x=f.alternate;x!==null&&(f.alternate=null,mP(x)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(x=f.stateNode,x!==null&&_e(x)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}var Yn=null,al=!1;function Ah(f,x,j){for(j=j.child;j!==null;)pP(f,x,j),j=j.sibling}function pP(f,x,j){if(Vt&&typeof Vt.onCommitFiberUnmount=="function")try{Vt.onCommitFiberUnmount(At,j)}catch{}switch(j.tag){case 26:Os||fu(j,x),Ah(f,x,j),j.memoizedState?j.memoizedState.count--:j.stateNode&&(j=j.stateNode,j.parentNode.removeChild(j));break;case 27:Os||fu(j,x);var _=Yn,R=al;om(j.type)&&(Yn=j.stateNode,al=!1),Ah(f,x,j),Wg(j.stateNode),Yn=_,al=R;break;case 5:Os||fu(j,x);case 6:if(_=Yn,R=al,Yn=null,Ah(f,x,j),Yn=_,al=R,Yn!==null)if(al)try{(Yn.nodeType===9?Yn.body:Yn.nodeName==="HTML"?Yn.ownerDocument.body:Yn).removeChild(j.stateNode)}catch(q){_n(j,x,q)}else try{Yn.removeChild(j.stateNode)}catch(q){_n(j,x,q)}break;case 18:Yn!==null&&(al?(f=Yn,aO(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,j.stateNode),eb(f)):aO(Yn,j.stateNode));break;case 4:_=Yn,R=al,Yn=j.stateNode.containerInfo,al=!0,Ah(f,x,j),Yn=_,al=R;break;case 0:case 11:case 14:case 15:Os||Zf(2,j,x),Os||Zf(4,j,x),Ah(f,x,j);break;case 1:Os||(fu(j,x),_=j.stateNode,typeof _.componentWillUnmount=="function"&&lP(j,x,_)),Ah(f,x,j);break;case 21:Ah(f,x,j);break;case 22:Os=(_=Os)||j.memoizedState!==null,Ah(f,x,j),Os=_;break;default:Ah(f,x,j)}}function xP(f,x){if(x.memoizedState===null&&(f=x.alternate,f!==null&&(f=f.memoizedState,f!==null&&(f=f.dehydrated,f!==null))))try{eb(f)}catch(j){_n(x,x.return,j)}}function oX(f){switch(f.tag){case 13:case 19:var x=f.stateNode;return x===null&&(x=f.stateNode=new hP),x;case 22:return f=f.stateNode,x=f._retryCache,x===null&&(x=f._retryCache=new hP),x;default:throw Error(n(435,f.tag))}}function NC(f,x){var j=oX(f);x.forEach(function(_){var R=xX.bind(null,f,_);j.has(_)||(j.add(_),_.then(R,R))})}function Il(f,x){var j=x.deletions;if(j!==null)for(var _=0;_<j.length;_++){var R=j[_],q=f,me=x,Ee=me;e:for(;Ee!==null;){switch(Ee.tag){case 27:if(om(Ee.type)){Yn=Ee.stateNode,al=!1;break e}break;case 5:Yn=Ee.stateNode,al=!1;break e;case 3:case 4:Yn=Ee.stateNode.containerInfo,al=!0;break e}Ee=Ee.return}if(Yn===null)throw Error(n(160));pP(q,me,R),Yn=null,al=!1,q=R.alternate,q!==null&&(q.return=null),R.return=null}if(x.subtreeFlags&13878)for(x=x.child;x!==null;)vP(x,f),x=x.sibling}var bd=null;function vP(f,x){var j=f.alternate,_=f.flags;switch(f.tag){case 0:case 11:case 14:case 15:Il(x,f),Pl(f),_&4&&(Zf(3,f,f.return),Rg(3,f),Zf(5,f,f.return));break;case 1:Il(x,f),Pl(f),_&512&&(Os||j===null||fu(j,j.return)),_&64&&Dh&&(f=f.updateQueue,f!==null&&(_=f.callbacks,_!==null&&(j=f.shared.hiddenCallbacks,f.shared.hiddenCallbacks=j===null?_:j.concat(_))));break;case 26:var R=bd;if(Il(x,f),Pl(f),_&512&&(Os||j===null||fu(j,j.return)),_&4){var q=j!==null?j.memoizedState:null;if(_=f.memoizedState,j===null)if(_===null)if(f.stateNode===null){e:{_=f.type,j=f.memoizedProps,R=R.ownerDocument||R;t:switch(_){case"title":q=R.getElementsByTagName("title")[0],(!q||q[Te]||q[rr]||q.namespaceURI==="http://www.w3.org/2000/svg"||q.hasAttribute("itemprop"))&&(q=R.createElement(_),R.head.insertBefore(q,R.querySelector("head > title"))),$i(q,_,j),q[rr]=f,nt(q),_=q;break e;case"link":var me=uO("link","href",R).get(_+(j.href||""));if(me){for(var Ee=0;Ee<me.length;Ee++)if(q=me[Ee],q.getAttribute("href")===(j.href==null||j.href===""?null:j.href)&&q.getAttribute("rel")===(j.rel==null?null:j.rel)&&q.getAttribute("title")===(j.title==null?null:j.title)&&q.getAttribute("crossorigin")===(j.crossOrigin==null?null:j.crossOrigin)){me.splice(Ee,1);break t}}q=R.createElement(_),$i(q,_,j),R.head.appendChild(q);break;case"meta":if(me=uO("meta","content",R).get(_+(j.content||""))){for(Ee=0;Ee<me.length;Ee++)if(q=me[Ee],q.getAttribute("content")===(j.content==null?null:""+j.content)&&q.getAttribute("name")===(j.name==null?null:j.name)&&q.getAttribute("property")===(j.property==null?null:j.property)&&q.getAttribute("http-equiv")===(j.httpEquiv==null?null:j.httpEquiv)&&q.getAttribute("charset")===(j.charSet==null?null:j.charSet)){me.splice(Ee,1);break t}}q=R.createElement(_),$i(q,_,j),R.head.appendChild(q);break;default:throw Error(n(468,_))}q[rr]=f,nt(q),_=q}f.stateNode=_}else hO(R,f.type,f.stateNode);else f.stateNode=dO(R,_,f.memoizedProps);else q!==_?(q===null?j.stateNode!==null&&(j=j.stateNode,j.parentNode.removeChild(j)):q.count--,_===null?hO(R,f.type,f.stateNode):dO(R,_,f.memoizedProps)):_===null&&f.stateNode!==null&&gC(f,f.memoizedProps,j.memoizedProps)}break;case 27:Il(x,f),Pl(f),_&512&&(Os||j===null||fu(j,j.return)),j!==null&&_&4&&gC(f,f.memoizedProps,j.memoizedProps);break;case 5:if(Il(x,f),Pl(f),_&512&&(Os||j===null||fu(j,j.return)),f.flags&32){R=f.stateNode;try{_s(R,"")}catch(Pt){_n(f,f.return,Pt)}}_&4&&f.stateNode!=null&&(R=f.memoizedProps,gC(f,R,j!==null?j.memoizedProps:R)),_&1024&&(jC=!0);break;case 6:if(Il(x,f),Pl(f),_&4){if(f.stateNode===null)throw Error(n(162));_=f.memoizedProps,j=f.stateNode;try{j.nodeValue=_}catch(Pt){_n(f,f.return,Pt)}}break;case 3:if(uj=null,R=bd,bd=cj(x.containerInfo),Il(x,f),bd=R,Pl(f),_&4&&j!==null&&j.memoizedState.isDehydrated)try{eb(x.containerInfo)}catch(Pt){_n(f,f.return,Pt)}jC&&(jC=!1,gP(f));break;case 4:_=bd,bd=cj(f.stateNode.containerInfo),Il(x,f),Pl(f),bd=_;break;case 12:Il(x,f),Pl(f);break;case 13:Il(x,f),Pl(f),f.child.flags&8192&&f.memoizedState!==null!=(j!==null&&j.memoizedState!==null)&&(EC=ye()),_&4&&(_=f.updateQueue,_!==null&&(f.updateQueue=null,NC(f,_)));break;case 22:R=f.memoizedState!==null;var Ze=j!==null&&j.memoizedState!==null,Dt=Dh,Wt=Os;if(Dh=Dt||R,Os=Wt||Ze,Il(x,f),Os=Wt,Dh=Dt,Pl(f),_&8192)e:for(x=f.stateNode,x._visibility=R?x._visibility&-2:x._visibility|1,R&&(j===null||Ze||Dh||Os||Dp(f)),j=null,x=f;;){if(x.tag===5||x.tag===26){if(j===null){Ze=j=x;try{if(q=Ze.stateNode,R)me=q.style,typeof me.setProperty=="function"?me.setProperty("display","none","important"):me.display="none";else{Ee=Ze.stateNode;var tr=Ze.memoizedProps.style,It=tr!=null&&tr.hasOwnProperty("display")?tr.display:null;Ee.style.display=It==null||typeof It=="boolean"?"":(""+It).trim()}}catch(Pt){_n(Ze,Ze.return,Pt)}}}else if(x.tag===6){if(j===null){Ze=x;try{Ze.stateNode.nodeValue=R?"":Ze.memoizedProps}catch(Pt){_n(Ze,Ze.return,Pt)}}}else if((x.tag!==22&&x.tag!==23||x.memoizedState===null||x===f)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break e;for(;x.sibling===null;){if(x.return===null||x.return===f)break e;j===x&&(j=null),x=x.return}j===x&&(j=null),x.sibling.return=x.return,x=x.sibling}_&4&&(_=f.updateQueue,_!==null&&(j=_.retryQueue,j!==null&&(_.retryQueue=null,NC(f,j))));break;case 19:Il(x,f),Pl(f),_&4&&(_=f.updateQueue,_!==null&&(f.updateQueue=null,NC(f,_)));break;case 30:break;case 21:break;default:Il(x,f),Pl(f)}}function Pl(f){var x=f.flags;if(x&2){try{for(var j,_=f.return;_!==null;){if(dP(_)){j=_;break}_=_.return}if(j==null)throw Error(n(160));switch(j.tag){case 27:var R=j.stateNode,q=bC(f);X1(f,q,R);break;case 5:var me=j.stateNode;j.flags&32&&(_s(me,""),j.flags&=-33);var Ee=bC(f);X1(f,Ee,me);break;case 3:case 4:var Ze=j.stateNode.containerInfo,Dt=bC(f);yC(f,Dt,Ze);break;default:throw Error(n(161))}}catch(Wt){_n(f,f.return,Wt)}f.flags&=-3}x&4096&&(f.flags&=-4097)}function gP(f){if(f.subtreeFlags&1024)for(f=f.child;f!==null;){var x=f;gP(x),x.tag===5&&x.flags&1024&&x.stateNode.reset(),f=f.sibling}}function em(f,x){if(x.subtreeFlags&8772)for(x=x.child;x!==null;)fP(f,x.alternate,x),x=x.sibling}function Dp(f){for(f=f.child;f!==null;){var x=f;switch(x.tag){case 0:case 11:case 14:case 15:Zf(4,x,x.return),Dp(x);break;case 1:fu(x,x.return);var j=x.stateNode;typeof j.componentWillUnmount=="function"&&lP(x,x.return,j),Dp(x);break;case 27:Wg(x.stateNode);case 26:case 5:fu(x,x.return),Dp(x);break;case 22:x.memoizedState===null&&Dp(x);break;case 30:Dp(x);break;default:Dp(x)}f=f.sibling}}function tm(f,x,j){for(j=j&&(x.subtreeFlags&8772)!==0,x=x.child;x!==null;){var _=x.alternate,R=f,q=x,me=q.flags;switch(q.tag){case 0:case 11:case 15:tm(R,q,j),Rg(4,q);break;case 1:if(tm(R,q,j),_=q,R=_.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Dt){_n(_,_.return,Dt)}if(_=q,R=_.updateQueue,R!==null){var Ee=_.stateNode;try{var Ze=R.shared.hiddenCallbacks;if(Ze!==null)for(R.shared.hiddenCallbacks=null,R=0;R<Ze.length;R++)Fa(Ze[R],Ee)}catch(Dt){_n(_,_.return,Dt)}}j&&me&64&&oP(q),Fg(q,q.return);break;case 27:uP(q);case 26:case 5:tm(R,q,j),j&&_===null&&me&4&&cP(q),Fg(q,q.return);break;case 12:tm(R,q,j);break;case 13:tm(R,q,j),j&&me&4&&xP(R,q);break;case 22:q.memoizedState===null&&tm(R,q,j),Fg(q,q.return);break;case 30:break;default:tm(R,q,j)}x=x.sibling}}function wC(f,x){var j=null;f!==null&&f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(j=f.memoizedState.cachePool.pool),f=null,x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(f=x.memoizedState.cachePool.pool),f!==j&&(f!=null&&f.refCount++,j!=null&&xp(j))}function SC(f,x){f=null,x.alternate!==null&&(f=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==f&&(x.refCount++,f!=null&&xp(f))}function mu(f,x,j,_){if(x.subtreeFlags&10256)for(x=x.child;x!==null;)bP(f,x,j,_),x=x.sibling}function bP(f,x,j,_){var R=x.flags;switch(x.tag){case 0:case 11:case 15:mu(f,x,j,_),R&2048&&Rg(9,x);break;case 1:mu(f,x,j,_);break;case 3:mu(f,x,j,_),R&2048&&(f=null,x.alternate!==null&&(f=x.alternate.memoizedState.cache),x=x.memoizedState.cache,x!==f&&(x.refCount++,f!=null&&xp(f)));break;case 12:if(R&2048){mu(f,x,j,_),f=x.stateNode;try{var q=x.memoizedProps,me=q.id,Ee=q.onPostCommit;typeof Ee=="function"&&Ee(me,x.alternate===null?"mount":"update",f.passiveEffectDuration,-0)}catch(Ze){_n(x,x.return,Ze)}}else mu(f,x,j,_);break;case 13:mu(f,x,j,_);break;case 23:break;case 22:q=x.stateNode,me=x.alternate,x.memoizedState!==null?q._visibility&2?mu(f,x,j,_):Lg(f,x):q._visibility&2?mu(f,x,j,_):(q._visibility|=2,mv(f,x,j,_,(x.subtreeFlags&10256)!==0)),R&2048&&wC(me,x);break;case 24:mu(f,x,j,_),R&2048&&SC(x.alternate,x);break;default:mu(f,x,j,_)}}function mv(f,x,j,_,R){for(R=R&&(x.subtreeFlags&10256)!==0,x=x.child;x!==null;){var q=f,me=x,Ee=j,Ze=_,Dt=me.flags;switch(me.tag){case 0:case 11:case 15:mv(q,me,Ee,Ze,R),Rg(8,me);break;case 23:break;case 22:var Wt=me.stateNode;me.memoizedState!==null?Wt._visibility&2?mv(q,me,Ee,Ze,R):Lg(q,me):(Wt._visibility|=2,mv(q,me,Ee,Ze,R)),R&&Dt&2048&&wC(me.alternate,me);break;case 24:mv(q,me,Ee,Ze,R),R&&Dt&2048&&SC(me.alternate,me);break;default:mv(q,me,Ee,Ze,R)}x=x.sibling}}function Lg(f,x){if(x.subtreeFlags&10256)for(x=x.child;x!==null;){var j=f,_=x,R=_.flags;switch(_.tag){case 22:Lg(j,_),R&2048&&wC(_.alternate,_);break;case 24:Lg(j,_),R&2048&&SC(_.alternate,_);break;default:Lg(j,_)}x=x.sibling}}var Bg=8192;function pv(f){if(f.subtreeFlags&Bg)for(f=f.child;f!==null;)yP(f),f=f.sibling}function yP(f){switch(f.tag){case 26:pv(f),f.flags&Bg&&f.memoizedState!==null&&WX(bd,f.memoizedState,f.memoizedProps);break;case 5:pv(f);break;case 3:case 4:var x=bd;bd=cj(f.stateNode.containerInfo),pv(f),bd=x;break;case 22:f.memoizedState===null&&(x=f.alternate,x!==null&&x.memoizedState!==null?(x=Bg,Bg=16777216,pv(f),Bg=x):pv(f));break;default:pv(f)}}function jP(f){var x=f.alternate;if(x!==null&&(f=x.child,f!==null)){x.child=null;do x=f.sibling,f.sibling=null,f=x;while(f!==null)}}function Ug(f){var x=f.deletions;if((f.flags&16)!==0){if(x!==null)for(var j=0;j<x.length;j++){var _=x[j];yi=_,wP(_,f)}jP(f)}if(f.subtreeFlags&10256)for(f=f.child;f!==null;)NP(f),f=f.sibling}function NP(f){switch(f.tag){case 0:case 11:case 15:Ug(f),f.flags&2048&&Zf(9,f,f.return);break;case 3:Ug(f);break;case 12:Ug(f);break;case 22:var x=f.stateNode;f.memoizedState!==null&&x._visibility&2&&(f.return===null||f.return.tag!==13)?(x._visibility&=-3,Q1(f)):Ug(f);break;default:Ug(f)}}function Q1(f){var x=f.deletions;if((f.flags&16)!==0){if(x!==null)for(var j=0;j<x.length;j++){var _=x[j];yi=_,wP(_,f)}jP(f)}for(f=f.child;f!==null;){switch(x=f,x.tag){case 0:case 11:case 15:Zf(8,x,x.return),Q1(x);break;case 22:j=x.stateNode,j._visibility&2&&(j._visibility&=-3,Q1(x));break;default:Q1(x)}f=f.sibling}}function wP(f,x){for(;yi!==null;){var j=yi;switch(j.tag){case 0:case 11:case 15:Zf(8,j,x);break;case 23:case 22:if(j.memoizedState!==null&&j.memoizedState.cachePool!==null){var _=j.memoizedState.cachePool.pool;_!=null&&_.refCount++}break;case 24:xp(j.memoizedState.cache)}if(_=j.child,_!==null)_.return=j,yi=_;else e:for(j=f;yi!==null;){_=yi;var R=_.sibling,q=_.return;if(mP(_),_===j){yi=null;break e}if(R!==null){R.return=q,yi=R;break e}yi=q}}}var lX={getCacheForType:function(f){var x=Ts(Is),j=x.data.get(f);return j===void 0&&(j=f(),x.data.set(f,j)),j}},cX=typeof WeakMap=="function"?WeakMap:Map,fn=0,Pn=null,Pa=null,Ba=0,mn=0,Ol=null,rm=!1,xv=!1,CC=!1,Th=0,gs=0,am=0,Ap=0,kC=0,wc=0,vv=0,$g=null,nl=null,_C=!1,EC=0,J1=1/0,Z1=null,nm=null,Ui=0,sm=null,gv=null,bv=0,DC=0,AC=null,SP=null,Vg=0,TC=null;function Ml(){if((fn&2)!==0&&Ba!==0)return Ba&-Ba;if(B.T!==null){var f=jh;return f!==0?f:LC()}return bt()}function CP(){wc===0&&(wc=(Ba&536870912)===0||qa?ft():536870912);var f=Nc.current;return f!==null&&(f.flags|=32),wc}function Rl(f,x,j){(f===Pn&&(mn===2||mn===9)||f.cancelPendingCommit!==null)&&(yv(f,0),im(f,Ba,wc,!1)),Ge(f,j),((fn&2)===0||f!==Pn)&&(f===Pn&&((fn&2)===0&&(Ap|=j),gs===4&&im(f,Ba,wc,!1)),pu(f))}function kP(f,x,j){if((fn&6)!==0)throw Error(n(327));var _=!j&&(x&124)===0&&(x&f.expiredLanes)===0||Be(f,x),R=_?hX(f,x):OC(f,x,!0),q=_;do{if(R===0){xv&&!_&&im(f,x,0,!1);break}else{if(j=f.current.alternate,q&&!dX(j)){R=OC(f,x,!1),q=!1;continue}if(R===2){if(q=x,f.errorRecoveryDisabledLanes&q)var me=0;else me=f.pendingLanes&-536870913,me=me!==0?me:me&536870912?536870912:0;if(me!==0){x=me;e:{var Ee=f;R=$g;var Ze=Ee.current.memoizedState.isDehydrated;if(Ze&&(yv(Ee,me).flags|=256),me=OC(Ee,me,!1),me!==2){if(CC&&!Ze){Ee.errorRecoveryDisabledLanes|=q,Ap|=q,R=4;break e}q=nl,nl=R,q!==null&&(nl===null?nl=q:nl.push.apply(nl,q))}R=me}if(q=!1,R!==2)continue}}if(R===1){yv(f,0),im(f,x,0,!0);break}e:{switch(_=f,q=R,q){case 0:case 1:throw Error(n(345));case 4:if((x&4194048)!==x)break;case 6:im(_,x,wc,!rm);break e;case 2:nl=null;break;case 3:case 5:break;default:throw Error(n(329))}if((x&62914560)===x&&(R=EC+300-ye(),10<R)){if(im(_,x,wc,!rm),Xe(_,0,!0)!==0)break e;_.timeoutHandle=tO(_P.bind(null,_,j,nl,Z1,_C,x,wc,Ap,vv,rm,q,2,-0,0),R);break e}_P(_,j,nl,Z1,_C,x,wc,Ap,vv,rm,q,0,-0,0)}}break}while(!0);pu(f)}function _P(f,x,j,_,R,q,me,Ee,Ze,Dt,Wt,tr,It,Pt){if(f.timeoutHandle=-1,tr=x.subtreeFlags,(tr&8192||(tr&16785408)===16785408)&&(Kg={stylesheets:null,count:0,unsuspend:HX},yP(x),tr=GX(),tr!==null)){f.cancelPendingCommit=tr(OP.bind(null,f,x,q,j,_,R,me,Ee,Ze,Wt,1,It,Pt)),im(f,q,me,!Dt);return}OP(f,x,q,j,_,R,me,Ee,Ze)}function dX(f){for(var x=f;;){var j=x.tag;if((j===0||j===11||j===15)&&x.flags&16384&&(j=x.updateQueue,j!==null&&(j=j.stores,j!==null)))for(var _=0;_<j.length;_++){var R=j[_],q=R.getSnapshot;R=R.value;try{if(!Ws(q(),R))return!1}catch{return!1}}if(j=x.child,x.subtreeFlags&16384&&j!==null)j.return=x,x=j;else{if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function im(f,x,j,_){x&=~kC,x&=~Ap,f.suspendedLanes|=x,f.pingedLanes&=~x,_&&(f.warmLanes|=x),_=f.expirationTimes;for(var R=x;0<R;){var q=31-he(R),me=1<<q;_[q]=-1,R&=~me}j!==0&&Mt(f,j,x)}function ej(){return(fn&6)===0?(qg(0),!1):!0}function IC(){if(Pa!==null){if(mn===0)var f=Pa.return;else f=Pa,fd=Ys=null,iv(f),hv=null,Pg=0,f=Pa;for(;f!==null;)iP(f.alternate,f),f=f.return;Pa=null}}function yv(f,x){var j=f.timeoutHandle;j!==-1&&(f.timeoutHandle=-1,EX(j)),j=f.cancelPendingCommit,j!==null&&(f.cancelPendingCommit=null,j()),IC(),Pn=f,Pa=j=xc(f.current,null),Ba=x,mn=0,Ol=null,rm=!1,xv=Be(f,x),CC=!1,vv=wc=kC=Ap=am=gs=0,nl=$g=null,_C=!1,(x&8)!==0&&(x|=x&32);var _=f.entangledLanes;if(_!==0)for(f=f.entanglements,_&=x;0<_;){var R=31-he(_),q=1<<R;x|=f[R],_&=~q}return Th=x,Zo(),j}function EP(f,x){Gr=null,B.H=$1,x===je||x===Ce?(x=pt(),mn=3):x===we?(x=pt(),mn=4):mn=x===WI?8:x!==null&&typeof x=="object"&&typeof x.then=="function"?6:1,Ol=x,Pa===null&&(gs=1,W1(f,Ca(x,f.current)))}function DP(){var f=B.H;return B.H=$1,f===null?$1:f}function AP(){var f=B.A;return B.A=lX,f}function PC(){gs=4,rm||(Ba&4194048)!==Ba&&Nc.current!==null||(xv=!0),(am&134217727)===0&&(Ap&134217727)===0||Pn===null||im(Pn,Ba,wc,!1)}function OC(f,x,j){var _=fn;fn|=2;var R=DP(),q=AP();(Pn!==f||Ba!==x)&&(Z1=null,yv(f,x)),x=!1;var me=gs;e:do try{if(mn!==0&&Pa!==null){var Ee=Pa,Ze=Ol;switch(mn){case 8:IC(),me=6;break e;case 3:case 2:case 9:case 6:Nc.current===null&&(x=!0);var Dt=mn;if(mn=0,Ol=null,jv(f,Ee,Ze,Dt),j&&xv){me=0;break e}break;default:Dt=mn,mn=0,Ol=null,jv(f,Ee,Ze,Dt)}}uX(),me=gs;break}catch(Wt){EP(f,Wt)}while(!0);return x&&f.shellSuspendCounter++,fd=Ys=null,fn=_,B.H=R,B.A=q,Pa===null&&(Pn=null,Ba=0,Zo()),me}function uX(){for(;Pa!==null;)TP(Pa)}function hX(f,x){var j=fn;fn|=2;var _=DP(),R=AP();Pn!==f||Ba!==x?(Z1=null,J1=ye()+500,yv(f,x)):xv=Be(f,x);e:do try{if(mn!==0&&Pa!==null){x=Pa;var q=Ol;t:switch(mn){case 1:mn=0,Ol=null,jv(f,x,q,1);break;case 2:case 9:if($e(q)){mn=0,Ol=null,IP(x);break}x=function(){mn!==2&&mn!==9||Pn!==f||(mn=7),pu(f)},q.then(x,x);break e;case 3:mn=7;break e;case 4:mn=5;break e;case 7:$e(q)?(mn=0,Ol=null,IP(x)):(mn=0,Ol=null,jv(f,x,q,7));break;case 5:var me=null;switch(Pa.tag){case 26:me=Pa.memoizedState;case 5:case 27:var Ee=Pa;if(!me||fO(me)){mn=0,Ol=null;var Ze=Ee.sibling;if(Ze!==null)Pa=Ze;else{var Dt=Ee.return;Dt!==null?(Pa=Dt,tj(Dt)):Pa=null}break t}}mn=0,Ol=null,jv(f,x,q,5);break;case 6:mn=0,Ol=null,jv(f,x,q,6);break;case 8:IC(),gs=6;break e;default:throw Error(n(462))}}fX();break}catch(Wt){EP(f,Wt)}while(!0);return fd=Ys=null,B.H=_,B.A=R,fn=j,Pa!==null?0:(Pn=null,Ba=0,Zo(),gs)}function fX(){for(;Pa!==null&&!ue();)TP(Pa)}function TP(f){var x=nP(f.alternate,f,Th);f.memoizedProps=f.pendingProps,x===null?tj(f):Pa=x}function IP(f){var x=f,j=x.alternate;switch(x.tag){case 15:case 0:x=JI(j,x,x.pendingProps,x.type,void 0,Ba);break;case 11:x=JI(j,x,x.pendingProps,x.type.render,x.ref,Ba);break;case 5:iv(x);default:iP(j,x),x=Pa=hp(x,Th),x=nP(j,x,Th)}f.memoizedProps=f.pendingProps,x===null?tj(f):Pa=x}function jv(f,x,j,_){fd=Ys=null,iv(x),hv=null,Pg=0;var R=x.return;try{if(rX(f,R,x,j,Ba)){gs=1,W1(f,Ca(j,f.current)),Pa=null;return}}catch(q){if(R!==null)throw Pa=R,q;gs=1,W1(f,Ca(j,f.current)),Pa=null;return}x.flags&32768?(qa||_===1?f=!0:xv||(Ba&536870912)!==0?f=!1:(rm=f=!0,(_===2||_===9||_===3||_===6)&&(_=Nc.current,_!==null&&_.tag===13&&(_.flags|=16384))),PP(x,f)):tj(x)}function tj(f){var x=f;do{if((x.flags&32768)!==0){PP(x,rm);return}f=x.return;var j=nX(x.alternate,x,Th);if(j!==null){Pa=j;return}if(x=x.sibling,x!==null){Pa=x;return}Pa=x=f}while(x!==null);gs===0&&(gs=5)}function PP(f,x){do{var j=sX(f.alternate,f);if(j!==null){j.flags&=32767,Pa=j;return}if(j=f.return,j!==null&&(j.flags|=32768,j.subtreeFlags=0,j.deletions=null),!x&&(f=f.sibling,f!==null)){Pa=f;return}Pa=f=j}while(f!==null);gs=6,Pa=null}function OP(f,x,j,_,R,q,me,Ee,Ze){f.cancelPendingCommit=null;do rj();while(Ui!==0);if((fn&6)!==0)throw Error(n(327));if(x!==null){if(x===f.current)throw Error(n(177));if(q=x.lanes|x.childLanes,q|=as,lt(f,j,q,me,Ee,Ze),f===Pn&&(Pa=Pn=null,Ba=0),gv=x,sm=f,bv=j,DC=q,AC=R,SP=_,(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?(f.callbackNode=null,f.callbackPriority=0,vX(ot,function(){return BP(),null})):(f.callbackNode=null,f.callbackPriority=0),_=(x.flags&13878)!==0,(x.subtreeFlags&13878)!==0||_){_=B.T,B.T=null,R=Q.p,Q.p=2,me=fn,fn|=4;try{iX(f,x,j)}finally{fn=me,Q.p=R,B.T=_}}Ui=1,MP(),RP(),FP()}}function MP(){if(Ui===1){Ui=0;var f=sm,x=gv,j=(x.flags&13878)!==0;if((x.subtreeFlags&13878)!==0||j){j=B.T,B.T=null;var _=Q.p;Q.p=2;var R=fn;fn|=4;try{vP(x,f);var q=WC,me=Ri(f.containerInfo),Ee=q.focusedElem,Ze=q.selectionRange;if(me!==Ee&&Ee&&Ee.ownerDocument&&Xd(Ee.ownerDocument.documentElement,Ee)){if(Ze!==null&&si(Ee)){var Dt=Ze.start,Wt=Ze.end;if(Wt===void 0&&(Wt=Dt),"selectionStart"in Ee)Ee.selectionStart=Dt,Ee.selectionEnd=Math.min(Wt,Ee.value.length);else{var tr=Ee.ownerDocument||document,It=tr&&tr.defaultView||window;if(It.getSelection){var Pt=It.getSelection(),ia=Ee.textContent.length,Qr=Math.min(Ze.start,ia),wn=Ze.end===void 0?Qr:Math.min(Ze.end,ia);!Pt.extend&&Qr>wn&&(me=wn,wn=Qr,Qr=me);var gt=sd(Ee,Qr),ct=sd(Ee,wn);if(gt&&ct&&(Pt.rangeCount!==1||Pt.anchorNode!==gt.node||Pt.anchorOffset!==gt.offset||Pt.focusNode!==ct.node||Pt.focusOffset!==ct.offset)){var _t=tr.createRange();_t.setStart(gt.node,gt.offset),Pt.removeAllRanges(),Qr>wn?(Pt.addRange(_t),Pt.extend(ct.node,ct.offset)):(_t.setEnd(ct.node,ct.offset),Pt.addRange(_t))}}}}for(tr=[],Pt=Ee;Pt=Pt.parentNode;)Pt.nodeType===1&&tr.push({element:Pt,left:Pt.scrollLeft,top:Pt.scrollTop});for(typeof Ee.focus=="function"&&Ee.focus(),Ee=0;Ee<tr.length;Ee++){var Qt=tr[Ee];Qt.element.scrollLeft=Qt.left,Qt.element.scrollTop=Qt.top}}mj=!!HC,WC=HC=null}finally{fn=R,Q.p=_,B.T=j}}f.current=x,Ui=2}}function RP(){if(Ui===2){Ui=0;var f=sm,x=gv,j=(x.flags&8772)!==0;if((x.subtreeFlags&8772)!==0||j){j=B.T,B.T=null;var _=Q.p;Q.p=2;var R=fn;fn|=4;try{fP(f,x.alternate,x)}finally{fn=R,Q.p=_,B.T=j}}Ui=3}}function FP(){if(Ui===4||Ui===3){Ui=0,se();var f=sm,x=gv,j=bv,_=SP;(x.subtreeFlags&10256)!==0||(x.flags&10256)!==0?Ui=5:(Ui=0,gv=sm=null,LP(f,f.pendingLanes));var R=f.pendingLanes;if(R===0&&(nm=null),it(j),x=x.stateNode,Vt&&typeof Vt.onCommitFiberRoot=="function")try{Vt.onCommitFiberRoot(At,x,void 0,(x.current.flags&128)===128)}catch{}if(_!==null){x=B.T,R=Q.p,Q.p=2,B.T=null;try{for(var q=f.onRecoverableError,me=0;me<_.length;me++){var Ee=_[me];q(Ee.value,{componentStack:Ee.stack})}}finally{B.T=x,Q.p=R}}(bv&3)!==0&&rj(),pu(f),R=f.pendingLanes,(j&4194090)!==0&&(R&42)!==0?f===TC?Vg++:(Vg=0,TC=f):Vg=0,qg(0)}}function LP(f,x){(f.pooledCacheLanes&=x)===0&&(x=f.pooledCache,x!=null&&(f.pooledCache=null,xp(x)))}function rj(f){return MP(),RP(),FP(),BP()}function BP(){if(Ui!==5)return!1;var f=sm,x=DC;DC=0;var j=it(bv),_=B.T,R=Q.p;try{Q.p=32>j?32:j,B.T=null,j=AC,AC=null;var q=sm,me=bv;if(Ui=0,gv=sm=null,bv=0,(fn&6)!==0)throw Error(n(331));var Ee=fn;if(fn|=4,NP(q.current),bP(q,q.current,me,j),fn=Ee,qg(0,!1),Vt&&typeof Vt.onPostCommitFiberRoot=="function")try{Vt.onPostCommitFiberRoot(At,q)}catch{}return!0}finally{Q.p=R,B.T=_,LP(f,x)}}function UP(f,x,j){x=Ca(j,x),x=cC(f.stateNode,x,2),f=er(f,x,2),f!==null&&(Ge(f,2),pu(f))}function _n(f,x,j){if(f.tag===3)UP(f,f,j);else for(;x!==null;){if(x.tag===3){UP(x,f,j);break}else if(x.tag===1){var _=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(nm===null||!nm.has(_))){f=Ca(j,f),j=zI(2),_=er(x,j,2),_!==null&&(HI(j,_,x,f),Ge(_,2),pu(_));break}}x=x.return}}function MC(f,x,j){var _=f.pingCache;if(_===null){_=f.pingCache=new cX;var R=new Set;_.set(x,R)}else R=_.get(x),R===void 0&&(R=new Set,_.set(x,R));R.has(j)||(CC=!0,R.add(j),f=mX.bind(null,f,x,j),x.then(f,f))}function mX(f,x,j){var _=f.pingCache;_!==null&&_.delete(x),f.pingedLanes|=f.suspendedLanes&j,f.warmLanes&=~j,Pn===f&&(Ba&j)===j&&(gs===4||gs===3&&(Ba&62914560)===Ba&&300>ye()-EC?(fn&2)===0&&yv(f,0):kC|=j,vv===Ba&&(vv=0)),pu(f)}function $P(f,x){x===0&&(x=Ie()),f=od(f,x),f!==null&&(Ge(f,x),pu(f))}function pX(f){var x=f.memoizedState,j=0;x!==null&&(j=x.retryLane),$P(f,j)}function xX(f,x){var j=0;switch(f.tag){case 13:var _=f.stateNode,R=f.memoizedState;R!==null&&(j=R.retryLane);break;case 19:_=f.stateNode;break;case 22:_=f.stateNode._retryCache;break;default:throw Error(n(314))}_!==null&&_.delete(x),$P(f,j)}function vX(f,x){return le(f,x)}var aj=null,Nv=null,RC=!1,nj=!1,FC=!1,Tp=0;function pu(f){f!==Nv&&f.next===null&&(Nv===null?aj=Nv=f:Nv=Nv.next=f),nj=!0,RC||(RC=!0,bX())}function qg(f,x){if(!FC&&nj){FC=!0;do for(var j=!1,_=aj;_!==null;){if(f!==0){var R=_.pendingLanes;if(R===0)var q=0;else{var me=_.suspendedLanes,Ee=_.pingedLanes;q=(1<<31-he(42|f)+1)-1,q&=R&~(me&~Ee),q=q&201326741?q&201326741|1:q?q|2:0}q!==0&&(j=!0,HP(_,q))}else q=Ba,q=Xe(_,_===Pn?q:0,_.cancelPendingCommit!==null||_.timeoutHandle!==-1),(q&3)===0||Be(_,q)||(j=!0,HP(_,q));_=_.next}while(j);FC=!1}}function gX(){VP()}function VP(){nj=RC=!1;var f=0;Tp!==0&&(_X()&&(f=Tp),Tp=0);for(var x=ye(),j=null,_=aj;_!==null;){var R=_.next,q=qP(_,x);q===0?(_.next=null,j===null?aj=R:j.next=R,R===null&&(Nv=j)):(j=_,(f!==0||(q&3)!==0)&&(nj=!0)),_=R}qg(f)}function qP(f,x){for(var j=f.suspendedLanes,_=f.pingedLanes,R=f.expirationTimes,q=f.pendingLanes&-62914561;0<q;){var me=31-he(q),Ee=1<<me,Ze=R[me];Ze===-1?((Ee&j)===0||(Ee&_)!==0)&&(R[me]=qe(Ee,x)):Ze<=x&&(f.expiredLanes|=Ee),q&=~Ee}if(x=Pn,j=Ba,j=Xe(f,f===x?j:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),_=f.callbackNode,j===0||f===x&&(mn===2||mn===9)||f.cancelPendingCommit!==null)return _!==null&&_!==null&&Se(_),f.callbackNode=null,f.callbackPriority=0;if((j&3)===0||Be(f,j)){if(x=j&-j,x===f.callbackPriority)return x;switch(_!==null&&Se(_),it(j)){case 2:case 8:j=Qe;break;case 32:j=ot;break;case 268435456:j=Le;break;default:j=ot}return _=zP.bind(null,f),j=le(j,_),f.callbackPriority=x,f.callbackNode=j,x}return _!==null&&_!==null&&Se(_),f.callbackPriority=2,f.callbackNode=null,2}function zP(f,x){if(Ui!==0&&Ui!==5)return f.callbackNode=null,f.callbackPriority=0,null;var j=f.callbackNode;if(rj()&&f.callbackNode!==j)return null;var _=Ba;return _=Xe(f,f===Pn?_:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),_===0?null:(kP(f,_,x),qP(f,ye()),f.callbackNode!=null&&f.callbackNode===j?zP.bind(null,f):null)}function HP(f,x){if(rj())return null;kP(f,x,!0)}function bX(){DX(function(){(fn&6)!==0?le(Ue,gX):VP()})}function LC(){return Tp===0&&(Tp=ft()),Tp}function WP(f){return f==null||typeof f=="symbol"||typeof f=="boolean"?null:typeof f=="function"?f:Nl(""+f)}function GP(f,x){var j=x.ownerDocument.createElement("input");return j.name=x.name,j.value=x.value,f.id&&j.setAttribute("form",f.id),x.parentNode.insertBefore(j,x),f=new FormData(f),j.parentNode.removeChild(j),f}function yX(f,x,j,_,R){if(x==="submit"&&j&&j.stateNode===R){var q=WP((R[pr]||null).action),me=_.submitter;me&&(x=(x=me[pr]||null)?WP(x.formAction):me.getAttribute("formAction"),x!==null&&(q=x,me=null));var Ee=new hc("action","action",null,_,R);f.push({event:Ee,listeners:[{instance:null,listener:function(){if(_.defaultPrevented){if(Tp!==0){var Ze=me?GP(R,me):new FormData(R);jc(j,{pending:!0,data:Ze,method:R.method,action:q},null,Ze)}}else typeof q=="function"&&(Ee.preventDefault(),Ze=me?GP(R,me):new FormData(R),jc(j,{pending:!0,data:Ze,method:R.method,action:q},q,Ze))},currentTarget:R}]})}}for(var BC=0;BC<ph.length;BC++){var UC=ph[BC],jX=UC.toLowerCase(),NX=UC[0].toUpperCase()+UC.slice(1);Wn(jX,"on"+NX)}Wn(Uf,"onAnimationEnd"),Wn(Jd,"onAnimationIteration"),Wn(Zd,"onAnimationStart"),Wn("dblclick","onDoubleClick"),Wn("focusin","onFocus"),Wn("focusout","onBlur"),Wn(eu,"onTransitionRun"),Wn(mh,"onTransitionStart"),Wn($f,"onTransitionCancel"),Wn(tu,"onTransitionEnd"),ir("onMouseEnter",["mouseout","mouseover"]),ir("onMouseLeave",["mouseout","mouseover"]),ir("onPointerEnter",["pointerout","pointerover"]),ir("onPointerLeave",["pointerout","pointerover"]),Jt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Jt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Jt("onBeforeInput",["compositionend","keypress","textInput","paste"]),Jt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Jt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(zg));function YP(f,x){x=(x&4)!==0;for(var j=0;j<f.length;j++){var _=f[j],R=_.event;_=_.listeners;e:{var q=void 0;if(x)for(var me=_.length-1;0<=me;me--){var Ee=_[me],Ze=Ee.instance,Dt=Ee.currentTarget;if(Ee=Ee.listener,Ze!==q&&R.isPropagationStopped())break e;q=Ee,R.currentTarget=Dt;try{q(R)}catch(Wt){H1(Wt)}R.currentTarget=null,q=Ze}else for(me=0;me<_.length;me++){if(Ee=_[me],Ze=Ee.instance,Dt=Ee.currentTarget,Ee=Ee.listener,Ze!==q&&R.isPropagationStopped())break e;q=Ee,R.currentTarget=Dt;try{q(R)}catch(Wt){H1(Wt)}R.currentTarget=null,q=Ze}}}}function Oa(f,x){var j=x[vt];j===void 0&&(j=x[vt]=new Set);var _=f+"__bubble";j.has(_)||(KP(x,f,2,!1),j.add(_))}function $C(f,x,j){var _=0;x&&(_|=4),KP(j,f,_,x)}var sj="_reactListening"+Math.random().toString(36).slice(2);function VC(f){if(!f[sj]){f[sj]=!0,St.forEach(function(j){j!=="selectionchange"&&(wX.has(j)||$C(j,!1,f),$C(j,!0,f))});var x=f.nodeType===9?f:f.ownerDocument;x===null||x[sj]||(x[sj]=!0,$C("selectionchange",!1,x))}}function KP(f,x,j,_){switch(bO(x)){case 2:var R=XX;break;case 8:R=QX;break;default:R=rk}j=R.bind(null,x,j,f),R=void 0,!ar||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(R=!0),_?R!==void 0?f.addEventListener(x,j,{capture:!0,passive:R}):f.addEventListener(x,j,!0):R!==void 0?f.addEventListener(x,j,{passive:R}):f.addEventListener(x,j,!1)}function qC(f,x,j,_,R){var q=_;if((x&1)===0&&(x&2)===0&&_!==null)e:for(;;){if(_===null)return;var me=_.tag;if(me===3||me===4){var Ee=_.stateNode.containerInfo;if(Ee===R)break;if(me===4)for(me=_.return;me!==null;){var Ze=me.tag;if((Ze===3||Ze===4)&&me.stateNode.containerInfo===R)return;me=me.return}for(;Ee!==null;){if(me=Fe(Ee),me===null)return;if(Ze=me.tag,Ze===5||Ze===6||Ze===26||Ze===27){_=q=me;continue e}Ee=Ee.parentNode}}_=_.return}_f(function(){var Dt=q,Wt=ms(j),tr=[];e:{var It=id.get(f);if(It!==void 0){var Pt=hc,ia=f;switch(f){case"keypress":if(uc(j)===0)break e;case"keydown":case"keyup":Pt=Mf;break;case"focusin":ia="focus",Pt=oh;break;case"focusout":ia="blur",Pt=oh;break;case"beforeblur":case"afterblur":Pt=oh;break;case"click":if(j.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Pt=fc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Pt=Hd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Pt=lp;break;case Uf:case Jd:case Zd:Pt=mg;break;case tu:Pt=be;break;case"scroll":case"scrollend":Pt=Df;break;case"wheel":Pt=tt;break;case"copy":case"cut":case"paste":Pt=pg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Pt=Rf;break;case"toggle":case"beforetoggle":Pt=$t}var Qr=(x&4)!==0,wn=!Qr&&(f==="scroll"||f==="scrollend"),gt=Qr?It!==null?It+"Capture":null:It;Qr=[];for(var ct=Dt,_t;ct!==null;){var Qt=ct;if(_t=Qt.stateNode,Qt=Qt.tag,Qt!==5&&Qt!==26&&Qt!==27||_t===null||gt===null||(Qt=rt(ct,gt),Qt!=null&&Qr.push(Hg(ct,Qt,_t))),wn)break;ct=ct.return}0<Qr.length&&(It=new Pt(It,ia,null,j,Wt),tr.push({event:It,listeners:Qr}))}}if((x&7)===0){e:{if(It=f==="mouseover"||f==="pointerover",Pt=f==="mouseout"||f==="pointerout",It&&j!==cc&&(ia=j.relatedTarget||j.fromElement)&&(Fe(ia)||ia[jr]))break e;if((Pt||It)&&(It=Wt.window===Wt?Wt:(It=Wt.ownerDocument)?It.defaultView||It.parentWindow:window,Pt?(ia=j.relatedTarget||j.toElement,Pt=Dt,ia=ia?Fe(ia):null,ia!==null&&(wn=i(ia),Qr=ia.tag,ia!==wn||Qr!==5&&Qr!==27&&Qr!==6)&&(ia=null)):(Pt=null,ia=Dt),Pt!==ia)){if(Qr=fc,Qt="onMouseLeave",gt="onMouseEnter",ct="mouse",(f==="pointerout"||f==="pointerover")&&(Qr=Rf,Qt="onPointerLeave",gt="onPointerEnter",ct="pointer"),wn=Pt==null?It:mt(Pt),_t=ia==null?It:mt(ia),It=new Qr(Qt,ct+"leave",Pt,j,Wt),It.target=wn,It.relatedTarget=_t,Qt=null,Fe(Wt)===Dt&&(Qr=new Qr(gt,ct+"enter",ia,j,Wt),Qr.target=_t,Qr.relatedTarget=wn,Qt=Qr),wn=Qt,Pt&&ia)t:{for(Qr=Pt,gt=ia,ct=0,_t=Qr;_t;_t=wv(_t))ct++;for(_t=0,Qt=gt;Qt;Qt=wv(Qt))_t++;for(;0<ct-_t;)Qr=wv(Qr),ct--;for(;0<_t-ct;)gt=wv(gt),_t--;for(;ct--;){if(Qr===gt||gt!==null&&Qr===gt.alternate)break t;Qr=wv(Qr),gt=wv(gt)}Qr=null}else Qr=null;Pt!==null&&XP(tr,It,Pt,Qr,!1),ia!==null&&wn!==null&&XP(tr,wn,ia,Qr,!0)}}e:{if(It=Dt?mt(Dt):window,Pt=It.nodeName&&It.nodeName.toLowerCase(),Pt==="select"||Pt==="input"&&It.type==="file")var Ar=Lf;else if(kl(It))if(dh)Ar=Jx;else{Ar=vg;var Da=to}else Pt=It.nodeName,!Pt||Pt.toLowerCase()!=="input"||It.type!=="checkbox"&&It.type!=="radio"?Dt&&td(Dt.elementType)&&(Ar=Lf):Ar=dp;if(Ar&&(Ar=Ar(f,Dt))){cp(tr,Ar,j,Wt);break e}Da&&Da(f,It,Dt),f==="focusout"&&Dt&&It.type==="number"&&Dt.memoizedProps.value!=null&&Go(It,"number",It.value)}switch(Da=Dt?mt(Dt):window,f){case"focusin":(kl(Da)||Da.contentEditable==="true")&&(ro=Da,_l=Dt,mc=null);break;case"focusout":mc=_l=ro=null;break;case"mousedown":El=!0;break;case"contextmenu":case"mouseup":case"dragend":El=!1,Hn(tr,j,Wt);break;case"selectionchange":if(Qd)break;case"keydown":case"keyup":Hn(tr,j,Wt)}var zr;if(wr)e:{switch(f){case"compositionstart":var Zr="onCompositionStart";break e;case"compositionend":Zr="onCompositionEnd";break e;case"compositionupdate":Zr="onCompositionUpdate";break e}Zr=void 0}else rs?Rn(f,j)&&(Zr="onCompositionEnd"):f==="keydown"&&j.keyCode===229&&(Zr="onCompositionStart");Zr&&(la&&j.locale!=="ko"&&(rs||Zr!=="onCompositionStart"?Zr==="onCompositionEnd"&&rs&&(zr=Ef()):(kr=Wt,kn="value"in kr?kr.value:kr.textContent,rs=!0)),Da=ij(Dt,Zr),0<Da.length&&(Zr=new If(Zr,f,null,j,Wt),tr.push({event:Zr,listeners:Da}),zr?Zr.data=zr:(zr=ts(j),zr!==null&&(Zr.data=zr)))),(zr=ua?Hs(f,j):Cl(f,j))&&(Zr=ij(Dt,"onBeforeInput"),0<Zr.length&&(Da=new If("onBeforeInput","beforeinput",null,j,Wt),tr.push({event:Da,listeners:Zr}),Da.data=zr)),yX(tr,f,Dt,j,Wt)}YP(tr,x)})}function Hg(f,x,j){return{instance:f,listener:x,currentTarget:j}}function ij(f,x){for(var j=x+"Capture",_=[];f!==null;){var R=f,q=R.stateNode;if(R=R.tag,R!==5&&R!==26&&R!==27||q===null||(R=rt(f,j),R!=null&&_.unshift(Hg(f,R,q)),R=rt(f,x),R!=null&&_.push(Hg(f,R,q))),f.tag===3)return _;f=f.return}return[]}function wv(f){if(f===null)return null;do f=f.return;while(f&&f.tag!==5&&f.tag!==27);return f||null}function XP(f,x,j,_,R){for(var q=x._reactName,me=[];j!==null&&j!==_;){var Ee=j,Ze=Ee.alternate,Dt=Ee.stateNode;if(Ee=Ee.tag,Ze!==null&&Ze===_)break;Ee!==5&&Ee!==26&&Ee!==27||Dt===null||(Ze=Dt,R?(Dt=rt(j,q),Dt!=null&&me.unshift(Hg(j,Dt,Ze))):R||(Dt=rt(j,q),Dt!=null&&me.push(Hg(j,Dt,Ze)))),j=j.return}me.length!==0&&f.push({event:x,listeners:me})}var SX=/\r\n?/g,CX=/\u0000|\uFFFD/g;function QP(f){return(typeof f=="string"?f:""+f).replace(SX,`
`).replace(CX,"")}function JP(f,x){return x=QP(x),QP(f)===x}function oj(){}function Nn(f,x,j,_,R,q){switch(j){case"children":typeof _=="string"?x==="body"||x==="textarea"&&_===""||_s(f,_):(typeof _=="number"||typeof _=="bigint")&&x!=="body"&&_s(f,""+_);break;case"className":Vr(f,"class",_);break;case"tabIndex":Vr(f,"tabindex",_);break;case"dir":case"role":case"viewBox":case"width":case"height":Vr(f,j,_);break;case"style":yl(f,_,q);break;case"data":if(x!=="object"){Vr(f,"data",_);break}case"src":case"href":if(_===""&&(x!=="a"||j!=="href")){f.removeAttribute(j);break}if(_==null||typeof _=="function"||typeof _=="symbol"||typeof _=="boolean"){f.removeAttribute(j);break}_=Nl(""+_),f.setAttribute(j,_);break;case"action":case"formAction":if(typeof _=="function"){f.setAttribute(j,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof q=="function"&&(j==="formAction"?(x!=="input"&&Nn(f,x,"name",R.name,R,null),Nn(f,x,"formEncType",R.formEncType,R,null),Nn(f,x,"formMethod",R.formMethod,R,null),Nn(f,x,"formTarget",R.formTarget,R,null)):(Nn(f,x,"encType",R.encType,R,null),Nn(f,x,"method",R.method,R,null),Nn(f,x,"target",R.target,R,null)));if(_==null||typeof _=="symbol"||typeof _=="boolean"){f.removeAttribute(j);break}_=Nl(""+_),f.setAttribute(j,_);break;case"onClick":_!=null&&(f.onclick=oj);break;case"onScroll":_!=null&&Oa("scroll",f);break;case"onScrollEnd":_!=null&&Oa("scrollend",f);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(j=_.__html,j!=null){if(R.children!=null)throw Error(n(60));f.innerHTML=j}}break;case"multiple":f.multiple=_&&typeof _!="function"&&typeof _!="symbol";break;case"muted":f.muted=_&&typeof _!="function"&&typeof _!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(_==null||typeof _=="function"||typeof _=="boolean"||typeof _=="symbol"){f.removeAttribute("xlink:href");break}j=Nl(""+_),f.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",j);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":_!=null&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(j,""+_):f.removeAttribute(j);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":_&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(j,""):f.removeAttribute(j);break;case"capture":case"download":_===!0?f.setAttribute(j,""):_!==!1&&_!=null&&typeof _!="function"&&typeof _!="symbol"?f.setAttribute(j,_):f.removeAttribute(j);break;case"cols":case"rows":case"size":case"span":_!=null&&typeof _!="function"&&typeof _!="symbol"&&!isNaN(_)&&1<=_?f.setAttribute(j,_):f.removeAttribute(j);break;case"rowSpan":case"start":_==null||typeof _=="function"||typeof _=="symbol"||isNaN(_)?f.removeAttribute(j):f.setAttribute(j,_);break;case"popover":Oa("beforetoggle",f),Oa("toggle",f),ur(f,"popover",_);break;case"xlinkActuate":va(f,"http://www.w3.org/1999/xlink","xlink:actuate",_);break;case"xlinkArcrole":va(f,"http://www.w3.org/1999/xlink","xlink:arcrole",_);break;case"xlinkRole":va(f,"http://www.w3.org/1999/xlink","xlink:role",_);break;case"xlinkShow":va(f,"http://www.w3.org/1999/xlink","xlink:show",_);break;case"xlinkTitle":va(f,"http://www.w3.org/1999/xlink","xlink:title",_);break;case"xlinkType":va(f,"http://www.w3.org/1999/xlink","xlink:type",_);break;case"xmlBase":va(f,"http://www.w3.org/XML/1998/namespace","xml:base",_);break;case"xmlLang":va(f,"http://www.w3.org/XML/1998/namespace","xml:lang",_);break;case"xmlSpace":va(f,"http://www.w3.org/XML/1998/namespace","xml:space",_);break;case"is":ur(f,"is",_);break;case"innerText":case"textContent":break;default:(!(2<j.length)||j[0]!=="o"&&j[0]!=="O"||j[1]!=="n"&&j[1]!=="N")&&(j=jl.get(j)||j,ur(f,j,_))}}function zC(f,x,j,_,R,q){switch(j){case"style":yl(f,_,q);break;case"dangerouslySetInnerHTML":if(_!=null){if(typeof _!="object"||!("__html"in _))throw Error(n(61));if(j=_.__html,j!=null){if(R.children!=null)throw Error(n(60));f.innerHTML=j}}break;case"children":typeof _=="string"?_s(f,_):(typeof _=="number"||typeof _=="bigint")&&_s(f,""+_);break;case"onScroll":_!=null&&Oa("scroll",f);break;case"onScrollEnd":_!=null&&Oa("scrollend",f);break;case"onClick":_!=null&&(f.onclick=oj);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ct.hasOwnProperty(j))e:{if(j[0]==="o"&&j[1]==="n"&&(R=j.endsWith("Capture"),x=j.slice(2,R?j.length-7:void 0),q=f[pr]||null,q=q!=null?q[j]:null,typeof q=="function"&&f.removeEventListener(x,q,R),typeof _=="function")){typeof q!="function"&&q!==null&&(j in f?f[j]=null:f.hasAttribute(j)&&f.removeAttribute(j)),f.addEventListener(x,_,R);break e}j in f?f[j]=_:_===!0?f.setAttribute(j,""):ur(f,j,_)}}}function $i(f,x,j){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oa("error",f),Oa("load",f);var _=!1,R=!1,q;for(q in j)if(j.hasOwnProperty(q)){var me=j[q];if(me!=null)switch(q){case"src":_=!0;break;case"srcSet":R=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,x));default:Nn(f,x,q,me,j,null)}}R&&Nn(f,x,"srcSet",j.srcSet,j,null),_&&Nn(f,x,"src",j.src,j,null);return;case"input":Oa("invalid",f);var Ee=q=me=R=null,Ze=null,Dt=null;for(_ in j)if(j.hasOwnProperty(_)){var Wt=j[_];if(Wt!=null)switch(_){case"name":R=Wt;break;case"type":me=Wt;break;case"checked":Ze=Wt;break;case"defaultChecked":Dt=Wt;break;case"value":q=Wt;break;case"defaultValue":Ee=Wt;break;case"children":case"dangerouslySetInnerHTML":if(Wt!=null)throw Error(n(137,x));break;default:Nn(f,x,_,Wt,j,null)}}Wo(f,q,Ee,Ze,Dt,me,R,!1),on(f);return;case"select":Oa("invalid",f),_=me=q=null;for(R in j)if(j.hasOwnProperty(R)&&(Ee=j[R],Ee!=null))switch(R){case"value":q=Ee;break;case"defaultValue":me=Ee;break;case"multiple":_=Ee;default:Nn(f,x,R,Ee,j,null)}x=q,j=me,f.multiple=!!_,x!=null?Oi(f,!!_,x,!1):j!=null&&Oi(f,!!_,j,!0);return;case"textarea":Oa("invalid",f),q=R=_=null;for(me in j)if(j.hasOwnProperty(me)&&(Ee=j[me],Ee!=null))switch(me){case"value":_=Ee;break;case"defaultValue":R=Ee;break;case"children":q=Ee;break;case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(n(91));break;default:Nn(f,x,me,Ee,j,null)}Mi(f,_,R,q),on(f);return;case"option":for(Ze in j)if(j.hasOwnProperty(Ze)&&(_=j[Ze],_!=null))switch(Ze){case"selected":f.selected=_&&typeof _!="function"&&typeof _!="symbol";break;default:Nn(f,x,Ze,_,j,null)}return;case"dialog":Oa("beforetoggle",f),Oa("toggle",f),Oa("cancel",f),Oa("close",f);break;case"iframe":case"object":Oa("load",f);break;case"video":case"audio":for(_=0;_<zg.length;_++)Oa(zg[_],f);break;case"image":Oa("error",f),Oa("load",f);break;case"details":Oa("toggle",f);break;case"embed":case"source":case"link":Oa("error",f),Oa("load",f);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Dt in j)if(j.hasOwnProperty(Dt)&&(_=j[Dt],_!=null))switch(Dt){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,x));default:Nn(f,x,Dt,_,j,null)}return;default:if(td(x)){for(Wt in j)j.hasOwnProperty(Wt)&&(_=j[Wt],_!==void 0&&zC(f,x,Wt,_,j,void 0));return}}for(Ee in j)j.hasOwnProperty(Ee)&&(_=j[Ee],_!=null&&Nn(f,x,Ee,_,j,null))}function kX(f,x,j,_){switch(x){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var R=null,q=null,me=null,Ee=null,Ze=null,Dt=null,Wt=null;for(Pt in j){var tr=j[Pt];if(j.hasOwnProperty(Pt)&&tr!=null)switch(Pt){case"checked":break;case"value":break;case"defaultValue":Ze=tr;default:_.hasOwnProperty(Pt)||Nn(f,x,Pt,null,_,tr)}}for(var It in _){var Pt=_[It];if(tr=j[It],_.hasOwnProperty(It)&&(Pt!=null||tr!=null))switch(It){case"type":q=Pt;break;case"name":R=Pt;break;case"checked":Dt=Pt;break;case"defaultChecked":Wt=Pt;break;case"value":me=Pt;break;case"defaultValue":Ee=Pt;break;case"children":case"dangerouslySetInnerHTML":if(Pt!=null)throw Error(n(137,x));break;default:Pt!==tr&&Nn(f,x,It,Pt,_,tr)}}ni(f,me,Ee,Ze,Dt,Wt,q,R);return;case"select":Pt=me=Ee=It=null;for(q in j)if(Ze=j[q],j.hasOwnProperty(q)&&Ze!=null)switch(q){case"value":break;case"multiple":Pt=Ze;default:_.hasOwnProperty(q)||Nn(f,x,q,null,_,Ze)}for(R in _)if(q=_[R],Ze=j[R],_.hasOwnProperty(R)&&(q!=null||Ze!=null))switch(R){case"value":It=q;break;case"defaultValue":Ee=q;break;case"multiple":me=q;default:q!==Ze&&Nn(f,x,R,q,_,Ze)}x=Ee,j=me,_=Pt,It!=null?Oi(f,!!j,It,!1):!!_!=!!j&&(x!=null?Oi(f,!!j,x,!0):Oi(f,!!j,j?[]:"",!1));return;case"textarea":Pt=It=null;for(Ee in j)if(R=j[Ee],j.hasOwnProperty(Ee)&&R!=null&&!_.hasOwnProperty(Ee))switch(Ee){case"value":break;case"children":break;default:Nn(f,x,Ee,null,_,R)}for(me in _)if(R=_[me],q=j[me],_.hasOwnProperty(me)&&(R!=null||q!=null))switch(me){case"value":It=R;break;case"defaultValue":Pt=R;break;case"children":break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(n(91));break;default:R!==q&&Nn(f,x,me,R,_,q)}Va(f,It,Pt);return;case"option":for(var ia in j)if(It=j[ia],j.hasOwnProperty(ia)&&It!=null&&!_.hasOwnProperty(ia))switch(ia){case"selected":f.selected=!1;break;default:Nn(f,x,ia,null,_,It)}for(Ze in _)if(It=_[Ze],Pt=j[Ze],_.hasOwnProperty(Ze)&&It!==Pt&&(It!=null||Pt!=null))switch(Ze){case"selected":f.selected=It&&typeof It!="function"&&typeof It!="symbol";break;default:Nn(f,x,Ze,It,_,Pt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qr in j)It=j[Qr],j.hasOwnProperty(Qr)&&It!=null&&!_.hasOwnProperty(Qr)&&Nn(f,x,Qr,null,_,It);for(Dt in _)if(It=_[Dt],Pt=j[Dt],_.hasOwnProperty(Dt)&&It!==Pt&&(It!=null||Pt!=null))switch(Dt){case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(n(137,x));break;default:Nn(f,x,Dt,It,_,Pt)}return;default:if(td(x)){for(var wn in j)It=j[wn],j.hasOwnProperty(wn)&&It!==void 0&&!_.hasOwnProperty(wn)&&zC(f,x,wn,void 0,_,It);for(Wt in _)It=_[Wt],Pt=j[Wt],!_.hasOwnProperty(Wt)||It===Pt||It===void 0&&Pt===void 0||zC(f,x,Wt,It,_,Pt);return}}for(var gt in j)It=j[gt],j.hasOwnProperty(gt)&&It!=null&&!_.hasOwnProperty(gt)&&Nn(f,x,gt,null,_,It);for(tr in _)It=_[tr],Pt=j[tr],!_.hasOwnProperty(tr)||It===Pt||It==null&&Pt==null||Nn(f,x,tr,It,_,Pt)}var HC=null,WC=null;function lj(f){return f.nodeType===9?f:f.ownerDocument}function ZP(f){switch(f){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eO(f,x){if(f===0)switch(x){case"svg":return 1;case"math":return 2;default:return 0}return f===1&&x==="foreignObject"?0:f}function GC(f,x){return f==="textarea"||f==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.children=="bigint"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var YC=null;function _X(){var f=window.event;return f&&f.type==="popstate"?f===YC?!1:(YC=f,!0):(YC=null,!1)}var tO=typeof setTimeout=="function"?setTimeout:void 0,EX=typeof clearTimeout=="function"?clearTimeout:void 0,rO=typeof Promise=="function"?Promise:void 0,DX=typeof queueMicrotask=="function"?queueMicrotask:typeof rO<"u"?function(f){return rO.resolve(null).then(f).catch(AX)}:tO;function AX(f){setTimeout(function(){throw f})}function om(f){return f==="head"}function aO(f,x){var j=x,_=0,R=0;do{var q=j.nextSibling;if(f.removeChild(j),q&&q.nodeType===8)if(j=q.data,j==="/$"){if(0<_&&8>_){j=_;var me=f.ownerDocument;if(j&1&&Wg(me.documentElement),j&2&&Wg(me.body),j&4)for(j=me.head,Wg(j),me=j.firstChild;me;){var Ee=me.nextSibling,Ze=me.nodeName;me[Te]||Ze==="SCRIPT"||Ze==="STYLE"||Ze==="LINK"&&me.rel.toLowerCase()==="stylesheet"||j.removeChild(me),me=Ee}}if(R===0){f.removeChild(q),eb(x);return}R--}else j==="$"||j==="$?"||j==="$!"?R++:_=j.charCodeAt(0)-48;else _=0;j=q}while(j);eb(x)}function KC(f){var x=f.firstChild;for(x&&x.nodeType===10&&(x=x.nextSibling);x;){var j=x;switch(x=x.nextSibling,j.nodeName){case"HTML":case"HEAD":case"BODY":KC(j),_e(j);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(j.rel.toLowerCase()==="stylesheet")continue}f.removeChild(j)}}function TX(f,x,j,_){for(;f.nodeType===1;){var R=j;if(f.nodeName.toLowerCase()!==x.toLowerCase()){if(!_&&(f.nodeName!=="INPUT"||f.type!=="hidden"))break}else if(_){if(!f[Te])switch(x){case"meta":if(!f.hasAttribute("itemprop"))break;return f;case"link":if(q=f.getAttribute("rel"),q==="stylesheet"&&f.hasAttribute("data-precedence"))break;if(q!==R.rel||f.getAttribute("href")!==(R.href==null||R.href===""?null:R.href)||f.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin)||f.getAttribute("title")!==(R.title==null?null:R.title))break;return f;case"style":if(f.hasAttribute("data-precedence"))break;return f;case"script":if(q=f.getAttribute("src"),(q!==(R.src==null?null:R.src)||f.getAttribute("type")!==(R.type==null?null:R.type)||f.getAttribute("crossorigin")!==(R.crossOrigin==null?null:R.crossOrigin))&&q&&f.hasAttribute("async")&&!f.hasAttribute("itemprop"))break;return f;default:return f}}else if(x==="input"&&f.type==="hidden"){var q=R.name==null?null:""+R.name;if(R.type==="hidden"&&f.getAttribute("name")===q)return f}else return f;if(f=yd(f.nextSibling),f===null)break}return null}function IX(f,x,j){if(x==="")return null;for(;f.nodeType!==3;)if((f.nodeType!==1||f.nodeName!=="INPUT"||f.type!=="hidden")&&!j||(f=yd(f.nextSibling),f===null))return null;return f}function XC(f){return f.data==="$!"||f.data==="$?"&&f.ownerDocument.readyState==="complete"}function PX(f,x){var j=f.ownerDocument;if(f.data!=="$?"||j.readyState==="complete")x();else{var _=function(){x(),j.removeEventListener("DOMContentLoaded",_)};j.addEventListener("DOMContentLoaded",_),f._reactRetry=_}}function yd(f){for(;f!=null;f=f.nextSibling){var x=f.nodeType;if(x===1||x===3)break;if(x===8){if(x=f.data,x==="$"||x==="$!"||x==="$?"||x==="F!"||x==="F")break;if(x==="/$")return null}}return f}var QC=null;function nO(f){f=f.previousSibling;for(var x=0;f;){if(f.nodeType===8){var j=f.data;if(j==="$"||j==="$!"||j==="$?"){if(x===0)return f;x--}else j==="/$"&&x++}f=f.previousSibling}return null}function sO(f,x,j){switch(x=lj(j),f){case"html":if(f=x.documentElement,!f)throw Error(n(452));return f;case"head":if(f=x.head,!f)throw Error(n(453));return f;case"body":if(f=x.body,!f)throw Error(n(454));return f;default:throw Error(n(451))}}function Wg(f){for(var x=f.attributes;x.length;)f.removeAttributeNode(x[0]);_e(f)}var Sc=new Map,iO=new Set;function cj(f){return typeof f.getRootNode=="function"?f.getRootNode():f.nodeType===9?f:f.ownerDocument}var Ih=Q.d;Q.d={f:OX,r:MX,D:RX,C:FX,L:LX,m:BX,X:$X,S:UX,M:VX};function OX(){var f=Ih.f(),x=ej();return f||x}function MX(f){var x=Ve(f);x!==null&&x.tag===5&&x.type==="form"?kp(x):Ih.r(f)}var Sv=typeof document>"u"?null:document;function oO(f,x,j){var _=Sv;if(_&&typeof x=="string"&&x){var R=xa(x);R='link[rel="'+f+'"][href="'+R+'"]',typeof j=="string"&&(R+='[crossorigin="'+j+'"]'),iO.has(R)||(iO.add(R),f={rel:f,crossOrigin:j,href:x},_.querySelector(R)===null&&(x=_.createElement("link"),$i(x,"link",f),nt(x),_.head.appendChild(x)))}}function RX(f){Ih.D(f),oO("dns-prefetch",f,null)}function FX(f,x){Ih.C(f,x),oO("preconnect",f,x)}function LX(f,x,j){Ih.L(f,x,j);var _=Sv;if(_&&f&&x){var R='link[rel="preload"][as="'+xa(x)+'"]';x==="image"&&j&&j.imageSrcSet?(R+='[imagesrcset="'+xa(j.imageSrcSet)+'"]',typeof j.imageSizes=="string"&&(R+='[imagesizes="'+xa(j.imageSizes)+'"]')):R+='[href="'+xa(f)+'"]';var q=R;switch(x){case"style":q=Cv(f);break;case"script":q=kv(f)}Sc.has(q)||(f=u({rel:"preload",href:x==="image"&&j&&j.imageSrcSet?void 0:f,as:x},j),Sc.set(q,f),_.querySelector(R)!==null||x==="style"&&_.querySelector(Gg(q))||x==="script"&&_.querySelector(Yg(q))||(x=_.createElement("link"),$i(x,"link",f),nt(x),_.head.appendChild(x)))}}function BX(f,x){Ih.m(f,x);var j=Sv;if(j&&f){var _=x&&typeof x.as=="string"?x.as:"script",R='link[rel="modulepreload"][as="'+xa(_)+'"][href="'+xa(f)+'"]',q=R;switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":q=kv(f)}if(!Sc.has(q)&&(f=u({rel:"modulepreload",href:f},x),Sc.set(q,f),j.querySelector(R)===null)){switch(_){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(j.querySelector(Yg(q)))return}_=j.createElement("link"),$i(_,"link",f),nt(_),j.head.appendChild(_)}}}function UX(f,x,j){Ih.S(f,x,j);var _=Sv;if(_&&f){var R=wt(_).hoistableStyles,q=Cv(f);x=x||"default";var me=R.get(q);if(!me){var Ee={loading:0,preload:null};if(me=_.querySelector(Gg(q)))Ee.loading=5;else{f=u({rel:"stylesheet",href:f,"data-precedence":x},j),(j=Sc.get(q))&&JC(f,j);var Ze=me=_.createElement("link");nt(Ze),$i(Ze,"link",f),Ze._p=new Promise(function(Dt,Wt){Ze.onload=Dt,Ze.onerror=Wt}),Ze.addEventListener("load",function(){Ee.loading|=1}),Ze.addEventListener("error",function(){Ee.loading|=2}),Ee.loading|=4,dj(me,x,_)}me={type:"stylesheet",instance:me,count:1,state:Ee},R.set(q,me)}}}function $X(f,x){Ih.X(f,x);var j=Sv;if(j&&f){var _=wt(j).hoistableScripts,R=kv(f),q=_.get(R);q||(q=j.querySelector(Yg(R)),q||(f=u({src:f,async:!0},x),(x=Sc.get(R))&&ZC(f,x),q=j.createElement("script"),nt(q),$i(q,"link",f),j.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},_.set(R,q))}}function VX(f,x){Ih.M(f,x);var j=Sv;if(j&&f){var _=wt(j).hoistableScripts,R=kv(f),q=_.get(R);q||(q=j.querySelector(Yg(R)),q||(f=u({src:f,async:!0,type:"module"},x),(x=Sc.get(R))&&ZC(f,x),q=j.createElement("script"),nt(q),$i(q,"link",f),j.head.appendChild(q)),q={type:"script",instance:q,count:1,state:null},_.set(R,q))}}function lO(f,x,j,_){var R=(R=re.current)?cj(R):null;if(!R)throw Error(n(446));switch(f){case"meta":case"title":return null;case"style":return typeof j.precedence=="string"&&typeof j.href=="string"?(x=Cv(j.href),j=wt(R).hoistableStyles,_=j.get(x),_||(_={type:"style",instance:null,count:0,state:null},j.set(x,_)),_):{type:"void",instance:null,count:0,state:null};case"link":if(j.rel==="stylesheet"&&typeof j.href=="string"&&typeof j.precedence=="string"){f=Cv(j.href);var q=wt(R).hoistableStyles,me=q.get(f);if(me||(R=R.ownerDocument||R,me={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},q.set(f,me),(q=R.querySelector(Gg(f)))&&!q._p&&(me.instance=q,me.state.loading=5),Sc.has(f)||(j={rel:"preload",as:"style",href:j.href,crossOrigin:j.crossOrigin,integrity:j.integrity,media:j.media,hrefLang:j.hrefLang,referrerPolicy:j.referrerPolicy},Sc.set(f,j),q||qX(R,f,j,me.state))),x&&_===null)throw Error(n(528,""));return me}if(x&&_!==null)throw Error(n(529,""));return null;case"script":return x=j.async,j=j.src,typeof j=="string"&&x&&typeof x!="function"&&typeof x!="symbol"?(x=kv(j),j=wt(R).hoistableScripts,_=j.get(x),_||(_={type:"script",instance:null,count:0,state:null},j.set(x,_)),_):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,f))}}function Cv(f){return'href="'+xa(f)+'"'}function Gg(f){return'link[rel="stylesheet"]['+f+"]"}function cO(f){return u({},f,{"data-precedence":f.precedence,precedence:null})}function qX(f,x,j,_){f.querySelector('link[rel="preload"][as="style"]['+x+"]")?_.loading=1:(x=f.createElement("link"),_.preload=x,x.addEventListener("load",function(){return _.loading|=1}),x.addEventListener("error",function(){return _.loading|=2}),$i(x,"link",j),nt(x),f.head.appendChild(x))}function kv(f){return'[src="'+xa(f)+'"]'}function Yg(f){return"script[async]"+f}function dO(f,x,j){if(x.count++,x.instance===null)switch(x.type){case"style":var _=f.querySelector('style[data-href~="'+xa(j.href)+'"]');if(_)return x.instance=_,nt(_),_;var R=u({},j,{"data-href":j.href,"data-precedence":j.precedence,href:null,precedence:null});return _=(f.ownerDocument||f).createElement("style"),nt(_),$i(_,"style",R),dj(_,j.precedence,f),x.instance=_;case"stylesheet":R=Cv(j.href);var q=f.querySelector(Gg(R));if(q)return x.state.loading|=4,x.instance=q,nt(q),q;_=cO(j),(R=Sc.get(R))&&JC(_,R),q=(f.ownerDocument||f).createElement("link"),nt(q);var me=q;return me._p=new Promise(function(Ee,Ze){me.onload=Ee,me.onerror=Ze}),$i(q,"link",_),x.state.loading|=4,dj(q,j.precedence,f),x.instance=q;case"script":return q=kv(j.src),(R=f.querySelector(Yg(q)))?(x.instance=R,nt(R),R):(_=j,(R=Sc.get(q))&&(_=u({},j),ZC(_,R)),f=f.ownerDocument||f,R=f.createElement("script"),nt(R),$i(R,"link",_),f.head.appendChild(R),x.instance=R);case"void":return null;default:throw Error(n(443,x.type))}else x.type==="stylesheet"&&(x.state.loading&4)===0&&(_=x.instance,x.state.loading|=4,dj(_,j.precedence,f));return x.instance}function dj(f,x,j){for(var _=j.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),R=_.length?_[_.length-1]:null,q=R,me=0;me<_.length;me++){var Ee=_[me];if(Ee.dataset.precedence===x)q=Ee;else if(q!==R)break}q?q.parentNode.insertBefore(f,q.nextSibling):(x=j.nodeType===9?j.head:j,x.insertBefore(f,x.firstChild))}function JC(f,x){f.crossOrigin==null&&(f.crossOrigin=x.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=x.referrerPolicy),f.title==null&&(f.title=x.title)}function ZC(f,x){f.crossOrigin==null&&(f.crossOrigin=x.crossOrigin),f.referrerPolicy==null&&(f.referrerPolicy=x.referrerPolicy),f.integrity==null&&(f.integrity=x.integrity)}var uj=null;function uO(f,x,j){if(uj===null){var _=new Map,R=uj=new Map;R.set(j,_)}else R=uj,_=R.get(j),_||(_=new Map,R.set(j,_));if(_.has(f))return _;for(_.set(f,null),j=j.getElementsByTagName(f),R=0;R<j.length;R++){var q=j[R];if(!(q[Te]||q[rr]||f==="link"&&q.getAttribute("rel")==="stylesheet")&&q.namespaceURI!=="http://www.w3.org/2000/svg"){var me=q.getAttribute(x)||"";me=f+me;var Ee=_.get(me);Ee?Ee.push(q):_.set(me,[q])}}return _}function hO(f,x,j){f=f.ownerDocument||f,f.head.insertBefore(j,x==="title"?f.querySelector("head > title"):null)}function zX(f,x,j){if(j===1||x.itemProp!=null)return!1;switch(f){case"meta":case"title":return!0;case"style":if(typeof x.precedence!="string"||typeof x.href!="string"||x.href==="")break;return!0;case"link":if(typeof x.rel!="string"||typeof x.href!="string"||x.href===""||x.onLoad||x.onError)break;switch(x.rel){case"stylesheet":return f=x.disabled,typeof x.precedence=="string"&&f==null;default:return!0}case"script":if(x.async&&typeof x.async!="function"&&typeof x.async!="symbol"&&!x.onLoad&&!x.onError&&x.src&&typeof x.src=="string")return!0}return!1}function fO(f){return!(f.type==="stylesheet"&&(f.state.loading&3)===0)}var Kg=null;function HX(){}function WX(f,x,j){if(Kg===null)throw Error(n(475));var _=Kg;if(x.type==="stylesheet"&&(typeof j.media!="string"||matchMedia(j.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var R=Cv(j.href),q=f.querySelector(Gg(R));if(q){f=q._p,f!==null&&typeof f=="object"&&typeof f.then=="function"&&(_.count++,_=hj.bind(_),f.then(_,_)),x.state.loading|=4,x.instance=q,nt(q);return}q=f.ownerDocument||f,j=cO(j),(R=Sc.get(R))&&JC(j,R),q=q.createElement("link"),nt(q);var me=q;me._p=new Promise(function(Ee,Ze){me.onload=Ee,me.onerror=Ze}),$i(q,"link",j),x.instance=q}_.stylesheets===null&&(_.stylesheets=new Map),_.stylesheets.set(x,f),(f=x.state.preload)&&(x.state.loading&3)===0&&(_.count++,x=hj.bind(_),f.addEventListener("load",x),f.addEventListener("error",x))}}function GX(){if(Kg===null)throw Error(n(475));var f=Kg;return f.stylesheets&&f.count===0&&ek(f,f.stylesheets),0<f.count?function(x){var j=setTimeout(function(){if(f.stylesheets&&ek(f,f.stylesheets),f.unsuspend){var _=f.unsuspend;f.unsuspend=null,_()}},6e4);return f.unsuspend=x,function(){f.unsuspend=null,clearTimeout(j)}}:null}function hj(){if(this.count--,this.count===0){if(this.stylesheets)ek(this,this.stylesheets);else if(this.unsuspend){var f=this.unsuspend;this.unsuspend=null,f()}}}var fj=null;function ek(f,x){f.stylesheets=null,f.unsuspend!==null&&(f.count++,fj=new Map,x.forEach(YX,f),fj=null,hj.call(f))}function YX(f,x){if(!(x.state.loading&4)){var j=fj.get(f);if(j)var _=j.get(null);else{j=new Map,fj.set(f,j);for(var R=f.querySelectorAll("link[data-precedence],style[data-precedence]"),q=0;q<R.length;q++){var me=R[q];(me.nodeName==="LINK"||me.getAttribute("media")!=="not all")&&(j.set(me.dataset.precedence,me),_=me)}_&&j.set(null,_)}R=x.instance,me=R.getAttribute("data-precedence"),q=j.get(me)||_,q===_&&j.set(null,R),j.set(me,R),this.count++,_=hj.bind(this),R.addEventListener("load",_),R.addEventListener("error",_),q?q.parentNode.insertBefore(R,q.nextSibling):(f=f.nodeType===9?f.head:f,f.insertBefore(R,f.firstChild)),x.state.loading|=4}}var Xg={$$typeof:w,Provider:null,Consumer:null,_currentValue:U,_currentValue2:U,_threadCount:0};function KX(f,x,j,_,R,q,me,Ee){this.tag=1,this.containerInfo=f,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ke(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ke(0),this.hiddenUpdates=Ke(null),this.identifierPrefix=_,this.onUncaughtError=R,this.onCaughtError=q,this.onRecoverableError=me,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Ee,this.incompleteTransitions=new Map}function mO(f,x,j,_,R,q,me,Ee,Ze,Dt,Wt,tr){return f=new KX(f,x,j,me,Ee,Ze,Dt,tr),x=1,q===!0&&(x|=24),q=gi(3,null,null,x),f.current=q,q.stateNode=f,x=bg(),x.refCount++,f.pooledCache=x,x.refCount++,q.memoizedState={element:_,isDehydrated:j,cache:x},st(q),f}function pO(f){return f?(f=Gs,f):Gs}function xO(f,x,j,_,R,q){R=pO(R),_.context===null?_.context=R:_.pendingContext=R,_=Ht(x),_.payload={element:j},q=q===void 0?null:q,q!==null&&(_.callback=q),j=er(f,_,x),j!==null&&(Rl(j,f,x),Yt(j,f,x))}function vO(f,x){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var j=f.retryLane;f.retryLane=j!==0&&j<x?j:x}}function tk(f,x){vO(f,x),(f=f.alternate)&&vO(f,x)}function gO(f){if(f.tag===13){var x=od(f,67108864);x!==null&&Rl(x,f,67108864),tk(f,67108864)}}var mj=!0;function XX(f,x,j,_){var R=B.T;B.T=null;var q=Q.p;try{Q.p=2,rk(f,x,j,_)}finally{Q.p=q,B.T=R}}function QX(f,x,j,_){var R=B.T;B.T=null;var q=Q.p;try{Q.p=8,rk(f,x,j,_)}finally{Q.p=q,B.T=R}}function rk(f,x,j,_){if(mj){var R=ak(_);if(R===null)qC(f,x,_,pj,j),yO(f,_);else if(ZX(R,f,x,j,_))_.stopPropagation();else if(yO(f,_),x&4&&-1<JX.indexOf(f)){for(;R!==null;){var q=Ve(R);if(q!==null)switch(q.tag){case 3:if(q=q.stateNode,q.current.memoizedState.isDehydrated){var me=Je(q.pendingLanes);if(me!==0){var Ee=q;for(Ee.pendingLanes|=2,Ee.entangledLanes|=2;me;){var Ze=1<<31-he(me);Ee.entanglements[1]|=Ze,me&=~Ze}pu(q),(fn&6)===0&&(J1=ye()+500,qg(0))}}break;case 13:Ee=od(q,2),Ee!==null&&Rl(Ee,q,2),ej(),tk(q,2)}if(q=ak(_),q===null&&qC(f,x,_,pj,j),q===R)break;R=q}R!==null&&_.stopPropagation()}else qC(f,x,_,null,j)}}function ak(f){return f=ms(f),nk(f)}var pj=null;function nk(f){if(pj=null,f=Fe(f),f!==null){var x=i(f);if(x===null)f=null;else{var j=x.tag;if(j===13){if(f=o(x),f!==null)return f;f=null}else if(j===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;f=null}else x!==f&&(f=null)}}return pj=f,null}function bO(f){switch(f){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ne()){case Ue:return 2;case Qe:return 8;case ot:case xt:return 32;case Le:return 268435456;default:return 32}default:return 32}}var sk=!1,lm=null,cm=null,dm=null,Qg=new Map,Jg=new Map,um=[],JX="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yO(f,x){switch(f){case"focusin":case"focusout":lm=null;break;case"dragenter":case"dragleave":cm=null;break;case"mouseover":case"mouseout":dm=null;break;case"pointerover":case"pointerout":Qg.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jg.delete(x.pointerId)}}function Zg(f,x,j,_,R,q){return f===null||f.nativeEvent!==q?(f={blockedOn:x,domEventName:j,eventSystemFlags:_,nativeEvent:q,targetContainers:[R]},x!==null&&(x=Ve(x),x!==null&&gO(x)),f):(f.eventSystemFlags|=_,x=f.targetContainers,R!==null&&x.indexOf(R)===-1&&x.push(R),f)}function ZX(f,x,j,_,R){switch(x){case"focusin":return lm=Zg(lm,f,x,j,_,R),!0;case"dragenter":return cm=Zg(cm,f,x,j,_,R),!0;case"mouseover":return dm=Zg(dm,f,x,j,_,R),!0;case"pointerover":var q=R.pointerId;return Qg.set(q,Zg(Qg.get(q)||null,f,x,j,_,R)),!0;case"gotpointercapture":return q=R.pointerId,Jg.set(q,Zg(Jg.get(q)||null,f,x,j,_,R)),!0}return!1}function jO(f){var x=Fe(f.target);if(x!==null){var j=i(x);if(j!==null){if(x=j.tag,x===13){if(x=o(j),x!==null){f.blockedOn=x,Xt(f.priority,function(){if(j.tag===13){var _=Ml();_=ke(_);var R=od(j,_);R!==null&&Rl(R,j,_),tk(j,_)}});return}}else if(x===3&&j.stateNode.current.memoizedState.isDehydrated){f.blockedOn=j.tag===3?j.stateNode.containerInfo:null;return}}}f.blockedOn=null}function xj(f){if(f.blockedOn!==null)return!1;for(var x=f.targetContainers;0<x.length;){var j=ak(f.nativeEvent);if(j===null){j=f.nativeEvent;var _=new j.constructor(j.type,j);cc=_,j.target.dispatchEvent(_),cc=null}else return x=Ve(j),x!==null&&gO(x),f.blockedOn=j,!1;x.shift()}return!0}function NO(f,x,j){xj(f)&&j.delete(x)}function eQ(){sk=!1,lm!==null&&xj(lm)&&(lm=null),cm!==null&&xj(cm)&&(cm=null),dm!==null&&xj(dm)&&(dm=null),Qg.forEach(NO),Jg.forEach(NO)}function vj(f,x){f.blockedOn===x&&(f.blockedOn=null,sk||(sk=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,eQ)))}var gj=null;function wO(f){gj!==f&&(gj=f,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){gj===f&&(gj=null);for(var x=0;x<f.length;x+=3){var j=f[x],_=f[x+1],R=f[x+2];if(typeof _!="function"){if(nk(_||j)===null)continue;break}var q=Ve(j);q!==null&&(f.splice(x,3),x-=3,jc(q,{pending:!0,data:R,method:j.method,action:_},_,R))}}))}function eb(f){function x(Ze){return vj(Ze,f)}lm!==null&&vj(lm,f),cm!==null&&vj(cm,f),dm!==null&&vj(dm,f),Qg.forEach(x),Jg.forEach(x);for(var j=0;j<um.length;j++){var _=um[j];_.blockedOn===f&&(_.blockedOn=null)}for(;0<um.length&&(j=um[0],j.blockedOn===null);)jO(j),j.blockedOn===null&&um.shift();if(j=(f.ownerDocument||f).$$reactFormReplay,j!=null)for(_=0;_<j.length;_+=3){var R=j[_],q=j[_+1],me=R[pr]||null;if(typeof q=="function")me||wO(j);else if(me){var Ee=null;if(q&&q.hasAttribute("formAction")){if(R=q,me=q[pr]||null)Ee=me.formAction;else if(nk(R)!==null)continue}else Ee=me.action;typeof Ee=="function"?j[_+1]=Ee:(j.splice(_,3),_-=3),wO(j)}}}function ik(f){this._internalRoot=f}bj.prototype.render=ik.prototype.render=function(f){var x=this._internalRoot;if(x===null)throw Error(n(409));var j=x.current,_=Ml();xO(j,_,f,x,null,null)},bj.prototype.unmount=ik.prototype.unmount=function(){var f=this._internalRoot;if(f!==null){this._internalRoot=null;var x=f.containerInfo;xO(f.current,2,null,f,null,null),ej(),x[jr]=null}};function bj(f){this._internalRoot=f}bj.prototype.unstable_scheduleHydration=function(f){if(f){var x=bt();f={blockedOn:null,target:f,priority:x};for(var j=0;j<um.length&&x!==0&&x<um[j].priority;j++);um.splice(j,0,f),j===0&&jO(f)}};var SO=t.version;if(SO!=="19.1.0")throw Error(n(527,SO,"19.1.0"));Q.findDOMNode=function(f){var x=f._reactInternals;if(x===void 0)throw typeof f.render=="function"?Error(n(188)):(f=Object.keys(f).join(","),Error(n(268,f)));return f=c(x),f=f!==null?d(f):null,f=f===null?null:f.stateNode,f};var tQ={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yj=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yj.isDisabled&&yj.supportsFiber)try{At=yj.inject(tQ),Vt=yj}catch{}}return rb.createRoot=function(f,x){if(!s(f))throw Error(n(299));var j=!1,_="",R=UI,q=$I,me=VI,Ee=null;return x!=null&&(x.unstable_strictMode===!0&&(j=!0),x.identifierPrefix!==void 0&&(_=x.identifierPrefix),x.onUncaughtError!==void 0&&(R=x.onUncaughtError),x.onCaughtError!==void 0&&(q=x.onCaughtError),x.onRecoverableError!==void 0&&(me=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Ee=x.unstable_transitionCallbacks)),x=mO(f,1,!1,null,null,j,_,R,q,me,Ee,null),f[jr]=x.current,VC(f),new ik(x)},rb.hydrateRoot=function(f,x,j){if(!s(f))throw Error(n(299));var _=!1,R="",q=UI,me=$I,Ee=VI,Ze=null,Dt=null;return j!=null&&(j.unstable_strictMode===!0&&(_=!0),j.identifierPrefix!==void 0&&(R=j.identifierPrefix),j.onUncaughtError!==void 0&&(q=j.onUncaughtError),j.onCaughtError!==void 0&&(me=j.onCaughtError),j.onRecoverableError!==void 0&&(Ee=j.onRecoverableError),j.unstable_transitionCallbacks!==void 0&&(Ze=j.unstable_transitionCallbacks),j.formState!==void 0&&(Dt=j.formState)),x=mO(f,1,!0,x,j??null,_,R,q,me,Ee,Ze,Dt),x.context=pO(null),j=x.current,_=Ml(),_=ke(_),R=Ht(_),R.callback=null,er(j,R,_),j=_,x.current.lanes=j,Ge(x,j),pu(x),f[jr]=x.current,VC(f),new bj(x)},rb.version="19.1.0",rb}var OO;function uQ(){if(OO)return ck.exports;OO=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),ck.exports=dQ(),ck.exports}var hQ=uQ(),ab={},MO;function fQ(){if(MO)return ab;MO=1,Object.defineProperty(ab,"__esModule",{value:!0}),ab.parse=o,ab.serialize=d;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,r=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,i=(()=>{const m=function(){};return m.prototype=Object.create(null),m})();function o(m,p){const v=new i,g=m.length;if(g<2)return v;const b=p?.decode||u;let y=0;do{const C=m.indexOf("=",y);if(C===-1)break;const w=m.indexOf(";",y),k=w===-1?g:w;if(C>k){y=m.lastIndexOf(";",C-1)+1;continue}const S=l(m,y,C),D=c(m,C,S),E=m.slice(S,D);if(v[E]===void 0){let T=l(m,C+1,k),A=c(m,k,T);const L=b(m.slice(T,A));v[E]=L}y=k+1}while(y<g);return v}function l(m,p,v){do{const g=m.charCodeAt(p);if(g!==32&&g!==9)return p}while(++p<v);return v}function c(m,p,v){for(;p>v;){const g=m.charCodeAt(--p);if(g!==32&&g!==9)return p+1}return v}function d(m,p,v){const g=v?.encode||encodeURIComponent;if(!e.test(m))throw new TypeError(`argument name is invalid: ${m}`);const b=g(p);if(!t.test(b))throw new TypeError(`argument val is invalid: ${p}`);let y=m+"="+b;if(!v)return y;if(v.maxAge!==void 0){if(!Number.isInteger(v.maxAge))throw new TypeError(`option maxAge is invalid: ${v.maxAge}`);y+="; Max-Age="+v.maxAge}if(v.domain){if(!r.test(v.domain))throw new TypeError(`option domain is invalid: ${v.domain}`);y+="; Domain="+v.domain}if(v.path){if(!n.test(v.path))throw new TypeError(`option path is invalid: ${v.path}`);y+="; Path="+v.path}if(v.expires){if(!h(v.expires)||!Number.isFinite(v.expires.valueOf()))throw new TypeError(`option expires is invalid: ${v.expires}`);y+="; Expires="+v.expires.toUTCString()}if(v.httpOnly&&(y+="; HttpOnly"),v.secure&&(y+="; Secure"),v.partitioned&&(y+="; Partitioned"),v.priority)switch(typeof v.priority=="string"?v.priority.toLowerCase():void 0){case"low":y+="; Priority=Low";break;case"medium":y+="; Priority=Medium";break;case"high":y+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${v.priority}`)}if(v.sameSite)switch(typeof v.sameSite=="string"?v.sameSite.toLowerCase():v.sameSite){case!0:case"strict":y+="; SameSite=Strict";break;case"lax":y+="; SameSite=Lax";break;case"none":y+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${v.sameSite}`)}return y}function u(m){if(m.indexOf("%")===-1)return m;try{return decodeURIComponent(m)}catch{return m}}function h(m){return s.call(m)==="[object Date]"}return ab}fQ();var RO="popstate";function mQ(e={}){function t(n,s){let{pathname:i,search:o,hash:l}=n.location;return fD("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Xb(s)}return xQ(t,r,null,e)}function Jn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Md(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function pQ(){return Math.random().toString(36).substring(2,10)}function FO(e,t){return{usr:e.state,key:e.key,idx:t}}function fD(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?W0(t):t,state:r,key:t&&t.key||n||pQ()}}function Xb({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function W0(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function xQ(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let b=u(),y=b==null?null:b-d;d=b,c&&c({action:l,location:g.location,delta:y})}function m(b,y){l="PUSH";let C=fD(g.location,b,y);d=u()+1;let w=FO(C,d),k=g.createHref(C);try{o.pushState(w,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;s.location.assign(k)}i&&c&&c({action:l,location:g.location,delta:1})}function p(b,y){l="REPLACE";let C=fD(g.location,b,y);d=u();let w=FO(C,d),k=g.createHref(C);o.replaceState(w,"",k),i&&c&&c({action:l,location:g.location,delta:0})}function v(b){return vQ(b)}let g={get action(){return l},get location(){return e(s,o)},listen(b){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(RO,h),c=b,()=>{s.removeEventListener(RO,h),c=null}},createHref(b){return t(s,b)},createURL:v,encodeLocation(b){let y=v(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:m,replace:p,go(b){return o.go(b)}};return g}function vQ(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Jn(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Xb(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function W7(e,t,r="/"){return gQ(e,t,r,!1)}function gQ(e,t,r,n){let s=typeof t=="string"?W0(t):t,i=ef(s.pathname||"/",r);if(i==null)return null;let o=G7(e);bQ(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=AQ(i);l=EQ(o[c],d,n)}return l}function G7(e,t=[],r=[],n=""){let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Jn(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let d=Vh([n,c.relativePath]),u=r.concat(c);i.children&&i.children.length>0&&(Jn(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),G7(i.children,t,u,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:kQ(d,i.index),routesMeta:u})};return e.forEach((i,o)=>{if(i.path===""||!i.path?.includes("?"))s(i,o);else for(let l of Y7(i.path))s(i,o,l)}),t}function Y7(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=Y7(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function bQ(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:_Q(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var yQ=/^:[\w-]+$/,jQ=3,NQ=2,wQ=1,SQ=10,CQ=-2,LO=e=>e==="*";function kQ(e,t){let r=e.split("/"),n=r.length;return r.some(LO)&&(n+=CQ),t&&(n+=NQ),r.filter(s=>!LO(s)).reduce((s,i)=>s+(yQ.test(i)?jQ:i===""?wQ:SQ),n)}function _Q(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function EQ(e,t,r=!1){let{routesMeta:n}=e,s={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?t:t.slice(i.length)||"/",h=qN({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),m=c.route;if(!h&&d&&r&&!n[n.length-1].route.index&&(h=qN({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Vh([i,h.pathname]),pathnameBase:OQ(Vh([i,h.pathnameBase])),route:m}),h.pathnameBase!=="/"&&(i=Vh([i,h.pathnameBase]))}return o}function qN(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=DQ(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:h},m)=>{if(u==="*"){let v=l[m]||"";o=i.slice(0,i.length-v.length).replace(/(.)\/+$/,"$1")}const p=l[m];return h&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function DQ(e,t=!1,r=!0){Md(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function AQ(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Md(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ef(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function TQ(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?W0(e):e;return{pathname:r?r.startsWith("/")?r:IQ(r,t):t,search:MQ(n),hash:RQ(s)}}function IQ(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function fk(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function PQ(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function w3(e){let t=PQ(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function S3(e,t,r,n=!1){let s;typeof e=="string"?s=W0(e):(s={...e},Jn(!s.pathname||!s.pathname.includes("?"),fk("?","pathname","search",s)),Jn(!s.pathname||!s.pathname.includes("#"),fk("#","pathname","hash",s)),Jn(!s.search||!s.search.includes("#"),fk("#","search","hash",s)));let i=e===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=r;else{let h=t.length-1;if(!n&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),h-=1;s.pathname=m.join("/")}l=h>=0?t[h]:"/"}let c=TQ(s,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var Vh=e=>e.join("/").replace(/\/\/+/g,"/"),OQ=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),MQ=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,RQ=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function FQ(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var K7=["POST","PUT","PATCH","DELETE"];new Set(K7);var LQ=["GET",...K7];new Set(LQ);var G0=N.createContext(null);G0.displayName="DataRouter";var D2=N.createContext(null);D2.displayName="DataRouterState";var X7=N.createContext({isTransitioning:!1});X7.displayName="ViewTransition";var BQ=N.createContext(new Map);BQ.displayName="Fetchers";var UQ=N.createContext(null);UQ.displayName="Await";var Fd=N.createContext(null);Fd.displayName="Navigation";var Ry=N.createContext(null);Ry.displayName="Location";var Ku=N.createContext({outlet:null,matches:[],isDataRoute:!1});Ku.displayName="Route";var C3=N.createContext(null);C3.displayName="RouteError";function $Q(e,{relative:t}={}){Jn(Y0(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=N.useContext(Fd),{hash:s,pathname:i,search:o}=Fy(e,{relative:t}),l=i;return r!=="/"&&(l=i==="/"?r:Vh([r,i])),n.createHref({pathname:l,search:o,hash:s})}function Y0(){return N.useContext(Ry)!=null}function Ym(){return Jn(Y0(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ry).location}var Q7="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function J7(e){N.useContext(Fd).static||N.useLayoutEffect(e)}function Xu(){let{isDataRoute:e}=N.useContext(Ku);return e?eJ():VQ()}function VQ(){Jn(Y0(),"useNavigate() may be used only in the context of a <Router> component.");let e=N.useContext(G0),{basename:t,navigator:r}=N.useContext(Fd),{matches:n}=N.useContext(Ku),{pathname:s}=Ym(),i=JSON.stringify(w3(n)),o=N.useRef(!1);return J7(()=>{o.current=!0}),N.useCallback((c,d={})=>{if(Md(o.current,Q7),!o.current)return;if(typeof c=="number"){r.go(c);return}let u=S3(c,JSON.parse(i),s,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Vh([t,u.pathname])),(d.replace?r.replace:r.push)(u,d.state,d)},[t,r,i,s,e])}N.createContext(null);function Fy(e,{relative:t}={}){let{matches:r}=N.useContext(Ku),{pathname:n}=Ym(),s=JSON.stringify(w3(r));return N.useMemo(()=>S3(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function qQ(e,t){return Z7(e,t)}function Z7(e,t,r,n){Jn(Y0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=N.useContext(Fd),{matches:i}=N.useContext(Ku),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",u=o&&o.route;{let y=u&&u.path||"";e9(c,!u||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let h=Ym(),m;if(t){let y=typeof t=="string"?W0(t):t;Jn(d==="/"||y.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`),m=y}else m=h;let p=m.pathname||"/",v=p;if(d!=="/"){let y=d.replace(/^\//,"").split("/");v="/"+p.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=W7(e,{pathname:v});Md(u||g!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Md(g==null||g[g.length-1].route.element!==void 0||g[g.length-1].route.Component!==void 0||g[g.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=YQ(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:Vh([d,s.encodeLocation?s.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:Vh([d,s.encodeLocation?s.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&b?N.createElement(Ry.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},b):b}function zQ(){let e=ZQ(),t=FQ(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=N.createElement(N.Fragment,null,N.createElement("p",null,"💿 Hey developer 👋"),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:i},"ErrorBoundary")," or"," ",N.createElement("code",{style:i},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),r?N.createElement("pre",{style:s},r):null,o)}var HQ=N.createElement(zQ,null),WQ=class extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?N.createElement(Ku.Provider,{value:this.props.routeContext},N.createElement(C3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function GQ({routeContext:e,match:t,children:r}){let n=N.useContext(G0);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),N.createElement(Ku.Provider,{value:e},r)}function YQ(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,i=r?.errors;if(i!=null){let c=s.findIndex(d=>d.route.id&&i?.[d.route.id]!==void 0);Jn(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<s.length;c++){let d=s[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:u,errors:h}=r,m=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||m){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,d,u)=>{let h,m=!1,p=null,v=null;r&&(h=i&&d.route.id?i[d.route.id]:void 0,p=d.route.errorElement||HQ,o&&(l<0&&u===0?(e9("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,v=null):l===u&&(m=!0,v=d.route.hydrateFallbackElement||null)));let g=t.concat(s.slice(0,u+1)),b=()=>{let y;return h?y=p:m?y=v:d.route.Component?y=N.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=c,N.createElement(GQ,{match:d,routeContext:{outlet:c,matches:g,isDataRoute:r!=null},children:y})};return r&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?N.createElement(WQ,{location:r.location,revalidation:r.revalidation,component:p,error:h,children:b(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):b()},null)}function k3(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KQ(e){let t=N.useContext(G0);return Jn(t,k3(e)),t}function XQ(e){let t=N.useContext(D2);return Jn(t,k3(e)),t}function QQ(e){let t=N.useContext(Ku);return Jn(t,k3(e)),t}function _3(e){let t=QQ(e),r=t.matches[t.matches.length-1];return Jn(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function JQ(){return _3("useRouteId")}function ZQ(){let e=N.useContext(C3),t=XQ("useRouteError"),r=_3("useRouteError");return e!==void 0?e:t.errors?.[r]}function eJ(){let{router:e}=KQ("useNavigate"),t=_3("useNavigate"),r=N.useRef(!1);return J7(()=>{r.current=!0}),N.useCallback(async(s,i={})=>{Md(r.current,Q7),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...i}))},[e,t])}var BO={};function e9(e,t,r){!t&&!BO[e]&&(BO[e]=!0,Md(!1,r))}N.memo(tJ);function tJ({routes:e,future:t,state:r}){return Z7(e,void 0,r,t)}function rJ({to:e,replace:t,state:r,relative:n}){Jn(Y0(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=N.useContext(Fd);Md(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=N.useContext(Ku),{pathname:o}=Ym(),l=Xu(),c=S3(e,w3(i),o,n==="path"),d=JSON.stringify(c);return N.useEffect(()=>{l(JSON.parse(d),{replace:t,state:r,relative:n})},[l,d,n,t,r]),null}function cr(e){Jn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function aJ({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:i=!1}){Jn(!Y0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof r=="string"&&(r=W0(r));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:m="default"}=r,p=N.useMemo(()=>{let v=ef(c,o);return v==null?null:{location:{pathname:v,search:d,hash:u,state:h,key:m},navigationType:n}},[o,c,d,u,h,m,n]);return Md(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:N.createElement(Fd.Provider,{value:l},N.createElement(Ry.Provider,{children:t,value:p}))}function nJ({children:e,location:t}){return qQ(mD(e),t)}function mD(e,t=[]){let r=[];return N.Children.forEach(e,(n,s)=>{if(!N.isValidElement(n))return;let i=[...t,s];if(n.type===N.Fragment){r.push.apply(r,mD(n.props.children,i));return}Jn(n.type===cr,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Jn(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=mD(n.props.children,i)),r.push(o)}),r}var yN="get",jN="application/x-www-form-urlencoded";function A2(e){return e!=null&&typeof e.tagName=="string"}function sJ(e){return A2(e)&&e.tagName.toLowerCase()==="button"}function iJ(e){return A2(e)&&e.tagName.toLowerCase()==="form"}function oJ(e){return A2(e)&&e.tagName.toLowerCase()==="input"}function lJ(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function cJ(e,t){return e.button===0&&(!t||t==="_self")&&!lJ(e)}var jj=null;function dJ(){if(jj===null)try{new FormData(document.createElement("form"),0),jj=!1}catch{jj=!0}return jj}var uJ=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function mk(e){return e!=null&&!uJ.has(e)?(Md(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${jN}"`),null):e}function hJ(e,t){let r,n,s,i,o;if(iJ(e)){let l=e.getAttribute("action");n=l?ef(l,t):null,r=e.getAttribute("method")||yN,s=mk(e.getAttribute("enctype"))||jN,i=new FormData(e)}else if(sJ(e)||oJ(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?ef(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||yN,s=mk(e.getAttribute("formenctype"))||mk(l.getAttribute("enctype"))||jN,i=new FormData(l,e),!dJ()){let{name:d,type:u,value:h}=e;if(u==="image"){let m=d?`${d}.`:"";i.append(`${m}x`,"0"),i.append(`${m}y`,"0")}else d&&i.append(d,h)}}else{if(A2(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=yN,n=null,s=jN,o=e}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:i,body:o}}function E3(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function fJ(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mJ(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function pJ(e,t,r){let n=await Promise.all(e.map(async s=>{let i=t.routes[s.route.id];if(i){let o=await fJ(i,r);return o.links?o.links():[]}return[]}));return bJ(n.flat(1).filter(mJ).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function UO(e,t,r,n,s,i){let o=(c,d)=>r[d]?c.route.id!==r[d].route.id:!0,l=(c,d)=>r[d].pathname!==c.pathname||r[d].route.path?.endsWith("*")&&r[d].params["*"]!==c.params["*"];return i==="assets"?t.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?t.filter((c,d)=>{let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function xJ(e,t,{includeHydrateFallback:r}={}){return vJ(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function vJ(e){return[...new Set(e)]}function gJ(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function bJ(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let i=JSON.stringify(gJ(s));return r.has(i)||(r.add(i),n.push({key:i,link:s})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yJ=new Set([100,101,204,205]);function jJ(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&ef(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function t9(){let e=N.useContext(G0);return E3(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function NJ(){let e=N.useContext(D2);return E3(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var D3=N.createContext(void 0);D3.displayName="FrameworkContext";function r9(){let e=N.useContext(D3);return E3(e,"You must render this element inside a <HydratedRouter> element"),e}function wJ(e,t){let r=N.useContext(D3),[n,s]=N.useState(!1),[i,o]=N.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=t,m=N.useRef(null);N.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let g=y=>{y.forEach(C=>{o(C.isIntersecting)})},b=new IntersectionObserver(g,{threshold:.5});return m.current&&b.observe(m.current),()=>{b.disconnect()}}},[e]),N.useEffect(()=>{if(n){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[n]);let p=()=>{s(!0)},v=()=>{s(!1),o(!1)};return r?e!=="intent"?[i,m,{}]:[i,m,{onFocus:nb(l,p),onBlur:nb(c,v),onMouseEnter:nb(d,p),onMouseLeave:nb(u,v),onTouchStart:nb(h,p)}]:[!1,m,{}]}function nb(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function SJ({page:e,...t}){let{router:r}=t9(),n=N.useMemo(()=>W7(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?N.createElement(kJ,{page:e,matches:n,...t}):null}function CJ(e){let{manifest:t,routeModules:r}=r9(),[n,s]=N.useState([]);return N.useEffect(()=>{let i=!1;return pJ(e,t,r).then(o=>{i||s(o)}),()=>{i=!0}},[e,t,r]),n}function kJ({page:e,matches:t,...r}){let n=Ym(),{manifest:s,routeModules:i}=r9(),{basename:o}=t9(),{loaderData:l,matches:c}=NJ(),d=N.useMemo(()=>UO(e,t,c,s,n,"data"),[e,t,c,s,n]),u=N.useMemo(()=>UO(e,t,c,s,n,"assets"),[e,t,c,s,n]),h=N.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let v=new Set,g=!1;if(t.forEach(y=>{let C=s.routes[y.route.id];!C||!C.hasLoader||(!d.some(w=>w.route.id===y.route.id)&&y.route.id in l&&i[y.route.id]?.shouldRevalidate||C.hasClientLoader?g=!0:v.add(y.route.id))}),v.size===0)return[];let b=jJ(e,o);return g&&v.size>0&&b.searchParams.set("_routes",t.filter(y=>v.has(y.route.id)).map(y=>y.route.id).join(",")),[b.pathname+b.search]},[o,l,n,s,d,t,e,i]),m=N.useMemo(()=>xJ(u,s),[u,s]),p=CJ(u);return N.createElement(N.Fragment,null,h.map(v=>N.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...r})),m.map(v=>N.createElement("link",{key:v,rel:"modulepreload",href:v,...r})),p.map(({key:v,link:g})=>N.createElement("link",{key:v,...g})))}function _J(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var a9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{a9&&(window.__reactRouterVersion="7.6.3")}catch{}function EJ({basename:e,children:t,window:r}){let n=N.useRef();n.current==null&&(n.current=mQ({window:r,v5Compat:!0}));let s=n.current,[i,o]=N.useState({action:s.action,location:s.location}),l=N.useCallback(c=>{N.startTransition(()=>o(c))},[o]);return N.useLayoutEffect(()=>s.listen(l),[s,l]),N.createElement(aJ,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:s})}var n9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qp=N.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,...m},p){let{basename:v}=N.useContext(Fd),g=typeof d=="string"&&n9.test(d),b,y=!1;if(typeof d=="string"&&g&&(b=d,a9))try{let A=new URL(window.location.href),L=d.startsWith("//")?new URL(A.protocol+d):new URL(d),P=ef(L.pathname,v);L.origin===A.origin&&P!=null?d=P+L.search+L.hash:y=!0}catch{Md(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let C=$Q(d,{relative:s}),[w,k,S]=wJ(n,m),D=IJ(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:s,viewTransition:h});function E(A){t&&t(A),A.defaultPrevented||D(A)}let T=N.createElement("a",{...m,...S,href:b||C,onClick:y||i?t:E,ref:_J(p,k),target:c,"data-discover":!g&&r==="render"?"true":void 0});return w&&!g?N.createElement(N.Fragment,null,T,N.createElement(SJ,{page:C})):T});qp.displayName="Link";var DJ=N.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=Fy(o,{relative:d.relative}),m=Ym(),p=N.useContext(D2),{navigator:v,basename:g}=N.useContext(Fd),b=p!=null&&FJ(h)&&l===!0,y=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,C=m.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(C=C.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&g&&(w=ef(w,g)||w);const k=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let S=C===y||!s&&C.startsWith(y)&&C.charAt(k)==="/",D=w!=null&&(w===y||!s&&w.startsWith(y)&&w.charAt(y.length)==="/"),E={isActive:S,isPending:D,isTransitioning:b},T=S?t:void 0,A;typeof n=="function"?A=n(E):A=[n,S?"active":null,D?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let L=typeof i=="function"?i(E):i;return N.createElement(qp,{...d,"aria-current":T,className:A,ref:u,style:L,to:o,viewTransition:l},typeof c=="function"?c(E):c)});DJ.displayName="NavLink";var AJ=N.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:i,method:o=yN,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...m},p)=>{let v=MJ(),g=RJ(l,{relative:d}),b=o.toLowerCase()==="get"?"get":"post",y=typeof l=="string"&&n9.test(l),C=w=>{if(c&&c(w),w.defaultPrevented)return;w.preventDefault();let k=w.nativeEvent.submitter,S=k?.getAttribute("formmethod")||o;v(k||w.currentTarget,{fetcherKey:t,method:S,navigate:r,replace:s,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return N.createElement("form",{ref:p,method:b,action:g,onSubmit:n?c:C,...m,"data-discover":!y&&e==="render"?"true":void 0})});AJ.displayName="Form";function TJ(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function s9(e){let t=N.useContext(G0);return Jn(t,TJ(e)),t}function IJ(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let l=Xu(),c=Ym(),d=Fy(e,{relative:i});return N.useCallback(u=>{if(cJ(u,t)){u.preventDefault();let h=r!==void 0?r:Xb(c)===Xb(d);l(e,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[c,l,d,r,n,t,e,s,i,o])}var PJ=0,OJ=()=>`__${String(++PJ)}__`;function MJ(){let{router:e}=s9("useSubmit"),{basename:t}=N.useContext(Fd),r=JQ();return N.useCallback(async(n,s={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=hJ(n,t);if(s.navigate===!1){let u=s.fetcherKey||OJ();await e.fetch(u,r,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function RJ(e,{relative:t}={}){let{basename:r}=N.useContext(Fd),n=N.useContext(Ku);Jn(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Fy(e||".",{relative:t})},o=Ym();if(e==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!e||e===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(i.pathname=i.pathname==="/"?r:Vh([r,i.pathname])),Xb(i)}function FJ(e,t={}){let r=N.useContext(X7);Jn(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=s9("useViewTransitionState"),s=Fy(e,{relative:t.relative});if(!r.isTransitioning)return!1;let i=ef(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=ef(r.nextLocation.pathname,n)||r.nextLocation.pathname;return qN(s.pathname,o)!=null||qN(s.pathname,i)!=null}[...yJ];var Ly=H7();const LJ=Yu(Ly);function i9(e,t){return function(){return e.apply(t,arguments)}}const{toString:BJ}=Object.prototype,{getPrototypeOf:A3}=Object,{iterator:T2,toStringTag:o9}=Symbol,I2=(e=>t=>{const r=BJ.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ld=e=>(e=e.toLowerCase(),t=>I2(t)===e),P2=e=>t=>typeof t===e,{isArray:K0}=Array,Qb=P2("undefined");function UJ(e){return e!==null&&!Qb(e)&&e.constructor!==null&&!Qb(e.constructor)&&dl(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const l9=Ld("ArrayBuffer");function $J(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&l9(e.buffer),t}const VJ=P2("string"),dl=P2("function"),c9=P2("number"),O2=e=>e!==null&&typeof e=="object",qJ=e=>e===!0||e===!1,NN=e=>{if(I2(e)!=="object")return!1;const t=A3(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(o9 in e)&&!(T2 in e)},zJ=Ld("Date"),HJ=Ld("File"),WJ=Ld("Blob"),GJ=Ld("FileList"),YJ=e=>O2(e)&&dl(e.pipe),KJ=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||dl(e.append)&&((t=I2(e))==="formdata"||t==="object"&&dl(e.toString)&&e.toString()==="[object FormData]"))},XJ=Ld("URLSearchParams"),[QJ,JJ,ZJ,eZ]=["ReadableStream","Request","Response","Headers"].map(Ld),tZ=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function By(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),K0(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function d9(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const zp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,u9=e=>!Qb(e)&&e!==zp;function pD(){const{caseless:e}=u9(this)&&this||{},t={},r=(n,s)=>{const i=e&&d9(t,s)||s;NN(t[i])&&NN(n)?t[i]=pD(t[i],n):NN(n)?t[i]=pD({},n):K0(n)?t[i]=n.slice():t[i]=n};for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&By(arguments[n],r);return t}const rZ=(e,t,r,{allOwnKeys:n}={})=>(By(t,(s,i)=>{r&&dl(s)?e[i]=i9(s,r):e[i]=s},{allOwnKeys:n}),e),aZ=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),nZ=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},sZ=(e,t,r,n)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&A3(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},iZ=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},oZ=e=>{if(!e)return null;if(K0(e))return e;let t=e.length;if(!c9(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},lZ=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&A3(Uint8Array)),cZ=(e,t)=>{const n=(e&&e[T2]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},dZ=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},uZ=Ld("HTMLFormElement"),hZ=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),$O=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),fZ=Ld("RegExp"),h9=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};By(r,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(n[i]=o||s)}),Object.defineProperties(e,n)},mZ=e=>{h9(e,(t,r)=>{if(dl(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(dl(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},pZ=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return K0(e)?n(e):n(String(e).split(t)),r},xZ=()=>{},vZ=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function gZ(e){return!!(e&&dl(e.append)&&e[o9]==="FormData"&&e[T2])}const bZ=e=>{const t=new Array(10),r=(n,s)=>{if(O2(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[s]=n;const i=K0(n)?[]:{};return By(n,(o,l)=>{const c=r(o,s+1);!Qb(c)&&(i[l]=c)}),t[s]=void 0,i}}return n};return r(e,0)},yZ=Ld("AsyncFunction"),jZ=e=>e&&(O2(e)||dl(e))&&dl(e.then)&&dl(e.catch),f9=((e,t)=>e?setImmediate:t?((r,n)=>(zp.addEventListener("message",({source:s,data:i})=>{s===zp&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),zp.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",dl(zp.postMessage)),NZ=typeof queueMicrotask<"u"?queueMicrotask.bind(zp):typeof process<"u"&&process.nextTick||f9,wZ=e=>e!=null&&dl(e[T2]),Ut={isArray:K0,isArrayBuffer:l9,isBuffer:UJ,isFormData:KJ,isArrayBufferView:$J,isString:VJ,isNumber:c9,isBoolean:qJ,isObject:O2,isPlainObject:NN,isReadableStream:QJ,isRequest:JJ,isResponse:ZJ,isHeaders:eZ,isUndefined:Qb,isDate:zJ,isFile:HJ,isBlob:WJ,isRegExp:fZ,isFunction:dl,isStream:YJ,isURLSearchParams:XJ,isTypedArray:lZ,isFileList:GJ,forEach:By,merge:pD,extend:rZ,trim:tZ,stripBOM:aZ,inherits:nZ,toFlatObject:sZ,kindOf:I2,kindOfTest:Ld,endsWith:iZ,toArray:oZ,forEachEntry:cZ,matchAll:dZ,isHTMLForm:uZ,hasOwnProperty:$O,hasOwnProp:$O,reduceDescriptors:h9,freezeMethods:mZ,toObjectSet:pZ,toCamelCase:hZ,noop:xZ,toFiniteNumber:vZ,findKey:d9,global:zp,isContextDefined:u9,isSpecCompliantForm:gZ,toJSONObject:bZ,isAsyncFn:yZ,isThenable:jZ,setImmediate:f9,asap:NZ,isIterable:wZ};function ga(e,t,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s,this.status=s.status?s.status:null)}Ut.inherits(ga,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ut.toJSONObject(this.config),code:this.code,status:this.status}}});const m9=ga.prototype,p9={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{p9[e]={value:e}});Object.defineProperties(ga,p9);Object.defineProperty(m9,"isAxiosError",{value:!0});ga.from=(e,t,r,n,s,i)=>{const o=Object.create(m9);return Ut.toFlatObject(e,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),ga.call(o,e.message,t,r,n,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const SZ=null;function xD(e){return Ut.isPlainObject(e)||Ut.isArray(e)}function x9(e){return Ut.endsWith(e,"[]")?e.slice(0,-2):e}function VO(e,t,r){return e?e.concat(t).map(function(s,i){return s=x9(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function CZ(e){return Ut.isArray(e)&&!e.some(xD)}const kZ=Ut.toFlatObject(Ut,{},null,function(t){return/^is[A-Z]/.test(t)});function M2(e,t,r){if(!Ut.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Ut.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,b){return!Ut.isUndefined(b[g])});const n=r.metaTokens,s=r.visitor||u,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&Ut.isSpecCompliantForm(t);if(!Ut.isFunction(s))throw new TypeError("visitor must be a function");function d(v){if(v===null)return"";if(Ut.isDate(v))return v.toISOString();if(Ut.isBoolean(v))return v.toString();if(!c&&Ut.isBlob(v))throw new ga("Blob is not supported. Use a Buffer instead.");return Ut.isArrayBuffer(v)||Ut.isTypedArray(v)?c&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,g,b){let y=v;if(v&&!b&&typeof v=="object"){if(Ut.endsWith(g,"{}"))g=n?g:g.slice(0,-2),v=JSON.stringify(v);else if(Ut.isArray(v)&&CZ(v)||(Ut.isFileList(v)||Ut.endsWith(g,"[]"))&&(y=Ut.toArray(v)))return g=x9(g),y.forEach(function(w,k){!(Ut.isUndefined(w)||w===null)&&t.append(o===!0?VO([g],k,i):o===null?g:g+"[]",d(w))}),!1}return xD(v)?!0:(t.append(VO(b,g,i),d(v)),!1)}const h=[],m=Object.assign(kZ,{defaultVisitor:u,convertValue:d,isVisitable:xD});function p(v,g){if(!Ut.isUndefined(v)){if(h.indexOf(v)!==-1)throw Error("Circular reference detected in "+g.join("."));h.push(v),Ut.forEach(v,function(y,C){(!(Ut.isUndefined(y)||y===null)&&s.call(t,y,Ut.isString(C)?C.trim():C,g,m))===!0&&p(y,g?g.concat(C):[C])}),h.pop()}}if(!Ut.isObject(e))throw new TypeError("data must be an object");return p(e),t}function qO(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function T3(e,t){this._pairs=[],e&&M2(e,this,t)}const v9=T3.prototype;v9.append=function(t,r){this._pairs.push([t,r])};v9.toString=function(t){const r=t?function(n){return t.call(this,n,qO)}:qO;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function _Z(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function g9(e,t,r){if(!t)return e;const n=r&&r.encode||_Z;Ut.isFunction(r)&&(r={serialize:r});const s=r&&r.serialize;let i;if(s?i=s(t,r):i=Ut.isURLSearchParams(t)?t.toString():new T3(t,r).toString(n),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class zO{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ut.forEach(this.handlers,function(n){n!==null&&t(n)})}}const b9={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EZ=typeof URLSearchParams<"u"?URLSearchParams:T3,DZ=typeof FormData<"u"?FormData:null,AZ=typeof Blob<"u"?Blob:null,TZ={isBrowser:!0,classes:{URLSearchParams:EZ,FormData:DZ,Blob:AZ},protocols:["http","https","file","blob","url","data"]},I3=typeof window<"u"&&typeof document<"u",vD=typeof navigator=="object"&&navigator||void 0,IZ=I3&&(!vD||["ReactNative","NativeScript","NS"].indexOf(vD.product)<0),PZ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",OZ=I3&&window.location.href||"http://localhost",MZ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:I3,hasStandardBrowserEnv:IZ,hasStandardBrowserWebWorkerEnv:PZ,navigator:vD,origin:OZ},Symbol.toStringTag,{value:"Module"})),jo={...MZ,...TZ};function RZ(e,t){return M2(e,new jo.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,i){return jo.isNode&&Ut.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},t))}function FZ(e){return Ut.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function LZ(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function y9(e){function t(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&Ut.isArray(s)?s.length:o,c?(Ut.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!l):((!s[o]||!Ut.isObject(s[o]))&&(s[o]=[]),t(r,n,s[o],i)&&Ut.isArray(s[o])&&(s[o]=LZ(s[o])),!l)}if(Ut.isFormData(e)&&Ut.isFunction(e.entries)){const r={};return Ut.forEachEntry(e,(n,s)=>{t(FZ(n),s,r,0)}),r}return null}function BZ(e,t,r){if(Ut.isString(e))try{return(t||JSON.parse)(e),Ut.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Uy={transitional:b9,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=Ut.isObject(t);if(i&&Ut.isHTMLForm(t)&&(t=new FormData(t)),Ut.isFormData(t))return s?JSON.stringify(y9(t)):t;if(Ut.isArrayBuffer(t)||Ut.isBuffer(t)||Ut.isStream(t)||Ut.isFile(t)||Ut.isBlob(t)||Ut.isReadableStream(t))return t;if(Ut.isArrayBufferView(t))return t.buffer;if(Ut.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return RZ(t,this.formSerializer).toString();if((l=Ut.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return M2(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),BZ(t)):t}],transformResponse:[function(t){const r=this.transitional||Uy.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(Ut.isResponse(t)||Ut.isReadableStream(t))return t;if(t&&Ut.isString(t)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t)}catch(l){if(o)throw l.name==="SyntaxError"?ga.from(l,ga.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:jo.classes.FormData,Blob:jo.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ut.forEach(["delete","get","head","post","put","patch"],e=>{Uy.headers[e]={}});const UZ=Ut.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$Z=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||t[r]&&UZ[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},HO=Symbol("internals");function sb(e){return e&&String(e).trim().toLowerCase()}function wN(e){return e===!1||e==null?e:Ut.isArray(e)?e.map(wN):String(e)}function VZ(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const qZ=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function pk(e,t,r,n,s){if(Ut.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!Ut.isString(t)){if(Ut.isString(n))return t.indexOf(n)!==-1;if(Ut.isRegExp(n))return n.test(t)}}function zZ(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function HZ(e,t){const r=Ut.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,o){return this[n].call(this,t,s,i,o)},configurable:!0})})}let ul=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(l,c,d){const u=sb(c);if(!u)throw new Error("header name must be a non-empty string");const h=Ut.findKey(s,u);(!h||s[h]===void 0||d===!0||d===void 0&&s[h]!==!1)&&(s[h||c]=wN(l))}const o=(l,c)=>Ut.forEach(l,(d,u)=>i(d,u,c));if(Ut.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(Ut.isString(t)&&(t=t.trim())&&!qZ(t))o($Z(t),r);else if(Ut.isObject(t)&&Ut.isIterable(t)){let l={},c,d;for(const u of t){if(!Ut.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[d=u[0]]=(c=l[d])?Ut.isArray(c)?[...c,u[1]]:[c,u[1]]:u[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=sb(t),t){const n=Ut.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return VZ(s);if(Ut.isFunction(r))return r.call(this,s,n);if(Ut.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=sb(t),t){const n=Ut.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||pk(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(o){if(o=sb(o),o){const l=Ut.findKey(n,o);l&&(!r||pk(n,n[l],l,r))&&(delete n[l],s=!0)}}return Ut.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||pk(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return Ut.forEach(this,(s,i)=>{const o=Ut.findKey(n,i);if(o){r[o]=wN(s),delete r[i];return}const l=t?zZ(i):String(i).trim();l!==i&&delete r[i],r[l]=wN(s),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Ut.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&Ut.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[HO]=this[HO]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=sb(o);n[l]||(HZ(s,o),n[l]=!0)}return Ut.isArray(t)?t.forEach(i):i(t),this}};ul.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ut.reduceDescriptors(ul.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Ut.freezeMethods(ul);function xk(e,t){const r=this||Uy,n=t||r,s=ul.from(n.headers);let i=n.data;return Ut.forEach(e,function(l){i=l.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function j9(e){return!!(e&&e.__CANCEL__)}function X0(e,t,r){ga.call(this,e??"canceled",ga.ERR_CANCELED,t,r),this.name="CanceledError"}Ut.inherits(X0,ga,{__CANCEL__:!0});function N9(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new ga("Request failed with status code "+r.status,[ga.ERR_BAD_REQUEST,ga.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function WZ(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function GZ(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),u=n[i];o||(o=d),r[s]=c,n[s]=d;let h=i,m=0;for(;h!==s;)m+=r[h++],h=h%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),d-o<t)return;const p=u&&d-u;return p?Math.round(m*1e3/p):void 0}}function YZ(e,t){let r=0,n=1e3/t,s,i;const o=(d,u=Date.now())=>{r=u,s=null,i&&(clearTimeout(i),i=null),e.apply(null,d)};return[(...d)=>{const u=Date.now(),h=u-r;h>=n?o(d,u):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},n-h)))},()=>s&&o(s)]}const zN=(e,t,r=3)=>{let n=0;const s=GZ(50,250);return YZ(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,d=s(c),u=o<=l;n=o;const h={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&u?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(h)},r)},WO=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},GO=e=>(...t)=>Ut.asap(()=>e(...t)),KZ=jo.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,jo.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(jo.origin),jo.navigator&&/(msie|trident)/i.test(jo.navigator.userAgent)):()=>!0,XZ=jo.hasStandardBrowserEnv?{write(e,t,r,n,s,i){const o=[e+"="+encodeURIComponent(t)];Ut.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),Ut.isString(n)&&o.push("path="+n),Ut.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function QZ(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function JZ(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function w9(e,t,r){let n=!QZ(t);return e&&(n||r==!1)?JZ(e,t):t}const YO=e=>e instanceof ul?{...e}:e;function vx(e,t){t=t||{};const r={};function n(d,u,h,m){return Ut.isPlainObject(d)&&Ut.isPlainObject(u)?Ut.merge.call({caseless:m},d,u):Ut.isPlainObject(u)?Ut.merge({},u):Ut.isArray(u)?u.slice():u}function s(d,u,h,m){if(Ut.isUndefined(u)){if(!Ut.isUndefined(d))return n(void 0,d,h,m)}else return n(d,u,h,m)}function i(d,u){if(!Ut.isUndefined(u))return n(void 0,u)}function o(d,u){if(Ut.isUndefined(u)){if(!Ut.isUndefined(d))return n(void 0,d)}else return n(void 0,u)}function l(d,u,h){if(h in t)return n(d,u);if(h in e)return n(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,u,h)=>s(YO(d),YO(u),h,!0)};return Ut.forEach(Object.keys(Object.assign({},e,t)),function(u){const h=c[u]||s,m=h(e[u],t[u],u);Ut.isUndefined(m)&&h!==l||(r[u]=m)}),r}const S9=e=>{const t=vx({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;t.headers=o=ul.from(o),t.url=g9(w9(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(Ut.isFormData(r)){if(jo.hasStandardBrowserEnv||jo.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[d,...u]=c?c.split(";").map(h=>h.trim()).filter(Boolean):[];o.setContentType([d||"multipart/form-data",...u].join("; "))}}if(jo.hasStandardBrowserEnv&&(n&&Ut.isFunction(n)&&(n=n(t)),n||n!==!1&&KZ(t.url))){const d=s&&i&&XZ.read(i);d&&o.set(s,d)}return t},ZZ=typeof XMLHttpRequest<"u",eee=ZZ&&function(e){return new Promise(function(r,n){const s=S9(e);let i=s.data;const o=ul.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,u,h,m,p,v;function g(){p&&p(),v&&v(),s.cancelToken&&s.cancelToken.unsubscribe(u),s.signal&&s.signal.removeEventListener("abort",u)}let b=new XMLHttpRequest;b.open(s.method.toUpperCase(),s.url,!0),b.timeout=s.timeout;function y(){if(!b)return;const w=ul.from("getAllResponseHeaders"in b&&b.getAllResponseHeaders()),S={data:!l||l==="text"||l==="json"?b.responseText:b.response,status:b.status,statusText:b.statusText,headers:w,config:e,request:b};N9(function(E){r(E),g()},function(E){n(E),g()},S),b=null}"onloadend"in b?b.onloadend=y:b.onreadystatechange=function(){!b||b.readyState!==4||b.status===0&&!(b.responseURL&&b.responseURL.indexOf("file:")===0)||setTimeout(y)},b.onabort=function(){b&&(n(new ga("Request aborted",ga.ECONNABORTED,e,b)),b=null)},b.onerror=function(){n(new ga("Network Error",ga.ERR_NETWORK,e,b)),b=null},b.ontimeout=function(){let k=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const S=s.transitional||b9;s.timeoutErrorMessage&&(k=s.timeoutErrorMessage),n(new ga(k,S.clarifyTimeoutError?ga.ETIMEDOUT:ga.ECONNABORTED,e,b)),b=null},i===void 0&&o.setContentType(null),"setRequestHeader"in b&&Ut.forEach(o.toJSON(),function(k,S){b.setRequestHeader(S,k)}),Ut.isUndefined(s.withCredentials)||(b.withCredentials=!!s.withCredentials),l&&l!=="json"&&(b.responseType=s.responseType),d&&([m,v]=zN(d,!0),b.addEventListener("progress",m)),c&&b.upload&&([h,p]=zN(c),b.upload.addEventListener("progress",h),b.upload.addEventListener("loadend",p)),(s.cancelToken||s.signal)&&(u=w=>{b&&(n(!w||w.type?new X0(null,e,b):w),b.abort(),b=null)},s.cancelToken&&s.cancelToken.subscribe(u),s.signal&&(s.signal.aborted?u():s.signal.addEventListener("abort",u)));const C=WZ(s.url);if(C&&jo.protocols.indexOf(C)===-1){n(new ga("Unsupported protocol "+C+":",ga.ERR_BAD_REQUEST,e));return}b.send(i||null)})},tee=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(d){if(!s){s=!0,l();const u=d instanceof Error?d:this.reason;n.abort(u instanceof ga?u:new X0(u instanceof Error?u.message:u))}};let o=t&&setTimeout(()=>{o=null,i(new ga(`timeout ${t} of ms exceeded`,ga.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>Ut.asap(l),c}},ree=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},aee=async function*(e,t){for await(const r of nee(e))yield*ree(r,t)},nee=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},KO=(e,t,r,n)=>{const s=aee(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:u}=await s.next();if(d){l(),c.close();return}let h=u.byteLength;if(r){let m=i+=h;r(m)}c.enqueue(new Uint8Array(u))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},R2=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",C9=R2&&typeof ReadableStream=="function",see=R2&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),k9=(e,...t)=>{try{return!!e(...t)}catch{return!1}},iee=C9&&k9(()=>{let e=!1;const t=new Request(jo.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),XO=64*1024,gD=C9&&k9(()=>Ut.isReadableStream(new Response("").body)),HN={stream:gD&&(e=>e.body)};R2&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!HN[t]&&(HN[t]=Ut.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new ga(`Response type '${t}' is not supported`,ga.ERR_NOT_SUPPORT,n)})})})(new Response);const oee=async e=>{if(e==null)return 0;if(Ut.isBlob(e))return e.size;if(Ut.isSpecCompliantForm(e))return(await new Request(jo.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ut.isArrayBufferView(e)||Ut.isArrayBuffer(e))return e.byteLength;if(Ut.isURLSearchParams(e)&&(e=e+""),Ut.isString(e))return(await see(e)).byteLength},lee=async(e,t)=>{const r=Ut.toFiniteNumber(e.getContentLength());return r??oee(t)},cee=R2&&(async e=>{let{url:t,method:r,data:n,signal:s,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:d,headers:u,withCredentials:h="same-origin",fetchOptions:m}=S9(e);d=d?(d+"").toLowerCase():"text";let p=tee([s,i&&i.toAbortSignal()],o),v;const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let b;try{if(c&&iee&&r!=="get"&&r!=="head"&&(b=await lee(u,n))!==0){let S=new Request(t,{method:"POST",body:n,duplex:"half"}),D;if(Ut.isFormData(n)&&(D=S.headers.get("content-type"))&&u.setContentType(D),S.body){const[E,T]=WO(b,zN(GO(c)));n=KO(S.body,XO,E,T)}}Ut.isString(h)||(h=h?"include":"omit");const y="credentials"in Request.prototype;v=new Request(t,{...m,signal:p,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:y?h:void 0});let C=await fetch(v,m);const w=gD&&(d==="stream"||d==="response");if(gD&&(l||w&&g)){const S={};["status","statusText","headers"].forEach(A=>{S[A]=C[A]});const D=Ut.toFiniteNumber(C.headers.get("content-length")),[E,T]=l&&WO(D,zN(GO(l),!0))||[];C=new Response(KO(C.body,XO,E,()=>{T&&T(),g&&g()}),S)}d=d||"text";let k=await HN[Ut.findKey(HN,d)||"text"](C,e);return!w&&g&&g(),await new Promise((S,D)=>{N9(S,D,{data:k,headers:ul.from(C.headers),status:C.status,statusText:C.statusText,config:e,request:v})})}catch(y){throw g&&g(),y&&y.name==="TypeError"&&/Load failed|fetch/i.test(y.message)?Object.assign(new ga("Network Error",ga.ERR_NETWORK,e,v),{cause:y.cause||y}):ga.from(y,y&&y.code,e,v)}}),bD={http:SZ,xhr:eee,fetch:cee};Ut.forEach(bD,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const QO=e=>`- ${e}`,dee=e=>Ut.isFunction(e)||e===null||e===!1,_9={getAdapter:e=>{e=Ut.isArray(e)?e:[e];const{length:t}=e;let r,n;const s={};for(let i=0;i<t;i++){r=e[i];let o;if(n=r,!dee(r)&&(n=bD[(o=String(r)).toLowerCase()],n===void 0))throw new ga(`Unknown adapter '${o}'`);if(n)break;s[o||"#"+i]=n}if(!n){const i=Object.entries(s).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=t?i.length>1?`since :
`+i.map(QO).join(`
`):" "+QO(i[0]):"as no adapter specified";throw new ga("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:bD};function vk(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new X0(null,e)}function JO(e){return vk(e),e.headers=ul.from(e.headers),e.data=xk.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),_9.getAdapter(e.adapter||Uy.adapter)(e).then(function(n){return vk(e),n.data=xk.call(e,e.transformResponse,n),n.headers=ul.from(n.headers),n},function(n){return j9(n)||(vk(e),n&&n.response&&(n.response.data=xk.call(e,e.transformResponse,n.response),n.response.headers=ul.from(n.response.headers))),Promise.reject(n)})}const E9="1.10.0",F2={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{F2[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const ZO={};F2.transitional=function(t,r,n){function s(i,o){return"[Axios v"+E9+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new ga(s(o," has been removed"+(r?" in "+r:"")),ga.ERR_DEPRECATED);return r&&!ZO[o]&&(ZO[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};F2.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function uee(e,t,r){if(typeof e!="object")throw new ga("options must be an object",ga.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new ga("option "+i+" must be "+c,ga.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ga("Unknown option "+i,ga.ERR_BAD_OPTION)}}const SN={assertOptions:uee,validators:F2},xu=SN.validators;let rx=class{constructor(t){this.defaults=t||{},this.interceptors={request:new zO,response:new zO}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=vx(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&SN.assertOptions(n,{silentJSONParsing:xu.transitional(xu.boolean),forcedJSONParsing:xu.transitional(xu.boolean),clarifyTimeoutError:xu.transitional(xu.boolean)},!1),s!=null&&(Ut.isFunction(s)?r.paramsSerializer={serialize:s}:SN.assertOptions(s,{encode:xu.function,serialize:xu.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),SN.assertOptions(r,{baseUrl:xu.spelling("baseURL"),withXsrfToken:xu.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&Ut.merge(i.common,i[r.method]);i&&Ut.forEach(["delete","get","head","post","put","patch","common"],v=>{delete i[v]}),r.headers=ul.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let u,h=0,m;if(!c){const v=[JO.bind(this),void 0];for(v.unshift.apply(v,l),v.push.apply(v,d),m=v.length,u=Promise.resolve(r);h<m;)u=u.then(v[h++],v[h++]);return u}m=l.length;let p=r;for(h=0;h<m;){const v=l[h++],g=l[h++];try{p=v(p)}catch(b){g.call(this,b);break}}try{u=JO.call(this,p)}catch(v){return Promise.reject(v)}for(h=0,m=d.length;h<m;)u=u.then(d[h++],d[h++]);return u}getUri(t){t=vx(this.defaults,t);const r=w9(t.baseURL,t.url,t.allowAbsoluteUrls);return g9(r,t.params,t.paramsSerializer)}};Ut.forEach(["delete","get","head","options"],function(t){rx.prototype[t]=function(r,n){return this.request(vx(n||{},{method:t,url:r,data:(n||{}).data}))}});Ut.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(vx(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}rx.prototype[t]=r(),rx.prototype[t+"Form"]=r(!0)});let hee=class D9{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new X0(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new D9(function(s){t=s}),cancel:t}}};function fee(e){return function(r){return e.apply(null,r)}}function mee(e){return Ut.isObject(e)&&e.isAxiosError===!0}const yD={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(yD).forEach(([e,t])=>{yD[t]=e});function A9(e){const t=new rx(e),r=i9(rx.prototype.request,t);return Ut.extend(r,rx.prototype,t,{allOwnKeys:!0}),Ut.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return A9(vx(e,s))},r}const Oe=A9(Uy);Oe.Axios=rx;Oe.CanceledError=X0;Oe.CancelToken=hee;Oe.isCancel=j9;Oe.VERSION=E9;Oe.toFormData=M2;Oe.AxiosError=ga;Oe.Cancel=Oe.CanceledError;Oe.all=function(t){return Promise.all(t)};Oe.spread=fee;Oe.isAxiosError=mee;Oe.mergeConfig=vx;Oe.AxiosHeaders=ul;Oe.formToJSON=e=>y9(Ut.isHTMLForm(e)?new FormData(e):e);Oe.getAdapter=_9.getAdapter;Oe.HttpStatusCode=yD;Oe.default=Oe;const{Axios:W8e,AxiosError:G8e,CanceledError:Y8e,isCancel:K8e,CancelToken:X8e,VERSION:Q8e,all:J8e,Cancel:Z8e,isAxiosError:eBe,spread:tBe,toFormData:rBe,AxiosHeaders:aBe,HttpStatusCode:nBe,formToJSON:sBe,getAdapter:iBe,mergeConfig:oBe}=Oe,pee=()=>{const[e,t]=N.useState({dashboard:!1,superAdmin:!1,application:!1,call:!1,master:!1,category:!1,mrp:!1,purchase:!1,sales:!1,inventory:!1,accounts:!1,invoice:!1,billing:!1,purchasereport:!1,salesreport:!1,inventoryreport:!1,accountsreport:!1,crm:!1,vendorBilling:!1,project:!1,campaigns:!1,hrms:!1}),[r,n]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState(""),c=Xu(),d={purchasereport:"purchase",salesreport:"sales",inventoryreport:"inventory",accountsreport:"accounts",vendorBilling:"invoice",billing:"invoice"},u=v=>r.some(g=>g.name===v),h=(v,g)=>r.find(y=>y.name===v)?.subPermissions?.includes(g)||!1,m=v=>window.location.pathname===v,p=v=>{t(g=>{const b={...g},y=d[v];return y?(Object.keys(b).forEach(C=>{C!==v&&C!==y&&(b[C]=!1)}),b[v]=!g[v],b[y]=!0):(Object.keys(b).forEach(C=>{C!==v&&(b[C]=!1)}),b[v]=!g[v]),localStorage.setItem("openSubmenus",JSON.stringify(b)),b})};return N.useEffect(()=>{const v=localStorage.getItem("openSubmenus");v&&t(JSON.parse(v))},[]),N.useEffect(()=>{const v=async()=>{i(!0);try{const y=localStorage.getItem("activeRole");if(y){l(y);const w=(await Oe.get(`/api/permissions/${y}`)).data.data||[];if(n(w),localStorage.setItem("cachedPermissions",JSON.stringify(w)),localStorage.setItem("prevActiveRole",y),w.length>0){const k=w[0].subPermissions?.[0];k&&setTimeout(()=>{const S=document.querySelectorAll("a");for(let D of S)if(D.textContent?.trim()===k){const T=D.getAttribute("href");T&&c(T);break}},150)}}}catch(y){console.error("Error fetching permissions:",y),n([])}finally{i(!1)}},g=localStorage.getItem("prevActiveRole"),b=localStorage.getItem("activeRole");if(b&&b!==g)console.log("New role detected, fetching permissions"),v();else{console.log("Same role as before — loading cached permissions");const y=localStorage.getItem("cachedPermissions");y?(n(JSON.parse(y)),l(b),i(!1)):v()}},[c]),s?a.jsx("div",{className:"two-col-sidebar",id:"two-col-sidebar",children:a.jsx("div",{className:"sidebar",id:"sidebar-two",children:a.jsx("div",{className:"sidebar-inner",children:a.jsxs("div",{className:"text-center p-3",children:[a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2",children:"Loading permissions..."})]})})})}):a.jsx(a.Fragment,{children:a.jsxs("div",{className:"sidebar",id:"sidebar",children:[a.jsxs("div",{className:"sidebar-logo",children:[a.jsx("a",{href:"/",className:"logo logo-normal",children:a.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})}),a.jsx("a",{href:"/",className:"logo-small",children:a.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})}),a.jsx("a",{href:"/",className:"dark-logo",children:a.jsx("img",{src:"assets/img/logo.png",alt:"Logo"})})]}),a.jsx("div",{className:"sidebar-inner slimscroll",children:a.jsx("div",{id:"sidebar-menu",className:"sidebar-menu",children:a.jsxs("ul",{children:[u("Dashboard")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsx("li",{className:"submenu",children:a.jsxs("a",{href:"/",className:m("/")?"active":"",children:[a.jsx("i",{className:"ti ti-smart-home"}),a.jsx("span",{children:"Dashboard"})]})})})}),u("Master Data")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/material-form","/customer-form","/vendor-form","/customer-price-list","/vendor-price-list","/tax-form","/LocationMaster","/ProcessList","/GeneralCondition"].some(v=>m(v))&&e.master?"active subdrop":"",onClick:v=>{v.preventDefault(),p("master")},children:[a.jsx("i",{className:"ti ti-server"}),a.jsx("span",{children:"Master Data"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.master?"block":"none"},children:[h("Master Data","Material Master")&&a.jsx("li",{children:a.jsx("a",{href:"/material-form",className:m("/material-form")?"active":"",children:"Material Master"})}),h("Master Data","Customer Master")&&a.jsx("li",{children:a.jsx("a",{href:"/customer-form",className:m("/customer-form")?"active":"",children:"Customer Master"})}),h("Master Data","Vendor Master")&&a.jsx("li",{children:a.jsx("a",{href:"/vendor-form",className:m("/vendor-form")?"active":"",children:"Vendor Master"})}),h("Master Data","Customer Price List")&&a.jsx("li",{children:a.jsx("a",{href:"/customer-price-list",className:m("/customer-price-list")?"active":"",children:"Customer Price List"})}),h("Master Data","Vendor Price List")&&a.jsx("li",{children:a.jsx("a",{href:"/vendor-price-list",className:m("/vendor-price-list")?"active":"",children:"Vendor Price List"})}),h("Master Data","Tax List")&&a.jsx("li",{children:a.jsx("a",{href:"/tax-form",className:m("/tax-form")?"active":"",children:"Tax List"})}),h("Master Data","Location Master")&&a.jsx("li",{children:a.jsx("a",{href:"/LocationMaster",className:m("/LocationMaster")?"active":"",children:"Location Master"})}),h("Master Data","Process List Master")&&a.jsx("li",{children:a.jsx("a",{href:"/ProcessList",className:m("/ProcessList")?"active":"",children:"Process List Master"})}),h("Master Data","General Condition Master")&&a.jsx("li",{children:a.jsx("a",{href:"/GeneralCondition",className:m("/GeneralCondition")?"active":"",children:"General Condition Master"})})]})]})})}),u("MRP")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsx("li",{className:"submenu",children:a.jsxs("a",{href:"/MRP",className:m("/MRP")?"active":"",children:[a.jsx("i",{className:"ti ti-chart-line"}),a.jsx("span",{children:"MRP"})]})})})}),u("Category")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:e.category?"active subdrop":"",onClick:v=>{v.preventDefault(),p("category")},children:[a.jsx("i",{className:"bi bi-database"}),a.jsx("span",{children:"Category"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.category?"block":"none"},children:[h("Category","Material Category")&&a.jsx("li",{children:a.jsx("a",{href:"/MaterialCategory",className:m("/MaterialCategory")?"active":"",children:"Material Category"})}),h("Category","Customer Category")&&a.jsx("li",{children:a.jsx("a",{href:"/customer-category-form",className:m("/customer-category-form")?"active":"",children:"Customer Category"})}),h("Category","Vendor Category")&&a.jsx("li",{children:a.jsx("a",{href:"/vendor-category",className:m("/vendor-category")?"active":"",children:"Vendor Category"})}),h("Category","Purchase Indent Category")&&a.jsx("li",{children:a.jsx("a",{href:"/Purchaserequestcat",className:m("/Purchaserequestcat")?"active":"",children:"Purchase Indent Category"})}),h("Category","Sales Indent Category")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesCategory",className:m("/SalesCategory")?"active":"",children:"Sales Indent Category"})}),h("Category","PO Category")&&a.jsx("li",{children:a.jsx("a",{href:"/POCategory",className:m("/POCategory")?"active":"",children:"PO Category"})}),h("Category","Sales RFQ Category")&&a.jsx("li",{children:a.jsx("a",{href:"/sale-quotation-category-form",className:m("/sale-quotation-category-form")?"active":"",children:"Sales RFQ Category"})}),h("Category","Sales Order Category")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesOrderCategoryForm",className:m("/SalesOrderCategoryForm")?"active":"",children:"Sales Order Category"})}),h("Category","Goods Receipt Category")&&a.jsx("li",{children:a.jsx("a",{href:"/GoodsReceiptCategory",className:m("/GoodsReceiptCategory")?"active":"",children:"Goods Receipt Category"})}),h("Category","Goods Issue Category")&&a.jsx("li",{children:a.jsx("a",{href:"/GoodsIssueCategory",className:m("/GoodsIssueCategory")?"active":"",children:"Goods Issue Category"})}),h("Category","Invoice Category")&&a.jsx("li",{children:a.jsx("a",{href:"/InvoiceCategory",className:m("/InvoiceCategory")?"active":"",children:"Invoice Category"})}),h("Category","Billing Category")&&a.jsx("li",{children:a.jsx("a",{href:"/BillingCategory",className:m("/BillingCategory")?"active":"",children:"Billing Category"})}),h("Category","Sale Contract Category")&&a.jsx("li",{children:a.jsx("a",{href:"/SaleContractCategoryForm",className:m("/SaleContractCategoryForm")?"active":"",children:"Sale Contract Category"})}),h("Category","Transfer Category")&&a.jsx("li",{children:a.jsx("a",{href:"/TransferCategory",className:m("/TransferCategory")?"active":"",children:"Transfer Category"})}),h("Category","Purchase Quotation Category")&&a.jsx("li",{children:a.jsx("a",{href:"/RFQCategoryForm",className:m("/RFQCategoryForm")?"active":"",children:"RFQ Category"})}),h("Category","Purchase Contract Category")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseContractCategory",className:m("/PurchaseContractCategory")?"active":"",children:"Purchase Contract Category"})})]})]})})}),u("Purchase")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/PurchaseEnquiry","/PurchaseQuotation","/PurchaseContract","/PurchaseOrder","/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(v=>m(v))||e.purchase?"active subdrop":"",onClick:v=>{v.preventDefault(),p("purchase")},children:[a.jsx("i",{className:"ti ti-shopping-cart-dollar"}),a.jsx("span",{children:"Purchase"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.purchase?"block":"none"},children:[h("Purchase","Purchase Indent")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseEnquiry",className:m("/PurchaseEnquiry")?"active":"",children:"Purchase Enquiry"})}),h("Purchase","Purchase Quotation")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseQuotation",className:m("/PurchaseQuotation")?"active":"",children:"Purchase Quotation"})}),h("Purchase","Purchase Contract")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseContract",className:m("/PurchaseContract")?"active":"",children:"Purchase Contract"})}),h("Purchase","Purchase Order")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseOrder",className:m("/PurchaseOrder")?"active":"",children:"Purchase Order"})}),a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{style:{cursor:"pointer"},className:["/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(v=>m(v))||e.purchasereport?"active subdrop":"",onClick:v=>{v.preventDefault(),p("purchasereport")},children:["Purchase Report ",a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:["/PurchaseIndentsummary","/PurchaseQuotationsDisplay","/PurchaseContractsummary","/PurchaseOrderList"].some(v=>m(v))||e.purchasereport?"block":"none"},children:[h("Purchase","Purchase Indent List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseIndentsummary",className:m("/PurchaseIndentsummary")?"active":"",children:"Purchase Enquiry List"})}),h("Purchase","Purchase Quotations List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseQuotationsDisplay",className:m("/PurchaseQuotationsDisplay")?"active":"",children:"Purchase Quotations List"})}),h("Purchase","Purchase Contract List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseContractsummary",className:m("/PurchaseContractsummary")?"active":"",children:"Purchase Contract List"})}),h("Purchase","Purchase Order List")&&a.jsx("li",{children:a.jsx("a",{href:"/PurchaseOrderList",className:m("/PurchaseOrderList")?"active":"",children:"Purchase Order List"})})]})]})]})]})})}),u("Sales")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/SalesEnquiry","/SalesQuotation","/SalesContract","/SalesOrder","/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(v=>m(v))||e.sales?"active subdrop":"",onClick:v=>{v.preventDefault(),p("sales")},children:[a.jsx("i",{className:"ti ti-shopping-cart-dollar"}),a.jsx("span",{children:"Sales"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.sales?"block":"none"},children:[h("Sales","Sales Indent")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesEnquiry",className:m("/SalesEnquiry")?"active":"",children:"Sales Enquiry"})}),h("Sales","Sales Quotation Form")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesQuotation",className:m("/SalesQuotation")?"active":"",children:"Sales Quotation"})}),h("Sales","Sales Contract")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesContract",className:m("/SalesContract")?"active":"",children:"Sales Contract"})}),h("Sales","Sales Order")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesOrder",className:m("/SalesOrder")?"active":"",children:"Sales Order"})}),h("Sales","Sales Delivery")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesDelivery",className:m("/SalesDelivery")?"active":"",children:"Sales Delivery"})}),a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{style:{cursor:"pointer"},className:["/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(v=>m(v))||e.salesreport?"active subdrop":"",onClick:v=>{v.preventDefault(),p("salesreport")},children:["Sales Report ",a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:["/SalesEnquiryList","/SalesQuotationList","/SalesContractsummary","/SalesOrderList"].some(v=>m(v))||e.salesreport?"block":"none"},children:[h("Sales","Sales Indent List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesEnquiryList",className:m("/SalesEnquiryList")?"active":"",children:"Sales Enquiry List"})}),h("Sales","Sales Quotations List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesQuotationList",className:m("/SalesQuotationList")?"active":"",children:"Sales Quotations List"})}),h("Sales","Sales Contract List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesContractsummary",className:m("/SalesContractsummary")?"active":"",children:"Sales Contract List"})}),h("Sales","Sales Order List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesOrderList",className:m("/SalesOrderList")?"active":"",children:"Sales Order List"})}),h("Sales","Sales Delivery List")&&a.jsx("li",{children:a.jsx("a",{href:"/SalesDeliveryList",className:m("/SalesDeliveryList")?"active":"",children:"Sales Delivery List"})})]})]})]})]})})}),u("Inventory")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/MatrialReceipt","/MatrialIssue","/MatrialTransfer","/StockListERP","/MatrialReceiptList","/MatrialTransferList"].some(v=>m(v))||e.inventory?"active subdrop":"",onClick:v=>{v.preventDefault(),p("inventory")},children:[a.jsx("i",{className:"ti ti-box"}),a.jsx("span",{children:"Inventory"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.inventory?"block":"none"},children:[h("Inventory","Material Receipt")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialReceipt",className:m("/MatrialReceipt")?"active":"",children:"Material Receipt"})}),h("Inventory","Material Issue")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialIssue",className:m("/MatrialIssue")?"active":"",children:"Material Issue"})}),h("Inventory","Material Transfer")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialTransfer",className:m("/MatrialTransfer")?"active":"",children:"Delivery Challan"})}),h("Inventory","Stock List")&&a.jsx("li",{children:a.jsx("a",{href:"/StockListERP",className:m("/StockListERP")?"active":"",children:"Stock List"})}),a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{style:{cursor:"pointer"},className:["/MatrialReceiptList","/MaterialIssueList"].some(v=>m(v))||e.inventoryreport?"active subdrop":"",onClick:v=>{v.preventDefault(),p("inventoryreport")},children:["Inventory Report ",a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:["/MatrialReceiptList","/MaterialIssueList"].some(v=>m(v))||e.inventoryreport?"block":"none"},children:[h("Inventory","Material Receipt List")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialReceiptList",className:m("/MatrialReceiptList")?"active":"",children:"Material Receipt List"})}),h("Inventory","Material Issue List")&&a.jsx("li",{children:a.jsx("a",{href:"/MaterialIssueList",className:m("/MaterialIssueList")?"active":"",children:"Material Issue List"})}),h("Inventory","Material Issue List")&&a.jsx("li",{children:a.jsx("a",{href:"/MatrialTransferList",className:m("/MatrialTransferList")?"active":"",children:"Material Transfer List"})})]})]})]})]})})}),u("Invoice")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("invoice")},className:["/InvoiceForm","/InvoiceList","/BillingForm","/BillingDisplay"].some(v=>m(v))||e.invoice?"active subdrop":"",children:[a.jsx("i",{className:"ti ti-file-dollar"}),a.jsx("span",{children:"Invoice"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.invoice?"block":"none"},children:[a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("vendorBilling")},className:["/InvoiceForm","/InvoiceList"].some(v=>m(v))||e.vendorBilling?"active subdrop":"",children:[a.jsx("span",{children:"Vendor Invoice"}),a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:e.vendorBilling?"block":"none"},children:[h("Invoice","Invoice Form")&&a.jsx("li",{children:a.jsx("a",{href:"/InvoiceForm",className:m("/InvoiceForm")?"active":"",children:"Vendor Invoice Creation"})}),h("Invoice","Invoice List")&&a.jsx("li",{children:a.jsx("a",{href:"/InvoiceList",className:m("/InvoiceList")?"active":"",children:"Vendor Invoice List"})})]})]}),u("Billing")&&a.jsxs("li",{className:"submenu submenu-two",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("billing")},className:["/BillingForm","/BillingDisplay"].some(v=>m(v))||e.billing?"active subdrop":"",children:[a.jsx("span",{children:"Customer Invoice"}),a.jsx("span",{className:"menu-arrow inside-submenu"})]}),a.jsxs("ul",{style:{display:e.billing?"block":"none"},children:[h("Billing","Billing Form")&&a.jsx("li",{children:a.jsx("a",{href:"/BillingForm",className:m("/BillingForm")?"active":"",children:"Customer Invoice Creation"})}),h("Billing","Billing List")&&a.jsx("li",{children:a.jsx("a",{href:"/BillingDisplay",className:m("/BillingDisplay")?"active":"",children:"Customer Invoice List"})})]})]})]})]})})}),u("Accounts")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",onClick:v=>{v.preventDefault(),p("accounts")},className:["/gst","/Ledger","/PaymentDisplay"].some(v=>m(v))||e.accounts?"active subdrop":"",children:[a.jsx("i",{className:"ti ti-credit-card"}),a.jsx("span",{children:"Accounts"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.accounts?"block":"none"},children:[h("Accounts","GST")&&a.jsx("li",{children:a.jsx("a",{href:"/gst",className:m("/gst")?"active":"",children:"GST"})}),h("Accounts","Ledger")&&a.jsx("li",{children:a.jsx("a",{href:"/Ledger",className:m("/Ledger")?"active":"",children:"Ledger"})}),h("Accounts","Payments")&&a.jsx("li",{children:a.jsx("a",{href:"/PaymentDisplay",className:m("/PaymentDisplay")?"active":"",children:"Payments"})})]})]})})}),u("Dashboard")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsx("li",{className:"submenu",children:a.jsxs("a",{target:"_blank",href:"https://ewaybillgst.gov.in/login.aspx",children:[a.jsx("i",{className:"ti ti-smart-home"}),a.jsx("span",{children:"E-Way Bill"})]})})})}),u("CRM")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/contacts","/leads","/proposals","/sources","/lost-reason","/contact-stage","/industry","/calls"].some(v=>m(v))||e.crm?"active subdrop":"",onClick:v=>{v.preventDefault(),p("crm")},children:[a.jsx("i",{className:"ti ti-address-book"}),a.jsx("span",{children:"CRM"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.crm?"block":"none"},children:[h("CRM","Contacts List")&&a.jsx("li",{children:a.jsx("a",{href:"/contacts",className:m("/contacts")?"active":"",children:"Contacts List"})}),h("CRM","Leads")&&a.jsx("li",{children:a.jsx("a",{href:"/leads",className:m("/leads")?"active":"",children:"Leads"})}),h("CRM","Proposals")&&a.jsx("li",{children:a.jsx("a",{href:"/proposals",className:m("/proposals")?"active":"",children:"Proposals"})}),h("CRM","Sources")&&a.jsx("li",{children:a.jsx("a",{href:"/sources",className:m("/sources")?"active":"",children:"Sources"})}),h("CRM","Lost Reason")&&a.jsx("li",{children:a.jsx("a",{href:"/lost-reason",className:m("/lost-reason")?"active":"",children:"Lost Reason"})}),h("CRM","Contact Stage")&&a.jsx("li",{children:a.jsx("a",{href:"/contact-stage",className:m("/contact-stage")?"active":"",children:"Contact Stage"})}),h("CRM","Industry")&&a.jsx("li",{children:a.jsx("a",{href:"/industry",className:m("/industry")?"active":"",children:"Industry"})}),h("CRM","Calls")&&a.jsx("li",{children:a.jsx("a",{href:"/calls",className:m("/calls")?"active":"",children:"Calls"})})]})]})})}),u("Project Management")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/projects","/tasks","/milestones","/time-entries"].some(v=>m(v))||e.project?"active subdrop":"",onClick:v=>{v.preventDefault(),p("project")},children:[a.jsx("i",{className:"ti ti-briefcase"}),a.jsx("span",{children:"Project Management"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.project?"block":"none"},children:[h("Project Management","Projects")&&a.jsx("li",{children:a.jsx("a",{href:"/projects",className:m("/projects")?"active":"",children:"Projects"})}),h("Project Management","Tasks")&&a.jsx("li",{children:a.jsx("a",{href:"/tasks",className:m("/tasks")?"active":"",children:"Tasks"})}),h("Project Management","Milestones")&&a.jsx("li",{children:a.jsx("a",{href:"/milestones",className:m("/milestones")?"active":"",children:"Milestones"})}),h("Project Management","Time Entries")&&a.jsx("li",{children:a.jsx("a",{href:"/time-entries",className:m("/time-entries")?"active":"",children:"Time Entries"})})]})]})})}),u("Campaigns")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/campaigns","/analytics"].some(v=>m(v))||e.campaigns?"active subdrop":"",onClick:v=>{v.preventDefault(),p("campaigns")},children:[a.jsx("i",{className:"ti ti-brand-campaignmonitor"}),"  ",a.jsx("span",{children:"Campaigns"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.campaigns?"block":"none"},children:[h("Campaigns","Campaigns")&&a.jsx("li",{children:a.jsx("a",{href:"/campaigns",className:m("/campaigns")?"active":"",children:"Campaigns"})}),h("Campaigns","Analytics")&&a.jsx("li",{children:a.jsx("a",{href:"/analytics",className:m("/analytics")?"active":"",children:"Analytics"})})]})]})})}),u("HRMS")&&a.jsx("li",{children:a.jsx("ul",{children:a.jsxs("li",{className:"submenu",children:[a.jsxs("a",{href:"#",className:["/designation","/departments","/employee","/leaverequest","/leavemanagement","/payroll","/attendancereg","/attendancetaking","/attendancereport"].some(v=>m(v))||e.hrms?"active subdrop":"",onClick:v=>{v.preventDefault(),p("hrms")},children:[a.jsx("i",{className:"ti ti-user-circle"}),a.jsx("span",{children:"HRMS"}),a.jsx("span",{className:"menu-arrow"})]}),a.jsxs("ul",{style:{display:e.hrms?"block":"none"},children:[h("HRMS","Designation")&&a.jsx("li",{children:a.jsx("a",{href:"/designation",className:m("/designation")?"active":"",children:"Designation"})}),h("HRMS","Department")&&a.jsx("li",{children:a.jsx("a",{href:"/departments",className:m("/departments")?"active":"",children:"Departments"})}),h("HRMS","Employee")&&a.jsx("li",{children:a.jsx("a",{href:"/employee",className:m("/employee")?"active":"",children:"Employee"})}),h("HRMS","LeaveRequests")&&a.jsx("li",{children:a.jsx("a",{href:"/leaverequest",className:m("/leaverequest")?"active":"",children:"Leave Request"})}),h("HRMS","LeaveRequestManagement")&&a.jsx("li",{children:a.jsx("a",{href:"/leavemanagement",className:m("/leavemanagement")?"active":"",children:"Leave Management"})}),h("HRMS","Payroll")&&a.jsx("li",{children:a.jsx("a",{href:"/payroll",className:m("/payroll")?"active":"",children:"Payroll"})}),h("HRMS","AttendanceRegister")&&a.jsx("li",{children:a.jsx("a",{href:"/attendancereg",className:m("/attendancereg")?"active":"",children:"Attendance Register"})}),h("HRMS","AttendanceTaking")&&a.jsx("li",{children:a.jsx("a",{href:"/attendancetaking",className:m("/attendancetaking")?"active":"",children:"Attendance Taking"})}),h("HRMS","AttendanceReports")&&a.jsx("li",{children:a.jsx("a",{href:"/attendancereport",className:m("/attendancereport")?"active":"",children:"Attendance Reports"})})]})]})})}),r.length===0&&a.jsx("li",{className:"menu-title",children:a.jsxs("span",{children:["No permissions assigned for role: ",o]})})]})})})]})})};function xee({toggleSidebar:e}){Xu();const[t,r]=N.useState(!1),[n,s]=N.useState(!1),i=JSON.parse(localStorage.getItem("user"));console.log("user",i);const o=i?.roles?.map(h=>h.roleName)||[],[l,c]=N.useState(()=>localStorage.getItem("activeRole")||o[0]||"");N.useEffect(()=>{!localStorage.getItem("activeRole")&&o.length>0&&(localStorage.setItem("activeRole",i.roles[0]?.roleName||""),c(o[0]))},[o]),console.log("Active Role:",l);const d=h=>{const m=h.target.value;c(m),localStorage.setItem("activeRole",i.roles[0]?.roleName||"")},u=()=>{localStorage.removeItem("user"),localStorage.removeItem("activeRole"),localStorage.removeItem("openSubmenus"),window.location.href="/login"};return a.jsx("div",{className:"header",children:a.jsxs("div",{className:"main-header",children:[a.jsxs("div",{className:"header-left",children:[a.jsx("a",{href:"index.html",className:"logo",children:a.jsx("h2",{children:"Jyothi Cloud Erp"})}),a.jsx("a",{href:"index.html",className:"dark-logo",children:a.jsx("h2",{children:"Jyothi Cloud Erp"})})]}),a.jsx("a",{id:"mobile_btn",className:"mobile_btn",onClick:h=>{h.preventDefault(),e()},children:a.jsxs("span",{className:"bar-icon",children:[a.jsx("span",{}),a.jsx("span",{}),a.jsx("span",{})]})}),a.jsx("div",{className:"header-user",children:a.jsxs("div",{className:"nav user-menu nav-list",children:[a.jsx("div",{className:"me-auto d-flex align-items-center",id:"header-search"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsxs("div",{className:"me-1 notification_item",children:[a.jsxs("a",{href:"#",className:"btn btn-menubar position-relative me-1",id:"notification_popup","data-bs-toggle":"dropdown",children:[a.jsx("i",{className:"ti ti-bell"}),a.jsx("span",{className:"notification-status-dot"})]}),a.jsxs("div",{className:"dropdown-menu dropdown-menu-end notification-dropdown p-4",children:[a.jsxs("div",{className:"d-flex align-items-center justify-content-between border-bottom p-0 pb-3 mb-3",children:[a.jsx("h4",{className:"notification-title",children:"Notifications (2)"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("a",{href:"#",className:"text-primary fs-15 me-3 lh-1",children:"Mark all as read"}),a.jsxs("div",{className:"dropdown",children:[a.jsxs("a",{href:"javascript:void(0);",className:"bg-white dropdown-toggle","data-bs-toggle":"dropdown",children:[a.jsx("i",{className:"ti ti-calendar-due me-1"}),"Today"]}),a.jsxs("ul",{className:"dropdown-menu mt-2 p-3",children:[a.jsx("li",{children:a.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"This Week"})}),a.jsx("li",{children:a.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"Last Week"})}),a.jsx("li",{children:a.jsx("a",{href:"javascript:void(0);",className:"dropdown-item rounded-1",children:"Last Month"})})]})]})]})]}),a.jsx("div",{className:"noti-content",children:a.jsxs("div",{className:"d-flex flex-column",children:[a.jsx("div",{className:"border-bottom mb-3 pb-3",children:a.jsx("a",{href:"activity.html",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-27.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"text-dark fw-semibold",children:"Shawn"})," performance in Math is below the threshold."]}),a.jsx("span",{children:"Just Now"})]})]})})}),a.jsx("div",{className:"border-bottom mb-3 pb-3",children:a.jsx("a",{href:"activity.html",className:"pb-0",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-23.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("span",{className:"text-dark fw-semibold",children:"Sylvia"})," added appointment on 02:00 PM"]}),a.jsx("span",{children:"10 mins ago"}),a.jsxs("div",{className:"d-flex justify-content-start align-items-center mt-1",children:[a.jsx("span",{className:"btn btn-light btn-sm me-2",children:"Deny"}),a.jsx("span",{className:"btn btn-primary btn-sm",children:"Approve"})]})]})]})})}),a.jsx("div",{className:"border-bottom mb-3 pb-3",children:a.jsx("a",{href:"activity.html",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-25.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:["New student record ",a.jsx("span",{className:"text-dark fw-semibold",children:" George"})," is created by ",a.jsx("span",{className:"text-dark fw-semibold",children:"Teressa"})]}),a.jsx("span",{children:"2 hrs ago"})]})]})})}),a.jsx("div",{className:"border-0 mb-3 pb-0",children:a.jsx("a",{href:"activity.html",children:a.jsxs("div",{className:"d-flex",children:[a.jsx("span",{className:"avatar avatar-lg me-2 flex-shrink-0",children:a.jsx("img",{src:"assets/img/profiles/avatar-01.jpg",alt:"Profile"})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsxs("p",{className:"mb-1",children:["A new teacher record for ",a.jsx("span",{className:"text-dark fw-semibold",children:"Elisa"})," "]}),a.jsx("span",{children:"09:45 AM"})]})]})})})]})}),a.jsxs("div",{className:"d-flex p-0",children:[a.jsx("a",{href:"#",className:"btn btn-light w-100 me-2",children:"Cancel"}),a.jsx("a",{href:"activity.html",className:"btn btn-primary w-100",children:"View All"})]})]})]}),a.jsxs("div",{className:"dropdown profile-dropdown",children:[a.jsx("a",{href:"javascript:void(0);",className:"dropdown-toggle d-flex align-items-center","data-bs-toggle":"dropdown",children:a.jsx("span",{className:"avatar avatar-sm online",children:a.jsx("img",{src:"assets/img/profiles/avatar-12.jpg",alt:"Img",className:"img-fluid rounded-circle"})})}),a.jsx("div",{className:"dropdown-menu shadow-none",children:a.jsxs("div",{className:"card mb-0",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{className:"avatar avatar-lg me-2 avatar-rounded",children:a.jsx("img",{src:"assets/img/profiles/avatar-12.jpg",alt:"img"})}),a.jsxs("div",{children:[a.jsx("h5",{className:"mb-0",children:i?.username||"User"}),a.jsxs("p",{className:"fs-12 fw-medium mb-0",children:["Active Role: ",a.jsx("strong",{children:l})," "]})]})]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",children:[a.jsx("label",{className:"mb-1 fw-medium",children:"Switch Role"}),a.jsx("select",{className:"form-select form-select-sm",value:l,onChange:d,children:o.map(h=>a.jsx("option",{value:h,children:h},h))})]}),a.jsxs("a",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",href:"/profile",children:[a.jsx("i",{className:"isax isax-profile-circle me-2"}),"Profile Settings"]}),a.jsxs("a",{className:"dropdown-item d-inline-flex align-items-center p-0 py-2",href:"/reports",children:[a.jsx("i",{className:"isax isax-document-text me-2"}),"Reports"]}),a.jsxs("div",{className:"form-check form-switch form-check-reverse d-flex align-items-center justify-content-between dropdown-item mb-0",children:[a.jsxs("label",{className:"form-check-label",htmlFor:"notify",children:[a.jsx("i",{className:"isax isax-notification me-2"}),"Notifications"]}),a.jsx("input",{className:"form-check-input",type:"checkbox",id:"notify"})]})]}),a.jsx("div",{className:"card-footer",children:a.jsxs("button",{className:"dropdown-item logout d-flex align-items-center",onClick:u,style:{border:"none",background:"none",width:"100%",textAlign:"left"},children:[a.jsx("i",{className:"isax isax-logout me-2"}),"Sign Out"]})})]})})]})]})]})}),a.jsxs("div",{className:"dropdown mobile-user-menu",children:[a.jsx("a",{href:"javascript:void(0);",className:"nav-link dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:a.jsx("i",{className:"fa fa-ellipsis-v"})}),a.jsxs("div",{className:"dropdown-menu dropdown-menu-end",children:[a.jsx("a",{className:"dropdown-item",href:"profile.html",children:"My Profile"}),a.jsx("a",{className:"dropdown-item",href:"profile-settings.html",children:"Settings"}),a.jsx("a",{className:"dropdown-item",onClick:u,children:"Logout"})]})]})]})})}const vee=({children:e})=>(()=>{const r=localStorage.getItem("user");return r&&r!=="null"&&r!=="undefined"})()?e:a.jsx(rJ,{to:"/login",replace:!0});function T9(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=T9(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function pa(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=T9(e))&&(n&&(n+=" "),n+=t);return n}var gk={},bk={},eM;function gee(){return eM||(eM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t}(bk)),bk}var yk={},tM;function I9(){return tM||(tM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t}(yk)),yk}var jk={},rM;function P9(){return rM||(rM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="string"||typeof r=="symbol"?r:Object.is(r?.valueOf?.(),-0)?"-0":String(r)}e.toKey=t}(jk)),jk}var Nk={},aM;function P3(){return aM||(aM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],s=r.length;if(s===0)return n;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<s;){const d=r[i];l?d==="\\"&&i+1<s?(i++,o+=r[i]):d===l?l="":o+=d:c?d==='"'||d==="'"?l=d:d==="]"?(c=!1,n.push(o),o=""):o+=d:d==="["?(c=!0,o&&(n.push(o),o="")):d==="."?o&&(n.push(o),o=""):o+=d,i++}return o&&n.push(o),n}e.toPath=t}(Nk)),Nk}var nM;function O3(){return nM||(nM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=gee(),r=I9(),n=P9(),s=P3();function i(l,c,d){if(l==null)return d;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?r.isDeepKey(c)?i(l,s.toPath(c),d):d:u}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const u=l[c];return u===void 0?d:u}default:{if(Array.isArray(c))return o(l,c,d);if(Object.is(c?.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return d;const u=l[c];return u===void 0?d:u}}}function o(l,c,d){if(c.length===0)return d;let u=l;for(let h=0;h<c.length;h++){if(u==null||t.isUnsafeProperty(c[h]))return d;u=u[c[h]]}return u===void 0?d:u}e.get=i}(gk)),gk}var wk,sM;function bee(){return sM||(sM=1,wk=O3().get),wk}var yee=bee();const gx=Yu(yee);var Sk={exports:{}},Sn={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iM;function jee(){if(iM)return Sn;iM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),p=Symbol.for("react.client.reference");function v(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case e:switch(g=g.type,g){case r:case s:case n:case c:case d:case m:return g;default:switch(g=g&&g.$$typeof,g){case o:case l:case h:case u:return g;case i:return g;default:return b}}case t:return b}}}return Sn.ContextConsumer=i,Sn.ContextProvider=o,Sn.Element=e,Sn.ForwardRef=l,Sn.Fragment=r,Sn.Lazy=h,Sn.Memo=u,Sn.Portal=t,Sn.Profiler=s,Sn.StrictMode=n,Sn.Suspense=c,Sn.SuspenseList=d,Sn.isContextConsumer=function(g){return v(g)===i},Sn.isContextProvider=function(g){return v(g)===o},Sn.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},Sn.isForwardRef=function(g){return v(g)===l},Sn.isFragment=function(g){return v(g)===r},Sn.isLazy=function(g){return v(g)===h},Sn.isMemo=function(g){return v(g)===u},Sn.isPortal=function(g){return v(g)===t},Sn.isProfiler=function(g){return v(g)===s},Sn.isStrictMode=function(g){return v(g)===n},Sn.isSuspense=function(g){return v(g)===c},Sn.isSuspenseList=function(g){return v(g)===d},Sn.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===s||g===n||g===c||g===d||typeof g=="object"&&g!==null&&(g.$$typeof===h||g.$$typeof===u||g.$$typeof===o||g.$$typeof===i||g.$$typeof===l||g.$$typeof===p||g.getModuleId!==void 0)},Sn.typeOf=v,Sn}var oM;function Nee(){return oM||(oM=1,Sk.exports=jee()),Sk.exports}var wee=Nee(),$c=e=>e===0?0:e>0?1:-1,ac=e=>typeof e=="number"&&e!=+e,Hp=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Ir=e=>(typeof e=="number"||e instanceof Number)&&!ac(e),zu=e=>Ir(e)||typeof e=="string",See=0,Jb=e=>{var t=++See;return"".concat(e||"").concat(t)},Fm=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Ir(t)&&typeof t!="string")return n;var i;if(Hp(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return ac(i)&&(i=n),s&&r!=null&&i>r&&(i=r),i},O9=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[e[n]])r[e[n]]=!0;else return!0;return!1};function _v(e,t,r){return Ir(e)&&Ir(t)?e+r*(t-e):t}function M9(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):gx(n,t))===r)}var ri=e=>e===null||typeof e>"u",$y=e=>ri(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),Cee=["viewBox","children"],kee=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],lM=["points","pathLength"],Ck={svg:Cee,polygon:lM,polyline:lM},M3=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],R3=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(N.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(s=>{M3.includes(s)&&(n[s]=i=>r[s](r,i))}),n},_ee=(e,t,r)=>n=>(e(t,r,n),null),R9=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(s=>{var i=e[s];M3.includes(s)&&typeof i=="function"&&(n||(n={}),n[s]=_ee(i,t,r))}),n},cM=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",dM=null,kk=null,F9=e=>{if(e===dM&&Array.isArray(kk))return kk;var t=[];return N.Children.forEach(e,r=>{ri(r)||(wee.isFragment(r)?t=t.concat(F9(r.props.children)):t.push(r))}),kk=t,dM=e,t};function L9(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(s=>cM(s)):n=[cM(t)],F9(e).forEach(s=>{var i=gx(s,"type.displayName")||gx(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}var B9=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,Eee=(e,t,r,n)=>{var s,i=(s=n&&Ck?.[n])!==null&&s!==void 0?s:[];return t.startsWith("data-")||typeof e!="function"&&(n&&i.includes(t)||kee.includes(t))||r&&M3.includes(t)},Dn=(e,t,r)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(N.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var s={};return Object.keys(n).forEach(i=>{var o;Eee((o=n)===null||o===void 0?void 0:o[i],i,t,r)&&(s[i]=n[i])}),s},Dee=["children","width","height","viewBox","className","style","title","desc"];function jD(){return jD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jD.apply(null,arguments)}function Aee(e,t){if(e==null)return{};var r,n,s=Tee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Tee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var F3=N.forwardRef((e,t)=>{var{children:r,width:n,height:s,viewBox:i,className:o,style:l,title:c,desc:d}=e,u=Aee(e,Dee),h=i||{width:n,height:s,x:0,y:0},m=pa("recharts-surface",o);return N.createElement("svg",jD({},Dn(u,!0,"svg"),{className:m,width:n,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),N.createElement("title",null,c),N.createElement("desc",null,d),r)}),Iee=["children","className"];function ND(){return ND=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ND.apply(null,arguments)}function Pee(e,t){if(e==null)return{};var r,n,s=Oee(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Oee(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var tf=N.forwardRef((e,t)=>{var{children:r,className:n}=e,s=Pee(e,Iee),i=pa("recharts-layer",n);return N.createElement("g",ND({className:i},Dn(s,!0),{ref:t}),r)}),U9=N.createContext(null),Mee=()=>N.useContext(U9);function On(e){return function(){return e}}const $9=Math.cos,WN=Math.sin,Bd=Math.sqrt,GN=Math.PI,L2=2*GN,wD=Math.PI,SD=2*wD,Pp=1e-6,Ree=SD-Pp;function V9(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Fee(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return V9;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class Lee{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?V9:Fee(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,d=s-r,u=o-t,h=l-r,m=u*u+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>Pp)if(!(Math.abs(h*c-d*u)>Pp)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,v=s-l,g=c*c+d*d,b=p*p+v*v,y=Math.sqrt(g),C=Math.sqrt(m),w=i*Math.tan((wD-Math.acos((g+m-b)/(2*y*C)))/2),k=w/C,S=w/y;Math.abs(k-1)>Pp&&this._append`L${t+k*u},${r+k*h}`,this._append`A${i},${i},0,0,${+(h*p>u*v)},${this._x1=t+S*c},${this._y1=r+S*d}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),d=t+l,u=r+c,h=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Pp||Math.abs(this._y1-u)>Pp)&&this._append`L${d},${u}`,n&&(m<0&&(m=m%SD+SD),m>Ree?this._append`A${n},${n},0,1,${h},${t-l},${r-c}A${n},${n},0,1,${h},${this._x1=d},${this._y1=u}`:m>Pp&&this._append`A${n},${n},0,${+(m>=wD)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function L3(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Lee(t)}function B3(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function q9(e){this._context=e}q9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function B2(e){return new q9(e)}function z9(e){return e[0]}function H9(e){return e[1]}function W9(e,t){var r=On(!0),n=null,s=B2,i=null,o=L3(l);e=typeof e=="function"?e:e===void 0?z9:On(e),t=typeof t=="function"?t:t===void 0?H9:On(t);function l(c){var d,u=(c=B3(c)).length,h,m=!1,p;for(n==null&&(i=s(p=o())),d=0;d<=u;++d)!(d<u&&r(h=c[d],d,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(h,d,c),+t(h,d,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:On(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:On(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:On(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function Nj(e,t,r){var n=null,s=On(!0),i=null,o=B2,l=null,c=L3(d);e=typeof e=="function"?e:e===void 0?z9:On(+e),t=typeof t=="function"?t:On(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?H9:On(+r);function d(h){var m,p,v,g=(h=B3(h)).length,b,y=!1,C,w=new Array(g),k=new Array(g);for(i==null&&(l=o(C=c())),m=0;m<=g;++m){if(!(m<g&&s(b=h[m],m,h))===y)if(y=!y)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),v=m-1;v>=p;--v)l.point(w[v],k[v]);l.lineEnd(),l.areaEnd()}y&&(w[m]=+e(b,m,h),k[m]=+t(b,m,h),l.point(n?+n(b,m,h):w[m],r?+r(b,m,h):k[m]))}if(C)return l=null,C+""||null}function u(){return W9().defined(s).curve(o).context(i)}return d.x=function(h){return arguments.length?(e=typeof h=="function"?h:On(+h),n=null,d):e},d.x0=function(h){return arguments.length?(e=typeof h=="function"?h:On(+h),d):e},d.x1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:On(+h),d):n},d.y=function(h){return arguments.length?(t=typeof h=="function"?h:On(+h),r=null,d):t},d.y0=function(h){return arguments.length?(t=typeof h=="function"?h:On(+h),d):t},d.y1=function(h){return arguments.length?(r=h==null?null:typeof h=="function"?h:On(+h),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(n).y(t)},d.defined=function(h){return arguments.length?(s=typeof h=="function"?h:On(!!h),d):s},d.curve=function(h){return arguments.length?(o=h,i!=null&&(l=o(i)),d):o},d.context=function(h){return arguments.length?(h==null?i=l=null:l=o(i=h),d):i},d}class G9{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function Bee(e){return new G9(e,!0)}function Uee(e){return new G9(e,!1)}const U3={draw(e,t){const r=Bd(t/GN);e.moveTo(r,0),e.arc(0,0,r,0,L2)}},$ee={draw(e,t){const r=Bd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Y9=Bd(1/3),Vee=Y9*2,qee={draw(e,t){const r=Bd(t/Vee),n=r*Y9;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},zee={draw(e,t){const r=Bd(t),n=-r/2;e.rect(n,n,r,r)}},Hee=.8908130915292852,K9=WN(GN/10)/WN(7*GN/10),Wee=WN(L2/10)*K9,Gee=-$9(L2/10)*K9,Yee={draw(e,t){const r=Bd(t*Hee),n=Wee*r,s=Gee*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=L2*i/5,l=$9(o),c=WN(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},_k=Bd(3),Kee={draw(e,t){const r=-Bd(t/(_k*3));e.moveTo(0,r*2),e.lineTo(-_k*r,-r),e.lineTo(_k*r,-r),e.closePath()}},Cc=-.5,kc=Bd(3)/2,CD=1/Bd(12),Xee=(CD/2+1)*3,Qee={draw(e,t){const r=Bd(t/Xee),n=r/2,s=r*CD,i=n,o=r*CD+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Cc*n-kc*s,kc*n+Cc*s),e.lineTo(Cc*i-kc*o,kc*i+Cc*o),e.lineTo(Cc*l-kc*c,kc*l+Cc*c),e.lineTo(Cc*n+kc*s,Cc*s-kc*n),e.lineTo(Cc*i+kc*o,Cc*o-kc*i),e.lineTo(Cc*l+kc*c,Cc*c-kc*l),e.closePath()}};function Jee(e,t){let r=null,n=L3(s);e=typeof e=="function"?e:On(e||U3),t=typeof t=="function"?t:On(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:On(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:On(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function YN(){}function KN(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function X9(e){this._context=e}X9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:KN(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:KN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Zee(e){return new X9(e)}function Q9(e){this._context=e}Q9.prototype={areaStart:YN,areaEnd:YN,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:KN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function ete(e){return new Q9(e)}function J9(e){this._context=e}J9.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:KN(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tte(e){return new J9(e)}function Z9(e){this._context=e}Z9.prototype={areaStart:YN,areaEnd:YN,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function rte(e){return new Z9(e)}function uM(e){return e<0?-1:1}function hM(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(uM(i)+uM(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function fM(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Ek(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function XN(e){this._context=e}XN.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ek(this,this._t0,fM(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Ek(this,fM(this,r=hM(this,e,t)),r);break;default:Ek(this,this._t0,r=hM(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function eU(e){this._context=new tU(e)}(eU.prototype=Object.create(XN.prototype)).point=function(e,t){XN.prototype.point.call(this,t,e)};function tU(e){this._context=e}tU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function ate(e){return new XN(e)}function nte(e){return new eU(e)}function rU(e){this._context=e}rU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=mM(e),s=mM(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function mM(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function ste(e){return new rU(e)}function U2(e,t){this._context=e,this._t=t}U2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function ite(e){return new U2(e,.5)}function ote(e){return new U2(e,0)}function lte(e){return new U2(e,1)}function w0(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function kD(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function cte(e,t){return e[t]}function dte(e){const t=[];return t.key=e,t}function ute(){var e=On([]),t=kD,r=w0,n=cte;function s(i){var o=Array.from(e.apply(this,arguments),dte),l,c=o.length,d=-1,u;for(const h of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(h,o[l].key,d,i)]).data=h;for(l=0,u=B3(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:On(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:On(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?kD:typeof i=="function"?i:On(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??w0,s):r},s}function hte(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}w0(e,t)}}function fte(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}w0(e,t)}}function mte(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],h=u[n][1]||0,m=u[n-1][1]||0,p=(h-m)/2,v=0;v<l;++v){var g=e[t[v]],b=g[n][1]||0,y=g[n-1][1]||0;p+=b-y}c+=h,d+=p*h}s[n-1][1]+=s[n-1][0]=r,c&&(r-=d/c)}s[n-1][1]+=s[n-1][0]=r,w0(e,t)}}var pte=["type","size","sizeType"];function _D(){return _D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_D.apply(null,arguments)}function pM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xM(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pM(Object(r),!0).forEach(function(n){xte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xte(e,t,r){return(t=vte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vte(e){var t=gte(e,"string");return typeof t=="symbol"?t:t+""}function gte(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bte(e,t){if(e==null)return{};var r,n,s=yte(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function yte(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aU={symbolCircle:U3,symbolCross:$ee,symbolDiamond:qee,symbolSquare:zee,symbolStar:Yee,symbolTriangle:Kee,symbolWye:Qee},jte=Math.PI/180,Nte=e=>{var t="symbol".concat($y(e));return aU[t]||U3},wte=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*jte;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},Ste=(e,t)=>{aU["symbol".concat($y(e))]=t},nU=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,s=bte(e,pte),i=xM(xM({},s),{},{type:t,size:r,sizeType:n}),o=()=>{var h=Nte(t),m=Jee().type(h).size(wte(r,n,t));return m()},{className:l,cx:c,cy:d}=i,u=Dn(i,!0);return c===+c&&d===+d&&r===+r?N.createElement("path",_D({},u,{className:pa("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:o()})):null};nU.registerSymbol=Ste;function ED(){return ED=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ED.apply(null,arguments)}function vM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Cte(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vM(Object(r),!0).forEach(function(n){$3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vM(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $3(e,t,r){return(t=kte(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kte(e){var t=_te(e,"string");return typeof t=="symbol"?t:t+""}function _te(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _c=32;class V3 extends N.PureComponent{renderIcon(t,r){var{inactiveColor:n}=this.props,s=_c/2,i=_c/6,o=_c/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline")return N.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:t.payload.strokeDasharray,x1:0,y1:s,x2:_c,y2:s,className:"recharts-legend-icon"});if(c==="line")return N.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(s,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(s,`
            H`).concat(_c,"M").concat(2*o,",").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(s),className:"recharts-legend-icon"});if(c==="rect")return N.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(_c/8,"h").concat(_c,"v").concat(_c*3/4,"h").concat(-_c,"z"),className:"recharts-legend-icon"});if(N.isValidElement(t.legendIcon)){var d=Cte({},t);return delete d.legendIcon,N.cloneElement(t.legendIcon,d)}return N.createElement(nU,{fill:l,cx:s,cy:s,size:_c,sizeType:"diameter",type:c})}renderItems(){var{payload:t,iconSize:r,layout:n,formatter:s,inactiveColor:i,iconType:o}=this.props,l={x:0,y:0,width:_c,height:_c},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},d={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((u,h)=>{var m=u.formatter||s,p=pa({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:u.inactive});if(u.type==="none")return null;var v=u.inactive?i:u.color,g=m?m(u.value,u,h):u.value;return N.createElement("li",ED({className:p,style:c,key:"legend-item-".concat(h)},R9(this.props,u,h)),N.createElement(F3,{width:r,height:r,viewBox:l,style:d,"aria-label":"".concat(g," legend icon")},this.renderIcon(u,o)),N.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},g))})}render(){var{payload:t,layout:r,align:n}=this.props;if(!t||!t.length)return null;var s={padding:0,margin:0,textAlign:r==="horizontal"?n:"left"};return N.createElement("ul",{className:"recharts-default-legend",style:s},this.renderItems())}}$3(V3,"displayName","Legend");$3(V3,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var Dk={},Ak={},gM;function Ete(){return gM||(gM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const s=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);s.has(l)||s.set(l,o)}return Array.from(s.values())}e.uniqBy=t}(Ak)),Ak}var Tk={},bM;function sU(){return bM||(bM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t}(Tk)),Tk}var Ik={},Pk={},Ok={},yM;function Dte(){return yM||(yM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t}(Ok)),Ok}var jM;function q3(){return jM||(jM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Dte();function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r}(Pk)),Pk}var Mk={},NM;function Ate(){return NM||(NM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t}(Mk)),Mk}var wM;function Tte(){return wM||(wM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q3(),r=Ate();function n(s){return r.isObjectLike(s)&&t.isArrayLike(s)}e.isArrayLikeObject=n}(Ik)),Ik}var Rk={},Fk={},SM;function Ite(){return SM||(SM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=O3();function r(n){return function(s){return t.get(s,n)}}e.property=r}(Fk)),Fk}var Lk={},Bk={},Uk={},$k={},CM;function iU(){return CM||(CM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t}($k)),$k}var Vk={},kM;function oU(){return kM||(kM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t}(Vk)),Vk}var qk={},_M;function z3(){return _M||(_M=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t}(qk)),qk}var EM;function Pte(){return EM||(EM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H3(),r=iU(),n=oU(),s=z3();function i(h,m,p){return typeof p!="function"?t.isMatch(h,m):o(h,m,function v(g,b,y,C,w,k){const S=p(g,b,y,C,w,k);return S!==void 0?!!S:o(g,b,v,k)},new Map)}function o(h,m,p,v){if(m===h)return!0;switch(typeof m){case"object":return l(h,m,p,v);case"function":return Object.keys(m).length>0?o(h,{...m},p,v):s.eq(h,m);default:return r.isObject(h)?typeof m=="string"?m==="":!0:s.eq(h,m)}}function l(h,m,p,v){if(m==null)return!0;if(Array.isArray(m))return d(h,m,p,v);if(m instanceof Map)return c(h,m,p,v);if(m instanceof Set)return u(h,m,p,v);const g=Object.keys(m);if(h==null)return g.length===0;if(g.length===0)return!0;if(v&&v.has(m))return v.get(m)===h;v&&v.set(m,h);try{for(let b=0;b<g.length;b++){const y=g[b];if(!n.isPrimitive(h)&&!(y in h)||m[y]===void 0&&h[y]!==void 0||m[y]===null&&h[y]!==null||!p(h[y],m[y],y,h,m,v))return!1}return!0}finally{v&&v.delete(m)}}function c(h,m,p,v){if(m.size===0)return!0;if(!(h instanceof Map))return!1;for(const[g,b]of m.entries()){const y=h.get(g);if(p(y,b,g,h,m,v)===!1)return!1}return!0}function d(h,m,p,v){if(m.length===0)return!0;if(!Array.isArray(h))return!1;const g=new Set;for(let b=0;b<m.length;b++){const y=m[b];let C=!1;for(let w=0;w<h.length;w++){if(g.has(w))continue;const k=h[w];let S=!1;if(p(k,y,b,h,m,v)&&(S=!0),S){g.add(w),C=!0;break}}if(!C)return!1}return!0}function u(h,m,p,v){return m.size===0?!0:h instanceof Set?d([...h],[...m],p,v):!1}e.isMatchWith=i,e.isSetMatch=u}(Uk)),Uk}var DM;function H3(){return DM||(DM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Pte();function r(n,s){return t.isMatchWith(n,s,()=>{})}e.isMatch=r}(Bk)),Bk}var zk={},Hk={},Wk={},AM;function lU(){return AM||(AM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t}(Wk)),Wk}var Gk={},TM;function W3(){return TM||(TM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t}(Gk)),Gk}var Yk={},IM;function G3(){return IM||(IM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",s="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",d="[object Set]",u="[object Array]",h="[object Function]",m="[object ArrayBuffer]",p="[object Object]",v="[object Error]",g="[object DataView]",b="[object Uint8Array]",y="[object Uint8ClampedArray]",C="[object Uint16Array]",w="[object Uint32Array]",k="[object BigUint64Array]",S="[object Int8Array]",D="[object Int16Array]",E="[object Int32Array]",T="[object BigInt64Array]",A="[object Float32Array]",L="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=m,e.arrayTag=u,e.bigInt64ArrayTag=T,e.bigUint64ArrayTag=k,e.booleanTag=s,e.dataViewTag=g,e.dateTag=l,e.errorTag=v,e.float32ArrayTag=A,e.float64ArrayTag=L,e.functionTag=h,e.int16ArrayTag=D,e.int32ArrayTag=E,e.int8ArrayTag=S,e.mapTag=c,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=d,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=C,e.uint32ArrayTag=w,e.uint8ArrayTag=b,e.uint8ClampedArrayTag=y}(Yk)),Yk}var Kk={},PM;function Ote(){return PM||(PM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t}(Kk)),Kk}var OM;function cU(){return OM||(OM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lU(),r=W3(),n=G3(),s=oU(),i=Ote();function o(u,h){return l(u,void 0,u,new Map,h)}function l(u,h,m,p=new Map,v=void 0){const g=v?.(u,h,m,p);if(g!=null)return g;if(s.isPrimitive(u))return u;if(p.has(u))return p.get(u);if(Array.isArray(u)){const b=new Array(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,m,p,v);return Object.hasOwn(u,"index")&&(b.index=u.index),Object.hasOwn(u,"input")&&(b.input=u.input),b}if(u instanceof Date)return new Date(u.getTime());if(u instanceof RegExp){const b=new RegExp(u.source,u.flags);return b.lastIndex=u.lastIndex,b}if(u instanceof Map){const b=new Map;p.set(u,b);for(const[y,C]of u)b.set(y,l(C,y,m,p,v));return b}if(u instanceof Set){const b=new Set;p.set(u,b);for(const y of u)b.add(l(y,void 0,m,p,v));return b}if(typeof Buffer<"u"&&Buffer.isBuffer(u))return u.subarray();if(i.isTypedArray(u)){const b=new(Object.getPrototypeOf(u)).constructor(u.length);p.set(u,b);for(let y=0;y<u.length;y++)b[y]=l(u[y],y,m,p,v);return b}if(u instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&u instanceof SharedArrayBuffer)return u.slice(0);if(u instanceof DataView){const b=new DataView(u.buffer.slice(0),u.byteOffset,u.byteLength);return p.set(u,b),c(b,u,m,p,v),b}if(typeof File<"u"&&u instanceof File){const b=new File([u],u.name,{type:u.type});return p.set(u,b),c(b,u,m,p,v),b}if(u instanceof Blob){const b=new Blob([u],{type:u.type});return p.set(u,b),c(b,u,m,p,v),b}if(u instanceof Error){const b=new u.constructor;return p.set(u,b),b.message=u.message,b.name=u.name,b.stack=u.stack,b.cause=u.cause,c(b,u,m,p,v),b}if(typeof u=="object"&&d(u)){const b=Object.create(Object.getPrototypeOf(u));return p.set(u,b),c(b,u,m,p,v),b}return u}function c(u,h,m=u,p,v){const g=[...Object.keys(h),...t.getSymbols(h)];for(let b=0;b<g.length;b++){const y=g[b],C=Object.getOwnPropertyDescriptor(u,y);(C==null||C.writable)&&(u[y]=l(h[y],y,m,p,v))}}function d(u){switch(r.getTag(u)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c}(Hk)),Hk}var MM;function Mte(){return MM||(MM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cU();function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r}(zk)),zk}var RM;function Rte(){return RM||(RM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H3(),r=Mte();function n(s){return s=r.cloneDeep(s),i=>t.isMatch(i,s)}e.matches=n}(Lk)),Lk}var Xk={},Qk={},Jk={},FM;function Fte(){return FM||(FM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=cU(),r=G3();function n(s,i){return t.cloneDeepWith(s,(o,l,c,d)=>{const u=i?.(o,l,c,d);if(u!=null)return u;if(typeof s=="object")switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const h=new s.constructor(s?.valueOf());return t.copyProperties(h,s),h}case r.argumentsTag:{const h={};return t.copyProperties(h,s),h.length=s.length,h[Symbol.iterator]=s[Symbol.iterator],h}default:return}})}e.cloneDeepWith=n}(Jk)),Jk}var LM;function Lte(){return LM||(LM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Fte();function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r}(Qk)),Qk}var Zk={},e_={},BM;function dU(){return BM||(BM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,s=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<s;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r}(e_)),e_}var t_={},UM;function Bte(){return UM||(UM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W3();function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r}(t_)),t_}var $M;function Ute(){return $M||($M=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=I9(),r=dU(),n=Bte(),s=P3();function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&o?.[l]==null?c=s.toPath(l):c=[l],c.length===0)return!1;let d=o;for(let u=0;u<c.length;u++){const h=c[u];if((d==null||!Object.hasOwn(d,h))&&!((Array.isArray(d)||n.isArguments(d))&&r.isIndex(h)&&h<d.length))return!1;d=d[h]}return!0}e.has=i}(Zk)),Zk}var VM;function $te(){return VM||(VM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=H3(),r=P9(),n=Lte(),s=O3(),i=Ute();function o(l,c){switch(typeof l){case"object":{Object.is(l?.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(d){const u=s.get(d,l);return u===void 0?i.has(d,l):c===void 0?u===void 0:t.isMatch(u,c)}}e.matchesProperty=o}(Xk)),Xk}var qM;function Vte(){return qM||(qM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sU(),r=Ite(),n=Rte(),s=$te();function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?s.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i}(Rk)),Rk}var zM;function qte(){return zM||(zM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ete(),r=sU(),n=Tte(),s=Vte();function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),s.iteratee(l)):[]}e.uniqBy=i}(Dk)),Dk}var r_,HM;function zte(){return HM||(HM=1,r_=qte().uniqBy),r_}var Hte=zte();const WM=Yu(Hte);function uU(e,t,r){return t===!0?WM(e,r):typeof t=="function"?WM(e,t):e}var a_={exports:{}},n_={},s_={exports:{}},i_={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GM;function Wte(){if(GM)return i_;GM=1;var e=H0();function t(h,m){return h===m&&(h!==0||1/h===1/m)||h!==h&&m!==m}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,s=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(h,m){var p=m(),v=n({inst:{value:p,getSnapshot:m}}),g=v[0].inst,b=v[1];return i(function(){g.value=p,g.getSnapshot=m,c(g)&&b({inst:g})},[h,p,m]),s(function(){return c(g)&&b({inst:g}),h(function(){c(g)&&b({inst:g})})},[h]),o(p),p}function c(h){var m=h.getSnapshot;h=h.value;try{var p=m();return!r(h,p)}catch{return!0}}function d(h,m){return m()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return i_.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u,i_}var YM;function Gte(){return YM||(YM=1,s_.exports=Wte()),s_.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KM;function Yte(){if(KM)return n_;KM=1;var e=H0(),t=Gte();function r(d,u){return d===u&&(d!==0||1/d===1/u)||d!==d&&u!==u}var n=typeof Object.is=="function"?Object.is:r,s=t.useSyncExternalStore,i=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return n_.useSyncExternalStoreWithSelector=function(d,u,h,m,p){var v=i(null);if(v.current===null){var g={hasValue:!1,value:null};v.current=g}else g=v.current;v=l(function(){function y(D){if(!C){if(C=!0,w=D,D=m(D),p!==void 0&&g.hasValue){var E=g.value;if(p(E,D))return k=E}return k=D}if(E=k,n(w,D))return E;var T=m(D);return p!==void 0&&p(E,T)?(w=D,E):(w=D,k=T)}var C=!1,w,k,S=h===void 0?null:h;return[function(){return y(u())},S===null?void 0:function(){return y(S())}]},[u,h,m,p]);var b=s(d,v[0],v[1]);return o(function(){g.hasValue=!0,g.value=b},[b]),c(b),b},n_}var XM;function Kte(){return XM||(XM=1,a_.exports=Yte()),a_.exports}var Xte=Kte(),Y3=N.createContext(null),Qte=e=>e,Ji=()=>{var e=N.useContext(Y3);return e?e.store.dispatch:Qte},CN=()=>{},Jte=()=>CN,Zte=(e,t)=>e===t;function Xr(e){var t=N.useContext(Y3);return Xte.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Jte,t?t.store.getState:CN,t?t.store.getState:CN,t?e:CN,Zte)}function ere(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function tre(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function rre(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var QM=e=>Array.isArray(e)?e:[e];function are(e){const t=Array.isArray(e[0])?e[0]:e;return rre(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function nre(e,t){const r=[],{length:n}=e;for(let s=0;s<n;s++)r.push(e[s].apply(null,t));return r}var sre=class{constructor(e){this.value=e}deref(){return this.value}},ire=typeof WeakRef<"u"?WeakRef:sre,ore=0,JM=1;function wj(){return{s:ore,v:void 0,o:null,p:null}}function hU(e,t={}){let r=wj();const{resultEqualityCheck:n}=t;let s,i=0;function o(){let l=r;const{length:c}=arguments;for(let h=0,m=c;h<m;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let v=l.o;v===null&&(l.o=v=new WeakMap);const g=v.get(p);g===void 0?(l=wj(),v.set(p,l)):l=g}else{let v=l.p;v===null&&(l.p=v=new Map);const g=v.get(p);g===void 0?(l=wj(),v.set(p,l)):l=g}}const d=l;let u;if(l.s===JM)u=l.v;else if(u=e.apply(null,arguments),i++,n){const h=s?.deref?.()??s;h!=null&&n(h,u)&&(u=h,i!==0&&i--),s=typeof u=="object"&&u!==null||typeof u=="function"?new ire(u):u}return d.s=JM,d.v=u,u}return o.clearCache=()=>{r=wj(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function lre(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...s)=>{let i=0,o=0,l,c={},d=s.pop();typeof d=="object"&&(c=d,d=s.pop()),ere(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const u={...r,...c},{memoize:h,memoizeOptions:m=[],argsMemoize:p=hU,argsMemoizeOptions:v=[]}=u,g=QM(m),b=QM(v),y=are(s),C=h(function(){return i++,d.apply(null,arguments)},...g),w=p(function(){o++;const S=nre(y,arguments);return l=C.apply(null,S),l},...b);return Object.assign(w,{resultFunc:d,memoizedResultFunc:C,dependencies:y,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:h,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var Kt=lre(hU),cre=Object.assign((e,t=Kt)=>{tre(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>cre}),o_={},l_={},c_={},ZM;function dre(){return ZM||(ZM=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,s,i)=>{if(n!==s){const o=t(n),l=t(s);if(o===l&&o===0){if(n<s)return i==="desc"?1:-1;if(n>s)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r}(c_)),c_}var d_={},u_={},eR;function fU(){return eR||(eR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t}(u_)),u_}var tR;function ure(){return tR||(tR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fU(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=s}(d_)),d_}var rR;function hre(){return rR||(rR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dre(),r=ure(),n=P3();function s(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(p=>String(p));const d=(p,v)=>{let g=p;for(let b=0;b<v.length&&g!=null;++b)g=g[v[b]];return g},u=(p,v)=>v==null||p==null?v:typeof p=="object"&&"key"in p?Object.hasOwn(v,p.key)?v[p.key]:d(v,p.path):typeof p=="function"?p(v):Array.isArray(p)?d(v,p):typeof v=="object"?v[p]:v,h=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return i.map(p=>({original:p,criteria:h.map(v=>u(v,p))})).slice().sort((p,v)=>{for(let g=0;g<h.length;g++){const b=t.compareValues(p.criteria[g],v.criteria[g],l[g]);if(b!==0)return b}return 0}).map(p=>p.original)}e.orderBy=s}(l_)),l_}var h_={},aR;function fre(){return aR||(aR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const s=[],i=Math.floor(n),o=(l,c)=>{for(let d=0;d<l.length;d++){const u=l[d];Array.isArray(u)&&c<i?o(u,c+1):s.push(u)}};return o(r,0),s}e.flatten=t}(h_)),h_}var f_={},nR;function mU(){return nR||(nR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dU(),r=q3(),n=iU(),s=z3();function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?s.eq(c[l],o):!1}e.isIterateeCall=i}(f_)),f_}var sR;function mre(){return sR||(sR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hre(),r=fre(),n=mU();function s(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=s}(o_)),o_}var m_,iR;function pre(){return iR||(iR=1,m_=mre().sortBy),m_}var xre=pre();const $2=Yu(xre);var pU=e=>e.legend.settings,vre=e=>e.legend.size,gre=e=>e.legend.payload,bre=Kt([gre,pU],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?$2(n,r):n});function yre(){return Xr(bre)}var Sj=1;function xU(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=N.useState({height:0,left:0,top:0,width:0}),n=N.useCallback(s=>{if(s!=null){var i=s.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Sj||Math.abs(o.left-t.left)>Sj||Math.abs(o.top-t.top)>Sj||Math.abs(o.width-t.width)>Sj)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function qi(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var jre=typeof Symbol=="function"&&Symbol.observable||"@@observable",oR=jre,p_=()=>Math.random().toString(36).substring(7).split("").join("."),Nre={INIT:`@@redux/INIT${p_()}`,REPLACE:`@@redux/REPLACE${p_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${p_()}`},QN=Nre;function K3(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function vU(e,t,r){if(typeof e!="function")throw new Error(qi(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(qi(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(qi(1));return r(vU)(e,t)}let n=e,s=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((b,y)=>{o.set(y,b)}))}function u(){if(c)throw new Error(qi(3));return s}function h(b){if(typeof b!="function")throw new Error(qi(4));if(c)throw new Error(qi(5));let y=!0;d();const C=l++;return o.set(C,b),function(){if(y){if(c)throw new Error(qi(6));y=!1,d(),o.delete(C),i=null}}}function m(b){if(!K3(b))throw new Error(qi(7));if(typeof b.type>"u")throw new Error(qi(8));if(typeof b.type!="string")throw new Error(qi(17));if(c)throw new Error(qi(9));try{c=!0,s=n(s,b)}finally{c=!1}return(i=o).forEach(C=>{C()}),b}function p(b){if(typeof b!="function")throw new Error(qi(10));n=b,m({type:QN.REPLACE})}function v(){const b=h;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(qi(11));function C(){const k=y;k.next&&k.next(u())}return C(),{unsubscribe:b(C)}},[oR](){return this}}}return m({type:QN.INIT}),{dispatch:m,subscribe:h,getState:u,replaceReducer:p,[oR]:v}}function wre(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:QN.INIT})>"u")throw new Error(qi(12));if(typeof r(void 0,{type:QN.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(qi(13))})}function gU(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let s;try{wre(r)}catch(i){s=i}return function(o={},l){if(s)throw s;let c=!1;const d={};for(let u=0;u<n.length;u++){const h=n[u],m=r[h],p=o[h],v=m(p,l);if(typeof v>"u")throw l&&l.type,new Error(qi(14));d[h]=v,c=c||v!==p}return c=c||n.length!==Object.keys(o).length,c?d:o}}function JN(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function Sre(...e){return t=>(r,n)=>{const s=t(r,n);let i=()=>{throw new Error(qi(15))};const o={getState:s.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=JN(...l)(s.dispatch),{...s,dispatch:i}}}function bU(e){return K3(e)&&"type"in e&&typeof e.type=="string"}var yU=Symbol.for("immer-nothing"),lR=Symbol.for("immer-draftable"),nc=Symbol.for("immer-state");function kd(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var S0=Object.getPrototypeOf;function bx(e){return!!e&&!!e[nc]}function rf(e){return e?jU(e)||Array.isArray(e)||!!e[lR]||!!e.constructor?.[lR]||q2(e)||z2(e):!1}var Cre=Object.prototype.constructor.toString();function jU(e){if(!e||typeof e!="object")return!1;const t=S0(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===Cre}function ZN(e,t){V2(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function V2(e){const t=e[nc];return t?t.type_:Array.isArray(e)?1:q2(e)?2:z2(e)?3:0}function DD(e,t){return V2(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function NU(e,t,r){const n=V2(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function kre(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function q2(e){return e instanceof Map}function z2(e){return e instanceof Set}function Op(e){return e.copy_||e.base_}function AD(e,t){if(q2(e))return new Map(e);if(z2(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=jU(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[nc];let s=Reflect.ownKeys(n);for(let i=0;i<s.length;i++){const o=s[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(S0(e),n)}else{const n=S0(e);if(n!==null&&r)return{...e};const s=Object.create(n);return Object.assign(s,e)}}function X3(e,t=!1){return H2(e)||bx(e)||!rf(e)||(V2(e)>1&&(e.set=e.add=e.clear=e.delete=_re),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>X3(n,!0))),e}function _re(){kd(2)}function H2(e){return Object.isFrozen(e)}var Ere={};function yx(e){const t=Ere[e];return t||kd(0,e),t}var Zb;function wU(){return Zb}function Dre(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function cR(e,t){t&&(yx("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function TD(e){ID(e),e.drafts_.forEach(Are),e.drafts_=null}function ID(e){e===Zb&&(Zb=e.parent_)}function dR(e){return Zb=Dre(Zb,e)}function Are(e){const t=e[nc];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function uR(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[nc].modified_&&(TD(t),kd(4)),rf(e)&&(e=ew(t,e),t.parent_||tw(t,e)),t.patches_&&yx("Patches").generateReplacementPatches_(r[nc].base_,e,t.patches_,t.inversePatches_)):e=ew(t,r,[]),TD(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==yU?e:void 0}function ew(e,t,r){if(H2(t))return t;const n=t[nc];if(!n)return ZN(t,(s,i)=>hR(e,n,t,s,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return tw(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const s=n.copy_;let i=s,o=!1;n.type_===3&&(i=new Set(s),s.clear(),o=!0),ZN(i,(l,c)=>hR(e,n,s,l,c,r,o)),tw(e,s,!1),r&&e.patches_&&yx("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function hR(e,t,r,n,s,i,o){if(bx(s)){const l=i&&t&&t.type_!==3&&!DD(t.assigned_,n)?i.concat(n):void 0,c=ew(e,s,l);if(NU(r,n,c),bx(c))e.canAutoFreeze_=!1;else return}else o&&r.add(s);if(rf(s)&&!H2(s)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;ew(e,s),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&tw(e,s)}}function tw(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&X3(t,r)}function Tre(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:wU(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=n,i=Q3;r&&(s=[n],i=ey);const{revoke:o,proxy:l}=Proxy.revocable(s,i);return n.draft_=l,n.revoke_=o,l}var Q3={get(e,t){if(t===nc)return e;const r=Op(e);if(!DD(r,t))return Ire(e,r,t);const n=r[t];return e.finalized_||!rf(n)?n:n===x_(e.base_,t)?(v_(e),e.copy_[t]=OD(n,e)):n},has(e,t){return t in Op(e)},ownKeys(e){return Reflect.ownKeys(Op(e))},set(e,t,r){const n=SU(Op(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const s=x_(Op(e),t),i=s?.[nc];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(kre(r,s)&&(r!==void 0||DD(e.base_,t)))return!0;v_(e),PD(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return x_(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,v_(e),PD(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Op(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){kd(11)},getPrototypeOf(e){return S0(e.base_)},setPrototypeOf(){kd(12)}},ey={};ZN(Q3,(e,t)=>{ey[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ey.deleteProperty=function(e,t){return ey.set.call(this,e,t,void 0)};ey.set=function(e,t,r){return Q3.set.call(this,e[0],t,r,e[0])};function x_(e,t){const r=e[nc];return(r?Op(r):e)[t]}function Ire(e,t,r){const n=SU(t,r);return n?"value"in n?n.value:n.get?.call(e.draft_):void 0}function SU(e,t){if(!(t in e))return;let r=S0(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=S0(r)}}function PD(e){e.modified_||(e.modified_=!0,e.parent_&&PD(e.parent_))}function v_(e){e.copy_||(e.copy_=AD(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Pre=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...d){return o.produce(c,u=>r.call(this,u,...d))}}typeof r!="function"&&kd(6),n!==void 0&&typeof n!="function"&&kd(7);let s;if(rf(t)){const i=dR(this),o=OD(t,void 0);let l=!0;try{s=r(o),l=!1}finally{l?TD(i):ID(i)}return cR(i,n),uR(s,i)}else if(!t||typeof t!="object"){if(s=r(t),s===void 0&&(s=t),s===yU&&(s=void 0),this.autoFreeze_&&X3(s,!0),n){const i=[],o=[];yx("Patches").generateReplacementPatches_(t,s,i,o),n(i,o)}return s}else kd(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,s;return[this.produce(t,r,(o,l)=>{n=o,s=l}),n,s]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){rf(e)||kd(8),bx(e)&&(e=qh(e));const t=dR(this),r=OD(e,void 0);return r[nc].isManual_=!0,ID(t),r}finishDraft(e,t){const r=e&&e[nc];(!r||!r.isManual_)&&kd(9);const{scope_:n}=r;return cR(n,t),uR(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const s=t[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(t=t.slice(r+1));const n=yx("Patches").applyPatches_;return bx(e)?n(e,t):this.produce(e,s=>n(s,t))}};function OD(e,t){const r=q2(e)?yx("MapSet").proxyMap_(e,t):z2(e)?yx("MapSet").proxySet_(e,t):Tre(e,t);return(t?t.scope_:wU()).drafts_.push(r),r}function qh(e){return bx(e)||kd(10,e),CU(e)}function CU(e){if(!rf(e)||H2(e))return e;const t=e[nc];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=AD(e,t.scope_.immer_.useStrictShallowCopy_)}else r=AD(e,!0);return ZN(r,(n,s)=>{NU(r,n,CU(s))}),t&&(t.finalized_=!1),r}var sc=new Pre,kU=sc.produce;sc.produceWithPatches.bind(sc);sc.setAutoFreeze.bind(sc);sc.setUseStrictShallowCopy.bind(sc);sc.applyPatches.bind(sc);sc.createDraft.bind(sc);sc.finishDraft.bind(sc);function _U(e){return({dispatch:r,getState:n})=>s=>i=>typeof i=="function"?i(r,n,e):s(i)}var Ore=_U(),Mre=_U,Rre=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?JN:JN.apply(null,arguments)};function Hc(e,t){function r(...n){if(t){let s=t(...n);if(!s)throw new Error(Jl(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>bU(n)&&n.type===e,r}var EU=class Eb extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Eb.prototype)}static get[Symbol.species](){return Eb}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Eb(...t[0].concat(this)):new Eb(...t.concat(this))}};function fR(e){return rf(e)?kU(e,()=>{}):e}function Cj(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function Fre(e){return typeof e=="boolean"}var Lre=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=t??{};let o=new EU;return r&&(Fre(r)?o.push(Ore):o.push(Mre(r.extraArgument))),o},Bre="RTK_autoBatch",mR=e=>t=>{setTimeout(t,e)},Ure=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let s=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:mR(10):e.type==="callback"?e.queueNotification:mR(e.timeout),d=()=>{o=!1,i&&(i=!1,l.forEach(u=>u()))};return Object.assign({},n,{subscribe(u){const h=()=>s&&u(),m=n.subscribe(h);return l.add(u),()=>{m(),l.delete(u)}},dispatch(u){try{return s=!u?.meta?.[Bre],i=!s,i&&(o||(o=!0,c(d))),n.dispatch(u)}finally{s=!0}}})},$re=e=>function(r){const{autoBatch:n=!0}=r??{};let s=new EU(e);return n&&s.push(Ure(typeof n=="object"?n:void 0)),s};function Vre(e){const t=Lre(),{reducer:r=void 0,middleware:n,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=e||{};let l;if(typeof r=="function")l=r;else if(K3(r))l=gU(r);else throw new Error(Jl(1));let c;typeof n=="function"?c=n(t):c=t();let d=JN;s&&(d=Rre({trace:!1,...typeof s=="object"&&s}));const u=Sre(...c),h=$re(u);let m=typeof o=="function"?o(h):h();const p=d(...m);return vU(l,i,p)}function DU(e){const t={},r=[];let n;const s={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Jl(28));if(l in t)throw new Error(Jl(29));return t[l]=o,s},addMatcher(i,o){return r.push({matcher:i,reducer:o}),s},addDefaultCase(i){return n=i,s}};return e(s),[t,r,n]}function qre(e){return typeof e=="function"}function zre(e,t){let[r,n,s]=DU(t),i;if(qre(e))i=()=>fR(e());else{const l=fR(e);i=()=>l}function o(l=i(),c){let d=[r[c.type],...n.filter(({matcher:u})=>u(c)).map(({reducer:u})=>u)];return d.filter(u=>!!u).length===0&&(d=[s]),d.reduce((u,h)=>{if(h)if(bx(u)){const p=h(u,c);return p===void 0?u:p}else{if(rf(u))return kU(u,m=>h(m,c));{const m=h(u,c);if(m===void 0){if(u===null)return u;throw Error("A case reducer on a non-draftable value must not return undefined")}return m}}return u},l)}return o.getInitialState=i,o}var Hre="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Wre=(e=21)=>{let t="",r=e;for(;r--;)t+=Hre[Math.random()*64|0];return t},Gre=Symbol.for("rtk-slice-createasyncthunk");function Yre(e,t){return`${e}/${t}`}function Kre({creators:e}={}){const t=e?.asyncThunk?.[Gre];return function(n){const{name:s,reducerPath:i=s}=n;if(!s)throw new Error(Jl(11));const o=(typeof n.reducers=="function"?n.reducers(Qre()):n.reducers)||{},l=Object.keys(o),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(w,k){const S=typeof w=="string"?w:w.type;if(!S)throw new Error(Jl(12));if(S in c.sliceCaseReducersByType)throw new Error(Jl(13));return c.sliceCaseReducersByType[S]=k,d},addMatcher(w,k){return c.sliceMatchers.push({matcher:w,reducer:k}),d},exposeAction(w,k){return c.actionCreators[w]=k,d},exposeCaseReducer(w,k){return c.sliceCaseReducersByName[w]=k,d}};l.forEach(w=>{const k=o[w],S={reducerName:w,type:Yre(s,w),createNotation:typeof n.reducers=="function"};Zre(k)?tae(S,k,d,t):Jre(S,k,d)});function u(){const[w={},k=[],S=void 0]=typeof n.extraReducers=="function"?DU(n.extraReducers):[n.extraReducers],D={...w,...c.sliceCaseReducersByType};return zre(n.initialState,E=>{for(let T in D)E.addCase(T,D[T]);for(let T of c.sliceMatchers)E.addMatcher(T.matcher,T.reducer);for(let T of k)E.addMatcher(T.matcher,T.reducer);S&&E.addDefaultCase(S)})}const h=w=>w,m=new Map,p=new WeakMap;let v;function g(w,k){return v||(v=u()),v(w,k)}function b(){return v||(v=u()),v.getInitialState()}function y(w,k=!1){function S(E){let T=E[w];return typeof T>"u"&&k&&(T=Cj(p,S,b)),T}function D(E=h){const T=Cj(m,k,()=>new WeakMap);return Cj(T,E,()=>{const A={};for(const[L,P]of Object.entries(n.selectors??{}))A[L]=Xre(P,E,()=>Cj(p,E,b),k);return A})}return{reducerPath:w,getSelectors:D,get selectors(){return D(S)},selectSlice:S}}const C={name:s,reducer:g,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:b,...y(i),injectInto(w,{reducerPath:k,...S}={}){const D=k??i;return w.inject({reducerPath:D,reducer:g},S),{...C,...y(D,!0)}}};return C}}function Xre(e,t,r,n){function s(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return s.unwrapped=e,s}var Kc=Kre();function Qre(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function Jre({type:e,reducerName:t,createNotation:r},n,s){let i,o;if("reducer"in n){if(r&&!eae(n))throw new Error(Jl(17));i=n.reducer,o=n.prepare}else i=n;s.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?Hc(e,o):Hc(e))}function Zre(e){return e._reducerDefinitionType==="asyncThunk"}function eae(e){return e._reducerDefinitionType==="reducerWithPrepare"}function tae({type:e,reducerName:t},r,n,s){if(!s)throw new Error(Jl(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=r,h=s(e,i,u);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),l&&n.addCase(h.pending,l),c&&n.addCase(h.rejected,c),d&&n.addMatcher(h.settled,d),n.exposeCaseReducer(t,{fulfilled:o||kj,pending:l||kj,rejected:c||kj,settled:d||kj})}function kj(){}var rae="task",AU="listener",TU="completed",J3="cancelled",aae=`task-${J3}`,nae=`task-${TU}`,MD=`${AU}-${J3}`,sae=`${AU}-${TU}`,W2=class{constructor(e){this.code=e,this.message=`${rae} ${J3} (reason: ${e})`}name="TaskAbortError";message},Z3=(e,t)=>{if(typeof e!="function")throw new TypeError(Jl(32))},rw=()=>{},IU=(e,t=rw)=>(e.catch(t),e),PU=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ax=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},nx=e=>{if(e.aborted){const{reason:t}=e;throw new W2(t)}};function OU(e,t){let r=rw;return new Promise((n,s)=>{const i=()=>s(new W2(e.reason));if(e.aborted){i();return}r=PU(e,i),t.finally(()=>r()).then(n,s)}).finally(()=>{r=rw})}var iae=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof W2?"cancelled":"rejected",error:r}}finally{t?.()}},aw=e=>t=>IU(OU(e,t).then(r=>(nx(e),r))),MU=e=>{const t=aw(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:r0}=Object,pR={},G2="listenerMiddleware",oae=(e,t)=>{const r=n=>PU(e,()=>ax(n,e.reason));return(n,s)=>{Z3(n);const i=new AbortController;r(i);const o=iae(async()=>{nx(e),nx(i.signal);const l=await n({pause:aw(i.signal),delay:MU(i.signal),signal:i.signal});return nx(i.signal),l},()=>ax(i,nae));return s?.autoJoin&&t.push(o.catch(rw)),{result:aw(e)(o),cancel(){ax(i,aae)}}}},lae=(e,t)=>{const r=async(n,s)=>{nx(t);let i=()=>{};const l=[new Promise((c,d)=>{let u=e({predicate:n,effect:(h,m)=>{m.unsubscribe(),c([h,m.getState(),m.getOriginalState()])}});i=()=>{u(),d()}})];s!=null&&l.push(new Promise(c=>setTimeout(c,s,null)));try{const c=await OU(t,Promise.race(l));return nx(t),c}finally{i()}};return(n,s)=>IU(r(n,s))},RU=e=>{let{type:t,actionCreator:r,matcher:n,predicate:s,effect:i}=e;if(t)s=Hc(t).match;else if(r)t=r.type,s=r.match;else if(n)s=n;else if(!s)throw new Error(Jl(21));return Z3(i),{predicate:s,type:t,effect:i}},FU=r0(e=>{const{type:t,predicate:r,effect:n}=RU(e);return{id:Wre(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Jl(22))}}},{withTypes:()=>FU}),xR=(e,t)=>{const{type:r,effect:n,predicate:s}=RU(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===s)&&i.effect===n)},RD=e=>{e.pending.forEach(t=>{ax(t,MD)})},cae=e=>()=>{e.forEach(RD),e.clear()},vR=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},LU=r0(Hc(`${G2}/add`),{withTypes:()=>LU}),dae=Hc(`${G2}/removeAll`),BU=r0(Hc(`${G2}/remove`),{withTypes:()=>BU}),uae=(...e)=>{console.error(`${G2}/error`,...e)},Vy=(e={})=>{const t=new Map,{extra:r,onError:n=uae}=e;Z3(n);const s=u=>(u.unsubscribe=()=>t.delete(u.id),t.set(u.id,u),h=>{u.unsubscribe(),h?.cancelActive&&RD(u)}),i=u=>{const h=xR(t,u)??FU(u);return s(h)};r0(i,{withTypes:()=>i});const o=u=>{const h=xR(t,u);return h&&(h.unsubscribe(),u.cancelActive&&RD(h)),!!h};r0(o,{withTypes:()=>o});const l=async(u,h,m,p)=>{const v=new AbortController,g=lae(i,v.signal),b=[];try{u.pending.add(v),await Promise.resolve(u.effect(h,r0({},m,{getOriginalState:p,condition:(y,C)=>g(y,C).then(Boolean),take:g,delay:MU(v.signal),pause:aw(v.signal),extra:r,signal:v.signal,fork:oae(v.signal,b),unsubscribe:u.unsubscribe,subscribe:()=>{t.set(u.id,u)},cancelActiveListeners:()=>{u.pending.forEach((y,C,w)=>{y!==v&&(ax(y,MD),w.delete(y))})},cancel:()=>{ax(v,MD),u.pending.delete(v)},throwIfCancelled:()=>{nx(v.signal)}})))}catch(y){y instanceof W2||vR(n,y,{raisedBy:"effect"})}finally{await Promise.all(b),ax(v,sae),u.pending.delete(v)}},c=cae(t);return{middleware:u=>h=>m=>{if(!bU(m))return h(m);if(LU.match(m))return i(m.payload);if(dae.match(m)){c();return}if(BU.match(m))return o(m.payload);let p=u.getState();const v=()=>{if(p===pR)throw new Error(Jl(23));return p};let g;try{if(g=h(m),t.size>0){const b=u.getState(),y=Array.from(t.values());for(const C of y){let w=!1;try{w=C.predicate(m,b,p)}catch(k){w=!1,vR(n,k,{raisedBy:"predicate"})}w&&l(C,m,u,v)}}}finally{p=pR}return g},startListening:i,stopListening:o,clearListeners:c}};function Jl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hae={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},UU=Kc({name:"chartLayout",initialState:hae,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){e.margin.top=t.payload.top,e.margin.right=t.payload.right,e.margin.bottom=t.payload.bottom,e.margin.left=t.payload.left},setScale(e,t){e.scale=t.payload}}}),{setMargin:fae,setLayout:mae,setChartSize:pae,setScale:xae}=UU.actions,vae=UU.reducer;function gR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gR(Object(r),!0).forEach(function(n){gae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gae(e,t,r){return(t=bae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bae(e){var t=yae(e,"string");return typeof t=="symbol"?t:t+""}function yae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nw=Math.PI/180,jae=e=>e*180/Math.PI,Qi=(e,t,r,n)=>({x:e+Math.cos(-nw*n)*r,y:t+Math.sin(-nw*n)*r}),Nae=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},wae=(e,t)=>{var{x:r,y:n}=e,{x:s,y:i}=t;return Math.sqrt((r-s)**2+(n-i)**2)},Sae=(e,t)=>{var{x:r,y:n}=e,{cx:s,cy:i}=t,o=wae({x:r,y:n},{x:s,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-s)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:jae(c),angleInRadian:c}},Cae=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),s=Math.floor(r/360),i=Math.min(n,s);return{startAngle:t-i*360,endAngle:r-i*360}},kae=(e,t)=>{var{startAngle:r,endAngle:n}=t,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return e+o*360},_ae=(e,t)=>{var{x:r,y:n}=e,{radius:s,angle:i}=Sae({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(s<o||s>l||s===0)return null;var{startAngle:c,endAngle:d}=Cae(t),u=i,h;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;h=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;h=u>=d&&u<=c}return h?bR(bR({},t),{},{radius:s,angle:kae(u,t)}):null};function yR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yR(Object(r),!0).forEach(function(n){Eae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Eae(e,t,r){return(t=Dae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Dae(e){var t=Aae(e,"string");return typeof t=="symbol"?t:t+""}function Aae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zl(e,t,r){return ri(e)||ri(t)?r:zu(t)?gx(e,t,r):typeof t=="function"?t(e):r}var Tae=(e,t,r,n,s)=>{var i,o=-1,l=(i=t?.length)!==null&&i!==void 0?i:0;if(l<=1||e==null)return 0;if(n==="angleAxis"&&s!=null&&Math.abs(Math.abs(s[1]-s[0])-360)<=1e-6)for(var c=0;c<l;c++){var d=c>0?r[c-1].coordinate:r[l-1].coordinate,u=r[c].coordinate,h=c>=l-1?r[0].coordinate:r[c+1].coordinate,m=void 0;if($c(u-d)!==$c(h-u)){var p=[];if($c(h-u)===$c(s[1]-s[0])){m=h;var v=u+s[1]-s[0];p[0]=Math.min(v,(v+d)/2),p[1]=Math.max(v,(v+d)/2)}else{m=d;var g=h+s[1]-s[0];p[0]=Math.min(u,(g+u)/2),p[1]=Math.max(u,(g+u)/2)}var b=[Math.min(u,(m+u)/2),Math.max(u,(m+u)/2)];if(e>b[0]&&e<=b[1]||e>=p[0]&&e<=p[1]){({index:o}=r[c]);break}}else{var y=Math.min(d,h),C=Math.max(d,h);if(e>(y+u)/2&&e<=(C+u)/2){({index:o}=r[c]);break}}}else if(t){for(var w=0;w<l;w++)if(w===0&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w>0&&w<l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2&&e<=(t[w].coordinate+t[w+1].coordinate)/2||w===l-1&&e>(t[w].coordinate+t[w-1].coordinate)/2){({index:o}=t[w]);break}}return o},Iae=(e,t,r)=>{if(t&&r){var{width:n,height:s}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&Ir(e[i]))return Fc(Fc({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&Ir(e[o]))return Fc(Fc({},e),{},{[o]:e[o]+(s||0)})}return e},cf=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",$U=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var s,i,o=e.map(l=>(l.coordinate===t&&(s=!0),l.coordinate===r&&(i=!0),l.coordinate));return s||o.push(t),i||o.push(r),o},VU=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:s,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:d,tickCount:u,ticks:h,niceTicks:m,axisType:p}=e;if(!o)return null;var v=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,g=s==="category"&&o.bandwidth?o.bandwidth()/v:0;if(g=p==="angleAxis"&&i&&i.length>=2?$c(i[0]-i[1])*2*g:g,h||m){var b=(h||m||[]).map((y,C)=>{var w=n?n.indexOf(y):y;return{coordinate:o(w)+g,value:y,offset:g,index:C}});return b.filter(y=>!ac(y.coordinate))}return c&&d?d.map((y,C)=>({coordinate:o(y)+g,value:y,index:C,offset:g})):o.ticks&&u!=null?o.ticks(u).map((y,C)=>({coordinate:o(y)+g,value:y,offset:g,index:C})):o.domain().map((y,C)=>({coordinate:o(y)+g,value:n?n[y]:y,index:C,offset:g}))},jR=1e-4,Pae=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),s=Math.min(n[0],n[1])-jR,i=Math.max(n[0],n[1])+jR,o=e(t[0]),l=e(t[r-1]);(o<s||o>i||l<s||l>i)&&e.domain([t[0],t[r-1]])}},Oae=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0,o=0;o<t;++o){var l=ac(e[o][r][1])?e[o][r][0]:e[o][r][1];l>=0?(e[o][r][0]=s,e[o][r][1]=s+l,s=e[o][r][1]):(e[o][r][0]=i,e[o][r][1]=i+l,i=e[o][r][1])}},Mae=e=>{var t=e.length;if(!(t<=0))for(var r=0,n=e[0].length;r<n;++r)for(var s=0,i=0;i<t;++i){var o=ac(e[i][r][1])?e[i][r][0]:e[i][r][1];o>=0?(e[i][r][0]=s,e[i][r][1]=s+o,s=e[i][r][1]):(e[i][r][0]=0,e[i][r][1]=0)}},Rae={sign:Oae,expand:hte,none:w0,silhouette:fte,wiggle:mte,positive:Mae},Fae=(e,t,r)=>{var n=Rae[r],s=ute().keys(t).value((i,o)=>+Zl(i,o,0)).order(kD).offset(n);return s(e)};function qU(e){return e==null?void 0:String(e)}function NR(e){var{axis:t,ticks:r,bandSize:n,entry:s,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!ri(s[t.dataKey])){var l=M9(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Zl(s,ri(o)?t.dataKey:o);return ri(c)?null:t.scale(c)}var Lae=e=>{var t=e.flat(2).filter(Ir);return[Math.min(...t),Math.max(...t)]},Bae=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],Uae=(e,t,r)=>{if(e!=null)return Bae(Object.keys(e).reduce((n,s)=>{var i=e[s],{stackedData:o}=i,l=o.reduce((c,d)=>{var u=Lae(d.slice(t,r+1));return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},wR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,SR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,FD=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var s=$2(t,u=>u.coordinate),i=1/0,o=1,l=s.length;o<l;o++){var c=s[o],d=s[o-1];i=Math.min((c.coordinate||0)-(d.coordinate||0),i)}return i===1/0?0:i}return r?void 0:0};function CR(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:s,name:i}=e;return Fc(Fc({},t),{},{dataKey:r,payload:n,value:s,name:i})}function zU(e,t){if(e)return String(e);if(typeof t=="string")return t}function $ae(e,t,r,n,s){if(r==="horizontal"||r==="vertical"){var i=e>=s.left&&e<=s.left+s.width&&t>=s.top&&t<=s.top+s.height;return i?{x:e,y:t}:null}return n?_ae({x:e,y:t},n):null}var Vae=(e,t,r,n)=>{var s=t.find(d=>d&&d.index===r);if(s){if(e==="horizontal")return{x:s.coordinate,y:n.y};if(e==="vertical")return{x:n.x,y:s.coordinate};if(e==="centric"){var i=s.coordinate,{radius:o}=n;return Fc(Fc(Fc({},n),Qi(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=s.coordinate,{angle:c}=n;return Fc(Fc(Fc({},n),Qi(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{x:0,y:0}},qae=(e,t)=>t==="horizontal"?e.x:t==="vertical"?e.y:t==="centric"?e.angle:e.radius,df=e=>e.layout.width,uf=e=>e.layout.height,zae=e=>e.layout.scale,HU=e=>e.layout.margin,eA=Kt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),tA=Kt(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Hae="data-recharts-item-index",Wae="data-recharts-item-data-key",Y2=60;function kR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kR(Object(r),!0).forEach(function(n){Gae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gae(e,t,r){return(t=Yae(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yae(e){var t=Kae(e,"string");return typeof t=="symbol"?t:t+""}function Kae(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Xae=e=>e.brush.height,Zi=Kt([df,uf,HU,Xae,eA,tA,pU,vre],(e,t,r,n,s,i,o,l)=>{var c=i.reduce((v,g)=>{var{orientation:b}=g;if(!g.mirror&&!g.hide){var y=typeof g.width=="number"?g.width:Y2;return fm(fm({},v),{},{[b]:v[b]+y})}return v},{left:r.left||0,right:r.right||0}),d=s.reduce((v,g)=>{var{orientation:b}=g;return!g.mirror&&!g.hide?fm(fm({},v),{},{[b]:gx(v,"".concat(b))+g.height}):v},{top:r.top||0,bottom:r.bottom||0}),u=fm(fm({},d),c),h=u.bottom;u.bottom+=n,u=Iae(u,o,l);var m=e-u.left-u.right,p=t-u.top-u.bottom;return fm(fm({brushBottom:h},u),{},{width:Math.max(m,0),height:Math.max(p,0)})}),Qae=Kt(Zi,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),WU=Kt(df,uf,(e,t)=>({x:0,y:0,width:e,height:t})),Jae=N.createContext(null),Xc=()=>N.useContext(Jae)!=null,K2=e=>e.brush,X2=Kt([K2,Zi,HU],(e,t,r)=>({height:e.height,x:Ir(e.x)?e.x:t.left,y:Ir(e.y)?e.y:t.top+t.height+t.brushBottom-(r?.bottom||0),width:Ir(e.width)?e.width:t.width})),rA=()=>{var e,t=Xc(),r=Xr(Qae),n=Xr(X2),s=(e=Xr(K2))===null||e===void 0?void 0:e.padding;return!t||!n||!s?r:{width:n.width-s.left-s.right,height:n.height-s.top-s.bottom,x:s.left,y:s.top}},Zae={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},GU=()=>{var e;return(e=Xr(Zi))!==null&&e!==void 0?e:Zae},aA=()=>Xr(df),nA=()=>Xr(uf),ene={top:0,right:0,bottom:0,left:0},tne=()=>{var e;return(e=Xr(t=>t.layout.margin))!==null&&e!==void 0?e:ene},Zn=e=>e.layout.layoutType,sA=()=>Xr(Zn),rne={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},YU=Kc({name:"legend",initialState:rne,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var r=qh(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)}}}),{setLegendSize:_R,setLegendSettings:ane,addLegendPayload:nne,removeLegendPayload:sne}=YU.actions,ine=YU.reducer,one=["contextPayload"];function LD(){return LD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},LD.apply(null,arguments)}function ER(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ER(Object(r),!0).forEach(function(n){iA(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ER(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iA(e,t,r){return(t=lne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lne(e){var t=cne(e,"string");return typeof t=="symbol"?t:t+""}function cne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dne(e,t){if(e==null)return{};var r,n,s=une(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function une(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function hne(e){return e.value}function fne(e){var{contextPayload:t}=e,r=dne(e,one),n=uU(t,e.payloadUniqBy,hne),s=C0(C0({},r),{},{payload:n});return N.isValidElement(e.content)?N.cloneElement(e.content,s):typeof e.content=="function"?N.createElement(e.content,s):N.createElement(V3,s)}function mne(e,t,r,n,s,i){var{layout:o,align:l,verticalAlign:c}=t,d,u;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?d={left:((n||0)-i.width)/2}:d=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?u={top:((s||0)-i.height)/2}:u=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),C0(C0({},d),u)}function pne(e){var t=Ji();return N.useEffect(()=>{t(ane(e))},[t,e]),null}function xne(e){var t=Ji();return N.useEffect(()=>(t(_R(e)),()=>{t(_R({width:0,height:0}))}),[t,e]),null}function vne(e){var t=yre(),r=Mee(),n=tne(),{width:s,height:i,wrapperStyle:o,portal:l}=e,[c,d]=xU([t]),u=aA(),h=nA(),m=u-(n.left||0)-(n.right||0),p=Q2.getWidthOrHeight(e.layout,i,s,m),v=l?o:C0(C0({position:"absolute",width:p?.width||s||"auto",height:p?.height||i||"auto"},mne(o,e,n,u,h,c)),o),g=l??r;if(g==null)return null;var b=N.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:d},N.createElement(pne,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),N.createElement(xne,{width:c.width,height:c.height}),N.createElement(fne,LD({},e,p,{margin:n,chartWidth:u,chartHeight:h,contextPayload:t})));return Ly.createPortal(b,g)}class Q2 extends N.PureComponent{static getWidthOrHeight(t,r,n,s){return t==="vertical"&&Ir(r)?{height:r}:t==="horizontal"?{width:n||s}:null}render(){return N.createElement(vne,this.props)}}iA(Q2,"displayName","Legend");iA(Q2,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});function BD(){return BD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},BD.apply(null,arguments)}function DR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function g_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DR(Object(r),!0).forEach(function(n){gne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gne(e,t,r){return(t=bne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bne(e){var t=yne(e,"string");return typeof t=="symbol"?t:t+""}function yne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jne(e){return Array.isArray(e)&&zu(e[0])&&zu(e[1])?e.join(" ~ "):e}var Nne=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:s={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:m=!1}=e,p=()=>{if(i&&i.length){var S={padding:0,margin:0},D=(l?$2(i,l):i).map((E,T)=>{if(E.type==="none")return null;var A=E.formatter||o||jne,{value:L,name:P}=E,O=L,Z=P;if(A){var z=A(L,P,E,T,i);if(Array.isArray(z))[O,Z]=z;else if(z!=null)O=z;else return null}var K=g_({display:"block",paddingTop:4,paddingBottom:4,color:E.color||"#000"},n);return N.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(T),style:K},zu(Z)?N.createElement("span",{className:"recharts-tooltip-item-name"},Z):null,zu(Z)?N.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,N.createElement("span",{className:"recharts-tooltip-item-value"},O),N.createElement("span",{className:"recharts-tooltip-item-unit"},E.unit||""))});return N.createElement("ul",{className:"recharts-tooltip-item-list",style:S},D)}return null},v=g_({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),g=g_({margin:0},s),b=!ri(u),y=b?u:"",C=pa("recharts-default-tooltip",c),w=pa("recharts-tooltip-label",d);b&&h&&i!==void 0&&i!==null&&(y=h(u,i));var k=m?{role:"status","aria-live":"assertive"}:{};return N.createElement("div",BD({className:C,style:v},k),N.createElement("p",{className:w,style:g},N.isValidElement(y)?y:"".concat(y)),p())},ib="recharts-tooltip-wrapper",wne={visibility:"hidden"};function Sne(e){var{coordinate:t,translateX:r,translateY:n}=e;return pa(ib,{["".concat(ib,"-right")]:Ir(r)&&t&&Ir(t.x)&&r>=t.x,["".concat(ib,"-left")]:Ir(r)&&t&&Ir(t.x)&&r<t.x,["".concat(ib,"-bottom")]:Ir(n)&&t&&Ir(t.y)&&n>=t.y,["".concat(ib,"-top")]:Ir(n)&&t&&Ir(t.y)&&n<t.y})}function AR(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:s,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:d}=e;if(i&&Ir(i[n]))return i[n];var u=r[n]-l-(s>0?s:0),h=r[n]+s;if(t[n])return o[n]?u:h;var m=c[n];if(m==null)return 0;if(o[n]){var p=u,v=m;return p<v?Math.max(h,m):Math.max(u,m)}if(d==null)return 0;var g=h+l,b=m+d;return g>b?Math.max(u,m):Math.max(h,m)}function Cne(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function kne(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:s,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,d,u,h;return o.height>0&&o.width>0&&r?(u=AR({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),h=AR({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=Cne({translateX:u,translateY:h,useTranslate3d:l})):d=wne,{cssProperties:d,cssClasses:Sne({translateX:u,translateY:h,coordinate:r})}}function TR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function _j(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TR(Object(r),!0).forEach(function(n){UD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function UD(e,t,r){return(t=_ne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _ne(e){var t=Ene(e,"string");return typeof t=="symbol"?t:t+""}function Ene(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Dne extends N.PureComponent{constructor(){super(...arguments),UD(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),UD(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,s,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(s=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&s!==void 0?s:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:s,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:d,position:u,reverseDirection:h,useTranslate3d:m,viewBox:p,wrapperStyle:v,lastBoundingBox:g,innerRef:b,hasPortalFromProps:y}=this.props,{cssClasses:C,cssProperties:w}=kne({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:d,position:u,reverseDirection:h,tooltipBox:{height:g.height,width:g.width},useTranslate3d:m,viewBox:p}),k=y?{}:_j(_j({transition:c&&t?"transform ".concat(n,"ms ").concat(s):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),S=_j(_j({},k),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},v);return N.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:C,style:S,ref:b},i)}}var Ane=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),qy={isSsr:Ane()},KU=()=>Xr(e=>e.rootProps.accessibilityLayer);function zo(e){return Number.isFinite(e)}function sw(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function $D(){return $D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$D.apply(null,arguments)}function IR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function PR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IR(Object(r),!0).forEach(function(n){Tne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tne(e,t,r){return(t=Ine(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ine(e){var t=Pne(e,"string");return typeof t=="symbol"?t:t+""}function Pne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OR={curveBasisClosed:ete,curveBasisOpen:tte,curveBasis:Zee,curveBumpX:Bee,curveBumpY:Uee,curveLinearClosed:rte,curveLinear:B2,curveMonotoneX:ate,curveMonotoneY:nte,curveNatural:ste,curveStep:ite,curveStepAfter:lte,curveStepBefore:ote},Ej=e=>zo(e.x)&&zo(e.y),ob=e=>e.x,lb=e=>e.y,One=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat($y(e));return(r==="curveMonotone"||r==="curveBump")&&t?OR["".concat(r).concat(t==="vertical"?"Y":"X")]:OR[r]||B2},Mne=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:s,connectNulls:i=!1}=e,o=One(t,s),l=i?r.filter(Ej):r,c;if(Array.isArray(n)){var d=i?n.filter(h=>Ej(h)):n,u=l.map((h,m)=>PR(PR({},h),{},{base:d[m]}));return s==="vertical"?c=Nj().y(lb).x1(ob).x0(h=>h.base.x):c=Nj().x(ob).y1(lb).y0(h=>h.base.y),c.defined(Ej).curve(o),c(u)}return s==="vertical"&&Ir(n)?c=Nj().y(lb).x1(ob).x0(n):Ir(n)?c=Nj().x(ob).y1(lb).y0(n):c=W9().x(ob).y(lb),c.defined(Ej).curve(o),c(l)},kN=e=>{var{className:t,points:r,path:n,pathRef:s}=e;if((!r||!r.length)&&!n)return null;var i=r&&r.length?Mne(e):n;return N.createElement("path",$D({},Dn(e,!1),R3(e),{className:pa("recharts-curve",t),d:i===null?void 0:i,ref:s}))},Rne=["x","y","top","left","width","height","className"];function VD(){return VD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},VD.apply(null,arguments)}function MR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MR(Object(r),!0).forEach(function(n){Lne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lne(e,t,r){return(t=Bne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bne(e){var t=Une(e,"string");return typeof t=="symbol"?t:t+""}function Une(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $ne(e,t){if(e==null)return{};var r,n,s=Vne(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Vne(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qne=(e,t,r,n,s,i)=>"M".concat(e,",").concat(s,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),zne=e=>{var{x:t=0,y:r=0,top:n=0,left:s=0,width:i=0,height:o=0,className:l}=e,c=$ne(e,Rne),d=Fne({x:t,y:r,top:n,left:s,width:i,height:o},c);return!Ir(t)||!Ir(r)||!Ir(i)||!Ir(o)||!Ir(n)||!Ir(s)?null:N.createElement("path",VD({},Dn(d,!0),{className:pa("recharts-cross",l),d:qne(t,r,i,o,n,s)}))};function Hne(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function RR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Wne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RR(Object(r),!0).forEach(function(n){Gne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gne(e,t,r){return(t=Yne(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yne(e){var t=Kne(e,"string");return typeof t=="symbol"?t:t+""}function Kne(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Q0(e,t){var r=Wne({},e),n=t,s=Object.keys(t),i=s.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}var b_={},y_={},j_={},FR;function Xne(){return FR||(FR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){if(!r||typeof r!="object")return!1;const n=Object.getPrototypeOf(r);return n===null||n===Object.prototype||Object.getPrototypeOf(n)===null?Object.prototype.toString.call(r)==="[object Object]":!1}e.isPlainObject=t}(j_)),j_}var LR;function Qne(){return LR||(LR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Xne(),r=lU(),n=W3(),s=G3(),i=z3();function o(d,u,h){return l(d,u,void 0,void 0,void 0,void 0,h)}function l(d,u,h,m,p,v,g){const b=g(d,u,h,m,p,v);if(b!==void 0)return b;if(typeof d==typeof u)switch(typeof d){case"bigint":case"string":case"boolean":case"symbol":case"undefined":return d===u;case"number":return d===u||Object.is(d,u);case"function":return d===u;case"object":return c(d,u,v,g)}return c(d,u,v,g)}function c(d,u,h,m){if(Object.is(d,u))return!0;let p=n.getTag(d),v=n.getTag(u);if(p===s.argumentsTag&&(p=s.objectTag),v===s.argumentsTag&&(v=s.objectTag),p!==v)return!1;switch(p){case s.stringTag:return d.toString()===u.toString();case s.numberTag:{const y=d.valueOf(),C=u.valueOf();return i.eq(y,C)}case s.booleanTag:case s.dateTag:case s.symbolTag:return Object.is(d.valueOf(),u.valueOf());case s.regexpTag:return d.source===u.source&&d.flags===u.flags;case s.functionTag:return d===u}h=h??new Map;const g=h.get(d),b=h.get(u);if(g!=null&&b!=null)return g===u;h.set(d,u),h.set(u,d);try{switch(p){case s.mapTag:{if(d.size!==u.size)return!1;for(const[y,C]of d.entries())if(!u.has(y)||!l(C,u.get(y),y,d,u,h,m))return!1;return!0}case s.setTag:{if(d.size!==u.size)return!1;const y=Array.from(d.values()),C=Array.from(u.values());for(let w=0;w<y.length;w++){const k=y[w],S=C.findIndex(D=>l(k,D,void 0,d,u,h,m));if(S===-1)return!1;C.splice(S,1)}return!0}case s.arrayTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:case s.bigUint64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.bigInt64ArrayTag:case s.float32ArrayTag:case s.float64ArrayTag:{if(typeof Buffer<"u"&&Buffer.isBuffer(d)!==Buffer.isBuffer(u)||d.length!==u.length)return!1;for(let y=0;y<d.length;y++)if(!l(d[y],u[y],y,d,u,h,m))return!1;return!0}case s.arrayBufferTag:return d.byteLength!==u.byteLength?!1:c(new Uint8Array(d),new Uint8Array(u),h,m);case s.dataViewTag:return d.byteLength!==u.byteLength||d.byteOffset!==u.byteOffset?!1:c(new Uint8Array(d),new Uint8Array(u),h,m);case s.errorTag:return d.name===u.name&&d.message===u.message;case s.objectTag:{if(!(c(d.constructor,u.constructor,h,m)||t.isPlainObject(d)&&t.isPlainObject(u)))return!1;const C=[...Object.keys(d),...r.getSymbols(d)],w=[...Object.keys(u),...r.getSymbols(u)];if(C.length!==w.length)return!1;for(let k=0;k<C.length;k++){const S=C[k],D=d[S];if(!Object.hasOwn(u,S))return!1;const E=u[S];if(!l(D,E,S,d,u,h,m))return!1}return!0}default:return!1}}finally{h.delete(d),h.delete(u)}}e.isEqualWith=o}(y_)),y_}var N_={},BR;function Jne(){return BR||(BR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(){}e.noop=t}(N_)),N_}var UR;function Zne(){return UR||(UR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qne(),r=Jne();function n(s,i){return t.isEqualWith(s,i,r.noop)}e.isEqual=n}(b_)),b_}var w_,$R;function ese(){return $R||($R=1,w_=Zne().isEqual),w_}var tse=ese();const rse=Yu(tse);function ase(e){var t={},r=()=>null,n=!1,s=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...d]=l;if(typeof c=="number"){s=e.setTimeout(i.bind(null,d),c);return}i(c),s=e.setTimeout(i.bind(null,d));return}typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,s&&(s(),s=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}var iw=1e-4,XU=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],QU=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),VR=(e,t)=>r=>{var n=XU(e,t);return QU(n,r)},nse=(e,t)=>r=>{var n=XU(e,t),s=[...n.map((i,o)=>i*o).slice(1),0];return QU(s,r)},qR=function(){for(var t,r,n,s,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];if(o.length===1)switch(o[0]){case"linear":[t,n,r,s]=[0,0,1,1];break;case"ease":[t,n,r,s]=[.25,.1,.25,1];break;case"ease-in":[t,n,r,s]=[.42,0,1,1];break;case"ease-out":[t,n,r,s]=[.42,0,.58,1];break;case"ease-in-out":[t,n,r,s]=[0,0,.58,1];break;default:{var c=o[0].split("(");c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4&&([t,n,r,s]=c[1].split(")")[0].split(",").map(v=>parseFloat(v)))}}else o.length===4&&([t,n,r,s]=o);var d=VR(t,r),u=VR(n,s),h=nse(t,r),m=v=>v>1?1:v<0?0:v,p=v=>{for(var g=v>1?1:v,b=g,y=0;y<8;++y){var C=d(b)-g,w=h(b);if(Math.abs(C-g)<iw||w<iw)return u(b);b=m(b-C/w)}return u(b)};return p.isStepper=!1,p},sse=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:s=17}=t,i=(o,l,c)=>{var d=-(o-l)*r,u=c*n,h=c+(d-u)*s/1e3,m=c*s/1e3+o;return Math.abs(m-l)<iw&&Math.abs(h)<iw?[l,0]:[m,h]};return i.isStepper=!0,i.dt=s,i},ise=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return qR(e);case"spring":return sse();default:if(e.split("(")[0]==="cubic-bezier")return qR(e)}return typeof e=="function"?e:null};function zR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function HR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zR(Object(r),!0).forEach(function(n){ose(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ose(e,t,r){return(t=lse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lse(e){var t=cse(e,"string");return typeof t=="symbol"?t:t+""}function cse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dse=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),use=(e,t,r)=>e.map(n=>"".concat(dse(n)," ").concat(t,"ms ").concat(r)).join(","),hse=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(s=>n.includes(s))),ty=(e,t)=>Object.keys(t).reduce((r,n)=>HR(HR({},r),{},{[n]:e(n,t[n])}),{});function WR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WR(Object(r),!0).forEach(function(n){fse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fse(e,t,r){return(t=mse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mse(e){var t=pse(e,"string");return typeof t=="symbol"?t:t+""}function pse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ow=(e,t,r)=>e+(t-e)*r,qD=e=>{var{from:t,to:r}=e;return t!==r},JU=(e,t,r)=>{var n=ty((s,i)=>{if(qD(i)){var[o,l]=e(i.from,i.to,i.velocity);return Hi(Hi({},i),{},{from:o,velocity:l})}return i},t);return r<1?ty((s,i)=>qD(i)?Hi(Hi({},i),{},{velocity:ow(i.velocity,n[s].velocity,r),from:ow(i.from,n[s].from,r)}):i,t):JU(e,n,r-1)};function xse(e,t,r,n,s,i){var o,l=n.reduce((m,p)=>Hi(Hi({},m),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>ty((m,p)=>p.from,l),d=()=>!Object.values(l).filter(qD).length,u=null,h=m=>{o||(o=m);var p=m-o,v=p/r.dt;l=JU(r,l,v),s(Hi(Hi(Hi({},e),t),c())),o=m,d()||(u=i.setTimeout(h))};return()=>(u=i.setTimeout(h),()=>{u()})}function vse(e,t,r,n,s,i,o){var l=null,c=s.reduce((h,m)=>Hi(Hi({},h),{},{[m]:[e[m],t[m]]}),{}),d,u=h=>{d||(d=h);var m=(h-d)/n,p=ty((g,b)=>ow(...b,r(m)),c);if(i(Hi(Hi(Hi({},e),t),p)),m<1)l=o.setTimeout(u);else{var v=ty((g,b)=>ow(...b,r(1)),c);i(Hi(Hi(Hi({},e),t),v))}};return()=>(l=o.setTimeout(u),()=>{l()})}const gse=(e,t,r,n,s,i)=>{var o=hse(e,t);return r.isStepper===!0?xse(e,t,r,o,s,i):vse(e,t,r,n,o,s,i)};class bse{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),s=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(s=requestAnimationFrame(i))};return s=requestAnimationFrame(i),()=>{cancelAnimationFrame(s)}}}var yse=["children","begin","duration","attributeName","easing","isActive","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart","animationManager"];function zD(){return zD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zD.apply(null,arguments)}function jse(e,t){if(e==null)return{};var r,n,s=Nse(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Nse(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function GR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GR(Object(r),!0).forEach(function(n){Wp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GR(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wp(e,t,r){return(t=wse(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wse(e){var t=Sse(e,"string");return typeof t=="symbol"?t:t+""}function Sse(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cse(){return ase(new bse)}class oA extends N.PureComponent{constructor(t,r){super(t,r),Wp(this,"mounted",!1),Wp(this,"manager",null),Wp(this,"stopJSAnimation",null),Wp(this,"unSubscribe",null);var{isActive:n,attributeName:s,from:i,to:o,children:l,duration:c,animationManager:d}=this.props;if(this.manager=d,this.handleStyleChange=this.handleStyleChange.bind(this),this.changeStyle=this.changeStyle.bind(this),!n||c<=0){this.state={style:{}},typeof l=="function"&&(this.state={style:o});return}if(i){if(typeof l=="function"){this.state={style:i};return}this.state={style:s?{[s]:i}:i}}else this.state={style:{}}}componentDidMount(){var{isActive:t,canBegin:r}=this.props;this.mounted=!0,!(!t||!r)&&this.runAnimation(this.props)}componentDidUpdate(t){var{isActive:r,canBegin:n,attributeName:s,shouldReAnimate:i,to:o,from:l}=this.props,{style:c}=this.state;if(n){if(!r){var d={style:s?{[s]:o}:o};this.state&&c&&(s&&c[s]!==o||!s&&c!==o)&&this.setState(d);return}if(!(rse(t.to,o)&&t.canBegin&&t.isActive)){var u=!t.canBegin||!t.isActive;this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var h=u||i?l:t.to;if(this.state&&c){var m={style:s?{[s]:h}:h};(s&&c[s]!==h||!s&&c!==h)&&this.setState(m)}this.runAnimation(mm(mm({},this.props),{},{from:h,begin:0}))}}}componentWillUnmount(){this.mounted=!1;var{onAnimationEnd:t}=this.props;this.unSubscribe&&this.unSubscribe(),this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation(),t&&t()}handleStyleChange(t){this.changeStyle(t)}changeStyle(t){this.mounted&&this.setState({style:t})}runJSAnimation(t){var{from:r,to:n,duration:s,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c}=t,d=gse(r,n,ise(i),s,this.changeStyle,this.manager.getTimeoutController()),u=()=>{this.stopJSAnimation=d()};this.manager.start([c,o,u,s,l])}runAnimation(t){var{begin:r,duration:n,attributeName:s,to:i,easing:o,onAnimationStart:l,onAnimationEnd:c,children:d}=t;if(this.unSubscribe=this.manager.subscribe(this.handleStyleChange),typeof o=="function"||typeof d=="function"||o==="spring"){this.runJSAnimation(t);return}var u=s?{[s]:i}:i,h=use(Object.keys(u),n,o);this.manager.start([l,r,mm(mm({},u),{},{transition:h}),n,c])}render(){var t=this.props,{children:r,begin:n,duration:s,attributeName:i,easing:o,isActive:l,from:c,to:d,canBegin:u,onAnimationEnd:h,shouldReAnimate:m,onAnimationReStart:p,animationManager:v}=t,g=jse(t,yse),b=N.Children.count(r),y=this.state.style;if(typeof r=="function")return r(y);if(!l||b===0||s<=0)return r;var C=w=>{var{style:k={},className:S}=w.props,D=N.cloneElement(w,mm(mm({},g),{},{style:mm(mm({},k),y),className:S}));return D};return b===1?C(N.Children.only(r)):N.createElement("div",null,N.Children.map(r,w=>C(w)))}}Wp(oA,"displayName","Animate");Wp(oA,"defaultProps",{begin:0,duration:1e3,attributeName:"",easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}});var kse=N.createContext(null);function HD(e){var t,r,n=N.useContext(kse);return N.createElement(oA,zD({},e,{animationManager:(t=(r=e.animationManager)!==null&&r!==void 0?r:n)!==null&&t!==void 0?t:Cse()}))}function lw(){return lw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},lw.apply(null,arguments)}var YR=(e,t,r,n,s)=>{var i=Math.min(Math.abs(r)/2,Math.abs(n)/2),o=n>=0?1:-1,l=r>=0?1:-1,c=n>=0&&r>=0||n<0&&r<0?1:0,d;if(i>0&&s instanceof Array){for(var u=[0,0,0,0],h=0,m=4;h<m;h++)u[h]=s[h]>i?i:s[h];d="M".concat(e,",").concat(t+o*u[0]),u[0]>0&&(d+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),d+="L ".concat(e+r-l*u[1],",").concat(t),u[1]>0&&(d+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,`,
        `).concat(e+r,",").concat(t+o*u[1])),d+="L ".concat(e+r,",").concat(t+n-o*u[2]),u[2]>0&&(d+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,`,
        `).concat(e+r-l*u[2],",").concat(t+n)),d+="L ".concat(e+l*u[3],",").concat(t+n),u[3]>0&&(d+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,`,
        `).concat(e,",").concat(t+n-o*u[3])),d+="Z"}else if(i>0&&s===+s&&s>0){var p=Math.min(i,s);d="M ".concat(e,",").concat(t+o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+l*p,",").concat(t,`
            L `).concat(e+r-l*p,",").concat(t,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r,",").concat(t+o*p,`
            L `).concat(e+r,",").concat(t+n-o*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e+r-l*p,",").concat(t+n,`
            L `).concat(e+l*p,",").concat(t+n,`
            A `).concat(p,",").concat(p,",0,0,").concat(c,",").concat(e,",").concat(t+n-o*p," Z")}else d="M ".concat(e,",").concat(t," h ").concat(r," v ").concat(n," h ").concat(-r," Z");return d},_se={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Ese=e=>{var t=Q0(e,_se),r=N.useRef(null),[n,s]=N.useState(-1);N.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var y=r.current.getTotalLength();y&&s(y)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:m,animationBegin:p,isAnimationActive:v,isUpdateAnimationActive:g}=t;if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var b=pa("recharts-rectangle",u);return g?N.createElement(HD,{canBegin:n>0,from:{width:l,height:c,x:i,y:o},to:{width:l,height:c,x:i,y:o},duration:m,animationEasing:h,isActive:g},y=>{var{width:C,height:w,x:k,y:S}=y;return N.createElement(HD,{canBegin:n>0,from:"0px ".concat(n===-1?1:n,"px"),to:"".concat(n,"px 0px"),attributeName:"strokeDasharray",begin:p,duration:m,isActive:v,easing:h},N.createElement("path",lw({},Dn(t,!0),{className:b,d:YR(k,S,C,w,d),ref:r})))}):N.createElement("path",lw({},Dn(t,!0),{className:b,d:YR(i,o,l,c,d)}))};function ZU(e){var{cx:t,cy:r,radius:n,startAngle:s,endAngle:i}=e,o=Qi(t,r,n,s),l=Qi(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function WD(){return WD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},WD.apply(null,arguments)}var Dse=(e,t)=>{var r=$c(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},Dj=e=>{var{cx:t,cy:r,radius:n,angle:s,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,d=l*(o?1:-1)+n,u=Math.asin(l/d)/nw,h=c?s:s+i*u,m=Qi(t,r,d,h),p=Qi(t,r,n,h),v=c?s-i*u:s,g=Qi(t,r,d*Math.cos(u*nw),v);return{center:m,circleTangency:p,lineTangency:g,theta:u}},e$=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:i,endAngle:o}=e,l=Dse(i,o),c=i+l,d=Qi(t,r,s,i),u=Qi(t,r,s,c),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(l)>180),",").concat(+(i>c),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(n>0){var m=Qi(t,r,n,i),p=Qi(t,r,n,c);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(n,",").concat(n,`,0,
            `).concat(+(Math.abs(l)>180),",").concat(+(i<=c),`,
            `).concat(m.x,",").concat(m.y," Z")}else h+="L ".concat(t,",").concat(r," Z");return h},Ase=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:s,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:d}=e,u=$c(d-c),{circleTangency:h,lineTangency:m,theta:p}=Dj({cx:t,cy:r,radius:s,angle:c,sign:u,cornerRadius:i,cornerIsExternal:l}),{circleTangency:v,lineTangency:g,theta:b}=Dj({cx:t,cy:r,radius:s,angle:d,sign:-u,cornerRadius:i,cornerIsExternal:l}),y=l?Math.abs(c-d):Math.abs(c-d)-p-b;if(y<0)return o?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(i,",").concat(i,",0,0,1,").concat(i*2,`,0
        a`).concat(i,",").concat(i,",0,0,1,").concat(-i*2,`,0
      `):e$({cx:t,cy:r,innerRadius:n,outerRadius:s,startAngle:c,endAngle:d});var C="M ".concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(g.x,",").concat(g.y,`
  `);if(n>0){var{circleTangency:w,lineTangency:k,theta:S}=Dj({cx:t,cy:r,radius:n,angle:c,sign:u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:D,lineTangency:E,theta:T}=Dj({cx:t,cy:r,radius:n,angle:d,sign:-u,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),A=l?Math.abs(c-d):Math.abs(c-d)-S-T;if(A<0&&i===0)return"".concat(C,"L").concat(t,",").concat(r,"Z");C+="L".concat(E.x,",").concat(E.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(D.x,",").concat(D.y,`
      A`).concat(n,",").concat(n,",0,").concat(+(A>180),",").concat(+(u>0),",").concat(w.x,",").concat(w.y,`
      A`).concat(i,",").concat(i,",0,0,").concat(+(u<0),",").concat(k.x,",").concat(k.y,"Z")}else C+="L".concat(t,",").concat(r,"Z");return C},Tse={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Ise=e=>{var t=Q0(e,Tse),{cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(i<s||d===u)return null;var m=pa("recharts-sector",h),p=i-s,v=Fm(o,p,0,!0),g;return v>0&&Math.abs(d-u)<360?g=Ase({cx:r,cy:n,innerRadius:s,outerRadius:i,cornerRadius:Math.min(v,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):g=e$({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u}),N.createElement("path",WD({},Dn(t,!0),{className:m,d:g}))};function Pse(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var{cx:l,cy:c,innerRadius:d,outerRadius:u,angle:h}=t,m=Qi(l,c,d,h),p=Qi(l,c,u,h);n=m.x,s=m.y,i=p.x,o=p.y}else return ZU(t);return[{x:n,y:s},{x:i,y:o}]}var S_={},C_={},k_={},KR;function Ose(){return KR||(KR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fU();function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r}(k_)),k_}var XR;function Mse(){return XR||(XR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Ose();function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r}(C_)),C_}var QR;function Rse(){return QR||(QR=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mU(),r=Mse();function n(s,i,o){o&&typeof o!="number"&&t.isIterateeCall(s,i,o)&&(i=o=void 0),s=r.toFinite(s),i===void 0?(i=s,s=0):i=r.toFinite(i),o=o===void 0?s<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-s)/(o||1)),0),c=new Array(l);for(let d=0;d<l;d++)c[d]=s,s+=o;return c}e.range=n}(S_)),S_}var __,JR;function Fse(){return JR||(JR=1,__=Rse().range),__}var Lse=Fse();const t$=Yu(Lse);function Am(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Bse(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function lA(e){let t,r,n;e.length!==2?(t=Am,r=(l,c)=>Am(e(l),c),n=(l,c)=>e(l)-c):(t=e===Am||e===Bse?e:Use,r=e,n=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<0?d=h+1:u=h}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const h=d+u>>>1;r(l[h],c)<=0?d=h+1:u=h}while(d<u)}return d}function o(l,c,d=0,u=l.length){const h=s(l,c,d,u-1);return h>d&&n(l[h-1],c)>-n(l[h],c)?h-1:h}return{left:s,center:o,right:i}}function Use(){return 0}function r$(e){return e===null?NaN:+e}function*$se(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Vse=lA(Am),zy=Vse.right;lA(r$).center;class ZR extends Map{constructor(t,r=Hse){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(eF(this,t))}has(t){return super.has(eF(this,t))}set(t,r){return super.set(qse(this,t),r)}delete(t){return super.delete(zse(this,t))}}function eF({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function qse({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function zse({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Hse(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Wse(e=Am){if(e===Am)return a$;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function a$(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Gse=Math.sqrt(50),Yse=Math.sqrt(10),Kse=Math.sqrt(2);function cw(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=Gse?10:i>=Yse?5:i>=Kse?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?cw(e,t,r*2):[l,c,d]}function GD(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?cw(t,e,r):cw(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function YD(e,t,r){return t=+t,e=+e,r=+r,cw(e,t,r)[2]}function KD(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?YD(t,e,r):YD(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function tF(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function rF(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function n$(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?a$:Wse(s);n>r;){if(n-r>600){const c=n-r+1,d=t-r+1,u=Math.log(c),h=.5*Math.exp(2*u/3),m=.5*Math.sqrt(u*h*(c-h)/c)*(d-c/2<0?-1:1),p=Math.max(r,Math.floor(t-d*h/c+m)),v=Math.min(n,Math.floor(t+(c-d)*h/c+m));n$(e,t,p,v,s)}const i=e[t];let o=r,l=n;for(cb(e,r,t),s(e[n],i)>0&&cb(e,r,n);o<l;){for(cb(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?cb(e,r,l):(++l,cb(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function cb(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function Xse(e,t,r){if(e=Float64Array.from($se(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return rF(e);if(t>=1)return tF(e);var n,s=(n-1)*t,i=Math.floor(s),o=tF(n$(e,i).subarray(0,i+1)),l=rF(e.subarray(i+1));return o+(l-o)*(s-i)}}function Qse(e,t,r=r$){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function Jse(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Qc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function hf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const XD=Symbol("implicit");function cA(){var e=new ZR,t=[],r=[],n=XD;function s(i){let o=e.get(i);if(o===void 0){if(n!==XD)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new ZR;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return cA(t,r).unknown(n)},Qc.apply(s,arguments),s}function dA(){var e=cA().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function h(){var m=t().length,p=s<n,v=p?s:n,g=p?n:s;i=(g-v)/Math.max(1,m-c+d*2),l&&(i=Math.floor(i)),v+=(g-v-i*(m-c))*u,o=i*(1-c),l&&(v=Math.round(v),o=Math.round(o));var b=Jse(m).map(function(y){return v+i*y});return r(p?b.reverse():b)}return e.domain=function(m){return arguments.length?(t(m),h()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,h()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,h()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,h()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,d=+m),h()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),h()):c},e.paddingOuter=function(m){return arguments.length?(d=+m,h()):d},e.align=function(m){return arguments.length?(u=Math.max(0,Math.min(1,m)),h()):u},e.copy=function(){return dA(t(),[n,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},Qc.apply(h(),arguments)}function s$(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return s$(t())},e}function Zse(){return s$(dA.apply(null,arguments).paddingInner(1))}function uA(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function i$(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Hy(){}var ry=.7,dw=1/ry,a0="\\s*([+-]?\\d+)\\s*",ay="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eie=/^#([0-9a-f]{3,8})$/,tie=new RegExp(`^rgb\\(${a0},${a0},${a0}\\)$`),rie=new RegExp(`^rgb\\(${Fu},${Fu},${Fu}\\)$`),aie=new RegExp(`^rgba\\(${a0},${a0},${a0},${ay}\\)$`),nie=new RegExp(`^rgba\\(${Fu},${Fu},${Fu},${ay}\\)$`),sie=new RegExp(`^hsl\\(${ay},${Fu},${Fu}\\)$`),iie=new RegExp(`^hsla\\(${ay},${Fu},${Fu},${ay}\\)$`),aF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};uA(Hy,ny,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nF,formatHex:nF,formatHex8:oie,formatHsl:lie,formatRgb:sF,toString:sF});function nF(){return this.rgb().formatHex()}function oie(){return this.rgb().formatHex8()}function lie(){return o$(this).formatHsl()}function sF(){return this.rgb().formatRgb()}function ny(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=eie.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?iF(t):r===3?new cl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Aj(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Aj(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tie.exec(e))?new cl(t[1],t[2],t[3],1):(t=rie.exec(e))?new cl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=aie.exec(e))?Aj(t[1],t[2],t[3],t[4]):(t=nie.exec(e))?Aj(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=sie.exec(e))?cF(t[1],t[2]/100,t[3]/100,1):(t=iie.exec(e))?cF(t[1],t[2]/100,t[3]/100,t[4]):aF.hasOwnProperty(e)?iF(aF[e]):e==="transparent"?new cl(NaN,NaN,NaN,0):null}function iF(e){return new cl(e>>16&255,e>>8&255,e&255,1)}function Aj(e,t,r,n){return n<=0&&(e=t=r=NaN),new cl(e,t,r,n)}function cie(e){return e instanceof Hy||(e=ny(e)),e?(e=e.rgb(),new cl(e.r,e.g,e.b,e.opacity)):new cl}function QD(e,t,r,n){return arguments.length===1?cie(e):new cl(e,t,r,n??1)}function cl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}uA(cl,QD,i$(Hy,{brighter(e){return e=e==null?dw:Math.pow(dw,e),new cl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ry:Math.pow(ry,e),new cl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new cl(sx(this.r),sx(this.g),sx(this.b),uw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oF,formatHex:oF,formatHex8:die,formatRgb:lF,toString:lF}));function oF(){return`#${Gp(this.r)}${Gp(this.g)}${Gp(this.b)}`}function die(){return`#${Gp(this.r)}${Gp(this.g)}${Gp(this.b)}${Gp((isNaN(this.opacity)?1:this.opacity)*255)}`}function lF(){const e=uw(this.opacity);return`${e===1?"rgb(":"rgba("}${sx(this.r)}, ${sx(this.g)}, ${sx(this.b)}${e===1?")":`, ${e})`}`}function uw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function sx(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Gp(e){return e=sx(e),(e<16?"0":"")+e.toString(16)}function cF(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new _d(e,t,r,n)}function o$(e){if(e instanceof _d)return new _d(e.h,e.s,e.l,e.opacity);if(e instanceof Hy||(e=ny(e)),!e)return new _d;if(e instanceof _d)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new _d(o,l,c,e.opacity)}function uie(e,t,r,n){return arguments.length===1?o$(e):new _d(e,t,r,n??1)}function _d(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}uA(_d,uie,i$(Hy,{brighter(e){return e=e==null?dw:Math.pow(dw,e),new _d(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ry:Math.pow(ry,e),new _d(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new cl(E_(e>=240?e-240:e+120,s,n),E_(e,s,n),E_(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new _d(dF(this.h),Tj(this.s),Tj(this.l),uw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=uw(this.opacity);return`${e===1?"hsl(":"hsla("}${dF(this.h)}, ${Tj(this.s)*100}%, ${Tj(this.l)*100}%${e===1?")":`, ${e})`}`}}));function dF(e){return e=(e||0)%360,e<0?e+360:e}function Tj(e){return Math.max(0,Math.min(1,e||0))}function E_(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const hA=e=>()=>e;function hie(e,t){return function(r){return e+r*t}}function fie(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function mie(e){return(e=+e)==1?l$:function(t,r){return r-t?fie(t,r,e):hA(isNaN(t)?r:t)}}function l$(e,t){var r=t-e;return r?hie(e,r):hA(isNaN(e)?t:e)}const uF=function e(t){var r=mie(t);function n(s,i){var o=r((s=QD(s)).r,(i=QD(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=l$(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return n.gamma=e,n}(1);function pie(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function xie(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function vie(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=J0(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function gie(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function hw(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function bie(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=J0(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var JD=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,D_=new RegExp(JD.source,"g");function yie(e){return function(){return e}}function jie(e){return function(t){return e(t)+""}}function Nie(e,t){var r=JD.lastIndex=D_.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=JD.exec(e))&&(s=D_.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:hw(n,s)})),r=D_.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?jie(c[0].x):yie(t):(t=c.length,function(d){for(var u=0,h;u<t;++u)l[(h=c[u]).i]=h.x(d);return l.join("")})}function J0(e,t){var r=typeof t,n;return t==null||r==="boolean"?hA(t):(r==="number"?hw:r==="string"?(n=ny(t))?(t=n,uF):Nie:t instanceof ny?uF:t instanceof Date?gie:xie(t)?pie:Array.isArray(t)?vie:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bie:hw)(e,t)}function fA(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function wie(e,t){t===void 0&&(t=e,e=J0);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function Sie(e){return function(){return e}}function fw(e){return+e}var hF=[0,1];function $o(e){return e}function ZD(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Sie(isNaN(t)?NaN:.5)}function Cie(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function kie(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=ZD(s,n),i=r(o,i)):(n=ZD(n,s),i=r(i,o)),function(l){return i(n(l))}}function _ie(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=ZD(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=zy(e,l,1,n)-1;return i[c](s[c](l))}}function Wy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function J2(){var e=hF,t=hF,r=J0,n,s,i,o=$o,l,c,d;function u(){var m=Math.min(e.length,t.length);return o!==$o&&(o=Cie(e[0],e[m-1])),l=m>2?_ie:kie,c=d=null,h}function h(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return h.invert=function(m){return o(s((d||(d=l(t,e.map(n),hw)))(m)))},h.domain=function(m){return arguments.length?(e=Array.from(m,fw),u()):e.slice()},h.range=function(m){return arguments.length?(t=Array.from(m),u()):t.slice()},h.rangeRound=function(m){return t=Array.from(m),r=fA,u()},h.clamp=function(m){return arguments.length?(o=m?!0:$o,u()):o!==$o},h.interpolate=function(m){return arguments.length?(r=m,u()):r},h.unknown=function(m){return arguments.length?(i=m,h):i},function(m,p){return n=m,s=p,u()}}function mA(){return J2()($o,$o)}function Eie(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function mw(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function k0(e){return e=mw(Math.abs(e)),e?e[1]:NaN}function Die(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Aie(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Tie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function sy(e){if(!(t=Tie.exec(e)))throw new Error("invalid format: "+e);var t;return new pA({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}sy.prototype=pA.prototype;function pA(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pA.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Iie(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var c$;function Pie(e,t){var r=mw(e,t);if(!r)return e+"";var n=r[0],s=r[1],i=s-(c$=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+mw(e,Math.max(0,t+i-1))[0]}function fF(e,t){var r=mw(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const mF={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Eie,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>fF(e*100,t),r:fF,s:Pie,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function pF(e){return e}var xF=Array.prototype.map,vF=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Oie(e){var t=e.grouping===void 0||e.thousands===void 0?pF:Die(xF.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?pF:Aie(xF.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(h){h=sy(h);var m=h.fill,p=h.align,v=h.sign,g=h.symbol,b=h.zero,y=h.width,C=h.comma,w=h.precision,k=h.trim,S=h.type;S==="n"?(C=!0,S="g"):mF[S]||(w===void 0&&(w=12),k=!0,S="g"),(b||m==="0"&&p==="=")&&(b=!0,m="0",p="=");var D=g==="$"?r:g==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",E=g==="$"?n:/[%p]/.test(S)?o:"",T=mF[S],A=/[defgprs%]/.test(S);w=w===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function L(P){var O=D,Z=E,z,K,B;if(S==="c")Z=T(P)+Z,P="";else{P=+P;var Q=P<0||1/P<0;if(P=isNaN(P)?c:T(Math.abs(P),w),k&&(P=Iie(P)),Q&&+P==0&&v!=="+"&&(Q=!1),O=(Q?v==="("?v:l:v==="-"||v==="("?"":v)+O,Z=(S==="s"?vF[8+c$/3]:"")+Z+(Q&&v==="("?")":""),A){for(z=-1,K=P.length;++z<K;)if(B=P.charCodeAt(z),48>B||B>57){Z=(B===46?s+P.slice(z+1):P.slice(z))+Z,P=P.slice(0,z);break}}}C&&!b&&(P=t(P,1/0));var U=O.length+P.length+Z.length,J=U<y?new Array(y-U+1).join(m):"";switch(C&&b&&(P=t(J+P,J.length?y-Z.length:1/0),J=""),p){case"<":P=O+P+Z+J;break;case"=":P=O+J+P+Z;break;case"^":P=J.slice(0,U=J.length>>1)+O+P+Z+J.slice(U);break;default:P=J+O+P+Z;break}return i(P)}return L.toString=function(){return h+""},L}function u(h,m){var p=d((h=sy(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(k0(m)/3)))*3,g=Math.pow(10,-v),b=vF[8+v/3];return function(y){return p(g*y)+b}}return{format:d,formatPrefix:u}}var Ij,xA,d$;Mie({thousands:",",grouping:[3],currency:["$",""]});function Mie(e){return Ij=Oie(e),xA=Ij.format,d$=Ij.formatPrefix,Ij}function Rie(e){return Math.max(0,-k0(Math.abs(e)))}function Fie(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(k0(t)/3)))*3-k0(Math.abs(e)))}function Lie(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,k0(t)-k0(e))+1}function u$(e,t,r,n){var s=KD(e,t,r),i;switch(n=sy(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=Fie(s,o))&&(n.precision=i),d$(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Lie(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=Rie(s))&&(n.precision=i-(n.type==="%")*2);break}}return xA(n)}function Km(e){var t=e.domain;return e.ticks=function(r){var n=t();return GD(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return u$(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=YD(o,l,r),d===c)return n[s]=o,n[i]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function h$(){var e=mA();return e.copy=function(){return Wy(e,h$())},Qc.apply(e,arguments),Km(e)}function f$(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,fw),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return f$(e).unknown(t)},e=arguments.length?Array.from(e,fw):[0,1],Km(r)}function m$(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function gF(e){return Math.log(e)}function bF(e){return Math.exp(e)}function Bie(e){return-Math.log(-e)}function Uie(e){return-Math.exp(-e)}function $ie(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Vie(e){return e===10?$ie:e===Math.E?Math.exp:t=>Math.pow(e,t)}function qie(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function yF(e){return(t,r)=>-e(-t,r)}function vA(e){const t=e(gF,bF),r=t.domain;let n=10,s,i;function o(){return s=qie(n),i=Vie(n),r()[0]<0?(s=yF(s),i=yF(i),e(Bie,Uie)):e(gF,bF),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const h=u<d;h&&([d,u]=[u,d]);let m=s(d),p=s(u),v,g;const b=l==null?10:+l;let y=[];if(!(n%1)&&p-m<b){if(m=Math.floor(m),p=Math.ceil(p),d>0){for(;m<=p;++m)for(v=1;v<n;++v)if(g=m<0?v/i(-m):v*i(m),!(g<d)){if(g>u)break;y.push(g)}}else for(;m<=p;++m)for(v=n-1;v>=1;--v)if(g=m>0?v/i(-m):v*i(m),!(g<d)){if(g>u)break;y.push(g)}y.length*2<b&&(y=GD(d,u,b))}else y=GD(m,p,Math.min(p-m,b)).map(i);return h?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=sy(c)).precision==null&&(c.trim=!0),c=xA(c)),l===1/0)return c;const d=Math.max(1,n*l/t.ticks().length);return u=>{let h=u/i(Math.round(s(u)));return h*n<n-.5&&(h*=n),h<=d?c(u):""}},t.nice=()=>r(m$(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function p$(){const e=vA(J2()).domain([1,10]);return e.copy=()=>Wy(e,p$()).base(e.base()),Qc.apply(e,arguments),e}function jF(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function NF(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function gA(e){var t=1,r=e(jF(t),NF(t));return r.constant=function(n){return arguments.length?e(jF(t=+n),NF(t)):t},Km(r)}function x$(){var e=gA(J2());return e.copy=function(){return Wy(e,x$()).constant(e.constant())},Qc.apply(e,arguments)}function wF(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function zie(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Hie(e){return e<0?-e*e:e*e}function bA(e){var t=e($o,$o),r=1;function n(){return r===1?e($o,$o):r===.5?e(zie,Hie):e(wF(r),wF(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},Km(t)}function yA(){var e=bA(J2());return e.copy=function(){return Wy(e,yA()).exponent(e.exponent())},Qc.apply(e,arguments),e}function Wie(){return yA.apply(null,arguments).exponent(.5)}function SF(e){return Math.sign(e)*e*e}function Gie(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function v$(){var e=mA(),t=[0,1],r=!1,n;function s(i){var o=Gie(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(SF(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,fw)).map(SF)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return v$(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Qc.apply(s,arguments),Km(s)}function g$(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=Qse(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[zy(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Am),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return g$().domain(e).range(t).unknown(n)},Qc.apply(i,arguments)}function b$(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[zy(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return b$().domain([e,t]).range(s).unknown(i)},Qc.apply(Km(o),arguments)}function y$(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[zy(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return y$().domain(e).range(t).unknown(r)},Qc.apply(s,arguments)}const A_=new Date,T_=new Date;function pi(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>pi(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(A_.setTime(+i),T_.setTime(+o),e(A_),e(T_),Math.floor(r(A_,T_))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const pw=pi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);pw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?pi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):pw);pw.range;const Bh=1e3,Vc=Bh*60,Uh=Vc*60,af=Uh*24,jA=af*7,CF=af*30,I_=af*365,Yp=pi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Bh)},(e,t)=>(t-e)/Bh,e=>e.getUTCSeconds());Yp.range;const NA=pi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bh)},(e,t)=>{e.setTime(+e+t*Vc)},(e,t)=>(t-e)/Vc,e=>e.getMinutes());NA.range;const wA=pi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Vc)},(e,t)=>(t-e)/Vc,e=>e.getUTCMinutes());wA.range;const SA=pi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Bh-e.getMinutes()*Vc)},(e,t)=>{e.setTime(+e+t*Uh)},(e,t)=>(t-e)/Uh,e=>e.getHours());SA.range;const CA=pi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Uh)},(e,t)=>(t-e)/Uh,e=>e.getUTCHours());CA.range;const Gy=pi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Vc)/af,e=>e.getDate()-1);Gy.range;const Z2=pi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/af,e=>e.getUTCDate()-1);Z2.range;const j$=pi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/af,e=>Math.floor(e/af));j$.range;function Px(e){return pi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Vc)/jA)}const eS=Px(0),xw=Px(1),Yie=Px(2),Kie=Px(3),_0=Px(4),Xie=Px(5),Qie=Px(6);eS.range;xw.range;Yie.range;Kie.range;_0.range;Xie.range;Qie.range;function Ox(e){return pi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/jA)}const tS=Ox(0),vw=Ox(1),Jie=Ox(2),Zie=Ox(3),E0=Ox(4),eoe=Ox(5),toe=Ox(6);tS.range;vw.range;Jie.range;Zie.range;E0.range;eoe.range;toe.range;const kA=pi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());kA.range;const _A=pi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_A.range;const nf=pi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());nf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});nf.range;const sf=pi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());sf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:pi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});sf.range;function N$(e,t,r,n,s,i){const o=[[Yp,1,Bh],[Yp,5,5*Bh],[Yp,15,15*Bh],[Yp,30,30*Bh],[i,1,Vc],[i,5,5*Vc],[i,15,15*Vc],[i,30,30*Vc],[s,1,Uh],[s,3,3*Uh],[s,6,6*Uh],[s,12,12*Uh],[n,1,af],[n,2,2*af],[r,1,jA],[t,1,CF],[t,3,3*CF],[e,1,I_]];function l(d,u,h){const m=u<d;m&&([d,u]=[u,d]);const p=h&&typeof h.range=="function"?h:c(d,u,h),v=p?p.range(d,+u+1):[];return m?v.reverse():v}function c(d,u,h){const m=Math.abs(u-d)/h,p=lA(([,,b])=>b).right(o,m);if(p===o.length)return e.every(KD(d/I_,u/I_,h));if(p===0)return pw.every(Math.max(KD(d,u,h),1));const[v,g]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return v.every(g)}return[l,c]}const[roe,aoe]=N$(sf,_A,tS,j$,CA,wA),[noe,soe]=N$(nf,kA,eS,Gy,SA,NA);function P_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function O_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function db(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function ioe(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=ub(s),u=hb(s),h=ub(i),m=hb(i),p=ub(o),v=hb(o),g=ub(l),b=hb(l),y=ub(c),C=hb(c),w={a:Q,A:U,b:J,B:Y,c:null,d:TF,e:TF,f:Doe,g:Boe,G:$oe,H:koe,I:_oe,j:Eoe,L:w$,m:Aoe,M:Toe,p:oe,q:M,Q:OF,s:MF,S:Ioe,u:Poe,U:Ooe,V:Moe,w:Roe,W:Foe,x:null,X:null,y:Loe,Y:Uoe,Z:Voe,"%":PF},k={a:V,A:H,b:ee,B:re,c:null,d:IF,e:IF,f:Woe,g:rle,G:nle,H:qoe,I:zoe,j:Hoe,L:C$,m:Goe,M:Yoe,p:ae,q:ne,Q:OF,s:MF,S:Koe,u:Xoe,U:Qoe,V:Joe,w:Zoe,W:ele,x:null,X:null,y:tle,Y:ale,Z:sle,"%":PF},S={a:L,A:P,b:O,B:Z,c:z,d:DF,e:DF,f:Noe,g:EF,G:_F,H:AF,I:AF,j:goe,L:joe,m:voe,M:boe,p:A,q:xoe,Q:Soe,s:Coe,S:yoe,u:uoe,U:hoe,V:foe,w:doe,W:moe,x:K,X:B,y:EF,Y:_F,Z:poe,"%":woe};w.x=D(r,w),w.X=D(n,w),w.c=D(t,w),k.x=D(r,k),k.X=D(n,k),k.c=D(t,k);function D(ie,G){return function(de){var X=[],le=-1,Se=0,ue=ie.length,se,ye,Ne;for(de instanceof Date||(de=new Date(+de));++le<ue;)ie.charCodeAt(le)===37&&(X.push(ie.slice(Se,le)),(ye=kF[se=ie.charAt(++le)])!=null?se=ie.charAt(++le):ye=se==="e"?" ":"0",(Ne=G[se])&&(se=Ne(de,ye)),X.push(se),Se=le+1);return X.push(ie.slice(Se,le)),X.join("")}}function E(ie,G){return function(de){var X=db(1900,void 0,1),le=T(X,ie,de+="",0),Se,ue;if(le!=de.length)return null;if("Q"in X)return new Date(X.Q);if("s"in X)return new Date(X.s*1e3+("L"in X?X.L:0));if(G&&!("Z"in X)&&(X.Z=0),"p"in X&&(X.H=X.H%12+X.p*12),X.m===void 0&&(X.m="q"in X?X.q:0),"V"in X){if(X.V<1||X.V>53)return null;"w"in X||(X.w=1),"Z"in X?(Se=O_(db(X.y,0,1)),ue=Se.getUTCDay(),Se=ue>4||ue===0?vw.ceil(Se):vw(Se),Se=Z2.offset(Se,(X.V-1)*7),X.y=Se.getUTCFullYear(),X.m=Se.getUTCMonth(),X.d=Se.getUTCDate()+(X.w+6)%7):(Se=P_(db(X.y,0,1)),ue=Se.getDay(),Se=ue>4||ue===0?xw.ceil(Se):xw(Se),Se=Gy.offset(Se,(X.V-1)*7),X.y=Se.getFullYear(),X.m=Se.getMonth(),X.d=Se.getDate()+(X.w+6)%7)}else("W"in X||"U"in X)&&("w"in X||(X.w="u"in X?X.u%7:"W"in X?1:0),ue="Z"in X?O_(db(X.y,0,1)).getUTCDay():P_(db(X.y,0,1)).getDay(),X.m=0,X.d="W"in X?(X.w+6)%7+X.W*7-(ue+5)%7:X.w+X.U*7-(ue+6)%7);return"Z"in X?(X.H+=X.Z/100|0,X.M+=X.Z%100,O_(X)):P_(X)}}function T(ie,G,de,X){for(var le=0,Se=G.length,ue=de.length,se,ye;le<Se;){if(X>=ue)return-1;if(se=G.charCodeAt(le++),se===37){if(se=G.charAt(le++),ye=S[se in kF?G.charAt(le++):se],!ye||(X=ye(ie,de,X))<0)return-1}else if(se!=de.charCodeAt(X++))return-1}return X}function A(ie,G,de){var X=d.exec(G.slice(de));return X?(ie.p=u.get(X[0].toLowerCase()),de+X[0].length):-1}function L(ie,G,de){var X=p.exec(G.slice(de));return X?(ie.w=v.get(X[0].toLowerCase()),de+X[0].length):-1}function P(ie,G,de){var X=h.exec(G.slice(de));return X?(ie.w=m.get(X[0].toLowerCase()),de+X[0].length):-1}function O(ie,G,de){var X=y.exec(G.slice(de));return X?(ie.m=C.get(X[0].toLowerCase()),de+X[0].length):-1}function Z(ie,G,de){var X=g.exec(G.slice(de));return X?(ie.m=b.get(X[0].toLowerCase()),de+X[0].length):-1}function z(ie,G,de){return T(ie,t,G,de)}function K(ie,G,de){return T(ie,r,G,de)}function B(ie,G,de){return T(ie,n,G,de)}function Q(ie){return o[ie.getDay()]}function U(ie){return i[ie.getDay()]}function J(ie){return c[ie.getMonth()]}function Y(ie){return l[ie.getMonth()]}function oe(ie){return s[+(ie.getHours()>=12)]}function M(ie){return 1+~~(ie.getMonth()/3)}function V(ie){return o[ie.getUTCDay()]}function H(ie){return i[ie.getUTCDay()]}function ee(ie){return c[ie.getUTCMonth()]}function re(ie){return l[ie.getUTCMonth()]}function ae(ie){return s[+(ie.getUTCHours()>=12)]}function ne(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var G=D(ie+="",w);return G.toString=function(){return ie},G},parse:function(ie){var G=E(ie+="",!1);return G.toString=function(){return ie},G},utcFormat:function(ie){var G=D(ie+="",k);return G.toString=function(){return ie},G},utcParse:function(ie){var G=E(ie+="",!0);return G.toString=function(){return ie},G}}}var kF={"-":"",_:" ",0:"0"},Ai=/^\s*\d+/,ooe=/^%/,loe=/[\\^$*+?|[\]().{}]/g;function Za(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function coe(e){return e.replace(loe,"\\$&")}function ub(e){return new RegExp("^(?:"+e.map(coe).join("|")+")","i")}function hb(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function doe(e,t,r){var n=Ai.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function uoe(e,t,r){var n=Ai.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function hoe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function foe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function moe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function _F(e,t,r){var n=Ai.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function EF(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function poe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function xoe(e,t,r){var n=Ai.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function voe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function DF(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function goe(e,t,r){var n=Ai.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function AF(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function boe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function yoe(e,t,r){var n=Ai.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function joe(e,t,r){var n=Ai.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Noe(e,t,r){var n=Ai.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function woe(e,t,r){var n=ooe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Soe(e,t,r){var n=Ai.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Coe(e,t,r){var n=Ai.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function TF(e,t){return Za(e.getDate(),t,2)}function koe(e,t){return Za(e.getHours(),t,2)}function _oe(e,t){return Za(e.getHours()%12||12,t,2)}function Eoe(e,t){return Za(1+Gy.count(nf(e),e),t,3)}function w$(e,t){return Za(e.getMilliseconds(),t,3)}function Doe(e,t){return w$(e,t)+"000"}function Aoe(e,t){return Za(e.getMonth()+1,t,2)}function Toe(e,t){return Za(e.getMinutes(),t,2)}function Ioe(e,t){return Za(e.getSeconds(),t,2)}function Poe(e){var t=e.getDay();return t===0?7:t}function Ooe(e,t){return Za(eS.count(nf(e)-1,e),t,2)}function S$(e){var t=e.getDay();return t>=4||t===0?_0(e):_0.ceil(e)}function Moe(e,t){return e=S$(e),Za(_0.count(nf(e),e)+(nf(e).getDay()===4),t,2)}function Roe(e){return e.getDay()}function Foe(e,t){return Za(xw.count(nf(e)-1,e),t,2)}function Loe(e,t){return Za(e.getFullYear()%100,t,2)}function Boe(e,t){return e=S$(e),Za(e.getFullYear()%100,t,2)}function Uoe(e,t){return Za(e.getFullYear()%1e4,t,4)}function $oe(e,t){var r=e.getDay();return e=r>=4||r===0?_0(e):_0.ceil(e),Za(e.getFullYear()%1e4,t,4)}function Voe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Za(t/60|0,"0",2)+Za(t%60,"0",2)}function IF(e,t){return Za(e.getUTCDate(),t,2)}function qoe(e,t){return Za(e.getUTCHours(),t,2)}function zoe(e,t){return Za(e.getUTCHours()%12||12,t,2)}function Hoe(e,t){return Za(1+Z2.count(sf(e),e),t,3)}function C$(e,t){return Za(e.getUTCMilliseconds(),t,3)}function Woe(e,t){return C$(e,t)+"000"}function Goe(e,t){return Za(e.getUTCMonth()+1,t,2)}function Yoe(e,t){return Za(e.getUTCMinutes(),t,2)}function Koe(e,t){return Za(e.getUTCSeconds(),t,2)}function Xoe(e){var t=e.getUTCDay();return t===0?7:t}function Qoe(e,t){return Za(tS.count(sf(e)-1,e),t,2)}function k$(e){var t=e.getUTCDay();return t>=4||t===0?E0(e):E0.ceil(e)}function Joe(e,t){return e=k$(e),Za(E0.count(sf(e),e)+(sf(e).getUTCDay()===4),t,2)}function Zoe(e){return e.getUTCDay()}function ele(e,t){return Za(vw.count(sf(e)-1,e),t,2)}function tle(e,t){return Za(e.getUTCFullYear()%100,t,2)}function rle(e,t){return e=k$(e),Za(e.getUTCFullYear()%100,t,2)}function ale(e,t){return Za(e.getUTCFullYear()%1e4,t,4)}function nle(e,t){var r=e.getUTCDay();return e=r>=4||r===0?E0(e):E0.ceil(e),Za(e.getUTCFullYear()%1e4,t,4)}function sle(){return"+0000"}function PF(){return"%"}function OF(e){return+e}function MF(e){return Math.floor(+e/1e3)}var Ev,_$,E$;ile({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ile(e){return Ev=ioe(e),_$=Ev.format,Ev.parse,E$=Ev.utcFormat,Ev.utcParse,Ev}function ole(e){return new Date(e)}function lle(e){return e instanceof Date?+e:+new Date(+e)}function EA(e,t,r,n,s,i,o,l,c,d){var u=mA(),h=u.invert,m=u.domain,p=d(".%L"),v=d(":%S"),g=d("%I:%M"),b=d("%I %p"),y=d("%a %d"),C=d("%b %d"),w=d("%B"),k=d("%Y");function S(D){return(c(D)<D?p:l(D)<D?v:o(D)<D?g:i(D)<D?b:n(D)<D?s(D)<D?y:C:r(D)<D?w:k)(D)}return u.invert=function(D){return new Date(h(D))},u.domain=function(D){return arguments.length?m(Array.from(D,lle)):m().map(ole)},u.ticks=function(D){var E=m();return e(E[0],E[E.length-1],D??10)},u.tickFormat=function(D,E){return E==null?S:d(E)},u.nice=function(D){var E=m();return(!D||typeof D.range!="function")&&(D=t(E[0],E[E.length-1],D??10)),D?m(m$(E,D)):u},u.copy=function(){return Wy(u,EA(e,t,r,n,s,i,o,l,c,d))},u}function cle(){return Qc.apply(EA(noe,soe,nf,kA,eS,Gy,SA,NA,Yp,_$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dle(){return Qc.apply(EA(roe,aoe,sf,_A,tS,Z2,CA,wA,Yp,E$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function rS(){var e=0,t=1,r,n,s,i,o=$o,l=!1,c;function d(h){return h==null||isNaN(h=+h)?c:o(s===0?.5:(h=(i(h)-r)*s,l?Math.max(0,Math.min(1,h)):h))}d.domain=function(h){return arguments.length?([e,t]=h,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(h){return arguments.length?(l=!!h,d):l},d.interpolator=function(h){return arguments.length?(o=h,d):o};function u(h){return function(m){var p,v;return arguments.length?([p,v]=m,o=h(p,v),d):[o(0),o(1)]}}return d.range=u(J0),d.rangeRound=u(fA),d.unknown=function(h){return arguments.length?(c=h,d):c},function(h){return i=h,r=h(e),n=h(t),s=r===n?0:1/(n-r),d}}function Xm(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function D$(){var e=Km(rS()($o));return e.copy=function(){return Xm(e,D$())},hf.apply(e,arguments)}function A$(){var e=vA(rS()).domain([1,10]);return e.copy=function(){return Xm(e,A$()).base(e.base())},hf.apply(e,arguments)}function T$(){var e=gA(rS());return e.copy=function(){return Xm(e,T$()).constant(e.constant())},hf.apply(e,arguments)}function DA(){var e=bA(rS());return e.copy=function(){return Xm(e,DA()).exponent(e.exponent())},hf.apply(e,arguments)}function ule(){return DA.apply(null,arguments).exponent(.5)}function I$(){var e=[],t=$o;function r(n){if(n!=null&&!isNaN(n=+n))return t((zy(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Am),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>Xse(e,i/n))},r.copy=function(){return I$(t).domain(e)},hf.apply(r,arguments)}function aS(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,d=$o,u,h=!1,m;function p(g){return isNaN(g=+g)?m:(g=.5+((g=+u(g))-i)*(n*g<n*i?l:c),d(h?Math.max(0,Math.min(1,g)):g))}p.domain=function(g){return arguments.length?([e,t,r]=g,s=u(e=+e),i=u(t=+t),o=u(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,p):[e,t,r]},p.clamp=function(g){return arguments.length?(h=!!g,p):h},p.interpolator=function(g){return arguments.length?(d=g,p):d};function v(g){return function(b){var y,C,w;return arguments.length?([y,C,w]=b,d=wie(g,[y,C,w]),p):[d(0),d(.5),d(1)]}}return p.range=v(J0),p.rangeRound=v(fA),p.unknown=function(g){return arguments.length?(m=g,p):m},function(g){return u=g,s=g(e),i=g(t),o=g(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,p}}function P$(){var e=Km(aS()($o));return e.copy=function(){return Xm(e,P$())},hf.apply(e,arguments)}function O$(){var e=vA(aS()).domain([.1,1,10]);return e.copy=function(){return Xm(e,O$()).base(e.base())},hf.apply(e,arguments)}function M$(){var e=gA(aS());return e.copy=function(){return Xm(e,M$()).constant(e.constant())},hf.apply(e,arguments)}function AA(){var e=bA(aS());return e.copy=function(){return Xm(e,AA()).exponent(e.exponent())},hf.apply(e,arguments)}function hle(){return AA.apply(null,arguments).exponent(.5)}const Db=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:dA,scaleDiverging:P$,scaleDivergingLog:O$,scaleDivergingPow:AA,scaleDivergingSqrt:hle,scaleDivergingSymlog:M$,scaleIdentity:f$,scaleImplicit:XD,scaleLinear:h$,scaleLog:p$,scaleOrdinal:cA,scalePoint:Zse,scalePow:yA,scaleQuantile:g$,scaleQuantize:b$,scaleRadial:v$,scaleSequential:D$,scaleSequentialLog:A$,scaleSequentialPow:DA,scaleSequentialQuantile:I$,scaleSequentialSqrt:ule,scaleSequentialSymlog:T$,scaleSqrt:Wie,scaleSymlog:x$,scaleThreshold:y$,scaleTime:cle,scaleUtc:dle,tickFormat:u$},Symbol.toStringTag,{value:"Module"}));var Mx=e=>e.chartData,fle=Kt([Mx],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),R$=(e,t,r,n)=>n?fle(e):Mx(e);function D0(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(zo(t)&&zo(r))return!0}return!1}function RF(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function mle(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,s,i;if(zo(r))s=r;else if(typeof r=="function")return;if(zo(n))i=n;else if(typeof n=="function")return;var o=[s,i];if(D0(o))return o}}function ple(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(D0(n))return RF(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[s,i]=e,o,l;if(s==="auto")t!=null&&(o=Math.min(...t));else if(Ir(s))o=s;else if(typeof s=="function")try{t!=null&&(o=s(t?.[0]))}catch{}else if(typeof s=="string"&&wR.test(s)){var c=wR.exec(s);if(c==null||t==null)o=void 0;else{var d=+c[1];o=t[0]-d}}else o=t?.[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(Ir(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t?.[1]))}catch{}else if(typeof i=="string"&&SR.test(i)){var u=SR.exec(i);if(u==null||t==null)l=void 0;else{var h=+u[1];l=t[1]+h}}else l=t?.[1];var m=[o,l];if(D0(m))return t==null?m:RF(m,t,r)}}}var Z0=1e9,xle={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},IA,Xn=!0,Wc="[DecimalError] ",ix=Wc+"Invalid argument: ",TA=Wc+"Exponent out of range: ",eg=Math.floor,Mp=Math.pow,vle=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Hl,wi=1e7,Bn=7,F$=9007199254740991,gw=eg(F$/Bn),Dr={};Dr.absoluteValue=Dr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Dr.comparedTo=Dr.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Dr.decimalPlaces=Dr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Bn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Dr.dividedBy=Dr.div=function(e){return zh(this,new this.constructor(e))};Dr.dividedToIntegerBy=Dr.idiv=function(e){var t=this,r=t.constructor;return An(zh(t,new r(e),0,1),r.precision)};Dr.equals=Dr.eq=function(e){return!this.cmp(e)};Dr.exponent=function(){return ai(this)};Dr.greaterThan=Dr.gt=function(e){return this.cmp(e)>0};Dr.greaterThanOrEqualTo=Dr.gte=function(e){return this.cmp(e)>=0};Dr.isInteger=Dr.isint=function(){return this.e>this.d.length-2};Dr.isNegative=Dr.isneg=function(){return this.s<0};Dr.isPositive=Dr.ispos=function(){return this.s>0};Dr.isZero=function(){return this.s===0};Dr.lessThan=Dr.lt=function(e){return this.cmp(e)<0};Dr.lessThanOrEqualTo=Dr.lte=function(e){return this.cmp(e)<1};Dr.logarithm=Dr.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Hl))throw Error(Wc+"NaN");if(r.s<1)throw Error(Wc+(r.s?"NaN":"-Infinity"));return r.eq(Hl)?new n(0):(Xn=!1,t=zh(iy(r,i),iy(e,i),i),Xn=!0,An(t,s))};Dr.minus=Dr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?U$(t,e):L$(t,(e.s=-e.s,e))};Dr.modulo=Dr.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(Wc+"NaN");return r.s?(Xn=!1,t=zh(r,e,0,1).times(e),Xn=!0,r.minus(t)):An(new n(r),s)};Dr.naturalExponential=Dr.exp=function(){return B$(this)};Dr.naturalLogarithm=Dr.ln=function(){return iy(this)};Dr.negated=Dr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Dr.plus=Dr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?L$(t,e):U$(t,(e.s=-e.s,e))};Dr.precision=Dr.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ix+e);if(t=ai(s)+1,n=s.d.length-1,r=n*Bn+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Dr.squareRoot=Dr.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Wc+"NaN")}for(e=ai(l),Xn=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Iu(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=eg((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(zh(l,i,o+2)).times(.5),Iu(i.d).slice(0,o)===(t=Iu(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(An(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Xn=!0,An(n,r)};Dr.times=Dr.mul=function(e){var t,r,n,s,i,o,l,c,d,u=this,h=u.constructor,m=u.d,p=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,r=u.e+e.e,c=m.length,d=p.length,c<d&&(i=m,m=p,p=i,o=c,c=d,d=o),i=[],o=c+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+p[n]*m[s-n-1]+t,i[s--]=l%wi|0,t=l/wi|0;i[s]=(i[s]+t)%wi|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Xn?An(e,h.precision):e};Dr.toDecimalPlaces=Dr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Hu(e,0,Z0),t===void 0?t=n.rounding:Hu(t,0,8),An(r,e+ai(r)+1,t))};Dr.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=jx(n,!0):(Hu(e,0,Z0),t===void 0?t=s.rounding:Hu(t,0,8),n=An(new s(n),e+1,t),r=jx(n,!0,e+1)),r};Dr.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?jx(s):(Hu(e,0,Z0),t===void 0?t=i.rounding:Hu(t,0,8),n=An(new i(s),e+ai(s)+1,t),r=jx(n.abs(),!1,e+ai(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Dr.toInteger=Dr.toint=function(){var e=this,t=e.constructor;return An(new t(e),ai(e)+1,t.rounding)};Dr.toNumber=function(){return+this};Dr.toPower=Dr.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(Hl);if(l=new c(l),!l.s){if(e.s<1)throw Error(Wc+"Infinity");return l}if(l.eq(Hl))return l;if(n=c.precision,e.eq(Hl))return An(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=F$){for(s=new c(Hl),t=Math.ceil(n/Bn+4),Xn=!1;r%2&&(s=s.times(l),LF(s.d,t)),r=eg(r/2),r!==0;)l=l.times(l),LF(l.d,t);return Xn=!0,e.s<0?new c(Hl).div(s):An(s,n)}}else if(i<0)throw Error(Wc+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Xn=!1,s=e.times(iy(l,n+d)),Xn=!0,s=B$(s),s.s=i,s};Dr.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=ai(s),n=jx(s,r<=i.toExpNeg||r>=i.toExpPos)):(Hu(e,1,Z0),t===void 0?t=i.rounding:Hu(t,0,8),s=An(new i(s),e,t),r=ai(s),n=jx(s,e<=r||r<=i.toExpNeg,e)),n};Dr.toSignificantDigits=Dr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Hu(e,1,Z0),t===void 0?t=n.rounding:Hu(t,0,8)),An(new n(r),e,t)};Dr.toString=Dr.valueOf=Dr.val=Dr.toJSON=Dr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=ai(e),r=e.constructor;return jx(e,t<=r.toExpNeg||t>=r.toExpPos)};function L$(e,t){var r,n,s,i,o,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Xn?An(t,h):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=d.length):(n=d,s=o,l=c.length),o=Math.ceil(h/Bn),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/wi|0,c[i]%=wi;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Xn?An(t,h):t}function Hu(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ix+e)}function Iu(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Bn-n.length,r&&(i+=Nm(r)),i+=n;o=e[t],n=o+"",r=Bn-n.length,r&&(i+=Nm(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var zh=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%wi|0,o=i/wi|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*wi+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,d,u,h,m,p,v,g,b,y,C,w,k,S,D,E,T,A=n.constructor,L=n.s==s.s?1:-1,P=n.d,O=s.d;if(!n.s)return new A(n);if(!s.s)throw Error(Wc+"Division by zero");for(c=n.e-s.e,E=O.length,S=P.length,p=new A(L),v=p.d=[],d=0;O[d]==(P[d]||0);)++d;if(O[d]>(P[d]||0)&&--c,i==null?C=i=A.precision:o?C=i+(ai(n)-ai(s))+1:C=i,C<0)return new A(0);if(C=C/Bn+2|0,d=0,E==1)for(u=0,O=O[0],C++;(d<S||u)&&C--;d++)w=u*wi+(P[d]||0),v[d]=w/O|0,u=w%O|0;else{for(u=wi/(O[0]+1)|0,u>1&&(O=e(O,u),P=e(P,u),E=O.length,S=P.length),k=E,g=P.slice(0,E),b=g.length;b<E;)g[b++]=0;T=O.slice(),T.unshift(0),D=O[0],O[1]>=wi/2&&++D;do u=0,l=t(O,g,E,b),l<0?(y=g[0],E!=b&&(y=y*wi+(g[1]||0)),u=y/D|0,u>1?(u>=wi&&(u=wi-1),h=e(O,u),m=h.length,b=g.length,l=t(h,g,m,b),l==1&&(u--,r(h,E<m?T:O,m))):(u==0&&(l=u=1),h=O.slice()),m=h.length,m<b&&h.unshift(0),r(g,h,b),l==-1&&(b=g.length,l=t(O,g,E,b),l<1&&(u++,r(g,E<b?T:O,b))),b=g.length):l===0&&(u++,g=[0]),v[d++]=u,l&&g[0]?g[b++]=P[k]||0:(g=[P[k]],b=1);while((k++<S||g[0]!==void 0)&&C--)}return v[0]||v.shift(),p.e=c,An(p,o?i+ai(p)+1:i)}}();function B$(e,t){var r,n,s,i,o,l,c=0,d=0,u=e.constructor,h=u.precision;if(ai(e)>16)throw Error(TA+ai(e));if(!e.s)return new u(Hl);for(Xn=!1,l=h,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(Mp(2,d))/Math.LN10*2+5|0,l+=n,r=s=i=new u(Hl),u.precision=l;;){if(s=An(s.times(e),l),r=r.times(++c),o=i.plus(zh(s,r,l)),Iu(o.d).slice(0,l)===Iu(i.d).slice(0,l)){for(;d--;)i=An(i.times(i),l);return u.precision=h,t==null?(Xn=!0,An(i,h)):i}i=o}}function ai(e){for(var t=e.e*Bn,r=e.d[0];r>=10;r/=10)t++;return t}function M_(e,t,r){if(t>e.LN10.sd())throw Xn=!0,r&&(e.precision=r),Error(Wc+"LN10 precision limit exceeded");return An(new e(e.LN10),t)}function Nm(e){for(var t="";e--;)t+="0";return t}function iy(e,t){var r,n,s,i,o,l,c,d,u,h=1,m=10,p=e,v=p.d,g=p.constructor,b=g.precision;if(p.s<1)throw Error(Wc+(p.s?"NaN":"-Infinity"));if(p.eq(Hl))return new g(0);if(t==null?(Xn=!1,d=b):d=t,p.eq(10))return t==null&&(Xn=!0),M_(g,d);if(d+=m,g.precision=d,r=Iu(v),n=r.charAt(0),i=ai(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=Iu(p.d),n=r.charAt(0),h++;i=ai(p),n>1?(p=new g("0."+r),i++):p=new g(n+"."+r.slice(1))}else return c=M_(g,d+2,b).times(i+""),p=iy(new g(n+"."+r.slice(1)),d-m).plus(c),g.precision=b,t==null?(Xn=!0,An(p,b)):p;for(l=o=p=zh(p.minus(Hl),p.plus(Hl),d),u=An(p.times(p),d),s=3;;){if(o=An(o.times(u),d),c=l.plus(zh(o,new g(s),d)),Iu(c.d).slice(0,d)===Iu(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(M_(g,d+2,b).times(i+""))),l=zh(l,new g(h),d),g.precision=b,t==null?(Xn=!0,An(l,b)):l;l=c,s+=2}}function FF(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=eg(r/Bn),e.d=[],n=(r+1)%Bn,r<0&&(n+=Bn),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Bn;n<s;)e.d.push(+t.slice(n,n+=Bn));t=t.slice(n),n=Bn-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Xn&&(e.e>gw||e.e<-gw))throw Error(TA+r)}else e.s=0,e.e=0,e.d=[0];return e}function An(e,t,r){var n,s,i,o,l,c,d,u,h=e.d;for(o=1,i=h[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Bn,s=t,d=h[u=0];else{if(u=Math.ceil((n+1)/Bn),i=h.length,u>=i)return e;for(d=i=h[u],o=1;i>=10;i/=10)o++;n%=Bn,s=n-Bn+o}if(r!==void 0&&(i=Mp(10,o-s-1),l=d/i%10|0,c=t<0||h[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?d/Mp(10,o-s):0:h[u-1])%10&1||r==(e.s<0?8:7))),t<1||!h[0])return c?(i=ai(e),h.length=1,t=t-i-1,h[0]=Mp(10,(Bn-t%Bn)%Bn),e.e=eg(-t/Bn)||0):(h.length=1,h[0]=e.e=e.s=0),e;if(n==0?(h.length=u,i=1,u--):(h.length=u+1,i=Mp(10,Bn-n),h[u]=s>0?(d/Mp(10,o-s)%Mp(10,s)|0)*i:0),c)for(;;)if(u==0){(h[0]+=i)==wi&&(h[0]=1,++e.e);break}else{if(h[u]+=i,h[u]!=wi)break;h[u--]=0,i=1}for(n=h.length;h[--n]===0;)h.pop();if(Xn&&(e.e>gw||e.e<-gw))throw Error(TA+ai(e));return e}function U$(e,t){var r,n,s,i,o,l,c,d,u,h,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),Xn?An(t,p):t;if(c=e.d,h=t.d,n=t.e,d=e.e,c=c.slice(),o=d-n,o){for(u=o<0,u?(r=c,o=-o,l=h.length):(r=h,n=d,l=c.length),s=Math.max(Math.ceil(p/Bn),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=h.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=h[s]){u=c[s]<h[s];break}o=0}for(u&&(r=c,c=h,h=r,t.s=-t.s),l=c.length,s=h.length-l;s>0;--s)c[l++]=0;for(s=h.length;s>o;){if(c[--s]<h[s]){for(i=s;i&&c[--i]===0;)c[i]=wi-1;--c[i],c[s]+=wi}c[s]-=h[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Xn?An(t,p):t):new m(0)}function jx(e,t,r){var n,s=ai(e),i=Iu(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Nm(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Nm(-s-1)+i,r&&(n=r-o)>0&&(i+=Nm(n))):s>=o?(i+=Nm(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Nm(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Nm(n))),e.s<0?"-"+i:i}function LF(e,t){if(e.length>t)return e.length=t,!0}function $$(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ix+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return FF(o,i.toString())}else if(typeof i!="string")throw Error(ix+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,vle.test(i))FF(o,i);else throw Error(ix+i)}if(s.prototype=Dr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=$$,s.config=s.set=gle,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function gle(e){if(!e||typeof e!="object")throw Error(Wc+"Object expected");var t,r,n,s=["precision",1,Z0,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(eg(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(ix+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(ix+r+": "+n);return this}var IA=$$(xle);Hl=new IA(1);const gn=IA;var ble=e=>e,V$={},q$=e=>e===V$,BF=e=>function t(){return arguments.length===0||arguments.length===1&&q$(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},z$=(e,t)=>e===1?t:BF(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];var i=n.filter(o=>o!==V$).length;return i>=e?t(...n):z$(e-i,BF(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var d=n.map(u=>q$(u)?l.shift():u);return t(...d,...l)}))}),nS=e=>z$(e.length,e),e5=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},yle=nS((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),jle=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return ble;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}},t5=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),H$=e=>{var t=null,r=null;return function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return t&&s.every((o,l)=>{var c;return o===((c=t)===null||c===void 0?void 0:c[l])})||(t=s,r=e(...s)),r}};function W$(e){var t;return e===0?t=1:t=Math.floor(new gn(e).abs().log(10).toNumber())+1,t}function G$(e,t,r){for(var n=new gn(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}nS((e,t,r)=>{var n=+e,s=+t;return n+r*(s-n)});nS((e,t,r)=>{var n=t-+e;return n=n||1/0,(r-e)/n});nS((e,t,r)=>{var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});var Y$=e=>{var[t,r]=e,[n,s]=[t,r];return t>r&&([n,s]=[r,t]),[n,s]},K$=(e,t,r)=>{if(e.lte(0))return new gn(0);var n=W$(e.toNumber()),s=new gn(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new gn(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?new gn(c.toNumber()):new gn(Math.ceil(c.toNumber()))},Nle=(e,t,r)=>{var n=new gn(1),s=new gn(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new gn(10).pow(W$(e)-1),s=new gn(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new gn(Math.floor(e)))}else e===0?s=new gn(Math.floor((t-1)/2)):r||(s=new gn(Math.floor(e)));var o=Math.floor((t-1)/2),l=jle(yle(c=>s.add(new gn(c-o).mul(n)).toNumber()),e5);return l(0,t)},X$=function(t,r,n,s){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new gn(0),tickMin:new gn(0),tickMax:new gn(0)};var o=K$(new gn(r).sub(t).div(n-1),s,i),l;t<=0&&r>=0?l=new gn(0):(l=new gn(t).add(r).div(2),l=l.sub(new gn(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),d=Math.ceil(new gn(r).sub(l).div(o).toNumber()),u=c+d+1;return u>n?X$(t,r,n,s,i+1):(u<n&&(d=r>0?d+(n-u):d,c=r>0?c:c+(n-u)),{step:o,tickMin:l.sub(new gn(c).mul(o)),tickMax:l.add(new gn(d).mul(o))})};function wle(e){var[t,r]=e,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=Math.max(n,2),[o,l]=Y$([t,r]);if(o===-1/0||l===1/0){var c=l===1/0?[o,...e5(0,n-1).map(()=>1/0)]:[...e5(0,n-1).map(()=>-1/0),l];return t>r?t5(c):c}if(o===l)return Nle(o,n,s);var{step:d,tickMin:u,tickMax:h}=X$(o,l,i,s,0),m=G$(u,h.add(new gn(.1).mul(d)),d);return t>r?t5(m):m}function Sle(e,t){var[r,n]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[i,o]=Y$([r,n]);if(i===-1/0||o===1/0)return[r,n];if(i===o)return[i];var l=Math.max(t,2),c=K$(new gn(o).sub(i).div(l-1),s,0),d=[...G$(new gn(i),new gn(o),c),o];return s===!1&&(d=d.map(u=>Math.round(u))),r>n?t5(d):d}var Cle=H$(wle),kle=H$(Sle),_le=e=>e.rootProps.barCategoryGap,sS=e=>e.rootProps.stackOffset,PA=e=>e.options.chartName,OA=e=>e.rootProps.syncId,Q$=e=>e.rootProps.syncMethod,MA=e=>e.options.eventEmitter,Rh={allowDuplicatedCategory:!0,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"category"},Bl={allowDataOverflow:!1,allowDuplicatedCategory:!0,radiusAxisId:0,scale:"auto",tick:!0,tickCount:5,type:"number"},iS=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},Ele={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Rh.angleAxisId,includeHidden:!1,name:void 0,reversed:Rh.reversed,scale:Rh.scale,tick:Rh.tick,tickCount:void 0,ticks:void 0,type:Rh.type,unit:void 0},Dle={allowDataOverflow:Bl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Bl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Bl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Bl.scale,tick:Bl.tick,tickCount:Bl.tickCount,ticks:void 0,type:Bl.type,unit:void 0},Ale={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Rh.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Rh.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Rh.scale,tick:Rh.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},Tle={allowDataOverflow:Bl.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Bl.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Bl.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Bl.scale,tick:Bl.tick,tickCount:Bl.tickCount,ticks:void 0,type:"category",unit:void 0},RA=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?Ale:Ele,FA=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?Tle:Dle,oS=e=>e.polarOptions,LA=Kt([df,uf,Zi],Nae),J$=Kt([oS,LA],(e,t)=>{if(e!=null)return Fm(e.innerRadius,t,0)}),Z$=Kt([oS,LA],(e,t)=>{if(e!=null)return Fm(e.outerRadius,t,t*.8)}),Ile=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},eV=Kt([oS],Ile);Kt([RA,eV],iS);var tV=Kt([LA,J$,Z$],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});Kt([FA,tV],iS);var Ple=Kt([Zn,oS,J$,Z$,df,uf],(e,t,r,n,s,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:d}=t;return{cx:Fm(o,s,s/2),cy:Fm(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:d,clockWise:!1}}}),Ti=(e,t)=>t,lS=(e,t,r)=>r;function UF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UF(Object(r),!0).forEach(function(n){Ole(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ole(e,t,r){return(t=Mle(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mle(e){var t=Rle(e,"string");return typeof t=="symbol"?t:t+""}function Rle(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var r5=[0,"auto"],Fl={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},ff=(e,t)=>{var r=e.cartesianAxis.xAxis[t];return r??Fl},Ll={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:r5,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:Y2},Qm=(e,t)=>{var r=e.cartesianAxis.yAxis[t];return r??Ll},Fle={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},BA=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??Fle},gl=(e,t,r)=>{switch(t){case"xAxis":return ff(e,r);case"yAxis":return Qm(e,r);case"zAxis":return BA(e,r);case"angleAxis":return RA(e,r);case"radiusAxis":return FA(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Lle=(e,t,r)=>{switch(t){case"xAxis":return ff(e,r);case"yAxis":return Qm(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},Yy=(e,t,r)=>{switch(t){case"xAxis":return ff(e,r);case"yAxis":return Qm(e,r);case"angleAxis":return RA(e,r);case"radiusAxis":return FA(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},rV=e=>e.graphicalItems.countOfBars>0;function aV(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var nV=e=>e.graphicalItems.cartesianItems,Ble=Kt([Ti,lS],aV),sV=(e,t,r)=>e.filter(r).filter(n=>t?.includeHidden===!0?!0:!n.hide),Ky=Kt([nV,gl,Ble],sV),iV=e=>e.filter(t=>t.stackId===void 0),Ule=Kt([Ky],iV),oV=e=>e.map(t=>t.data).filter(Boolean).flat(1),$le=Kt([Ky],oV),lV=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:s}=t;return e.length>0?e:r.slice(n,s+1)},cS=Kt([$le,R$],lV),cV=(e,t,r)=>t?.dataKey!=null?e.map(n=>({value:Zl(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(s=>({value:Zl(s,n)}))):e.map(n=>({value:n})),dS=Kt([cS,gl,Ky],cV);function dV(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Rx(e){return e.filter(t=>zu(t)||t instanceof Date).map(Number).filter(t=>ac(t)===!1)}function Vle(e,t,r){return!r||typeof t!="number"||ac(t)?[]:r.length?Rx(r.flatMap(n=>{var s=Zl(e,n.dataKey),i,o;if(Array.isArray(s)?[i,o]=s:i=o=s,!(!zo(i)||!zo(o)))return[t-i,t+o]})):[]}var uV=(e,t,r)=>{var n={},s=t.reduce((i,o)=>(o.stackId==null||(i[o.stackId]==null&&(i[o.stackId]=[]),i[o.stackId].push(o)),i),n);return Object.fromEntries(Object.entries(s).map(i=>{var[o,l]=i,c=l.map(d=>d.dataKey);return[o,{stackedData:Fae(e,c,r),graphicalItems:l}]}))},a5=Kt([cS,Ky,sS],uV),hV=(e,t,r)=>{var{dataStartIndex:n,dataEndIndex:s}=t;if(r!=="zAxis"){var i=Uae(e,n,s);if(!(i!=null&&i[0]===0&&i[1]===0))return i}},qle=Kt([a5,Mx,Ti],hV),fV=(e,t,r,n)=>r.length>0?e.flatMap(s=>r.flatMap(i=>{var o,l,c=(o=i.errorBars)===null||o===void 0?void 0:o.filter(u=>dV(n,u)),d=Zl(s,(l=t.dataKey)!==null&&l!==void 0?l:i.dataKey);return{value:d,errorDomain:Vle(s,d,c)}})).filter(Boolean):t?.dataKey!=null?e.map(s=>({value:Zl(s,t.dataKey),errorDomain:[]})):e.map(s=>({value:s,errorDomain:[]})),zle=Kt(cS,gl,Ule,Ti,fV);function Hle(e){var{value:t}=e;if(zu(t)||t instanceof Date)return t}var Wle=e=>{var t=e.flatMap(n=>[n.value,n.errorDomain]).flat(1),r=Rx(t);if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Gle=(e,t,r)=>{var n=e.map(Hle).filter(s=>s!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&O9(n))?t$(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},UA=e=>{var t;if(e==null||!("domain"in e))return r5;if(e.domain!=null)return e.domain;if(e.ticks!=null){if(e.type==="number"){var r=Rx(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:r5},$A=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r.filter(Boolean);if(s.length!==0){var i=s.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},mV=e=>e.referenceElements.dots,tg=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),Yle=Kt([mV,Ti,lS],tg),pV=e=>e.referenceElements.areas,Kle=Kt([pV,Ti,lS],tg),xV=e=>e.referenceElements.lines,Xle=Kt([xV,Ti,lS],tg),vV=(e,t)=>{var r=Rx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Qle=Kt(Yle,Ti,vV),gV=(e,t)=>{var r=Rx(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Jle=Kt([Kle,Ti],gV),bV=(e,t)=>{var r=Rx(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]},Zle=Kt(Xle,Ti,bV),ece=Kt(Qle,Zle,Jle,(e,t,r)=>$A(e,r,t)),tce=Kt([gl],UA),yV=(e,t,r,n,s)=>{var i=mle(t,e.allowDataOverflow);return i??ple(t,$A(r,s,Wle(n)),e.allowDataOverflow)},rce=Kt([gl,tce,qle,zle,ece],yV),ace=[0,1],jV=(e,t,r,n,s,i,o)=>{if(!(e==null||r==null||r.length===0)){var{dataKey:l,type:c}=e,d=cf(t,i);return d&&l==null?t$(0,r.length):c==="category"?Gle(n,e,d):s==="expand"?ace:o}},VA=Kt([gl,Zn,cS,dS,sS,Ti,rce],jV),NV=(e,t,r,n,s)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&s==="radiusAxis"?"band":t==="radial"&&s==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat($y(i));return l in Db?l:"point"}}},Xy=Kt([gl,Zn,rV,PA,Ti],NV);function nce(e){if(e!=null){if(e in Db)return Db[e]();var t="scale".concat($y(e));if(t in Db)return Db[t]()}}function qA(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var s=nce(t);if(s!=null){var i=s.domain(r).range(n);return Pae(i),i}}}var wV=(e,t,r)=>{var n=UA(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&D0(e))return Cle(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&D0(e))return kle(e,t.tickCount,t.allowDecimals)}},zA=Kt([VA,Yy,Xy],wV),SV=(e,t,r,n)=>{if(n!=="angleAxis"&&e?.type==="number"&&D0(t)&&Array.isArray(r)&&r.length>0){var s=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(s,i),Math.max(o,l)]}return t},sce=Kt([gl,VA,zA,Ti],SV),ice=Kt(dS,gl,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(Rx(e.map(l=>l.value))).sort((l,c)=>l-c);if(n.length<2)return 1/0;var s=n[n.length-1]-n[0];if(s===0)return 1/0;for(var i=0;i<n.length-1;i++){var o=n[i+1]-n[i];r=Math.min(r,o)}return r/s}}),CV=Kt(ice,Zn,_le,Zi,(e,t,r,n)=>n,(e,t,r,n,s)=>{if(!zo(e))return 0;var i=t==="vertical"?n.height:n.width;if(s==="gap")return e*i/2;if(s==="no-gap"){var o=Fm(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),oce=(e,t)=>{var r=ff(e,t);return r==null||typeof r.padding!="string"?0:CV(e,"xAxis",t,r.padding)},lce=(e,t)=>{var r=Qm(e,t);return r==null||typeof r.padding!="string"?0:CV(e,"yAxis",t,r.padding)},cce=Kt(ff,oce,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:s}=e;return typeof s=="string"?{left:t,right:t}:{left:((r=s.left)!==null&&r!==void 0?r:0)+t,right:((n=s.right)!==null&&n!==void 0?n:0)+t}}),dce=Kt(Qm,lce,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:s}=e;return typeof s=="string"?{top:t,bottom:t}:{top:((r=s.top)!==null&&r!==void 0?r:0)+t,bottom:((n=s.bottom)!==null&&n!==void 0?n:0)+t}}),uce=Kt([Zi,cce,X2,K2,(e,t,r)=>r],(e,t,r,n,s)=>{var{padding:i}=n;return s?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),hce=Kt([Zi,Zn,dce,X2,K2,(e,t,r)=>r],(e,t,r,n,s,i)=>{var{padding:o}=s;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),Qy=(e,t,r,n)=>{var s;switch(t){case"xAxis":return uce(e,r,n);case"yAxis":return hce(e,r,n);case"zAxis":return(s=BA(e,r))===null||s===void 0?void 0:s.range;case"angleAxis":return eV(e);case"radiusAxis":return tV(e,r);default:return}},kV=Kt([gl,Qy],iS),rg=Kt([gl,Xy,sce,kV],qA);Kt(Ky,Ti,(e,t)=>e.flatMap(r=>{var n;return(n=r.errorBars)!==null&&n!==void 0?n:[]}).filter(r=>dV(t,r)));function _V(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var uS=(e,t)=>t,hS=(e,t,r)=>r,fce=Kt(eA,uS,hS,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(_V)),mce=Kt(tA,uS,hS,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(_V)),EV=(e,t)=>({width:e.width,height:t.height}),pce=(e,t)=>{var r=typeof t.width=="number"?t.width:Y2;return{width:r,height:e.height}},xce=Kt(Zi,ff,EV),vce=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},gce=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},bce=Kt(uf,Zi,fce,uS,hS,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=EV(t,l);o==null&&(o=vce(t,n,e));var d=n==="top"&&!s||n==="bottom"&&s;i[l.id]=o-Number(d)*c.height,o+=(d?-1:1)*c.height}),i}),yce=Kt(df,Zi,mce,uS,hS,(e,t,r,n,s)=>{var i={},o;return r.forEach(l=>{var c=pce(t,l);o==null&&(o=gce(t,n,e));var d=n==="left"&&!s||n==="right"&&s;i[l.id]=o-Number(d)*c.width,o+=(d?-1:1)*c.width}),i}),jce=(e,t)=>{var r=Zi(e),n=ff(e,t);if(n!=null){var s=bce(e,n.orientation,n.mirror),i=s[t];return i==null?{x:r.left,y:0}:{x:r.left,y:i}}},Nce=(e,t)=>{var r=Zi(e),n=Qm(e,t);if(n!=null){var s=yce(e,n.orientation,n.mirror),i=s[t];return i==null?{x:0,y:r.top}:{x:i,y:r.top}}},wce=Kt(Zi,Qm,(e,t)=>{var r=typeof t.width=="number"?t.width:Y2;return{width:r,height:e.height}}),DV=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:s,type:i,dataKey:o}=r,l=cf(e,n),c=t.map(d=>d.value);if(o&&l&&i==="category"&&s&&O9(c))return c}},HA=Kt([Zn,dS,gl,Ti],DV),AV=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:s,scale:i}=r,o=cf(e,n);if(o&&(s==="number"||i!=="auto"))return t.map(l=>l.value)}},WA=Kt([Zn,dS,Yy,Ti],AV),$F=Kt([Zn,Lle,Xy,rg,HA,WA,Qy,zA,Ti],(e,t,r,n,s,i,o,l,c)=>{if(t==null)return null;var d=cf(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:s,isCategorical:d,niceTicks:l,range:o,realScaleType:r,scale:n}}),Sce=(e,t,r,n,s,i,o,l,c)=>{if(!(t==null||n==null)){var d=cf(e,c),{type:u,ticks:h,tickCount:m}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,v=u==="category"&&n.bandwidth?n.bandwidth()/p:0;v=c==="angleAxis"&&i!=null&&i.length>=2?$c(i[0]-i[1])*2*v:v;var g=h||s;if(g){var b=g.map((y,C)=>{var w=o?o.indexOf(y):y;return{index:C,coordinate:n(w)+v,value:y,offset:v}});return b.filter(y=>!ac(y.coordinate))}return d&&l?l.map((y,C)=>({coordinate:n(y)+v,value:y,index:C,offset:v})):n.ticks?n.ticks(m).map(y=>({coordinate:n(y)+v,value:y,offset:v})):n.domain().map((y,C)=>({coordinate:n(y)+v,value:o?o[y]:y,index:C,offset:v}))}},TV=Kt([Zn,Yy,Xy,rg,zA,Qy,HA,WA,Ti],Sce),Cce=(e,t,r,n,s,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=cf(e,o),{tickCount:c}=t,d=0;return d=o==="angleAxis"&&n?.length>=2?$c(n[0]-n[1])*2*d:d,l&&i?i.map((u,h)=>({coordinate:r(u)+d,value:u,index:h,offset:d})):r.ticks?r.ticks(c).map(u=>({coordinate:r(u)+d,value:u,offset:d})):r.domain().map((u,h)=>({coordinate:r(u)+d,value:s?s[u]:u,index:h,offset:d}))}},IV=Kt([Zn,Yy,rg,Qy,HA,WA,Ti],Cce),PV=Kt(gl,rg,(e,t)=>{if(!(e==null||t==null))return bw(bw({},e),{},{scale:t})}),kce=Kt([gl,Xy,VA,kV],qA);Kt((e,t,r)=>BA(e,r),kce,(e,t)=>{if(!(e==null||t==null))return bw(bw({},e),{},{scale:t})});var _ce=Kt([Zn,eA,tA],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),OV=e=>e.options.defaultTooltipEventType,MV=e=>e.options.validateTooltipEventTypes;function RV(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function GA(e,t){var r=OV(e),n=MV(e);return RV(t,r,n)}function Ece(e){return Xr(t=>GA(t,e))}var FV=(e,t)=>{var r,n=Number(t);if(!(ac(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},Dce=e=>e.tooltip.settings,wm={active:!1,index:null,dataKey:void 0,coordinate:void 0},Ace={itemInteraction:{click:wm,hover:wm},axisInteraction:{click:wm,hover:wm},keyboardInteraction:wm,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},LV=Kc({name:"tooltip",initialState:Ace,reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var r=qh(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:Tce,removeTooltipEntrySettings:Ice,setTooltipSettingsState:Pce,setActiveMouseOverItemIndex:Oce,mouseLeaveItem:lBe,mouseLeaveChart:BV,setActiveClickItemIndex:cBe,setMouseOverAxisIndex:UV,setMouseClickAxisIndex:Mce,setSyncInteraction:n5,setKeyboardInteraction:s5}=LV.actions,Rce=LV.reducer;function VF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VF(Object(r),!0).forEach(function(n){Fce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fce(e,t,r){return(t=Lce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lce(e){var t=Bce(e,"string");return typeof t=="symbol"?t:t+""}function Bce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uce(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function $ce(e){return e.index!=null}var $V=(e,t,r,n)=>{if(t==null)return wm;var s=Uce(e,t,r);if(s==null)return wm;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if($ce(s)){if(i)return Pj(Pj({},s),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n};return Pj(Pj({},wm),{},{coordinate:s.coordinate})},YA=(e,t)=>{var r=e?.index;if(r==null)return null;var n=Number(r);if(!zo(n))return r;var s=0,i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(s,Math.min(n,i)))},VV=(e,t,r,n,s,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],d=c==null?void 0:l(c.positions,i);if(d!=null)return d;var u=s?.[Number(i)];if(u)switch(r){case"horizontal":return{x:u.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:u.coordinate}}}},qV=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var s;return r==="hover"?s=e.itemInteraction.hover.dataKey:s=e.itemInteraction.click.dataKey,s==null&&n!=null?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(i=>{var o;return((o=i.settings)===null||o===void 0?void 0:o.dataKey)===s})},Jy=e=>e.options.tooltipPayloadSearcher,ag=e=>e.tooltip;function qF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function zF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qF(Object(r),!0).forEach(function(n){Vce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vce(e,t,r){return(t=qce(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qce(e){var t=zce(e,"string");return typeof t=="symbol"?t:t+""}function zce(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Hce(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Wce(e,t){return e??t}var zV=(e,t,r,n,s,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:d,dataEndIndex:u}=r,h=[];return e.reduce((m,p)=>{var v,{dataDefinedOnItem:g,settings:b}=p,y=Wce(g,l),C=Hce(y,d,u),w=(v=b?.dataKey)!==null&&v!==void 0?v:n?.dataKey,k=b?.nameKey,S;if(n!=null&&n.dataKey&&Array.isArray(C)&&!Array.isArray(C[0])&&o==="axis"?S=M9(C,n.dataKey,s):S=i(C,t,c,k),Array.isArray(S))S.forEach(E=>{var T=zF(zF({},b),{},{name:E.name,unit:E.unit,color:void 0,fill:void 0});m.push(CR({tooltipEntrySettings:T,dataKey:E.dataKey,payload:E.payload,value:Zl(E.payload,E.dataKey),name:E.name}))});else{var D;m.push(CR({tooltipEntrySettings:b,dataKey:w,payload:S,value:Zl(S,w),name:(D=Zl(S,k))!==null&&D!==void 0?D:b?.name}))}return m},h)}},Ii=e=>{var t=Zn(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},ng=e=>e.tooltip.settings.axisId,eo=e=>{var t=Ii(e),r=ng(e);return Yy(e,t,r)},KA=Kt([eo,Zn,rV,PA,Ii],NV),Gce=Kt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),Yce=Kt([Ii,ng],aV),fS=Kt([Gce,eo,Yce],sV),Kce=Kt([fS],oV),Fx=Kt([Kce,Mx],lV),XA=Kt([Fx,eo,fS],cV),Xce=Kt([eo],UA),Qce=Kt([Fx,fS,sS],uV),Jce=Kt([Qce,Mx,Ii],hV),Zce=Kt([fS],iV),ede=Kt([Fx,eo,Zce,Ii],fV),tde=Kt([mV,Ii,ng],tg),rde=Kt([tde,Ii],vV),ade=Kt([pV,Ii,ng],tg),nde=Kt([ade,Ii],gV),sde=Kt([xV,Ii,ng],tg),ide=Kt([sde,Ii],bV),ode=Kt([rde,ide,nde],$A),lde=Kt([eo,Xce,Jce,ede,ode],yV),HV=Kt([eo,Zn,Fx,XA,sS,Ii,lde],jV),cde=Kt([HV,eo,KA],wV),dde=Kt([eo,HV,cde,Ii],SV),WV=e=>{var t=Ii(e),r=ng(e),n=!1;return Qy(e,t,r,n)},GV=Kt([eo,WV],iS),YV=Kt([eo,KA,dde,GV],qA),ude=Kt([Zn,XA,eo,Ii],DV),hde=Kt([Zn,XA,eo,Ii],AV),fde=(e,t,r,n,s,i,o,l)=>{if(t){var{type:c}=t,d=cf(e,l);if(n){var u=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,h=c==="category"&&n.bandwidth?n.bandwidth()/u:0;return h=l==="angleAxis"&&s!=null&&s?.length>=2?$c(s[0]-s[1])*2*h:h,d&&o?o.map((m,p)=>({coordinate:n(m)+h,value:m,index:p,offset:h})):n.domain().map((m,p)=>({coordinate:n(m)+h,value:i?i[m]:m,index:p,offset:h}))}}},mf=Kt([Zn,eo,KA,YV,WV,ude,hde,Ii],fde),QA=Kt([OV,MV,Dce],(e,t,r)=>RV(r.shared,e,t)),KV=e=>e.tooltip.settings.trigger,JA=e=>e.tooltip.settings.defaultIndex,mS=Kt([ag,QA,KV,JA],$V),oy=Kt([mS,Fx],YA),XV=Kt([mf,oy],FV),mde=Kt([mS],e=>{if(e)return e.dataKey}),QV=Kt([ag,QA,KV,JA],qV),pde=Kt([df,uf,Zn,Zi,mf,JA,QV,Jy],VV),xde=Kt([mS,pde],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),vde=Kt([mS],e=>e.active),gde=Kt([QV,oy,Mx,eo,XV,Jy,QA],zV),bde=Kt([gde],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function HF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function WF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HF(Object(r),!0).forEach(function(n){yde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yde(e,t,r){return(t=jde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jde(e){var t=Nde(e,"string");return typeof t=="symbol"?t:t+""}function Nde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wde=()=>Xr(eo),Sde=()=>{var e=wde(),t=Xr(mf),r=Xr(YV);return FD(WF(WF({},e),{},{scale:r}),t)},JV=()=>Xr(PA),ZA=(e,t)=>t,ZV=(e,t,r)=>r,eT=(e,t,r,n)=>n,Cde=Kt(mf,e=>$2(e,t=>t.coordinate)),tT=Kt([ag,ZA,ZV,eT],$V),eq=Kt([tT,Fx],YA),kde=(e,t,r)=>{if(t!=null){var n=ag(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},tq=Kt([ag,ZA,ZV,eT],qV),yw=Kt([df,uf,Zn,Zi,mf,eT,tq,Jy],VV),_de=Kt([tT,yw],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),rq=Kt(mf,eq,FV),Ede=Kt([tq,eq,Mx,eo,rq,Jy,ZA],zV),Dde=Kt([tT],e=>({isActive:e.active,activeIndex:e.index})),Ade=(e,t,r,n,s,i,o,l)=>{if(!(!e||!t||!n||!s||!i)){var c=$ae(e.chartX,e.chartY,t,r,l);if(c){var d=qae(c,t),u=Tae(d,o,i,n,s),h=Vae(t,i,u,c);return{activeIndex:String(u),activeCoordinate:h}}}};function i5(){return i5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i5.apply(null,arguments)}function GF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GF(Object(r),!0).forEach(function(n){Tde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tde(e,t,r){return(t=Ide(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ide(e){var t=Pde(e,"string");return typeof t=="symbol"?t:t+""}function Pde(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ode(e){var{coordinate:t,payload:r,index:n,offset:s,tooltipAxisBandSize:i,layout:o,cursor:l,tooltipEventType:c,chartName:d}=e,u=t,h=r,m=n;if(!l||!u||d!=="ScatterChart"&&c!=="axis")return null;var p,v;if(d==="ScatterChart")p=u,v=zne;else if(d==="BarChart")p=Hne(o,u,s,i),v=Ese;else if(o==="radial"){var{cx:g,cy:b,radius:y,startAngle:C,endAngle:w}=ZU(u);p={cx:g,cy:b,startAngle:C,endAngle:w,innerRadius:y,outerRadius:y},v=Ise}else p={points:Pse(o,u,s)},v=kN;var k=typeof l=="object"&&"className"in l?l.className:void 0,S=Oj(Oj(Oj(Oj({stroke:"#ccc",pointerEvents:"none"},s),p),Dn(l,!1)),{},{payload:h,payloadIndex:m,className:pa("recharts-tooltip-cursor",k)});return N.isValidElement(l)?N.cloneElement(l,S):N.createElement(v,S)}function Mde(e){var t=Sde(),r=GU(),n=sA(),s=JV();return N.createElement(Ode,i5({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:r,layout:n,tooltipAxisBandSize:t,chartName:s}))}var aq=N.createContext(null),Rde=()=>N.useContext(aq),R_={exports:{}},YF;function Fde(){return YF||(YF=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,h,m){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||c,m),v=r?r+d:d;return c._events[v]?c._events[v].fn?c._events[v]=[c._events[v],p]:c._events[v].push(p):(c._events[v]=p,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,h;if(this._eventsCount===0)return d;for(h in u=this._events)t.call(u,h)&&d.push(r?h.slice(1):h);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var m=0,p=h.length,v=new Array(p);m<p;m++)v[m]=h[m].fn;return v},l.prototype.listenerCount=function(d){var u=r?r+d:d,h=this._events[u];return h?h.fn?1:h.length:0},l.prototype.emit=function(d,u,h,m,p,v){var g=r?r+d:d;if(!this._events[g])return!1;var b=this._events[g],y=arguments.length,C,w;if(b.fn){switch(b.once&&this.removeListener(d,b.fn,void 0,!0),y){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,u),!0;case 3:return b.fn.call(b.context,u,h),!0;case 4:return b.fn.call(b.context,u,h,m),!0;case 5:return b.fn.call(b.context,u,h,m,p),!0;case 6:return b.fn.call(b.context,u,h,m,p,v),!0}for(w=1,C=new Array(y-1);w<y;w++)C[w-1]=arguments[w];b.fn.apply(b.context,C)}else{var k=b.length,S;for(w=0;w<k;w++)switch(b[w].once&&this.removeListener(d,b[w].fn,void 0,!0),y){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,u);break;case 3:b[w].fn.call(b[w].context,u,h);break;case 4:b[w].fn.call(b[w].context,u,h,m);break;default:if(!C)for(S=1,C=new Array(y-1);S<y;S++)C[S-1]=arguments[S];b[w].fn.apply(b[w].context,C)}}return!0},l.prototype.on=function(d,u,h){return i(this,d,u,h,!1)},l.prototype.once=function(d,u,h){return i(this,d,u,h,!0)},l.prototype.removeListener=function(d,u,h,m){var p=r?r+d:d;if(!this._events[p])return this;if(!u)return o(this,p),this;var v=this._events[p];if(v.fn)v.fn===u&&(!m||v.once)&&(!h||v.context===h)&&o(this,p);else{for(var g=0,b=[],y=v.length;g<y;g++)(v[g].fn!==u||m&&!v[g].once||h&&v[g].context!==h)&&b.push(v[g]);b.length?this._events[p]=b.length===1?b[0]:b:o(this,p)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l}(R_)),R_.exports}var Lde=Fde();const Bde=Yu(Lde);var ly=new Bde,o5="recharts.syncEvent.tooltip",KF="recharts.syncEvent.brush";function Ude(e,t){if(t){var r=Number.parseInt(t,10);if(!ac(r))return e?.[r]}}var $de={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},nq=Kc({name:"options",initialState:$de,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),Vde=nq.reducer,{createEventEmitter:qde}=nq.actions;function zde(e){return e.tooltip.syncInteraction}var Hde={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},sq=Kc({name:"chartData",initialState:Hde,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:XF,setDataStartEndIndexes:Wde,setComputedData:dBe}=sq.actions,Gde=sq.reducer,iq=()=>{};function Yde(){var e=Xr(OA),t=Xr(MA),r=Ji(),n=Xr(Q$),s=Xr(mf),i=sA(),o=rA(),l=Xr(c=>c.rootProps.className);N.useEffect(()=>{if(e==null)return iq;var c=(d,u,h)=>{if(t!==h&&e===d){if(n==="index"){r(u);return}if(s!=null){var m;if(typeof n=="function"){var p={activeTooltipIndex:u.payload.index==null?void 0:Number(u.payload.index),isTooltipActive:u.payload.active,activeIndex:u.payload.index==null?void 0:Number(u.payload.index),activeLabel:u.payload.label,activeDataKey:u.payload.dataKey,activeCoordinate:u.payload.coordinate},v=n(s,p);m=s[v]}else n==="value"&&(m=s.find(D=>String(D.value)===u.payload.label));var{coordinate:g}=u.payload;if(m==null||u.payload.active===!1||g==null||o==null){r(n5({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}));return}var{x:b,y}=g,C=Math.min(b,o.x+o.width),w=Math.min(y,o.y+o.height),k={x:i==="horizontal"?m.coordinate:C,y:i==="horizontal"?w:m.coordinate},S=n5({active:u.payload.active,coordinate:k,dataKey:u.payload.dataKey,index:String(m.index),label:u.payload.label});r(S)}}};return ly.on(o5,c),()=>{ly.off(o5,c)}},[l,r,t,e,n,s,i,o])}function Kde(){var e=Xr(OA),t=Xr(MA),r=Ji();N.useEffect(()=>{if(e==null)return iq;var n=(s,i,o)=>{t!==o&&e===s&&r(Wde(i))};return ly.on(KF,n),()=>{ly.off(KF,n)}},[r,t,e])}function Xde(){var e=Ji();N.useEffect(()=>{e(qde())},[e]),Yde(),Kde()}function Qde(e,t,r,n,s,i){var o=Xr(m=>kde(m,e,t)),l=Xr(MA),c=Xr(OA),d=Xr(Q$),u=Xr(zde),h=u?.active;N.useEffect(()=>{if(!h&&c!=null&&l!=null){var m=n5({active:i,coordinate:r,dataKey:o,index:s,label:typeof n=="number"?String(n):n});ly.emit(o5,c,m,l)}},[h,r,o,s,n,l,c,d,i])}function QF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function JF(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?QF(Object(r),!0).forEach(function(n){Jde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):QF(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jde(e,t,r){return(t=Zde(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zde(e){var t=eue(e,"string");return typeof t=="symbol"?t:t+""}function eue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tue(e){return e.dataKey}function rue(e,t){return N.isValidElement(e)?N.cloneElement(e,t):typeof e=="function"?N.createElement(e,t):N.createElement(Nne,t)}var ZF=[],aue={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!qy.isSsr,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function nue(e){var t=Q0(e,aue),{active:r,allowEscapeViewBox:n,animationDuration:s,animationEasing:i,content:o,filterNull:l,isAnimationActive:c,offset:d,payloadUniqBy:u,position:h,reverseDirection:m,useTranslate3d:p,wrapperStyle:v,cursor:g,shared:b,trigger:y,defaultIndex:C,portal:w,axisId:k}=t,S=Ji(),D=typeof C=="number"?String(C):C;N.useEffect(()=>{S(Pce({shared:b,trigger:y,axisId:k,active:r,defaultIndex:D}))},[S,b,y,k,r,D]);var E=rA(),T=KU(),A=Ece(b),{activeIndex:L,isActive:P}=Xr(ee=>Dde(ee,A,y,D)),O=Xr(ee=>Ede(ee,A,y,D)),Z=Xr(ee=>rq(ee,A,y,D)),z=Xr(ee=>_de(ee,A,y,D)),K=O,B=Rde(),Q=r??P,[U,J]=xU([K,Q]),Y=A==="axis"?Z:void 0;Qde(A,y,z,Y,L,Q);var oe=w??B;if(oe==null)return null;var M=K??ZF;Q||(M=ZF),l&&M.length&&(M=uU(K.filter(ee=>ee.value!=null&&(ee.hide!==!0||t.includeHidden)),u,tue));var V=M.length>0,H=N.createElement(Dne,{allowEscapeViewBox:n,animationDuration:s,animationEasing:i,isAnimationActive:c,active:Q,coordinate:z,hasPayload:V,offset:d,position:h,reverseDirection:m,useTranslate3d:p,viewBox:E,wrapperStyle:v,lastBoundingBox:U,innerRef:J,hasPortalFromProps:!!w},rue(o,JF(JF({},t),{},{payload:M,label:Y,active:Q,coordinate:z,accessibilityLayer:T})));return N.createElement(N.Fragment,null,Ly.createPortal(H,oe),Q&&N.createElement(Mde,{cursor:g,tooltipEventType:A,coordinate:z,payload:K,index:L}))}var F_={},L_={},eL;function sue(){return eL||(eL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=0,s={}){typeof s!="object"&&(s={});let i=null,o=null,l=null,c=0,d=null,u;const{leading:h=!1,trailing:m=!0,maxWait:p}=s,v="maxWait"in s,g=v?Math.max(Number(p)||0,n):0,b=E=>(i!==null&&(u=r.apply(o,i)),i=o=null,c=E,u),y=E=>(c=E,d=setTimeout(S,n),h&&i!==null?b(E):u),C=E=>(d=null,m&&i!==null?b(E):u),w=E=>{if(l===null)return!0;const T=E-l,A=T>=n||T<0,L=v&&E-c>=g;return A||L},k=E=>{const T=l===null?0:E-l,A=n-T,L=g-(E-c);return v?Math.min(A,L):A},S=()=>{const E=Date.now();if(w(E))return C(E);d=setTimeout(S,k(E))},D=function(...E){const T=Date.now(),A=w(T);if(i=E,o=this,l=T,A){if(d===null)return y(T);if(v)return clearTimeout(d),d=setTimeout(S,n),b(T)}return d===null&&(d=setTimeout(S,n)),u};return D.cancel=()=>{d!==null&&clearTimeout(d),c=0,l=i=o=d=null},D.flush=()=>d===null?u:C(Date.now()),D}e.debounce=t}(L_)),L_}var tL;function iue(){return tL||(tL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sue();function r(n,s=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,s,{leading:o,maxWait:s,trailing:l})}e.throttle=r}(F_)),F_}var B_,rL;function oue(){return rL||(rL=1,B_=iue().throttle),B_}var lue=oue();const cue=Yu(lue);var Rb=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function aL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function U_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aL(Object(r),!0).forEach(function(n){due(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function due(e,t,r){return(t=uue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uue(e){var t=hue(e,"string");return typeof t=="symbol"?t:t+""}function hue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fue=N.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:s="100%",height:i="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:m,onResize:p,style:v={}}=e,g=N.useRef(null),b=N.useRef();b.current=p,N.useImperativeHandle(t,()=>g.current);var[y,C]=N.useState({containerWidth:n.width,containerHeight:n.height}),w=N.useCallback((S,D)=>{C(E=>{var T=Math.round(S),A=Math.round(D);return E.containerWidth===T&&E.containerHeight===A?E:{containerWidth:T,containerHeight:A}})},[]);N.useEffect(()=>{var S=A=>{var L,{width:P,height:O}=A[0].contentRect;w(P,O),(L=b.current)===null||L===void 0||L.call(b,P,O)};u>0&&(S=cue(S,u,{trailing:!0,leading:!1}));var D=new ResizeObserver(S),{width:E,height:T}=g.current.getBoundingClientRect();return w(E,T),D.observe(g.current),()=>{D.disconnect()}},[w,u]);var k=N.useMemo(()=>{var{containerWidth:S,containerHeight:D}=y;if(S<0||D<0)return null;Rb(Hp(s)||Hp(i),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,s,i),Rb(!r||r>0,"The aspect(%s) must be greater than zero.",r);var E=Hp(s)?S:s,T=Hp(i)?D:i;return r&&r>0&&(E?T=E/r:T&&(E=T*r),c&&T>c&&(T=c)),Rb(E>0||T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,E,T,s,i,o,l,r),N.Children.map(d,A=>N.cloneElement(A,{width:E,height:T,style:U_({width:E,height:T},A.props.style)}))},[r,d,i,c,l,o,y,s]);return N.createElement("div",{id:h?"".concat(h):void 0,className:pa("recharts-responsive-container",m),style:U_(U_({},v),{},{width:s,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:g},N.createElement("div",{style:{width:0,height:0,overflow:"visible"}},k))});function nL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function l5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nL(Object(r),!0).forEach(function(n){mue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mue(e,t,r){return(t=pue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pue(e){var t=xue(e,"string");return typeof t=="symbol"?t:t+""}function xue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dv={widthCache:{},cacheCount:0},vue=2e3,gue={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},sL="recharts_measurement_span";function bue(e){var t=l5({},e);return Object.keys(t).forEach(r=>{t[r]||delete t[r]}),t}var Fb=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||qy.isSsr)return{width:0,height:0};var n=bue(r),s=JSON.stringify({text:t,copyStyle:n});if(Dv.widthCache[s])return Dv.widthCache[s];try{var i=document.getElementById(sL);i||(i=document.createElement("span"),i.setAttribute("id",sL),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=l5(l5({},gue),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Dv.widthCache[s]=c,++Dv.cacheCount>vue&&(Dv.cacheCount=0,Dv.widthCache={}),c}catch{return{width:0,height:0}}},iL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,oL=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,yue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,jue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,oq={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Nue=Object.keys(oq),Xv="NaN";function wue(e,t){return e*oq[t]}class sl{static parse(t){var r,[,n,s]=(r=jue.exec(t))!==null&&r!==void 0?r:[];return new sl(parseFloat(n),s??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ac(t)&&(this.unit=""),r!==""&&!yue.test(r)&&(this.num=NaN,this.unit=""),Nue.includes(r)&&(this.num=wue(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new sl(NaN,""):new sl(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new sl(NaN,""):new sl(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sl(NaN,""):new sl(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new sl(NaN,""):new sl(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ac(this.num)}}function lq(e){if(e.includes(Xv))return Xv;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,s,i]=(r=iL.exec(t))!==null&&r!==void 0?r:[],o=sl.parse(n??""),l=sl.parse(i??""),c=s==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return Xv;t=t.replace(iL,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,[,u,h,m]=(d=oL.exec(t))!==null&&d!==void 0?d:[],p=sl.parse(u??""),v=sl.parse(m??""),g=h==="+"?p.add(v):p.subtract(v);if(g.isNaN())return Xv;t=t.replace(oL,g.toString())}return t}var lL=/\(([^()]*)\)/;function Sue(e){for(var t=e,r;(r=lL.exec(t))!=null;){var[,n]=r;t=t.replace(lL,lq(n))}return t}function Cue(e){var t=e.replace(/\s+/g,"");return t=Sue(t),t=lq(t),t}function kue(e){try{return Cue(e)}catch{return Xv}}function $_(e){var t=kue(e.slice(5,-1));return t===Xv?"":t}var _ue=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Eue=["dx","dy","angle","className","breakAll"];function c5(){return c5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c5.apply(null,arguments)}function cL(e,t){if(e==null)return{};var r,n,s=Due(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Due(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var cq=/[ \f\n\r\t\v\u2028\u2029]+/,dq=e=>{var{children:t,breakAll:r,style:n}=e;try{var s=[];ri(t)||(r?s=t.toString().split(""):s=t.toString().split(cq));var i=s.map(l=>({word:l,width:Fb(l,n).width})),o=r?0:Fb(" ",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}},Aue=(e,t,r,n,s)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,d=Ir(i),u=o,h=function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return P.reduce((O,Z)=>{var{word:z,width:K}=Z,B=O[O.length-1];if(B&&(n==null||s||B.width+K+r<Number(n)))B.words.push(z),B.width+=K+r;else{var Q={words:[z],width:K};O.push(Q)}return O},[])},m=h(t),p=L=>L.reduce((P,O)=>P.width>O.width?P:O);if(!d||s)return m;var v=m.length>i||p(m).width>Number(n);if(!v)return m;for(var g="…",b=L=>{var P=u.slice(0,L),O=dq({breakAll:c,style:l,children:P+g}).wordsWithComputedWidth,Z=h(O),z=Z.length>i||p(Z).width>Number(n);return[z,Z]},y=0,C=u.length-1,w=0,k;y<=C&&w<=u.length-1;){var S=Math.floor((y+C)/2),D=S-1,[E,T]=b(D),[A]=b(S);if(!E&&!A&&(y=S+1),E&&A&&(C=S-1),!E&&A){k=T;break}w++}return k||m},dL=e=>{var t=ri(e)?[]:e.toString().split(cq);return[{words:t}]},Tue=e=>{var{width:t,scaleToFit:r,children:n,style:s,breakAll:i,maxLines:o}=e;if((t||r)&&!qy.isSsr){var l,c,d=dq({breakAll:i,children:n,style:s});if(d){var{wordsWithComputedWidth:u,spaceWidth:h}=d;l=u,c=h}else return dL(n);return Aue({breakAll:i,children:n,maxLines:o,style:s},l,c,t,r)}return dL(n)},uL="#808080",rT=N.forwardRef((e,t)=>{var{x:r=0,y:n=0,lineHeight:s="1em",capHeight:i="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:d=uL}=e,u=cL(e,_ue),h=N.useMemo(()=>Tue({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:m,dy:p,angle:v,className:g,breakAll:b}=u,y=cL(u,Eue);if(!zu(r)||!zu(n))return null;var C=r+(Ir(m)?m:0),w=n+(Ir(p)?p:0),k;switch(c){case"start":k=$_("calc(".concat(i,")"));break;case"middle":k=$_("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(i," / 2))"));break;default:k=$_("calc(".concat(h.length-1," * -").concat(s,")"));break}var S=[];if(o){var D=h[0].width,{width:E}=u;S.push("scale(".concat(Ir(E)?E/D:1,")"))}return v&&S.push("rotate(".concat(v,", ").concat(C,", ").concat(w,")")),S.length&&(y.transform=S.join(" ")),N.createElement("text",c5({},Dn(y,!0),{ref:t,x:C,y:w,className:pa("recharts-text",g),textAnchor:l,fill:d.includes("url")?uL:d}),h.map((T,A)=>{var L=T.words.join(b?"":" ");return N.createElement("tspan",{x:C,dy:A===0?k:s,key:"".concat(L,"-").concat(A)},L)}))});rT.displayName="Text";var Iue=["offset"],Pue=["labelRef"];function hL(e,t){if(e==null)return{};var r,n,s=Oue(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Oue(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fL(Object(r),!0).forEach(function(n){Mue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mue(e,t,r){return(t=Rue(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rue(e){var t=Fue(e,"string");return typeof t=="symbol"?t:t+""}function Fue(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fh.apply(null,arguments)}var Lue=e=>{var{value:t,formatter:r}=e,n=ri(e.children)?t:e.children;return typeof r=="function"?r(n):n},aT=e=>e!=null&&typeof e=="function",Bue=(e,t)=>{var r=$c(t-e),n=Math.min(Math.abs(t-e),360);return r*n},Uue=(e,t,r)=>{var{position:n,viewBox:s,offset:i,className:o}=e,{cx:l,cy:c,innerRadius:d,outerRadius:u,startAngle:h,endAngle:m,clockWise:p}=s,v=(d+u)/2,g=Bue(h,m),b=g>=0?1:-1,y,C;n==="insideStart"?(y=h+b*i,C=p):n==="insideEnd"?(y=m-b*i,C=!p):n==="end"&&(y=m+b*i,C=p),C=g<=0?C:!C;var w=Qi(l,c,v,y),k=Qi(l,c,v,y+(C?1:-1)*359),S="M".concat(w.x,",").concat(w.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(C?0:1,`,
    `).concat(k.x,",").concat(k.y),D=ri(e.id)?Jb("recharts-radial-line-"):e.id;return N.createElement("text",Fh({},r,{dominantBaseline:"central",className:pa("recharts-radial-bar-label",o)}),N.createElement("defs",null,N.createElement("path",{id:D,d:S})),N.createElement("textPath",{xlinkHref:"#".concat(D)},t))},$ue=e=>{var{viewBox:t,offset:r,position:n}=e,{cx:s,cy:i,innerRadius:o,outerRadius:l,startAngle:c,endAngle:d}=t,u=(c+d)/2;if(n==="outside"){var{x:h,y:m}=Qi(s,i,l+r,u);return{x:h,y:m,textAnchor:h>=s?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:s,y:i,textAnchor:"middle",verticalAnchor:"end"};var p=(o+l)/2,{x:v,y:g}=Qi(s,i,p,u);return{x:v,y:g,textAnchor:"middle",verticalAnchor:"middle"}},Vue=(e,t)=>{var{parentViewBox:r,offset:n,position:s}=e,{x:i,y:o,width:l,height:c}=t,d=c>=0?1:-1,u=d*n,h=d>0?"end":"start",m=d>0?"start":"end",p=l>=0?1:-1,v=p*n,g=p>0?"end":"start",b=p>0?"start":"end";if(s==="top"){var y={x:i+l/2,y:o-d*n,textAnchor:"middle",verticalAnchor:h};return Qs(Qs({},y),r?{height:Math.max(o-r.y,0),width:l}:{})}if(s==="bottom"){var C={x:i+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:m};return Qs(Qs({},C),r?{height:Math.max(r.y+r.height-(o+c),0),width:l}:{})}if(s==="left"){var w={x:i-v,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return Qs(Qs({},w),r?{width:Math.max(w.x-r.x,0),height:c}:{})}if(s==="right"){var k={x:i+l+v,y:o+c/2,textAnchor:b,verticalAnchor:"middle"};return Qs(Qs({},k),r?{width:Math.max(r.x+r.width-k.x,0),height:c}:{})}var S=r?{width:l,height:c}:{};return s==="insideLeft"?Qs({x:i+v,y:o+c/2,textAnchor:b,verticalAnchor:"middle"},S):s==="insideRight"?Qs({x:i+l-v,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},S):s==="insideTop"?Qs({x:i+l/2,y:o+u,textAnchor:"middle",verticalAnchor:m},S):s==="insideBottom"?Qs({x:i+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},S):s==="insideTopLeft"?Qs({x:i+v,y:o+u,textAnchor:b,verticalAnchor:m},S):s==="insideTopRight"?Qs({x:i+l-v,y:o+u,textAnchor:g,verticalAnchor:m},S):s==="insideBottomLeft"?Qs({x:i+v,y:o+c-u,textAnchor:b,verticalAnchor:h},S):s==="insideBottomRight"?Qs({x:i+l-v,y:o+c-u,textAnchor:g,verticalAnchor:h},S):s&&typeof s=="object"&&(Ir(s.x)||Hp(s.x))&&(Ir(s.y)||Hp(s.y))?Qs({x:i+Fm(s.x,l),y:o+Fm(s.y,c),textAnchor:"end",verticalAnchor:"end"},S):Qs({x:i+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},S)},que=e=>"cx"in e&&Ir(e.cx);function $l(e){var{offset:t=5}=e,r=hL(e,Iue),n=Qs({offset:t},r),{viewBox:s,position:i,value:o,children:l,content:c,className:d="",textBreakAll:u,labelRef:h}=n,m=rA(),p=s||m;if(!p||ri(o)&&ri(l)&&!N.isValidElement(c)&&typeof c!="function")return null;if(N.isValidElement(c)){var{labelRef:v}=n,g=hL(n,Pue);return N.cloneElement(c,g)}var b;if(typeof c=="function"){if(b=N.createElement(c,n),N.isValidElement(b))return b}else b=Lue(n);var y=que(p),C=Dn(n,!0);if(y&&(i==="insideStart"||i==="insideEnd"||i==="end"))return Uue(n,b,C);var w=y?$ue(n):Vue(n,p);return N.createElement(rT,Fh({ref:h,className:pa("recharts-label",d)},C,w,{breakAll:u}),b)}$l.displayName="Label";var uq=e=>{var{cx:t,cy:r,angle:n,startAngle:s,endAngle:i,r:o,radius:l,innerRadius:c,outerRadius:d,x:u,y:h,top:m,left:p,width:v,height:g,clockWise:b,labelViewBox:y}=e;if(y)return y;if(Ir(v)&&Ir(g)){if(Ir(u)&&Ir(h))return{x:u,y:h,width:v,height:g};if(Ir(m)&&Ir(p))return{x:m,y:p,width:v,height:g}}if(Ir(u)&&Ir(h))return{x:u,y:h,width:0,height:0};if(Ir(t)&&Ir(r))return{cx:t,cy:r,startAngle:s||n||0,endAngle:i||n||0,innerRadius:c||0,outerRadius:d||l||o||0,clockWise:b};if(e.viewBox)return e.viewBox},zue=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?N.createElement($l,Fh({key:"label-implicit"},n)):zu(e)?N.createElement($l,Fh({key:"label-implicit",value:e},n)):N.isValidElement(e)?e.type===$l?N.cloneElement(e,Qs({key:"label-implicit"},n)):N.createElement($l,Fh({key:"label-implicit",content:e},n)):aT(e)?N.createElement($l,Fh({key:"label-implicit",content:e},n)):e&&typeof e=="object"?N.createElement($l,Fh({},e,{key:"label-implicit"},n)):null},Hue=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var{children:s,labelRef:i}=t,o=uq(t),l=L9(s,$l).map((d,u)=>N.cloneElement(d,{viewBox:r||o,key:"label-".concat(u)}));if(!n)return l;var c=zue(t.label,r||o,i);return[c,...l]};$l.parseViewBox=uq;$l.renderCallByParent=Hue;var V_={},q_={},mL;function Wue(){return mL||(mL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t}(q_)),q_}var z_={},pL;function Gue(){return pL||(pL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t}(z_)),z_}var xL;function Yue(){return xL||(xL=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wue(),r=Gue(),n=q3();function s(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=s}(V_)),V_}var H_,vL;function Kue(){return vL||(vL=1,H_=Yue().last),H_}var Xue=Kue();const Que=Yu(Xue);var Jue=["valueAccessor"],Zue=["data","dataKey","clockWise","id","textBreakAll"];function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jw.apply(null,arguments)}function gL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gL(Object(r),!0).forEach(function(n){ehe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ehe(e,t,r){return(t=the(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function the(e){var t=rhe(e,"string");return typeof t=="symbol"?t:t+""}function rhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yL(e,t){if(e==null)return{};var r,n,s=ahe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ahe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nhe=e=>Array.isArray(e.value)?Que(e.value):e.value;function ox(e){var{valueAccessor:t=nhe}=e,r=yL(e,Jue),{data:n,dataKey:s,clockWise:i,id:o,textBreakAll:l}=r,c=yL(r,Zue);return!n||!n.length?null:N.createElement(tf,{className:"recharts-label-list"},n.map((d,u)=>{var h=ri(s)?t(d,u):Zl(d&&d.payload,s),m=ri(o)?{}:{id:"".concat(o,"-").concat(u)};return N.createElement($l,jw({},Dn(d,!0),c,m,{parentViewBox:d.parentViewBox,value:h,textBreakAll:l,viewBox:$l.parseViewBox(ri(i)?d:bL(bL({},d),{},{clockWise:i})),key:"label-".concat(u),index:u}))}))}ox.displayName="LabelList";function she(e,t){return e?e===!0?N.createElement(ox,{key:"labelList-implicit",data:t}):N.isValidElement(e)||aT(e)?N.createElement(ox,{key:"labelList-implicit",data:t,content:e}):typeof e=="object"?N.createElement(ox,jw({data:t},e,{key:"labelList-implicit"})):null:null}function ihe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var{children:n}=e,s=L9(n,ox).map((o,l)=>N.cloneElement(o,{data:t,key:"labelList-".concat(l)}));if(!r)return s;var i=she(e.label,t);return[i,...s]}ox.renderCallByParent=ihe;function d5(){return d5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},d5.apply(null,arguments)}var hq=e=>{var{cx:t,cy:r,r:n,className:s}=e,i=pa("recharts-dot",s);return t===+t&&r===+r&&n===+n?N.createElement("circle",d5({},Dn(e,!1),R3(e),{className:i,cx:t,cy:r,r:n})):null},ohe={radiusAxis:{},angleAxis:{}},fq=Kc({name:"polarAxis",initialState:ohe,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:uBe,removeRadiusAxis:hBe,addAngleAxis:fBe,removeAngleAxis:mBe}=fq.actions,lhe=fq.reducer,che={countOfBars:0,cartesianItems:[],polarItems:[]},mq=Kc({name:"graphicalItems",initialState:che,reducers:{addBar(e){e.countOfBars+=1},removeBar(e){e.countOfBars-=1},addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:r,next:n}=t.payload,s=qh(e).cartesianItems.indexOf(r);s>-1&&(e.cartesianItems[s]=n)},removeCartesianGraphicalItem(e,t){var r=qh(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var r=qh(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)}}}),{addBar:pBe,removeBar:xBe,addCartesianGraphicalItem:dhe,replaceCartesianGraphicalItem:uhe,removeCartesianGraphicalItem:hhe,addPolarGraphicalItem:vBe,removePolarGraphicalItem:gBe}=mq.actions,fhe=mq.reducer;function jL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function NL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jL(Object(r),!0).forEach(function(n){mhe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mhe(e,t,r){return(t=phe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function phe(e){var t=xhe(e,"string");return typeof t=="symbol"?t:t+""}function xhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vhe(e){var t=Ji(),r=N.useRef(null);return N.useEffect(()=>{var n=NL(NL({},e),{},{stackId:qU(e.stackId)});r.current===null?t(dhe(n)):r.current!==n&&t(uhe({prev:r.current,next:n})),r.current=n},[t,e]),N.useEffect(()=>()=>{r.current&&(t(hhe(r.current)),r.current=null)},[t]),null}function ghe(e){var{fn:t,args:r}=e,n=Ji(),s=Xc();return N.useEffect(()=>{if(!s){var i=t(r);return n(Tce(i)),()=>{n(Ice(i))}}},[t,r,n,s]),null}var bhe=()=>{};function yhe(e){var{legendPayload:t}=e,r=Ji(),n=Xc();return N.useEffect(()=>n?bhe:(r(nne(t)),()=>{r(sne(t))}),[r,n,t]),null}function jhe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=N.useRef(Jb(t)),n=N.useRef(e);return n.current!==e&&(r.current=Jb(t),n.current=e),r.current}var Nhe=Kt([Zi],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),whe=Kt([Nhe,df,uf],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),nT=()=>Xr(whe),She=()=>Xr(bde);function wL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function SL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wL(Object(r),!0).forEach(function(n){Che(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Che(e,t,r){return(t=khe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function khe(e){var t=_he(e,"string");return typeof t=="symbol"?t:t+""}function _he(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ehe=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:s,dataKey:i}=e;if(s===!1||t.x==null||t.y==null)return null;var o=SL(SL({index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},Dn(s,!1)),R3(s)),l;return N.isValidElement(s)?l=N.cloneElement(s,o):typeof s=="function"?l=s(o):l=N.createElement(hq,o),N.createElement(tf,{className:"recharts-active-dot"},l)};function CL(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:s}=e,i=Xr(oy),o=She();if(t==null||o==null)return null;var l=t.find(c=>o.includes(c.payload));return ri(l)?null:Ehe({point:l,childIndex:Number(i),mainColor:r,dataKey:s,activeDot:n})}var kL=()=>{},Dhe=N.createContext({addErrorBar:kL,removeErrorBar:kL}),Ahe=e=>{var{children:t,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,data:o,stackId:l,hide:c,type:d,barSize:u}=e,[h,m]=N.useState([]),p=N.useCallback(b=>{m(y=>[...y,b])},[m]),v=N.useCallback(b=>{m(y=>y.filter(C=>C!==b))},[m]),g=Xc();return N.createElement(Dhe.Provider,{value:{addErrorBar:p,removeErrorBar:v}},N.createElement(vhe,{type:d,data:o,xAxisId:r,yAxisId:n,zAxisId:s,dataKey:i,errorBars:h,stackId:l,hide:c,barSize:u,isPanorama:g}),t)};function pq(e,t){var r,n,s=Xr(d=>ff(d,e)),i=Xr(d=>Qm(d,t)),o=(r=s?.allowDataOverflow)!==null&&r!==void 0?r:Fl.allowDataOverflow,l=(n=i?.allowDataOverflow)!==null&&n!==void 0?n:Ll.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function The(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,s=nT(),{needClipX:i,needClipY:o,needClip:l}=pq(t,r);if(!l)return null;var{x:c,y:d,width:u,height:h}=s;return N.createElement("clipPath",{id:"clipPath-".concat(n)},N.createElement("rect",{x:i?c:c-u/2,y:o?d:d-h/2,width:i?u:u*2,height:o?h:h*2}))}var Ihe=e=>{var{chartData:t}=e,r=Ji(),n=Xc();return N.useEffect(()=>n?()=>{}:(r(XF(t)),()=>{r(XF(void 0))}),[t,r,n]),null},_L={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},xq=Kc({name:"brush",initialState:_L,reducers:{setBrushSettings(e,t){return t.payload==null?_L:t.payload}}}),{setBrushSettings:bBe}=xq.actions,Phe=xq.reducer;function Ohe(e,t,r){return(t=Mhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mhe(e){var t=Rhe(e,"string");return typeof t=="symbol"?t:t+""}function Rhe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class sT{static create(t){return new sT(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var s=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+s}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],s=r[r.length-1];return n<=s?t>=n&&t<=s:t>=s&&t<=n}}Ohe(sT,"EPS",1e-4);function Fhe(e){return(e%180+180)%180}var Lhe=function(t){var{width:r,height:n}=t,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Fhe(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Bhe={dots:[],areas:[],lines:[]},vq=Kc({name:"referenceElements",initialState:Bhe,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=qh(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=qh(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=qh(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}}),{addDot:yBe,removeDot:jBe,addArea:NBe,removeArea:wBe,addLine:SBe,removeLine:CBe}=vq.actions,Uhe=vq.reducer,$he=N.createContext(void 0),Vhe=e=>{var{children:t}=e,[r]=N.useState("".concat(Jb("recharts"),"-clip")),n=nT();if(n==null)return null;var{x:s,y:i,width:o,height:l}=n;return N.createElement($he.Provider,{value:r},N.createElement("defs",null,N.createElement("clipPath",{id:r},N.createElement("rect",{x:s,y:i,height:l,width:o}))),t)};function W_(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function gq(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function qhe(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Lhe(n,r)}function zhe(e,t,r){var n=r==="width",{x:s,y:i,width:o,height:l}=e;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Nw(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function Hhe(e,t){return gq(e,t+1)}function Whe(e,t,r,n,s){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,d=1,u=o,h=function(){var v=n?.[c];if(v===void 0)return{v:gq(n,d)};var g=c,b,y=()=>(b===void 0&&(b=r(v,g)),b),C=v.coordinate,w=c===0||Nw(e,C,y,u,l);w||(c=0,u=o,d+=1),w&&(u=C+e*(y()/2+s),c+=d)},m;d<=i.length;)if(m=h(),m)return m.v;return[]}function EL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EL(Object(r),!0).forEach(function(n){Ghe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ghe(e,t,r){return(t=Yhe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yhe(e){var t=Khe(e,"string");return typeof t=="symbol"?t:t+""}function Khe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xhe(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,d=function(m){var p=i[m],v,g=()=>(v===void 0&&(v=r(p,m)),v);if(m===o-1){var b=e*(p.coordinate+e*g()/2-c);i[m]=p=mo(mo({},p),{},{tickCoord:b>0?p.coordinate-b*e:p.coordinate})}else i[m]=p=mo(mo({},p),{},{tickCoord:p.coordinate});var y=Nw(e,p.tickCoord,g,l,c);y&&(c=p.tickCoord-e*(g()/2+s),i[m]=mo(mo({},p),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Qhe(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,{start:c,end:d}=t;if(i){var u=n[l-1],h=r(u,l-1),m=e*(u.coordinate+e*h/2-d);o[l-1]=u=mo(mo({},u),{},{tickCoord:m>0?u.coordinate-m*e:u.coordinate});var p=Nw(e,u.tickCoord,()=>h,c,d);p&&(d=u.tickCoord-e*(h/2+s),o[l-1]=mo(mo({},u),{},{isShow:!0}))}for(var v=i?l-1:l,g=function(C){var w=o[C],k,S=()=>(k===void 0&&(k=r(w,C)),k);if(C===0){var D=e*(w.coordinate-e*S()/2-c);o[C]=w=mo(mo({},w),{},{tickCoord:D<0?w.coordinate-D*e:w.coordinate})}else o[C]=w=mo(mo({},w),{},{tickCoord:w.coordinate});var E=Nw(e,w.tickCoord,S,c,d);E&&(c=w.tickCoord+e*(S()/2+s),o[C]=mo(mo({},w),{},{isShow:!0}))},b=0;b<v;b++)g(b);return o}function iT(e,t,r){var{tick:n,ticks:s,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:d,unit:u,angle:h}=e;if(!s||!s.length||!n)return[];if(Ir(c)||qy.isSsr){var m;return(m=Hhe(s,Ir(c)?c:0))!==null&&m!==void 0?m:[]}var p=[],v=l==="top"||l==="bottom"?"width":"height",g=u&&v==="width"?Fb(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},b=(w,k)=>{var S=typeof d=="function"?d(w.value,k):w.value;return v==="width"?qhe(Fb(S,{fontSize:t,letterSpacing:r}),g,h):Fb(S,{fontSize:t,letterSpacing:r})[v]},y=s.length>=2?$c(s[1].coordinate-s[0].coordinate):1,C=zhe(i,y,v);return c==="equidistantPreserveStart"?Whe(y,C,b,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=Qhe(y,C,b,s,o,c==="preserveStartEnd"):p=Xhe(y,C,b,s,o),p.filter(w=>w.isShow))}var Jhe=["viewBox"],Zhe=["viewBox"];function Qv(){return Qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qv.apply(null,arguments)}function DL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DL(Object(r),!0).forEach(function(n){oT(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AL(e,t){if(e==null)return{};var r,n,s=efe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function efe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function oT(e,t,r){return(t=tfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tfe(e){var t=rfe(e,"string");return typeof t=="symbol"?t:t+""}function rfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Jm extends N.Component{constructor(t){super(t),this.tickRefs=N.createRef(),this.tickRefs.current=[],this.state={fontSize:"",letterSpacing:""}}shouldComponentUpdate(t,r){var{viewBox:n}=t,s=AL(t,Jhe),i=this.props,{viewBox:o}=i,l=AL(i,Zhe);return!W_(n,o)||!W_(s,l)||!W_(r,this.state)}getTickLineCoord(t){var{x:r,y:n,width:s,height:i,orientation:o,tickSize:l,mirror:c,tickMargin:d}=this.props,u,h,m,p,v,g,b=c?-1:1,y=t.tickSize||l,C=Ir(t.tickCoord)?t.tickCoord:t.coordinate;switch(o){case"top":u=h=t.coordinate,p=n+ +!c*i,m=p-b*y,g=m-b*d,v=C;break;case"left":m=p=t.coordinate,h=r+ +!c*s,u=h-b*y,v=u-b*d,g=C;break;case"right":m=p=t.coordinate,h=r+ +c*s,u=h+b*y,v=u+b*d,g=C;break;default:u=h=t.coordinate,p=n+ +c*i,m=p+b*y,g=m+b*d,v=C;break}return{line:{x1:u,y1:m,x2:h,y2:p},tick:{x:v,y:g}}}getTickTextAnchor(){var{orientation:t,mirror:r}=this.props,n;switch(t){case"left":n=r?"start":"end";break;case"right":n=r?"end":"start";break;default:n="middle";break}return n}getTickVerticalAnchor(){var{orientation:t,mirror:r}=this.props;switch(t){case"left":case"right":return"middle";case"top":return r?"start":"end";default:return r?"end":"start"}}renderAxisLine(){var{x:t,y:r,width:n,height:s,orientation:i,mirror:o,axisLine:l}=this.props,c=oi(oi(oi({},Dn(this.props,!1)),Dn(l,!1)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);c=oi(oi({},c),{},{x1:t,y1:r+d*s,x2:t+n,y2:r+d*s})}else{var u=+(i==="left"&&!o||i==="right"&&o);c=oi(oi({},c),{},{x1:t+u*n,y1:r,x2:t+u*n,y2:r+s})}return N.createElement("line",Qv({},c,{className:pa("recharts-cartesian-axis-line",gx(l,"className"))}))}static renderTickItem(t,r,n){var s,i=pa(r.className,"recharts-cartesian-axis-tick-value");if(N.isValidElement(t))s=N.cloneElement(t,oi(oi({},r),{},{className:i}));else if(typeof t=="function")s=t(oi(oi({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=pa(o,t.className)),s=N.createElement(rT,Qv({},r,{className:o}),n)}return s}renderTicks(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],{tickLine:s,stroke:i,tick:o,tickFormatter:l,unit:c}=this.props,d=iT(oi(oi({},this.props),{},{ticks:n}),t,r),u=this.getTickTextAnchor(),h=this.getTickVerticalAnchor(),m=Dn(this.props,!1),p=Dn(o,!1),v=oi(oi({},m),{},{fill:"none"},Dn(s,!1)),g=d.map((b,y)=>{var{line:C,tick:w}=this.getTickLineCoord(b),k=oi(oi(oi(oi({textAnchor:u,verticalAnchor:h},m),{},{stroke:"none",fill:i},p),w),{},{index:y,payload:b,visibleTicksCount:d.length,tickFormatter:l});return N.createElement(tf,Qv({className:"recharts-cartesian-axis-tick",key:"tick-".concat(b.value,"-").concat(b.coordinate,"-").concat(b.tickCoord)},R9(this.props,b,y)),s&&N.createElement("line",Qv({},v,C,{className:pa("recharts-cartesian-axis-tick-line",gx(s,"className"))})),o&&Jm.renderTickItem(o,k,"".concat(typeof l=="function"?l(b.value,y):b.value).concat(c||"")))});return g.length>0?N.createElement("g",{className:"recharts-cartesian-axis-ticks"},g):null}render(){var{axisLine:t,width:r,height:n,className:s,hide:i}=this.props;if(i)return null;var{ticks:o}=this.props;return r!=null&&r<=0||n!=null&&n<=0?null:N.createElement(tf,{className:pa("recharts-cartesian-axis",s),ref:l=>{if(l){var c=l.getElementsByClassName("recharts-cartesian-axis-tick-value");this.tickRefs.current=Array.from(c);var d=c[0];if(d){var u=window.getComputedStyle(d).fontSize,h=window.getComputedStyle(d).letterSpacing;(u!==this.state.fontSize||h!==this.state.letterSpacing)&&this.setState({fontSize:window.getComputedStyle(d).fontSize,letterSpacing:window.getComputedStyle(d).letterSpacing})}}}},t&&this.renderAxisLine(),this.renderTicks(this.state.fontSize,this.state.letterSpacing,o),$l.renderCallByParent(this.props))}}oT(Jm,"displayName","CartesianAxis");oT(Jm,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var afe=["x1","y1","x2","y2","key"],nfe=["offset"],sfe=["xAxisId","yAxisId"],ife=["xAxisId","yAxisId"];function TL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TL(Object(r),!0).forEach(function(n){ofe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ofe(e,t,r){return(t=lfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lfe(e){var t=cfe(e,"string");return typeof t=="symbol"?t:t+""}function cfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kp(){return Kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Kp.apply(null,arguments)}function ww(e,t){if(e==null)return{};var r,n,s=dfe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function dfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ufe=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:s,width:i,height:o,ry:l}=e;return N.createElement("rect",{x:n,y:s,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function bq(e,t){var r;if(N.isValidElement(e))r=N.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var{x1:n,y1:s,x2:i,y2:o,key:l}=t,c=ww(t,afe),d=Dn(c,!1),{offset:u}=d,h=ww(d,nfe);r=N.createElement("line",Kp({},h,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function hfe(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=ww(e,sfe),c=s.map((d,u)=>{var h=go(go({},l),{},{x1:t,y1:d,x2:t+r,y2:d,key:"line-".concat(u),index:u});return bq(n,h)});return N.createElement("g",{className:"recharts-cartesian-grid-horizontal"},c)}function ffe(e){var{y:t,height:r,vertical:n=!0,verticalPoints:s}=e;if(!n||!s||!s.length)return null;var{xAxisId:i,yAxisId:o}=e,l=ww(e,ife),c=s.map((d,u)=>{var h=go(go({},l),{},{x1:d,y1:t,x2:d,y2:t+r,key:"line-".concat(u),index:u});return bq(n,h)});return N.createElement("g",{className:"recharts-cartesian-grid-vertical"},c)}function mfe(e){var{horizontalFill:t,fillOpacity:r,x:n,y:s,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length)return null;var d=l.map(h=>Math.round(h+s-s)).sort((h,m)=>h-m);s!==d[0]&&d.unshift(0);var u=d.map((h,m)=>{var p=!d[m+1],v=p?s+o-h:d[m+1]-h;if(v<=0)return null;var g=m%t.length;return N.createElement("rect",{key:"react-".concat(m),y:h,x:n,height:v,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function pfe(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:s,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var d=c.map(h=>Math.round(h+s-s)).sort((h,m)=>h-m);s!==d[0]&&d.unshift(0);var u=d.map((h,m)=>{var p=!d[m+1],v=p?s+o-h:d[m+1]-h;if(v<=0)return null;var g=m%r.length;return N.createElement("rect",{key:"react-".concat(m),x:h,y:i,width:v,height:l,stroke:"none",fill:r[g],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return N.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var xfe=(e,t)=>{var{xAxis:r,width:n,height:s,offset:i}=e;return $U(iT(go(go(go({},Jm.defaultProps),r),{},{ticks:VU(r),viewBox:{x:0,y:0,width:n,height:s}})),i.left,i.left+i.width,t)},vfe=(e,t)=>{var{yAxis:r,width:n,height:s,offset:i}=e;return $U(iT(go(go(go({},Jm.defaultProps),r),{},{ticks:VU(r),viewBox:{x:0,y:0,width:n,height:s}})),i.top,i.top+i.height,t)},gfe={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0};function yq(e){var t=aA(),r=nA(),n=GU(),s=go(go({},Q0(e,gfe)),{},{x:Ir(e.x)?e.x:n.left,y:Ir(e.y)?e.y:n.top,width:Ir(e.width)?e.width:n.width,height:Ir(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:d,height:u,syncWithTicks:h,horizontalValues:m,verticalValues:p}=s,v=Xc(),g=Xr(A=>$F(A,"xAxis",i,v)),b=Xr(A=>$F(A,"yAxis",o,v));if(!Ir(d)||d<=0||!Ir(u)||u<=0||!Ir(l)||l!==+l||!Ir(c)||c!==+c)return null;var y=s.verticalCoordinatesGenerator||xfe,C=s.horizontalCoordinatesGenerator||vfe,{horizontalPoints:w,verticalPoints:k}=s;if((!w||!w.length)&&typeof C=="function"){var S=m&&m.length,D=C({yAxis:b?go(go({},b),{},{ticks:S?m:b.ticks}):void 0,width:t,height:r,offset:n},S?!0:h);Rb(Array.isArray(D),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof D,"]")),Array.isArray(D)&&(w=D)}if((!k||!k.length)&&typeof y=="function"){var E=p&&p.length,T=y({xAxis:g?go(go({},g),{},{ticks:E?p:g.ticks}):void 0,width:t,height:r,offset:n},E?!0:h);Rb(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof T,"]")),Array.isArray(T)&&(k=T)}return N.createElement("g",{className:"recharts-cartesian-grid"},N.createElement(ufe,{fill:s.fill,fillOpacity:s.fillOpacity,x:s.x,y:s.y,width:s.width,height:s.height,ry:s.ry}),N.createElement(mfe,Kp({},s,{horizontalPoints:w})),N.createElement(pfe,Kp({},s,{verticalPoints:k})),N.createElement(hfe,Kp({},s,{offset:n,horizontalPoints:w,xAxis:g,yAxis:b})),N.createElement(ffe,Kp({},s,{offset:n,verticalPoints:k,xAxis:g,yAxis:b})))}yq.displayName="CartesianGrid";var jq=(e,t,r,n)=>PV(e,"xAxis",t,n),Nq=(e,t,r,n)=>IV(e,"xAxis",t,n),wq=(e,t,r,n)=>PV(e,"yAxis",r,n),Sq=(e,t,r,n)=>IV(e,"yAxis",r,n),bfe=Kt([Zn,jq,wq,Nq,Sq],(e,t,r,n,s)=>cf(e,"xAxis")?FD(t,n,!1):FD(r,s,!1)),yfe=(e,t,r,n,s)=>{var i,o=Zn(e),l=cf(o,"xAxis"),c;if(l?c=a5(e,"yAxis",r,n):c=a5(e,"xAxis",t,n),c!=null){var{dataKey:d,stackId:u}=s;if(u!=null){var h=(i=c[u])===null||i===void 0?void 0:i.stackedData;return h?.find(m=>m.key===d)}}},jfe=(e,t,r,n,s)=>s,Nfe=Kt([nV,jfe],(e,t)=>{if(e.some(r=>r.type==="area"&&t.dataKey===r.dataKey&&qU(t.stackId)===r.stackId&&t.data===r.data))return t}),wfe=Kt([Zn,jq,wq,Nq,Sq,yfe,R$,bfe,Nfe],(e,t,r,n,s,i,o,l,c)=>{var{chartData:d,dataStartIndex:u,dataEndIndex:h}=o;if(!(c==null||e!=="horizontal"&&e!=="vertical"||t==null||r==null||n==null||s==null||n.length===0||s.length===0||l==null)){var{data:m}=c,p;if(m&&m.length>0?p=m:p=d?.slice(u,h+1),p!=null){var v=void 0;return Vfe({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:s,dataStartIndex:u,areaSettings:c,stackedData:i,displayedData:p,chartBaseValue:v,bandSize:l})}}}),Sfe=["layout","type","stroke","connectNulls","isRange"],Cfe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function Cq(e,t){if(e==null)return{};var r,n,s=kfe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function kfe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function IL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Xp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IL(Object(r),!0).forEach(function(n){pS(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pS(e,t,r){return(t=_fe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _fe(e){var t=Efe(e,"string");return typeof t=="symbol"?t:t+""}function Efe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tm(){return Tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tm.apply(null,arguments)}function Sw(e,t){return e&&e!=="none"?e:t}var Dfe=e=>{var{dataKey:t,name:r,stroke:n,fill:s,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:Sw(n,s),value:zU(r,t),payload:e}]};function Afe(e){var{dataKey:t,data:r,stroke:n,strokeWidth:s,fill:i,name:o,hide:l,unit:c}=e;return{dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:s,fill:i,dataKey:t,nameKey:void 0,name:zU(o,t),hide:l,type:e.tooltipType,color:Sw(n,i),unit:c}}}var Tfe=(e,t)=>{var r;if(N.isValidElement(e))r=N.cloneElement(e,t);else if(typeof e=="function")r=e(t);else{var n=pa("recharts-area-dot",typeof e!="boolean"?e.className:"");r=N.createElement(hq,Tm({},t,{className:n}))}return r};function Ife(e,t){return e==null?!1:t?!0:e.length===1}function Pfe(e){var{clipPathId:t,points:r,props:n}=e,{needClip:s,dot:i,dataKey:o}=n;if(!Ife(r,i))return null;var l=B9(i),c=Dn(n,!1),d=Dn(i,!0),u=r.map((m,p)=>{var v=Xp(Xp(Xp({key:"dot-".concat(p),r:3},c),d),{},{index:p,cx:m.x,cy:m.y,dataKey:o,value:m.value,payload:m.payload,points:r});return Tfe(i,v)}),h={clipPath:s?"url(#clipPath-".concat(l?"":"dots-").concat(t,")"):void 0};return N.createElement(tf,Tm({className:"recharts-area-dots"},h),u)}function u5(e){var{points:t,baseLine:r,needClip:n,clipPathId:s,props:i,showLabels:o}=e,{layout:l,type:c,stroke:d,connectNulls:u,isRange:h}=i,m=Cq(i,Sfe);return N.createElement(N.Fragment,null,t?.length>1&&N.createElement(tf,{clipPath:n?"url(#clipPath-".concat(s,")"):void 0},N.createElement(kN,Tm({},Dn(m,!0),{points:t,connectNulls:u,type:c,baseLine:r,layout:l,stroke:"none",className:"recharts-area-area"})),d!=="none"&&N.createElement(kN,Tm({},Dn(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:t})),d!=="none"&&h&&N.createElement(kN,Tm({},Dn(i,!1),{className:"recharts-area-curve",layout:l,type:c,connectNulls:u,fill:"none",points:r}))),N.createElement(Pfe,{points:t,props:i,clipPathId:s}),o&&ox.renderCallByParent(i,t))}function Ofe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:s}=e,i=n[0].y,o=n[n.length-1].y;if(!zo(i)||!zo(o))return null;var l=t*Math.abs(i-o),c=Math.max(...n.map(d=>d.x||0));return Ir(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.x||0),c)),Ir(c)?N.createElement("rect",{x:0,y:i<o?i:i-l,width:c+(s?parseInt("".concat(s),10):1),height:Math.floor(l)}):null}function Mfe(e){var{alpha:t,baseLine:r,points:n,strokeWidth:s}=e,i=n[0].x,o=n[n.length-1].x;if(!zo(i)||!zo(o))return null;var l=t*Math.abs(i-o),c=Math.max(...n.map(d=>d.y||0));return Ir(r)?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(...r.map(d=>d.y||0),c)),Ir(c)?N.createElement("rect",{x:i<o?i:i-l,y:0,width:l,height:Math.floor(c+(s?parseInt("".concat(s),10):1))}):null}function Rfe(e){var{alpha:t,layout:r,points:n,baseLine:s,strokeWidth:i}=e;return r==="vertical"?N.createElement(Ofe,{alpha:t,points:n,baseLine:s,strokeWidth:i}):N.createElement(Mfe,{alpha:t,points:n,baseLine:s,strokeWidth:i})}function Ffe(e){var{needClip:t,clipPathId:r,props:n,previousPointsRef:s,previousBaselineRef:i}=e,{points:o,baseLine:l,isAnimationActive:c,animationBegin:d,animationDuration:u,animationEasing:h,onAnimationStart:m,onAnimationEnd:p}=n,v=jhe(n,"recharts-area-"),[g,b]=N.useState(!0),y=N.useCallback(()=>{typeof p=="function"&&p(),b(!1)},[p]),C=N.useCallback(()=>{typeof m=="function"&&m(),b(!0)},[m]),w=s.current,k=i.current;return N.createElement(HD,{begin:d,duration:u,isActive:c,easing:h,from:{t:0},to:{t:1},onAnimationEnd:y,onAnimationStart:C,key:v},S=>{var{t:D}=S;if(w){var E=w.length/o.length,T=D===1?o:o.map((L,P)=>{var O=Math.floor(P*E);if(w[O]){var Z=w[O];return Xp(Xp({},L),{},{x:_v(Z.x,L.x,D),y:_v(Z.y,L.y,D)})}return L}),A;return Ir(l)?A=_v(k,l,D):ri(l)||ac(l)?A=_v(k,0,D):A=l.map((L,P)=>{var O=Math.floor(P*E);if(Array.isArray(k)&&k[O]){var Z=k[O];return Xp(Xp({},L),{},{x:_v(Z.x,L.x,D),y:_v(Z.y,L.y,D)})}return L}),D>0&&(s.current=T,i.current=A),N.createElement(u5,{points:T,baseLine:A,needClip:t,clipPathId:r,props:n,showLabels:!g})}return D>0&&(s.current=o,i.current=l),N.createElement(tf,null,N.createElement("defs",null,N.createElement("clipPath",{id:"animationClipPath-".concat(r)},N.createElement(Rfe,{alpha:D,points:o,baseLine:l,layout:n.layout,strokeWidth:n.strokeWidth}))),N.createElement(tf,{clipPath:"url(#animationClipPath-".concat(r,")")},N.createElement(u5,{points:o,baseLine:l,needClip:t,clipPathId:r,props:n,showLabels:!0})))})}function Lfe(e){var{needClip:t,clipPathId:r,props:n}=e,{points:s,baseLine:i,isAnimationActive:o}=n,l=N.useRef(null),c=N.useRef(),d=l.current,u=c.current;return o&&s&&s.length&&(d!==s||u!==i)?N.createElement(Ffe,{needClip:t,clipPathId:r,props:n,previousPointsRef:l,previousBaselineRef:c}):N.createElement(u5,{points:s,baseLine:i,needClip:t,clipPathId:r,props:n,showLabels:!0})}class Bfe extends N.PureComponent{constructor(){super(...arguments),pS(this,"id",Jb("recharts-area-"))}render(){var t,{hide:r,dot:n,points:s,className:i,top:o,left:l,needClip:c,xAxisId:d,yAxisId:u,width:h,height:m,id:p,baseLine:v}=this.props;if(r)return null;var g=pa("recharts-area",i),b=ri(p)?this.id:p,{r:y=3,strokeWidth:C=2}=(t=Dn(n,!1))!==null&&t!==void 0?t:{r:3,strokeWidth:2},w=B9(n),k=y*2+C;return N.createElement(N.Fragment,null,N.createElement(tf,{className:g},c&&N.createElement("defs",null,N.createElement(The,{clipPathId:b,xAxisId:d,yAxisId:u}),!w&&N.createElement("clipPath",{id:"clipPath-dots-".concat(b)},N.createElement("rect",{x:l-k/2,y:o-k/2,width:h+k,height:m+k}))),N.createElement(Lfe,{needClip:c,clipPathId:b,props:this.props})),N.createElement(CL,{points:s,mainColor:Sw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}),this.props.isRange&&Array.isArray(v)&&N.createElement(CL,{points:v,mainColor:Sw(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot}))}}var kq={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:!qy.isSsr,legendType:"line",stroke:"#3182bd",xAxisId:0,yAxisId:0};function Ufe(e){var t,r=Q0(e,kq),{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,fill:d,fillOpacity:u,hide:h,isAnimationActive:m,legendType:p,stroke:v,xAxisId:g,yAxisId:b}=r,y=Cq(r,Cfe),C=sA(),w=JV(),{needClip:k}=pq(g,b),S=Xc(),D=N.useMemo(()=>({baseValue:e.baseValue,stackId:e.stackId,connectNulls:l,data:e.data,dataKey:e.dataKey}),[e.baseValue,e.stackId,l,e.data,e.dataKey]),{points:E,isRange:T,baseLine:A}=(t=Xr(z=>wfe(z,g,b,S,D)))!==null&&t!==void 0?t:{},{height:L,width:P,x:O,y:Z}=nT();return C!=="horizontal"&&C!=="vertical"||w!=="AreaChart"&&w!=="ComposedChart"?null:N.createElement(Bfe,Tm({},y,{activeDot:n,animationBegin:s,animationDuration:i,animationEasing:o,baseLine:A,connectNulls:l,dot:c,fill:d,fillOpacity:u,height:L,hide:h,layout:C,isAnimationActive:m,isRange:T,legendType:p,needClip:k,points:E,stroke:v,width:P,left:O,top:Z,xAxisId:g,yAxisId:b}))}var $fe=(e,t,r,n,s)=>{var i=r??t;if(Ir(i))return i;var o=e==="horizontal"?s:n,l=o.scale.domain();if(o.type==="number"){var c=Math.max(l[0],l[1]),d=Math.min(l[0],l[1]);return i==="dataMin"?d:i==="dataMax"||c<0?c:Math.max(Math.min(l[0],l[1]),0)}return i==="dataMin"?l[0]:i==="dataMax"?l[1]:l[0]};function Vfe(e){var{areaSettings:{connectNulls:t,baseValue:r,dataKey:n},stackedData:s,layout:i,chartBaseValue:o,xAxis:l,yAxis:c,displayedData:d,dataStartIndex:u,xAxisTicks:h,yAxisTicks:m,bandSize:p}=e,v=s&&s.length,g=$fe(i,o,r,l,c),b=i==="horizontal",y=!1,C=d.map((k,S)=>{var D;v?D=s[u+S]:(D=Zl(k,n),Array.isArray(D)?y=!0:D=[g,D]);var E=D[1]==null||v&&!t&&Zl(k,n)==null;return b?{x:NR({axis:l,ticks:h,bandSize:p,entry:k,index:S}),y:E?null:c.scale(D[1]),value:D,payload:k}:{x:E?null:l.scale(D[1]),y:NR({axis:c,ticks:m,bandSize:p,entry:k,index:S}),value:D,payload:k}}),w;return v||y?w=C.map(k=>{var S=Array.isArray(k.value)?k.value[0]:null;return b?{x:k.x,y:S!=null&&k.y!=null?c.scale(S):null}:{x:S!=null?l.scale(S):null,y:k.y}}):w=b?c.scale(g):l.scale(g),{points:C,baseLine:w,isRange:y}}class Jv extends N.PureComponent{render(){return N.createElement(Ahe,{type:"area",data:this.props.data,dataKey:this.props.dataKey,xAxisId:this.props.xAxisId,yAxisId:this.props.yAxisId,zAxisId:0,stackId:this.props.stackId,hide:this.props.hide,barSize:void 0},N.createElement(yhe,{legendPayload:Dfe(this.props)}),N.createElement(ghe,{fn:Afe,args:this.props}),N.createElement(Ufe,this.props))}}pS(Jv,"displayName","Area");pS(Jv,"defaultProps",kq);function PL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PL(Object(r),!0).forEach(function(n){qfe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qfe(e,t,r){return(t=zfe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zfe(e){var t=Hfe(e,"string");return typeof t=="symbol"?t:t+""}function Hfe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wfe={xAxis:{},yAxis:{},zAxis:{}},_q=Kc({name:"cartesianAxis",initialState:Wfe,reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload;e.yAxis[r]&&(e.yAxis[r]=OL(OL({},e.yAxis[r]),{},{width:n}))}}}),{addXAxis:Gfe,removeXAxis:Yfe,addYAxis:Kfe,removeYAxis:Xfe,addZAxis:kBe,removeZAxis:_Be,updateYAxisWidth:Qfe}=_q.actions,Jfe=_q.reducer,Zfe=["children"],eme=["dangerouslySetInnerHTML","ticks"];function Eq(e,t,r){return(t=tme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tme(e){var t=rme(e,"string");return typeof t=="symbol"?t:t+""}function rme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h5(){return h5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h5.apply(null,arguments)}function Dq(e,t){if(e==null)return{};var r,n,s=ame(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ame(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nme(e){var t=Ji(),r=N.useMemo(()=>{var{children:i}=e,o=Dq(e,Zfe);return o},[e]),n=Xr(i=>ff(i,r.id)),s=r===n;return N.useEffect(()=>(t(Gfe(r)),()=>{t(Yfe(r))}),[r,t]),s?e.children:null}var sme=e=>{var{xAxisId:t,className:r}=e,n=Xr(WU),s=Xc(),i="xAxis",o=Xr(p=>rg(p,i,t,s)),l=Xr(p=>TV(p,i,t,s)),c=Xr(p=>xce(p,t)),d=Xr(p=>jce(p,t));if(c==null||d==null)return null;var{dangerouslySetInnerHTML:u,ticks:h}=e,m=Dq(e,eme);return N.createElement(Jm,h5({},m,{scale:o,x:d.x,y:d.y,width:c.width,height:c.height,className:pa("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:l}))},ime=e=>{var t,r,n,s,i;return N.createElement(nme,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.xAxisId,scale:e.scale,type:e.type,padding:e.padding,allowDataOverflow:e.allowDataOverflow,domain:e.domain,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,height:e.height,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter},N.createElement(sme,e))};class lT extends N.Component{render(){return N.createElement(ime,this.props)}}Eq(lT,"displayName","XAxis");Eq(lT,"defaultProps",{allowDataOverflow:Fl.allowDataOverflow,allowDecimals:Fl.allowDecimals,allowDuplicatedCategory:Fl.allowDuplicatedCategory,height:Fl.height,hide:!1,mirror:Fl.mirror,orientation:Fl.orientation,padding:Fl.padding,reversed:Fl.reversed,scale:Fl.scale,tickCount:Fl.tickCount,type:Fl.type,xAxisId:0});var ome=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:s=0,tickMargin:i=0}=e,o=0;if(t){t.forEach(u=>{if(u){var h=u.getBoundingClientRect();h.width>o&&(o=h.width)}});var l=r?r.getBoundingClientRect().width:0,c=s+i,d=o+c+l+(r?n:0);return Math.round(d)}return 0},lme=["dangerouslySetInnerHTML","ticks"];function Aq(e,t,r){return(t=cme(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cme(e){var t=dme(e,"string");return typeof t=="symbol"?t:t+""}function dme(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f5(){return f5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},f5.apply(null,arguments)}function ume(e,t){if(e==null)return{};var r,n,s=hme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function hme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fme(e){var t=Ji();return N.useEffect(()=>(t(Kfe(e)),()=>{t(Xfe(e))}),[e,t]),null}var mme=e=>{var t,{yAxisId:r,className:n,width:s,label:i}=e,o=N.useRef(null),l=N.useRef(null),c=Xr(WU),d=Xc(),u=Ji(),h="yAxis",m=Xr(w=>rg(w,h,r,d)),p=Xr(w=>wce(w,r)),v=Xr(w=>Nce(w,r)),g=Xr(w=>TV(w,h,r,d));if(N.useLayoutEffect(()=>{var w;if(!(s!=="auto"||!p||aT(i)||N.isValidElement(i))){var k=o.current,S=k==null||(w=k.tickRefs)===null||w===void 0?void 0:w.current,{tickSize:D,tickMargin:E}=k.props,T=ome({ticks:S,label:l.current,labelGapWithTick:5,tickSize:D,tickMargin:E});Math.round(p.width)!==Math.round(T)&&u(Qfe({id:r,width:T}))}},[o,o==null||(t=o.current)===null||t===void 0||(t=t.tickRefs)===null||t===void 0?void 0:t.current,p?.width,p,u,i,r,s]),p==null||v==null)return null;var{dangerouslySetInnerHTML:b,ticks:y}=e,C=ume(e,lme);return N.createElement(Jm,f5({},C,{ref:o,labelRef:l,scale:m,x:v.x,y:v.y,width:p.width,height:p.height,className:pa("recharts-".concat(h," ").concat(h),n),viewBox:c,ticks:g}))},pme=e=>{var t,r,n,s,i;return N.createElement(N.Fragment,null,N.createElement(fme,{interval:(t=e.interval)!==null&&t!==void 0?t:"preserveEnd",id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:(r=e.includeHidden)!==null&&r!==void 0?r:!1,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:(n=e.angle)!==null&&n!==void 0?n:0,minTickGap:(s=e.minTickGap)!==null&&s!==void 0?s:5,tick:(i=e.tick)!==null&&i!==void 0?i:!0,tickFormatter:e.tickFormatter}),N.createElement(mme,e))},xme={allowDataOverflow:Ll.allowDataOverflow,allowDecimals:Ll.allowDecimals,allowDuplicatedCategory:Ll.allowDuplicatedCategory,hide:!1,mirror:Ll.mirror,orientation:Ll.orientation,padding:Ll.padding,reversed:Ll.reversed,scale:Ll.scale,tickCount:Ll.tickCount,type:Ll.type,width:Ll.width,yAxisId:0};class cT extends N.Component{render(){return N.createElement(pme,this.props)}}Aq(cT,"displayName","YAxis");Aq(cT,"defaultProps",xme);var G_={exports:{}},Y_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ML;function vme(){if(ML)return Y_;ML=1;var e=H0();function t(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var r=typeof Object.is=="function"?Object.is:t,n=e.useSyncExternalStore,s=e.useRef,i=e.useEffect,o=e.useMemo,l=e.useDebugValue;return Y_.useSyncExternalStoreWithSelector=function(c,d,u,h,m){var p=s(null);if(p.current===null){var v={hasValue:!1,value:null};p.current=v}else v=p.current;p=o(function(){function b(S){if(!y){if(y=!0,C=S,S=h(S),m!==void 0&&v.hasValue){var D=v.value;if(m(D,S))return w=D}return w=S}if(D=w,r(C,S))return D;var E=h(S);return m!==void 0&&m(D,E)?(C=S,D):(C=S,w=E)}var y=!1,C,w,k=u===void 0?null:u;return[function(){return b(d())},k===null?void 0:function(){return b(k())}]},[d,u,h,m]);var g=n(c,p[0],p[1]);return i(function(){v.hasValue=!0,v.value=g},[g]),l(g),g},Y_}var RL;function gme(){return RL||(RL=1,G_.exports=vme()),G_.exports}gme();function bme(e){e()}function yme(){let e=null,t=null;return{clear(){e=null,t=null},notify(){bme(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const s=t={callback:r,next:null,prev:t};return s.prev?s.prev.next=s:e=s,function(){!n||e===null||(n=!1,s.next?s.next.prev=s.prev:t=s.prev,s.prev?s.prev.next=s.next:e=s.next)}}}}var FL={notify(){},get:()=>[]};function jme(e,t){let r,n=FL,s=0,i=!1;function o(g){u();const b=n.subscribe(g);let y=!1;return()=>{y||(y=!0,b(),h())}}function l(){n.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return i}function u(){s++,r||(r=e.subscribe(c),n=yme())}function h(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=FL)}function m(){i||(i=!0,u())}function p(){i&&(i=!1,h())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:m,tryUnsubscribe:p,getListeners:()=>n};return v}var Nme=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wme=Nme(),Sme=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Cme=Sme(),kme=()=>wme||Cme?N.useLayoutEffect:N.useEffect,_me=kme(),Eme=Symbol.for("react-redux-context"),Dme=typeof globalThis<"u"?globalThis:{};function Ame(){if(!N.createContext)return{};const e=Dme[Eme]??=new Map;let t=e.get(N.createContext);return t||(t=N.createContext(null),e.set(N.createContext,t)),t}var Tme=Ame();function Ime(e){const{children:t,context:r,serverState:n,store:s}=e,i=N.useMemo(()=>{const c=jme(s);return{store:s,subscription:c,getServerState:n?()=>n:void 0}},[s,n]),o=N.useMemo(()=>s.getState(),[s]);_me(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==s.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||Tme;return N.createElement(l.Provider,{value:i},t)}var Pme=Ime,Ome=(e,t)=>t,dT=Kt([Ome,Zn,Ple,Ii,GV,mf,Cde,Zi],Ade),uT=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},Tq=Hc("mouseClick"),Iq=Vy();Iq.startListening({actionCreator:Tq,effect:(e,t)=>{var r=e.payload,n=dT(t.getState(),uT(r));n?.activeIndex!=null&&t.dispatch(Mce({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var m5=Hc("mouseMove"),Pq=Vy();Pq.startListening({actionCreator:m5,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=GA(n,n.tooltip.settings.shared),i=dT(n,uT(r));s==="axis"&&(i?.activeIndex!=null?t.dispatch(UV({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate})):t.dispatch(BV()))}});function Mme(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}var LL={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},Oq=Kc({name:"rootProps",initialState:LL,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:LL.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),Rme=Oq.reducer,{updateOptions:Fme}=Oq.actions,Mq=Kc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:EBe}=Mq.actions,Lme=Mq.reducer,Rq=Hc("keyDown"),Fq=Hc("focus"),hT=Vy();hT.startListening({actionCreator:Rq,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=Number(YA(s,Fx(r))),l=mf(r);if(i==="Enter"){var c=yw(r,"axis","hover",String(s.index));t.dispatch(s5({active:!s.active,activeIndex:s.index,activeDataKey:s.dataKey,activeCoordinate:c}));return}var d=_ce(r),u=d==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,m=o+h*u;if(!(l==null||m>=l.length||m<0)){var p=yw(r,"axis","hover",String(m));t.dispatch(s5({active:!0,activeIndex:m.toString(),activeDataKey:void 0,activeCoordinate:p}))}}}}});hT.startListening({actionCreator:Fq,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:s}=r.tooltip;if(!s.active&&s.index==null){var i="0",o=yw(r,"axis","hover",String(i));t.dispatch(s5({activeDataKey:void 0,active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Dc=Hc("externalEvent"),Lq=Vy();Lq.startListening({actionCreator:Dc,effect:(e,t)=>{if(e.payload.handler!=null){var r=t.getState(),n={activeCoordinate:xde(r),activeDataKey:mde(r),activeIndex:oy(r),activeLabel:XV(r),activeTooltipIndex:oy(r),isTooltipActive:vde(r)};e.payload.handler(n,e.payload.reactEvent)}}});var Bme=Kt([ag],e=>e.tooltipItemPayloads),Ume=Kt([Bme,Jy,(e,t,r)=>t,(e,t,r)=>r],(e,t,r,n)=>{var s=e.find(l=>l.settings.dataKey===n);if(s!=null){var{positions:i}=s;if(i!=null){var o=t(i,r);return o}}}),Bq=Hc("touchMove"),Uq=Vy();Uq.startListening({actionCreator:Bq,effect:(e,t)=>{var r=e.payload,n=t.getState(),s=GA(n,n.tooltip.settings.shared);if(s==="axis"){var i=dT(n,uT({clientX:r.touches[0].clientX,clientY:r.touches[0].clientY,currentTarget:r.currentTarget}));i?.activeIndex!=null&&t.dispatch(UV({activeIndex:i.activeIndex,activeDataKey:void 0,activeCoordinate:i.activeCoordinate}))}else if(s==="item"){var o,l=r.touches[0],c=document.elementFromPoint(l.clientX,l.clientY);if(!c||!c.getAttribute)return;var d=c.getAttribute(Hae),u=(o=c.getAttribute(Wae))!==null&&o!==void 0?o:void 0,h=Ume(t.getState(),d,u);t.dispatch(Oce({activeDataKey:u,activeIndex:d,activeCoordinate:h}))}}});var $me=gU({brush:Phe,cartesianAxis:Jfe,chartData:Gde,graphicalItems:fhe,layout:vae,legend:ine,options:Vde,polarAxis:lhe,polarOptions:Lme,referenceElements:Uhe,rootProps:Rme,tooltip:Rce}),Vme=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Vre({reducer:$me,preloadedState:t,middleware:n=>n({serializableCheck:!1}).concat([Iq.middleware,Pq.middleware,hT.middleware,Lq.middleware,Uq.middleware]),devTools:{serialize:{replacer:Mme},name:"recharts-".concat(r)}})};function qme(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,s=Xc(),i=N.useRef(null);if(s)return r;i.current==null&&(i.current=Vme(t,n));var o=Y3;return N.createElement(Pme,{context:o,store:i.current},r)}function zme(e){var{layout:t,width:r,height:n,margin:s}=e,i=Ji(),o=Xc();return N.useEffect(()=>{o||(i(mae(t)),i(pae({width:r,height:n})),i(fae(s)))},[i,o,t,r,n,s]),null}function Hme(e){var t=Ji();return N.useEffect(()=>{t(Fme(e))},[t,e]),null}var Wme=["children"];function Gme(e,t){if(e==null)return{};var r,n,s=Yme(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Yme(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cw.apply(null,arguments)}var Kme={width:"100%",height:"100%"},Xme=N.forwardRef((e,t)=>{var r=aA(),n=nA(),s=KU();if(!sw(r)||!sw(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,d,u;return typeof o.tabIndex=="number"?d=o.tabIndex:d=s?0:void 0,typeof o.role=="string"?u=o.role:u=s?"application":void 0,N.createElement(F3,Cw({},o,{title:l,desc:c,role:u,tabIndex:d,width:r,height:n,style:Kme,ref:t}),i)}),Qme=e=>{var{children:t}=e,r=Xr(X2);if(!r)return null;var{width:n,height:s,y:i,x:o}=r;return N.createElement(F3,{width:n,height:s,x:o,y:i},t)},BL=N.forwardRef((e,t)=>{var{children:r}=e,n=Gme(e,Wme),s=Xc();return s?N.createElement(Qme,null,r):N.createElement(Xme,Cw({ref:t},n),r)});function Jme(){var e=Ji(),[t,r]=N.useState(null),n=Xr(zae);return N.useEffect(()=>{if(t!=null){var s=t.getBoundingClientRect(),i=s.width/t.offsetWidth;zo(i)&&i!==n&&e(xae(i))}},[t,e,n]),r}function UL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zme(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UL(Object(r),!0).forEach(function(n){epe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UL(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function epe(e,t,r){return(t=tpe(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tpe(e){var t=rpe(e,"string");return typeof t=="symbol"?t:t+""}function rpe(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ape=N.forwardRef((e,t)=>{var{children:r,className:n,height:s,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:m,onTouchEnd:p,onTouchMove:v,onTouchStart:g,style:b,width:y}=e,C=Ji(),[w,k]=N.useState(null),[S,D]=N.useState(null);Xde();var E=Jme(),T=N.useCallback(M=>{E(M),typeof t=="function"&&t(M),k(M),D(M)},[E,t,k,D]),A=N.useCallback(M=>{C(Tq(M)),C(Dc({handler:i,reactEvent:M}))},[C,i]),L=N.useCallback(M=>{C(m5(M)),C(Dc({handler:d,reactEvent:M}))},[C,d]),P=N.useCallback(M=>{C(BV()),C(Dc({handler:u,reactEvent:M}))},[C,u]),O=N.useCallback(M=>{C(m5(M)),C(Dc({handler:h,reactEvent:M}))},[C,h]),Z=N.useCallback(()=>{C(Fq())},[C]),z=N.useCallback(M=>{C(Rq(M.key))},[C]),K=N.useCallback(M=>{C(Dc({handler:o,reactEvent:M}))},[C,o]),B=N.useCallback(M=>{C(Dc({handler:l,reactEvent:M}))},[C,l]),Q=N.useCallback(M=>{C(Dc({handler:c,reactEvent:M}))},[C,c]),U=N.useCallback(M=>{C(Dc({handler:m,reactEvent:M}))},[C,m]),J=N.useCallback(M=>{C(Dc({handler:g,reactEvent:M}))},[C,g]),Y=N.useCallback(M=>{C(Bq(M)),C(Dc({handler:v,reactEvent:M}))},[C,v]),oe=N.useCallback(M=>{C(Dc({handler:p,reactEvent:M}))},[C,p]);return N.createElement(aq.Provider,{value:w},N.createElement(U9.Provider,{value:S},N.createElement("div",{className:pa("recharts-wrapper",n),style:Zme({position:"relative",cursor:"default",width:y,height:s},b),onClick:A,onContextMenu:K,onDoubleClick:B,onFocus:Z,onKeyDown:z,onMouseDown:Q,onMouseEnter:L,onMouseLeave:P,onMouseMove:O,onMouseUp:U,onTouchEnd:oe,onTouchMove:Y,onTouchStart:J,ref:T},r)))}),npe=["children","className","width","height","style","compact","title","desc"];function spe(e,t){if(e==null)return{};var r,n,s=ipe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function ipe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var ope=N.forwardRef((e,t)=>{var{children:r,className:n,width:s,height:i,style:o,compact:l,title:c,desc:d}=e,u=spe(e,npe),h=Dn(u,!1);return l?N.createElement(BL,{otherAttributes:h,title:c,desc:d},r):N.createElement(ape,{className:n,style:o,width:s,height:i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},N.createElement(BL,{otherAttributes:h,title:c,desc:d,ref:t},N.createElement(Vhe,null,r)))}),lpe=["width","height"];function p5(){return p5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p5.apply(null,arguments)}function cpe(e,t){if(e==null)return{};var r,n,s=dpe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function dpe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var upe={top:5,right:5,bottom:5,left:5},hpe={accessibilityLayer:!0,layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:upe,reverseStackOrder:!1,syncMethod:"index"},fpe=N.forwardRef(function(t,r){var n,s=Q0(t.categoricalChartProps,hpe),{width:i,height:o}=s,l=cpe(s,lpe);if(!sw(i)||!sw(o))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,categoricalChartProps:m}=t,p={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return N.createElement(qme,{preloadedState:{options:p},reduxStoreName:(n=m.id)!==null&&n!==void 0?n:c},N.createElement(Ihe,{chartData:m.data}),N.createElement(zme,{width:i,height:o,layout:s.layout,margin:s.margin}),N.createElement(Hme,{accessibilityLayer:s.accessibilityLayer,barCategoryGap:s.barCategoryGap,maxBarSize:s.maxBarSize,stackOffset:s.stackOffset,barGap:s.barGap,barSize:s.barSize,syncId:s.syncId,syncMethod:s.syncMethod,className:s.className}),N.createElement(ope,p5({},l,{width:i,height:o,ref:r})))}),mpe=["axis"],ppe=N.forwardRef((e,t)=>N.createElement(fpe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:mpe,tooltipPayloadSearcher:Ude,categoricalChartProps:e,ref:t}));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xpe=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),vpe=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),$L=e=>{const t=vpe(e);return t.charAt(0).toUpperCase()+t.slice(1)},$q=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),gpe=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bpe={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ype=N.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>N.createElement("svg",{ref:c,...bpe,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:$q("lucide",s),...!i&&!gpe(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,u])=>N.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=(e,t)=>{const r=N.forwardRef(({className:n,...s},i)=>N.createElement(ype,{ref:i,iconNode:t,className:$q(`lucide-${xpe($L(e))}`,`lucide-${e}`,n),...s}));return r.displayName=$L(e),r};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jpe=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Npe=Zy("credit-card",jpe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wpe=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Spe=Zy("dollar-sign",wpe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cpe=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],kpe=Zy("file-text",Cpe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _pe=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Epe=Zy("shopping-cart",_pe);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dpe=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Ape=Zy("trending-up",Dpe),Tpe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState([]),[u,h]=N.useState(!0),[m,p]=N.useState(new Date().getFullYear()),[v]=N.useState(localStorage.getItem("selectedCompanyId")||""),[g]=N.useState(localStorage.getItem("financialYear")||""),b=new Date().getFullYear(),y=[b-1,b,b+1];N.useEffect(()=>{(async()=>{h(!0);try{const k={companyId:v,financialYear:g},[S,D,E,T,A]=await Promise.all([Oe.get("/api/purchase-orders",{params:k}),Oe.get("/api/sales-orders",{params:k}),Oe.get("/api/stock/data",{params:k}),Oe.get("/api/invoiceform",{params:k}),Oe.get("/api/billingform",{params:k})]);t(S.data),n(D.data),i(E.data),l(T.data),d(A.data)}catch(k){console.error("Data fetch error:",k)}finally{h(!1)}})()},[v,g]);const C=N.useMemo(()=>{const w=Array.from({length:12},(S,D)=>({month:new Date(2e3,D).toLocaleString("default",{month:"short"}),purchases:0,sales:0,inventory:0,invoices:0,billings:0})),k=(S,D,E,T)=>{S?.forEach(A=>{const L=new Date(A[D]);if(!isNaN(L)&&L.getFullYear()===Number(m)){const P=L.getMonth();w[P][T]+=E?A[E]||0:1}})};return k(e,"date","finalTotal","purchases"),k(r,"date","finalTotal","sales"),k(s,"createdAt",null,"inventory"),k(o,"documentDate","finalTotal","invoices"),k(c,"documentDate","finalTotal","billings"),w},[e,r,s,o,c,m]);return e.reduce((w,k)=>w+(k.finalTotal||0),0),r.reduce((w,k)=>w+(k.finalTotal||0),0),o.reduce((w,k)=>w+(k.finalTotal||0),0),c.reduce((w,k)=>w+(k.finalTotal||0),0),u?a.jsx("div",{className:"min-vh-100 d-flex align-items-center justify-content-center",children:a.jsxs("div",{className:"text-center text-white",children:[a.jsx("div",{className:"spinner-border text-light mb-3",role:"status",style:{width:"4rem",height:"4rem"},children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"fs-5",children:"Loading your dashboard..."})]})}):a.jsxs("div",{className:"min-vh-100",style:{background:"linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%)"},children:[a.jsx("style",{children:`
        .card-hover {
          transition: all 0.3s ease;
        }
        .card-hover:hover {
          transform: translateY(-5px);
          box-shadow: 0 10px 25px rgba(0,0,0,0.15) !important;
        }
        .gradient-bg {
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .metric-card {
          border: none;
          border-radius: 15px;
          overflow: hidden;
          position: relative;
        }
        .metric-card::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          height: 4px;
          background: linear-gradient(90deg, #667eea, #764ba2);
        }
        .chart-container {
          border-radius: 15px;
          border: none;
          box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        .stat-item {
          padding: 12px;
          margin: 5px 0;
          border-radius: 10px;
          background: rgba(255,255,255,0.7);
          transition: all 0.3s ease;
        }
        .stat-item:hover {
          background: rgba(255,255,255,0.9);
          transform: translateX(5px);
        }
        .progress-custom {
          height: 8px;
          border-radius: 10px;
          background: rgba(0,0,0,0.1);
        }
        .progress-bar-custom {
          border-radius: 10px;
          background: linear-gradient(90deg, #667eea, #764ba2);
        }
      `}),a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"d-grid gap-4 mb-4",style:{gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))"},children:[{title:"Purchase Orders",value:e.length,icon:Epe,color:"primary",bgColor:"bg-primary"},{title:"Sales Orders",value:r.length,icon:Spe,color:"success",bgColor:"bg-success"},{title:"Vendor Invoices",value:o.length,icon:kpe,color:"info",bgColor:"bg-info"},{title:"Customer Invoices",value:c.length,icon:Npe,color:"danger",bgColor:"bg-danger"}].map((w,k)=>a.jsx("div",{className:"card metric-card card-hover h-100",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("div",{className:`${w.bgColor} bg-opacity-10 p-3 rounded-3 text-center`,children:a.jsx(w.icon,{size:24,className:`text-${w.color}`})})}),a.jsxs("div",{className:"col-8 text-end",children:[a.jsx("div",{className:`h4 fw-bold text-${w.color} mb-1`,children:w.value}),a.jsx("div",{className:"small text-muted",children:w.title})]})]})})},k))}),a.jsx("div",{className:"row g-4 mb-4",children:a.jsx("div",{className:"col-lg-12",children:a.jsxs("div",{className:"card chart-container",children:[a.jsxs("div",{className:"card-header bg-transparent border-0 d-flex justify-content-between align-items-center",children:[a.jsxs("h5",{className:"card-title fw-bold mb-0 d-flex align-items-center",children:[a.jsx(Ape,{size:20,className:"text-primary me-2"}),"Monthly Financial Trends (",m,")"]}),a.jsx("select",{className:"form-select w-auto",value:m,onChange:w=>p(Number(w.target.value)),children:y.map(w=>a.jsx("option",{value:w,children:w},w))})]}),a.jsx("div",{className:"card-body",children:a.jsx(fue,{width:"100%",height:350,children:a.jsxs(ppe,{data:C,children:[a.jsxs("defs",{children:[a.jsxs("linearGradient",{id:"colorSales",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#28a745",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#28a745",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorPurchases",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#007bff",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#007bff",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorInvoices",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#6f42c1",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#6f42c1",stopOpacity:0})]}),a.jsxs("linearGradient",{id:"colorBillings",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#dc3545",stopOpacity:.15}),a.jsx("stop",{offset:"95%",stopColor:"#dc3545",stopOpacity:0})]})]}),a.jsx(yq,{strokeDasharray:"3 3",stroke:"#e9ecef"}),a.jsx(lT,{dataKey:"month",stroke:"#6c757d"}),a.jsx(cT,{tickFormatter:w=>`₹${(w/1e3).toFixed(0)}k`,stroke:"#6c757d"}),a.jsx(nue,{formatter:(w,k)=>["inventory"].includes(k.toLowerCase())?[`${w}`,k]:[`₹${w.toLocaleString()}`,k],contentStyle:{backgroundColor:"white",border:"none",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}}),a.jsx(Q2,{wrapperStyle:{paddingTop:"20px"},iconType:"circle"}),a.jsx(Jv,{type:"monotone",dataKey:"sales",stroke:"#28a745",fillOpacity:1,fill:"url(#colorSales)",strokeWidth:2,name:"Sales Orders"}),a.jsx(Jv,{type:"monotone",dataKey:"purchases",stroke:"#007bff",fillOpacity:1,fill:"url(#colorPurchases)",strokeWidth:2,name:"Purchase Orders"}),a.jsx(Jv,{type:"monotone",dataKey:"invoices",stroke:"#6f42c1",fillOpacity:1,fill:"url(#colorInvoices)",strokeWidth:2,name:"Invoices"}),a.jsx(Jv,{type:"monotone",dataKey:"billings",stroke:"#dc3545",fillOpacity:1,fill:"url(#colorBillings)",strokeWidth:2,name:"Billings"})]})})})]})})})]})]})},Ipe=()=>{const e=Xu(),[t,r]=N.useState(""),[n,s]=N.useState(""),[i,o]=N.useState(!1),[l,c]=N.useState(!1),[d,u]=N.useState(""),h=async m=>{m.preventDefault(),o(!0);try{const p=await Oe.post("/api/users/login",{identifier:d,password:n});console.log("✅ Logged in user:",p.data.user);const v=p.data.user;localStorage.setItem("user",JSON.stringify(v)),console.log("User data:",v),alert("Login successful!"),e("/loginscreen")}catch(p){alert("Login failed: "+(p.response?.data?.error||"Unknown error"))}finally{o(!1)}};return a.jsx("div",{className:"container-fluid min-vh-100 d-flex align-items-center justify-content-center",style:{backgroundImage:'url("/assets/img/loginbg.png")',backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},children:a.jsx("div",{className:"row w-100 justify-content-center",children:a.jsxs("div",{className:"col-11 col-sm-9 col-md-7 col-lg-5 col-xl-4",children:[a.jsxs("div",{className:"card shadow-lg border-0 rounded-4",style:{maxHeight:"90vh",height:"auto"},children:[a.jsxs("div",{className:"card-body p-4 overflow-auto",children:[a.jsx("div",{className:"text-center mb-3",children:a.jsx("div",{className:"bg-primary rounded-circle d-inline-flex align-items-center justify-content-center mb-2",style:{width:"60px",height:"60px"},children:a.jsx("i",{className:"ti ti-building text-white",style:{fontSize:"1.8rem"}})})}),a.jsxs("div",{className:"text-center mb-3",children:[a.jsx("h1",{className:"fw-bold text-primary mb-1",style:{fontSize:"1.5rem"},children:"Jyothi Cloud ERP"}),a.jsx("p",{style:{textAlign:"center"},children:"(Endless Possibilities)"}),a.jsx("p",{className:"text-muted mb-0 small",children:"Enter your credentials to access your account"})]}),a.jsxs("form",{onSubmit:h,children:[a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label fw-semibold text-dark small",children:[a.jsx("i",{className:"ti ti-mail me-2 text-primary"}),"Email or Phone"]}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text bg-light border-end-0",children:a.jsx("i",{className:"ti ti-user text-muted"})}),a.jsx("input",{type:"text",id:"identifier",value:d,onChange:m=>u(m.target.value),className:"form-control border-start-0 py-2",placeholder:"Enter your email or phone number",required:!0,disabled:i})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label fw-semibold text-dark small",children:[a.jsx("i",{className:"ti ti-lock me-2 text-primary"}),"Password"]}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text bg-light border-end-0",children:a.jsx("i",{className:"ti ti-key text-muted"})}),a.jsx("input",{type:l?"text":"password",id:"password",value:n,onChange:m=>s(m.target.value),className:"form-control border-start-0 border-end-0 py-2",placeholder:"Enter your password",required:!0,disabled:i}),a.jsx("span",{className:"input-group-text bg-light border-start-0 cursor-pointer",onClick:()=>c(!l),style:{cursor:"pointer"},children:a.jsx("i",{className:`ti ${l?"ti-eye text-primary":"ti-eye-off text-muted"}`})})]})]}),a.jsx("div",{className:"mb-3",children:a.jsx("button",{type:"submit",className:"btn btn-primary w-100 fw-semibold",disabled:i,children:i?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Signing In..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"ti ti-login me-2"}),"Sign In"]})})})]})]}),a.jsx("div",{className:"card-footer bg-light border-0 text-center py-3",children:a.jsxs("p",{className:"text-muted small mb-0",children:["Designed and Developed By"," ",a.jsx(qp,{to:"https://excerptech.com/",className:"text-primary text-decoration-none fw-semibold",target:"_blank",rel:"noopener noreferrer",children:"Excerpt Technologies Pvt Ltd"})," @ 2025"]})})]}),a.jsx("div",{className:"text-center mt-3",children:a.jsx("div",{className:"bg-white bg-opacity-90 rounded-3 p-2 d-inline-block",children:a.jsxs("div",{className:"d-flex gap-3 justify-content-center",children:[a.jsxs(qp,{to:"#",className:"text-primary text-decoration-none small",children:[a.jsx("i",{className:"ti ti-phone me-1"}),"Support"]}),a.jsxs(qp,{to:"#",className:"text-primary text-decoration-none small",children:[a.jsx("i",{className:"ti ti-mail me-1"}),"Contact"]}),a.jsxs(qp,{to:"#",className:"text-primary text-decoration-none small",children:[a.jsx("i",{className:"ti ti-book me-1"}),"Guide"]})]})})})]})})})},Ppe=({onOpen:e})=>{const[t,r]=N.useState([]),[n,s]=N.useState(""),[i,o]=N.useState(()=>new Date().toISOString().split("T")[0]),[l,c]=N.useState([]),[d,u]=N.useState(""),[h,m]=N.useState(!1),p=Xu(),v=JSON.parse(localStorage.getItem("user"))?.id;console.log("User ID from localStorage:",localStorage.getItem("user")),console.log("Fetching companies for user ID:",v),N.useEffect(()=>{if(!v)return;m(!0),Oe.get(`/api/users/${v}/companies`).then(w=>{r(w.data),w.data.length>0&&s(w.data[0]._id)}).catch(w=>{console.error("Error fetching companies:",w)}).finally(()=>{m(!1)});const b=[],C=new Date().getFullYear();for(let w=2020;w<=C;w++)b.push(`01/04/${w} - 31/03/${w+1}`);c(b.reverse())},[v]);const g=()=>{if(!n||!i||!d)return alert("Please select all fields");localStorage.setItem("selectedCompanyId",n),localStorage.setItem("financialYear",d),console.log("financial",localStorage.getItem("financialYear")),console.log("company",localStorage.getItem("selectedCompanyId")),e?.({companyId:n,financialYear:d}),p("/")};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"container-fluid vh-100 d-flex align-items-center justify-content-center",children:a.jsx("div",{className:"row w-100",children:a.jsx("div",{className:"col-12 col-md-6 col-lg-4 mx-auto",children:a.jsxs("div",{className:"card shadow-lg border-0",children:[a.jsx("div",{className:"card-header bg-primary  py-4",children:a.jsx("h3",{className:"mb-0 text-white text-center ",children:"Jyothi Cloud ERP"})}),a.jsx("div",{className:"card-body p-4",children:h?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2 text-muted",children:"Loading companies..."})]}):a.jsxs("form",{children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"form-label fw-semibold",children:[a.jsx("i",{className:"ti ti-building me-2 text-primary"}),"Company"]}),a.jsxs("select",{className:"form-select form-select-lg",value:n,onChange:b=>s(b.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Choose a company..."}),t.map(b=>a.jsx("option",{value:b._id,children:b.name},b._id))]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"form-label fw-semibold",children:[a.jsx("i",{className:"bi bi-calendar-range me-2 text-primary"}),"Transaction Period"]}),a.jsxs("select",{className:"form-select form-select-lg",value:d,onChange:b=>u(b.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select financial year..."}),l.map((b,y)=>a.jsx("option",{value:b,children:b},y))]})]}),a.jsx("div",{className:"d-grid gap-2",children:a.jsxs("button",{type:"button",onClick:g,className:"btn btn-primary btn-sm",disabled:!n||!i||!d,children:[a.jsx("i",{className:"bi bi-box-arrow-in-right me-2"}),"Open Transaction"]})})]})}),a.jsxs("div",{className:"card-footer text-center py-3 bg-light",children:[a.jsxs("small",{className:"text-muted",children:[a.jsx("i",{className:"bi bi-shield-check me-1"}),"Secure transaction portal"]}),a.jsxs("p",{className:"text-muted small mb-0",children:["Designed and Developed By"," ",a.jsx(qp,{to:"https://excerptech.com/",className:"text-primary text-decoration-none fw-semibold",target:"_blank",rel:"noopener noreferrer",children:"Excerpt Technologies Pvt Ltd"})," @ 2025"]})]})]})})})}),a.jsx("link",{href:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.10.0/font/bootstrap-icons.min.css",rel:"stylesheet"})]})},Ope=()=>{const[e,t]=N.useState({username:"",email:"",phone:"",address:"",password:"",companies:[],roles:[]}),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState(!0);N.useEffect(()=>{(async()=>{try{const[p,v]=await Promise.all([Oe.get("/api/companies"),Oe.get("/api/roles")]);n(p.data),i(v.data)}catch(p){console.error("Error fetching data:",p),alert("Error loading companies and roles")}finally{l(!1)}})()},[]);const c=(m,p)=>{t({...e,[m]:p})},d=m=>{const v=e.roles.includes(m)?e.roles.filter(g=>g!==m):[...e.roles,m];t({...e,roles:v})},u=async m=>{m.preventDefault();try{await Oe.post("/api/users/create",e),alert("User created successfully!"),t({username:"",email:"",phone:"",address:"",password:"",companies:[],roles:[]})}catch(p){console.error("Error creating user:",p),alert("Error creating user. Please try again.")}},h=m=>e.roles.includes(m);return o?a.jsx("div",{className:"container mt-5",children:a.jsx("div",{className:"row justify-content-center",children:a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2",children:"Loading form data..."})]})})})}):a.jsx("div",{className:"content",children:a.jsx("div",{className:"row justify-content-center",children:a.jsx("div",{className:"col-md-10 col-lg-8",children:a.jsxs("div",{className:"card shadow",children:[a.jsx("div",{className:"card-header bg-success text-white",children:a.jsxs("h3",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-user-plus me-2"}),"Create New User"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:u,children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("h5",{className:"text-primary mb-3",children:[a.jsx("i",{className:"fas fa-user me-2"}),"Basic Information"]})})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"username",className:"form-label",children:[a.jsx("i",{className:"fas fa-user me-2"}),"Username ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",id:"username",className:"form-control",placeholder:"Enter username",value:e.username,onChange:m=>c("username",m.target.value),required:!0})]}),a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"email",className:"form-label",children:[a.jsx("i",{className:"fas fa-envelope me-2"}),"Email ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"email",id:"email",className:"form-control",placeholder:"Enter email address",value:e.email,onChange:m=>c("email",m.target.value),required:!0})]}),a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"phone",className:"form-label",children:[a.jsx("i",{className:"fas fa-phone me-2"}),"Phone ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"tel",id:"phone",className:"form-control",placeholder:"Enter phone number",value:e.phone,onChange:m=>{const p=m.target.value.replace(/[^0-9]/g,"").slice(0,10);(p.length===0||/^[6-9]/.test(p))&&c("phone",p)},required:!0})]}),a.jsxs("div",{className:"col-md-3 mb-3",children:[a.jsxs("label",{htmlFor:"password",className:"form-label",children:[a.jsx("i",{className:"fas fa-lock me-2"}),"Password ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"password",id:"password",className:"form-control",placeholder:"Enter password",value:e.password,onChange:m=>c("password",m.target.value),required:!0})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsxs("label",{htmlFor:"address",className:"form-label",children:[a.jsx("i",{className:"fas fa-map-marker-alt me-2"}),"Address ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("textarea",{id:"address",className:"form-control",rows:"3",placeholder:"Enter full address",value:e.address,onChange:m=>c("address",m.target.value),required:!0})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{htmlFor:"companies",className:"form-label",children:[a.jsx("i",{className:"fas fa-building me-2"}),"Select Companies ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("select",{id:"companies",multiple:!0,className:"form-select",style:{minHeight:"120px"},value:e.companies,onChange:m=>c("companies",Array.from(m.target.selectedOptions,p=>p.value)),required:!0,children:r.map(m=>a.jsx("option",{value:m._id,children:m.name},m._id))}),a.jsxs("div",{className:"form-text",children:[a.jsx("i",{className:"fas fa-info-circle me-1"}),"Hold Ctrl (Cmd on Mac) to select multiple companies"]})]}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("h5",{className:"text-primary mb-2",children:[a.jsx("i",{className:"fas fa-users-cog me-2"}),"Assign Roles"]})})}),a.jsx("div",{className:"row",children:s.map(m=>a.jsx("div",{className:"col-md-6 col-lg-4 mb-3",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:`role-${m._id}`,checked:h(m._id),onChange:()=>d(m._id)}),a.jsxs("label",{className:"form-check-label",htmlFor:`role-${m._id}`,children:[a.jsx("strong",{children:m.roleName}),a.jsx("br",{}),a.jsxs("small",{className:"text-muted",children:["(",m.roleId,")"]})]})]})},m._id))}),a.jsx("div",{className:"d-grid mt-4",children:a.jsxs("button",{type:"submit",className:"btn btn-success btn-lg",children:[a.jsx("i",{className:"fas fa-user-plus me-2"}),"Create User"]})})]})})]})})})})};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var kw={};kw.version="0.18.5";var Vq=1252,Mpe=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],fT={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},mT=function(e){Mpe.indexOf(e)!=-1&&(Vq=fT[0]=e)};function Rpe(){mT(1252)}var Ed=function(e){mT(e)};function pT(){Ed(1200),Rpe()}function VL(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function Fpe(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function qq(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Ab=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?Fpe(e.slice(2)):t==254&&r==255?qq(e.slice(2)):t==65279?e.slice(1):e},Mj=function(t){return String.fromCharCode(t)},qL=function(t){return String.fromCharCode(t)},cy,Sm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function dy(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,n=e.charCodeAt(d++),o=(r&3)<<4|n>>4,s=e.charCodeAt(d++),l=(n&15)<<2|s>>6,c=s&63,isNaN(n)?l=c=64:isNaN(s)&&(c=64),t+=Sm.charAt(i)+Sm.charAt(o)+Sm.charAt(l)+Sm.charAt(c);return t}function ic(e){var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=Sm.indexOf(e.charAt(d++)),o=Sm.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Sm.indexOf(e.charAt(d++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Sm.indexOf(e.charAt(d++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var _a=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),pf=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function Lm(e){return _a?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function zL(e){return _a?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Wl=function(t){return _a?pf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function xS(e){if(typeof ArrayBuffer>"u")return Wl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function Zm(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function Lpe(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function xT(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return xT(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var ki=_a?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:pf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function Bpe(e){for(var t=[],r=0,n=e.length+250,s=Lm(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=Lm(65535),n=65530)}return t.push(s.slice(0,r)),ki(t)}var qo=/\u0000/g,Tb=/[\u0001-\u0006]/g;function n0(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Dd(e,t){var r=""+e;return r.length>=t?r:js("0",t-r.length)+r}function vT(e,t){var r=""+e;return r.length>=t?r:js(" ",t-r.length)+r}function _w(e,t){var r=""+e;return r.length>=t?r:r+js(" ",t-r.length)}function Upe(e,t){var r=""+Math.round(e);return r.length>=t?r:js("0",t-r.length)+r}function $pe(e,t){var r=""+e;return r.length>=t?r:js("0",t-r.length)+r}var HL=Math.pow(2,32);function Av(e,t){if(e>HL||e<-HL)return Upe(e,t);var r=Math.round(e);return $pe(r,t)}function Ew(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var WL=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],K_=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function Vpe(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"上午/下午 "hh"時"mm"分"ss"秒 "',e}var ra={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"上午/下午 "hh"時"mm"分"ss"秒 "'},GL={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},qpe={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Dw(e,t,r){for(var n=e<0?-1:1,s=e*n,i=0,o=1,l=0,c=1,d=0,u=0,h=Math.floor(s);d<t&&(h=Math.floor(s),l=h*o+i,u=h*d+c,!(s-h<5e-8));)s=1/(s-h),i=o,o=l,c=d,d=u;if(u>t&&(d>t?(u=c,l=i):(u=d,l=o)),!r)return[0,n*l,u];var m=Math.floor(n*l/u);return[m,n*l-m*u,u]}function Qp(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=Kpe(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var zq=new Date(1899,11,31,0,0,0),zpe=zq.getTime(),Hpe=new Date(1900,2,1,0,0,0);function Hq(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Hpe&&(r+=24*60*60*1e3),(r-(zpe+(e.getTimezoneOffset()-zq.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function gT(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Wpe(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Gpe(e){var t=e<0?12:11,r=gT(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Ype(e){var t=gT(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function uy(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Gpe(e):t===10?r=e.toFixed(10).substr(0,12):r=Ype(e),gT(Wpe(r.toUpperCase()))}function Nx(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):uy(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return Gc(14,Hq(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Kpe(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Xpe(e,t,r,n){var s="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return K_[r.m-1][1];case 5:return K_[r.m-1][0];default:return K_[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return WL[r.q][0];default:return WL[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Dd(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Dd(i,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?Dd(c,d):"";return u}function Cm(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var Wq=/%/g;function Qpe(e,t,r){var n=t.replace(Wq,""),s=t.length-n.length;return Hh(e,n,r*Math.pow(10,2*s))+js("%",s)}function Jpe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Hh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Gq(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Gq(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Yq=/# (\?+)( ?)\/( ?)(\d+)/;function Zpe(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?js(" ",e[1].length+1+e[4].length):vT(o,e[1].length)+e[2]+"/"+e[3]+Dd(l,e[4].length))}function exe(e,t,r){return r+(t===0?"":""+t)+js(" ",e[1].length+2+e[4].length)}var Kq=/^#*0*\.([0#]+)/,Xq=/\).*[0#]/,Qq=/\(###\) ###\\?-####/;function Lo(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function YL(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function KL(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function txe(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function rxe(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Ac(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Xq)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ac("n",n,r):"("+Ac("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Jpe(e,t,r);if(t.indexOf("%")!==-1)return Qpe(e,t,r);if(t.indexOf("E")!==-1)return Gq(t,r);if(t.charCodeAt(0)===36)return"$"+Ac(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Av(c,t.length);if(t.match(/^[#?]+$/))return s=Av(r,0),s==="0"&&(s=""),s.length>t.length?s:Lo(t.substr(0,t.length-s.length))+s;if(i=t.match(Yq))return Zpe(i,c,d);if(t.match(/^#+0+$/))return d+Av(c,t.length-t.indexOf("0"));if(i=t.match(Kq))return s=YL(r,i[1].length).replace(/^([^\.]+)$/,"$1."+Lo(i[1])).replace(/\.$/,"."+Lo(i[1])).replace(/\.(\d*)$/,function(v,g){return"."+g+js("0",Lo(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+YL(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Cm(Av(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ac(e,t,-r):Cm(""+(Math.floor(r)+txe(r,i[1].length)))+"."+Dd(KL(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Ac(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=n0(Ac(e,t.replace(/[\\-]/g,""),r)),o=0,n0(n0(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(Qq))return s=Ac(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Dw(c,Math.pow(10,o)-1,!1),s=""+d,u=Hh("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=_w(l[2],o),u.length<i[4].length&&(u=Lo(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Dw(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?vT(l[1],o)+i[2]+"/"+i[3]+_w(l[2],o):js(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=Av(r,0),t.length<=s.length?s:Lo(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var h=t.indexOf(".")-o,m=t.length-s.length-h;return Lo(t.substr(0,h)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=KL(r,i[1].length),r<0?"-"+Ac(e,t,-r):Cm(rxe(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Dd(0,3-v.length):"")+v})+"."+Dd(o,i[1].length);switch(t){case"###,##0.00":return Ac(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Cm(Av(c,0));return p!=="0"?d+p:"";case"###,###.00":return Ac(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Ac(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function axe(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Hh(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function nxe(e,t,r){var n=t.replace(Wq,""),s=t.length-n.length;return Hh(e,n,r*Math.pow(10,2*s))+js("%",s)}function Jq(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+Jq(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function bu(e,t,r){if(e.charCodeAt(0)===40&&!t.match(Xq)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?bu("n",n,r):"("+bu("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return axe(e,t,r);if(t.indexOf("%")!==-1)return nxe(e,t,r);if(t.indexOf("E")!==-1)return Jq(t,r);if(t.charCodeAt(0)===36)return"$"+bu(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Dd(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:Lo(t.substr(0,t.length-s.length))+s;if(i=t.match(Yq))return exe(i,c,d);if(t.match(/^#+0+$/))return d+Dd(c,t.length-t.indexOf("0"));if(i=t.match(Kq))return s=(""+r).replace(/^([^\.]+)$/,"$1."+Lo(i[1])).replace(/\.$/,"."+Lo(i[1])),s=s.replace(/\.(\d*)$/,function(v,g){return"."+g+js("0",Lo(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Cm(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+bu(e,t,-r):Cm(""+r)+"."+js("0",i[1].length);if(i=t.match(/^#,#*,#0/))return bu(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=n0(bu(e,t.replace(/[\\-]/g,""),r)),o=0,n0(n0(t.replace(/\\/g,"")).replace(/[0#]/g,function(v){return o<s.length?s.charAt(o++):v==="0"?"0":""}));if(t.match(Qq))return s=bu(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=Dw(c,Math.pow(10,o)-1,!1),s=""+d,u=Hh("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=_w(l[2],o),u.length<i[4].length&&(u=Lo(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=Dw(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?vT(l[1],o)+i[2]+"/"+i[3]+_w(l[2],o):js(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:Lo(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var h=t.indexOf(".")-o,m=t.length-s.length-h;return Lo(t.substr(0,h)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+bu(e,t,-r):Cm(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(v){return"00,"+(v.length<3?Dd(0,3-v.length):"")+v})+"."+Dd(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=Cm(""+c);return p!=="0"?d+p:"";default:if(t.match(/\.[0#?]*$/))return bu(e,t.slice(0,t.lastIndexOf(".")),r)+Lo(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Hh(e,t,r){return(r|0)===r?bu(e,t,r):Ac(e,t,r)}function sxe(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var Zq=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function sg(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":Ew(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"上":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="上午/下午")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(Zq))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function ixe(e,t,r,n){for(var s=[],i="",o=0,l="",c="t",d,u,h,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!Ew(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(h=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(h);s[s.length]={t:"t",v:i},++o;break;case"\\":var p=e.charAt(++o),v=p==="("||p===")"?p:"t";s[s.length]={t:v,v:p},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=Qp(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=Qp(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"上":var g={t:l,v:l};if(d==null&&(d=Qp(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(g.v=d.H>=12?"P":"A"),g.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(g.v=d.H>=12?"PM":"AM"),g.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="上午/下午"?(d!=null&&(g.v=d.H>=12?"下午":"上午"),g.t="T",o+=5,m="h"):(g.t="t",++o),d==null&&g.t==="T")return"";s[s.length]=g,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(Zq)){if(d==null&&(d=Qp(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",sg(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var b=0,y=0,C;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=m,c="h",b<1&&(b=1);break;case"s":(C=s[o].v.match(/\.0+$/))&&(y=Math.max(y,C[0].length-1)),b<3&&(b=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",b<2&&(b=2));break;case"X":break;case"Z":b<1&&s[o].v.match(/[Hh]/)&&(b=1),b<2&&s[o].v.match(/[Mm]/)&&(b=2),b<3&&s[o].v.match(/[Ss]/)&&(b=3)}switch(b){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var w="",k;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Xpe(s[o].t.charCodeAt(0),s[o].v,d,y),s[o].t="t";break;case"n":case"?":for(k=o+1;s[k]!=null&&((l=s[k].t)==="?"||l==="D"||(l===" "||l==="t")&&s[k+1]!=null&&(s[k+1].t==="?"||s[k+1].t==="t"&&s[k+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[k].v==="/"||s[k].v===" "&&s[k+1]!=null&&s[k+1].t=="?"));)s[o].v+=s[k].v,s[k]={v:"",t:";"},++k;w+=s[o].v,o=k-1;break;case"G":s[o].t="t",s[o].v=Nx(t,r);break}var S="",D,E;if(w.length>0){w.charCodeAt(0)==40?(D=t<0&&w.charCodeAt(0)===45?-t:t,E=Hh("n",w,D)):(D=t<0&&n>1?-t:t,E=Hh("n",w,D),D<0&&s[0]&&s[0].t=="t"&&(E=E.substr(1),s[0].v="-"+s[0].v)),k=E.length-1;var T=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){T=o;break}var A=s.length;if(T===s.length&&E.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(k>=s[o].v.length-1?(k-=s[o].v.length,s[o].v=E.substr(k+1,s[o].v.length)):k<0?s[o].v="":(s[o].v=E.substr(0,k+1),k=-1),s[o].t="t",A=o);k>=0&&A<s.length&&(s[A].v=E.substr(0,k+1)+s[A].v)}else if(T!==s.length&&E.indexOf("E")===-1){for(k=E.indexOf(".")-1,o=T;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(u=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(u+1);u>=0;--u)k>=0&&(s[o].v.charAt(u)==="0"||s[o].v.charAt(u)==="#")&&(S=E.charAt(k--)+S);s[o].v=S,s[o].t="t",A=o}for(k>=0&&A<s.length&&(s[A].v=E.substr(0,k+1)+s[A].v),k=E.indexOf(".")+1,o=T;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==T)){for(u=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,u);u<s[o].v.length;++u)k<E.length&&(S+=E.charAt(k++));s[o].v=S,s[o].t="t",A=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(D=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Hh(s[o].t,s[o].v,D),s[o].t="t");var L="";for(o=0;o!==s.length;++o)s[o]!=null&&(L+=s[o].v);return L}var XL=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function QL(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function oxe(e,t){var r=sxe(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(XL),l=r[1].match(XL);return QL(t,o)?[n,r[0]]:QL(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function Gc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:ra)[e],n==null&&(n=r.table&&r.table[GL[e]]||ra[GL[e]]),n==null&&(n=qpe[e]||"General");break}if(Ew(n,0))return Nx(t,r);t instanceof Date&&(t=Hq(t,r.date1904));var s=oxe(n,t);if(Ew(s[1]))return Nx(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return ixe(s[1],t,r,s[0])}function Wh(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(ra[r]==null){t<0&&(t=r);continue}if(ra[r]==e){t=r;break}}t<0&&(t=391)}return ra[t]=e,t}function vS(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Wh(e[t],t)}function ig(){ra=Vpe()}var lxe={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},ez=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function cxe(e){var t=typeof e=="number"?ra[e]:e;return t=t.replace(ez,"(\\d+)"),new RegExp("^"+t+"$")}function dxe(e,t,r){var n=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(ez)||[]).forEach(function(h,m){var p=parseInt(r[m+1],10);switch(h.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:s=p;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:n==-1&&s==-1&&i==-1?u:d+"T"+u}var uxe=function(){var e={};e.version="1.2.0";function t(){for(var E=0,T=new Array(256),A=0;A!=256;++A)E=A,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,E=E&1?-306674912^E>>>1:E>>>1,T[A]=E;return typeof Int32Array<"u"?new Int32Array(T):T}var r=t();function n(E){var T=0,A=0,L=0,P=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(L=0;L!=256;++L)P[L]=E[L];for(L=0;L!=256;++L)for(A=E[L],T=256+L;T<4096;T+=256)A=P[T]=A>>>8^E[A&255];var O=[];for(L=1;L!=16;++L)O[L-1]=typeof Int32Array<"u"?P.subarray(L*256,L*256+256):P.slice(L*256,L*256+256);return O}var s=n(r),i=s[0],o=s[1],l=s[2],c=s[3],d=s[4],u=s[5],h=s[6],m=s[7],p=s[8],v=s[9],g=s[10],b=s[11],y=s[12],C=s[13],w=s[14];function k(E,T){for(var A=T^-1,L=0,P=E.length;L<P;)A=A>>>8^r[(A^E.charCodeAt(L++))&255];return~A}function S(E,T){for(var A=T^-1,L=E.length-15,P=0;P<L;)A=w[E[P++]^A&255]^C[E[P++]^A>>8&255]^y[E[P++]^A>>16&255]^b[E[P++]^A>>>24]^g[E[P++]]^v[E[P++]]^p[E[P++]]^m[E[P++]]^h[E[P++]]^u[E[P++]]^d[E[P++]]^c[E[P++]]^l[E[P++]]^o[E[P++]]^i[E[P++]]^r[E[P++]];for(L+=15;P<L;)A=A>>>8^r[(A^E[P++])&255];return~A}function D(E,T){for(var A=T^-1,L=0,P=E.length,O=0,Z=0;L<P;)O=E.charCodeAt(L++),O<128?A=A>>>8^r[(A^O)&255]:O<2048?(A=A>>>8^r[(A^(192|O>>6&31))&255],A=A>>>8^r[(A^(128|O&63))&255]):O>=55296&&O<57344?(O=(O&1023)+64,Z=E.charCodeAt(L++)&1023,A=A>>>8^r[(A^(240|O>>8&7))&255],A=A>>>8^r[(A^(128|O>>2&63))&255],A=A>>>8^r[(A^(128|Z>>6&15|(O&3)<<4))&255],A=A>>>8^r[(A^(128|Z&63))&255]):(A=A>>>8^r[(A^(224|O>>12&15))&255],A=A>>>8^r[(A^(128|O>>6&63))&255],A=A>>>8^r[(A^(128|O&63))&255]);return~A}return e.table=r,e.bstr=k,e.buf=S,e.str=D,e}(),Hr=function(){var t={};t.version="1.2.1";function r(fe,Me){for(var Te=fe.split("/"),_e=Me.split("/"),Fe=0,Ve=0,mt=Math.min(Te.length,_e.length);Fe<mt;++Fe){if(Ve=Te[Fe].length-_e[Fe].length)return Ve;if(Te[Fe]!=_e[Fe])return Te[Fe]<_e[Fe]?-1:1}return Te.length-_e.length}function n(fe){if(fe.charAt(fe.length-1)=="/")return fe.slice(0,-1).indexOf("/")===-1?fe:n(fe.slice(0,-1));var Me=fe.lastIndexOf("/");return Me===-1?fe:fe.slice(0,Me+1)}function s(fe){if(fe.charAt(fe.length-1)=="/")return s(fe.slice(0,-1));var Me=fe.lastIndexOf("/");return Me===-1?fe:fe.slice(Me+1)}function i(fe,Me){typeof Me=="string"&&(Me=new Date(Me));var Te=Me.getHours();Te=Te<<6|Me.getMinutes(),Te=Te<<5|Me.getSeconds()>>>1,fe.write_shift(2,Te);var _e=Me.getFullYear()-1980;_e=_e<<4|Me.getMonth()+1,_e=_e<<5|Me.getDate(),fe.write_shift(2,_e)}function o(fe){var Me=fe.read_shift(2)&65535,Te=fe.read_shift(2)&65535,_e=new Date,Fe=Te&31;Te>>>=5;var Ve=Te&15;Te>>>=4,_e.setMilliseconds(0),_e.setFullYear(Te+1980),_e.setMonth(Ve-1),_e.setDate(Fe);var mt=Me&31;Me>>>=5;var wt=Me&63;return Me>>>=6,_e.setHours(Me),_e.setMinutes(wt),_e.setSeconds(mt<<1),_e}function l(fe){Gi(fe,0);for(var Me={},Te=0;fe.l<=fe.length-4;){var _e=fe.read_shift(2),Fe=fe.read_shift(2),Ve=fe.l+Fe,mt={};switch(_e){case 21589:Te=fe.read_shift(1),Te&1&&(mt.mtime=fe.read_shift(4)),Fe>5&&(Te&2&&(mt.atime=fe.read_shift(4)),Te&4&&(mt.ctime=fe.read_shift(4))),mt.mtime&&(mt.mt=new Date(mt.mtime*1e3));break}fe.l=Ve,Me[_e]=mt}return Me}var c;function d(){return c||(c={})}function u(fe,Me){if(fe[0]==80&&fe[1]==75)return Ie(fe,Me);if((fe[0]|32)==109&&(fe[1]|32)==105)return Xt(fe,Me);if(fe.length<512)throw new Error("CFB file size "+fe.length+" < 512");var Te=3,_e=512,Fe=0,Ve=0,mt=0,wt=0,nt=0,St=[],Ct=fe.slice(0,512);Gi(Ct,0);var Jt=h(Ct);switch(Te=Jt[0],Te){case 3:_e=512;break;case 4:_e=4096;break;case 0:if(Jt[1]==0)return Ie(fe,Me);default:throw new Error("Major Version: Expected 3 or 4 saw "+Te)}_e!==512&&(Ct=fe.slice(0,_e),Gi(Ct,28));var ir=fe.slice(0,_e);m(Ct,Te);var xr=Ct.read_shift(4,"i");if(Te===3&&xr!==0)throw new Error("# Directory Sectors: Expected 0 saw "+xr);Ct.l+=4,mt=Ct.read_shift(4,"i"),Ct.l+=4,Ct.chk("00100000","Mini Stream Cutoff Size: "),wt=Ct.read_shift(4,"i"),Fe=Ct.read_shift(4,"i"),nt=Ct.read_shift(4,"i"),Ve=Ct.read_shift(4,"i");for(var or=-1,ze=0;ze<109&&(or=Ct.read_shift(4,"i"),!(or<0));++ze)St[ze]=or;var dr=p(fe,_e);b(nt,Ve,dr,_e,St);var ur=C(dr,mt,St,_e);ur[mt].name="!Directory",Fe>0&&wt!==Z&&(ur[wt].name="!MiniFAT"),ur[St[0]].name="!FAT",ur.fat_addrs=St,ur.ssz=_e;var Vr={},va=[],en=[],zs=[];w(mt,ur,dr,va,Fe,Vr,en,wt),v(en,zs,va),va.shift();var zn={FileIndex:en,FullPaths:zs};return Me&&Me.raw&&(zn.raw={header:ir,sectors:dr}),zn}function h(fe){if(fe[fe.l]==80&&fe[fe.l+1]==75)return[0,0];fe.chk(z,"Header Signature: "),fe.l+=16;var Me=fe.read_shift(2,"u");return[fe.read_shift(2,"u"),Me]}function m(fe,Me){var Te=9;switch(fe.l+=2,Te=fe.read_shift(2)){case 9:if(Me!=3)throw new Error("Sector Shift: Expected 9 saw "+Te);break;case 12:if(Me!=4)throw new Error("Sector Shift: Expected 12 saw "+Te);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Te)}fe.chk("0600","Mini Sector Shift: "),fe.chk("000000000000","Reserved: ")}function p(fe,Me){for(var Te=Math.ceil(fe.length/Me)-1,_e=[],Fe=1;Fe<Te;++Fe)_e[Fe-1]=fe.slice(Fe*Me,(Fe+1)*Me);return _e[Te-1]=fe.slice(Te*Me),_e}function v(fe,Me,Te){for(var _e=0,Fe=0,Ve=0,mt=0,wt=0,nt=Te.length,St=[],Ct=[];_e<nt;++_e)St[_e]=Ct[_e]=_e,Me[_e]=Te[_e];for(;wt<Ct.length;++wt)_e=Ct[wt],Fe=fe[_e].L,Ve=fe[_e].R,mt=fe[_e].C,St[_e]===_e&&(Fe!==-1&&St[Fe]!==Fe&&(St[_e]=St[Fe]),Ve!==-1&&St[Ve]!==Ve&&(St[_e]=St[Ve])),mt!==-1&&(St[mt]=_e),Fe!==-1&&_e!=St[_e]&&(St[Fe]=St[_e],Ct.lastIndexOf(Fe)<wt&&Ct.push(Fe)),Ve!==-1&&_e!=St[_e]&&(St[Ve]=St[_e],Ct.lastIndexOf(Ve)<wt&&Ct.push(Ve));for(_e=1;_e<nt;++_e)St[_e]===_e&&(Ve!==-1&&St[Ve]!==Ve?St[_e]=St[Ve]:Fe!==-1&&St[Fe]!==Fe&&(St[_e]=St[Fe]));for(_e=1;_e<nt;++_e)if(fe[_e].type!==0){if(wt=_e,wt!=St[wt])do wt=St[wt],Me[_e]=Me[wt]+"/"+Me[_e];while(wt!==0&&St[wt]!==-1&&wt!=St[wt]);St[_e]=-1}for(Me[0]+="/",_e=1;_e<nt;++_e)fe[_e].type!==2&&(Me[_e]+="/")}function g(fe,Me,Te){for(var _e=fe.start,Fe=fe.size,Ve=[],mt=_e;Te&&Fe>0&&mt>=0;)Ve.push(Me.slice(mt*O,mt*O+O)),Fe-=O,mt=Up(Te,mt*4);return Ve.length===0?qt(0):ki(Ve).slice(0,fe.size)}function b(fe,Me,Te,_e,Fe){var Ve=Z;if(fe===Z){if(Me!==0)throw new Error("DIFAT chain shorter than expected")}else if(fe!==-1){var mt=Te[fe],wt=(_e>>>2)-1;if(!mt)return;for(var nt=0;nt<wt&&(Ve=Up(mt,nt*4))!==Z;++nt)Fe.push(Ve);b(Up(mt,_e-4),Me-1,Te,_e,Fe)}}function y(fe,Me,Te,_e,Fe){var Ve=[],mt=[];Fe||(Fe=[]);var wt=_e-1,nt=0,St=0;for(nt=Me;nt>=0;){Fe[nt]=!0,Ve[Ve.length]=nt,mt.push(fe[nt]);var Ct=Te[Math.floor(nt*4/_e)];if(St=nt*4&wt,_e<4+St)throw new Error("FAT boundary crossed: "+nt+" 4 "+_e);if(!fe[Ct])break;nt=Up(fe[Ct],St)}return{nodes:Ve,data:c6([mt])}}function C(fe,Me,Te,_e){var Fe=fe.length,Ve=[],mt=[],wt=[],nt=[],St=_e-1,Ct=0,Jt=0,ir=0,xr=0;for(Ct=0;Ct<Fe;++Ct)if(wt=[],ir=Ct+Me,ir>=Fe&&(ir-=Fe),!mt[ir]){nt=[];var or=[];for(Jt=ir;Jt>=0;){or[Jt]=!0,mt[Jt]=!0,wt[wt.length]=Jt,nt.push(fe[Jt]);var ze=Te[Math.floor(Jt*4/_e)];if(xr=Jt*4&St,_e<4+xr)throw new Error("FAT boundary crossed: "+Jt+" 4 "+_e);if(!fe[ze]||(Jt=Up(fe[ze],xr),or[Jt]))break}Ve[ir]={nodes:wt,data:c6([nt])}}return Ve}function w(fe,Me,Te,_e,Fe,Ve,mt,wt){for(var nt=0,St=_e.length?2:0,Ct=Me[fe].data,Jt=0,ir=0,xr;Jt<Ct.length;Jt+=128){var or=Ct.slice(Jt,Jt+128);Gi(or,64),ir=or.read_shift(2),xr=CT(or,0,ir-St),_e.push(xr);var ze={name:xr,type:or.read_shift(1),color:or.read_shift(1),L:or.read_shift(4,"i"),R:or.read_shift(4,"i"),C:or.read_shift(4,"i"),clsid:or.read_shift(16),state:or.read_shift(4,"i"),start:0,size:0},dr=or.read_shift(2)+or.read_shift(2)+or.read_shift(2)+or.read_shift(2);dr!==0&&(ze.ct=k(or,or.l-8));var ur=or.read_shift(2)+or.read_shift(2)+or.read_shift(2)+or.read_shift(2);ur!==0&&(ze.mt=k(or,or.l-8)),ze.start=or.read_shift(4,"i"),ze.size=or.read_shift(4,"i"),ze.size<0&&ze.start<0&&(ze.size=ze.type=0,ze.start=Z,ze.name=""),ze.type===5?(nt=ze.start,Fe>0&&nt!==Z&&(Me[nt].name="!StreamData")):ze.size>=4096?(ze.storage="fat",Me[ze.start]===void 0&&(Me[ze.start]=y(Te,ze.start,Me.fat_addrs,Me.ssz)),Me[ze.start].name=ze.name,ze.content=Me[ze.start].data.slice(0,ze.size)):(ze.storage="minifat",ze.size<0?ze.size=0:nt!==Z&&ze.start!==Z&&Me[nt]&&(ze.content=g(ze,Me[nt].data,(Me[wt]||{}).data))),ze.content&&Gi(ze.content,0),Ve[xr]=ze,mt.push(ze)}}function k(fe,Me){return new Date((ql(fe,Me+4)/1e7*Math.pow(2,32)+ql(fe,Me)/1e7-11644473600)*1e3)}function S(fe,Me){return d(),u(c.readFileSync(fe),Me)}function D(fe,Me){var Te=Me&&Me.type;switch(Te||_a&&Buffer.isBuffer(fe)&&(Te="buffer"),Te||"base64"){case"file":return S(fe,Me);case"base64":return u(Wl(ic(fe)),Me);case"binary":return u(Wl(fe),Me)}return u(fe,Me)}function E(fe,Me){var Te=Me||{},_e=Te.root||"Root Entry";if(fe.FullPaths||(fe.FullPaths=[]),fe.FileIndex||(fe.FileIndex=[]),fe.FullPaths.length!==fe.FileIndex.length)throw new Error("inconsistent CFB structure");fe.FullPaths.length===0&&(fe.FullPaths[0]=_e+"/",fe.FileIndex[0]={name:_e,type:5}),Te.CLSID&&(fe.FileIndex[0].clsid=Te.CLSID),T(fe)}function T(fe){var Me="Sh33tJ5";if(!Hr.find(fe,"/"+Me)){var Te=qt(4);Te[0]=55,Te[1]=Te[3]=50,Te[2]=54,fe.FileIndex.push({name:Me,type:2,content:Te,size:4,L:69,R:69,C:69}),fe.FullPaths.push(fe.FullPaths[0]+Me),A(fe)}}function A(fe,Me){E(fe);for(var Te=!1,_e=!1,Fe=fe.FullPaths.length-1;Fe>=0;--Fe){var Ve=fe.FileIndex[Fe];switch(Ve.type){case 0:_e?Te=!0:(fe.FileIndex.pop(),fe.FullPaths.pop());break;case 1:case 2:case 5:_e=!0,isNaN(Ve.R*Ve.L*Ve.C)&&(Te=!0),Ve.R>-1&&Ve.L>-1&&Ve.R==Ve.L&&(Te=!0);break;default:Te=!0;break}}if(!(!Te&&!Me)){var mt=new Date(1987,1,19),wt=0,nt=Object.create?Object.create(null):{},St=[];for(Fe=0;Fe<fe.FullPaths.length;++Fe)nt[fe.FullPaths[Fe]]=!0,fe.FileIndex[Fe].type!==0&&St.push([fe.FullPaths[Fe],fe.FileIndex[Fe]]);for(Fe=0;Fe<St.length;++Fe){var Ct=n(St[Fe][0]);_e=nt[Ct],_e||(St.push([Ct,{name:s(Ct).replace("/",""),type:1,clsid:B,ct:mt,mt,content:null}]),nt[Ct]=!0)}for(St.sort(function(xr,or){return r(xr[0],or[0])}),fe.FullPaths=[],fe.FileIndex=[],Fe=0;Fe<St.length;++Fe)fe.FullPaths[Fe]=St[Fe][0],fe.FileIndex[Fe]=St[Fe][1];for(Fe=0;Fe<St.length;++Fe){var Jt=fe.FileIndex[Fe],ir=fe.FullPaths[Fe];if(Jt.name=s(ir).replace("/",""),Jt.L=Jt.R=Jt.C=-(Jt.color=1),Jt.size=Jt.content?Jt.content.length:0,Jt.start=0,Jt.clsid=Jt.clsid||B,Fe===0)Jt.C=St.length>1?1:-1,Jt.size=0,Jt.type=5;else if(ir.slice(-1)=="/"){for(wt=Fe+1;wt<St.length&&n(fe.FullPaths[wt])!=ir;++wt);for(Jt.C=wt>=St.length?-1:wt,wt=Fe+1;wt<St.length&&n(fe.FullPaths[wt])!=n(ir);++wt);Jt.R=wt>=St.length?-1:wt,Jt.type=1}else n(fe.FullPaths[Fe+1]||"")==n(ir)&&(Jt.R=Fe+1),Jt.type=2}}}function L(fe,Me){var Te=Me||{};if(Te.fileType=="mad")return Ft(fe,Te);switch(A(fe),Te.fileType){case"zip":return Ge(fe,Te)}var _e=function(xr){for(var or=0,ze=0,dr=0;dr<xr.FileIndex.length;++dr){var ur=xr.FileIndex[dr];if(ur.content){var Vr=ur.content.length;Vr>0&&(Vr<4096?or+=Vr+63>>6:ze+=Vr+511>>9)}}for(var va=xr.FullPaths.length+3>>2,en=or+7>>3,zs=or+127>>7,zn=en+ze+va+zs,fs=zn+127>>7,ks=fs<=109?0:Math.ceil((fs-109)/127);zn+fs+ks+127>>7>fs;)ks=++fs<=109?0:Math.ceil((fs-109)/127);var yt=[1,ks,fs,zs,va,ze,or,0];return xr.FileIndex[0].size=or<<6,yt[7]=(xr.FileIndex[0].start=yt[0]+yt[1]+yt[2]+yt[3]+yt[4]+yt[5])+(yt[6]+7>>3),yt}(fe),Fe=qt(_e[7]<<9),Ve=0,mt=0;{for(Ve=0;Ve<8;++Ve)Fe.write_shift(1,K[Ve]);for(Ve=0;Ve<8;++Ve)Fe.write_shift(2,0);for(Fe.write_shift(2,62),Fe.write_shift(2,3),Fe.write_shift(2,65534),Fe.write_shift(2,9),Fe.write_shift(2,6),Ve=0;Ve<3;++Ve)Fe.write_shift(2,0);for(Fe.write_shift(4,0),Fe.write_shift(4,_e[2]),Fe.write_shift(4,_e[0]+_e[1]+_e[2]+_e[3]-1),Fe.write_shift(4,0),Fe.write_shift(4,4096),Fe.write_shift(4,_e[3]?_e[0]+_e[1]+_e[2]-1:Z),Fe.write_shift(4,_e[3]),Fe.write_shift(-4,_e[1]?_e[0]-1:Z),Fe.write_shift(4,_e[1]),Ve=0;Ve<109;++Ve)Fe.write_shift(-4,Ve<_e[2]?_e[1]+Ve:-1)}if(_e[1])for(mt=0;mt<_e[1];++mt){for(;Ve<236+mt*127;++Ve)Fe.write_shift(-4,Ve<_e[2]?_e[1]+Ve:-1);Fe.write_shift(-4,mt===_e[1]-1?Z:mt+1)}var wt=function(xr){for(mt+=xr;Ve<mt-1;++Ve)Fe.write_shift(-4,Ve+1);xr&&(++Ve,Fe.write_shift(-4,Z))};for(mt=Ve=0,mt+=_e[1];Ve<mt;++Ve)Fe.write_shift(-4,Q.DIFSECT);for(mt+=_e[2];Ve<mt;++Ve)Fe.write_shift(-4,Q.FATSECT);wt(_e[3]),wt(_e[4]);for(var nt=0,St=0,Ct=fe.FileIndex[0];nt<fe.FileIndex.length;++nt)Ct=fe.FileIndex[nt],Ct.content&&(St=Ct.content.length,!(St<4096)&&(Ct.start=mt,wt(St+511>>9)));for(wt(_e[6]+7>>3);Fe.l&511;)Fe.write_shift(-4,Q.ENDOFCHAIN);for(mt=Ve=0,nt=0;nt<fe.FileIndex.length;++nt)Ct=fe.FileIndex[nt],Ct.content&&(St=Ct.content.length,!(!St||St>=4096)&&(Ct.start=mt,wt(St+63>>6)));for(;Fe.l&511;)Fe.write_shift(-4,Q.ENDOFCHAIN);for(Ve=0;Ve<_e[4]<<2;++Ve){var Jt=fe.FullPaths[Ve];if(!Jt||Jt.length===0){for(nt=0;nt<17;++nt)Fe.write_shift(4,0);for(nt=0;nt<3;++nt)Fe.write_shift(4,-1);for(nt=0;nt<12;++nt)Fe.write_shift(4,0);continue}Ct=fe.FileIndex[Ve],Ve===0&&(Ct.start=Ct.size?Ct.start-1:Z);var ir=Ve===0&&Te.root||Ct.name;if(St=2*(ir.length+1),Fe.write_shift(64,ir,"utf16le"),Fe.write_shift(2,St),Fe.write_shift(1,Ct.type),Fe.write_shift(1,Ct.color),Fe.write_shift(-4,Ct.L),Fe.write_shift(-4,Ct.R),Fe.write_shift(-4,Ct.C),Ct.clsid)Fe.write_shift(16,Ct.clsid,"hex");else for(nt=0;nt<4;++nt)Fe.write_shift(4,0);Fe.write_shift(4,Ct.state||0),Fe.write_shift(4,0),Fe.write_shift(4,0),Fe.write_shift(4,0),Fe.write_shift(4,0),Fe.write_shift(4,Ct.start),Fe.write_shift(4,Ct.size),Fe.write_shift(4,0)}for(Ve=1;Ve<fe.FileIndex.length;++Ve)if(Ct=fe.FileIndex[Ve],Ct.size>=4096)if(Fe.l=Ct.start+1<<9,_a&&Buffer.isBuffer(Ct.content))Ct.content.copy(Fe,Fe.l,0,Ct.size),Fe.l+=Ct.size+511&-512;else{for(nt=0;nt<Ct.size;++nt)Fe.write_shift(1,Ct.content[nt]);for(;nt&511;++nt)Fe.write_shift(1,0)}for(Ve=1;Ve<fe.FileIndex.length;++Ve)if(Ct=fe.FileIndex[Ve],Ct.size>0&&Ct.size<4096)if(_a&&Buffer.isBuffer(Ct.content))Ct.content.copy(Fe,Fe.l,0,Ct.size),Fe.l+=Ct.size+63&-64;else{for(nt=0;nt<Ct.size;++nt)Fe.write_shift(1,Ct.content[nt]);for(;nt&63;++nt)Fe.write_shift(1,0)}if(_a)Fe.l=Fe.length;else for(;Fe.l<Fe.length;)Fe.write_shift(1,0);return Fe}function P(fe,Me){var Te=fe.FullPaths.map(function(nt){return nt.toUpperCase()}),_e=Te.map(function(nt){var St=nt.split("/");return St[St.length-(nt.slice(-1)=="/"?2:1)]}),Fe=!1;Me.charCodeAt(0)===47?(Fe=!0,Me=Te[0].slice(0,-1)+Me):Fe=Me.indexOf("/")!==-1;var Ve=Me.toUpperCase(),mt=Fe===!0?Te.indexOf(Ve):_e.indexOf(Ve);if(mt!==-1)return fe.FileIndex[mt];var wt=!Ve.match(Tb);for(Ve=Ve.replace(qo,""),wt&&(Ve=Ve.replace(Tb,"!")),mt=0;mt<Te.length;++mt)if((wt?Te[mt].replace(Tb,"!"):Te[mt]).replace(qo,"")==Ve||(wt?_e[mt].replace(Tb,"!"):_e[mt]).replace(qo,"")==Ve)return fe.FileIndex[mt];return null}var O=64,Z=-2,z="d0cf11e0a1b11ae1",K=[208,207,17,224,161,177,26,225],B="00000000000000000000000000000000",Q={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:Z,FREESECT:-1,HEADER_SIGNATURE:z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:B,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function U(fe,Me,Te){d();var _e=L(fe,Te);c.writeFileSync(Me,_e)}function J(fe){for(var Me=new Array(fe.length),Te=0;Te<fe.length;++Te)Me[Te]=String.fromCharCode(fe[Te]);return Me.join("")}function Y(fe,Me){var Te=L(fe,Me);switch(Me&&Me.type||"buffer"){case"file":return d(),c.writeFileSync(Me.filename,Te),Te;case"binary":return typeof Te=="string"?Te:J(Te);case"base64":return dy(typeof Te=="string"?Te:J(Te));case"buffer":if(_a)return Buffer.isBuffer(Te)?Te:pf(Te);case"array":return typeof Te=="string"?Wl(Te):Te}return Te}var oe;function M(fe){try{var Me=fe.InflateRaw,Te=new Me;if(Te._processChunk(new Uint8Array([3,0]),Te._finishFlushFlag),Te.bytesRead)oe=fe;else throw new Error("zlib does not expose bytesRead")}catch(_e){console.error("cannot use native zlib: "+(_e.message||_e))}}function V(fe,Me){if(!oe)return qe(fe,Me);var Te=oe.InflateRaw,_e=new Te,Fe=_e._processChunk(fe.slice(fe.l),_e._finishFlushFlag);return fe.l+=_e.bytesRead,Fe}function H(fe){return oe?oe.deflateRawSync(fe):ve(fe)}var ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ne(fe){var Me=(fe<<1|fe<<11)&139536|(fe<<5|fe<<15)&558144;return(Me>>16|Me>>8|Me)&255}for(var ie=typeof Uint8Array<"u",G=ie?new Uint8Array(256):[],de=0;de<256;++de)G[de]=ne(de);function X(fe,Me){var Te=G[fe&255];return Me<=8?Te>>>8-Me:(Te=Te<<8|G[fe>>8&255],Me<=16?Te>>>16-Me:(Te=Te<<8|G[fe>>16&255],Te>>>24-Me))}function le(fe,Me){var Te=Me&7,_e=Me>>>3;return(fe[_e]|(Te<=6?0:fe[_e+1]<<8))>>>Te&3}function Se(fe,Me){var Te=Me&7,_e=Me>>>3;return(fe[_e]|(Te<=5?0:fe[_e+1]<<8))>>>Te&7}function ue(fe,Me){var Te=Me&7,_e=Me>>>3;return(fe[_e]|(Te<=4?0:fe[_e+1]<<8))>>>Te&15}function se(fe,Me){var Te=Me&7,_e=Me>>>3;return(fe[_e]|(Te<=3?0:fe[_e+1]<<8))>>>Te&31}function ye(fe,Me){var Te=Me&7,_e=Me>>>3;return(fe[_e]|(Te<=1?0:fe[_e+1]<<8))>>>Te&127}function Ne(fe,Me,Te){var _e=Me&7,Fe=Me>>>3,Ve=(1<<Te)-1,mt=fe[Fe]>>>_e;return Te<8-_e||(mt|=fe[Fe+1]<<8-_e,Te<16-_e)||(mt|=fe[Fe+2]<<16-_e,Te<24-_e)||(mt|=fe[Fe+3]<<24-_e),mt&Ve}function Ue(fe,Me,Te){var _e=Me&7,Fe=Me>>>3;return _e<=5?fe[Fe]|=(Te&7)<<_e:(fe[Fe]|=Te<<_e&255,fe[Fe+1]=(Te&7)>>8-_e),Me+3}function Qe(fe,Me,Te){var _e=Me&7,Fe=Me>>>3;return Te=(Te&1)<<_e,fe[Fe]|=Te,Me+1}function ot(fe,Me,Te){var _e=Me&7,Fe=Me>>>3;return Te<<=_e,fe[Fe]|=Te&255,Te>>>=8,fe[Fe+1]=Te,Me+8}function xt(fe,Me,Te){var _e=Me&7,Fe=Me>>>3;return Te<<=_e,fe[Fe]|=Te&255,Te>>>=8,fe[Fe+1]=Te&255,fe[Fe+2]=Te>>>8,Me+16}function Le(fe,Me){var Te=fe.length,_e=2*Te>Me?2*Te:Me+5,Fe=0;if(Te>=Me)return fe;if(_a){var Ve=zL(_e);if(fe.copy)fe.copy(Ve);else for(;Fe<fe.length;++Fe)Ve[Fe]=fe[Fe];return Ve}else if(ie){var mt=new Uint8Array(_e);if(mt.set)mt.set(fe);else for(;Fe<Te;++Fe)mt[Fe]=fe[Fe];return mt}return fe.length=_e,fe}function dt(fe){for(var Me=new Array(fe),Te=0;Te<fe;++Te)Me[Te]=0;return Me}function Tt(fe,Me,Te){var _e=1,Fe=0,Ve=0,mt=0,wt=0,nt=fe.length,St=ie?new Uint16Array(32):dt(32);for(Ve=0;Ve<32;++Ve)St[Ve]=0;for(Ve=nt;Ve<Te;++Ve)fe[Ve]=0;nt=fe.length;var Ct=ie?new Uint16Array(nt):dt(nt);for(Ve=0;Ve<nt;++Ve)St[Fe=fe[Ve]]++,_e<Fe&&(_e=Fe),Ct[Ve]=0;for(St[0]=0,Ve=1;Ve<=_e;++Ve)St[Ve+16]=wt=wt+St[Ve-1]<<1;for(Ve=0;Ve<nt;++Ve)wt=fe[Ve],wt!=0&&(Ct[Ve]=St[wt+16]++);var Jt=0;for(Ve=0;Ve<nt;++Ve)if(Jt=fe[Ve],Jt!=0)for(wt=X(Ct[Ve],_e)>>_e-Jt,mt=(1<<_e+4-Jt)-1;mt>=0;--mt)Me[wt|mt<<Jt]=Jt&15|Ve<<4;return _e}var At=ie?new Uint16Array(512):dt(512),Vt=ie?new Uint16Array(32):dt(32);if(!ie){for(var xe=0;xe<512;++xe)At[xe]=0;for(xe=0;xe<32;++xe)Vt[xe]=0}(function(){for(var fe=[],Me=0;Me<32;Me++)fe.push(5);Tt(fe,Vt,32);var Te=[];for(Me=0;Me<=143;Me++)Te.push(8);for(;Me<=255;Me++)Te.push(9);for(;Me<=279;Me++)Te.push(7);for(;Me<=287;Me++)Te.push(8);Tt(Te,At,288)})();var he=function(){for(var Me=ie?new Uint8Array(32768):[],Te=0,_e=0;Te<ae.length-1;++Te)for(;_e<ae[Te+1];++_e)Me[_e]=Te;for(;_e<32768;++_e)Me[_e]=29;var Fe=ie?new Uint8Array(259):[];for(Te=0,_e=0;Te<re.length-1;++Te)for(;_e<re[Te+1];++_e)Fe[_e]=Te;function Ve(wt,nt){for(var St=0;St<wt.length;){var Ct=Math.min(65535,wt.length-St),Jt=St+Ct==wt.length;for(nt.write_shift(1,+Jt),nt.write_shift(2,Ct),nt.write_shift(2,~Ct&65535);Ct-- >0;)nt[nt.l++]=wt[St++]}return nt.l}function mt(wt,nt){for(var St=0,Ct=0,Jt=ie?new Uint16Array(32768):[];Ct<wt.length;){var ir=Math.min(65535,wt.length-Ct);if(ir<10){for(St=Ue(nt,St,+(Ct+ir==wt.length)),St&7&&(St+=8-(St&7)),nt.l=St/8|0,nt.write_shift(2,ir),nt.write_shift(2,~ir&65535);ir-- >0;)nt[nt.l++]=wt[Ct++];St=nt.l*8;continue}St=Ue(nt,St,+(Ct+ir==wt.length)+2);for(var xr=0;ir-- >0;){var or=wt[Ct];xr=(xr<<5^or)&32767;var ze=-1,dr=0;if((ze=Jt[xr])&&(ze|=Ct&-32768,ze>Ct&&(ze-=32768),ze<Ct))for(;wt[ze+dr]==wt[Ct+dr]&&dr<250;)++dr;if(dr>2){or=Fe[dr],or<=22?St=ot(nt,St,G[or+1]>>1)-1:(ot(nt,St,3),St+=5,ot(nt,St,G[or-23]>>5),St+=3);var ur=or<8?0:or-4>>2;ur>0&&(xt(nt,St,dr-re[or]),St+=ur),or=Me[Ct-ze],St=ot(nt,St,G[or]>>3),St-=3;var Vr=or<4?0:or-2>>1;Vr>0&&(xt(nt,St,Ct-ze-ae[or]),St+=Vr);for(var va=0;va<dr;++va)Jt[xr]=Ct&32767,xr=(xr<<5^wt[Ct])&32767,++Ct;ir-=dr-1}else or<=143?or=or+48:St=Qe(nt,St,1),St=ot(nt,St,G[or]),Jt[xr]=Ct&32767,++Ct}St=ot(nt,St,0)-1}return nt.l=(St+7)/8|0,nt.l}return function(nt,St){return nt.length<8?Ve(nt,St):mt(nt,St)}}();function ve(fe){var Me=qt(50+Math.floor(fe.length*1.1)),Te=he(fe,Me);return Me.slice(0,Te)}var pe=ie?new Uint16Array(32768):dt(32768),De=ie?new Uint16Array(32768):dt(32768),Ye=ie?new Uint16Array(128):dt(128),Nt=1,Je=1;function Xe(fe,Me){var Te=se(fe,Me)+257;Me+=5;var _e=se(fe,Me)+1;Me+=5;var Fe=ue(fe,Me)+4;Me+=4;for(var Ve=0,mt=ie?new Uint8Array(19):dt(19),wt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],nt=1,St=ie?new Uint8Array(8):dt(8),Ct=ie?new Uint8Array(8):dt(8),Jt=mt.length,ir=0;ir<Fe;++ir)mt[ee[ir]]=Ve=Se(fe,Me),nt<Ve&&(nt=Ve),St[Ve]++,Me+=3;var xr=0;for(St[0]=0,ir=1;ir<=nt;++ir)Ct[ir]=xr=xr+St[ir-1]<<1;for(ir=0;ir<Jt;++ir)(xr=mt[ir])!=0&&(wt[ir]=Ct[xr]++);var or=0;for(ir=0;ir<Jt;++ir)if(or=mt[ir],or!=0){xr=G[wt[ir]]>>8-or;for(var ze=(1<<7-or)-1;ze>=0;--ze)Ye[xr|ze<<or]=or&7|ir<<3}var dr=[];for(nt=1;dr.length<Te+_e;)switch(xr=Ye[ye(fe,Me)],Me+=xr&7,xr>>>=3){case 16:for(Ve=3+le(fe,Me),Me+=2,xr=dr[dr.length-1];Ve-- >0;)dr.push(xr);break;case 17:for(Ve=3+Se(fe,Me),Me+=3;Ve-- >0;)dr.push(0);break;case 18:for(Ve=11+ye(fe,Me),Me+=7;Ve-- >0;)dr.push(0);break;default:dr.push(xr),nt<xr&&(nt=xr);break}var ur=dr.slice(0,Te),Vr=dr.slice(Te);for(ir=Te;ir<286;++ir)ur[ir]=0;for(ir=_e;ir<30;++ir)Vr[ir]=0;return Nt=Tt(ur,pe,286),Je=Tt(Vr,De,30),Me}function Be(fe,Me){if(fe[0]==3&&!(fe[1]&3))return[Lm(Me),2];for(var Te=0,_e=0,Fe=zL(Me||1<<18),Ve=0,mt=Fe.length>>>0,wt=0,nt=0;(_e&1)==0;){if(_e=Se(fe,Te),Te+=3,_e>>>1)_e>>1==1?(wt=9,nt=5):(Te=Xe(fe,Te),wt=Nt,nt=Je);else{Te&7&&(Te+=8-(Te&7));var St=fe[Te>>>3]|fe[(Te>>>3)+1]<<8;if(Te+=32,St>0)for(!Me&&mt<Ve+St&&(Fe=Le(Fe,Ve+St),mt=Fe.length);St-- >0;)Fe[Ve++]=fe[Te>>>3],Te+=8;continue}for(;;){!Me&&mt<Ve+32767&&(Fe=Le(Fe,Ve+32767),mt=Fe.length);var Ct=Ne(fe,Te,wt),Jt=_e>>>1==1?At[Ct]:pe[Ct];if(Te+=Jt&15,Jt>>>=4,(Jt>>>8&255)===0)Fe[Ve++]=Jt;else{if(Jt==256)break;Jt-=257;var ir=Jt<8?0:Jt-4>>2;ir>5&&(ir=0);var xr=Ve+re[Jt];ir>0&&(xr+=Ne(fe,Te,ir),Te+=ir),Ct=Ne(fe,Te,nt),Jt=_e>>>1==1?Vt[Ct]:De[Ct],Te+=Jt&15,Jt>>>=4;var or=Jt<4?0:Jt-2>>1,ze=ae[Jt];for(or>0&&(ze+=Ne(fe,Te,or),Te+=or),!Me&&mt<xr&&(Fe=Le(Fe,xr+100),mt=Fe.length);Ve<xr;)Fe[Ve]=Fe[Ve-ze],++Ve}}}return Me?[Fe,Te+7>>>3]:[Fe.slice(0,Ve),Te+7>>>3]}function qe(fe,Me){var Te=fe.slice(fe.l||0),_e=Be(Te,Me);return fe.l+=_e[1],_e[0]}function ft(fe,Me){if(fe)typeof console<"u"&&console.error(Me);else throw new Error(Me)}function Ie(fe,Me){var Te=fe;Gi(Te,0);var _e=[],Fe=[],Ve={FileIndex:_e,FullPaths:Fe};E(Ve,{root:Me.root});for(var mt=Te.length-4;(Te[mt]!=80||Te[mt+1]!=75||Te[mt+2]!=5||Te[mt+3]!=6)&&mt>=0;)--mt;Te.l=mt+4,Te.l+=4;var wt=Te.read_shift(2);Te.l+=6;var nt=Te.read_shift(4);for(Te.l=nt,mt=0;mt<wt;++mt){Te.l+=20;var St=Te.read_shift(4),Ct=Te.read_shift(4),Jt=Te.read_shift(2),ir=Te.read_shift(2),xr=Te.read_shift(2);Te.l+=8;var or=Te.read_shift(4),ze=l(Te.slice(Te.l+Jt,Te.l+Jt+ir));Te.l+=Jt+ir+xr;var dr=Te.l;Te.l=or+4,Ke(Te,St,Ct,Ve,ze),Te.l=dr}return Ve}function Ke(fe,Me,Te,_e,Fe){fe.l+=2;var Ve=fe.read_shift(2),mt=fe.read_shift(2),wt=o(fe);if(Ve&8257)throw new Error("Unsupported ZIP encryption");for(var nt=fe.read_shift(4),St=fe.read_shift(4),Ct=fe.read_shift(4),Jt=fe.read_shift(2),ir=fe.read_shift(2),xr="",or=0;or<Jt;++or)xr+=String.fromCharCode(fe[fe.l++]);if(ir){var ze=l(fe.slice(fe.l,fe.l+ir));(ze[21589]||{}).mt&&(wt=ze[21589].mt),((Fe||{})[21589]||{}).mt&&(wt=Fe[21589].mt)}fe.l+=ir;var dr=fe.slice(fe.l,fe.l+St);switch(mt){case 8:dr=V(fe,Ct);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+mt)}var ur=!1;Ve&8&&(nt=fe.read_shift(4),nt==134695760&&(nt=fe.read_shift(4),ur=!0),St=fe.read_shift(4),Ct=fe.read_shift(4)),St!=Me&&ft(ur,"Bad compressed size: "+Me+" != "+St),Ct!=Te&&ft(ur,"Bad uncompressed size: "+Te+" != "+Ct),pr(_e,xr,dr,{unsafe:!0,mt:wt})}function Ge(fe,Me){var Te=Me||{},_e=[],Fe=[],Ve=qt(1),mt=Te.compression?8:0,wt=0,nt=0,St=0,Ct=0,Jt=0,ir=fe.FullPaths[0],xr=ir,or=fe.FileIndex[0],ze=[],dr=0;for(nt=1;nt<fe.FullPaths.length;++nt)if(xr=fe.FullPaths[nt].slice(ir.length),or=fe.FileIndex[nt],!(!or.size||!or.content||xr=="Sh33tJ5")){var ur=Ct,Vr=qt(xr.length);for(St=0;St<xr.length;++St)Vr.write_shift(1,xr.charCodeAt(St)&127);Vr=Vr.slice(0,Vr.l),ze[Jt]=uxe.buf(or.content,0);var va=or.content;mt==8&&(va=H(va)),Ve=qt(30),Ve.write_shift(4,67324752),Ve.write_shift(2,20),Ve.write_shift(2,wt),Ve.write_shift(2,mt),or.mt?i(Ve,or.mt):Ve.write_shift(4,0),Ve.write_shift(-4,ze[Jt]),Ve.write_shift(4,va.length),Ve.write_shift(4,or.content.length),Ve.write_shift(2,Vr.length),Ve.write_shift(2,0),Ct+=Ve.length,_e.push(Ve),Ct+=Vr.length,_e.push(Vr),Ct+=va.length,_e.push(va),Ve=qt(46),Ve.write_shift(4,33639248),Ve.write_shift(2,0),Ve.write_shift(2,20),Ve.write_shift(2,wt),Ve.write_shift(2,mt),Ve.write_shift(4,0),Ve.write_shift(-4,ze[Jt]),Ve.write_shift(4,va.length),Ve.write_shift(4,or.content.length),Ve.write_shift(2,Vr.length),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(4,0),Ve.write_shift(4,ur),dr+=Ve.l,Fe.push(Ve),dr+=Vr.length,Fe.push(Vr),++Jt}return Ve=qt(22),Ve.write_shift(4,101010256),Ve.write_shift(2,0),Ve.write_shift(2,0),Ve.write_shift(2,Jt),Ve.write_shift(2,Jt),Ve.write_shift(4,dr),Ve.write_shift(4,Ct),Ve.write_shift(2,0),ki([ki(_e),ki(Fe),Ve])}var lt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Mt(fe,Me){if(fe.ctype)return fe.ctype;var Te=fe.name||"",_e=Te.match(/\.([^\.]+)$/);return _e&&lt[_e[1]]||Me&&(_e=(Te=Me).match(/[\.\\]([^\.\\])+$/),_e&&lt[_e[1]])?lt[_e[1]]:"application/octet-stream"}function Ae(fe){for(var Me=dy(fe),Te=[],_e=0;_e<Me.length;_e+=76)Te.push(Me.slice(_e,_e+76));return Te.join(`\r
`)+`\r
`}function ke(fe){var Me=fe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(St){var Ct=St.charCodeAt(0).toString(16).toUpperCase();return"="+(Ct.length==1?"0"+Ct:Ct)});Me=Me.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),Me.charAt(0)==`
`&&(Me="=0D"+Me.slice(1)),Me=Me.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Te=[],_e=Me.split(`\r
`),Fe=0;Fe<_e.length;++Fe){var Ve=_e[Fe];if(Ve.length==0){Te.push("");continue}for(var mt=0;mt<Ve.length;){var wt=76,nt=Ve.slice(mt,mt+wt);nt.charAt(wt-1)=="="?wt--:nt.charAt(wt-2)=="="?wt-=2:nt.charAt(wt-3)=="="&&(wt-=3),nt=Ve.slice(mt,mt+wt),mt+=wt,mt<Ve.length&&(nt+="="),Te.push(nt)}}return Te.join(`\r
`)}function it(fe){for(var Me=[],Te=0;Te<fe.length;++Te){for(var _e=fe[Te];Te<=fe.length&&_e.charAt(_e.length-1)=="=";)_e=_e.slice(0,_e.length-1)+fe[++Te];Me.push(_e)}for(var Fe=0;Fe<Me.length;++Fe)Me[Fe]=Me[Fe].replace(/[=][0-9A-Fa-f]{2}/g,function(Ve){return String.fromCharCode(parseInt(Ve.slice(1),16))});return Wl(Me.join(`\r
`))}function bt(fe,Me,Te){for(var _e="",Fe="",Ve="",mt,wt=0;wt<10;++wt){var nt=Me[wt];if(!nt||nt.match(/^\s*$/))break;var St=nt.match(/^(.*?):\s*([^\s].*)$/);if(St)switch(St[1].toLowerCase()){case"content-location":_e=St[2].trim();break;case"content-type":Ve=St[2].trim();break;case"content-transfer-encoding":Fe=St[2].trim();break}}switch(++wt,Fe.toLowerCase()){case"base64":mt=Wl(ic(Me.slice(wt).join("")));break;case"quoted-printable":mt=it(Me.slice(wt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Fe)}var Ct=pr(fe,_e.slice(Te.length),mt,{unsafe:!0});Ve&&(Ct.ctype=Ve)}function Xt(fe,Me){if(J(fe.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Te=Me&&Me.root||"",_e=(_a&&Buffer.isBuffer(fe)?fe.toString("binary"):J(fe)).split(`\r
`),Fe=0,Ve="";for(Fe=0;Fe<_e.length;++Fe)if(Ve=_e[Fe],!!/^Content-Location:/i.test(Ve)&&(Ve=Ve.slice(Ve.indexOf("file")),Te||(Te=Ve.slice(0,Ve.lastIndexOf("/")+1)),Ve.slice(0,Te.length)!=Te))for(;Te.length>0&&(Te=Te.slice(0,Te.length-1),Te=Te.slice(0,Te.lastIndexOf("/")+1),Ve.slice(0,Te.length)!=Te););var mt=(_e[1]||"").match(/boundary="(.*?)"/);if(!mt)throw new Error("MAD cannot find boundary");var wt="--"+(mt[1]||""),nt=[],St=[],Ct={FileIndex:nt,FullPaths:St};E(Ct);var Jt,ir=0;for(Fe=0;Fe<_e.length;++Fe){var xr=_e[Fe];xr!==wt&&xr!==wt+"--"||(ir++&&bt(Ct,_e.slice(Jt,Fe),Te),Jt=Fe)}return Ct}function Ft(fe,Me){var Te=Me||{},_e=Te.boundary||"SheetJS";_e="------="+_e;for(var Fe=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+_e.slice(2)+'"',"","",""],Ve=fe.FullPaths[0],mt=Ve,wt=fe.FileIndex[0],nt=1;nt<fe.FullPaths.length;++nt)if(mt=fe.FullPaths[nt].slice(Ve.length),wt=fe.FileIndex[nt],!(!wt.size||!wt.content||mt=="Sh33tJ5")){mt=mt.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(dr){return"_x"+dr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(dr){return"_u"+dr.charCodeAt(0).toString(16)+"_"});for(var St=wt.content,Ct=_a&&Buffer.isBuffer(St)?St.toString("binary"):J(St),Jt=0,ir=Math.min(1024,Ct.length),xr=0,or=0;or<=ir;++or)(xr=Ct.charCodeAt(or))>=32&&xr<128&&++Jt;var ze=Jt>=ir*4/5;Fe.push(_e),Fe.push("Content-Location: "+(Te.root||"file:///C:/SheetJS/")+mt),Fe.push("Content-Transfer-Encoding: "+(ze?"quoted-printable":"base64")),Fe.push("Content-Type: "+Mt(wt,mt)),Fe.push(""),Fe.push(ze?ke(Ct):Ae(Ct))}return Fe.push(_e+`--\r
`),Fe.join(`\r
`)}function rr(fe){var Me={};return E(Me,fe),Me}function pr(fe,Me,Te,_e){var Fe=_e&&_e.unsafe;Fe||E(fe);var Ve=!Fe&&Hr.find(fe,Me);if(!Ve){var mt=fe.FullPaths[0];Me.slice(0,mt.length)==mt?mt=Me:(mt.slice(-1)!="/"&&(mt+="/"),mt=(mt+Me).replace("//","/")),Ve={name:s(Me),type:2},fe.FileIndex.push(Ve),fe.FullPaths.push(mt),Fe||Hr.utils.cfb_gc(fe)}return Ve.content=Te,Ve.size=Te?Te.length:0,_e&&(_e.CLSID&&(Ve.clsid=_e.CLSID),_e.mt&&(Ve.mt=_e.mt),_e.ct&&(Ve.ct=_e.ct)),Ve}function jr(fe,Me){E(fe);var Te=Hr.find(fe,Me);if(Te){for(var _e=0;_e<fe.FileIndex.length;++_e)if(fe.FileIndex[_e]==Te)return fe.FileIndex.splice(_e,1),fe.FullPaths.splice(_e,1),!0}return!1}function vt(fe,Me,Te){E(fe);var _e=Hr.find(fe,Me);if(_e){for(var Fe=0;Fe<fe.FileIndex.length;++Fe)if(fe.FileIndex[Fe]==_e)return fe.FileIndex[Fe].name=s(Te),fe.FullPaths[Fe]=Te,!0}return!1}function Lt(fe){A(fe,!0)}return t.find=P,t.read=D,t.parse=u,t.write=Y,t.writeFile=U,t.utils={cfb_new:rr,cfb_add:pr,cfb_del:jr,cfb_mov:vt,cfb_gc:Lt,ReadShift:Lb,CheckField:Nz,prep_blob:Gi,bconcat:ki,use_zlib:M,_deflateRaw:ve,_inflateRaw:qe,consts:Q},t}();function hxe(e){return typeof e=="string"?xS(e):Array.isArray(e)?Lpe(e):e}function e1(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=xS(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?Pu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([hxe(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=Zm(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function fxe(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Ss(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function JL(e,t){for(var r=[],n=Ss(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function gS(e){for(var t=[],r=Ss(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function bS(e){for(var t=[],r=Ss(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function mxe(e){for(var t=[],r=Ss(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var Aw=new Date(1899,11,30,0,0,0);function hi(e,t){var r=e.getTime(),n=Aw.getTime()+(e.getTimezoneOffset()-Aw.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var tz=new Date,pxe=Aw.getTime()+(tz.getTimezoneOffset()-Aw.getTimezoneOffset())*6e4,ZL=tz.getTimezoneOffset();function yS(e){var t=new Date;return t.setTime(e*24*60*60*1e3+pxe),t.getTimezoneOffset()!==ZL&&t.setTime(t.getTime()+(t.getTimezoneOffset()-ZL)*6e4),t}function xxe(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var e6=new Date("2017-02-19T19:06:09.000Z"),rz=isNaN(e6.getFullYear())?new Date("2/19/17"):e6,vxe=rz.getFullYear()==2017;function Vn(e,t){var r=new Date(e);if(vxe)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(rz.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function wx(e,t){if(_a&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Pu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Pu(qq(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Pu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Pu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"€":"","‚":"",ƒ:"","„":"","…":"","†":"","‡":"","ˆ":"","‰":"",Š:"","‹":"",Œ:"",Ž:"","‘":"","’":"","“":"","”":"","•":"","–":"","—":"","˜":"","™":"",š:"","›":"",œ:"",ž:"",Ÿ:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function qn(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=qn(e[r]));return t}function js(e,t){for(var r="";r.length<t;)r+=e;return r}function Td(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var gxe=["january","february","march","april","may","june","july","august","september","october","november","december"];function A0(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&gxe.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var bxe=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}}();function az(e){return e?e.content&&e.type?wx(e.content,!0):e.data?Ab(e.data):e.asNodeBuffer&&_a?Ab(e.asNodeBuffer().toString("binary")):e.asBinary?Ab(e.asBinary()):e._data&&e._data.getContent?Ab(wx(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function nz(e){if(!e)return null;if(e.data)return VL(e.data);if(e.asNodeBuffer&&_a)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?VL(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function yxe(e){return e&&e.name.slice(-4)===".bin"?nz(e):az(e)}function Pc(e,t){for(var r=e.FullPaths||Ss(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function bT(e,t){var r=Pc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Js(e,t,r){if(!r)return yxe(bT(e,t));if(!t)return null;try{return Js(e,t)}catch{return null}}function Gl(e,t,r){if(!r)return az(bT(e,t));if(!t)return null;try{return Gl(e,t)}catch{return null}}function jxe(e,t,r){return nz(bT(e,t))}function t6(e){for(var t=e.FullPaths||Ss(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function wa(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return _a?n=pf(r):n=Bpe(r),Hr.utils.cfb_add(e,t,n)}Hr.utils.cfb_add(e,t,r)}else e.file(t,r)}function yT(){return Hr.utils.cfb_new()}function sz(e,t){switch(t.type){case"base64":return Hr.read(e,{type:"base64"});case"binary":return Hr.read(e,{type:"binary"});case"buffer":case"array":return Hr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Ib(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var qs=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,Nxe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,r6=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,wxe=/<[^>]*>/g,To=qs.match(r6)?r6:wxe,Sxe=/<\w*:/,Cxe=/<(\/?)\w+:/;function oa(e,t,r){for(var n={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(Nxe),l=0,c="",d=0,u="",h="",m=1;if(o)for(d=0;d!=o.length;++d){for(h=o[d],i=0;i!=h.length&&h.charCodeAt(i)!==61;++i);for(u=h.slice(0,i).trim();h.charCodeAt(i+1)==32;)++i;for(m=(s=h.charCodeAt(i+1))==34||s==39?1:0,c=h.slice(i+1+m,h.length-m),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),n[u]=c,n[u.toLowerCase()]=c;else{var p=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(n[p]&&u.slice(l-3,l)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function Qu(e){return e.replace(Cxe,"<$1")}var iz={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},jT=gS(iz),Wa=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return iz[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}}(),NT=/[&<>'"]/g,kxe=/[\u0000-\u0008\u000b-\u001f]/g;function bn(e){var t=e+"";return t.replace(NT,function(r){return jT[r]}).replace(kxe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function a6(e){return bn(e).replace(/ /g,"_x0020_")}var oz=/[\u0000-\u001f]/g;function wT(e){var t=e+"";return t.replace(NT,function(r){return jT[r]}).replace(/\n/g,"<br/>").replace(oz,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function _xe(e){var t=e+"";return t.replace(NT,function(r){return jT[r]}).replace(oz,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var n6=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function Exe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Un(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function X_(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function s6(e){var t=Lm(2*e.length),r,n,s=1,i=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function i6(e){return pf(e,"binary").toString("utf8")}var Rj="foo bar bazâð£",Cn=_a&&(i6(Rj)==X_(Rj)&&i6||s6(Rj)==X_(Rj)&&s6)||X_,Pu=_a?function(e){return pf(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},hy=function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),lz=function(){var e=[["nbsp"," "],["middot","·"],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}}(),Dxe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),Axe=/<\/?(?:vt:)?variant>/g,Txe=/<(?:vt:)([^>]*)>([\s\S]*)</;function o6(e,t){var r=oa(e),n=e.match(Dxe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(Axe,"").match(Txe);o&&s.push({v:Cn(o[2]),t:o[1]})}),s}var cz=/(^\s|\s$|\n)/;function Xi(e,t){return"<"+e+(t.match(cz)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function fy(e){return Ss(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function vr(e,t,r){return"<"+e+(r!=null?fy(r):"")+(t!=null?(t.match(cz)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function x5(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function Ixe(e,t){switch(typeof e){case"string":var r=vr("vt:lpwstr",bn(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return vr((e|0)==e?"vt:i4":"vt:r8",bn(String(e)));case"boolean":return vr("vt:bool",e?"true":"false")}if(e instanceof Date)return vr("vt:filetime",x5(e));throw new Error("Unable to serialize "+e)}function ST(e){if(_a&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Cn(Zm(xT(e)));throw new Error("Bad input format: expected Buffer or string")}var my=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ci={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Lx=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Vl={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function Pxe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function Oxe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=n?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|n}var l6=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,i=e[0][n].length;s<i;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},c6=_a?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:pf(t)})):l6(e)}:l6,d6=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode($h(e,s)));return n.join("").replace(qo,"")},CT=_a?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(qo,""):d6(e,t,r)}:d6,u6=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},dz=_a?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):u6(e,t,r)}:u6,h6=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(Vv(e,s)));return n.join("")},t1=_a?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):h6(t,r,n)}:h6,uz=function(e,t){var r=ql(e,t);return r>0?t1(e,t+4,t+4+r-1):""},hz=uz,fz=function(e,t){var r=ql(e,t);return r>0?t1(e,t+4,t+4+r-1):""},mz=fz,pz=function(e,t){var r=2*ql(e,t);return r>0?t1(e,t+4,t+4+r-1):""},xz=pz,vz=function(t,r){var n=ql(t,r);return n>0?CT(t,r+4,r+4+n):""},gz=vz,bz=function(e,t){var r=ql(e,t);return r>0?t1(e,t+4,t+4+r):""},yz=bz,jz=function(e,t){return Pxe(e,t)},Tw=jz,kT=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};_a&&(hz=function(t,r){if(!Buffer.isBuffer(t))return uz(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},mz=function(t,r){if(!Buffer.isBuffer(t))return fz(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},xz=function(t,r){if(!Buffer.isBuffer(t))return pz(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},gz=function(t,r){if(!Buffer.isBuffer(t))return vz(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},yz=function(t,r){if(!Buffer.isBuffer(t))return bz(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},Tw=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):jz(t,r)},kT=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Vv=function(e,t){return e[t]},$h=function(e,t){return e[t+1]*256+e[t]},Mxe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},ql=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},Up=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},Rxe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Lb(e,t){var r="",n,s,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,_a&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode($h(this,d)),d+=2;e*=2;break;case"utf8":r=t1(this,this.l,this.l+e);break;case"utf16le":e*=2,r=CT(this,this.l,this.l+e);break;case"wstr":return Lb.call(this,e,"dbcs");case"lpstr-ansi":r=hz(this,this.l),e=4+ql(this,this.l);break;case"lpstr-cp":r=mz(this,this.l),e=4+ql(this,this.l);break;case"lpwstr":r=xz(this,this.l),e=4+2*ql(this,this.l);break;case"lpp4":e=4+ql(this,this.l),r=gz(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+ql(this,this.l),r=yz(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Vv(this,this.l+e++))!==0;)i.push(Mj(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=$h(this,this.l+e))!==0;)i.push(Mj(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Vv(this,d),this.l=d+1,l=Lb.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Mj($h(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Vv(this,d),this.l=d+1,l=Lb.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Mj(Vv(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return n=Vv(this,this.l),this.l++,n;case 2:return n=(t==="i"?Mxe:$h)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?Up:Rxe)(this,this.l),this.l+=4,n):(s=ql(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=Tw(this,this.l):s=Tw([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=dz(this,this.l,e);break}}return this.l+=e,r}var Fxe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},Lxe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},Bxe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Uxe(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)Bxe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,Fxe(this,t,this.l);break;case 8:if(n=8,r==="f"){Oxe(this,t,this.l);break}case 16:break;case-4:n=4,Lxe(this,t,this.l);break}return this.l+=n,this}function Nz(e,t){var r=dz(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Gi(e,t){e.l=t,e.read_shift=Lb,e.chk=Nz,e.write_shift=Uxe}function Do(e,t){e.l+=t}function qt(e){var t=Lm(e);return Gi(t,0),t}function xf(e,t,r){if(e){var n,s,i;Gi(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=yy[l]||yy[65535];for(n=e.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=e.read_shift(1))&127)<<7*s;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,l))return}}}function hl(){var e=[],t=_a?256:2048,r=function(d){var u=qt(d);return Gi(u,0),u},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(d){return n&&d<n.length-n.l?n:(s(),n=r(Math.max(d+1,t)))},o=function(){return s(),ki(e)},l=function(d){s(),n=d,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function sr(e,t,r,n){var s=+t,i;if(!isNaN(s)){n||(n=yy[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&kT(r)&&e.push(r)}}function Bb(e,t,r){var n=qn(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function f6(e,t,r){var n=qn(e);return n.s=Bb(n.s,t.s,r),n.e=Bb(n.e,t.s,r),n}function Ub(e,t){if(e.cRel&&e.c<0)for(e=qn(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=qn(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=sa(e);return!e.cRel&&e.cRel!=null&&(r=qxe(r)),!e.rRel&&e.rRel!=null&&(r=$xe(r)),r}function Q_(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+cs(e.s.c)+":"+(e.e.cRel?"":"$")+cs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+$s(e.s.r)+":"+(e.e.rRel?"":"$")+$s(e.e.r):Ub(e.s,t.biff)+":"+Ub(e.e,t.biff)}function _T(e){return parseInt(Vxe(e),10)-1}function $s(e){return""+(e+1)}function $xe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function Vxe(e){return e.replace(/\$(\d+)$/,"$1")}function ET(e){for(var t=zxe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function cs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function qxe(e){return e.replace(/^([A-Z])/,"$$$1")}function zxe(e){return e.replace(/^\$([A-Z])/,"$1")}function Hxe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function ds(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function sa(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function ml(e){var t=e.indexOf(":");return t==-1?{s:ds(e),e:ds(e)}:{s:ds(e.slice(0,t)),e:ds(e.slice(t+1))}}function ba(e,t){return typeof t>"u"||typeof t=="number"?ba(e.s,e.e):(typeof e!="string"&&(e=sa(e)),typeof t!="string"&&(t=sa(t)),e==t?e:e+":"+t)}function Ga(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=e.length;for(r=0;n<i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function m6(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=Gc(e.z,r?hi(t):t)}catch{}try{return e.w=Gc((e.XF||{}).numFmtId||(r?14:0),r?hi(t):t)}catch{return""+t}}function of(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?vf[e.v]||e.v:t==null?m6(e,e.v):m6(e,t))}function ep(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function wz(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ds(n.origin):n.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=Ga(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),o==-1&&(d.e.r=o=u.e.r+1)}for(var h=0;h!=t.length;++h)if(t[h]){if(!Array.isArray(t[h]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[h].length;++m)if(!(typeof t[h][m]>"u")){var p={v:t[h][m]},v=o+h,g=l+m;if(d.s.r>v&&(d.s.r=v),d.s.c>g&&(d.s.c=g),d.e.r<v&&(d.e.r=v),d.e.c<g&&(d.e.c=g),t[h][m]&&typeof t[h][m]=="object"&&!Array.isArray(t[h][m])&&!(t[h][m]instanceof Date))p=t[h][m];else if(Array.isArray(p.v)&&(p.f=t[h][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||ra[14],n.cellDates?(p.t="d",p.w=Gc(p.z,hi(p.v))):(p.t="n",p.v=hi(p.v),p.w=Gc(p.z,p.v))):p.t="s";if(s)i[v]||(i[v]=[]),i[v][g]&&i[v][g].z&&(p.z=i[v][g].z),i[v][g]=p;else{var b=sa({c:g,r:v});i[b]&&i[b].z&&(p.z=i[b].z),i[b]=p}}}return d.s.c<1e7&&(i["!ref"]=ba(d)),i}function og(e,t){return wz(null,e,t)}function Wxe(e){return e.read_shift(4,"i")}function Id(e,t){return t||(t=qt(4)),t.write_shift(4,e),t}function Eo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function _i(e,t){var r=!1;return t==null&&(r=!0,t=qt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Gxe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Yxe(e,t){return t||(t=qt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function DT(e,t){var r=e.l,n=e.read_shift(1),s=Eo(e),i=[],o={t:s,h:s};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(Gxe(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Kxe(e,t){var r=!1;return t==null&&(r=!0,t=qt(15+4*e.t.length)),t.write_shift(1,0),_i(e.t,t),r?t.slice(0,t.l):t}var Xxe=DT;function Qxe(e,t){var r=!1;return t==null&&(r=!0,t=qt(23+4*e.t.length)),t.write_shift(1,1),_i(e.t,t),t.write_shift(4,1),Yxe({},t),r?t.slice(0,t.l):t}function Jc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function Bx(e,t){return t==null&&(t=qt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function Ux(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function $x(e,t){return t==null&&(t=qt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Jxe=Eo,Sz=_i;function AT(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function Iw(e,t){var r=!1;return t==null&&(r=!0,t=qt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Zxe=Eo,v5=AT,TT=Iw;function IT(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?Tw([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):Up(t,0)>>2;return r?s/100:s}function Cz(e,t){t==null&&(t=qt(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function kz(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function eve(e,t){return t||(t=qt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Vx=kz,lg=eve;function No(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Sx(e,t){return(t||qt(8)).write_shift(8,e,"f")}function tve(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var d=lx[s];d&&(t.rgb=xy(d));break;case 2:t.rgb=xy([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Pw(e,t){if(t||(t=qt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function rve(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function ave(e,t){t||(t=qt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function _z(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function nve(e){return _z(e,1)}function sve(e){return _z(e,2)}var PT=2,il=3,Fj=11,p6=12,Ow=19,Lj=64,ive=65,ove=71,lve=4108,cve=4126,Si=80,Ez=81,dve=[Si,Ez],g5={1:{n:"CodePage",t:PT},2:{n:"Category",t:Si},3:{n:"PresentationFormat",t:Si},4:{n:"ByteCount",t:il},5:{n:"LineCount",t:il},6:{n:"ParagraphCount",t:il},7:{n:"SlideCount",t:il},8:{n:"NoteCount",t:il},9:{n:"HiddenCount",t:il},10:{n:"MultimediaClipCount",t:il},11:{n:"ScaleCrop",t:Fj},12:{n:"HeadingPairs",t:lve},13:{n:"TitlesOfParts",t:cve},14:{n:"Manager",t:Si},15:{n:"Company",t:Si},16:{n:"LinksUpToDate",t:Fj},17:{n:"CharacterCount",t:il},19:{n:"SharedDoc",t:Fj},22:{n:"HyperlinksChanged",t:Fj},23:{n:"AppVersion",t:il,p:"version"},24:{n:"DigSig",t:ive},26:{n:"ContentType",t:Si},27:{n:"ContentStatus",t:Si},28:{n:"Language",t:Si},29:{n:"Version",t:Si},255:{},2147483648:{n:"Locale",t:Ow},2147483651:{n:"Behavior",t:Ow},1919054434:{}},b5={1:{n:"CodePage",t:PT},2:{n:"Title",t:Si},3:{n:"Subject",t:Si},4:{n:"Author",t:Si},5:{n:"Keywords",t:Si},6:{n:"Comments",t:Si},7:{n:"Template",t:Si},8:{n:"LastAuthor",t:Si},9:{n:"RevNumber",t:Si},10:{n:"EditTime",t:Lj},11:{n:"LastPrinted",t:Lj},12:{n:"CreatedDate",t:Lj},13:{n:"ModifiedDate",t:Lj},14:{n:"PageCount",t:il},15:{n:"WordCount",t:il},16:{n:"CharCount",t:il},17:{n:"Thumbnail",t:ove},18:{n:"Application",t:Si},19:{n:"DocSecurity",t:il},255:{},2147483648:{n:"Locale",t:Ow},2147483651:{n:"Behavior",t:Ow},1919054434:{}},x6={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},uve=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function hve(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var fve=hve([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),lx=qn(fve),vf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Dz={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},y5={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Bj={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function OT(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function mve(e){var t=OT();if(!e||!e.match)return t;var r={};if((e.match(To)||[]).forEach(function(n){var s=oa(n);switch(s[0].replace(Sxe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[y5[s.ContentType]]!==void 0&&t[y5[s.ContentType]].push(s.PartName);break}}),t.xmlns!==ci.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function Az(e,t){var r=mxe(y5),n=[],s;n[n.length]=qs,n[n.length]=vr("Types",null,{xmlns:ci.CT,"xmlns:xsd":ci.xsd,"xmlns:xsi":ci.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return vr("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=vr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Bj[c][t.bookType]||Bj[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){n[n.length]=vr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:Bj[c][t.bookType]||Bj[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){n[n.length]=vr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Aa={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function py(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function $b(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(To)||[]).forEach(function(s){var i=oa(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Ib(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}function s0(e){var t=[qs,vr("Relationships",null,{xmlns:ci.RELS})];return Ss(e["!id"]).forEach(function(r){t[t.length]=vr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function vn(e,t,r,n,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[Aa.HLINK,Aa.XPATH,Aa.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var pve="application/vnd.oasis.opendocument.spreadsheet";function xve(e,t){for(var r=ST(e),n,s;n=my.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=oa(n[0],!1),s.path=="/"&&s.type!==pve)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function vve(e){var t=[qs];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function v6(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function gve(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function bve(e){var t=[qs];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(v6(e[r][0],e[r][1])),t.push(gve("",e[r][0]));return t.push(v6("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function Tz(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+kw.version+"</meta:generator></office:meta></office:document-meta>"}var zc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],yve=function(){for(var e=new Array(zc.length),t=0;t<zc.length;++t){var r=zc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function Iz(e){var t={};e=Cn(e);for(var r=0;r<zc.length;++r){var n=zc[r],s=e.match(yve[r]);s!=null&&s.length>0&&(t[n[1]]=Wa(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Vn(t[n[1]]))}return t}function J_(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=bn(t),n[n.length]=r?vr(e,t,r):Xi(e,t))}function Pz(e,t){var r=t||{},n=[qs,vr("cp:coreProperties",null,{"xmlns:cp":ci.CORE_PROPS,"xmlns:dc":ci.dc,"xmlns:dcterms":ci.dcterms,"xmlns:dcmitype":ci.dcmitype,"xmlns:xsi":ci.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&J_("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:x5(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&J_("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:x5(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=zc.length;++i){var o=zc[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&J_(o[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var cx=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],Oz=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function Mz(e,t,r,n){var s=[];if(typeof e=="string")s=o6(e,n);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(u){return{v:u}}));var o=typeof t=="string"?o6(t,n).map(function(u){return u.v}):t,l=0,c=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(c=+s[d+1].v,s[d].v){case"Worksheets":case"工作表":case"Листы":case"أوراق العمل":case"ワークシート":case"גליונות עבודה":case"Arbeitsblätter":case"Çalışma Sayfaları":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de cálculo":case"Planilhas":case"Regneark":case"Hojas de cálculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"名前付き一覧":case"Benannte Bereiche":case"Navngivne områder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function jve(e,t,r){var n={};return t||(t={}),e=Cn(e),cx.forEach(function(s){var i=(e.match(hy(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=Wa(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&Mz(n.HeadingPairs,n.TitlesOfParts,t,r),t}function Rz(e){var t=[],r=vr;return e||(e={}),e.Application="SheetJS",t[t.length]=qs,t[t.length]=vr("Properties",null,{xmlns:ci.EXT_PROPS,"xmlns:vt":ci.vt}),cx.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=bn(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+bn(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Nve=/<[^>]+>[^<]*/g;function wve(e,t){var r={},n="",s=e.match(Nve);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=oa(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Wa(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[n]=Wa(u);break;case"bool":r[n]=Un(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(u);break;case"filetime":case"date":r[n]=Vn(u);break;case"cy":case"error":r[n]=Wa(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function Fz(e){var t=[qs,vr("Properties",null,{xmlns:ci.CUST_PROPS,"xmlns:vt":ci.vt})];if(!e)return t.join("");var r=1;return Ss(e).forEach(function(s){++r,t[t.length]=vr("property",Ixe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:bn(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var j5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Z_;function Sve(e,t,r){Z_||(Z_=gS(j5)),t=Z_[t]||t,e[t]=r}function Cve(e,t){var r=[];return Ss(j5).map(function(n){for(var s=0;s<zc.length;++s)if(zc[s][1]==n)return zc[s];for(s=0;s<cx.length;++s)if(cx[s][1]==n)return cx[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Xi(j5[n[1]]||n[1],s))}}),vr("DocumentProperties",r.join(""),{xmlns:Vl.o})}function kve(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&Ss(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<zc.length;++o)if(i==zc[o][1])return;for(o=0;o<cx.length;++o)if(i==cx[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(vr(a6(i),l,{"dt:dt":c}))}}),t&&Ss(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(vr(a6(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Vl.o+'">'+s.join("")+"</"+n+">"}function MT(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function _ve(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var o=qt(8);return o.write_shift(4,n),o.write_shift(4,s),o}function Lz(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function Bz(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function Uz(e,t,r){return t===31?Bz(e):Lz(e,t,r)}function N5(e,t,r){return Uz(e,t,r===!1?0:4)}function Eve(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return Uz(e,t,0)}function Dve(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(qo,""),e.l-s&2&&(e.l+=2)}return r}function Ave(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(qo,"");return r}function Tve(e){var t=e.l,r=Mw(e,Ez);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=Mw(e,il);return[r,n]}function Ive(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(Tve(e));return r}function g6(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(qo,"").replace(Tb,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function $z(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function Pve(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function Mw(e,t,r){var n=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==p6&&n!==t&&dve.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===p6?n:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return Lz(e,n,4).replace(qo,"");case 31:return Bz(e);case 64:return MT(e);case 65:return $z(e);case 71:return Pve(e);case 80:return N5(e,n,!i.raw).replace(qo,"");case 81:return Eve(e,n).replace(qo,"");case 4108:return Ive(e);case 4126:case 4127:return n==4127?Dve(e):Ave(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function b6(e,t){var r=qt(4),n=qt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=qt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=_ve(t);break;case 31:case 80:for(n=qt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return ki([r,n])}function y6(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,d={};for(o=0;o!=s;++o){var u=e.read_shift(4),h=e.read_shift(4);i[o]=[u,h+r]}i.sort(function(C,w){return C[1]-w[1]});var m={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var p=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(p=!1,e.l=i[o][1]),p)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var v=t[i[o][0]];if(m[v.n]=Mw(e,v.t,{raw:!0}),v.p==="version"&&(m[v.n]=String(m[v.n]>>16)+"."+("0000"+String(m[v.n]&65535)).slice(-4)),v.n=="CodePage")switch(m[v.n]){case 0:m[v.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Ed(l=m[v.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[v.n])}}else if(i[o][0]===1){if(l=m.CodePage=Mw(e,PT),Ed(l),c!==-1){var g=e.l;e.l=i[c][1],d=g6(e,l),e.l=g}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}d=g6(e,l)}else{var b=d[i[o][0]],y;switch(e[e.l]){case 65:e.l+=4,y=$z(e);break;case 30:e.l+=4,y=N5(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,y=N5(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,y=e.read_shift(4,"i");break;case 19:e.l+=4,y=e.read_shift(4);break;case 5:e.l+=4,y=e.read_shift(8,"f");break;case 11:e.l+=4,y=Ms(e,4);break;case 64:e.l+=4,y=Vn(MT(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[b]=y}}return e.l=r+n,m}var Vz=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function Ove(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function j6(e,t,r){var n=qt(8),s=[],i=[],o=8,l=0,c=qt(8),d=qt(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),s.push(d),o+=8+c.length,!t){d=qt(8),d.write_shift(4,0),s.unshift(d);var u=[qt(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var h=e[l][0];for(c=qt(8+2*(h.length+1)+(h.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,h.length+1),c.write_shift(0,h,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=ki(u),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(Vz.indexOf(e[l][0])>-1||Oz.indexOf(e[l][0])>-1)&&e[l][1]!=null){var m=e[l][1],p=0;if(t){p=+t[e[l][0]];var v=r[p];if(v.p=="version"&&typeof m=="string"){var g=m.split(".");m=(+g[0]<<16)+(+g[1]||0)}c=b6(v.t,m)}else{var b=Ove(m);b==-1&&(b=31,m=String(m)),c=b6(b,m)}i.push(c),d=qt(8),d.write_shift(4,t?p:2+l),s.push(d),o+=8+c.length}var y=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,y),y+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),ki([n].concat(s).concat(i))}function N6(e,t,r){var n=e.content;if(!n)return{};Gi(n,0);var s,i,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var d=n.read_shift(4),u=n.read_shift(16);if(u!==Hr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),c=n.read_shift(4));var h=y6(n,t),m={SystemIdentifier:d};for(var p in h)m[p]=h[p];if(m.FMTID=i,s===1)return m;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var v;try{v=y6(n,null)}catch{}for(p in v)m[p]=v[p];return m.FMTID=[i,o],m}function w6(e,t,r,n,s,i){var o=qt(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Hr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=j6(e,r,n);if(l.push(c),s){var d=j6(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return ki(l)}function pm(e,t){return e.read_shift(t),null}function Mve(e,t){t||(t=qt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function Rve(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function Ms(e,t){return e.read_shift(t)===1}function Bo(e,t){return t||(t=qt(2)),t.write_shift(2,+!!e),t}function Zs(e){return e.read_shift(2,"u")}function Oc(e,t){return t||(t=qt(2)),t.write_shift(2,e),t}function qz(e,t){return Rve(e,t,Zs)}function Fve(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function zz(e,t,r){return r||(r=qt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function r1(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function Lve(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),n&&(e.l+=l),c.t=u,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function Bve(e){var t=e.t||"",r=qt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=qt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return ki(s)}function Cx(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function a1(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):Cx(e,n,r)}function qx(e,t,r){if(r.biff>5)return a1(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function Hz(e,t,r){return r||(r=qt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Uve(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function $ve(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(qo,"");return n&&(e.l+=24),s}function Vve(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(qo,"");return r+o}function qve(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return $ve(e);case"0303000000000000c000000000000046":return Vve(e);default:throw new Error("Unsupported Moniker "+r)}}function Uj(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(qo,""):"";return r}function S6(e,t){t||(t=qt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function zve(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var i,o,l,c,d="",u,h;s&16&&(i=Uj(e,r-e.l)),s&128&&(o=Uj(e,r-e.l)),(s&257)===257&&(l=Uj(e,r-e.l)),(s&257)===1&&(c=qve(e,r-e.l)),s&8&&(d=Uj(e,r-e.l)),s&32&&(u=e.read_shift(16)),s&64&&(h=MT(e)),e.l=r;var m=o||l||c||"";m&&d&&(m+="#"+d),m||(m="#"+d),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return u&&(p.guid=u),h&&(p.time=h),i&&(p.Tooltip=i),p}function Hve(e){var t=qt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)n=n.slice(1),S6(n,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&S6(s>-1?n.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function Wz(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function Gz(e,t){var r=Wz(e);return r[3]=0,r}function Ju(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function kx(e,t,r,n){return n||(n=qt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function Wve(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Gve(e,t,r){return t===0?"":qx(e,t,r)}function Yve(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,i,o]}function Yz(e){var t=e.read_shift(2),r=IT(e);return[t,r]}function Kve(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=r1(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,s}function jS(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function Kz(e,t){return t||(t=qt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function Xz(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var Xve=Xz;function Qz(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Qve(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Jve(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function oo(e){e.l+=2,e.l+=e.read_shift(2)}var Zve={0:oo,4:oo,5:oo,6:oo,7:Jve,8:oo,9:oo,10:oo,11:oo,12:oo,13:Qve,14:oo,15:oo,16:oo,17:oo,18:oo,19:oo,20:oo,21:Qz};function e0e(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(Zve[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function $j(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function RT(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=qt(s);return i.write_shift(2,n),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function t0e(e,t){return t===0||e.read_shift(2),1200}function r0e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=qx(e,0,r);return e.read_shift(t+n-e.l),s}function a0e(e,t){var r=!t||t.biff==8,n=qt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function n0e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function s0e(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=r1(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function i0e(e,t){var r=!t||t.biff>=8?2:1,n=qt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function o0e(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(Lve(e));return i.Count=n,i.Unique=s,i}function l0e(e,t){var r=qt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=Bve(e[s]);var i=ki([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function c0e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function d0e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function u0e(e){var t=Wve(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function h0e(e){return e.read_shift(2),e.read_shift(4)}function C6(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function f0e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:d}}function m0e(){var e=qt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function p0e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function x0e(e){var t=qt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function v0e(){}function g0e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=r1(e,0,r),n}function b0e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,i=qt(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function y0e(e){var t=Ju(e);return t.isst=e.read_shift(4),t}function j0e(e,t,r,n){var s=qt(10);return kx(e,t,n,s),s.write_shift(4,r),s}function N0e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=Ju(e);r.biff==2&&e.l++;var i=a1(e,n-e.l,r);return s.val=i,s}function w0e(e,t,r,n,s){var i=!s||s.biff==8,o=qt(8+ +i+(1+i)*r.length);return kx(e,t,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function S0e(e,t,r){var n=e.read_shift(2),s=qx(e,0,r);return[n,s]}function C0e(e,t,r,n){var s=r&&r.biff==5;n||(n=qt(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var k0e=qx;function k6(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c}}}function _0e(e,t){var r=t.biff==8||!t.biff?4:2,n=qt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function E0e(e){var t=e.read_shift(2),r=e.read_shift(2),n=Yz(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function D0e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(Yz(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function A0e(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function T0e(e,t,r,n){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=uve[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function I0e(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=T0e(e,t,n.fStyle,r),n}function _6(e,t,r,n){var s=r&&r.biff==5;n||(n=qt(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function P0e(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function O0e(e){var t=qt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function E6(e,t,r){var n=Ju(e);(r.biff==2||t==9)&&++e.l;var s=Fve(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function M0e(e,t,r,n,s,i){var o=qt(8);return kx(e,t,n,o),zz(r,i,o),o}function R0e(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Ju(e),s=No(e);return n.val=s,n}function F0e(e,t,r,n){var s=qt(14);return kx(e,t,n,s),Sx(r,s),s}var D6=Gve;function L0e(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Cx(e,i),l=[];n>e.l;)l.push(a1(e));return[i,s,o,l]}function A6(e,t,r){var n=e.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=Kve(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var B0e=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function T6(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=Cx(e,o,r);s&32&&(d=B0e[d.charCodeAt(0)]);var u=n-e.l;r&&r.biff==2&&--u;var h=n==e.l||l===0||!(u>0)?[]:eje(e,u,r,l);return{chKey:i,Name:d,itab:c,rgce:h}}function Jz(e,t,r){if(r.biff<8)return U0e(e,t,r);for(var n=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(Yve(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function U0e(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=r1(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function $0e(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),i=Cx(e,n,r),o=Cx(e,s,r);return[i,o]}function V0e(e,t,r){var n=Xz(e);e.l++;var s=e.read_shift(1);return t-=8,[tje(e,t,r),s,n]}function I6(e,t,r){var n=Xve(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,J1e(e,t,r)]}function q0e(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function z0e(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=qx(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},l,o,i]}}function H0e(e,t,r){return z0e(e,t,r)}function W0e(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(jS(e));return r}function G0e(e){var t=qt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)Kz(e[r],t);return t}function Y0e(e,t,r){if(r&&r.biff<8)return X0e(e,t,r);var n=Qz(e),s=e0e(e,t-22,n[1]);return{cmo:n,ft:s}}var K0e={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function X0e(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((K0e[n]||Do)(e,t,r)),{cmo:[s,n,i],ft:o}}function Q0e(e,t,r){var n=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=Uve(e,6,r);var l=e.read_shift(2);e.read_shift(2),Zs(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-n!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],h=Cx(e,e.lens[d+1]-e.lens[d]-1);if(s+=h,s.length>=(u?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function J0e(e,t){var r=jS(e);e.l+=16;var n=zve(e,t-24);return[r,n]}function Z0e(e){var t=qt(24),r=ds(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return ki([t,Hve(e[1])])}function ege(e,t){e.read_shift(2);var r=jS(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(qo,""),[r,n]}function tge(e){var t=e[1].Tooltip,r=qt(10+2*(t.length+1));r.write_shift(2,2048);var n=ds(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function rge(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=x6[r]||r,r=e.read_shift(2),t[1]=x6[r]||r,t}function age(e){return e||(e=qt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function nge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Gz(e));return r}function sge(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(Gz(e));return r}function ige(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function Zz(e,t,r){if(!r.cellStyles)return Do(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function oge(e,t){var r=qt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function lge(e,t){var r={};return t<32||(e.l+=16,r.header=No(e),r.footer=No(e),e.l+=2),r}function cge(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function dge(e){for(var t=qt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var uge=Ju,hge=qz,fge=a1;function mge(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function pge(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Ju(e);++e.l;var s=qx(e,t-7,r);return n.t="str",n.val=s,n}function xge(e){var t=Ju(e);++e.l;var r=No(e);return t.t="n",t.val=r,t}function vge(e,t,r){var n=qt(15);return o1(n,e,t),n.write_shift(8,r,"f"),n}function gge(e){var t=Ju(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function bge(e,t,r){var n=qt(9);return o1(n,e,t),n.write_shift(2,r),n}function yge(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function jge(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function Nge(e,t,r){var n=e.l+t,s=Ju(e),i=e.read_shift(2),o=Cx(e,i,r);return e.l=n,s.t="str",s.val=o,s}var wge=[2,3,48,49,131,139,140,245],w5=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=gS({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=Lm(1);switch(c.type){case"base64":u=Wl(ic(l));break;case"binary":u=Wl(l);break;case"buffer":case"array":u=l;break}Gi(u,0);var h=u.read_shift(1),m=!!(h&136),p=!1,v=!1;switch(h){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:v=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+h.toString(16))}var g=0,b=521;h==2&&(g=u.read_shift(2)),u.l+=3,h!=2&&(g=u.read_shift(4)),g>1048576&&(g=1e6),h!=2&&(b=u.read_shift(2));var y=u.read_shift(2),C=c.codepage||1252;h!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(C=e[u[u.l]]),u.l+=1,u.l+=2),v&&(u.l+=36);for(var w=[],k={},S=Math.min(u.length,h==2?521:b-10-(p?264:0)),D=v?32:11;u.l<S&&u[u.l]!=13;)switch(k={},k.name=cy.utils.decode(C,u.slice(u.l,u.l+D)).replace(/[\u0000\r\n].*$/g,""),u.l+=D,k.type=String.fromCharCode(u.read_shift(1)),h!=2&&!v&&(k.offset=u.read_shift(4)),k.len=u.read_shift(1),h==2&&(k.offset=u.read_shift(2)),k.dec=u.read_shift(1),k.name.length&&w.push(k),h!=2&&(u.l+=v?13:14),k.type){case"B":(!p||k.len!=8)&&c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(u[u.l]!==13&&(u.l=b-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=b;var E=0,T=0;for(d[0]=[],T=0;T!=w.length;++T)d[0][T]=w[T].name;for(;g-- >0;){if(u[u.l]===42){u.l+=y;continue}for(++u.l,d[++E]=[],T=0,T=0;T!=w.length;++T){var A=u.slice(u.l,u.l+w[T].len);u.l+=w[T].len,Gi(A,0);var L=cy.utils.decode(C,A);switch(w[T].type){case"C":L.trim().length&&(d[E][T]=L.replace(/\s+$/,""));break;case"D":L.length===8?d[E][T]=new Date(+L.slice(0,4),+L.slice(4,6)-1,+L.slice(6,8)):d[E][T]=L;break;case"F":d[E][T]=parseFloat(L.trim());break;case"+":case"I":d[E][T]=v?A.read_shift(-4,"i")^2147483648:A.read_shift(4,"i");break;case"L":switch(L.trim().toUpperCase()){case"Y":case"T":d[E][T]=!0;break;case"N":case"F":d[E][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+L+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+h.toString(16));d[E][T]="##MEMO##"+(v?parseInt(L.trim(),10):A.read_shift(4));break;case"N":L=L.replace(/\u0000/g,"").trim(),L&&L!="."&&(d[E][T]=+L||0);break;case"@":d[E][T]=new Date(A.read_shift(-8,"f")-621356832e5);break;case"T":d[E][T]=new Date((A.read_shift(4)-2440588)*864e5+A.read_shift(4));break;case"Y":d[E][T]=A.read_shift(4,"i")/1e4+A.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[E][T]=-A.read_shift(-8,"f");break;case"B":if(p&&w[T].len==8){d[E][T]=A.read_shift(8,"f");break}case"G":case"P":A.l+=w[T].len;break;case"0":if(w[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[T].type)}}}if(h!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=w,d}function n(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=og(r(l,d),d);return u["!cols"]=d.DBF.map(function(h){return{wch:h.len,DBF:h}}),delete d.DBF,u}function s(l,c){try{return ep(n(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&Ed(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=hl(),h=Lw(l,{header:1,raw:!0,cellDates:!0}),m=h[0],p=h.slice(1),v=l["!cols"]||[],g=0,b=0,y=0,C=1;for(g=0;g<m.length;++g){if(((v[g]||{}).DBF||{}).name){m[g]=v[g].DBF.name,++y;continue}if(m[g]!=null){if(++y,typeof m[g]=="number"&&(m[g]=m[g].toString(10)),typeof m[g]!="string")throw new Error("DBF Invalid column name "+m[g]+" |"+typeof m[g]+"|");if(m.indexOf(m[g])!==g){for(b=0;b<1024;++b)if(m.indexOf(m[g]+"_"+b)==-1){m[g]+="_"+b;break}}}}var w=Ga(l["!ref"]),k=[],S=[],D=[];for(g=0;g<=w.e.c-w.s.c;++g){var E="",T="",A=0,L=[];for(b=0;b<p.length;++b)p[b][g]!=null&&L.push(p[b][g]);if(L.length==0||m[g]==null){k[g]="?";continue}for(b=0;b<L.length;++b){switch(typeof L[b]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=L[b]instanceof Date?"D":"C";break;default:T="C"}A=Math.max(A,String(L[b]).length),E=E&&E!=T?"C":T}A>250&&(A=250),T=((v[g]||{}).DBF||{}).type,T=="C"&&v[g].DBF.len>A&&(A=v[g].DBF.len),E=="B"&&T=="N"&&(E="N",D[g]=v[g].DBF.dec,A=v[g].DBF.len),S[g]=E=="C"||T=="N"?A:i[E]||0,C+=S[g],k[g]=E}var P=u.next(32);for(P.write_shift(4,318902576),P.write_shift(4,p.length),P.write_shift(2,296+32*y),P.write_shift(2,C),g=0;g<4;++g)P.write_shift(4,0);for(P.write_shift(4,0|(+t[Vq]||3)<<8),g=0,b=0;g<m.length;++g)if(m[g]!=null){var O=u.next(32),Z=(m[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);O.write_shift(1,Z,"sbcs"),O.write_shift(1,k[g]=="?"?"C":k[g],"sbcs"),O.write_shift(4,b),O.write_shift(1,S[g]||i[k[g]]||0),O.write_shift(1,D[g]||0),O.write_shift(1,2),O.write_shift(4,0),O.write_shift(1,0),O.write_shift(4,0),O.write_shift(4,0),b+=S[g]||i[k[g]]||0}var z=u.next(264);for(z.write_shift(4,13),g=0;g<65;++g)z.write_shift(4,0);for(g=0;g<p.length;++g){var K=u.next(C);for(K.write_shift(1,0),b=0;b<m.length;++b)if(m[b]!=null)switch(k[b]){case"L":K.write_shift(1,p[g][b]==null?63:p[g][b]?84:70);break;case"B":K.write_shift(8,p[g][b]||0,"f");break;case"N":var B="0";for(typeof p[g][b]=="number"&&(B=p[g][b].toFixed(D[b]||0)),y=0;y<S[b]-B.length;++y)K.write_shift(1,32);K.write_shift(1,B,"sbcs");break;case"D":p[g][b]?(K.write_shift(4,("0000"+p[g][b].getFullYear()).slice(-4),"sbcs"),K.write_shift(2,("00"+(p[g][b].getMonth()+1)).slice(-2),"sbcs"),K.write_shift(2,("00"+p[g][b].getDate()).slice(-2),"sbcs")):K.write_shift(8,"00000000","sbcs");break;case"C":var Q=String(p[g][b]!=null?p[g][b]:"").slice(0,S[b]);for(K.write_shift(1,Q,"sbcs"),y=0;y<S[b]-Q.length;++y)K.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}}(),eH=function(){var e={AA:"À",BA:"Á",CA:"Â",DA:195,HA:"Ä",JA:197,AE:"È",BE:"É",CE:"Ê",HE:"Ë",AI:"Ì",BI:"Í",CI:"Î",HI:"Ï",AO:"Ò",BO:"Ó",CO:"Ô",DO:213,HO:"Ö",AU:"Ù",BU:"Ú",CU:"Û",HU:"Ü",Aa:"à",Ba:"á",Ca:"â",Da:227,Ha:"ä",Ja:229,Ae:"è",Be:"é",Ce:"ê",He:"ë",Ai:"ì",Bi:"í",Ci:"î",Hi:"ï",Ao:"ò",Bo:"ó",Co:"ô",Do:245,Ho:"ö",Au:"ù",Bu:"ú",Cu:"û",Hu:"ü",KC:"Ç",Kc:"ç",q:"æ",z:"œ",a:"Æ",j:"Œ",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Ss(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var v=e[p];return typeof v=="number"?qL(v):v},n=function(m,p,v){var g=p.charCodeAt(0)-32<<4|v.charCodeAt(0)-48;return g==59?m:qL(g)};e["|"]=254;function s(m,p){switch(p.type){case"base64":return i(ic(m),p);case"binary":return i(m,p);case"buffer":return i(_a&&Buffer.isBuffer(m)?m.toString("binary"):Zm(m),p);case"array":return i(wx(m),p)}throw new Error("Unrecognized type "+p.type)}function i(m,p){var v=m.split(/[\n\r]+/),g=-1,b=-1,y=0,C=0,w=[],k=[],S=null,D={},E=[],T=[],A=[],L=0,P;for(+p.codepage>=0&&Ed(+p.codepage);y!==v.length;++y){L=0;var O=v[y].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),Z=O.replace(/;;/g,"\0").split(";").map(function(ee){return ee.replace(/\u0000/g,";")}),z=Z[0],K;if(O.length>0)switch(z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":Z[1].charAt(0)=="P"&&k.push(O.slice(3).replace(/;;/g,";"));break;case"C":var B=!1,Q=!1,U=!1,J=!1,Y=-1,oe=-1;for(C=1;C<Z.length;++C)switch(Z[C].charAt(0)){case"A":break;case"X":b=parseInt(Z[C].slice(1))-1,Q=!0;break;case"Y":for(g=parseInt(Z[C].slice(1))-1,Q||(b=0),P=w.length;P<=g;++P)w[P]=[];break;case"K":K=Z[C].slice(1),K.charAt(0)==='"'?K=K.slice(1,K.length-1):K==="TRUE"?K=!0:K==="FALSE"?K=!1:isNaN(Td(K))?isNaN(A0(K).getDate())||(K=Vn(K)):(K=Td(K),S!==null&&sg(S)&&(K=yS(K))),B=!0;break;case"E":J=!0;var M=i0(Z[C].slice(1),{r:g,c:b});w[g][b]=[w[g][b],M];break;case"S":U=!0,w[g][b]=[w[g][b],"S5S"];break;case"G":break;case"R":Y=parseInt(Z[C].slice(1))-1;break;case"C":oe=parseInt(Z[C].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}if(B&&(w[g][b]&&w[g][b].length==2?w[g][b][0]=K:w[g][b]=K,S=null),U){if(J)throw new Error("SYLK shared formula cannot have own formula");var V=Y>-1&&w[Y][oe];if(!V||!V[1])throw new Error("SYLK shared formula cannot find base");w[g][b][1]=gH(V[1],{r:g-Y,c:b-oe})}break;case"F":var H=0;for(C=1;C<Z.length;++C)switch(Z[C].charAt(0)){case"X":b=parseInt(Z[C].slice(1))-1,++H;break;case"Y":for(g=parseInt(Z[C].slice(1))-1,P=w.length;P<=g;++P)w[P]=[];break;case"M":L=parseInt(Z[C].slice(1))/20;break;case"F":break;case"G":break;case"P":S=k[parseInt(Z[C].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(A=Z[C].slice(1).split(" "),P=parseInt(A[0],10);P<=parseInt(A[1],10);++P)L=parseInt(A[2],10),T[P-1]=L===0?{hidden:!0}:{wch:L},Bm(T[P-1]);break;case"C":b=parseInt(Z[C].slice(1))-1,T[b]||(T[b]={});break;case"R":g=parseInt(Z[C].slice(1))-1,E[g]||(E[g]={}),L>0?(E[g].hpt=L,E[g].hpx=I0(L)):L===0&&(E[g].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}H<1&&(S=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+O)}}return E.length>0&&(D["!rows"]=E),T.length>0&&(D["!cols"]=T),p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),[w,D]}function o(m,p){var v=s(m,p),g=v[0],b=v[1],y=og(g,p);return Ss(b).forEach(function(C){y[C]=b[C]}),y}function l(m,p){return ep(o(m,p),p)}function c(m,p,v,g){var b="C;Y"+(v+1)+";X"+(g+1)+";K";switch(m.t){case"n":b+=m.v||0,m.f&&!m.F&&(b+=";E"+VT(m.f,{r:v,c:g}));break;case"b":b+=m.v?"TRUE":"FALSE";break;case"e":b+=m.w||m.v;break;case"d":b+='"'+(m.w||m.v)+'"';break;case"s":b+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return b}function d(m,p){p.forEach(function(v,g){var b="F;W"+(g+1)+" "+(g+1)+" ";v.hidden?b+="0":(typeof v.width=="number"&&!v.wpx&&(v.wpx=vy(v.width)),typeof v.wpx=="number"&&!v.wch&&(v.wch=gy(v.wpx)),typeof v.wch=="number"&&(b+=Math.round(v.wch))),b.charAt(b.length-1)!=" "&&m.push(b)})}function u(m,p){p.forEach(function(v,g){var b="F;";v.hidden?b+="M0;":v.hpt?b+="M"+20*v.hpt+";":v.hpx&&(b+="M"+20*by(v.hpx)+";"),b.length>2&&m.push(b+"R"+(g+1))})}function h(m,p){var v=["ID;PWXL;N;E"],g=[],b=Ga(m["!ref"]),y,C=Array.isArray(m),w=`\r
`;v.push("P;PGeneral"),v.push("F;P0;DG0G8;M255"),m["!cols"]&&d(v,m["!cols"]),m["!rows"]&&u(v,m["!rows"]),v.push("B;Y"+(b.e.r-b.s.r+1)+";X"+(b.e.c-b.s.c+1)+";D"+[b.s.c,b.s.r,b.e.c,b.e.r].join(" "));for(var k=b.s.r;k<=b.e.r;++k)for(var S=b.s.c;S<=b.e.c;++S){var D=sa({r:k,c:S});y=C?(m[k]||[])[S]:m[D],!(!y||y.v==null&&(!y.f||y.F))&&g.push(c(y,m,k,S))}return v.join(w)+w+g.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:h}}(),tH=function(){function e(i,o){switch(o.type){case"base64":return t(ic(i),o);case"binary":return t(i,o);case"buffer":return t(_a&&Buffer.isBuffer(i)?i.toString("binary"):Zm(i),o);case"array":return t(wx(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,u=0,h=[];u!==l.length;++u){if(l[u].trim()==="BOT"){h[++c]=[],d=0;continue}if(!(c<0)){var m=l[u].trim().split(","),p=m[0],v=m[1];++u;for(var g=l[u]||"";(g.match(/["]/g)||[]).length&1&&u<l.length-1;)g+=`
`+l[++u];switch(g=g.trim(),+p){case-1:if(g==="BOT"){h[++c]=[],d=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?h[c][d]=!0:g==="FALSE"?h[c][d]=!1:isNaN(Td(v))?isNaN(A0(v).getDate())?h[c][d]=v:h[c][d]=Vn(v):h[c][d]=Td(v),++d;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),h[c][d++]=g!==""?g:null;break}if(g==="EOD")break}}return o&&o.sheetRows&&(h=h.slice(0,o.sheetRows)),h}function r(i,o){return og(e(i,o),o)}function n(i,o){return ep(r(i,o),o)}var s=function(){var i=function(c,d,u,h,m){c.push(d),c.push(u+","+h),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,d,u,h){c.push(d+","+u),c.push(d==1?'"'+h.replace(/"/g,'""')+'"':h)};return function(c){var d=[],u=Ga(c["!ref"]),h,m=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var p=u.s.r;p<=u.e.r;++p){o(d,-1,0,"BOT");for(var v=u.s.c;v<=u.e.c;++v){var g=sa({r:p,c:v});if(h=m?(c[p]||[])[v]:c[g],!h){o(d,1,0,"");continue}switch(h.t){case"n":var b=h.w;!b&&h.v!=null&&(b=h.v),b==null?h.f&&!h.F?o(d,1,0,"="+h.f):o(d,1,0,""):o(d,0,b,"V");break;case"b":o(d,0,h.v?1:0,h.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(h.v)?h.v:'="'+h.v+'"');break;case"d":h.w||(h.w=Gc(h.z||ra[14],hi(Vn(h.v)))),o(d,0,h.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var y=`\r
`,C=d.join(y);return C}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),rH=function(){function e(h){return h.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(h){return h.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(h,m){for(var p=h.split(`
`),v=-1,g=-1,b=0,y=[];b!==p.length;++b){var C=p[b].trim().split(":");if(C[0]==="cell"){var w=ds(C[1]);if(y.length<=w.r)for(v=y.length;v<=w.r;++v)y[v]||(y[v]=[]);switch(v=w.r,g=w.c,C[2]){case"t":y[v][g]=e(C[3]);break;case"v":y[v][g]=+C[3];break;case"vtf":var k=C[C.length-1];case"vtc":switch(C[3]){case"nl":y[v][g]=!!+C[4];break;default:y[v][g]=+C[4];break}C[2]=="vtf"&&(y[v][g]=[y[v][g],k])}}}return m&&m.sheetRows&&(y=y.slice(0,m.sheetRows)),y}function n(h,m){return og(r(h,m),m)}function s(h,m){return ep(n(h,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(h){if(!h||!h["!ref"])return"";for(var m=[],p=[],v,g="",b=ml(h["!ref"]),y=Array.isArray(h),C=b.s.r;C<=b.e.r;++C)for(var w=b.s.c;w<=b.e.c;++w)if(g=sa({r:C,c:w}),v=y?(h[C]||[])[w]:h[g],!(!v||v.v==null||v.t==="z")){switch(p=["cell",g,"t"],v.t){case"s":case"str":p.push(t(v.v));break;case"n":v.f?(p[2]="vtf",p[3]="n",p[4]=v.v,p[5]=t(v.f)):(p[2]="v",p[3]=v.v);break;case"b":p[2]="vt"+(v.f?"f":"c"),p[3]="nl",p[4]=v.v?"1":"0",p[5]=t(v.f||(v.v?"TRUE":"FALSE"));break;case"d":var k=hi(Vn(v.v));p[2]="vtc",p[3]="nd",p[4]=""+k,p[5]=v.w||Gc(v.z||ra[14],k);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(b.e.c-b.s.c+1)+":r:"+(b.e.r-b.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function u(h){return[i,o,l,o,d(h),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:u}}(),T0=function(){function e(u,h,m,p,v){v.raw?h[m][p]=u:u===""||(u==="TRUE"?h[m][p]=!0:u==="FALSE"?h[m][p]=!1:isNaN(Td(u))?isNaN(A0(u).getDate())?h[m][p]=u:h[m][p]=Vn(u):h[m][p]=Td(u))}function t(u,h){var m=h||{},p=[];if(!u||u.length===0)return p;for(var v=u.split(/[\r\n]/),g=v.length-1;g>=0&&v[g].length===0;)--g;for(var b=10,y=0,C=0;C<=g;++C)y=v[C].indexOf(" "),y==-1?y=v[C].length:y++,b=Math.max(b,y);for(C=0;C<=g;++C){p[C]=[];var w=0;for(e(v[C].slice(0,b).trim(),p,C,w,m),w=1;w<=(v[C].length-b)/10+1;++w)e(v[C].slice(b+(w-1)*10,b+w*10).trim(),p,C,w,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(u){for(var h={},m=!1,p=0,v=0;p<u.length;++p)(v=u.charCodeAt(p))==34?m=!m:!m&&v in r&&(h[v]=(h[v]||0)+1);v=[];for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&v.push([h[p],p]);if(!v.length){h=n;for(p in h)Object.prototype.hasOwnProperty.call(h,p)&&v.push([h[p],p])}return v.sort(function(g,b){return g[0]-b[0]||n[g[1]]-n[b[1]]}),r[v.pop()[1]]||44}function i(u,h){var m=h||{},p="",v=m.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(p=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(p=u.charAt(4),u=u.slice(6)):p=s(u.slice(0,1024)):m&&m.FS?p=m.FS:p=s(u.slice(0,1024));var b=0,y=0,C=0,w=0,k=0,S=p.charCodeAt(0),D=!1,E=0,T=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var A=m.dateNF!=null?cxe(m.dateNF):null;function L(){var P=u.slice(w,k),O={};if(P.charAt(0)=='"'&&P.charAt(P.length-1)=='"'&&(P=P.slice(1,-1).replace(/""/g,'"')),P.length===0)O.t="z";else if(m.raw)O.t="s",O.v=P;else if(P.trim().length===0)O.t="s",O.v=P;else if(P.charCodeAt(0)==61)P.charCodeAt(1)==34&&P.charCodeAt(P.length-1)==34?(O.t="s",O.v=P.slice(2,-1).replace(/""/g,'"')):Lye(P)?(O.t="n",O.f=P.slice(1)):(O.t="s",O.v=P);else if(P=="TRUE")O.t="b",O.v=!0;else if(P=="FALSE")O.t="b",O.v=!1;else if(!isNaN(C=Td(P)))O.t="n",m.cellText!==!1&&(O.w=P),O.v=C;else if(!isNaN(A0(P).getDate())||A&&P.match(A)){O.z=m.dateNF||ra[14];var Z=0;A&&P.match(A)&&(P=dxe(P,m.dateNF,P.match(A)||[]),Z=1),m.cellDates?(O.t="d",O.v=Vn(P,Z)):(O.t="n",O.v=hi(Vn(P,Z))),m.cellText!==!1&&(O.w=Gc(O.z,O.v instanceof Date?hi(O.v):O.v)),m.cellNF||delete O.z}else O.t="s",O.v=P;if(O.t=="z"||(m.dense?(v[b]||(v[b]=[]),v[b][y]=O):v[sa({c:y,r:b})]=O),w=k+1,T=u.charCodeAt(w),g.e.c<y&&(g.e.c=y),g.e.r<b&&(g.e.r=b),E==S)++y;else if(y=0,++b,m.sheetRows&&m.sheetRows<=b)return!0}e:for(;k<u.length;++k)switch(E=u.charCodeAt(k)){case 34:T===34&&(D=!D);break;case S:case 10:case 13:if(!D&&L())break e;break}return k-w>0&&L(),v["!ref"]=ba(g),v}function o(u,h){return!(h&&h.PRN)||h.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,h):og(t(u,h),h)}function l(u,h){var m="",p=h.type=="string"?[0,0,0,0]:XT(u,h);switch(h.type){case"base64":m=ic(u);break;case"binary":m=u;break;case"buffer":h.codepage==65001?m=u.toString("utf8"):h.codepage&&typeof cy<"u"||(m=_a&&Buffer.isBuffer(u)?u.toString("binary"):Zm(u));break;case"array":m=wx(u);break;case"string":m=u;break;default:throw new Error("Unrecognized type "+h.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=Cn(m.slice(3)):h.type!="string"&&h.type!="buffer"&&h.codepage==65001?m=Cn(m):h.type=="binary"&&typeof cy<"u",m.slice(0,19)=="socialcalc:version:"?rH.to_sheet(h.type=="string"?m:Cn(m),h):o(m,h)}function c(u,h){return ep(l(u,h),h)}function d(u){for(var h=[],m=Ga(u["!ref"]),p,v=Array.isArray(u),g=m.s.r;g<=m.e.r;++g){for(var b=[],y=m.s.c;y<=m.e.c;++y){var C=sa({r:g,c:y});if(p=v?(u[g]||[])[y]:u[C],!p||p.v==null){b.push("          ");continue}for(var w=(p.w||(of(p),p.w)||"").slice(0,10);w.length<10;)w+=" ";b.push(w+(y===0?" ":""))}h.push(b.join(""))}return h.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}();function Sge(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=eH.to_workbook(e,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return T0.to_workbook(e,t)}}var dx=function(){function e(M,V,H){if(M){Gi(M,M.l||0);for(var ee=H.Enum||Y;M.l<M.length;){var re=M.read_shift(2),ae=ee[re]||ee[65535],ne=M.read_shift(2),ie=M.l+ne,G=ae.f&&ae.f(M,ne,H);if(M.l=ie,V(G,ae,re))return}}}function t(M,V){switch(V.type){case"base64":return r(Wl(ic(M)),V);case"binary":return r(Wl(M),V);case"buffer":case"array":return r(M,V)}throw"Unsupported type "+V.type}function r(M,V){if(!M)return M;var H=V||{},ee=H.dense?[]:{},re="Sheet1",ae="",ne=0,ie={},G=[],de=[],X={s:{r:0,c:0},e:{r:0,c:0}},le=H.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)H.Enum=Y,e(M,function(ye,Ne,Ue){switch(Ue){case 0:H.vers=ye,ye>=4096&&(H.qpro=!0);break;case 6:X=ye;break;case 204:ye&&(ae=ye);break;case 222:ae=ye;break;case 15:case 51:H.qpro||(ye[1].v=ye[1].v.slice(1));case 13:case 14:case 16:Ue==14&&(ye[2]&112)==112&&(ye[2]&15)>1&&(ye[2]&15)<15&&(ye[1].z=H.dateNF||ra[14],H.cellDates&&(ye[1].t="d",ye[1].v=yS(ye[1].v))),H.qpro&&ye[3]>ne&&(ee["!ref"]=ba(X),ie[re]=ee,G.push(re),ee=H.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},ne=ye[3],re=ae||"Sheet"+(ne+1),ae="");var Qe=H.dense?(ee[ye[0].r]||[])[ye[0].c]:ee[sa(ye[0])];if(Qe){Qe.t=ye[1].t,Qe.v=ye[1].v,ye[1].z!=null&&(Qe.z=ye[1].z),ye[1].f!=null&&(Qe.f=ye[1].f);break}H.dense?(ee[ye[0].r]||(ee[ye[0].r]=[]),ee[ye[0].r][ye[0].c]=ye[1]):ee[sa(ye[0])]=ye[1];break}},H);else if(M[2]==26||M[2]==14)H.Enum=oe,M[2]==14&&(H.qpro=!0,M.l=0),e(M,function(ye,Ne,Ue){switch(Ue){case 204:re=ye;break;case 22:ye[1].v=ye[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ye[3]>ne&&(ee["!ref"]=ba(X),ie[re]=ee,G.push(re),ee=H.dense?[]:{},X={s:{r:0,c:0},e:{r:0,c:0}},ne=ye[3],re="Sheet"+(ne+1)),le>0&&ye[0].r>=le)break;H.dense?(ee[ye[0].r]||(ee[ye[0].r]=[]),ee[ye[0].r][ye[0].c]=ye[1]):ee[sa(ye[0])]=ye[1],X.e.c<ye[0].c&&(X.e.c=ye[0].c),X.e.r<ye[0].r&&(X.e.r=ye[0].r);break;case 27:ye[14e3]&&(de[ye[14e3][0]]=ye[14e3][1]);break;case 1537:de[ye[0]]=ye[1],ye[0]==ne&&(re=ye[1]);break}},H);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(ee["!ref"]=ba(X),ie[ae||re]=ee,G.push(ae||re),!de.length)return{SheetNames:G,Sheets:ie};for(var Se={},ue=[],se=0;se<de.length;++se)ie[G[se]]?(ue.push(de[se]||G[se]),Se[de[se]]=ie[de[se]]||ie[G[se]]):(ue.push(de[se]),Se[de[se]]={"!ref":"A1"});return{SheetNames:ue,Sheets:Se}}function n(M,V){var H=V||{};if(+H.codepage>=0&&Ed(+H.codepage),H.type=="string")throw new Error("Cannot write WK1 to JS string");var ee=hl(),re=Ga(M["!ref"]),ae=Array.isArray(M),ne=[];gr(ee,0,i(1030)),gr(ee,6,c(re));for(var ie=Math.min(re.e.r,8191),G=re.s.r;G<=ie;++G)for(var de=$s(G),X=re.s.c;X<=re.e.c;++X){G===re.s.r&&(ne[X]=cs(X));var le=ne[X]+de,Se=ae?(M[G]||[])[X]:M[le];if(!(!Se||Se.t=="z"))if(Se.t=="n")(Se.v|0)==Se.v&&Se.v>=-32768&&Se.v<=32767?gr(ee,13,p(G,X,Se.v)):gr(ee,14,g(G,X,Se.v));else{var ue=of(Se);gr(ee,15,h(G,X,ue.slice(0,239)))}}return gr(ee,1),ee.end()}function s(M,V){var H=V||{};if(+H.codepage>=0&&Ed(+H.codepage),H.type=="string")throw new Error("Cannot write WK3 to JS string");var ee=hl();gr(ee,0,o(M));for(var re=0,ae=0;re<M.SheetNames.length;++re)(M.Sheets[M.SheetNames[re]]||{})["!ref"]&&gr(ee,27,J(M.SheetNames[re],ae++));var ne=0;for(re=0;re<M.SheetNames.length;++re){var ie=M.Sheets[M.SheetNames[re]];if(!(!ie||!ie["!ref"])){for(var G=Ga(ie["!ref"]),de=Array.isArray(ie),X=[],le=Math.min(G.e.r,8191),Se=G.s.r;Se<=le;++Se)for(var ue=$s(Se),se=G.s.c;se<=G.e.c;++se){Se===G.s.r&&(X[se]=cs(se));var ye=X[se]+ue,Ne=de?(ie[Se]||[])[se]:ie[ye];if(!(!Ne||Ne.t=="z"))if(Ne.t=="n")gr(ee,23,L(Se,se,ne,Ne.v));else{var Ue=of(Ne);gr(ee,22,E(Se,se,ne,Ue.slice(0,239)))}}++ne}}return gr(ee,1),ee.end()}function i(M){var V=qt(2);return V.write_shift(2,M),V}function o(M){var V=qt(26);V.write_shift(2,4096),V.write_shift(2,4),V.write_shift(4,0);for(var H=0,ee=0,re=0,ae=0;ae<M.SheetNames.length;++ae){var ne=M.SheetNames[ae],ie=M.Sheets[ne];if(!(!ie||!ie["!ref"])){++re;var G=ml(ie["!ref"]);H<G.e.r&&(H=G.e.r),ee<G.e.c&&(ee=G.e.c)}}return H>8191&&(H=8191),V.write_shift(2,H),V.write_shift(1,re),V.write_shift(1,ee),V.write_shift(2,0),V.write_shift(2,0),V.write_shift(1,1),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(4,0),V}function l(M,V,H){var ee={s:{c:0,r:0},e:{c:0,r:0}};return V==8&&H.qpro?(ee.s.c=M.read_shift(1),M.l++,ee.s.r=M.read_shift(2),ee.e.c=M.read_shift(1),M.l++,ee.e.r=M.read_shift(2),ee):(ee.s.c=M.read_shift(2),ee.s.r=M.read_shift(2),V==12&&H.qpro&&(M.l+=2),ee.e.c=M.read_shift(2),ee.e.r=M.read_shift(2),V==12&&H.qpro&&(M.l+=2),ee.s.c==65535&&(ee.s.c=ee.e.c=ee.s.r=ee.e.r=0),ee)}function c(M){var V=qt(8);return V.write_shift(2,M.s.c),V.write_shift(2,M.s.r),V.write_shift(2,M.e.c),V.write_shift(2,M.e.r),V}function d(M,V,H){var ee=[{c:0,r:0},{t:"n",v:0},0,0];return H.qpro&&H.vers!=20768?(ee[0].c=M.read_shift(1),ee[3]=M.read_shift(1),ee[0].r=M.read_shift(2),M.l+=2):(ee[2]=M.read_shift(1),ee[0].c=M.read_shift(2),ee[0].r=M.read_shift(2)),ee}function u(M,V,H){var ee=M.l+V,re=d(M,V,H);if(re[1].t="s",H.vers==20768){M.l++;var ae=M.read_shift(1);return re[1].v=M.read_shift(ae,"utf8"),re}return H.qpro&&M.l++,re[1].v=M.read_shift(ee-M.l,"cstr"),re}function h(M,V,H){var ee=qt(7+H.length);ee.write_shift(1,255),ee.write_shift(2,V),ee.write_shift(2,M),ee.write_shift(1,39);for(var re=0;re<ee.length;++re){var ae=H.charCodeAt(re);ee.write_shift(1,ae>=128?95:ae)}return ee.write_shift(1,0),ee}function m(M,V,H){var ee=d(M,V,H);return ee[1].v=M.read_shift(2,"i"),ee}function p(M,V,H){var ee=qt(7);return ee.write_shift(1,255),ee.write_shift(2,V),ee.write_shift(2,M),ee.write_shift(2,H,"i"),ee}function v(M,V,H){var ee=d(M,V,H);return ee[1].v=M.read_shift(8,"f"),ee}function g(M,V,H){var ee=qt(13);return ee.write_shift(1,255),ee.write_shift(2,V),ee.write_shift(2,M),ee.write_shift(8,H,"f"),ee}function b(M,V,H){var ee=M.l+V,re=d(M,V,H);if(re[1].v=M.read_shift(8,"f"),H.qpro)M.l=ee;else{var ae=M.read_shift(2);k(M.slice(M.l,M.l+ae),re),M.l+=ae}return re}function y(M,V,H){var ee=V&32768;return V&=-32769,V=(ee?M:0)+(V>=8192?V-16384:V),(ee?"":"$")+(H?cs(V):$s(V))}var C={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(M,V){Gi(M,0);for(var H=[],ee=0,re="",ae="",ne="",ie="";M.l<M.length;){var G=M[M.l++];switch(G){case 0:H.push(M.read_shift(8,"f"));break;case 1:ae=y(V[0].c,M.read_shift(2),!0),re=y(V[0].r,M.read_shift(2),!1),H.push(ae+re);break;case 2:{var de=y(V[0].c,M.read_shift(2),!0),X=y(V[0].r,M.read_shift(2),!1);ae=y(V[0].c,M.read_shift(2),!0),re=y(V[0].r,M.read_shift(2),!1),H.push(de+X+":"+ae+re)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:H.push("("+H.pop()+")");break;case 5:H.push(M.read_shift(2));break;case 6:{for(var le="";G=M[M.l++];)le+=String.fromCharCode(G);H.push('"'+le.replace(/"/g,'""')+'"')}break;case 8:H.push("-"+H.pop());break;case 23:H.push("+"+H.pop());break;case 22:H.push("NOT("+H.pop()+")");break;case 20:case 21:ie=H.pop(),ne=H.pop(),H.push(["AND","OR"][G-20]+"("+ne+","+ie+")");break;default:if(G<32&&w[G])ie=H.pop(),ne=H.pop(),H.push(ne+w[G]+ie);else if(C[G]){if(ee=C[G][1],ee==69&&(ee=M[M.l++]),ee>H.length){console.error("WK1 bad formula parse 0x"+G.toString(16)+":|"+H.join("|")+"|");return}var Se=H.slice(-ee);H.length-=ee,H.push(C[G][0]+"("+Se.join(",")+")")}else return G<=7?console.error("WK1 invalid opcode "+G.toString(16)):G<=24?console.error("WK1 unsupported op "+G.toString(16)):G<=30?console.error("WK1 invalid opcode "+G.toString(16)):G<=115?console.error("WK1 unsupported function opcode "+G.toString(16)):console.error("WK1 unrecognized opcode "+G.toString(16))}}H.length==1?V[1].f=""+H[0]:console.error("WK1 bad formula parse |"+H.join("|")+"|")}function S(M){var V=[{c:0,r:0},{t:"n",v:0},0];return V[0].r=M.read_shift(2),V[3]=M[M.l++],V[0].c=M[M.l++],V}function D(M,V){var H=S(M);return H[1].t="s",H[1].v=M.read_shift(V-4,"cstr"),H}function E(M,V,H,ee){var re=qt(6+ee.length);re.write_shift(2,M),re.write_shift(1,H),re.write_shift(1,V),re.write_shift(1,39);for(var ae=0;ae<ee.length;++ae){var ne=ee.charCodeAt(ae);re.write_shift(1,ne>=128?95:ne)}return re.write_shift(1,0),re}function T(M,V){var H=S(M);H[1].v=M.read_shift(2);var ee=H[1].v>>1;if(H[1].v&1)switch(ee&7){case 0:ee=(ee>>3)*5e3;break;case 1:ee=(ee>>3)*500;break;case 2:ee=(ee>>3)/20;break;case 3:ee=(ee>>3)/200;break;case 4:ee=(ee>>3)/2e3;break;case 5:ee=(ee>>3)/2e4;break;case 6:ee=(ee>>3)/16;break;case 7:ee=(ee>>3)/64;break}return H[1].v=ee,H}function A(M,V){var H=S(M),ee=M.read_shift(4),re=M.read_shift(4),ae=M.read_shift(2);if(ae==65535)return ee===0&&re===3221225472?(H[1].t="e",H[1].v=15):ee===0&&re===3489660928?(H[1].t="e",H[1].v=42):H[1].v=0,H;var ne=ae&32768;return ae=(ae&32767)-16446,H[1].v=(1-ne*2)*(re*Math.pow(2,ae+32)+ee*Math.pow(2,ae)),H}function L(M,V,H,ee){var re=qt(14);if(re.write_shift(2,M),re.write_shift(1,H),re.write_shift(1,V),ee==0)return re.write_shift(4,0),re.write_shift(4,0),re.write_shift(2,65535),re;var ae=0,ne=0,ie=0,G=0;return ee<0&&(ae=1,ee=-ee),ne=Math.log2(ee)|0,ee/=Math.pow(2,ne-31),G=ee>>>0,(G&2147483648)==0&&(ee/=2,++ne,G=ee>>>0),ee-=G,G|=2147483648,G>>>=0,ee*=Math.pow(2,32),ie=ee>>>0,re.write_shift(4,ie),re.write_shift(4,G),ne+=16383+(ae?32768:0),re.write_shift(2,ne),re}function P(M,V){var H=A(M);return M.l+=V-14,H}function O(M,V){var H=S(M),ee=M.read_shift(4);return H[1].v=ee>>6,H}function Z(M,V){var H=S(M),ee=M.read_shift(8,"f");return H[1].v=ee,H}function z(M,V){var H=Z(M);return M.l+=V-10,H}function K(M,V){return M[M.l+V-1]==0?M.read_shift(V,"cstr"):""}function B(M,V){var H=M[M.l++];H>V-1&&(H=V-1);for(var ee="";ee.length<H;)ee+=String.fromCharCode(M[M.l++]);return ee}function Q(M,V,H){if(!(!H.qpro||V<21)){var ee=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var re=M.read_shift(V-21,"cstr");return[ee,re]}}function U(M,V){for(var H={},ee=M.l+V;M.l<ee;){var re=M.read_shift(2);if(re==14e3){for(H[re]=[0,""],H[re][0]=M.read_shift(2);M[M.l];)H[re][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return H}function J(M,V){var H=qt(5+M.length);H.write_shift(2,14e3),H.write_shift(2,V);for(var ee=0;ee<M.length;++ee){var re=M.charCodeAt(ee);H[H.l++]=re>127?95:re}return H[H.l++]=0,H}var Y={0:{n:"BOF",f:Zs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:v},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:b},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:K},222:{n:"SHEETNAMELP",f:B},65535:{n:""}},oe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:D},23:{n:"NUMBER17",f:A},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:P},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:U},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:O},38:{n:"??"},39:{n:"NUMBER27",f:Z},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:K},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Q},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}}();function Cge(e){var t={},r=e.match(To),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=oa(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=fT[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var kge=function(){var e=hy("t"),t=hy("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Wa(o[1])},c=i.match(t);return c&&(l.s=Cge(c[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}}(),_ge=function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),Ege=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,Dge=/<(?:\w+:)?r>/,Age=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function FT(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Wa(Cn(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Cn(e),r&&(n.h=wT(n.t))):e.match(Dge)&&(n.r=Cn(e),n.t=Wa(Cn((e.replace(Age,"").match(Ege)||[]).join("").replace(To,""))),r&&(n.h=_ge(kge(n.r)))),n):{t:""}}var Tge=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,Ige=/<(?:\w+:)?(?:si|sstItem)>/g,Pge=/<\/(?:\w+:)?(?:si|sstItem)>/;function Oge(e,t){var r=[],n="";if(!e)return r;var s=e.match(Tge);if(s){n=s[2].replace(Ige,"").split(Pge);for(var i=0;i!=n.length;++i){var o=FT(n[i].trim(),t);o!=null&&(r[r.length]=o)}s=oa(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var Mge=/^\s|\s$|[\t\n\r]/;function aH(e,t){if(!t.bookSST)return"";var r=[qs];r[r.length]=vr("sst",null,{xmlns:Lx[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(Mge)&&(i+=' xml:space="preserve"'),i+=">"+bn(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function Rge(e){return[e.read_shift(4),e.read_shift(4)]}function Fge(e,t){var r=[],n=!1;return xf(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function Lge(e,t){return t||(t=qt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var Bge=Kxe;function Uge(e){var t=hl();sr(t,159,Lge(e));for(var r=0;r<e.length;++r)sr(t,19,Bge(e[r]));return sr(t,160),t.end()}function nH(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Gh(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function $ge(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Gh(e,4),t.U=Gh(e,4),t.W=Gh(e,4),t}function Vge(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function qge(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(Vge(e));return t}function zge(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Hge(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Gh(e,4),t.U=Gh(e,4),t.W=Gh(e,4),t}function Wge(e){var t=Hge(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function sH(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function iH(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function Gge(e){var t=Gh(e);switch(t.Minor){case 2:return[t.Minor,Yge(e)];case 3:return[t.Minor,Kge()];case 4:return[t.Minor,Xge(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Yge(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=sH(e,r),s=iH(e,e.length-e.l);return{t:"Std",h:n,v:s}}function Kge(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Xge(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(To,function(i){var o=oa(i);switch(Qu(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function Qge(e,t){var r={},n=r.EncryptionVersionInfo=Gh(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=sH(e,s),t-=s,r.EncryptionVerifier=iH(e,t),r}function Jge(e){var t={},r=t.EncryptionVersionInfo=Gh(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function LT(e){var t=0,r,n=nH(e),s=n.length+1,i,o,l,c,d;for(r=Lm(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var oH=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],c=104,d=o.length-1;d>=0;--d)for(var u=o[d],h=0;h!=7;++h)u&64&&(l^=r[c]),u*=2,--c;return l};return function(o){for(var l=nH(o),c=i(l),d=l.length,u=Lm(16),h=0;h!=16;++h)u[h]=0;var m,p,v;for((d&1)===1&&(m=c>>8,u[d]=s(e[0],m),--d,m=c&255,p=l[l.length-1],u[d]=s(p,m));d>0;)--d,m=c>>8,u[d]=s(l[d],m),--d,m=c&255,u[d]=s(l[d],m);for(d=15,v=15-l.length;v>0;)m=c>>8,u[d]=s(e[v],m),--d,--v,m=c&255,u[d]=s(l[d],m),--d,--v;return u}}(),Zge=function(e,t,r,n,s){s||(s=t),n||(n=oH(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},ebe=function(e){var t=0,r=oH(e);return function(n){var s=Zge("",n,t,r);return t=s[1],s[0]}};function tbe(e,t,r,n){var s={key:Zs(e),verificationBytes:Zs(e)};return r.password&&(s.verifier=LT(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=ebe(r.password)),s}function rbe(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Jge(e):n.Data=Qge(e,t),n}function abe(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?rbe(e,t-2,n):tbe(e,r.biff>=8?t:t-2,r,n),n}var lH=function(){function e(s,i){switch(i.type){case"base64":return t(ic(s),i);case"binary":return t(s,i);case"buffer":return t(_a&&Buffer.isBuffer(s)?s.toString("binary"):Zm(s),i);case"array":return t(wx(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,h){Array.isArray(l)&&(l[h]=[]);for(var m=/\\\w+\b/g,p=0,v,g=-1;v=m.exec(u);){switch(v[0]){case"\\cell":var b=u.slice(p,m.lastIndex-v[0].length);if(b[0]==" "&&(b=b.slice(1)),++g,b.length){var y={v:b,t:"s"};Array.isArray(l)?l[h][g]=y:l[sa({r:h,c:g})]=y}break}p=m.lastIndex}g>d.e.c&&(d.e.c=g)}),l["!ref"]=ba(d),l}function r(s,i){return ep(e(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=Ga(s["!ref"]),l,c=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var h=sa({r:d,c:u});l=c?(s[d]||[])[u]:s[h],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(of(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function nbe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function xy(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function sbe(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),i=Math.min(t,r,n),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,d=s+i;switch(c=o/(d>1?2-d:d),s){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,d/2]}function ibe(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function Rw(e,t){if(t===0)return e;var r=sbe(nbe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),xy(ibe(r))}var cH=6,obe=15,lbe=1,bo=cH;function vy(e){return Math.floor((e+Math.round(128/bo)/256)*bo)}function gy(e){return Math.floor((e-5)/bo*100+.5)/100}function Fw(e){return Math.round((e*bo+5)/bo*256)/256}function eE(e){return Fw(gy(vy(e)))}function BT(e){var t=Math.abs(e-eE(e)),r=bo;if(t>.005)for(bo=lbe;bo<obe;++bo)Math.abs(e-eE(e))<=t&&(t=Math.abs(e-eE(e)),r=bo);bo=r}function Bm(e){e.width?(e.wpx=vy(e.width),e.wch=gy(e.wpx),e.MDW=bo):e.wpx?(e.wch=gy(e.wpx),e.width=Fw(e.wch),e.MDW=bo):typeof e.wch=="number"&&(e.width=Fw(e.wch),e.wpx=vy(e.width),e.MDW=bo),e.customWidth&&delete e.customWidth}var cbe=96,dH=cbe;function by(e){return e*96/dH}function I0(e){return e*dH/96}var dbe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function ube(e,t,r,n){t.Borders=[];var s={},i=!1;(e[0].match(To)||[]).forEach(function(o){var l=oa(o);switch(Qu(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=Un(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=Un(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function hbe(e,t,r,n){t.Fills=[];var s={},i=!1;(e[0].match(To)||[]).forEach(function(o){var l=oa(o);switch(Qu(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function fbe(e,t,r,n){t.Fonts=[];var s={},i=!1;(e[0].match(To)||[]).forEach(function(o){var l=oa(o);switch(Qu(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Cn(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?Un(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?Un(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?Un(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?Un(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?Un(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?Un(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?Un(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=fT[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=Un(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=lx[s.color.index];s.color.index==81&&(c=lx[1]),c||(c=lx[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Rw(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function mbe(e,t,r){t.NumberFmt=[];for(var n=Ss(ra),s=0;s<n.length;++s)t.NumberFmt[n[s]]=ra[n[s]];var i=e[0].match(To);if(i)for(s=0;s<i.length;++s){var o=oa(i[s]);switch(Qu(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Wa(Cn(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Wh(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function pbe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=vr("numFmt",null,{numFmtId:n,formatCode:bn(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=vr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Vj=["numFmtId","fillId","fontId","borderId","xfId"],qj=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function xbe(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(To)||[]).forEach(function(i){var o=oa(i),l=0;switch(Qu(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<Vj.length;++l)n[Vj[l]]&&(n[Vj[l]]=parseInt(n[Vj[l]],10));for(l=0;l<qj.length;++l)n[qj[l]]&&(n[qj[l]]=Un(n[qj[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Un(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function vbe(e){var t=[];return t[t.length]=vr("cellXfs",null),e.forEach(function(r){t[t.length]=vr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=vr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var gbe=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var h;return(h=l.match(t))&&mbe(h,u,d),(h=l.match(s))&&fbe(h,u,c,d),(h=l.match(n))&&hbe(h,u,c,d),(h=l.match(i))&&ube(h,u,c,d),(h=l.match(r))&&xbe(h,u,d),u}}();function uH(e,t){var r=[qs,vr("styleSheet",null,{xmlns:Lx[0],"xmlns:vt":ci.vt})],n;return e.SSF&&(n=pbe(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=vbe(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function bbe(e,t){var r=e.read_shift(2),n=Eo(e);return[r,n]}function ybe(e,t,r){r||(r=qt(6+4*t.length)),r.write_shift(2,e),_i(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function jbe(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=rve(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=tve(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=Eo(e),n}function Nbe(e,t){t||(t=qt(25+4*32)),t.write_shift(2,e.sz*20),ave(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Pw(e.color,t);var n=0;return n=2,t.write_shift(1,n),_i(e.name,t),t.length>t.l?t.slice(0,t.l):t}var wbe=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],tE,Sbe=Do;function P6(e,t){t||(t=qt(4*3+8*7+16*1)),tE||(tE=gS(wbe));var r=tE[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(Pw({auto:1},t),Pw({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function Cbe(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function hH(e,t,r){r||(r=qt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function fb(e,t){return t||(t=qt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var kbe=Do;function _be(e,t){return t||(t=qt(51)),t.write_shift(1,0),fb(null,t),fb(null,t),fb(null,t),fb(null,t),fb(null,t),t.length>t.l?t.slice(0,t.l):t}function Ebe(e,t){return t||(t=qt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),Iw(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function Dbe(e,t,r){var n=qt(2052);return n.write_shift(4,e),Iw(t,n),Iw(r,n),n.length>n.l?n.slice(0,n.l):n}function Abe(e,t,r){var n={};n.NumberFmt=[];for(var s in ra)n.NumberFmt[s]=ra[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return xf(e,function(c,d,u){switch(u){case 44:n.NumberFmt[c[0]]=c[1],Wh(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=Rw(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(u),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),n}function Tbe(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(sr(e,615,Id(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&sr(e,44,ybe(s,t[s]))}),sr(e,616))}}function Ibe(e){var t=1;sr(e,611,Id(t)),sr(e,43,Nbe({sz:12,color:{theme:1},name:"Calibri",family:2})),sr(e,612)}function Pbe(e){var t=2;sr(e,603,Id(t)),sr(e,45,P6({patternType:"none"})),sr(e,45,P6({patternType:"gray125"})),sr(e,604)}function Obe(e){var t=1;sr(e,613,Id(t)),sr(e,46,_be()),sr(e,614)}function Mbe(e){var t=1;sr(e,626,Id(t)),sr(e,47,hH({numFmtId:0},65535)),sr(e,627)}function Rbe(e,t){sr(e,617,Id(t.length)),t.forEach(function(r){sr(e,47,hH(r,0))}),sr(e,618)}function Fbe(e){var t=1;sr(e,619,Id(t)),sr(e,48,Ebe({xfId:0,name:"Normal"})),sr(e,620)}function Lbe(e){var t=0;sr(e,505,Id(t)),sr(e,506)}function Bbe(e){var t=0;sr(e,508,Dbe(t,"TableStyleMedium9","PivotStyleMedium4")),sr(e,509)}function Ube(e,t){var r=hl();return sr(r,278),Tbe(r,e.SSF),Ibe(r),Pbe(r),Obe(r),Mbe(r),Rbe(r,t.cellXfs),Fbe(r),Lbe(r),Bbe(r),sr(r,279),r.end()}var $be=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function Vbe(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(To)||[]).forEach(function(s){var i=oa(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[$be.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function qbe(){}function zbe(){}var Hbe=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Wbe=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Gbe=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Ybe(e,t,r){t.themeElements={};var n;[["clrScheme",Hbe,Vbe],["fontScheme",Wbe,qbe],["fmtScheme",Gbe,zbe]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var Kbe=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function fH(e,t){(!e||e.length===0)&&(e=UT());var r,n={};if(!(r=e.match(Kbe)))throw new Error("themeElements not found in theme");return Ybe(r[0],n,t),n.raw=e,n}function UT(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[qs];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>',r[r.length]='<a:font script="Hang" typeface="맑은 고딕"/>',r[r.length]='<a:font script="Hans" typeface="宋体"/>',r[r.length]='<a:font script="Hant" typeface="新細明體"/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Xbe(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=sz(i,{type:"array"})}catch{return}var l=Gl(o,"theme/theme/theme1.xml",!0);if(l)return fH(l,r)}}function Qbe(e){return e.read_shift(4)}function Jbe(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Zbe(e,4);break;case 2:t.xclrValue=Wz(e);break;case 3:t.xclrValue=Qbe(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Zbe(e,t){return Do(e,t)}function eye(e,t){return Do(e,t)}function tye(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Jbe(e);break;case 6:n[1]=eye(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function rye(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(tye(e,r-e.l));return{ixfe:n,ext:i}}function aye(e,t){t.forEach(function(r){r[0]})}function nye(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:Eo(e)}}function sye(e){var t=qt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),_i(e.name,t),t.slice(0,t.l)}function iye(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function oye(e){var t=qt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function lye(e,t){var r=qt(8+2*t.length);return r.write_shift(4,e),_i(t,r),r.slice(0,r.l)}function cye(e){return e.l+=4,e.read_shift(4)!=0}function dye(e,t){var r=qt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function uye(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return xf(e,function(c,d,u){switch(u){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(h){l==1?n.Cell.push({type:n.Types[h[0]-1].name,index:h[1]}):l==0&&n.Value.push({type:n.Types[h[0]-1].name,index:h[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(u),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),n}function hye(){var e=hl();return sr(e,332),sr(e,334,Id(1)),sr(e,335,sye({name:"XLDAPR",version:12e4,flags:3496657072})),sr(e,336),sr(e,339,lye(1,"XLDAPR")),sr(e,52),sr(e,35,Id(514)),sr(e,4096,Id(0)),sr(e,4097,Oc(1)),sr(e,36),sr(e,53),sr(e,340),sr(e,337,dye(1)),sr(e,51,oye([[1,0]])),sr(e,338),sr(e,333),e.end()}function fye(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,i=2,o;return e.replace(To,function(l){var c=oa(l);switch(Qu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<n.Types.length;++d)n.Types[d].name==c.name&&(o=n.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):i==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function mH(){var e=[qs];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function mye(e){var t=[];if(!e)return t;var r=1;return(e.match(To)||[]).forEach(function(n){var s=oa(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function pye(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=sa(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function xye(e,t,r){var n=[];return xf(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function vye(e,t,r,n){if(!e)return e;var s=n||{},i=!1;xf(e,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function gye(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var Zv=1024;function pH(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[vr("xml",null,{"xmlns:v":Vl.v,"xmlns:o":Vl.o,"xmlns:x":Vl.x,"xmlns:mv":Vl.mv}).replace(/\/>/,">"),vr("o:shapelayout",vr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),vr("v:shapetype",[vr("v:stroke",null,{joinstyle:"miter"}),vr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];Zv<e*1e3;)Zv+=1e3;return t.forEach(function(i){var o=ds(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?vr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=vr("v:fill",c,l),u={on:"t",obscured:"t"};++Zv,s=s.concat(["<v:shape"+fy({id:"_x0000_s"+Zv,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,vr("v:shadow",null,u),vr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Xi("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Xi("x:AutoFill","False"),Xi("x:Row",String(o.r)),Xi("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function O6(e,t,r,n){var s=Array.isArray(e),i;t.forEach(function(o){var l=ds(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=Ga(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=ba(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:o.author,t:o.t,r:o.r,T:r};o.h&&(u.h=o.h);for(var h=i.c.length-1;h>=0;--h){if(!r&&i.c[h].T)return;r&&!i.c[h].T&&i.c.splice(h,1)}if(r&&n){for(h=0;h<n.length;++h)if(u.a==n[h].id){u.a=n[h].name||u.a;break}}i.c.push(u)})}function bye(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=oa(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=ds(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var h=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!h&&!!h[1]&&FT(h[1])||{r:"",t:"",h:""};d.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),d.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=m.h),n.push(d)}}}}),n}function xH(e){var t=[qs,vr("comments",null,{xmlns:Lx[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var i=bn(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(bn(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(Xi("t",bn(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(Xi("t",bn(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function yye(e,t){var r=[],n=!1,s={},i=0;return e.replace(To,function(l,c){var d=oa(l);switch(Qu(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function jye(e,t,r){var n=[qs,vr("ThreadedComments",null,{xmlns:ci.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(vr("threadedComment",Xi("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function Nye(e,t){var r=[],n=!1;return e.replace(To,function(i){var o=oa(i);switch(Qu(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function wye(e){var t=[qs,vr("personList",null,{xmlns:ci.TCMNT,"xmlns:x":Lx[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(vr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function Sye(e){var t={};t.iauthor=e.read_shift(4);var r=Vx(e);return t.rfx=r.s,t.ref=sa(r.s),e.l+=16,t}function Cye(e,t){return t==null&&(t=qt(36)),t.write_shift(4,e[1].iauthor),lg(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var kye=Eo;function _ye(e){return _i(e.slice(0,54))}function Eye(e,t){var r=[],n=[],s={},i=!1;return xf(e,function(l,c,d){switch(d){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function Dye(e){var t=hl(),r=[];return sr(t,628),sr(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),sr(t,632,_ye(s.a)))})}),sr(t,631),sr(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:ds(n[0]),e:ds(n[0])};sr(t,635,Cye([i,s])),s.t&&s.t.length>0&&sr(t,637,Qxe(s)),sr(t,636),delete s.iauthor})}),sr(t,634),sr(t,629),t.end()}var Aye="application/vnd.ms-office.vbaProject";function Tye(e){var t=Hr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Hr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),Hr.write(t)}function Iye(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Hr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var vH=["xlsb","xlsm","xlam","biff8","xla"];function Pye(){return{"!type":"dialog"}}function Oye(){return{"!type":"dialog"}}function Mye(){return{"!type":"macro"}}function Rye(){return{"!type":"macro"}}var i0=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,c?d+=t.r:--d,s+(l?"":"$")+cs(u)+(c?"":"$")+$s(d)}return function(s,i){return t=i,s.replace(e,r)}}(),$T=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,VT=function(){return function(t,r){return t.replace($T,function(n,s,i,o,l,c){var d=ET(o)-(i?0:r.c),u=_T(c)-(l?0:r.r),h=u==0?"":l?u+1:"["+u+"]",m=d==0?"":i?d+1:"["+d+"]";return s+"R"+h+"C"+m})}}();function gH(e,t){return e.replace($T,function(r,n,s,i,o,l){return n+(s=="$"?s+i:cs(ET(i)+t.c))+(o=="$"?o+l:$s(_T(l)+t.r))})}function Fye(e,t,r){var n=ml(t),s=n.s,i=ds(r),o={r:i.r-s.r,c:i.c-s.c};return gH(e,o)}function Lye(e){return e.length!=1}function M6(e){return e.replace(/_xlfn\./g,"")}function Xs(e){e.l+=1}function Um(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function bH(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return yH(e);r.biff==12&&(n=4)}var s=e.read_shift(n),i=e.read_shift(n),o=Um(e),l=Um(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function yH(e){var t=Um(e),r=Um(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function Bye(e,t,r){if(r.biff<8)return yH(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=Um(e),o=Um(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function jH(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Uye(e);var n=e.read_shift(r&&r.biff==12?4:2),s=Um(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function Uye(e){var t=Um(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function $ye(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function Vye(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return qye(e);var s=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function qye(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function zye(e,t,r){var n=(e[e.l++]&96)>>5,s=bH(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function Hye(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=bH(e,i,r);return[n,s,o]}function Wye(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Gye(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,s]}function Yye(e,t,r){var n=(e[e.l++]&96)>>5,s=Bye(e,t-1,r);return[n,s]}function Kye(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function R6(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Xye(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Qye(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Jye(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Zye(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function e1e(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function NH(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function t1e(e){return e.read_shift(2),NH(e)}function r1e(e){return e.read_shift(2),NH(e)}function a1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=jH(e,0,r);return[n,s]}function n1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=Vye(e,0,r);return[n,s]}function s1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=jH(e,0,r);return[n,s,i]}function i1e(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[cje[s],CH[s],n]}function o1e(e,t,r){var n=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:l1e(e);return[s,(i[0]===0?CH:lje)[i[1]]]}function l1e(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function c1e(e,t,r){e.l+=r&&r.biff==2?3:4}function d1e(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function u1e(e){return e.l++,vf[e.read_shift(1)]}function h1e(e){return e.l++,e.read_shift(2)}function f1e(e){return e.l++,e.read_shift(1)!==0}function m1e(e){return e.l++,No(e)}function p1e(e,t,r){return e.l++,r1(e,t-1,r)}function x1e(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ms(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=vf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=No(e);break;case 2:r[1]=qx(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function v1e(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?Vx:jS)(e));return s}function g1e(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=x1e(e,r.biff);return o}function b1e(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function y1e(e,t,r){if(r.biff==5)return j1e(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[n,s,i]}function j1e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function N1e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function w1e(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function S1e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function C1e(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,s]}var k1e=Do,_1e=Do,E1e=Do;function n1(e,t,r){return e.l+=2,[$ye(e)]}function qT(e){return e.l+=6,[]}var D1e=n1,A1e=qT,T1e=qT,I1e=n1;function wH(e){return e.l+=2,[Zs(e),e.read_shift(2)&1]}var P1e=n1,O1e=wH,M1e=qT,R1e=n1,F1e=n1,L1e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function B1e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=L1e[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:i}}function U1e(e){return e.l+=2,[e.read_shift(4)]}function $1e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function V1e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function q1e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function z1e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function H1e(e){return e.l+=4,[0,0]}var F6={1:{n:"PtgExp",f:d1e},2:{n:"PtgTbl",f:E1e},3:{n:"PtgAdd",f:Xs},4:{n:"PtgSub",f:Xs},5:{n:"PtgMul",f:Xs},6:{n:"PtgDiv",f:Xs},7:{n:"PtgPower",f:Xs},8:{n:"PtgConcat",f:Xs},9:{n:"PtgLt",f:Xs},10:{n:"PtgLe",f:Xs},11:{n:"PtgEq",f:Xs},12:{n:"PtgGe",f:Xs},13:{n:"PtgGt",f:Xs},14:{n:"PtgNe",f:Xs},15:{n:"PtgIsect",f:Xs},16:{n:"PtgUnion",f:Xs},17:{n:"PtgRange",f:Xs},18:{n:"PtgUplus",f:Xs},19:{n:"PtgUminus",f:Xs},20:{n:"PtgPercent",f:Xs},21:{n:"PtgParen",f:Xs},22:{n:"PtgMissArg",f:Xs},23:{n:"PtgStr",f:p1e},26:{n:"PtgSheet",f:$1e},27:{n:"PtgEndSheet",f:V1e},28:{n:"PtgErr",f:u1e},29:{n:"PtgBool",f:f1e},30:{n:"PtgInt",f:h1e},31:{n:"PtgNum",f:m1e},32:{n:"PtgArray",f:Kye},33:{n:"PtgFunc",f:i1e},34:{n:"PtgFuncVar",f:o1e},35:{n:"PtgName",f:b1e},36:{n:"PtgRef",f:a1e},37:{n:"PtgArea",f:zye},38:{n:"PtgMemArea",f:N1e},39:{n:"PtgMemErr",f:k1e},40:{n:"PtgMemNoMem",f:_1e},41:{n:"PtgMemFunc",f:w1e},42:{n:"PtgRefErr",f:S1e},43:{n:"PtgAreaErr",f:Wye},44:{n:"PtgRefN",f:n1e},45:{n:"PtgAreaN",f:Yye},46:{n:"PtgMemAreaN",f:q1e},47:{n:"PtgMemNoMemN",f:z1e},57:{n:"PtgNameX",f:y1e},58:{n:"PtgRef3d",f:s1e},59:{n:"PtgArea3d",f:Hye},60:{n:"PtgRefErr3d",f:C1e},61:{n:"PtgAreaErr3d",f:Gye},255:{}},W1e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},G1e={1:{n:"PtgElfLel",f:wH},2:{n:"PtgElfRw",f:R1e},3:{n:"PtgElfCol",f:D1e},6:{n:"PtgElfRwV",f:F1e},7:{n:"PtgElfColV",f:I1e},10:{n:"PtgElfRadical",f:P1e},11:{n:"PtgElfRadicalS",f:M1e},13:{n:"PtgElfColS",f:A1e},15:{n:"PtgElfColSV",f:T1e},16:{n:"PtgElfRadicalLel",f:O1e},25:{n:"PtgList",f:B1e},29:{n:"PtgSxName",f:U1e},255:{}},Y1e={0:{n:"PtgAttrNoop",f:H1e},1:{n:"PtgAttrSemi",f:e1e},2:{n:"PtgAttrIf",f:Jye},4:{n:"PtgAttrChoose",f:Xye},8:{n:"PtgAttrGoto",f:Qye},16:{n:"PtgAttrSum",f:c1e},32:{n:"PtgAttrBaxcel",f:R6},33:{n:"PtgAttrBaxcel",f:R6},64:{n:"PtgAttrSpace",f:t1e},65:{n:"PtgAttrSpaceSemi",f:r1e},128:{n:"PtgAttrIfError",f:Zye},255:{}};function s1(e,t,r,n){if(n.biff<8)return Do(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=g1e(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=v1e(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(Do(e,t)),i}function i1(e,t,r){for(var n=e.l+t,s,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],s=F6[i]||F6[W1e[i]],(i===24||i===25)&&(s=(i===24?G1e:Y1e)[e[e.l+1]]),!s||!s.f?Do(e,t):o.push([s.n,s.f(e,t,r)]);return o}function K1e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var X1e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Q1e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function SH(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function L6(e,t,r){var n=SH(e,t,r);return n=="#REF"?n:Q1e(n,r)}function vo(e,t,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,d,u,h=0,m=0,p,v="";if(!e[0]||!e[0][0])return"";for(var g=-1,b="",y=0,C=e[0].length;y<C;++y){var w=e[0][y];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),g>=0){switch(e[0][g][1][0]){case 0:b=js(" ",e[0][g][1][1]);break;case 1:b=js("\r",e[0][g][1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}d=d+b,g=-1}l.push(d+X1e[w[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=Bb(w[1][1],o,s),l.push(Ub(u,i));break;case"PtgRefN":u=r?Bb(w[1][1],r,s):w[1][1],l.push(Ub(u,i));break;case"PtgRef3d":h=w[1][1],u=Bb(w[1][2],o,s),v=L6(n,h,s),l.push(v+"!"+Ub(u,i));break;case"PtgFunc":case"PtgFuncVar":var k=w[1][0],S=w[1][1];k||(k=0),k&=127;var D=k==0?[]:l.slice(-k);l.length-=k,S==="User"&&(S=D.shift()),l.push(S+"("+D.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":p=f6(w[1][1],r?{s:r}:o,s),l.push(Q_(p,s));break;case"PtgArea":p=f6(w[1][1],o,s),l.push(Q_(p,s));break;case"PtgArea3d":h=w[1][1],p=w[1][2],v=L6(n,h,s),l.push(v+"!"+Q_(p,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=w[1][2];var E=(n.names||[])[m-1]||(n[0]||[])[m],T=E?E.Name:"SH33TJSNAME"+String(m);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),l.push(T);break;case"PtgNameX":var A=w[1][1];m=w[1][2];var L;if(s.biff<=5)A<0&&(A=-A),n[A]&&(L=n[A][m]);else{var P="";if(((n[A]||[])[0]||[])[0]==14849||(((n[A]||[])[0]||[])[0]==1025?n[A][m]&&n[A][m].itab>0&&(P=n.SheetNames[n[A][m].itab-1]+"!"):P=n.SheetNames[m-1]+"!"),n[A]&&n[A][m])P+=n[A][m].Name;else if(n[0]&&n[0][m])P+=n[0][m].Name;else{var O=(SH(n,A,s)||"").split(";;");O[m-1]?P=O[m-1]:P+="SH33TJSERRX"}l.push(P);break}L||(L={Name:"SH33TJSERRY"}),l.push(L.Name);break;case"PtgParen":var Z="(",z=")";if(g>=0){switch(b="",e[0][g][1][0]){case 2:Z=js(" ",e[0][g][1][1])+Z;break;case 3:Z=js("\r",e[0][g][1][1])+Z;break;case 4:z=js(" ",e[0][g][1][1])+z;break;case 5:z=js("\r",e[0][g][1][1])+z;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}l.push(Z+l.pop()+z);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:w[1][1],r:w[1][0]};var K={c:r.c,r:r.r};if(n.sharedf[sa(u)]){var B=n.sharedf[sa(u)];l.push(vo(B,o,K,n,s))}else{var Q=!1;for(c=0;c!=n.arrayf.length;++c)if(d=n.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(vo(d[1],o,K,n,s)),Q=!0;break}Q||l.push(w[1])}break;case"PtgArray":l.push("{"+K1e(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=y;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var U=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&U.indexOf(e[0][y][0])==-1){w=e[0][g];var J=!0;switch(w[1][0]){case 4:J=!1;case 0:b=js(" ",w[1][1]);break;case 5:J=!1;case 1:b=js("\r",w[1][1]);break;default:if(b="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((J?b:"")+l.pop()+(J?"":b)),g=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function J1e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Do(e,t-2)];var l=i1(e,o,r);return t!==o+s&&(i=s1(e,t-o-s,l,r)),e.l=n,[l,i]}function Z1e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],Do(e,t-2)];var l=i1(e,o,r);return t!==o+s&&(i=s1(e,t-o-s,l,r)),e.l=n,[l,i]}function eje(e,t,r,n){var s=e.l+t,i=i1(e,n,r),o;return s!==e.l&&(o=s1(e,s-e.l,i,r)),[i,o]}function tje(e,t,r){var n=e.l+t,s,i=e.read_shift(2),o=i1(e,i,r);return i==65535?[[],Do(e,t-2)]:(t!==i+2&&(s=s1(e,n-i-2,o,r)),[o,s])}function rje(e){var t;if($h(e,e.l+6)!==65535)return[No(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function aje(e){if(e==null){var t=qt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Sx(e);return Sx(0)}function rE(e,t,r){var n=e.l+t,s=Ju(e);r.biff==2&&++e.l;var i=rje(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Z1e(e,n-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function nje(e,t,r,n,s){var i=kx(t,r,s),o=aje(e.v),l=qt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=qt(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var h=ki([i,o,l,d]);return h}function NS(e,t,r){var n=e.read_shift(4),s=i1(e,n,r),i=e.read_shift(4),o=i>0?s1(e,i,s,r):null;return[s,o]}var sje=NS,wS=NS,ije=NS,oje=NS,lje={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},CH={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},cje={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function B6(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function dje(e){var t="of:="+e.replace($T,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function aE(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function uje(e){return e.replace(/\./,"!")}var Vb={},o0={},qb=typeof Map<"u";function zT(e,t,r){var n=0,s=e.length;if(r){if(qb?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=qb?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(qb?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function SS(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(bo=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=gy(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=Fw(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function ux(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function tp(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Wh(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===n)return s;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function kH(e,t,r,n,s,i){try{n.cellNF&&(e.z=ra[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Vn(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(ra[t]==null&&Wh(lxe[t]||"General",t),e.t==="e")e.w=e.w||vf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uy(e.v);else if(e.t==="d"){var o=hi(e.v);(o|0)===o?e.w=o.toString(10):e.w=uy(o)}else{if(e.v===void 0)return"";e.w=Nx(e.v,o0)}else e.t==="d"?e.w=Gc(t,hi(e.v),o0):e.w=Gc(t,e.v,o0)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Rw(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Rw(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function hje(e,t,r){if(e&&e["!ref"]){var n=Ga(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function fje(e,t){var r=Ga(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=ba(r))}var mje=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,pje=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,xje=/<(?:\w:)?hyperlink [^>]*>/mg,vje=/"(\w*:\w*)"/,gje=/<(?:\w:)?col\b[^>]*[\/]?>/g,bje=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,yje=/<(?:\w:)?pageMargins[^>]*\/>/g,_H=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,jje=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,Nje=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function wje(e,t,r,n,s,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",h=e.match(pje);h?(d=e.slice(0,h.index),u=e.slice(h.index+h[0].length)):d=u=e;var m=d.match(_H);m?HT(m[0],l,s,r):(m=d.match(jje))&&Cje(m[0],m[1]||"",l,s,r);var p=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var v=d.slice(p,p+50).match(vje);v&&fje(l,v[1])}var g=d.match(Nje);g&&g[1]&&Lje(g[1],s);var b=[];if(t.cellStyles){var y=d.match(gje);y&&Pje(b,y)}h&&$je(h[1],l,t,c,i,o);var C=u.match(bje);C&&(l["!autofilter"]=Mje(C[0]));var w=[],k=u.match(mje);if(k)for(p=0;p!=k.length;++p)w[p]=Ga(k[p].slice(k[p].indexOf('"')+1));var S=u.match(xje);S&&Aje(l,S,n);var D=u.match(yje);if(D&&(l["!margins"]=Tje(oa(D[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=ba(c)),t.sheetRows>0&&l["!ref"]){var E=Ga(l["!ref"]);t.sheetRows<=+E.e.r&&(E.e.r=t.sheetRows-1,E.e.r>c.e.r&&(E.e.r=c.e.r),E.e.r<E.s.r&&(E.s.r=E.e.r),E.e.c>c.e.c&&(E.e.c=c.e.c),E.e.c<E.s.c&&(E.s.c=E.e.c),l["!fullref"]=l["!ref"],l["!ref"]=ba(E))}return b.length>0&&(l["!cols"]=b),w.length>0&&(l["!merges"]=w),l}function Sje(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+ba(e[r])+'"/>';return t+"</mergeCells>"}function HT(e,t,r,n){var s=oa(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Wa(Cn(s.codeName)))}function Cje(e,t,r,n,s){HT(e.slice(0,e.indexOf(">")),r,n,s)}function kje(e,t,r,n,s){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=Pu(bn(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+vr("outlinePr",null,d)}!i&&!l||(s[s.length]=vr("sheetPr",l,o))}var _je=["objects","scenarios","selectLockedCells","selectUnlockedCells"],Eje=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function Dje(e){var t={sheet:1};return _je.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),Eje.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=LT(e.password).toString(16).toUpperCase()),vr("sheetProtection",null,t)}function Aje(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var i=oa(Cn(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Wa(i.location))):(i.Target="#"+Wa(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Ga(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var u=sa({c:d,r:c});n?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function Tje(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function Ije(e){return ux(e),vr("pageMargins",null,e)}function Pje(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=oa(t[n],!0);s.hidden&&(s.hidden=Un(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,BT(s.width)),Bm(s);i<=o;)e[i++]=qn(s)}}function Oje(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=vr("col",null,SS(s,n)));return r[r.length]="</cols>",r.join("")}function Mje(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function Rje(e,t,r,n){var s=typeof e.ref=="string"?e.ref:ba(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=ml(s);o.s.r==o.e.r&&(o.e.r=ml(t["!ref"]).e.r,s=ba(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),vr("autoFilter",null,{ref:s})}var Fje=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Lje(e,t){t.Views||(t.Views=[{}]),(e.match(Fje)||[]).forEach(function(r,n){var s=oa(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Un(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function Bje(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),vr("sheetViews",vr("sheetView",null,s),{})}function Uje(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=vf[e.v];break;case"d":n&&n.cellDates?s=Vn(e.v,-1).toISOString():(e=qn(e),e.t="n",s=""+(e.v=hi(Vn(e.v)))),typeof e.z>"u"&&(e.z=ra[14]);break;default:s=e.v;break}var l=Xi("v",bn(s)),c={r:t},d=tp(n.cellXfs,e,n);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Xi("v",""+zT(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=vr("f",bn(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),vr("c",l,c)}var $je=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=hy("v"),o=hy("f");return function(c,d,u,h,m,p){for(var v=0,g="",b=[],y=[],C=0,w=0,k=0,S="",D,E,T=0,A=0,L,P,O=0,Z=0,z=Array.isArray(p.CellXf),K,B=[],Q=[],U=Array.isArray(d),J=[],Y={},oe=!1,M=!!u.sheetStubs,V=c.split(t),H=0,ee=V.length;H!=ee;++H){g=V[H].trim();var re=g.length;if(re!==0){var ae=0;e:for(v=0;v<re;++v)switch(g[v]){case">":if(g[v-1]!="/"){++v;break e}if(u&&u.cellStyles){if(E=oa(g.slice(ae,v),!0),T=E.r!=null?parseInt(E.r,10):T+1,A=-1,u.sheetRows&&u.sheetRows<T)continue;Y={},oe=!1,E.ht&&(oe=!0,Y.hpt=parseFloat(E.ht),Y.hpx=I0(Y.hpt)),E.hidden=="1"&&(oe=!0,Y.hidden=!0),E.outlineLevel!=null&&(oe=!0,Y.level=+E.outlineLevel),oe&&(J[T-1]=Y)}break;case"<":ae=v;break}if(ae>=v)break;if(E=oa(g.slice(ae,v),!0),T=E.r!=null?parseInt(E.r,10):T+1,A=-1,!(u.sheetRows&&u.sheetRows<T)){h.s.r>T-1&&(h.s.r=T-1),h.e.r<T-1&&(h.e.r=T-1),u&&u.cellStyles&&(Y={},oe=!1,E.ht&&(oe=!0,Y.hpt=parseFloat(E.ht),Y.hpx=I0(Y.hpt)),E.hidden=="1"&&(oe=!0,Y.hidden=!0),E.outlineLevel!=null&&(oe=!0,Y.level=+E.outlineLevel),oe&&(J[T-1]=Y)),b=g.slice(v).split(e);for(var ne=0;ne!=b.length&&b[ne].trim().charAt(0)=="<";++ne);for(b=b.slice(ne),v=0;v!=b.length;++v)if(g=b[v].trim(),g.length!==0){if(y=g.match(r),C=v,w=0,k=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,y!=null&&y.length===2){for(C=0,S=y[1],w=0;w!=S.length&&!((k=S.charCodeAt(w)-64)<1||k>26);++w)C=26*C+k;--C,A=C}else++A;for(w=0;w!=g.length&&g.charCodeAt(w)!==62;++w);if(++w,E=oa(g.slice(0,w),!0),E.r||(E.r=sa({r:T-1,c:A})),S=g.slice(w),D={t:""},(y=S.match(i))!=null&&y[1]!==""&&(D.v=Wa(y[1])),u.cellFormula){if((y=S.match(o))!=null&&y[1]!==""){if(D.f=Wa(Cn(y[1])).replace(/\r\n/g,`
`),u.xlfn||(D.f=M6(D.f)),y[0].indexOf('t="array"')>-1)D.F=(S.match(s)||[])[1],D.F.indexOf(":")>-1&&B.push([Ga(D.F),D.F]);else if(y[0].indexOf('t="shared"')>-1){P=oa(y[0]);var ie=Wa(Cn(y[1]));u.xlfn||(ie=M6(ie)),Q[parseInt(P.si,10)]=[P,ie,E.r]}}else(y=S.match(/<f[^>]*\/>/))&&(P=oa(y[0]),Q[P.si]&&(D.f=Fye(Q[P.si][1],Q[P.si][2],E.r)));var G=ds(E.r);for(w=0;w<B.length;++w)G.r>=B[w][0].s.r&&G.r<=B[w][0].e.r&&G.c>=B[w][0].s.c&&G.c<=B[w][0].e.c&&(D.F=B[w][1])}if(E.t==null&&D.v===void 0)if(D.f||D.F)D.v=0,D.t="n";else if(M)D.t="z";else continue;else D.t=E.t||"n";switch(h.s.c>A&&(h.s.c=A),h.e.c<A&&(h.e.c=A),D.t){case"n":if(D.v==""||D.v==null){if(!M)continue;D.t="z"}else D.v=parseFloat(D.v);break;case"s":if(typeof D.v>"u"){if(!M)continue;D.t="z"}else L=Vb[parseInt(D.v,10)],D.v=L.t,D.r=L.r,u.cellHTML&&(D.h=L.h);break;case"str":D.t="s",D.v=D.v!=null?Cn(D.v):"",u.cellHTML&&(D.h=wT(D.v));break;case"inlineStr":y=S.match(n),D.t="s",y!=null&&(L=FT(y[1]))?(D.v=L.t,u.cellHTML&&(D.h=L.h)):D.v="";break;case"b":D.v=Un(D.v);break;case"d":u.cellDates?D.v=Vn(D.v,1):(D.v=hi(Vn(D.v,1)),D.t="n");break;case"e":(!u||u.cellText!==!1)&&(D.w=D.v),D.v=Dz[D.v];break}if(O=Z=0,K=null,z&&E.s!==void 0&&(K=p.CellXf[E.s],K!=null&&(K.numFmtId!=null&&(O=K.numFmtId),u.cellStyles&&K.fillId!=null&&(Z=K.fillId))),kH(D,O,Z,u,m,p),u.cellDates&&z&&D.t=="n"&&sg(ra[O])&&(D.t="d",D.v=yS(D.v)),E.cm&&u.xlmeta){var de=(u.xlmeta.Cell||[])[+E.cm-1];de&&de.type=="XLDAPR"&&(D.D=!0)}if(U){var X=ds(E.r);d[X.r]||(d[X.r]=[]),d[X.r][X.c]=D}else d[E.r]=D}}}}J.length>0&&(d["!rows"]=J)}}();function Vje(e,t,r,n){var s=[],i=[],o=Ga(e["!ref"]),l="",c,d="",u=[],h=0,m=0,p=e["!rows"],v=Array.isArray(e),g={r:d},b,y=-1;for(m=o.s.c;m<=o.e.c;++m)u[m]=cs(m);for(h=o.s.r;h<=o.e.r;++h){for(i=[],d=$s(h),m=o.s.c;m<=o.e.c;++m){c=u[m]+d;var C=v?(e[h]||[])[m]:e[c];C!==void 0&&(l=Uje(C,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[h])&&(g={r:d},p&&p[h]&&(b=p[h],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=by(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level)),s[s.length]=vr("row",i.join(""),g))}if(p)for(;h<p.length;++h)p&&p[h]&&(g={r:h+1},b=p[h],b.hidden&&(g.hidden=1),y=-1,b.hpx?y=by(b.hpx):b.hpt&&(y=b.hpt),y>-1&&(g.ht=y,g.customHeight=1),b.level&&(g.outlineLevel=b.level),s[s.length]=vr("row","",g));return s.join("")}function EH(e,t,r,n){var s=[qs,vr("worksheet",null,{xmlns:Lx[0],"xmlns:r":ci.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=Ga(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=ba(u)}n||(n={}),c["!comments"]=[];var h=[];kje(c,r,e,t,s),s[s.length]=vr("dimension",null,{ref:d}),s[s.length]=Bje(c,t,e,r),t.sheetFormat&&(s[s.length]=vr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=Oje(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=Vje(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=Dje(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=Rje(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=Sje(c["!merges"]));var m=-1,p,v=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(g){g[1].Target&&(p={ref:g[0]},g[1].Target.charAt(0)!="#"&&(v=vn(n,-1,bn(g[1].Target).replace(/#.*$/,""),Aa.HLINK),p["r:id"]="rId"+v),(m=g[1].Target.indexOf("#"))>-1&&(p.location=bn(g[1].Target.slice(m+1))),g[1].Tooltip&&(p.tooltip=bn(g[1].Tooltip)),s[s.length]=vr("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=Ije(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Xi("ignoredErrors",vr("ignoredError",null,{numberStoredAsText:1,sqref:d}))),h.length>0&&(v=vn(n,-1,"../drawings/drawing"+(e+1)+".xml",Aa.DRAW),s[s.length]=vr("drawing",null,{"r:id":"rId"+v}),c["!drawing"]=h),c["!comments"].length>0&&(v=vn(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Aa.VML),s[s.length]=vr("legacyDrawing",null,{"r:id":"rId"+v}),c["!legacy"]=v),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function qje(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function zje(e,t,r){var n=qt(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;s.hpx?i=by(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var h=-1,m=-1,p=u<<10;p<u+1<<10;++p){d.c=p;var v=Array.isArray(r)?(r[d.r]||[])[d.c]:r[sa(d)];v&&(h<0&&(h=p),m=p)}h<0||(++l,n.write_shift(4,h),n.write_shift(4,m))}var g=n.l;return n.l=c,n.write_shift(4,l),n.l=g,n.length>n.l?n.slice(0,n.l):n}function Hje(e,t,r,n){var s=zje(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&sr(e,0,s)}var Wje=Vx,Gje=lg;function Yje(){}function Kje(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Jxe(e),r}function Xje(e,t,r){r==null&&(r=qt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return Pw({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),Sz(e,r),r.slice(0,r.l)}function Qje(e){var t=Jc(e);return[t]}function Jje(e,t,r){return r==null&&(r=qt(8)),Bx(t,r)}function Zje(e){var t=Ux(e);return[t]}function eNe(e,t,r){return r==null&&(r=qt(4)),$x(t,r)}function tNe(e){var t=Jc(e),r=e.read_shift(1);return[t,r,"b"]}function rNe(e,t,r){return r==null&&(r=qt(9)),Bx(t,r),r.write_shift(1,e.v?1:0),r}function aNe(e){var t=Ux(e),r=e.read_shift(1);return[t,r,"b"]}function nNe(e,t,r){return r==null&&(r=qt(5)),$x(t,r),r.write_shift(1,e.v?1:0),r}function sNe(e){var t=Jc(e),r=e.read_shift(1);return[t,r,"e"]}function iNe(e,t,r){return r==null&&(r=qt(9)),Bx(t,r),r.write_shift(1,e.v),r}function oNe(e){var t=Ux(e),r=e.read_shift(1);return[t,r,"e"]}function lNe(e,t,r){return r==null&&(r=qt(8)),$x(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function cNe(e){var t=Jc(e),r=e.read_shift(4);return[t,r,"s"]}function dNe(e,t,r){return r==null&&(r=qt(12)),Bx(t,r),r.write_shift(4,t.v),r}function uNe(e){var t=Ux(e),r=e.read_shift(4);return[t,r,"s"]}function hNe(e,t,r){return r==null&&(r=qt(8)),$x(t,r),r.write_shift(4,t.v),r}function fNe(e){var t=Jc(e),r=No(e);return[t,r,"n"]}function mNe(e,t,r){return r==null&&(r=qt(16)),Bx(t,r),Sx(e.v,r),r}function DH(e){var t=Ux(e),r=No(e);return[t,r,"n"]}function pNe(e,t,r){return r==null&&(r=qt(12)),$x(t,r),Sx(e.v,r),r}function xNe(e){var t=Jc(e),r=IT(e);return[t,r,"n"]}function vNe(e,t,r){return r==null&&(r=qt(12)),Bx(t,r),Cz(e.v,r),r}function gNe(e){var t=Ux(e),r=IT(e);return[t,r,"n"]}function bNe(e,t,r){return r==null&&(r=qt(8)),$x(t,r),Cz(e.v,r),r}function yNe(e){var t=Jc(e),r=DT(e);return[t,r,"is"]}function jNe(e){var t=Jc(e),r=Eo(e);return[t,r,"str"]}function NNe(e,t,r){return r==null&&(r=qt(12+4*e.v.length)),Bx(t,r),_i(e.v,r),r.length>r.l?r.slice(0,r.l):r}function wNe(e){var t=Ux(e),r=Eo(e);return[t,r,"str"]}function SNe(e,t,r){return r==null&&(r=qt(8+4*e.v.length)),$x(t,r),_i(e.v,r),r.length>r.l?r.slice(0,r.l):r}function CNe(e,t,r){var n=e.l+t,s=Jc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=vo(l,null,s,r.supbooks,r)}else e.l=n;return o}function kNe(e,t,r){var n=e.l+t,s=Jc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=vo(l,null,s,r.supbooks,r)}else e.l=n;return o}function _Ne(e,t,r){var n=e.l+t,s=Jc(e);s.r=r["!row"];var i=No(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=vo(l,null,s,r.supbooks,r)}else e.l=n;return o}function ENe(e,t,r){var n=e.l+t,s=Jc(e);s.r=r["!row"];var i=Eo(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=wS(e,n-e.l,r);o[3]=vo(l,null,s,r.supbooks,r)}else e.l=n;return o}var DNe=Vx,ANe=lg;function TNe(e,t){return t==null&&(t=qt(4)),t.write_shift(4,e),t}function INe(e,t){var r=e.l+t,n=Vx(e),s=AT(e),i=Eo(e),o=Eo(e),l=Eo(e);e.l=r;var c={rfx:n,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function PNe(e,t){var r=qt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));lg({s:ds(e[0]),e:ds(e[0])},r),TT("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return _i(s||"",r),_i(e[1].Tooltip||"",r),_i("",r),r.slice(0,r.l)}function ONe(){}function MNe(e,t,r){var n=e.l+t,s=kz(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=sje(e,n-e.l,r);o[1]=l}else e.l=n;return o}function RNe(e,t,r){var n=e.l+t,s=Vx(e),i=[s];if(r.cellFormula){var o=oje(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}function FNe(e,t,r){r==null&&(r=qt(18));var n=SS(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var AH=["left","right","top","bottom","header","footer"];function LNe(e){var t={};return AH.forEach(function(r){t[r]=No(e)}),t}function BNe(e,t){return t==null&&(t=qt(6*8)),ux(e),AH.forEach(function(r){Sx(e[r],t)}),t}function UNe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function $Ne(e,t,r){r==null&&(r=qt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function VNe(e){var t=qt(24);return t.write_shift(4,4),t.write_shift(4,1),lg(e,t),t}function qNe(e,t){return t==null&&(t=qt(16*4+2)),t.write_shift(2,e.password?LT(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function zNe(){}function HNe(){}function WNe(e,t,r,n,s,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},h=!1,m=!1,p,v,g,b,y,C,w,k,S,D=[];l.biff=12,l["!row"]=0;var E=0,T=!1,A=[],L={},P=l.supbooks||s.supbooks||[[]];if(P.sharedf=L,P.arrayf=A,P.SheetNames=s.SheetNames||s.Sheets.map(function(U){return U.name}),!l.supbooks&&(l.supbooks=P,s.Names))for(var O=0;O<s.Names.length;++O)P[0][O+1]=s.Names[O];var Z=[],z=[],K=!1;yy[16]={n:"BrtShortReal",f:DH};var B;if(xf(e,function(J,Y,oe){if(!m)switch(oe){case 148:d=J;break;case 0:p=J,l.sheetRows&&l.sheetRows<=p.r&&(m=!0),k=$s(b=p.r),l["!row"]=p.r,(J.hidden||J.hpt||J.level!=null)&&(J.hpt&&(J.hpx=I0(J.hpt)),z[J.r]=J);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(v={t:J[2]},J[2]){case"n":v.v=J[1];break;case"s":w=Vb[J[1]],v.v=w.t,v.r=w.r;break;case"b":v.v=!!J[1];break;case"e":v.v=J[1],l.cellText!==!1&&(v.w=vf[v.v]);break;case"str":v.t="s",v.v=J[1];break;case"is":v.t="s",v.v=J[1].t;break}if((g=o.CellXf[J[0].iStyleRef])&&kH(v,g.numFmtId,null,l,i,o),y=J[0].c==-1?y+1:J[0].c,l.dense?(c[b]||(c[b]=[]),c[b][y]=v):c[cs(y)+k]=v,l.cellFormula){for(T=!1,E=0;E<A.length;++E){var M=A[E];p.r>=M[0].s.r&&p.r<=M[0].e.r&&y>=M[0].s.c&&y<=M[0].e.c&&(v.F=ba(M[0]),T=!0)}!T&&J.length>3&&(v.f=J[3])}if(u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),l.cellDates&&g&&v.t=="n"&&sg(ra[g.numFmtId])){var V=Qp(v.v);V&&(v.t="d",v.v=new Date(V.y,V.m-1,V.d,V.H,V.M,V.S,V.u))}B&&(B.type=="XLDAPR"&&(v.D=!0),B=void 0);break;case 1:case 12:if(!l.sheetStubs||h)break;v={t:"z",v:void 0},y=J[0].c==-1?y+1:J[0].c,l.dense?(c[b]||(c[b]=[]),c[b][y]=v):c[cs(y)+k]=v,u.s.r>p.r&&(u.s.r=p.r),u.s.c>y&&(u.s.c=y),u.e.r<p.r&&(u.e.r=p.r),u.e.c<y&&(u.e.c=y),B&&(B.type=="XLDAPR"&&(v.D=!0),B=void 0);break;case 176:D.push(J);break;case 49:B=((l.xlmeta||{}).Cell||[])[J-1];break;case 494:var H=n["!id"][J.relId];for(H?(J.Target=H.Target,J.loc&&(J.Target+="#"+J.loc),J.Rel=H):J.relId==""&&(J.Target="#"+J.loc),b=J.rfx.s.r;b<=J.rfx.e.r;++b)for(y=J.rfx.s.c;y<=J.rfx.e.c;++y)l.dense?(c[b]||(c[b]=[]),c[b][y]||(c[b][y]={t:"z",v:void 0}),c[b][y].l=J):(C=sa({c:y,r:b}),c[C]||(c[C]={t:"z",v:void 0}),c[C].l=J);break;case 426:if(!l.cellFormula)break;A.push(J),S=l.dense?c[b][y]:c[cs(y)+k],S.f=vo(J[1],u,{r:p.r,c:y},P,l),S.F=ba(J[0]);break;case 427:if(!l.cellFormula)break;L[sa(J[0].s)]=J[1],S=l.dense?c[b][y]:c[cs(y)+k],S.f=vo(J[1],u,{r:p.r,c:y},P,l);break;case 60:if(!l.cellStyles)break;for(;J.e>=J.s;)Z[J.e--]={width:J.w/256,hidden:!!(J.flags&1),level:J.level},K||(K=!0,BT(J.w/256)),Bm(Z[J.e+1]);break;case 161:c["!autofilter"]={ref:ba(J)};break;case 476:c["!margins"]=J;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),J.name&&(s.Sheets[r].CodeName=J.name),(J.above||J.left)&&(c["!outline"]={above:J.above,left:J.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),J.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:h=!0;break;case 36:h=!1;break;case 37:h=!0;break;case 38:h=!1;break;default:if(!Y.T){if(!h||l.WTF)throw new Error("Unexpected record 0x"+oe.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=ba(d||u)),l.sheetRows&&c["!ref"]){var Q=Ga(c["!ref"]);l.sheetRows<=+Q.e.r&&(Q.e.r=l.sheetRows-1,Q.e.r>u.e.r&&(Q.e.r=u.e.r),Q.e.r<Q.s.r&&(Q.s.r=Q.e.r),Q.e.c>u.e.c&&(Q.e.c=u.e.c),Q.e.c<Q.s.c&&(Q.s.c=Q.e.c),c["!fullref"]=c["!ref"],c["!ref"]=ba(Q))}return D.length>0&&(c["!merges"]=D),Z.length>0&&(c["!cols"]=Z),z.length>0&&(c["!rows"]=z),c}function GNe(e,t,r,n,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=qn(t),t.z=t.z||ra[14],t.v=hi(Vn(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=tp(s.cellXfs,t,s),t.l&&i["!links"].push([sa(c),t.l]),t.c&&i["!comments"].push([sa(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=zT(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?sr(e,18,hNe(t,c)):sr(e,7,dNe(t,c))):(c.t="str",o?sr(e,17,SNe(t,c)):sr(e,6,NNe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?sr(e,13,bNe(t,c)):sr(e,2,vNe(t,c)):o?sr(e,16,pNe(t,c)):sr(e,5,mNe(t,c)),!0;case"b":return c.t="b",o?sr(e,15,nNe(t,c)):sr(e,4,rNe(t,c)),!0;case"e":return c.t="e",o?sr(e,14,lNe(t,c)):sr(e,3,iNe(t,c)),!0}return o?sr(e,12,eNe(t,c)):sr(e,1,Jje(t,c)),!0}function YNe(e,t,r,n){var s=Ga(t["!ref"]||"A1"),i,o="",l=[];sr(e,145);var c=Array.isArray(t),d=s.e.r;t["!rows"]&&(d=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=d;++u){o=$s(u),Hje(e,t,s,u);var h=!1;if(u<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){u===s.s.r&&(l[m]=cs(m)),i=l[m]+o;var p=c?(t[u]||[])[m]:t[i];if(!p){h=!1;continue}h=GNe(e,p,u,m,n,t,h)}}sr(e,146)}function KNe(e,t){!t||!t["!merges"]||(sr(e,177,TNe(t["!merges"].length)),t["!merges"].forEach(function(r){sr(e,176,ANe(r))}),sr(e,178))}function XNe(e,t){!t||!t["!cols"]||(sr(e,390),t["!cols"].forEach(function(r,n){r&&sr(e,60,FNe(n,r))}),sr(e,391))}function QNe(e,t){!t||!t["!ref"]||(sr(e,648),sr(e,649,VNe(Ga(t["!ref"]))),sr(e,650))}function JNe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=vn(r,-1,n[1].Target.replace(/#.*$/,""),Aa.HLINK);sr(e,494,PNe(n,s))}}),delete t["!links"]}function ZNe(e,t,r,n){if(t["!comments"].length>0){var s=vn(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Aa.VML);sr(e,551,TT("rId"+s)),t["!legacy"]=s}}function ewe(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:ba(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=ml(i);l.s.r==l.e.r&&(l.e.r=ml(t["!ref"]).e.r,i=ba(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),sr(e,161,lg(Ga(i))),sr(e,162)}}function twe(e,t,r){sr(e,133),sr(e,137,$Ne(t,r)),sr(e,138),sr(e,134)}function rwe(e,t){t["!protect"]&&sr(e,535,qNe(t["!protect"]))}function awe(e,t,r,n){var s=hl(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Ga(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],sr(s,129),(r.vbaraw||o["!outline"])&&sr(s,147,Xje(l,o["!outline"])),sr(s,148,Gje(c)),twe(s,o,r.Workbook),XNe(s,o),YNe(s,o,e,t),rwe(s,o),ewe(s,o,r,e),KNe(s,o),JNe(s,o,n),o["!margins"]&&sr(s,476,BNe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&QNe(s,o),ZNe(s,o,e,n),sr(s,130),s.end()}function nwe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=Wa((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,s,n]}function swe(e,t,r,n,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(h){var m=nwe(h);u.s.r=u.s.c=0,u.e.c=l,d=cs(l),m[0].forEach(function(p,v){o[d+$s(v)]={t:"n",v:p,z:m[1]},c=v}),u.e.r<c&&(u.e.r=c),++l}),l>0&&(o["!ref"]=ba(u)),o}function iwe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(_H);return l&&HT(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function owe(e,t){e.l+=10;var r=Eo(e);return{name:r}}function lwe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return xf(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var WT=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],cwe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],dwe=[],uwe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function U6(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var i=t[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Un(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function $6(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Un(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function TH(e){$6(e.WBProps,WT),$6(e.CalcPr,uwe),U6(e.WBView,cwe),U6(e.Sheets,dwe),o0.date1904=Un(e.WBProps.date1904)}function hwe(e){return!e.Workbook||!e.Workbook.WBProps?"false":Un(e.Workbook.WBProps.date1904)?"true":"false"}var fwe="][*?/\\".split("");function IH(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return fwe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function mwe(e,t,r){e.forEach(function(n,s){IH(n);for(var i=0;i<s;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[s]&&t[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function pwe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];mwe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)hje(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var xwe=/<\w+:workbook/;function vwe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(e.replace(To,function(c,d){var u=oa(c);switch(Qu(u[0])){case"<?xml":break;case"<workbook":c.match(xwe)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":WT.forEach(function(h){if(u[h[0]]!=null)switch(h[2]){case"bool":r.WBProps[h[0]]=Un(u[h[0]]);break;case"int":r.WBProps[h[0]]=parseInt(u[h[0]],10);break;default:r.WBProps[h[0]]=u[h[0]]}}),u.codeName&&(r.WBProps.CodeName=Cn(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=Wa(Cn(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Cn(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),Un(u.hidden||"0")&&(i.Hidden=!0),o=d+c.length;break;case"</definedName>":i.Ref=Wa(Cn(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),Lx.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return TH(r),r}function PH(e){var t=[qs];t[t.length]=vr("workbook",null,{xmlns:Lx[0],"xmlns:r":ci.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(WT.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=vr("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:bn(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=vr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=vr("definedName",bn(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function gwe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=v5(e),r.name=Eo(e),r}function bwe(e,t){return t||(t=qt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),TT(e.strRelID,t),_i(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function ywe(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?Eo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function jwe(e,t){t||(t=qt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),Sz(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function Nwe(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function wwe(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Zxe(e),o=ije(e,0,r),l=AT(e);e.l=n;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function Swe(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],yy[16]={n:"BrtFRTArchID$",f:Nwe},xf(e,function(c,d,u){switch(u){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=vo(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([u,c]):o[0]=[u,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(u),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(u),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),TH(r),r.Names=i,r.supbooks=o,r}function Cwe(e,t){sr(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};sr(e,156,bwe(s))}sr(e,144)}function kwe(e,t){t||(t=qt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return _i("SheetJS",t),_i(kw.version,t),_i(kw.version,t),_i("7262",t),t.length>t.l?t.slice(0,t.l):t}function _we(e,t){t||(t=qt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function Ewe(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||(sr(e,135),sr(e,158,_we(s)),sr(e,136))}}function Dwe(e,t){var r=hl();return sr(r,131),sr(r,128,kwe()),sr(r,153,jwe(e.Workbook&&e.Workbook.WBProps||null)),Ewe(r,e),Cwe(r,e),sr(r,132),r.end()}function Awe(e,t,r){return t.slice(-4)===".bin"?Swe(e,r):vwe(e,r)}function Twe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?WNe(e,n,r,s,i,o,l):wje(e,n,r,s,i,o,l)}function Iwe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?lwe(e,n,r,s,i):iwe(e,n,r,s,i)}function Pwe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?Mye():Rye()}function Owe(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?Pye():Oye()}function Mwe(e,t,r,n){return t.slice(-4)===".bin"?Abe(e,r,n):gbe(e,r,n)}function Rwe(e,t,r){return fH(e,r)}function Fwe(e,t,r){return t.slice(-4)===".bin"?Fge(e,r):Oge(e,r)}function Lwe(e,t,r){return t.slice(-4)===".bin"?Eye(e,r):bye(e,r)}function Bwe(e,t,r){return t.slice(-4)===".bin"?xye(e):mye(e)}function Uwe(e,t,r,n){return r.slice(-4)===".bin"?vye(e,t,r,n):void 0}function $we(e,t,r){return t.slice(-4)===".bin"?uye(e,t,r):fye(e,t,r)}function Vwe(e,t,r){return(t.slice(-4)===".bin"?Dwe:PH)(e)}function qwe(e,t,r,n,s){return(t.slice(-4)===".bin"?awe:EH)(e,r,n,s)}function zwe(e,t,r){return(t.slice(-4)===".bin"?Ube:uH)(e,r)}function Hwe(e,t,r){return(t.slice(-4)===".bin"?Uge:aH)(e,r)}function Wwe(e,t,r){return(t.slice(-4)===".bin"?Dye:xH)(e)}function Gwe(e){return(e.slice(-4)===".bin"?hye:mH)()}var OH=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,MH=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function jd(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(OH),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(MH),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function Ywe(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(OH),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(MH),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var zb;function Kwe(e,t){var r=zb[e]||Wa(e);return r==="General"?Nx(t):Gc(r,t)}function Xwe(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Un(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=Vn(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Wa(t)]=s}function Qwe(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||vf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uy(e.v):e.w=Nx(e.v):e.w=Kwe(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=zb[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&sg(n)){var s=Qp(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Jwe(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=dbe[n.Pattern]||n.Pattern)}e[t.ID]=t}function Zwe(e,t,r,n,s,i,o,l,c,d){var u="General",h=n.StyleID,m={};d=d||{};var p=[],v=0;for(h===void 0&&l&&(h=l.StyleID),h===void 0&&o&&(h=o.StyleID);i[h]!==void 0&&(i[h].nf&&(u=i[h].nf),i[h].Interior&&p.push(i[h].Interior),!!i[h].Parent);)h=i[h].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Un(e);break;case"String":n.t="s",n.r=n6(Wa(e)),n.v=e.indexOf("<")>-1?Wa(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Vn(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Wa(e):n.v<60&&(n.v=n.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=Dz[e],d.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=n6(t||e));break}if(Qwe(n,u,d),d.cellFormula!==!1)if(n.Formula){var g=Wa(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=i0(g,s),delete n.Formula,n.ArrayRange=="RC"?n.F=i0("RC:RC",s):n.ArrayRange&&(n.F=i0(n.ArrayRange,s),c.push([Ga(n.F),n.F]))}else for(v=0;v<c.length;++v)s.r>=c[v][0].s.r&&s.r<=c[v][0].e.r&&s.c>=c[v][0].s.c&&s.c<=c[v][0].e.c&&(n.F=c[v][1]);d.cellStyles&&(p.forEach(function(b){!m.patternType&&b.patternType&&(m.patternType=b.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function e2e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function nE(e,t){var r=t||{};ig();var n=Ab(ST(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Cn(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=qn(r);return o.type="string",T0.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Ne){s.indexOf("<"+Ne)>=0&&(i=!0)}),i)return B2e(n,r);zb={"General Number":"General","General Date":ra[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":ra[15],"Short Date":ra[14],"Long Time":ra[19],"Medium Time":ra[18],"Short Time":ra[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:ra[2],Standard:ra[4],Percent:ra[10],Scientific:ra[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,u={},h=[],m=r.dense?[]:{},p="",v={},g={},b=jd('<Data ss:Type="String">'),y=0,C=0,w=0,k={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},D={},E="",T=0,A=[],L={},P={},O=0,Z=[],z=[],K={},B=[],Q,U=!1,J=[],Y=[],oe={},M=0,V=0,H={Sheets:[],WBProps:{date1904:!1}},ee={};my.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var re="";l=my.exec(n);)switch(l[3]=(re=l[3]).toLowerCase()){case"data":if(re=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?Zwe(n.slice(y,l.index),E,b,c[c.length-1][0]=="comment"?K:v,{c:C,r:w},S,B[C],g,J,r):(E="",b=jd(l[0]),y=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(z.length>0&&(v.c=z),(!r.sheetRows||r.sheetRows>w)&&v.v!==void 0&&(r.dense?(m[w]||(m[w]=[]),m[w][C]=v):m[cs(C)+$s(w)]=v),v.HRef&&(v.l={Target:Wa(v.HRef)},v.HRefScreenTip&&(v.l.Tooltip=v.HRefScreenTip),delete v.HRef,delete v.HRefScreenTip),(v.MergeAcross||v.MergeDown)&&(M=C+(parseInt(v.MergeAcross,10)|0),V=w+(parseInt(v.MergeDown,10)|0),A.push({s:{c:C,r:w},e:{c:M,r:V}})),!r.sheetStubs)v.MergeAcross?C=M+1:++C;else if(v.MergeAcross||v.MergeDown){for(var ae=C;ae<=M;++ae)for(var ne=w;ne<=V;++ne)(ae>C||ne>w)&&(r.dense?(m[ne]||(m[ne]=[]),m[ne][ae]={t:"z"}):m[cs(ae)+$s(ne)]={t:"z"});C=M+1}else++C;else v=Ywe(l[0]),v.Index&&(C=+v.Index-1),C<k.s.c&&(k.s.c=C),C>k.e.c&&(k.e.c=C),l[0].slice(-2)==="/>"&&++C,z=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(w<k.s.r&&(k.s.r=w),w>k.e.r&&(k.e.r=w),l[0].slice(-2)==="/>"&&(g=jd(l[0]),g.Index&&(w=+g.Index-1)),C=0,++w):(g=jd(l[0]),g.Index&&(w=+g.Index-1),oe={},(g.AutoFitHeight=="0"||g.Height)&&(oe.hpx=parseInt(g.Height,10),oe.hpt=by(oe.hpx),Y[w]=oe),g.Hidden=="1"&&(oe.hidden=!0,Y[w]=oe));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));h.push(p),k.s.r<=k.e.r&&k.s.c<=k.e.c&&(m["!ref"]=ba(k),r.sheetRows&&r.sheetRows<=k.e.r&&(m["!fullref"]=m["!ref"],k.e.r=r.sheetRows-1,m["!ref"]=ba(k))),A.length&&(m["!merges"]=A),B.length>0&&(m["!cols"]=B),Y.length>0&&(m["!rows"]=Y),u[p]=m}else k={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=C=0,c.push([l[3],!1]),d=jd(l[0]),p=Wa(d.Name),m=r.dense?[]:{},A=[],J=[],Y=[],ee={name:p,Hidden:0},H.Sheets.push(ee);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),B=[],U=!1}break;case"style":l[1]==="/"?Jwe(S,D,r):D=jd(l[0]);break;case"numberformat":D.nf=Wa(jd(l[0]).Format||"General"),zb[D.nf]&&(D.nf=zb[D.nf]);for(var ie=0;ie!=392&&ra[ie]!=D.nf;++ie);if(ie==392){for(ie=57;ie!=392;++ie)if(ra[ie]==null){Wh(D.nf,ie);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(Q=jd(l[0]),Q.Hidden&&(Q.hidden=!0,delete Q.Hidden),Q.Width&&(Q.wpx=parseInt(Q.Width,10)),!U&&Q.wpx>10){U=!0,bo=cH;for(var G=0;G<B.length;++G)B[G]&&Bm(B[G])}U&&Bm(Q),B[Q.Index-1||B.length]=Q;for(var de=0;de<+Q.Span;++de)B[B.length]=qn(Q);break;case"namedrange":if(l[1]==="/")break;H.Names||(H.Names=[]);var X=oa(l[0]),le={Name:X.Name,Ref:i0(X.RefersTo.slice(1),{r:0,c:0})};H.Sheets.length>0&&(le.Sheet=H.Sheets.length-1),H.Names.push(le);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?E+=n.slice(T,l.index):T=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;D.Interior=jd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?Sve(L,re,n.slice(O,l.index)):O=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));e2e(K),z.push(K)}else c.push([l[3],!1]),d=jd(l[0]),K={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Se=jd(l[0]);m["!autofilter"]={ref:i0(Se.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return W6(n,r);var ue=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ue=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ue=!1}break;case"excelworkbook":switch(l[3]){case"date1904":H.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ue=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ue=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(O,l.index)){case"SheetHidden":ee.Hidden=1;break;case"SheetVeryHidden":ee.Hidden=2;break}else O=l.index+l[0].length;break;case"header":m["!margins"]||ux(m["!margins"]={},"xlml"),isNaN(+oa(l[0]).Margin)||(m["!margins"].header=+oa(l[0]).Margin);break;case"footer":m["!margins"]||ux(m["!margins"]={},"xlml"),isNaN(+oa(l[0]).Margin)||(m["!margins"].footer=+oa(l[0]).Margin);break;case"pagemargins":var se=oa(l[0]);m["!margins"]||ux(m["!margins"]={},"xlml"),isNaN(+se.Top)||(m["!margins"].top=+se.Top),isNaN(+se.Left)||(m["!margins"].left=+se.Left),isNaN(+se.Right)||(m["!margins"].right=+se.Right),isNaN(+se.Bottom)||(m["!margins"].bottom=+se.Bottom);break;case"displayrighttoleft":H.Views||(H.Views=[]),H.Views[0]||(H.Views[0]={}),H.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ue=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ue=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ue=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ue=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ue=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ue=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ue=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ue=!1}break;case"smarttags":break;default:ue=!1;break}if(ue||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?Xwe(P,re,Z,n.slice(O,l.index)):(Z=l,O=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var ye={};return!r.bookSheets&&!r.bookProps&&(ye.Sheets=u),ye.SheetNames=h,ye.Workbook=H,ye.SSF=qn(ra),ye.Props=L,ye.Custprops=P,ye}function S5(e,t){switch(YT(t=t||{}),t.type||"base64"){case"base64":return nE(ic(e),t);case"binary":case"buffer":case"file":return nE(e,t);case"array":return nE(Zm(e),t)}}function t2e(e,t){var r=[];return e.Props&&r.push(Cve(e.Props,t)),e.Custprops&&r.push(kve(e.Props,e.Custprops)),r.join("")}function r2e(){return""}function a2e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var i=[];i.push(vr("NumberFormat",null,{"ss:Format":bn(ra[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(vr("Style",i.join(""),o))}),vr("Styles",r.join(""))}function RH(e){return vr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+VT(e.Ref,{r:0,c:0})})}function n2e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(RH(s)))}return vr("Names",r.join(""))}function s2e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(RH(l)))}return i.join("")}function i2e(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(vr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(vr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(vr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(vr("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Xi("ProtectContents","True")),e["!protect"].objects&&s.push(Xi("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Xi("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Xi("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Xi("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":vr("WorksheetOptions",s.join(""),{xmlns:Vl.x})}function o2e(e){return e.map(function(t){var r=Exe(t.t||""),n=vr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return vr("Comment",n,{"ss:Author":t.a})}).join("")}function l2e(e,t,r,n,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+bn(VT(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=ds(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=bn(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=bn(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=o.c||d[u].s.r!=o.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var h="",m="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":h="Number",m=String(e.v);break;case"b":h="Boolean",m=e.v?"1":"0";break;case"e":h="Error",m=vf[e.v];break;case"d":h="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||ra[14]);break;case"s":h="String",m=_xe(e.v||"");break}var p=tp(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var v=e.v!=null?m:"",g=e.t=="z"?"":'<Data ss:Type="'+h+'">'+v+"</Data>";return(e.c||[]).length>0&&(g+=o2e(e.c)),vr("Cell",g,l)}function c2e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=I0(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function d2e(e,t,r,n){if(!e["!ref"])return"";var s=Ga(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(b,y){Bm(b);var C=!!b.width,w=SS(y,b),k={"ss:Index":y+1};C&&(k["ss:Width"]=vy(w.width)),b.hidden&&(k["ss:Hidden"]="1"),l.push(vr("Column",null,k))});for(var c=Array.isArray(e),d=s.s.r;d<=s.e.r;++d){for(var u=[c2e(d,(e["!rows"]||[])[d])],h=s.s.c;h<=s.e.c;++h){var m=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>h)&&!(i[o].s.r>d)&&!(i[o].e.c<h)&&!(i[o].e.r<d)){(i[o].s.c!=h||i[o].s.r!=d)&&(m=!0);break}if(!m){var p={r:d,c:h},v=sa(p),g=c?(e[d]||[])[h]:e[v];u.push(l2e(g,v,e,t,r,n,p))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function u2e(e,t,r){var n=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?s2e(i,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?d2e(i,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(i2e(i,t,e,r)),n.join("")}function h2e(e,t){t||(t={}),e.SSF||(e.SSF=qn(ra)),e.SSF&&(ig(),vS(e.SSF),t.revssf=bS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],tp(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(t2e(e,t)),r.push(r2e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(vr("Worksheet",u2e(n,t,e),{"ss:Name":bn(e.SheetNames[n])}));return r[2]=a2e(e,t),r[3]=n2e(e),qs+vr("Workbook",r.join(""),{xmlns:Vl.ss,"xmlns:o":Vl.o,"xmlns:x":Vl.x,"xmlns:ss":Vl.ss,"xmlns:dt":Vl.dt,"xmlns:html":Vl.html})}function f2e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=nve(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=sve(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var m2e=[60,1084,2066,2165,2175];function p2e(e,t,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=$h(r,r.l),d=C5[c],u=0;d!=null&&m2e.indexOf(c)>-1;)i=$h(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),l=r.slice(u,r.l+4+i),o.push(l),r.l+=4+i,d=C5[c=$h(r,r.l)];var h=ki(o);Gi(h,0);var m=0;h.lens=[];for(var p=0;p<o.length;++p)h.lens.push(m),m+=o[p].length;if(h.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+h.length+" < "+n;return t.f(h,h.length,s)}function vu(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=ra[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||vf[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=uy(e.v):e.w=Nx(e.v):e.w=Gc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&sg(ra[n]||String(n))){var s=Qp(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function zj(e,t,r){return{v:e,ixfe:t,t:r}}function x2e(e,t){var r={opts:{}},n={},s=t.dense?[]:{},i={},o={},l=null,c=[],d="",u={},h,m="",p,v,g,b,y={},C=[],w,k,S=[],D=[],E={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},A=function(ve){return ve<8?lx[ve]:ve<64&&D[ve-8]||lx[ve]},L=function(ve,pe,De){var Ye=pe.XF.data;if(!(!Ye||!Ye.patternType||!De||!De.cellStyles)){pe.s={},pe.s.patternType=Ye.patternType;var Nt;(Nt=xy(A(Ye.icvFore)))&&(pe.s.fgColor={rgb:Nt}),(Nt=xy(A(Ye.icvBack)))&&(pe.s.bgColor={rgb:Nt})}},P=function(ve,pe,De){if(!(oe>1)&&!(De.sheetRows&&ve.r>=De.sheetRows)){if(De.cellStyles&&pe.XF&&pe.XF.data&&L(ve,pe,De),delete pe.ixfe,delete pe.XF,h=ve,m=sa(ve),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),ve.r<o.s.r&&(o.s.r=ve.r),ve.c<o.s.c&&(o.s.c=ve.c),ve.r+1>o.e.r&&(o.e.r=ve.r+1),ve.c+1>o.e.c&&(o.e.c=ve.c+1),De.cellFormula&&pe.f){for(var Ye=0;Ye<C.length;++Ye)if(!(C[Ye][0].s.c>ve.c||C[Ye][0].s.r>ve.r)&&!(C[Ye][0].e.c<ve.c||C[Ye][0].e.r<ve.r)){pe.F=ba(C[Ye][0]),(C[Ye][0].s.c!=ve.c||C[Ye][0].s.r!=ve.r)&&delete pe.f,pe.f&&(pe.f=""+vo(C[Ye][1],o,ve,J,O));break}}De.dense?(s[ve.r]||(s[ve.r]=[]),s[ve.r][ve.c]=pe):s[m]=pe}},O={enc:!1,sbcch:0,snames:[],sharedf:y,arrayf:C,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(O.password=t.password);var Z,z=[],K=[],B=[],Q=[],U=!1,J=[];J.SheetNames=O.snames,J.sharedf=O.sharedf,J.arrayf=O.arrayf,J.names=[],J.XTI=[];var Y=0,oe=0,M=0,V=[],H=[],ee;O.codepage=1200,Ed(1200);for(var re=!1;e.l<e.length-1;){var ae=e.l,ne=e.read_shift(2);if(ne===0&&Y===10)break;var ie=e.l===e.length?0:e.read_shift(2),G=C5[ne];if(G&&G.f){if(t.bookSheets&&Y===133&&ne!==133)break;if(Y=ne,G.r===2||G.r==12){var de=e.read_shift(2);if(ie-=2,!O.enc&&de!==ne&&((de&255)<<8|de>>8)!==ne)throw new Error("rt mismatch: "+de+"!="+ne);G.r==12&&(e.l+=10,ie-=10)}var X={};if(ne===10?X=G.f(e,ie,O):X=p2e(ne,G,e,ie,O),oe==0&&[9,521,1033,2057].indexOf(Y)===-1)continue;switch(ne){case 34:r.opts.Date1904=E.WBProps.date1904=X;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(O.enc||(e.l=0),O.enc=X,!t.password)throw new Error("File is password-protected");if(X.valid==null)throw new Error("Encryption scheme unsupported");if(!X.valid)throw new Error("Password is incorrect");break;case 92:O.lastuser=X;break;case 66:var le=Number(X);switch(le){case 21010:le=1200;break;case 32768:le=1e4;break;case 32769:le=1252;break}Ed(O.codepage=le),re=!0;break;case 317:O.rrtabid=X;break;case 25:O.winlocked=X;break;case 439:r.opts.RefreshAll=X;break;case 12:r.opts.CalcCount=X;break;case 16:r.opts.CalcDelta=X;break;case 17:r.opts.CalcIter=X;break;case 13:r.opts.CalcMode=X;break;case 14:r.opts.CalcPrecision=X;break;case 95:r.opts.CalcSaveRecalc=X;break;case 15:O.CalcRefMode=X;break;case 2211:r.opts.FullCalc=X;break;case 129:X.fDialog&&(s["!type"]="dialog"),X.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),X.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(X);break;case 430:J.push([X]),J[J.length-1].XTI=[];break;case 35:case 547:J[J.length-1].push(X);break;case 24:case 536:ee={Name:X.Name,Ref:vo(X.rgce,o,null,J,O)},X.itab>0&&(ee.Sheet=X.itab-1),J.names.push(ee),J[0]||(J[0]=[],J[0].XTI=[]),J[J.length-1].push(X),X.Name=="_xlnm._FilterDatabase"&&X.itab>0&&X.rgce&&X.rgce[0]&&X.rgce[0][0]&&X.rgce[0][0][0]=="PtgArea3d"&&(H[X.itab-1]={ref:ba(X.rgce[0][0][1][2])});break;case 22:O.ExternCount=X;break;case 23:J.length==0&&(J[0]=[],J[0].XTI=[]),J[J.length-1].XTI=J[J.length-1].XTI.concat(X),J.XTI=J.XTI.concat(X);break;case 2196:if(O.biff<8)break;ee!=null&&(ee.Comment=X[1]);break;case 18:s["!protect"]=X;break;case 19:X!==0&&O.WTF&&console.error("Password verifier: "+X);break;case 133:i[X.pos]=X,O.snames.push(X.name);break;case 10:{if(--oe)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=ba(o),t.sheetRows&&t.sheetRows<=o.e.r){var Se=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=ba(o),o.e.r=Se}o.e.r++,o.e.c++}z.length>0&&(s["!merges"]=z),K.length>0&&(s["!objects"]=K),B.length>0&&(s["!cols"]=B),Q.length>0&&(s["!rows"]=Q),E.Sheets.push(T)}d===""?u=s:n[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(O.biff===8&&(O.biff={9:2,521:3,1033:4}[ne]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[X.BIFFVer]||8),O.biffguess=X.BIFFVer==0,X.BIFFVer==0&&X.dt==4096&&(O.biff=5,re=!0,Ed(O.codepage=28591)),O.biff==8&&X.BIFFVer==0&&X.dt==16&&(O.biff=2),oe++)break;if(s=t.dense?[]:{},O.biff<8&&!re&&(re=!0,Ed(O.codepage=t.codepage||1252)),O.biff<5||X.BIFFVer==0&&X.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ue={pos:e.l-ie,name:d};i[ue.pos]=ue,O.snames.push(d)}else d=(i[ae]||{name:""}).name;X.dt==32&&(s["!type"]="chart"),X.dt==64&&(s["!type"]="macro"),z=[],K=[],O.arrayf=C=[],B=[],Q=[],U=!1,T={Hidden:(i[ae]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[X.r]||[])[X.c]:s[sa({c:X.c,r:X.r})])&&++X.c,w={ixfe:X.ixfe,XF:S[X.ixfe]||{},v:X.val,t:"n"},M>0&&(w.z=V[w.ixfe>>8&63]),vu(w,t,r.opts.Date1904),P({c:X.c,r:X.r},w,t);break;case 5:case 517:w={ixfe:X.ixfe,XF:S[X.ixfe],v:X.val,t:X.t},M>0&&(w.z=V[w.ixfe>>8&63]),vu(w,t,r.opts.Date1904),P({c:X.c,r:X.r},w,t);break;case 638:w={ixfe:X.ixfe,XF:S[X.ixfe],v:X.rknum,t:"n"},M>0&&(w.z=V[w.ixfe>>8&63]),vu(w,t,r.opts.Date1904),P({c:X.c,r:X.r},w,t);break;case 189:for(var se=X.c;se<=X.C;++se){var ye=X.rkrec[se-X.c][0];w={ixfe:ye,XF:S[ye],v:X.rkrec[se-X.c][1],t:"n"},M>0&&(w.z=V[w.ixfe>>8&63]),vu(w,t,r.opts.Date1904),P({c:se,r:X.r},w,t)}break;case 6:case 518:case 1030:{if(X.val=="String"){l=X;break}if(w=zj(X.val,X.cell.ixfe,X.tt),w.XF=S[w.ixfe],t.cellFormula){var Ne=X.formula;if(Ne&&Ne[0]&&Ne[0][0]&&Ne[0][0][0]=="PtgExp"){var Ue=Ne[0][0][1][0],Qe=Ne[0][0][1][1],ot=sa({r:Ue,c:Qe});y[ot]?w.f=""+vo(X.formula,o,X.cell,J,O):w.F=((t.dense?(s[Ue]||[])[Qe]:s[ot])||{}).F}else w.f=""+vo(X.formula,o,X.cell,J,O)}M>0&&(w.z=V[w.ixfe>>8&63]),vu(w,t,r.opts.Date1904),P(X.cell,w,t),l=X}break;case 7:case 519:if(l)l.val=X,w=zj(X,l.cell.ixfe,"s"),w.XF=S[w.ixfe],t.cellFormula&&(w.f=""+vo(l.formula,o,l.cell,J,O)),M>0&&(w.z=V[w.ixfe>>8&63]),vu(w,t,r.opts.Date1904),P(l.cell,w,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{C.push(X);var xt=sa(X[0].s);if(p=t.dense?(s[X[0].s.r]||[])[X[0].s.c]:s[xt],t.cellFormula&&p){if(!l||!xt||!p)break;p.f=""+vo(X[1],o,X[0],J,O),p.F=ba(X[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;y[sa(l.cell)]=X[0],p=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[sa(l.cell)],(p||{}).f=""+vo(X[0],o,h,J,O)}}break;case 253:w=zj(c[X.isst].t,X.ixfe,"s"),c[X.isst].h&&(w.h=c[X.isst].h),w.XF=S[w.ixfe],M>0&&(w.z=V[w.ixfe>>8&63]),vu(w,t,r.opts.Date1904),P({c:X.c,r:X.r},w,t);break;case 513:t.sheetStubs&&(w={ixfe:X.ixfe,XF:S[X.ixfe],t:"z"},M>0&&(w.z=V[w.ixfe>>8&63]),vu(w,t,r.opts.Date1904),P({c:X.c,r:X.r},w,t));break;case 190:if(t.sheetStubs)for(var Le=X.c;Le<=X.C;++Le){var dt=X.ixfe[Le-X.c];w={ixfe:dt,XF:S[dt],t:"z"},M>0&&(w.z=V[w.ixfe>>8&63]),vu(w,t,r.opts.Date1904),P({c:Le,r:X.r},w,t)}break;case 214:case 516:case 4:w=zj(X.val,X.ixfe,"s"),w.XF=S[w.ixfe],M>0&&(w.z=V[w.ixfe>>8&63]),vu(w,t,r.opts.Date1904),P({c:X.c,r:X.r},w,t);break;case 0:case 512:oe===1&&(o=X);break;case 252:c=X;break;case 1054:if(O.biff==4){V[M++]=X[1];for(var Tt=0;Tt<M+163&&ra[Tt]!=X[1];++Tt);Tt>=163&&Wh(X[1],M+163)}else Wh(X[1],X[0]);break;case 30:{V[M++]=X;for(var At=0;At<M+163&&ra[At]!=X;++At);At>=163&&Wh(X,M+163)}break;case 229:z=z.concat(X);break;case 93:K[X.cmo[0]]=O.lastobj=X;break;case 438:O.lastobj.TxO=X;break;case 127:O.lastobj.ImData=X;break;case 440:for(b=X[0].s.r;b<=X[0].e.r;++b)for(g=X[0].s.c;g<=X[0].e.c;++g)p=t.dense?(s[b]||[])[g]:s[sa({c:g,r:b})],p&&(p.l=X[1]);break;case 2048:for(b=X[0].s.r;b<=X[0].e.r;++b)for(g=X[0].s.c;g<=X[0].e.c;++g)p=t.dense?(s[b]||[])[g]:s[sa({c:g,r:b})],p&&p.l&&(p.l.Tooltip=X[1]);break;case 28:{if(O.biff<=5&&O.biff>=2)break;p=t.dense?(s[X[0].r]||[])[X[0].c]:s[sa(X[0])];var Vt=K[X[2]];p||(t.dense?(s[X[0].r]||(s[X[0].r]=[]),p=s[X[0].r][X[0].c]={t:"z"}):p=s[sa(X[0])]={t:"z"},o.e.r=Math.max(o.e.r,X[0].r),o.s.r=Math.min(o.s.r,X[0].r),o.e.c=Math.max(o.e.c,X[0].c),o.s.c=Math.min(o.s.c,X[0].c)),p.c||(p.c=[]),v={a:X[1],t:Vt.TxO.t},p.c.push(v)}break;case 2173:aye(S[X.ixfe],X.ext);break;case 125:{if(!O.cellStyles)break;for(;X.e>=X.s;)B[X.e--]={width:X.w/256,level:X.level||0,hidden:!!(X.flags&1)},U||(U=!0,BT(X.w/256)),Bm(B[X.e+1])}break;case 520:{var xe={};X.level!=null&&(Q[X.r]=xe,xe.level=X.level),X.hidden&&(Q[X.r]=xe,xe.hidden=!0),X.hpt&&(Q[X.r]=xe,xe.hpt=X.hpt,xe.hpx=I0(X.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||ux(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ne]]=X;break;case 161:s["!margins"]||ux(s["!margins"]={}),s["!margins"].header=X.header,s["!margins"].footer=X.footer;break;case 574:X.RTL&&(E.Views[0].RTL=!0);break;case 146:D=X;break;case 2198:Z=X;break;case 140:k=X;break;case 442:d?T.CodeName=X||T.name:E.WBProps.CodeName=X||"ThisWorkbook";break}}else G||console.error("Missing Info for XLS Record 0x"+ne.toString(16)),e.l+=ie}return r.SheetNames=Ss(i).sort(function(he,ve){return Number(he)-Number(ve)}).map(function(he){return i[he].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&H.forEach(function(he,ve){r.Sheets[r.SheetNames[ve]]["!autofilter"]=he}),r.Strings=c,r.SSF=qn(ra),O.enc&&(r.Encryption=O.enc),Z&&(r.Themes=Z),r.Metadata={},k!==void 0&&(r.Metadata.Country=k),J.names.length>0&&(E.Names=J.names),r.Workbook=E,r}var Hb={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function v2e(e,t,r){var n=Hr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=N6(n,g5,Hb.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=Hr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=N6(o,b5,Hb.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(Mz(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function g2e(e,t){var r=[],n=[],s=[],i=0,o,l=JL(g5,"n"),c=JL(b5,"n");if(e.Props)for(o=Ss(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Ss(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<s.length;++i)Vz.indexOf(s[i][0])>-1||Oz.indexOf(s[i][0])>-1||s[i][1]!=null&&d.push(s[i]);n.length&&Hr.utils.cfb_add(t,"/SummaryInformation",w6(n,Hb.SI,c,b5)),(r.length||d.length)&&Hr.utils.cfb_add(t,"/DocumentSummaryInformation",w6(r,Hb.DSI,l,g5,d.length?d:null,Hb.UDI))}function FH(e,t){t||(t={}),YT(t),pT(),t.codepage&&mT(t.codepage);var r,n;if(e.FullPaths){if(Hr.find(e,"/encryption"))throw new Error("File is password-protected");r=Hr.find(e,"!CompObj"),n=Hr.find(e,"/Workbook")||Hr.find(e,"/Book")}else{switch(t.type){case"base64":e=Wl(ic(e));break;case"binary":e=Wl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Gi(e,0),n={content:e}}var s,i;if(r&&f2e(r),t.bookProps&&!t.bookSheets)s={};else{var o=_a?"buffer":"array";if(n&&n.content)s=x2e(n.content,t);else if((i=Hr.find(e,"PerfectOffice_MAIN"))&&i.content)s=dx.to_workbook(i.content,(t.type=o,t));else if((i=Hr.find(e,"NativeContent_MAIN"))&&i.content)s=dx.to_workbook(i.content,(t.type=o,t));else throw(i=Hr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Hr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=Tye(e))}var l={};return e.FullPaths&&v2e(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function b2e(e,t){var r=t||{},n=Hr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Hr.utils.cfb_add(n,s,LH(e,r)),r.biff==8&&(e.Props||e.Custprops)&&g2e(e,n),r.biff==8&&e.vbaraw&&Iye(n,Hr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var yy={0:{f:qje},1:{f:Qje},2:{f:xNe},3:{f:sNe},4:{f:tNe},5:{f:fNe},6:{f:jNe},7:{f:cNe},8:{f:ENe},9:{f:_Ne},10:{f:CNe},11:{f:kNe},12:{f:Zje},13:{f:gNe},14:{f:oNe},15:{f:aNe},16:{f:DH},17:{f:wNe},18:{f:uNe},19:{f:DT},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:wwe},40:{},42:{},43:{f:jbe},44:{f:bbe},45:{f:Sbe},46:{f:kbe},47:{f:Cbe},48:{},49:{f:Wxe},50:{},51:{f:iye},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Zz},62:{f:yNe},63:{f:pye},64:{f:zNe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Do,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:UNe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Kje},148:{f:Wje,p:16},151:{f:ONe},152:{},153:{f:ywe},154:{},155:{},156:{f:gwe},157:{},158:{},159:{T:1,f:Rge},160:{T:-1},161:{T:1,f:Vx},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:DNe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:nye},336:{T:-1},337:{f:cye,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:v5},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Jz},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:MNe},427:{f:RNe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:LNe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Yje},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:INe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:v5},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:kye},633:{T:1},634:{T:-1},635:{T:1,f:Sye},636:{T:-1},637:{f:Xxe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:owe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:HNe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},C5={6:{f:rE},10:{f:pm},12:{f:Zs},13:{f:Zs},14:{f:Ms},15:{f:Ms},16:{f:No},17:{f:Ms},18:{f:Ms},19:{f:Zs},20:{f:D6},21:{f:D6},23:{f:Jz},24:{f:T6},25:{f:Ms},26:{},27:{},28:{f:H0e},29:{},34:{f:Ms},35:{f:A6},38:{f:No},39:{f:No},40:{f:No},41:{f:No},42:{f:Ms},43:{f:Ms},47:{f:abe},49:{f:g0e},51:{f:Zs},60:{},61:{f:f0e},64:{f:Ms},65:{f:v0e},66:{f:Zs},77:{},80:{},81:{},82:{},85:{f:Zs},89:{},90:{},91:{},92:{f:r0e},93:{f:Y0e},94:{},95:{f:Ms},96:{},97:{},99:{f:Ms},125:{f:Zz},128:{f:P0e},129:{f:n0e},130:{f:Zs},131:{f:Ms},132:{f:Ms},133:{f:s0e},134:{},140:{f:rge},141:{f:Zs},144:{},146:{f:sge},151:{},152:{},153:{},154:{},155:{},156:{f:Zs},157:{},158:{},160:{f:hge},161:{f:lge},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:D0e},190:{f:A0e},193:{f:pm},197:{},198:{},199:{},200:{},201:{},202:{f:Ms},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Zs},220:{},221:{f:Ms},222:{},224:{f:I0e},225:{f:t0e},226:{f:pm},227:{},229:{f:W0e},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:o0e},253:{f:y0e},255:{f:c0e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:qz},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ms},353:{f:pm},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:L0e},431:{f:Ms},432:{},433:{},434:{},437:{},438:{f:Q0e},439:{f:Ms},440:{f:J0e},441:{},442:{f:a1},443:{},444:{f:Zs},445:{},446:{},448:{f:pm},449:{f:h0e,r:2},450:{f:pm},512:{f:k6},513:{f:uge},515:{f:R0e},516:{f:N0e},517:{f:E6},519:{f:fge},520:{f:d0e},523:{},545:{f:I6},549:{f:C6},566:{},574:{f:p0e},638:{f:E0e},659:{},1048:{},1054:{f:S0e},1084:{},1212:{f:V0e},2048:{f:ege},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:$j},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:pm},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:ige,r:12},2173:{f:rye,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ms,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:$0e,r:12},2197:{},2198:{f:Xbe,r:12},2199:{},2200:{},2201:{},2202:{f:q0e,r:12},2203:{f:pm},2204:{},2205:{},2206:{},2207:{},2211:{f:u0e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Zs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:cge},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:nge},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:k6},1:{},2:{f:gge},3:{f:xge},4:{f:pge},5:{f:E6},7:{f:yge},8:{},9:{f:$j},11:{},22:{f:Zs},30:{f:k0e},31:{},32:{},33:{f:I6},36:{},37:{f:C6},50:{f:jge},62:{},52:{},67:{},68:{f:Zs},69:{},86:{},126:{},127:{f:mge},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:Nge},223:{},234:{},354:{},421:{},518:{f:rE},521:{f:$j},536:{f:T6},547:{f:A6},561:{},579:{},1030:{f:rE},1033:{f:$j},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function gr(e,t,r,n){var s=t;if(!isNaN(s)){var i=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&kT(r)&&e.push(r)}}function y2e(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return gr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<s;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function o1(e,t,r){return e||(e=qt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function j2e(e,t,r,n){var s=qt(9);return o1(s,e,t),zz(r,n||"b",s),s}function N2e(e,t,r){var n=qt(8+2*r.length);return o1(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function w2e(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?hi(Vn(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?gr(e,2,bge(r,n,s)):gr(e,3,vge(r,n,s));return;case"b":case"e":gr(e,5,j2e(r,n,t.v,t.t));return;case"s":case"str":gr(e,4,N2e(r,n,(t.v||"").slice(0,255)));return}gr(e,1,o1(null,r,n))}function S2e(e,t,r,n){var s=Array.isArray(t),i=Ga(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=ba(i)}for(var d=i.s.r;d<=i.e.r;++d){l=$s(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=cs(u)),o=c[u]+l;var h=s?(t[d]||[])[u]:t[o];h&&w2e(e,h,d,u)}}}function C2e(e,t){for(var r=t||{},n=hl(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return gr(n,r.biff==4?1033:r.biff==3?521:9,RT(e,16,r)),S2e(n,e.Sheets[e.SheetNames[s]],s,r),gr(n,10),n.end()}function k2e(e,t,r){gr(e,49,b0e({sz:12,name:"Arial"},r))}function _2e(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&gr(e,1054,C0e(s,t[s],r))})}function E2e(e,t){var r=qt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),gr(e,2151,r),r=qt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),Kz(Ga(t["!ref"]||"A1"),r),r.write_shift(4,4),gr(e,2152,r)}function D2e(e,t){for(var r=0;r<16;++r)gr(e,224,_6({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){gr(e,224,_6(n,0,t))})}function A2e(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];gr(e,440,Z0e(n)),n[1].Tooltip&&gr(e,2048,tge(n))}delete t["!links"]}function T2e(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&gr(e,125,oge(SS(s,n),s))})}}function I2e(e,t,r,n,s){var i=16+tp(s.cellXfs,t,s);if(t.v==null&&!t.bf){gr(e,513,kx(r,n,i));return}if(t.bf)gr(e,6,nje(t,r,n,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?hi(Vn(t.v)):t.v;gr(e,515,F0e(r,n,o,i));break;case"b":case"e":gr(e,517,M0e(r,n,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=zT(s.Strings,t.v,s.revStrings);gr(e,253,j0e(r,n,l,i))}else gr(e,516,w0e(r,n,(t.v||"").slice(0,255),i,s));break;default:gr(e,513,kx(r,n,i))}}function P2e(e,t,r){var n=hl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,h="",m=[],p=Ga(i["!ref"]||"A1"),v=d?65536:16384;if(p.e.c>255||p.e.r>=v){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,v-1)}gr(n,2057,RT(r,16,t)),gr(n,13,Oc(1)),gr(n,12,Oc(100)),gr(n,15,Bo(!0)),gr(n,17,Bo(!1)),gr(n,16,Sx(.001)),gr(n,95,Bo(!0)),gr(n,42,Bo(!1)),gr(n,43,Bo(!1)),gr(n,130,Oc(1)),gr(n,128,O0e()),gr(n,131,Bo(!1)),gr(n,132,Bo(!1)),d&&T2e(n,i["!cols"]),gr(n,512,_0e(p,t)),d&&(i["!links"]=[]);for(var g=p.s.r;g<=p.e.r;++g){h=$s(g);for(var b=p.s.c;b<=p.e.c;++b){g===p.s.r&&(m[b]=cs(b)),u=m[b]+h;var y=c?(i[g]||[])[b]:i[u];y&&(I2e(n,y,g,b,t),d&&y.l&&i["!links"].push([u,y.l]))}}var C=l.CodeName||l.name||s;return d&&gr(n,574,x0e((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&gr(n,229,G0e(i["!merges"])),d&&A2e(n,i),gr(n,442,Hz(C)),d&&E2e(n,i),gr(n,10),n.end()}function O2e(e,t,r){var n=hl(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(gr(n,2057,RT(e,5,r)),r.bookType=="xla"&&gr(n,135),gr(n,225,l?Oc(1200):null),gr(n,193,Mve(2)),c&&gr(n,191),c&&gr(n,192),gr(n,226),gr(n,92,a0e("SheetJS",r)),gr(n,66,Oc(l?1200:1252)),l&&gr(n,353,Oc(0)),l&&gr(n,448),gr(n,317,dge(e.SheetNames.length)),l&&e.vbaraw&&gr(n,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";gr(n,442,Hz(d))}gr(n,156,Oc(17)),gr(n,25,Bo(!1)),gr(n,18,Bo(!1)),gr(n,19,Oc(0)),l&&gr(n,431,Bo(!1)),l&&gr(n,444,Oc(0)),gr(n,61,m0e()),gr(n,64,Bo(!1)),gr(n,141,Oc(0)),gr(n,34,Bo(hwe(e)=="true")),gr(n,14,Bo(!0)),l&&gr(n,439,Bo(!1)),gr(n,218,Oc(0)),k2e(n,e,r),_2e(n,e.SSF,r),D2e(n,r),l&&gr(n,352,Bo(!1));var u=n.end(),h=hl();l&&gr(h,140,age()),l&&r.Strings&&y2e(h,252,l0e(r.Strings)),gr(h,10);var m=h.end(),p=hl(),v=0,g=0;for(g=0;g<e.SheetNames.length;++g)v+=(l?12:11)+(l?2:1)*e.SheetNames[g].length;var b=u.length+v+m.length;for(g=0;g<e.SheetNames.length;++g){var y=i[g]||{};gr(p,133,i0e({pos:b,hs:y.Hidden||0,dt:0,name:e.SheetNames[g]},r)),b+=t[g].length}var C=p.end();if(v!=C.length)throw new Error("BS8 "+v+" != "+C.length);var w=[];return u.length&&w.push(u),C.length&&w.push(C),m.length&&w.push(m),ki(w)}function M2e(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=qn(ra)),e&&e.SSF&&(ig(),vS(e.SSF),r.revssf=bS(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,KT(r),r.cellXfs=[],tp(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=P2e(s,r,e);return n.unshift(O2e(e,n,r)),ki(n)}function LH(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=ml(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return M2e(e,t);case 4:case 3:case 2:return C2e(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function V6(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=bxe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,h=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},v=[];for(o=0;o<c.length;++o){var g=c[o].trim(),b=g.slice(0,3).toLowerCase();if(b=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(b!="<td"&&b!="<th")){var y=g.split(/<\/t[dh]>/i);for(l=0;l<y.length;++l){var C=y[l].trim();if(C.match(/<t[dh]/i)){for(var w=C,k=0;w.charAt(0)=="<"&&(k=w.indexOf(">"))>-1;)w=w.slice(k+1);for(var S=0;S<v.length;++S){var D=v[S];D.s.c==u&&D.s.r<d&&d<=D.e.r&&(u=D.e.c+1,S=-1)}var E=oa(C.slice(0,C.indexOf(">")));m=E.colspan?+E.colspan:1,((h=+E.rowspan)>1||m>1)&&v.push({s:{r:d,c:u},e:{r:d+(h||1)-1,c:u+m-1}});var T=E.t||E["data-t"]||"";if(!w.length){u+=m;continue}if(w=lz(w),p.s.r>d&&(p.s.r=d),p.e.r<d&&(p.e.r=d),p.s.c>u&&(p.s.c=u),p.e.c<u&&(p.e.c=u),!w.length){u+=m;continue}var A={t:"s",v:w};r.raw||!w.trim().length||T=="s"||(w==="TRUE"?A={t:"b",v:!0}:w==="FALSE"?A={t:"b",v:!1}:isNaN(Td(w))?isNaN(A0(w).getDate())||(A={t:"d",v:Vn(w)},r.cellDates||(A={t:"n",v:hi(A.v)}),A.z=r.dateNF||ra[14]):A={t:"n",v:Td(w)}),r.dense?(n[d]||(n[d]=[]),n[d][u]=A):n[sa({r:d,c:u})]=A,u+=m}}}}return n["!ref"]=ba(p),v.length&&(n["!merges"]=v),n}function R2e(e,t,r,n){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,c=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var u=sa({r,c:o}),h=n.dense?(e[r]||[])[o]:e[u],m=h&&h.v!=null&&(h.h||wT(h.w||(of(h),h.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),n.editable?m='<span contenteditable="true">'+m+"</span>":h&&(p["data-t"]=h&&h.t||"z",h.v!=null&&(p["data-v"]=h.v),h.z!=null&&(p["data-z"]=h.z),h.l&&(h.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+h.l.Target+'">'+m+"</a>")),p.id=(n.id||"sjs")+"-"+u,i.push(vr("td",m,p))}}var v="<tr>";return v+i.join("")+"</tr>"}var F2e='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',L2e="</body></html>";function B2e(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return ep(V6(r[0],t),t);var n=JT();return r.forEach(function(s,i){ZT(n,V6(s,t),"Sheet"+(i+1))}),n}function U2e(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function BH(e,t){var r=t||{},n=r.header!=null?r.header:F2e,s=r.footer!=null?r.footer:L2e,i=[n],o=ml(e["!ref"]);r.dense=Array.isArray(e),i.push(U2e(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(R2e(e,o,l,r));return i.push("</table>"+s),i.join("")}function UH(e,t,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?ds(n.origin):n.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var u=ml(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),s==-1&&(d.e.r=s=u.e.r+1)}var h=[],m=0,p=e["!rows"]||(e["!rows"]=[]),v=0,g=0,b=0,y=0,C=0,w=0;for(e["!cols"]||(e["!cols"]=[]);v<l.length&&g<c;++v){var k=l[v];if(q6(k)){if(n.display)continue;p[g]={hidden:!0}}var S=k.children;for(b=y=0;b<S.length;++b){var D=S[b];if(!(n.display&&q6(D))){var E=D.hasAttribute("data-v")?D.getAttribute("data-v"):D.hasAttribute("v")?D.getAttribute("v"):lz(D.innerHTML),T=D.getAttribute("data-z")||D.getAttribute("z");for(m=0;m<h.length;++m){var A=h[m];A.s.c==y+i&&A.s.r<g+s&&g+s<=A.e.r&&(y=A.e.c+1-i,m=-1)}w=+D.getAttribute("colspan")||1,((C=+D.getAttribute("rowspan")||1)>1||w>1)&&h.push({s:{r:g+s,c:y+i},e:{r:g+s+(C||1)-1,c:y+i+(w||1)-1}});var L={t:"s",v:E},P=D.getAttribute("data-t")||D.getAttribute("t")||"";E!=null&&(E.length==0?L.t=P||"z":n.raw||E.trim().length==0||P=="s"||(E==="TRUE"?L={t:"b",v:!0}:E==="FALSE"?L={t:"b",v:!1}:isNaN(Td(E))?isNaN(A0(E).getDate())||(L={t:"d",v:Vn(E)},n.cellDates||(L={t:"n",v:hi(L.v)}),L.z=n.dateNF||ra[14]):L={t:"n",v:Td(E)})),L.z===void 0&&T!=null&&(L.z=T);var O="",Z=D.getElementsByTagName("A");if(Z&&Z.length)for(var z=0;z<Z.length&&!(Z[z].hasAttribute("href")&&(O=Z[z].getAttribute("href"),O.charAt(0)!="#"));++z);O&&O.charAt(0)!="#"&&(L.l={Target:O}),n.dense?(e[g+s]||(e[g+s]=[]),e[g+s][y+i]=L):e[sa({c:y+i,r:g+s})]=L,d.e.c<y+i&&(d.e.c=y+i),y+=w}}++g}return h.length&&(e["!merges"]=(e["!merges"]||[]).concat(h)),d.e.r=Math.max(d.e.r,g-1+s),e["!ref"]=ba(d),g>=c&&(e["!fullref"]=ba((d.e.r=l.length-v+g-1+s,d))),e}function $H(e,t){var r=t||{},n=r.dense?[]:{};return UH(n,e,t)}function $2e(e,t){return ep($H(e,t),t)}function q6(e){var t="",r=V2e(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function V2e(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function q2e(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Wa(t.replace(/<[^>]*>/g,""));return[r]}var z6={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function VH(e,t){var r=t||{},n=ST(e),s=[],i,o,l={name:""},c="",d=0,u,h,m={},p=[],v=r.dense?[]:{},g,b,y={value:""},C="",w=0,k=[],S=-1,D=-1,E={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,A={},L=[],P={},O=0,Z=0,z=[],K=1,B=1,Q=[],U={Names:[]},J={},Y=["",""],oe=[],M={},V="",H=0,ee=!1,re=!1,ae=0;for(my.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=my.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"工作表":g[1]==="/"?(E.e.c>=E.s.c&&E.e.r>=E.s.r?v["!ref"]=ba(E):v["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=E.e.r&&(v["!fullref"]=v["!ref"],E.e.r=r.sheetRows-1,v["!ref"]=ba(E)),L.length&&(v["!merges"]=L),z.length&&(v["!rows"]=z),u.name=u.名称||u.name,typeof JSON<"u"&&JSON.stringify(u),p.push(u.name),m[u.name]=v,re=!1):g[0].charAt(g[0].length-2)!=="/"&&(u=oa(g[0],!1),S=D=-1,E.s.r=E.s.c=1e7,E.e.r=E.e.c=0,v=r.dense?[]:{},L=[],z=[],re=!0);break;case"table-row-group":g[1]==="/"?--T:++T;break;case"table-row":case"行":if(g[1]==="/"){S+=K,K=1;break}if(h=oa(g[0],!1),h.行号?S=h.行号-1:S==-1&&(S=0),K=+h["number-rows-repeated"]||1,K<10)for(ae=0;ae<K;++ae)T>0&&(z[S+ae]={level:T});D=-1;break;case"covered-table-cell":g[1]!=="/"&&++D,r.sheetStubs&&(r.dense?(v[S]||(v[S]=[]),v[S][D]={t:"z"}):v[sa({r:S,c:D})]={t:"z"}),C="",k=[];break;case"table-cell":case"数据":if(g[0].charAt(g[0].length-2)==="/")++D,y=oa(g[0],!1),B=parseInt(y["number-columns-repeated"]||"1",10),b={t:"z",v:null},y.formula&&r.cellFormula!=!1&&(b.f=B6(Wa(y.formula))),(y.数据类型||y["value-type"])=="string"&&(b.t="s",b.v=Wa(y["string-value"]||""),r.dense?(v[S]||(v[S]=[]),v[S][D]=b):v[sa({r:S,c:D})]=b),D+=B-1;else if(g[1]!=="/"){++D,C="",w=0,k=[],B=1;var ne=K?S+K-1:S;if(D>E.e.c&&(E.e.c=D),D<E.s.c&&(E.s.c=D),S<E.s.r&&(E.s.r=S),ne>E.e.r&&(E.e.r=ne),y=oa(g[0],!1),oe=[],M={},b={t:y.数据类型||y["value-type"],v:null},r.cellFormula)if(y.formula&&(y.formula=Wa(y.formula)),y["number-matrix-columns-spanned"]&&y["number-matrix-rows-spanned"]&&(O=parseInt(y["number-matrix-rows-spanned"],10)||0,Z=parseInt(y["number-matrix-columns-spanned"],10)||0,P={s:{r:S,c:D},e:{r:S+O-1,c:D+Z-1}},b.F=ba(P),Q.push([P,b.F])),y.formula)b.f=B6(y.formula);else for(ae=0;ae<Q.length;++ae)S>=Q[ae][0].s.r&&S<=Q[ae][0].e.r&&D>=Q[ae][0].s.c&&D<=Q[ae][0].e.c&&(b.F=Q[ae][1]);switch((y["number-columns-spanned"]||y["number-rows-spanned"])&&(O=parseInt(y["number-rows-spanned"],10)||0,Z=parseInt(y["number-columns-spanned"],10)||0,P={s:{r:S,c:D},e:{r:S+O-1,c:D+Z-1}},L.push(P)),y["number-columns-repeated"]&&(B=parseInt(y["number-columns-repeated"],10)),b.t){case"boolean":b.t="b",b.v=Un(y["boolean-value"]);break;case"float":b.t="n",b.v=parseFloat(y.value);break;case"percentage":b.t="n",b.v=parseFloat(y.value);break;case"currency":b.t="n",b.v=parseFloat(y.value);break;case"date":b.t="d",b.v=Vn(y["date-value"]),r.cellDates||(b.t="n",b.v=hi(b.v)),b.z="m/d/yy";break;case"time":b.t="n",b.v=xxe(y["time-value"])/86400,r.cellDates&&(b.t="d",b.v=yS(b.v)),b.z="HH:MM:SS";break;case"number":b.t="n",b.v=parseFloat(y.数据数值);break;default:if(b.t==="string"||b.t==="text"||!b.t)b.t="s",y["string-value"]!=null&&(C=Wa(y["string-value"]),k=[]);else throw new Error("Unsupported value type "+b.t)}}else{if(ee=!1,b.t==="s"&&(b.v=C||"",k.length&&(b.R=k),ee=w==0),J.Target&&(b.l=J),oe.length>0&&(b.c=oe,oe=[]),C&&r.cellText!==!1&&(b.w=C),ee&&(b.t="z",delete b.v),(!ee||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var ie=0;ie<K;++ie){if(B=parseInt(y["number-columns-repeated"]||"1",10),r.dense)for(v[S+ie]||(v[S+ie]=[]),v[S+ie][D]=ie==0?b:qn(b);--B>0;)v[S+ie][D+B]=qn(b);else for(v[sa({r:S+ie,c:D})]=b;--B>0;)v[sa({r:S+ie,c:D+B})]=qn(b);E.e.c<=D&&(E.e.c=D)}B=parseInt(y["number-columns-repeated"]||"1",10),D+=B-1,B=0,b={},C="",k=[]}J={};break;case"document":case"document-content":case"电子表格文档":case"spreadsheet":case"主体":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i;M.t=C,k.length&&(M.R=k),M.a=V,oe.push(M)}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);V="",H=0,C="",w=0,k=[];break;case"creator":g[1]==="/"?V=n.slice(H,g.index):H=g.index+g[0].length;break;case"meta":case"元数据":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);C="",w=0,k=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(A[l.name]=c,(i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(c="",l=oa(g[0],!1),s.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=oa(g[0],!1),c+=z6[g[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=oa(g[0],!1),c+=z6[g[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(d,g.index);break}else d=g.index+g[0].length;break;case"named-range":o=oa(g[0],!1),Y=aE(o["cell-range-address"]);var G={Name:o.name,Ref:Y[0]+"!"+Y[1]};re&&(G.Sheet=p.length),U.Names.push(G);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"电子表格":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"文本串":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(g[1]==="/"&&(!y||!y["string-value"])){var de=q2e(n.slice(w,g.index));C=(C.length>0?C+`
`:"")+de[0]}else oa(g[0],!1),w=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{Y=aE(oa(g[0])["target-range-address"]),m[Y[0]]["!autofilter"]={ref:Y[1]}}catch{}break;case"date":break;case"object":break;case"title":case"标题":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(J=oa(g[0],!1),!J.href)break;J.Target=Wa(J.href),delete J.href,J.Target.charAt(0)=="#"&&J.Target.indexOf(".")>-1?(Y=aE(J.Target.slice(1)),J.Target="#"+Y[0]+"!"+Y[1]):J.Target.match(/^\.\.[\\\/]/)&&(J.Target=J.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case"表:":case"字:":break;default:if(r.WTF)throw new Error(g)}}var X={Sheets:m,SheetNames:p,Workbook:U};return r.bookSheets&&delete X.Sheets,X}function H6(e,t){t=t||{},Pc(e,"META-INF/manifest.xml")&&xve(Js(e,"META-INF/manifest.xml"),t);var r=Gl(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=VH(Cn(r),t);return Pc(e,"meta.xml")&&(n.Props=Iz(Js(e,"meta.xml"))),n}function W6(e,t){return VH(e,t)}var z2e=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+fy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return qs+t}}(),G6=function(){var e=function(i){return bn(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var c=[];c.push('      <table:table table:name="'+bn(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,h=ml(i["!ref"]||"A1"),m=i["!merges"]||[],p=0,v=Array.isArray(i);if(i["!cols"])for(u=0;u<=h.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var g="",b=i["!rows"]||[];for(d=0;d<h.s.r;++d)g=b[d]?' table:style-name="ro'+b[d].ods+'"':"",c.push("        <table:table-row"+g+`></table:table-row>
`);for(;d<=h.e.r;++d){for(g=b[d]?' table:style-name="ro'+b[d].ods+'"':"",c.push("        <table:table-row"+g+`>
`),u=0;u<h.s.c;++u)c.push(t);for(;u<=h.e.c;++u){var y=!1,C={},w="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>u)&&!(m[p].s.r>d)&&!(m[p].e.c<u)&&!(m[p].e.r<d)){(m[p].s.c!=u||m[p].s.r!=d)&&(y=!0),C["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,C["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(y){c.push(r);continue}var k=sa({r:d,c:u}),S=v?(i[d]||[])[u]:i[k];if(S&&S.f&&(C["table:formula"]=bn(dje(S.f)),S.F&&S.F.slice(0,k.length)==k)){var D=ml(S.F);C["table:number-matrix-columns-spanned"]=D.e.c-D.s.c+1,C["table:number-matrix-rows-spanned"]=D.e.r-D.s.r+1}if(!S){c.push(t);continue}switch(S.t){case"b":w=S.v?"TRUE":"FALSE",C["office:value-type"]="boolean",C["office:boolean-value"]=S.v?"true":"false";break;case"n":w=S.w||String(S.v||0),C["office:value-type"]="float",C["office:value"]=S.v||0;break;case"s":case"str":w=S.v==null?"":S.v,C["office:value-type"]="string";break;case"d":w=S.w||Vn(S.v).toISOString(),C["office:value-type"]="date",C["office:date-value"]=Vn(S.v).toISOString(),C["table:style-name"]="ce1";break;default:c.push(t);continue}var E=e(w);if(S.l&&S.l.Target){var T=S.l.Target;T=T.charAt(0)=="#"?"#"+uje(T.slice(1)):T,T.charAt(0)!="#"&&!T.match(/^\w+:/)&&(T="../"+T),E=vr("text:a",E,{"xlink:href":T.replace(/&/g,"&amp;")})}c.push("          "+vr("table:table-cell",vr("text:p",E,{}),C)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var h=d["!cols"][u];if(h.width==null&&h.wpx==null&&h.wch==null)continue;Bm(h),h.ods=l;var m=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var h=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+h+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[qs],d=fy({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=fy({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(Tz().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var h=0;h!=o.SheetNames.length;++h)c.push(n(o.Sheets[o.SheetNames[h]],o,h));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function qH(e,t){if(t.bookType=="fods")return G6(e,t);var r=yT(),n="",s=[],i=[];return n="mimetype",wa(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",wa(r,n,G6(e,t)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",wa(r,n,z2e(e,t)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",wa(r,n,qs+Tz()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",wa(r,n,bve(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",wa(r,n,vve(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function _x(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function k5(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Cn(Zm(e))}function H2e(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Wl(Pu(e))}function W2e(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function $m(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function Y6(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function G2e(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Y2e(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function jy(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function pn(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Ns(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function Ja(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=jy(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=jy(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function Vi(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(pn(n*8+s.type)),s.type==2&&t.push(pn(s.data.length)),t.push(s.data))})}),$m(t)}function GT(e,t){return e?.map(function(r){return t(r.data)})||[]}function Tc(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=jy(e,n),i=Ja(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:Ns(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=Ja(l.data),d=Ns(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+d)}),n[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=Ns(i[3][0].data)>>>0>0),r.push(o)}return r}function Tv(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:pn(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:pn(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:pn(o.data.length)}],n[2].push({data:Vi(o.meta),type:2})});var i=Vi(n);t.push(pn(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),$m(t)}function K2e(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=jy(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[$m(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(s.push(s[0].slice(-c)),d-=c;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-c,-c+d))}}var u=$m(s);if(u.length!=n)throw new Error("Unexpected length: ".concat(u.length," != ").concat(n));return u}function Ic(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(K2e(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return $m(t)}function Iv(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=pn(n),o=i.length;t.push(i),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=n}return $m(t)}function X2e(e,t,r,n){var s=_x(e),i=s.getUint32(4,!0),o=(n>1?12:8)+Y6(i&(n>1?3470:398))*4,l=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=Y6(i&(n>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var h;switch(e[2]){case 0:break;case 2:h={t:"n",v:d};break;case 3:h={t:"s",v:t[c]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(l>-1)h={t:"s",v:r[l]};else if(c>-1)h={t:"s",v:t[c]};else if(!isNaN(d))h={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return h}function Q2e(e,t,r){var n=_x(e),s=n.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);s&1&&(c=G2e(e,i),i+=16),s&2&&(d=n.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var h;switch(e[1]){case 0:break;case 2:h={t:"n",v:c};break;case 3:h={t:"s",v:t[l]};break;case 5:h={t:"d",v:u};break;case 6:h={t:"b",v:d>0};break;case 7:h={t:"n",v:d/86400};break;case 8:h={t:"e",v:0};break;case 9:if(o>-1)h={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:h={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return h}function sE(e,t){var r=new Uint8Array(32),n=_x(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Y2e(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,s)}function iE(e,t){var r=new Uint8Array(32),n=_x(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,s)}function J2e(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return X2e(e,t,r,e[0]);case 5:return Q2e(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function po(e){var t=Ja(e);return jy(t[1][0].data)}function K6(e,t){var r=Ja(t.data),n=Ns(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=Ja(o.data),c=Ns(l[1][0].data)>>>0;switch(n){case 1:i[c]=k5(l[3][0].data);break;case 8:{var d=e[po(l[9][0].data)][0],u=Ja(d.data),h=e[po(u[1][0].data)][0],m=Ns(h.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=Ja(h.data);i[c]=p[3].map(function(v){return k5(v.data)}).join("")}break}}),i}function Z2e(e,t){var r,n,s,i,o,l,c,d,u,h,m,p,v,g,b=Ja(e),y=Ns(b[1][0].data)>>>0,C=Ns(b[2][0].data)>>>0,w=((n=(r=b[8])==null?void 0:r[0])==null?void 0:n.data)&&Ns(b[8][0].data)>0||!1,k,S;if((i=(s=b[7])==null?void 0:s[0])!=null&&i.data&&t!=0)k=(l=(o=b[7])==null?void 0:o[0])==null?void 0:l.data,S=(d=(c=b[6])==null?void 0:c[0])==null?void 0:d.data;else if((h=(u=b[4])==null?void 0:u[0])!=null&&h.data&&t!=1)k=(p=(m=b[4])==null?void 0:m[0])==null?void 0:p.data,S=(g=(v=b[3])==null?void 0:v[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var D=w?4:1,E=_x(k),T=[],A=0;A<k.length/2;++A){var L=E.getUint16(A*2,!0);L<65535&&T.push([A,L])}if(T.length!=C)throw"Expected ".concat(C," cells, found ").concat(T.length);var P=[];for(A=0;A<T.length-1;++A)P[T[A][0]]=S.subarray(T[A][1]*D,T[A+1][1]*D);return T.length>=1&&(P[T[T.length-1][0]]=S.subarray(T[T.length-1][1]*D)),{R:y,cells:P}}function eSe(e,t){var r,n=Ja(t.data),s=(r=n?.[7])!=null&&r[0]?Ns(n[7][0].data)>>>0>0?1:0:-1,i=GT(n[5],function(o){return Z2e(o,s)});return{nrows:Ns(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=c}),o},[])}}function tSe(e,t,r){var n,s=Ja(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Ns(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(Ns(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=ba(i);var o=Ja(s[4][0].data),l=K6(e,e[po(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?K6(e,e[po(o[17][0].data)][0]):[],d=Ja(o[3][0].data),u=0;d[1].forEach(function(h){var m=Ja(h.data),p=e[po(m[2][0].data)][0],v=Ns(p.meta[1][0].data);if(v!=6002)throw new Error("6001 unexpected reference to ".concat(v));var g=eSe(e,p);g.data.forEach(function(b,y){b.forEach(function(C,w){var k=sa({r:u+y,c:w}),S=J2e(C,l,c);S&&(r[k]=S)})}),u+=g.nrows})}function rSe(e,t){var r=Ja(t.data),n={"!ref":"A1"},s=e[po(r[2][0].data)],i=Ns(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return tSe(e,s[0],n),n}function aSe(e,t){var r,n=Ja(t.data),s={name:(r=n[1])!=null&&r[0]?k5(n[1][0].data):"",sheets:[]},i=GT(n[2],po);return i.forEach(function(o){e[o].forEach(function(l){var c=Ns(l.meta[1][0].data);c==6e3&&s.sheets.push(rSe(e,l))})}),s}function nSe(e,t){var r=JT(),n=Ja(t.data),s=GT(n[1],po);if(s.forEach(function(i){e[i].forEach(function(o){var l=Ns(o.meta[1][0].data);if(l==2){var c=aSe(e,o);c.sheets.forEach(function(d,u){ZT(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function oE(e){var t,r,n,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=Ic(c.content)}catch(h){return console.log("?? "+c.content.length+" "+(h.message||h))}var u;try{u=Tc(d)}catch(h){return console.log("## "+(h.message||h))}u.forEach(function(h){i[h.id]=h.messages,o.push(h.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&Ns(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(d){var u=Ns(d.meta[1][0].data)>>>0;if(u==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return nSe(i,l)}function sSe(e,t,r){var n,s,i,o;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Ns(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=_x(e[7][0].data),u=0,h=[],m=_x(e[4][0].data),p=0,v=[],g=0;g<t.length;++g){if(t[g]==null){d.setUint16(g*2,65535,!0),m.setUint16(g*2,65535);continue}d.setUint16(g*2,u,!0),m.setUint16(g*2,p,!0);var b,y;switch(typeof t[g]){case"string":b=sE({t:"s",v:t[g]},r),y=iE({t:"s",v:t[g]},r);break;case"number":b=sE({t:"n",v:t[g]},r),y=iE({t:"n",v:t[g]},r);break;case"boolean":b=sE({t:"b",v:t[g]},r),y=iE({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}h.push(b),u+=b.length,v.push(y),p+=y.length,++c}for(e[2][0].data=pn(c);g<e[7][0].data.length/2;++g)d.setUint16(g*2,65535,!0),m.setUint16(g*2,65535,!0);return e[6][0].data=$m(h),e[3][0].data=$m(v),c}function iSe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ml(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(ba(n)));var i=Lw(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(V){return V.forEach(function(H){typeof H=="string"&&o.push(H)})});var l={},c=[],d=Hr.read(t.numbers,{type:"base64"});d.FileIndex.map(function(V,H){return[V,d.FullPaths[H]]}).forEach(function(V){var H=V[0],ee=V[1];if(H.type==2&&H.name.match(/\.iwa/)){var re=H.content,ae=Ic(re),ne=Tc(ae);ne.forEach(function(ie){c.push(ie.id),l[ie.id]={deps:[],location:ee,type:Ns(ie.messages[0].meta[1][0].data)}})}}),c.sort(function(V,H){return V-H});var u=c.filter(function(V){return V>1}).map(function(V){return[V,pn(V)]});d.FileIndex.map(function(V,H){return[V,d.FullPaths[H]]}).forEach(function(V){var H=V[0];if(V[1],!!H.name.match(/\.iwa/)){var ee=Tc(Ic(H.content));ee.forEach(function(re){re.messages.forEach(function(ae){u.forEach(function(ne){re.messages.some(function(ie){return Ns(ie.meta[1][0].data)!=11006&&W2e(ie.data,ne[1])})&&l[ne[0]].deps.push(re.id)})})})}});for(var h=Hr.find(d,l[1].location),m=Tc(Ic(h.content)),p,v=0;v<m.length;++v){var g=m[v];g.id==1&&(p=g)}var b=po(Ja(p.messages[0].data)[1][0].data);for(h=Hr.find(d,l[b].location),m=Tc(Ic(h.content)),v=0;v<m.length;++v)g=m[v],g.id==b&&(p=g);for(b=po(Ja(p.messages[0].data)[2][0].data),h=Hr.find(d,l[b].location),m=Tc(Ic(h.content)),v=0;v<m.length;++v)g=m[v],g.id==b&&(p=g);for(b=po(Ja(p.messages[0].data)[2][0].data),h=Hr.find(d,l[b].location),m=Tc(Ic(h.content)),v=0;v<m.length;++v)g=m[v],g.id==b&&(p=g);var y=Ja(p.messages[0].data);{y[6][0].data=pn(n.e.r+1),y[7][0].data=pn(n.e.c+1);var C=po(y[46][0].data),w=Hr.find(d,l[C].location),k=Tc(Ic(w.content));{for(var S=0;S<k.length&&k[S].id!=C;++S);if(k[S].id!=C)throw"Bad ColumnRowUIDMapArchive";var D=Ja(k[S].messages[0].data);D[1]=[],D[2]=[],D[3]=[];for(var E=0;E<=n.e.c;++E){var T=[];T[1]=T[2]=[{type:0,data:pn(E+420690)}],D[1].push({type:2,data:Vi(T)}),D[2].push({type:0,data:pn(E)}),D[3].push({type:0,data:pn(E)})}D[4]=[],D[5]=[],D[6]=[];for(var A=0;A<=n.e.r;++A)T=[],T[1]=T[2]=[{type:0,data:pn(A+726270)}],D[4].push({type:2,data:Vi(T)}),D[5].push({type:0,data:pn(A)}),D[6].push({type:0,data:pn(A)});k[S].messages[0].data=Vi(D)}w.content=Iv(Tv(k)),w.size=w.content.length,delete y[46];var L=Ja(y[4][0].data);{L[7][0].data=pn(n.e.r+1);var P=Ja(L[1][0].data),O=po(P[2][0].data);w=Hr.find(d,l[O].location),k=Tc(Ic(w.content));{if(k[0].id!=O)throw"Bad HeaderStorageBucket";var Z=Ja(k[0].messages[0].data);for(A=0;A<i.length;++A){var z=Ja(Z[2][0].data);z[1][0].data=pn(A),z[4][0].data=pn(i[A].length),Z[2][A]={type:Z[2][0].type,data:Vi(z)}}k[0].messages[0].data=Vi(Z)}w.content=Iv(Tv(k)),w.size=w.content.length;var K=po(L[2][0].data);w=Hr.find(d,l[K].location),k=Tc(Ic(w.content));{if(k[0].id!=K)throw"Bad HeaderStorageBucket";for(Z=Ja(k[0].messages[0].data),E=0;E<=n.e.c;++E)z=Ja(Z[2][0].data),z[1][0].data=pn(E),z[4][0].data=pn(n.e.r+1),Z[2][E]={type:Z[2][0].type,data:Vi(z)};k[0].messages[0].data=Vi(Z)}w.content=Iv(Tv(k)),w.size=w.content.length;var B=po(L[4][0].data);(function(){for(var V=Hr.find(d,l[B].location),H=Tc(Ic(V.content)),ee,re=0;re<H.length;++re){var ae=H[re];ae.id==B&&(ee=ae)}var ne=Ja(ee.messages[0].data);{ne[3]=[];var ie=[];o.forEach(function(X,le){ie[1]=[{type:0,data:pn(le)}],ie[2]=[{type:0,data:pn(1)}],ie[3]=[{type:2,data:H2e(X)}],ne[3].push({type:2,data:Vi(ie)})})}ee.messages[0].data=Vi(ne);var G=Tv(H),de=Iv(G);V.content=de,V.size=V.content.length})();var Q=Ja(L[3][0].data);{var U=Q[1][0];delete Q[2];var J=Ja(U.data);{var Y=po(J[2][0].data);(function(){for(var V=Hr.find(d,l[Y].location),H=Tc(Ic(V.content)),ee,re=0;re<H.length;++re){var ae=H[re];ae.id==Y&&(ee=ae)}var ne=Ja(ee.messages[0].data);{delete ne[6],delete Q[7];var ie=new Uint8Array(ne[5][0].data);ne[5]=[];for(var G=0,de=0;de<=n.e.r;++de){var X=Ja(ie);G+=sSe(X,i[de],o),X[1][0].data=pn(de),ne[5].push({data:Vi(X),type:2})}ne[1]=[{type:0,data:pn(n.e.c+1)}],ne[2]=[{type:0,data:pn(n.e.r+1)}],ne[3]=[{type:0,data:pn(G)}],ne[4]=[{type:0,data:pn(n.e.r+1)}]}ee.messages[0].data=Vi(ne);var le=Tv(H),Se=Iv(le);V.content=Se,V.size=V.content.length})()}U.data=Vi(J)}L[3][0].data=Vi(Q)}y[4][0].data=Vi(L)}p.messages[0].data=Vi(y);var oe=Tv(m),M=Iv(oe);return h.content=M,h.size=h.content.length,d}function zH(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function YT(e){zH([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function KT(e){zH([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function oSe(e){return Aa.WS.indexOf(e)>-1?"sheet":e==Aa.CS?"chart":e==Aa.DS?"dialog":e==Aa.MS?"macro":e&&e.length?e:"sheet"}function lSe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,oSe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function cSe(e,t,r,n,s,i,o,l,c,d,u,h){try{i[n]=$b(Gl(e,r,!0),t);var m=Js(e,t),p;switch(l){case"sheet":p=Twe(m,t,s,c,i[n],d,u,h);break;case"chart":if(p=Iwe(m,t,s,c,i[n],d,u,h),!p||!p["!drawel"])break;var v=Ib(p["!drawel"].Target,t),g=py(v),b=gye(Gl(e,v,!0),$b(Gl(e,g,!0),v)),y=Ib(b,v),C=py(y);p=swe(Gl(e,y,!0),y,c,$b(Gl(e,C,!0),y),d,p);break;case"macro":p=Pwe(m,t,s,c,i[n],d,u,h);break;case"dialog":p=Owe(m,t,s,c,i[n],d,u,h);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=p;var w=[];i&&i[n]&&Ss(i[n]).forEach(function(k){var S="";if(i[n][k].Type==Aa.CMNT){S=Ib(i[n][k].Target,t);var D=Lwe(Js(e,S,!0),S,c);if(!D||!D.length)return;O6(p,D,!1)}i[n][k].Type==Aa.TCMNT&&(S=Ib(i[n][k].Target,t),w=w.concat(yye(Js(e,S,!0),c)))}),w&&w.length&&O6(p,w,!0,c.people||[])}catch(k){if(c.WTF)throw k}}function Ec(e){return e.charAt(0)=="/"?e.slice(1):e}function dSe(e,t){if(ig(),t=t||{},YT(t),Pc(e,"META-INF/manifest.xml")||Pc(e,"objectdata.xml"))return H6(e,t);if(Pc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof oE<"u"){if(e.FileIndex)return oE(e);var r=Hr.utils.cfb_new();return t6(e).forEach(function(z){wa(r,z,jxe(e,z))}),oE(r)}throw new Error("Unsupported NUMBERS file")}if(!Pc(e,"[Content_Types].xml"))throw Pc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Pc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=t6(e),s=mve(Gl(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Js(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Js(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(Vb=[],s.sst)try{Vb=Fwe(Js(e,Ec(s.sst)),s.sst,t)}catch(z){if(t.WTF)throw z}t.cellStyles&&s.themes.length&&(c=Rwe(Gl(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=Mwe(Js(e,Ec(s.style)),s.style,c,t))}s.links.map(function(z){try{var K=$b(Gl(e,py(Ec(z))),z);return Uwe(Js(e,Ec(z)),K,z,t)}catch{}});var u=Awe(Js(e,Ec(s.workbooks[0])),s.workbooks[0],t),h={},m="";s.coreprops.length&&(m=Js(e,Ec(s.coreprops[0]),!0),m&&(h=Iz(m)),s.extprops.length!==0&&(m=Js(e,Ec(s.extprops[0]),!0),m&&jve(m,h,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=Gl(e,Ec(s.custprops[0]),!0),m&&(p=wve(m,t)));var v={};if((t.bookSheets||t.bookProps)&&(u.Sheets?o=u.Sheets.map(function(K){return K.name}):h.Worksheets&&h.SheetNames.length>0&&(o=h.SheetNames),t.bookProps&&(v.Props=h,v.Custprops=p),t.bookSheets&&typeof o<"u"&&(v.SheetNames=o),t.bookSheets?v.SheetNames:t.bookProps))return v;o={};var g={};t.bookDeps&&s.calcchain&&(g=Bwe(Js(e,Ec(s.calcchain)),s.calcchain));var b=0,y={},C,w;{var k=u.Sheets;h.Worksheets=k.length,h.SheetNames=[];for(var S=0;S!=k.length;++S)h.SheetNames[S]=k[S].name}var D=i?"bin":"xml",E=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,E+1)+"_rels/"+s.workbooks[0].slice(E+1)+".rels").replace(/^\//,"");Pc(e,T)||(T="xl/_rels/workbook."+D+".rels");var A=$b(Gl(e,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=$we(Js(e,Ec(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=Nye(Js(e,Ec(s.people[0])),t)),A&&(A=lSe(A,u.Sheets));var L=Js(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(b=0;b!=h.Worksheets;++b){var P="sheet";if(A&&A[b]?(C="xl/"+A[b][1].replace(/[\/]?xl\//,""),Pc(e,C)||(C=A[b][1]),Pc(e,C)||(C=T.replace(/_rels\/.*$/,"")+A[b][1]),P=A[b][2]):(C="xl/worksheets/sheet"+(b+1-L)+"."+D,C=C.replace(/sheet0\./,"sheet.")),w=C.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(b!=t.sheets)continue e;break;case"string":if(h.SheetNames[b].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var O=!1,Z=0;Z!=t.sheets.length;++Z)typeof t.sheets[Z]=="number"&&t.sheets[Z]==b&&(O=1),typeof t.sheets[Z]=="string"&&t.sheets[Z].toLowerCase()==h.SheetNames[b].toLowerCase()&&(O=1);if(!O)continue e}}cSe(e,C,w,h.SheetNames[b],b,y,o,P,t,u,c,d)}return v={Directory:s,Workbook:u,Props:h,Custprops:p,Deps:g,Sheets:o,SheetNames:h.SheetNames,Strings:Vb,Styles:d,Themes:c,SSF:qn(ra)},t&&t.bookFiles&&(e.files?(v.keys=n,v.files=e.files):(v.keys=[],v.files={},e.FullPaths.forEach(function(z,K){z=z.replace(/^Root Entry[\/]/,""),v.keys.push(z),v.files[z]=e.FileIndex[K]}))),t&&t.bookVBA&&(s.vba.length>0?v.vbaraw=Js(e,Ec(s.vba[0]),!0):s.defaults&&s.defaults.bin===Aye&&(v.vbaraw=Js(e,"xl/vbaProject.bin",!0))),v}function uSe(e,t){var r=t||{},n="Workbook",s=Hr.find(e,n);try{if(n="/!DataSpaces/Version",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if($ge(s.content),n="/!DataSpaces/DataSpaceMap",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=qge(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=zge(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);Wge(s.content)}catch{}if(n="/EncryptionInfo",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=Gge(s.content);if(n="/EncryptedPackage",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function hSe(e,t){return t.bookType=="ods"?qH(e,t):t.bookType=="numbers"?iSe(e,t):t.bookType=="xlsb"?fSe(e,t):mSe(e,t)}function fSe(e,t){Zv=1024,e&&!e.SSF&&(e.SSF=qn(ra)),e&&e.SSF&&(ig(),vS(e.SSF),t.revssf=bS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,qb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=vH.indexOf(t.bookType)>-1,s=OT();KT(t=t||{});var i=yT(),o="",l=0;if(t.cellXfs=[],tp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",wa(i,o,Pz(e.Props,t)),s.coreprops.push(o),vn(t.rels,2,o,Aa.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,wa(i,o,Rz(e.Props)),s.extprops.push(o),vn(t.rels,3,o,Aa.EXT_PROPS),e.Custprops!==e.Props&&Ss(e.Custprops||{}).length>0&&(o="docProps/custom.xml",wa(i,o,Fz(e.Custprops)),s.custprops.push(o),vn(t.rels,4,o,Aa.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},h=e.Sheets[e.SheetNames[l-1]],m=(h||{})["!type"]||"sheet";switch(m){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,wa(i,o,qwe(l-1,o,t,e,u)),s.sheets.push(o),vn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Aa.WS[0])}if(h){var p=h["!comments"],v=!1,g="";p&&p.length>0&&(g="xl/comments"+l+"."+r,wa(i,g,Wwe(p,g)),s.comments.push(g),vn(u,-1,"../comments"+l+"."+r,Aa.CMNT),v=!0),h["!legacy"]&&v&&wa(i,"xl/drawings/vmlDrawing"+l+".vml",pH(l,h["!comments"])),delete h["!comments"],delete h["!legacy"]}u["!id"].rId1&&wa(i,py(o),s0(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,wa(i,o,Hwe(t.Strings,o,t)),s.strs.push(o),vn(t.wbrels,-1,"sharedStrings."+r,Aa.SST)),o="xl/workbook."+r,wa(i,o,Vwe(e,o)),s.workbooks.push(o),vn(t.rels,1,o,Aa.WB),o="xl/theme/theme1.xml",wa(i,o,UT(e.Themes,t)),s.themes.push(o),vn(t.wbrels,-1,"theme/theme1.xml",Aa.THEME),o="xl/styles."+r,wa(i,o,zwe(e,o,t)),s.styles.push(o),vn(t.wbrels,-1,"styles."+r,Aa.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",wa(i,o,e.vbaraw),s.vba.push(o),vn(t.wbrels,-1,"vbaProject.bin",Aa.VBA)),o="xl/metadata."+r,wa(i,o,Gwe(o)),s.metadata.push(o),vn(t.wbrels,-1,"metadata."+r,Aa.XLMETA),wa(i,"[Content_Types].xml",Az(s,t)),wa(i,"_rels/.rels",s0(t.rels)),wa(i,"xl/_rels/workbook."+r+".rels",s0(t.wbrels)),delete t.revssf,delete t.ssf,i}function mSe(e,t){Zv=1024,e&&!e.SSF&&(e.SSF=qn(ra)),e&&e.SSF&&(ig(),vS(e.SSF),t.revssf=bS(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,qb?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=vH.indexOf(t.bookType)>-1,s=OT();KT(t=t||{});var i=yT(),o="",l=0;if(t.cellXfs=[],tp(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",wa(i,o,Pz(e.Props,t)),s.coreprops.push(o),vn(t.rels,2,o,Aa.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,wa(i,o,Rz(e.Props)),s.extprops.push(o),vn(t.rels,3,o,Aa.EXT_PROPS),e.Custprops!==e.Props&&Ss(e.Custprops||{}).length>0&&(o="docProps/custom.xml",wa(i,o,Fz(e.Custprops)),s.custprops.push(o),vn(t.rels,4,o,Aa.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var h={"!id":{}},m=e.Sheets[e.SheetNames[l-1]],p=(m||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,wa(i,o,EH(l-1,t,e,h)),s.sheets.push(o),vn(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Aa.WS[0])}if(m){var v=m["!comments"],g=!1,b="";if(v&&v.length>0){var y=!1;v.forEach(function(C){C[1].forEach(function(w){w.T==!0&&(y=!0)})}),y&&(b="xl/threadedComments/threadedComment"+l+"."+r,wa(i,b,jye(v,u,t)),s.threadedcomments.push(b),vn(h,-1,"../threadedComments/threadedComment"+l+"."+r,Aa.TCMNT)),b="xl/comments"+l+"."+r,wa(i,b,xH(v)),s.comments.push(b),vn(h,-1,"../comments"+l+"."+r,Aa.CMNT),g=!0}m["!legacy"]&&g&&wa(i,"xl/drawings/vmlDrawing"+l+".vml",pH(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}h["!id"].rId1&&wa(i,py(o),s0(h))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,wa(i,o,aH(t.Strings,t)),s.strs.push(o),vn(t.wbrels,-1,"sharedStrings."+r,Aa.SST)),o="xl/workbook."+r,wa(i,o,PH(e)),s.workbooks.push(o),vn(t.rels,1,o,Aa.WB),o="xl/theme/theme1.xml",wa(i,o,UT(e.Themes,t)),s.themes.push(o),vn(t.wbrels,-1,"theme/theme1.xml",Aa.THEME),o="xl/styles."+r,wa(i,o,uH(e,t)),s.styles.push(o),vn(t.wbrels,-1,"styles."+r,Aa.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",wa(i,o,e.vbaraw),s.vba.push(o),vn(t.wbrels,-1,"vbaProject.bin",Aa.VBA)),o="xl/metadata."+r,wa(i,o,mH()),s.metadata.push(o),vn(t.wbrels,-1,"metadata."+r,Aa.XLMETA),u.length>1&&(o="xl/persons/person.xml",wa(i,o,wye(u)),s.people.push(o),vn(t.wbrels,-1,"persons/person.xml",Aa.PEOPLE)),wa(i,"[Content_Types].xml",Az(s,t)),wa(i,"_rels/.rels",s0(t.rels)),wa(i,"xl/_rels/workbook."+r+".rels",s0(t.wbrels)),delete t.revssf,delete t.ssf,i}function XT(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=ic(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function pSe(e,t){return Hr.find(e,"EncryptedPackage")?uSe(e,t):FH(e,t)}function xSe(e,t){var r,n=e,s=t||{};return s.type||(s.type=_a&&Buffer.isBuffer(e)?"buffer":"base64"),r=sz(n,s),dSe(r,s)}function HH(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return S5(e.slice(r),t);default:break e}return T0.to_workbook(e,t)}function vSe(e,t){var r="",n=XT(e,t);switch(t.type){case"base64":r=ic(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=wx(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Cn(r)),t.type="binary",HH(r,t)}function gSe(e,t){var r=e;return t.type=="base64"&&(r=ic(r)),r=cy.utils.decode(1200,r.slice(2),"str"),t.type="binary",HH(r,t)}function bSe(e){return e.match(/[^\x00-\x7F]/)?Pu(e):e}function lE(e,t,r,n){return n?(r.type="string",T0.to_workbook(e,r)):T0.to_workbook(t,r)}function _5(e,t){pT();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return _5(new Uint8Array(e),(r=qn(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),o0={},r.dateNF&&(o0.dateNF=r.dateNF),r.type||(r.type=_a&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=_a?"buffer":"binary",n=fxe(e),typeof Uint8Array<"u"&&!_a&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=bSe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=qn(r),r.type="array",_5(xT(n),r)}switch((s=XT(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return pSe(Hr.read(n,r),r);break;case 9:if(s[1]<=8)return FH(n,r);break;case 60:return S5(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return Sge(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return tH.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?xSe(n,r):lE(e,n,r,i);case 239:return s[3]===60?S5(n,r):lE(e,n,r,i);case 255:if(s[1]===254)return gSe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return dx.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return dx.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return w5.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return lH.to_workbook(n,r);break;case 10:case 13:case 32:return vSe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return wge.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?w5.to_workbook(n,r):lE(e,n,r,i)}function WH(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return e1(t.file,Hr.write(e,{type:_a?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Hr.write(e,t)}function ySe(e,t){var r=qn(t||{}),n=hSe(e,r);return jSe(n,r)}function jSe(e,t){var r={},n=_a?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Hr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(xS(s))}return t.password&&typeof encrypt_agile<"u"?WH(encrypt_agile(s,t.password),t):t.type==="file"?e1(t.file,s):t.type=="string"?Cn(s):s}function NSe(e,t){var r=t||{},n=b2e(e,r);return WH(n,r)}function yu(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return dy(Pu(n));case"binary":return Pu(n);case"string":return e;case"file":return e1(t.file,n,"utf8");case"buffer":return _a?pf(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):yu(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function wSe(e,t){switch(t.type){case"base64":return dy(e);case"binary":return e;case"string":return e;case"file":return e1(t.file,e,"binary");case"buffer":return _a?pf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Hj(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?dy(r):t.type=="string"?Cn(r):r;case"file":return e1(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function GH(e,t){pT(),pwe(e);var r=qn(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=GH(e,r);return r.type="array",xS(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return yu(h2e(e,r),r);case"slk":case"sylk":return yu(eH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return yu(BH(e.Sheets[e.SheetNames[s]],r),r);case"txt":return wSe(YH(e.Sheets[e.SheetNames[s]],r),r);case"csv":return yu(QT(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return yu(tH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return Hj(w5.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return yu(T0.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return yu(lH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return yu(rH.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return yu(qH(e,r),r);case"wk1":return Hj(dx.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return Hj(dx.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Hj(LH(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),NSe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return ySe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function SSe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function Zu(e,t,r){var n={};return n.type="file",n.file=t,SSe(n),GH(e,n)}function CSe(e,t,r,n,s,i,o,l){var c=$s(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),h=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var v=o?e[r][p]:e[n[p]+c];if(v===void 0||v.t===void 0){if(d===void 0)continue;i[p]!=null&&(m[i[p]]=d);continue}var g=v.v;switch(v.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+v.t)}if(i[p]!=null){if(g==null)if(v.t=="e"&&g===null)m[i[p]]=null;else if(d!==void 0)m[i[p]]=d;else if(u&&g===null)m[i[p]]=null;else continue;else m[i[p]]=u&&(v.t!=="n"||v.t==="n"&&l.rawNumbers!==!1)?g:of(v,g,l);g!=null&&(h=!1)}}return{row:m,isempty:h}}function Lw(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof u){case"string":c=Ga(u);break;case"number":c=Ga(e["!ref"]),c.s.r=u;break;default:c=u}n>0&&(s=0);var h=$s(c.s.r),m=[],p=[],v=0,g=0,b=Array.isArray(e),y=c.s.r,C=0,w={};b&&!e[y]&&(e[y]=[]);var k=d.skipHidden&&e["!cols"]||[],S=d.skipHidden&&e["!rows"]||[];for(C=c.s.c;C<=c.e.c;++C)if(!(k[C]||{}).hidden)switch(m[C]=cs(C),r=b?e[y][C]:e[m[C]+h],n){case 1:i[C]=C-c.s.c;break;case 2:i[C]=m[C];break;case 3:i[C]=d.header[C-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=of(r,null,d),g=w[o]||0,!g)w[o]=1;else{do l=o+"_"+g++;while(w[l]);w[o]=g,w[l]=1}i[C]=l}for(y=c.s.r+s;y<=c.e.r;++y)if(!(S[y]||{}).hidden){var D=CSe(e,c,y,m,n,i,b,d);(D.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(p[v++]=D.row)}return p.length=v,p}var X6=/"/g;function kSe(e,t,r,n,s,i,o,l){for(var c=!0,d=[],u="",h=$s(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var p=l.dense?(e[r]||[])[m]:e[n[m]+h];if(p==null)u="";else if(p.v!=null){c=!1,u=""+(l.rawNumbers&&p.t=="n"?p.v:of(p,null,l));for(var v=0,g=0;v!==u.length;++v)if((g=u.charCodeAt(v))===s||g===i||g===34||l.forceQuotes){u='"'+u.replace(X6,'""')+'"';break}u=="ID"&&(u='"ID"')}else p.f!=null&&!p.F?(c=!1,u="="+p.f,u.indexOf(",")>=0&&(u='"'+u.replace(X6,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(o)}function QT(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Ga(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",h=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],v=s.s.c;v<=s.e.c;++v)(m[v]||{}).hidden||(h[v]=cs(v));for(var g=0,b=s.s.r;b<=s.e.r;++b)(p[b]||{}).hidden||(u=kSe(e,s,b,h,o,c,i,n),u!=null&&(n.strip&&(u=u.replace(d,"")),(u||n.blankrows!==!1)&&r.push((g++?l:"")+u)));return delete n.dense,r.join("")}function YH(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=QT(e,t);return r}function _Se(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Ga(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=cs(l);for(var u=s.s.r;u<=s.e.r;++u)for(i=$s(u),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[u]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function KH(e,t,r){var n=r||{},s=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?ds(n.origin):n.origin;o=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var h=Ga(i["!ref"]);u.e.c=Math.max(u.e.c,h.e.c),u.e.r=Math.max(u.e.r,h.e.r),o==-1&&(o=h.e.r+1,u.e.r=o+t.length-1+s)}else o==-1&&(o=0,u.e.r=t.length-1+s);var m=n.header||[],p=0;t.forEach(function(g,b){Ss(g).forEach(function(y){(p=m.indexOf(y))==-1&&(m[p=m.length]=y);var C=g[y],w="z",k="",S=sa({c:l+p,r:o+b+s});d=Ny(i,S),C&&typeof C=="object"&&!(C instanceof Date)?i[S]=C:(typeof C=="number"?w="n":typeof C=="boolean"?w="b":typeof C=="string"?w="s":C instanceof Date?(w="d",n.cellDates||(w="n",C=hi(C)),k=n.dateNF||ra[14]):C===null&&n.nullError&&(w="e",C=0),d?(d.t=w,d.v=C,delete d.w,delete d.R,k&&(d.z=k)):i[S]=d={t:w,v:C},k&&(d.z=k))})}),u.e.c=Math.max(u.e.c,l+m.length-1);var v=$s(o);if(s)for(p=0;p<m.length;++p)i[cs(p+l)+v]={t:"s",v:m[p]};return i["!ref"]=ba(u),i}function ESe(e,t){return KH(null,e,t)}function Ny(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=ds(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?Ny(e,sa(t)):Ny(e,sa({r:t,c:r||0}))}function DSe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function JT(){return{SheetNames:[],Sheets:{}}}function ZT(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(IH(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function ASe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=DSe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function TSe(e,t){return e.z=t,e}function XH(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function ISe(e,t,r){return XH(e,"#"+t,r)}function PSe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function OSe(e,t,r,n){for(var s=typeof t!="string"?t:Ga(t),i=typeof t=="string"?t:ba(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=Ny(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var nn={encode_col:cs,encode_row:$s,encode_cell:sa,encode_range:ba,decode_col:ET,decode_row:_T,split_cell:Hxe,decode_cell:ds,decode_range:ml,format_cell:of,sheet_add_aoa:wz,sheet_add_json:KH,sheet_add_dom:UH,aoa_to_sheet:og,json_to_sheet:ESe,table_to_sheet:$H,table_to_book:$2e,sheet_to_csv:QT,sheet_to_txt:YH,sheet_to_json:Lw,sheet_to_html:BH,sheet_to_formulae:_Se,sheet_to_row_object_array:Lw,sheet_get_cell:Ny,book_new:JT,book_append_sheet:ZT,book_set_sheet_visibility:ASe,cell_set_number_format:TSe,cell_set_hyperlink:XH,cell_set_internal_link:ISe,cell_add_comment:PSe,sheet_set_array_formula:OSe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const gf=({show:e,onClose:t,onImport:r,masterDataType:n,templateFields:s=[],apiEndpoint:i})=>{const[o,l]=N.useState(null),[c,d]=N.useState([]),[u,h]=N.useState(!1),[m,p]=N.useState(0),[v,g]=N.useState([]),[b,y]=N.useState([]),[C,w]=N.useState(!1),[k,S]=N.useState(null),D=N.useRef(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("selectedFinancialYear");const E={material:{name:"Material Master",fields:["materialId","categoryName","description","baseUnit","orderUnit","conversionValue","dimension","hsn","mpn","minstock","safetyStock","maxstock","pdt","materialgroup","location"],sampleData:{materialId:"MAT001",categoryName:"Raw Materials",description:"Sample Raw Material Description",baseUnit:"KG",orderUnit:"KG",conversionValue:1,dimension:"10x10x10",hsn:"1234567890",mpn:"MPN001",minstock:10,safetyStock:5,maxstock:100,pdt:7,materialgroup:"RAW_MATERIAL",location:"WH01"}},customer:{name:"Customer Master",fields:["cnNo","categoryName","name1","name2","search","address1","address2","extraAddresses","city","pincode","region","country","contactNo","name","email","isDeleted","isBlocked"],sampleData:{cnNo:"CUST000001",categoryName:"Retail Customers",name1:"Sample Customer Pvt Ltd",name2:"Sample Customer",search:"SAMPLE_CUSTOMER",address1:"123, Business Street",address2:"Near Business Park",extraAddresses:"Alternative Address 1, Alternative Address 2",city:"Mumbai",pincode:"400001",region:"Maharashtra",country:"India",contactNo:"9876543210",name:"Contact Person Name",email:"customer@example.com",isDeleted:!1,isBlocked:!1}},vendor:{name:"Vendor Master",fields:["vnNo","categoryName","name1","name2","search","address1","address2","extraAddresses","city","pincode","region","country","contactNo","contactname","email","isDeleted","isBlocked"],sampleData:{vnNo:"VEND000001",categoryName:"Raw Material Suppliers",name1:"Sample Vendor Pvt Ltd",name2:"Sample Vendor",search:"SAMPLE_VENDOR",address1:"456, Supplier Avenue",address2:"Industrial Area",extraAddresses:"Warehouse Address 1, Backup Address 2",city:"Delhi",pincode:"110001",region:"Delhi",country:"India",contactNo:"9876543210",contactname:"Vendor Contact Person",email:"vendor@example.com",isDeleted:!1,isBlocked:!1}},customerPriceList:{name:"Customer Price List",fields:["categoryName","customerCode","materialCode","unit","bum","orderUnit","salesGroup","taxCode","tandc"],sampleData:{categoryName:"Retail Customers",customerCode:"CUST000001",materialCode:"MAT001",unit:"KG",bum:250.75,orderUnit:"BOX",salesGroup:"RETAIL",taxCode:"GST1",tandc:"Payment terms: 30 days net. Delivery: FOB warehouse."}},vendorPriceList:{name:"Vendor Price List",fields:["categoryName","vendorCode","materialCode","unit","bum","orderUnit","buyer","taxCode"],sampleData:{categoryName:"Raw Material Suppliers",vendorCode:"VEND000001",materialCode:"MAT001",unit:"KG",bum:150.5,orderUnit:100,buyer:"John Doe",taxCode:"GST1"}},tax:{name:"Tax Master",fields:["taxCode","taxName","cgst","sgst","igst"],sampleData:{taxCode:"GST1",taxName:"GST Standard Rate 18%",cgst:"9",sgst:"9",igst:"18"}},location:{name:"Location Master",fields:["name","address","city","state","country","postalCode","contactPerson","contactNumber"],sampleData:{name:"Main Warehouse",address:"123, Industrial Area, Sector 5",city:"Bangalore",state:"Karnataka",country:"India",postalCode:"560001",contactPerson:"Warehouse Manager",contactNumber:"+91-9876543210"}},generalCondition:{name:"General Condition Master",fields:["name","description","isDeleted","isBlocked"],sampleData:{name:"Standard Terms and Conditions",description:"Default terms and conditions applicable to all transactions. Payment due within 30 days. Quality complaints must be reported within 48 hours.",isDeleted:!1,isBlocked:!1}},process:{name:"Process Master",fields:["processId","processDescription","isDeleted","isBlocked"],sampleData:{processId:"PROC001",processDescription:"Standard manufacturing process for raw material conversion. Includes quality checks at each stage.",isDeleted:!1,isBlocked:!1}}},T=()=>E[n]||E.material,A=Q=>{const U=Q.target.files[0];if(!U)return;if(!["text/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/json"].includes(U.type)){alert("Please select a valid file format (CSV, Excel, or JSON)");return}l(U),g([]),S(null),L(U)},L=async Q=>{h(!0),p(10);try{if(Q.type==="application/json"){const U=await Q.text(),J=JSON.parse(U);d(Array.isArray(J)?J:[J])}else if(Q.type==="text/csv"){const J=(await Q.text()).split(`
`),Y=J[0].split(",").map(M=>M.trim().replace(/"/g,"")),oe=J.slice(1).filter(M=>M.trim()).map(M=>{const V=[];let H="",ee=!1;for(let ae=0;ae<M.length;ae++){const ne=M[ae];ne==='"'&&(ae===0||M[ae-1]===",")?ee=!0:ne==='"'&&ee&&(ae===M.length-1||M[ae+1]===",")?ee=!1:ne===","&&!ee?(V.push(H.trim()),H=""):H+=ne}V.push(H.trim());const re={};return Y.forEach((ae,ne)=>{re[ae]=V[ne]||""}),re});d(oe)}else{const U=await Q.arrayBuffer(),J=_5(U,{type:"buffer"}),Y=J.SheetNames[0],oe=J.Sheets[Y],M=nn.sheet_to_json(oe);d(M)}p(50),P()}catch(U){console.error("Error parsing file:",U),g([{row:0,error:"Failed to parse file: "+U.message}])}finally{h(!1),p(100)}},P=()=>{const Q=[],U=c.slice(0,5);c.forEach((J,Y)=>{({material:["materialId","categoryName","description","baseUnit","orderUnit"],customer:["cnNo","categoryName","name1","search","address1","contactNo","region","country"],vendor:["vnNo","categoryName","name1","search","address1","contactNo","region","country"],vendorPriceList:["categoryName","vendorCode","materialCode","unit","bum","orderUnit"],customerPriceList:["categoryName","customerCode","materialCode","unit","bum","orderUnit","salesGroup"],tax:["taxCode","taxName","cgst","sgst","igst"],location:["name"],generalCondition:[],process:[]}[n]||[]).forEach(V=>{(!J[V]||J[V].toString().trim()==="")&&Q.push({row:Y+1,field:V,error:`${V} is required`})}),n==="tax"&&(J.taxCode&&J.taxCode.length>4&&Q.push({row:Y+1,field:"taxCode",error:"taxCode must be 4 characters or less"}),J.taxName&&J.taxName.length>25&&Q.push({row:Y+1,field:"taxName",error:"taxName must be 25 characters or less"}),J.cgst&&J.cgst.length>2&&Q.push({row:Y+1,field:"cgst",error:"cgst must be 2 characters or less"}),J.sgst&&J.sgst.length>2&&Q.push({row:Y+1,field:"sgst",error:"sgst must be 2 characters or less"}),J.igst&&J.igst.length>2&&Q.push({row:Y+1,field:"igst",error:"igst must be 2 characters or less"}))}),g(Q),y(U)},O=Q=>{const U=T(),J=[U.sampleData];if(Q==="csv"){const Y=[U.fields.join(","),U.fields.map(H=>{const ee=U.sampleData[H]||"";return typeof ee=="string"&&ee.includes(",")?`"${ee}"`:ee}).join(",")].join(`
`),oe=new Blob([Y],{type:"text/csv"}),M=window.URL.createObjectURL(oe),V=document.createElement("a");V.href=M,V.download=`${U.name.replace(/\s+/g,"_")}_Template.csv`,V.click(),window.URL.revokeObjectURL(M)}else if(Q==="excel"){const Y=nn.json_to_sheet(J),oe=nn.book_new();nn.book_append_sheet(oe,Y,"Template"),Zu(oe,`${U.name.replace(/\s+/g,"_")}_Template.xlsx`)}else if(Q==="json"){const Y=JSON.stringify(J,null,2),oe=new Blob([Y],{type:"application/json"}),M=window.URL.createObjectURL(oe),V=document.createElement("a");V.href=M,V.download=`${U.name.replace(/\s+/g,"_")}_Template.json`,V.click(),window.URL.revokeObjectURL(M)}},Z=async()=>{if(v.length>0){alert("Please fix validation errors before importing");return}h(!0);try{const Q=localStorage.getItem("selectedCompanyId"),U=localStorage.getItem("financialYear"),J=await fetch(`/api/master-data/${n}/import`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:c,companyId:Q,financialYear:U})}),Y=await J.json();J.ok?(S(Y),r&&r(Y)):alert("Import failed: "+Y.message)}catch(Q){console.error("Import error:",Q),alert("Import failed: "+Q.message)}finally{h(!1)}},z=()=>{l(null),d([]),g([]),y([]),w(!1),S(null),p(0),D.current&&(D.current.value="")},K=()=>{z(),t()};if(!e)return null;const B=T();return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-upload me-2"}),"Import ",B.name]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:K})]}),a.jsx("div",{className:"modal-body",children:k?a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-success text-white",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-check-circle me-2"}),"Import Complete"]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-success",children:k.results?.imported||0}),a.jsx("p",{className:"text-muted",children:"Records Imported"})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-warning",children:k.results?.updated||0}),a.jsx("p",{className:"text-muted",children:"Records Updated"})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-danger",children:k.results?.failed||0}),a.jsx("p",{className:"text-muted",children:"Records Failed"})]})})]}),k.results?.errors&&k.results.errors.length>0&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{children:"Error Details:"}),a.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:k.results.errors.map((Q,U)=>a.jsx("div",{className:"alert alert-danger alert-sm mb-1",children:a.jsx("small",{children:Q})},U))})]}),a.jsx("div",{className:"mt-3 d-flex justify-content-end",children:a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:K,children:"Close"})})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-download me-2"}),"Download Template"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("p",{className:"text-muted",children:"Download the template in your preferred format and fill in your data:"}),a.jsxs("div",{className:"d-flex gap-2 flex-wrap",children:[a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:()=>O("csv"),children:[a.jsx("i",{className:"fas fa-file-csv me-1"}),"CSV Template"]}),a.jsxs("button",{className:"btn btn-outline-info btn-sm",onClick:()=>O("excel"),children:[a.jsx("i",{className:"fas fa-file-excel me-1"}),"Excel Template"]}),a.jsxs("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>O("json"),children:[a.jsx("i",{className:"fas fa-file-code me-1"}),"JSON Template"]})]}),a.jsx("div",{className:"mt-3",children:a.jsxs("small",{className:"text-muted",children:[a.jsx("strong",{children:"Template Fields:"})," ",B.fields.join(", ")]})})]})]}),a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-upload me-2"}),"Upload File"]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"mb-3 col-xl-6",children:[a.jsx("input",{ref:D,type:"file",className:"form-control form-control-sm",accept:".csv,.xlsx,.xls,.json",onChange:A}),a.jsx("div",{className:"form-text",children:"Supported formats: CSV, Excel (.xlsx, .xls), JSON"})]}),m>0&&m<100&&a.jsx("div",{className:"progress mb-3",children:a.jsxs("div",{className:"progress-bar",style:{width:`${m}%`},children:[m,"%"]})})]})]}),v.length>0&&a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header bg-danger text-white",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),"Validation Errors (",v.length,")"]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:v.map((Q,U)=>a.jsx("div",{className:"alert alert-danger alert-sm mb-1",children:a.jsxs("small",{children:["Row ",Q.row,": ",Q.field&&`${Q.field} - `,Q.error]})},U))})})]}),b.length>0&&a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"fas fa-eye me-2"}),"Preview (First 5 records)"]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsx("tr",{children:B.fields.map(Q=>a.jsx("th",{style:{minWidth:"120px"},children:Q},Q))})}),a.jsx("tbody",{children:b.map((Q,U)=>a.jsx("tr",{children:B.fields.map(J=>a.jsx("td",{style:{maxWidth:"150px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Q[J]!==void 0&&Q[J]!==null?Q[J].toString():"-"},J))},U))})]})})})]}),!k&&c.length>0&&a.jsx("div",{className:"d-flex justify-content-end",children:a.jsx("button",{type:"button",className:"btn btn-primary",onClick:Z,disabled:u||v.length>0,children:u?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-spinner fa-spin me-1"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fas fa-upload me-1"}),"Import Data (",c.length," records)"]})})})]})})]})})})]})},Q6=["Piece","Box","Kg","Ltr"],MSe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState([]),[c,d]=N.useState(null),[u,h]=N.useState({categoryId:"",description:"",baseUnit:"",orderUnit:"",conversionValue:"",dimension:"",minstock:"",safetyStock:"",maxstock:"",pdt:"",mpn:"",location:"",materialgroup:"",hsn:""}),[m,p]=N.useState(""),[v,g]=N.useState(1),[b]=N.useState(10),[y,C]=N.useState(!1),[w,k]=N.useState(!1),[S,D]=N.useState(""),[E,T]=N.useState(""),[A,L]=N.useState(null);N.useEffect(()=>{P(),z()},[]),N.useEffect(()=>{if(!m)l(r);else{const Ne=r.filter(Ue=>{const Qe=m.toLowerCase();return(Ue.materialId||"").toLowerCase().includes(Qe)||(Ue.description||"").toLowerCase().includes(Qe)||(Ue.baseUnit||"").toLowerCase().includes(Qe)||(Ue.orderUnit||"").toLowerCase().includes(Qe)||(Ue.conversionValue||"").toString().toLowerCase().includes(Qe)||(Ue.dimension||"").toLowerCase().includes(Qe)||(Ue.mpn||"").toLowerCase().includes(Qe)||(Ue.hsn||"").toLowerCase().includes(Qe)||(Ue.location||"").toLowerCase().includes(Qe)||(Ue.materialgroup||"").toLowerCase().includes(Qe)});l(Ne)}g(1)},[m,r]);const P=async()=>{const Ne=await Oe.get("/api/category",{params:{companyId:O,financialYear:Z}});t(Ne.data)},O=localStorage.getItem("selectedCompanyId"),Z=localStorage.getItem("financialYear"),z=async()=>{const Ne=await Oe.get("/api/material",{params:{companyId:O,financialYear:Z}});console.log(Ne);const Ue=Ne.data.sort((Qe,ot)=>new Date(ot.createdAt)-new Date(Qe.createdAt));n(Ue)},K=Ne=>{const{name:Ue,value:Qe}=Ne.target;h(ot=>({...ot,[Ue]:Qe}))},B=Ne=>{p(Ne.target.value)},Q=Ne=>{d(Ne),h({categoryId:Ne.categoryId?._id||Ne.categoryId,description:Ne.description,baseUnit:Ne.baseUnit,orderUnit:Ne.orderUnit,conversionValue:Ne.conversionValue||"",dimension:Ne.dimension||"",mpn:Ne.mpn||"",location:Ne.location||"",materialgroup:Ne.materialgroup||"",hsn:Ne.hsn||"",minstock:Ne.minstock||"",safetyStock:Ne.safetyStock||"",maxstock:Ne.maxstock||"",pdt:Ne.pdt||""})},U=()=>{d(null),h({categoryId:"",description:"",baseUnit:"",orderUnit:"",conversionValue:"",dimension:"",hsn:"",mpn:"",location:"",materialgroup:"",minstock:"",safetyStock:"",maxstock:"",pdt:""}),D(""),T(""),L(null)},J=async Ne=>{Ne.preventDefault();try{c?(await Oe.put(`/api/material/${c._id}`,u),alert("Material updated!"),z(),U(),H()):(L(u),C(!1),k(!0))}catch(Ue){console.error(Ue),alert("Operation failed!")}},Y=async()=>{try{let Ne;const Ue=localStorage.getItem("selectedCompanyId"),Qe=localStorage.getItem("financialYear");S==="external"?Ne=E:Ne=(await Oe.post("/api/material/generate-id",{categoryId:A.categoryId})).data.materialId,await Oe.post("/api/material",{...A,materialId:Ne,materialIdType:S,companyId:Ue,financialYear:Qe}),alert("Material added!"),z(),U(),H()}catch(Ne){console.error(Ne),alert("Operation failed!")}},oe=async(Ne,Ue,Qe)=>{try{const ot={[Ue]:Qe};await Oe.put(`/api/material/status/${Ne}`,ot),n(r.map(xt=>xt._id===Ne?{...xt,[Ue]:Qe}:xt)),alert("Status updated successfully!")}catch(ot){console.error("Error updating status:",ot),alert("Failed to update status!")}},M=()=>{const Ne=o.map(At=>({"Material ID":At.materialId||"",Description:At.description||"","Base Unit":At.baseUnit||"","Order Unit":At.orderUnit||"","Conversion Value":At.conversionValue||"",Dimension:At.dimension||"",MPN:At.mpn||"",HSN:At.hsn||"","Min Stock":At.minstock||"","Safety Stock":At.safetyStock||"","Max Stock":At.maxstock||"",PDT:At.pdt||"",Location:At.location||"","Material Group":At.materialgroup||"","Is Deleted":At.isDeleted?"Yes":"No","Is Blocked":At.isBlocked?"Yes":"No","Created Date":At.createdAt?new Date(At.createdAt).toLocaleDateString():"","Updated Date":At.updatedAt?new Date(At.updatedAt).toLocaleDateString():""})),Ue=nn.book_new(),Qe=nn.json_to_sheet(Ne),ot=[{wch:15},{wch:30},{wch:12},{wch:12},{wch:15},{wch:20},{wch:15},{wch:15},{wch:12},{wch:15},{wch:12},{wch:10},{wch:20},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];Qe["!cols"]=ot,nn.book_append_sheet(Ue,Qe,"Materials");const xt=new Date,Le=xt.toLocaleDateString("en-GB").replace(/\//g,"-"),dt=xt.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),Tt=`Material-Master-${Le}-${dt}.xlsx`;Zu(Ue,Tt),ie()},V=()=>C(!0),H=()=>{C(!1),k(!1),L(null)},ee=()=>{k(!1),D(""),T(""),L(null),C(!0)},re=Ne=>{D(Ne),Ne==="internal"&&Y()},[ae,ne]=N.useState(!1),ie=()=>ne(!1),[G,de]=N.useState([]);N.useEffect(()=>{(async()=>{try{const Ue=await Oe.get("/api/locations",{params:{companyId:O}});de(Ue.data)}catch(Ue){console.error("Error fetching locations:",Ue)}})()},[]);const X=v*b,le=X-b,Se=o.slice(le,X),ue=Math.ceil(o.length/b),se=Ne=>{g(Ne)},ye=Ne=>{console.log("Import successful:",Ne),z()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Material Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:m,onChange:B})]})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-info btn-sm me-2",onClick:()=>i(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:M,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsxs("a",{onClick:()=>{V(),U()},className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"New Material"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base"}),a.jsx("th",{children:"Order"}),a.jsx("th",{children:"Conversion"}),a.jsx("th",{children:"Dimension"}),a.jsx("th",{children:"MPN"}),a.jsx("th",{children:"HSN"}),a.jsx("th",{children:"Min Stock"}),a.jsx("th",{children:"safety Stock"}),a.jsx("th",{children:"Max Stock"}),a.jsx("th",{children:"PDT"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Delete"}),a.jsx("th",{children:"Block"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Se.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"16",className:"text-center",children:m?"No materials found matching your search":"No materials found"})}):Se.map(Ne=>a.jsxs("tr",{children:[a.jsx("td",{children:Ne.materialId}),a.jsx("td",{className:"text-wrap",children:Ne.description}),a.jsx("td",{children:Ne.baseUnit}),a.jsx("td",{children:Ne.orderUnit}),a.jsx("td",{children:Ne.conversionValue||"-"}),a.jsx("td",{className:"text-wrap",children:Ne.dimension||"-"}),a.jsx("td",{children:Ne.mpn||"_"}),a.jsx("td",{children:Ne.hsn||"_"}),a.jsx("td",{children:Ne.minstock||"_"}),a.jsx("td",{children:Ne.safetyStock||"_"}),a.jsx("td",{children:Ne.maxstock||"_"}),a.jsx("td",{children:Ne.pdt||"_"}),a.jsx("td",{className:"text-wrap",children:Ne.location||"_"}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:Ne.isDeleted||!1,onChange:Ue=>oe(Ne._id,"isDeleted",Ue.target.checked)})})}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:Ne.isBlocked||!1,onChange:Ue=>oe(Ne._id,"isBlocked",Ue.target.checked)})})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${!Ne.isDeleted&&!Ne.isBlocked?"bg-success":Ne.isDeleted&&Ne.isBlocked?"bg-dark":Ne.isDeleted?"bg-secondary":"bg-danger"}`,children:!Ne.isDeleted&&!Ne.isBlocked?"Active":Ne.isDeleted&&Ne.isBlocked?"Deleted & Blocked":Ne.isDeleted?"Deleted":"Blocked"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{Q(Ne),V()},children:"Edit"})})]},Ne._id))})]})})})]}),ue>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>se(v-1),disabled:v===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const Ue=[],Qe=[];Ue.push(1);for(let Le=Math.max(2,v-2);Le<=Math.min(ue-1,v+2);Le++)Ue.push(Le);ue>1&&Ue.push(ue);const ot=[...new Set(Ue)].sort((Le,dt)=>Le-dt);let xt;for(let Le of ot)xt&&(Le-xt===2?Qe.push(xt+1):Le-xt!==1&&Qe.push("...")),Qe.push(Le),xt=Le;return Qe.map((Le,dt)=>Le==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${dt}`):a.jsx("li",{className:`page-item ${v===Le?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>se(Le),children:Le})},Le))})(),a.jsx("li",{className:`page-item ${v===ue?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>se(v+1),disabled:v===ue,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})})}),w&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Material ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:ee,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Material ID:"}),S==="external"?a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3 ",children:[a.jsx("label",{className:"form-label",children:"External Material ID"}),a.jsx("input",{type:"text",className:"form-control form-control-sm",value:E,onChange:Ne=>T(Ne.target.value),maxLength:50,required:!0,placeholder:"Enter custom material ID (max 50 characters)"}),a.jsxs("small",{className:"form-text text-muted",children:[E.length,"/50 characters"]})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-primary",onClick:Y,disabled:!E.trim(),children:"Create Material"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>D(""),children:"Back"})]})]}):a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>re("internal"),children:[a.jsx("i",{className:"ti ti-settings me-2"}),"Internal (Auto-generated ID)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>re("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Custom ID)"]})})]})]})]})})})]}),y&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:c?"Edit Material":"Add New Material"}),a.jsx("button",{type:"button",className:"btn-close",onClick:H,"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:J,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Category"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",value:u.categoryId,onChange:K,className:"form-select",placeholder:"Select Category",required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),e.map(Ne=>a.jsx("option",{value:Ne._id,children:Ne.categoryName},Ne._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Description"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"description",value:u.description,onChange:K,className:"form-control",placeholder:"Enter Description",maxLength:100,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"HSN"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"hsn",value:u.hsn,onChange:K,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Base Unit"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"baseUnit",value:u.baseUnit,onChange:K,className:"form-select",required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),Q6.map(Ne=>a.jsx("option",{value:Ne,children:Ne},Ne))]})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Order Unit"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"orderUnit",value:u.orderUnit,onChange:K,className:"form-select",required:!0,children:[a.jsx("option",{value:"",children:"-- Select --"}),Q6.map(Ne=>a.jsx("option",{value:Ne,children:Ne},Ne))]})})]})}),u.baseUnit&&u.orderUnit&&u.baseUnit!==u.orderUnit&&a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label text-primary",children:"Unit Conversion"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{name:"conversionValue",value:u.conversionValue,onChange:K,className:"form-control",required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Min Stock"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"minstock",value:u.minstock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),K(Ne)},className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Safety Stock"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"safetyStock",value:u.safetyStock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),K(Ne)},className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Max Stock"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"maxstock",value:u.maxstock,onChange:Ne=>{Ne.target.value=Math.max(0,Ne.target.value),K(Ne)},className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Material Group"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"materialgroup",value:u.materialgroup,onChange:K,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"MPN"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"mpn",value:u.mpn,onChange:K,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Packing"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"dimension",value:u.dimension,onChange:K,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Shipping Note"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{name:"pdt",type:"text",value:u.pdt,onChange:K,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label text-primary",children:"Location"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"location",value:u.location,onChange:K,className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"Select Location"}),G.map(Ne=>a.jsx("option",{value:Ne.name,children:Ne.name},Ne.name))]})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:U,children:"Clear"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update Material":"Save Material"})]})]})})]})})})]}),a.jsx(gf,{show:s,onClose:()=>i(!1),onImport:ye,masterDataType:"material",apiEndpoint:"materials"})]})};function ea(){return ea=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ea.apply(null,arguments)}function RSe(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function E5(e,t){return E5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},E5(e,t)}function FSe(){const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=N.useState(!1),[u,h]=N.useState(1),[m,p]=N.useState(10),[v,g]=N.useState(""),[b,y]=N.useState({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1,companyId:o,financialYear:l}),C=B=>{alert(`Import completed: ${B.results.imported} records imported`),d(!1),P()},w=e.filter(B=>{if(!v)return!0;const Q=v.toLowerCase(),U=!B.isDeleted&&!B.isBlocked?"Active":B.isDeleted&&B.isBlocked?"Deleted & Blocked":B.isDeleted?"Deleted":"Blocked";return B.processId?.toLowerCase().includes(Q)||B.processDescription?.toLowerCase().includes(Q)||U.toLowerCase().includes(Q)||(B.isDeleted?"yes deleted":"no active").includes(Q)||(B.isBlocked?"yes blocked":"no active").includes(Q)}),k=Math.ceil(w.length/m),S=(u-1)*m,D=S+m,E=w.slice(S,D),T=B=>{g(B.target.value),h(1)},A=B=>{h(B)},L=()=>{const Q=(v?w:e).map((ae,ne)=>({"S.No":ne+1,"Process ID":ae.processId||"","Process Description":ae.processDescription||"","Is Deleted":ae.isDeleted?"Yes":"No","Is Blocked":ae.isBlocked?"Yes":"No",Status:!ae.isDeleted&&!ae.isBlocked?"Active":ae.isDeleted&&ae.isBlocked?"Deleted & Blocked":ae.isDeleted?"Deleted":"Blocked","Created Date":ae.createdAt?new Date(ae.createdAt).toLocaleDateString():"","Updated Date":ae.updatedAt?new Date(ae.updatedAt).toLocaleDateString():""})),U=nn.book_new(),J=nn.json_to_sheet(Q),Y=[{wch:8},{wch:15},{wch:40},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15}];J["!cols"]=Y,nn.book_append_sheet(U,J,"Process List Master");const oe=new Date,M=oe.toLocaleDateString("en-GB").replace(/\//g,"-"),V=oe.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ee=`Process-List-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${V}.xlsx`;Zu(U,ee);const re=v?w.length:e.length;alert(`Excel file exported successfully: ${re} records exported as ${ee}`)},P=async()=>{try{const B=await Oe.get("/api/processes",{params:{companyId:o,financialYear:l}});t(B.data),h(1)}catch(B){console.error("Fetch failed:",B),alert("Error loading processes")}},O=(B=null)=>{B?(y({processId:B.processId||"",processDescription:B.processDescription||"",isDeleted:B.isDeleted||!1,isBlocked:B.isBlocked||!1}),i(B)):(y({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1}),i(null)),n(!0)},Z=async()=>{try{if(!b.processId.trim()){alert("Process ID is required");return}if(!b.processDescription.trim()){alert("Process Description is required");return}const B={...b,companyId:o,financialYear:l};s?(await Oe.put(`/api/processes/${s._id}`,B),alert("Process updated successfully!")):(await Oe.post("/api/processes",B),alert("Process added successfully!")),P(),n(!1),i(null)}catch(B){console.error("Save failed:",B),alert("Error saving process. Please try again.")}},z=async(B,Q,U)=>{try{const J={[Q]:U,companyId:o,financialYear:l};await Oe.put(`/api/processes/${B}`,J),alert(`Process ${Q==="isDeleted"?"delete status":"block status"} updated successfully!`),P()}catch(J){console.error("Status update failed:",J),alert("Error updating status")}},K=()=>{n(!1),i(null),y({processId:"",processDescription:"",isDeleted:!1,isBlocked:!1})};return N.useEffect(()=>{P()},[]),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Process List Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Process List Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by ID, description, or status...",value:v,onChange:T})]})}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>d(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:L,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:w.length})]}),a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>O(),children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add Process"]})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Process ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Is Deleted"}),a.jsx("th",{children:"Is Blocked"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:E.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center",children:v?"No processes found matching your search criteria":"No processes found"})}):E.map((B,Q)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+Q+1}),a.jsx("td",{children:a.jsx("strong",{children:B.processId})}),a.jsx("td",{className:"text-wrap",children:B.processDescription}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:B.isDeleted||!1,onChange:U=>z(B._id,"isDeleted",U.target.checked)})}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:B.isBlocked||!1,onChange:U=>z(B._id,"isBlocked",U.target.checked)})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${!B.isDeleted&&!B.isBlocked?"bg-success":B.isDeleted&&B.isBlocked?"bg-danger":B.isDeleted?"bg-warning":"bg-secondary"}`,children:!B.isDeleted&&!B.isBlocked?"Active":B.isDeleted&&B.isBlocked?"Deleted & Blocked":B.isDeleted?"Deleted":"Blocked"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>O(B),children:"Edit"})})]},B._id))})]})})})]}),k>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsx("div",{className:"text-muted"}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:B=>{B.preventDefault(),u>1&&A(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:k},(B,Q)=>a.jsx("li",{className:`page-item ${u===Q+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:U=>{U.preventDefault(),A(Q+1)},children:Q+1})},Q)),a.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:B=>{B.preventDefault(),u<k&&A(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:s?"Edit Process":"Add New Process"}),a.jsx("button",{type:"button",className:"btn-close",onClick:K,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"d-flex  align-items-center",children:[a.jsxs("div",{className:" col-md-2 row me-4",children:[a.jsx("label",{className:"form-label col-xl-7",children:"Process_ID"}),a.jsx("input",{type:"text",className:" col-xl-5  form-control-sm",placeholder:"Enter Process ID",value:b.processId,onChange:B=>y({...b,processId:B.target.value}),required:!0})]}),a.jsxs("div",{className:"col-md-10 row",children:[a.jsx("label",{className:"form-label col-xl-2 mt-4",children:"Process Description"}),a.jsx("textarea",{type:"text",className:"form-control-sm col-xl-10",rows:"4",placeholder:"Enter Process Description",value:b.processDescription,onChange:B=>y({...b,processDescription:B.target.value}),required:!0})]})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check mb-2",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isDeleted",checked:b.isDeleted,onChange:B=>y({...b,isDeleted:B.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isDeleted",children:"Is Deleted"})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isBlocked",checked:b.isBlocked,onChange:B=>y({...b,isBlocked:B.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isBlocked",children:"Is Blocked"})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"btn btn-secondary me-3",onClick:K,children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:Z,children:[s?"Update":"Save"," Process"]})]})]})})})]}),a.jsx(gf,{show:c,onClose:()=>d(!1),onImportSuccess:C,masterDataType:"process"})]})}function LSe(){const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=N.useState(!1),[u,h]=N.useState(1),[m,p]=N.useState(10),[v,g]=N.useState(""),[b,y]=N.useState({name:"",description:"",isDeleted:!1,isBlocked:!1,companyId:o,financialYear:l}),C=B=>{alert(`Import completed: ${B.results.imported} records imported`),d(!1),P()},w=e.filter(B=>{if(!v)return!0;const Q=v.toLowerCase(),U=!B.isDeleted&&!B.isBlocked?"Active":B.isDeleted&&B.isBlocked?"Deleted & Blocked":B.isDeleted?"Deleted":"Blocked";return B.name?.toLowerCase().includes(Q)||B.description?.toLowerCase().includes(Q)||U.toLowerCase().includes(Q)||(B.isDeleted?"yes deleted":"no active").includes(Q)||(B.isBlocked?"yes blocked":"no active").includes(Q)}),k=Math.ceil(w.length/m),S=(u-1)*m,D=S+m,E=w.slice(S,D),T=B=>{g(B.target.value),h(1)},A=B=>{h(B)},L=()=>{const Q=(v?w:e).map((ae,ne)=>({"S.No":ne+1,"Condition Name":ae.name||"",Description:ae.description||"","Is Deleted":ae.isDeleted?"Yes":"No","Is Blocked":ae.isBlocked?"Yes":"No",Status:!ae.isDeleted&&!ae.isBlocked?"Active":ae.isDeleted&&ae.isBlocked?"Deleted & Blocked":ae.isDeleted?"Deleted":"Blocked","Created Date":ae.createdAt?new Date(ae.createdAt).toLocaleDateString():"","Updated Date":ae.updatedAt?new Date(ae.updatedAt).toLocaleDateString():""})),U=nn.book_new(),J=nn.json_to_sheet(Q),Y=[{wch:8},{wch:25},{wch:50},{wch:12},{wch:12},{wch:15},{wch:15},{wch:15}];J["!cols"]=Y,nn.book_append_sheet(U,J,"General Condition Master");const oe=new Date,M=oe.toLocaleDateString("en-GB").replace(/\//g,"-"),V=oe.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ee=`General-Condition-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${V}.xlsx`;Zu(U,ee);const re=v?w.length:e.length;alert(`Excel file exported successfully: ${re} records exported as ${ee}`)},P=async()=>{try{const B=await Oe.get("/api/general-conditions",{params:{companyId:o,financialYear:l}});t(B.data),h(1)}catch(B){console.error("Failed to fetch:",B),alert("Error loading general conditions")}},O=(B=null)=>{B?(y({name:B.name||"",description:B.description||"",isDeleted:B.isDeleted||!1,isBlocked:B.isBlocked||!1}),i(B)):(y({name:"",description:"",isDeleted:!1,isBlocked:!1}),i(null)),n(!0)},Z=async()=>{try{if(!b.name.trim()){alert("Condition name is required");return}if(!b.description.trim()){alert("Description is required");return}const B={...b,companyId:o,financialYear:l};s?(await Oe.put(`/api/general-conditions/${s._id}`,B),alert("General condition updated successfully!")):(await Oe.post("/api/general-conditions",B),alert("General condition added successfully!")),P(),n(!1),i(null)}catch(B){console.error("Save failed:",B),alert("Error saving general condition. Please try again.")}},z=async(B,Q,U)=>{try{const J={[Q]:U,companyId:o,financialYear:l};await Oe.put(`/api/general-conditions/${B}`,J),alert(`General condition ${Q==="isDeleted"?"delete status":"block status"} updated successfully!`),P()}catch(J){console.error("Status update failed:",J),alert("Error updating status")}},K=()=>{n(!1),i(null),y({name:"",description:"",isDeleted:!1,isBlocked:!1})};return N.useEffect(()=>{P()},[]),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"General Condition Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"General Condition Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, description, or status...",value:v,onChange:T})]})}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>d(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:L,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:w.length})]}),a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>O(),children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add General Condition"]})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Condition Name"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Deleted"}),a.jsx("th",{children:"Blocked"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:E.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center",children:v?"No general conditions found matching your search criteria":"No general conditions found"})}):E.map((B,Q)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+Q+1}),a.jsx("td",{children:a.jsx("strong",{children:B.name})}),a.jsx("td",{className:"text-wrap",children:B.description}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:B.isDeleted||!1,onChange:U=>z(B._id,"isDeleted",U.target.checked)})}),a.jsx("td",{className:"text-center",children:a.jsx("input",{className:"form-check-input",type:"checkbox",style:{borderColor:"black"},checked:B.isBlocked||!1,onChange:U=>z(B._id,"isBlocked",U.target.checked)})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${!B.isDeleted&&!B.isBlocked?"bg-success":B.isDeleted&&B.isBlocked?"bg-danger":B.isDeleted?"bg-warning":"bg-secondary"}`,children:!B.isDeleted&&!B.isBlocked?"Active":B.isDeleted&&B.isBlocked?"Deleted & Blocked":B.isDeleted?"Deleted":"Blocked"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>O(B),children:"Edit"})})]},B._id))})]})})})]}),k>1&&a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:B=>{B.preventDefault(),u>1&&A(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:k},(B,Q)=>a.jsx("li",{className:`page-item ${u===Q+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:U=>{U.preventDefault(),A(Q+1)},children:Q+1})},Q)),a.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:B=>{B.preventDefault(),u<k&&A(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})}),r&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[s?"Edit":"Add"," General Condition"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:K,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:" row input-group",children:[a.jsx("label",{className:" form-label col-xl-6",children:"Condition Name"}),a.jsx("input",{type:"text",className:"form-control col-xl-6",placeholder:"Enter General Condition Name",value:b.name,onChange:B=>y({...b,name:B.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-9",children:a.jsxs("div",{className:" row input-group",children:[a.jsx("label",{className:"form-label col-xl-2",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",placeholder:"Enter Description",value:b.description,onChange:B=>y({...b,description:B.target.value}),required:!0})]})})]}),a.jsxs("div",{className:"row ",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check mb-2",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isDeleted",checked:b.isDeleted,onChange:B=>y({...b,isDeleted:B.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isDeleted",children:"Is Deleted"})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",id:"isBlocked",checked:b.isBlocked,onChange:B=>y({...b,isBlocked:B.target.checked})}),a.jsx("label",{className:"form-check-label",htmlFor:"isBlocked",children:"Is Blocked"})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"me-3 btn btn-secondary",onClick:K,children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:Z,children:[s?"Update":"Save"," Condition"]})]})]})})})]}),a.jsx(gf,{show:c,onClose:()=>d(!1),onImportSuccess:C,masterDataType:"generalCondition"})]})}const J6=["Piece","Box","Kg","Ltr"],BSe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(null),[o,l]=N.useState(null),[c,d]=N.useState([]),[u,h]=N.useState(""),[m,p]=N.useState(""),[v,g]=N.useState(""),[b,y]=N.useState(new Date().toISOString().split("T")[0]),[C,w]=N.useState([{materialId:"",description:"",baseUnit:"",orderUnit:"",materialgroup:"",qty:"",deliveryDate:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0}]),[k,S]=N.useState(!1),[D,E]=N.useState(""),[T,A]=N.useState([]),[L,P]=N.useState("materialId"),[O,Z]=N.useState(null),[z,K]=N.useState(!1),[B,Q]=N.useState([]),[U,J]=N.useState(""),[Y,oe]=N.useState(""),[M,V]=N.useState(1),[H]=N.useState(5),[ee,re]=N.useState(1),[ae]=N.useState(3),ne="MMNR-",ie=localStorage.getItem("selectedCompanyId"),G=localStorage.getItem("financialYear");N.useEffect(()=>{Oe.get("/api/material",{params:{companyId:ie}}).then(De=>{const Ye=De.data.filter(Nt=>!Nt.isDeleted&&!Nt.isBlocked);t(Ye),console.log("Fetched materials:",Ye)}).catch(De=>console.error(De)),Oe.get("/api/locations").then(De=>Q(De.data))},[]),N.useEffect(()=>{Oe.get("/api/purchasecategory",{params:{companyId:ie,financialYear:G}}).then(De=>d(De.data)).catch(De=>console.error(De))},[]);const de=()=>{w(De=>[...De,{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",buyerGroup:"",isManual:!0}])},X=De=>{w(Nt=>Nt.filter((Je,Xe)=>Xe!==De));const Ye=Math.ceil((C.length-1)/H);M>Ye&&Ye>0&&V(Ye)},le=async(De,Ye,Nt)=>{const Je=[...C];if(Je[De][Ye]=Nt,Ye==="materialId"&&Je[De].isManual)try{const Be=(await Oe.get(`/api/material/byId/${Nt}`)).data;Be&&(Je[De]={...Je[De],materialId:Be.materialId,description:Be.description,baseUnit:Be.baseUnit,orderUnit:Be.orderUnit,location:Be.location,materialgroup:Be.materialgroup,isManual:!0})}catch{console.error("Material ID not found:",Nt)}w(Je)},Se=()=>{if(!D.trim()){A([]);return}if(L==="materialId"){let De=D;/^\d+$/.test(D)&&(De=ne+D);const Ye=e.filter(Nt=>(Nt.materialId||"").toLowerCase().includes(De.toLowerCase()));A(Ye)}else{const De=e.filter(Ye=>(Ye.description||"").toLowerCase().includes(D.toLowerCase()));A(De)}};N.useEffect(()=>{const De=setTimeout(()=>{D.trim()?Se():A([])},300);return()=>clearTimeout(De)},[D,L,e]);const ue=De=>{const Ye=De.target.value;E(Ye)},se=()=>{A(e),E("")},ye=()=>{A([]),E("")},Ne=De=>{Z(De),S(!0),E(""),A([])},Ue=()=>{S(!1),Z(null),E(""),A([])},Qe=De=>{if(O!==null){const Ye=[...C];Ye[O]={...Ye[O],materialId:De.materialId,description:De.description,baseUnit:De.baseUnit,orderUnit:De.orderUnit,location:De.location,materialgroup:De.materialgroup,isManual:!0},w(Ye)}Ue()},[ot,xt]=N.useState([]);N.useEffect(()=>{Oe.get("/api/indent/get",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(De=>xt(De.data)).catch(De=>console.error("Failed to fetch saved indents",De))},[]);const Le=async()=>{if(!u){alert("Please select a purchase category");return}if(!m||!v){alert("Please fill in Location and Buyer Group");return}const De=C.filter(Xe=>Xe.materialId&&Xe.materialId.trim()!==""&&Xe.description&&Xe.description.trim()!==""&&Xe.qty&&Xe.qty>0);if(De.length===0){alert("Please add at least one valid item with Material ID, Description, and Quantity");return}const Ye=c.find(Xe=>Xe.name===u||Xe.categoryName===u||Xe._id===u),Nt=localStorage.getItem("selectedCompanyId"),Je=localStorage.getItem("financialYear");try{const Xe={indentIdType:U,externalIndentId:Y,categoryId:Ye._id,categoryName:Ye.name||Ye.categoryName,location:m,buyerGroup:v,documentDate:b,items:De,companyId:Nt,financialYear:Je};if(U==="")l(Xe),n(!1),K(!0);else{if(U==="internal"){const Be=await Oe.post("/api/indent/create",Xe);alert(`Indent saved successfully with ID: ${Be.data.indentId}`)}else if(U==="external"){if(!Y||Y.trim()===""){alert("Please enter an External Indent ID");return}Xe.indentId=Y;const Be=await Oe.post("/api/indent/create",Xe);alert(`Indent saved successfully with External ID: ${Be.data.indentId}`)}else alert(`Indent saved successfully with ID: ${res.data.indentId}`);K(!1),w([]),p(""),g(""),y(new Date().toISOString().split("T")[0]),V(1)}Oe.get("/api/indent/get",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(Be=>xt(Be.data)).catch(Be=>console.error("Failed to fetch saved indents",Be))}catch(Xe){console.error(Xe),alert("Failed to save indent")}},dt=M*H,Tt=dt-H,At=C.slice(Tt,dt),Vt=Math.ceil(C.length/H),xe=De=>V(De),he=({currentPage:De,totalPages:Ye,onPageChange:Nt,size:Je="normal"})=>{if(Ye<=1)return null;const Xe=[],Be=5;let qe=Math.max(1,De-Math.floor(Be/2)),ft=Math.min(Ye,qe+Be-1);ft-qe+1<Be&&(qe=Math.max(1,ft-Be+1));for(let Ke=qe;Ke<=ft;Ke++)Xe.push(Ke);const Ie=Je==="small"?"btn-sm":"";return a.jsx("nav",{"aria-label":"Page navigation mt-2",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${De===1?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Ie}`,onClick:()=>Nt(De-1),disabled:De===1,children:"Previous"})}),qe>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Ie}`,onClick:()=>Nt(1),children:"1"})}),qe>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Ie}`,children:"..."})})]}),Xe.map(Ke=>a.jsx("li",{className:`page-item ${De===Ke?"active":""}`,children:a.jsx("button",{className:`page-link ${Ie}`,onClick:()=>Nt(Ke),children:Ke})},Ke)),ft<Ye&&a.jsxs(a.Fragment,{children:[ft<Ye-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Ie}`,children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Ie}`,onClick:()=>Nt(Ye),children:Ye})})]}),a.jsx("li",{className:`page-item ${De===Ye?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Ie}`,onClick:()=>Nt(De+1),disabled:De===Ye,children:"Next"})})]})})},ve=()=>{K(!1),J(""),oe(""),l(null),n(!0)},pe=De=>{J(De),Le()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto mb-2",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Enquiry"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Enquiry"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Indent Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-6",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Purchase Category",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-6",children:a.jsxs("select",{className:"form-select form-select-sm",value:u,onChange:De=>h(De.target.value),children:[a.jsx("option",{value:"",children:"-- Select Category --"}),c.map((De,Ye)=>a.jsx("option",{value:De.name||De.categoryName||De._id,children:De.name||De.categoryName||`Category ${Ye+1}`},Ye))]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Doc Date",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:b,onChange:De=>y(De.target.value)})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Location",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{className:"form-select form-select-sm",value:m,onChange:De=>p(De.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),B.map((De,Ye)=>a.jsx("option",{value:De.name||De._id,children:De.name||De._id},Ye))]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsxs("label",{className:"form-label-sm mb-0",children:["Buyer Group",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:v,onChange:De=>g(De.target.value),placeholder:"Buyer Group"})})]})})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"}),a.jsxs("span",{className:"badge bg-light rounded-pill ms-2",children:["(",C.length,")"]})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body ",children:[C.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:a.jsxs("table",{className:" table-bordered table-sm mb-0",children:[a.jsx("thead",{className:" sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"S.No"}),a.jsx("th",{children:"Material No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:At.map((De,Ye)=>{const Nt=Tt+Ye;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center fw-bold",children:Nt+1}),a.jsx("td",{children:De.isManual?a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm w-50",value:De.materialId,onChange:Je=>le(Nt,"materialId",Je.target.value),placeholder:"Material ID"}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>Ne(Nt),title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]}):a.jsx("span",{className:"badge ",children:De.materialId})}),a.jsx("td",{children:De.isManual?a.jsx("input",{className:"form-control form-control-sm",value:De.description,onChange:Je=>le(Nt,"description",Je.target.value),placeholder:"Description",readOnly:!!De.materialId}):a.jsx("span",{title:De.description,children:De.description})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:De.qty,onChange:Je=>le(Nt,"qty",Je.target.value),min:"1"})}),a.jsx("td",{children:a.jsxs("select",{value:De.baseUnit,onChange:Je=>le(Nt,"baseUnit",Je.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),J6.map(Je=>a.jsx("option",{value:Je,children:Je},Je))]})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:De.deliveryDate,onChange:Je=>le(Nt,"deliveryDate",Je.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:De.orderUnit,onChange:Je=>le(Nt,"orderUnit",Je.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),J6.map(Je=>a.jsx("option",{value:Je,children:Je},Je))]})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:De.materialgroup||"-"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-warning btn-sm",onClick:()=>X(Nt),title:"Delete Item",children:a.jsx("i",{className:"fas fa-trash"})})})]},Nt)})})]})}),a.jsx(he,{currentPage:M,totalPages:Vt,onPageChange:xe,size:"small"})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No materials selected. Click "Add Manual Entry" to start.'})]}),"   ",a.jsx("div",{className:"col-xl-2",children:a.jsxs("button",{onClick:de,className:"btn btn-outline-primary btn-sm me-2 mt-2",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Add Manual Entry"]})})]})})})})]})]}),a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-md-6 col-xl-2 col-sm-12",children:a.jsxs("button",{onClick:Le,className:"btn btn-success btn-sm",disabled:!u||C.length===0,children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Indent"]})})}),k&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Ue})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select form-select-sm",value:L,onChange:De=>P(De.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:L==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:D,onChange:ue})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info btn-sm",onClick:se,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),T.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:ye,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:T.length>0?a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:T.map((De,Ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{children:De.materialId})}),a.jsx("td",{children:De.description}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:De.baseUnit})}),a.jsx("td",{children:De.location}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:De.materialgroup})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Qe(De),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ye))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No materials loaded from API":D?`No materials found matching "${D}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Ue,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),z&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Indent ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:ve,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Indent ID:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>pe("internal"),children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>J("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),U==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"External Indent ID"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter External Indent ID (max 50 characters)",value:Y,onChange:De=>oe(De.target.value),onKeyPress:De=>{De.key==="Enter"&&Y.trim()&&Le()},maxLength:50}),a.jsxs("div",{className:"form-text",children:[Y.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsx("button",{className:"btn btn-primary",onClick:Le,disabled:!Y.trim(),children:"Create Indent"})})]})]})]})})})]})]})},USe=()=>{const[e,t]=N.useState(1),[r]=N.useState(10),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(""),[d,u]=N.useState("indentId"),[h,m]=N.useState(!1),[p,v]=N.useState(!1),[g,b]=N.useState([]),[y]=N.useState(10),[C,w]=N.useState(null),[k,S]=N.useState(null);N.useEffect(()=>{D()},[]),N.useEffect(()=>{const ae=n.find(ne=>ne._id===C);S(ae)},[C,n]);const D=()=>{m(!0);const ae=localStorage.getItem("selectedCompanyId"),ne=localStorage.getItem("financialYear");Oe.get("/api/indent/get",{params:{companyId:ae,financialYear:ne}}).then(ie=>{const G=ie.data.sort((de,X)=>new Date(X.createdAt||X.documentDate)-new Date(de.createdAt||de.documentDate));s(G),console.log("Fetched saved indents:",G),o(G)}).catch(ie=>console.error("Failed to fetch saved indents",ie)).finally(()=>m(!1))},E=async(ae,ne,ie)=>{try{const G={[ne]:ie};await Oe.put(`/api/indent/status/${ae}`,G);const de=X=>X.map(le=>le._id===ae?{...le,[ne]:ie}:le);s(de),o(X=>de(X)),alert("Status updated successfully!")}catch(G){console.error("Error updating status:",G),alert("Failed to update status!")}},T=()=>{v(!0),b(n)},A=()=>{v(!1),c(""),b([])},L=ae=>{const ne=ae.target.value;if(c(ne),ne.trim()===""){b(n);return}const ie=n.filter(G=>{if(d==="indentId"){const de=ne.toLowerCase(),X=G.indentId.toLowerCase();return X.includes(de)||X.replace(/[^0-9]/g,"").includes(de.replace(/[^0-9]/g,""))}else{if(d==="location")return G.location.toLowerCase().includes(ne.toLowerCase());if(d==="buyerGroup")return G.buyerGroup.toLowerCase().includes(ne.toLowerCase());if(d==="categoryName")return G.categoryName.toLowerCase().includes(ne.toLowerCase())}return!1});b(ie)},P=()=>{b(n),c("")},O=()=>{b([]),c("")},Z=ae=>{o([ae]),t(1),A()},z=()=>{o(n),t(1)},K=ae=>{const ne=`
            <div style="padding: 20px; font-family: Arial, sans-serif;">
                <h2 style="text-align: center; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
                    Purchase Indent Details
                </h2>
                
                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Indent Information</h3>
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <tr>
                            <td style="padding: 8px; font-weight: bold; width: 150px;">Indent ID:</td>
                            <td style="padding: 8px;">${ae.indentId}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Document Date:</td>
                            <td style="padding: 8px;">${new Date(ae.documentDate).toLocaleDateString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Category:</td>
                            <td style="padding: 8px;">${ae.categoryName}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Location:</td>
                            <td style="padding: 8px;">${ae.location}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Buyer Group:</td>
                            <td style="padding: 8px;">${ae.buyerGroup}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Material Details</h3>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
                        <thead>
                            <tr style="background-color: #007bff; color: white;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S.No</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material ID</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Qty</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Base Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Order Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Delivery Date</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material Group</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${ae.items.map((G,de)=>`
                                <tr style="${de%2===0?"background-color: #f8f9fa;":""}">
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${de+1}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.materialId}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.description}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${G.qty}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.baseUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.orderUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.deliveryDate}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${G.materialgroup||"-"}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">
                    Generated on: ${new Date().toLocaleString()}
                </div>
            </div>
        `,ie=window.open("","","width=900,height=700");ie.document.write("<html><head><title>Indent Print - "+ae.indentId+"</title></head><body>"),ie.document.write(ne),ie.document.write("</body></html>"),ie.document.close(),ie.print()},B=e*r,Q=B-r,U=i.slice(Q,B),J=Math.ceil(i.length/r),Y=ae=>t(ae),oe=({currentPage:ae,totalPages:ne,onPageChange:ie})=>{if(ne<=1)return null;const G=[],de=5;let X=Math.max(1,ae-Math.floor(de/2)),le=Math.min(ne,X+de-1);le-X+1<de&&(X=Math.max(1,le-de+1));for(let Se=X;Se<=le;Se++)G.push(Se);return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${ae===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(ae-1),disabled:ae===1,children:"Previous"})}),X>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ie(1),children:"1"})}),X>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})})]}),G.map(Se=>a.jsx("li",{className:`page-item ${ae===Se?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(Se),children:Se})},Se)),le<ne&&a.jsxs(a.Fragment,{children:[le<ne-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ie(ne),children:ne})})]}),a.jsx("li",{className:`page-item ${ae===ne?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(ae+1),disabled:ae===ne,children:"Next"})})]})})},M=e*y,V=M-y,H=g.slice(V,M);Math.ceil(g.length/y);const ee=ae=>t(ae),re=({currentPage:ae,totalPages:ne,onPageChange:ie})=>{if(ne<=1)return null;const G=[],de=5;let X=Math.max(1,ae-Math.floor(de/2)),le=Math.min(ne,X+de-1);le-X+1<de&&(X=Math.max(1,le-de+1));for(let Se=X;Se<=le;Se++)G.push(Se);return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${ae===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(ae-1),disabled:ae===1,children:"Previous"})}),X>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ie(1),children:"1"})}),X>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})})]}),G.map(Se=>a.jsx("li",{className:`page-item ${ae===Se?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(Se),children:Se})},Se)),le<ne&&a.jsxs(a.Fragment,{children:[le<ne-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ie(ne),children:ne})})]}),a.jsx("li",{className:`page-item ${ae===ne?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(ae+1),disabled:ae===ne,children:"Next"})})]})})};return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Indent List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Indent List"})]})})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-outline-dark btn-sm",onClick:T,children:[a.jsx("i",{className:"fas fa-search me-1"}),"Search Indents"]}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-light btn-sm",onClick:z,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All"]})]})]}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:h?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2 text-muted",children:"Loading indents..."})]}):U.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-hover table-bordered table-sm align-middle",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"60px"},children:"S.No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{style:{width:"100px"},children:"Materials"}),a.jsx("th",{children:"Delete Status"}),a.jsx("th",{children:"Block Status"}),a.jsx("th",{style:{width:"100px"},children:"Action"})]})}),a.jsx("tbody",{children:U.map((ae,ne)=>{const ie=Q+ne;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center",children:ie+1}),a.jsx("td",{children:ae.indentId}),a.jsx("td",{children:(()=>{const G=new Date(ae.documentDate),de=String(G.getDate()).padStart(2,"0"),X=String(G.getMonth()+1).padStart(2,"0"),le=G.getFullYear();return`${de}/${X}/${le}`})()}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),ae.location]}),a.jsx("td",{children:ae.buyerGroup}),a.jsx("td",{children:ae.categoryName}),a.jsxs("td",{className:"text-center",children:[ae.items.length," items"]}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:ae.isDeleted||!1,onChange:G=>E(ae._id,"isDeleted",G.target.checked)}),a.jsx("label",{className:"form-check-label",children:ae.isDeleted?"Deleted":"Active"})]})}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:ae.isBlocked||!1,onChange:G=>E(ae._id,"isBlocked",G.target.checked)}),a.jsx("label",{className:"form-check-label",children:ae.isBlocked?"Blocked":"Active"})]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>K(ae),title:"Print Indent",children:a.jsx("i",{className:"fas fa-print"})}),a.jsx("button",{type:"button",onClick:()=>w(ae._id),className:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#standard-modal",children:a.jsx("i",{className:"ti ti-eye"})})]})]},ae._id)})})]})}),J>1&&a.jsx("div",{className:"d-flex justify-content-center mt-4",children:a.jsx(oe,{currentPage:e,totalPages:J,onPageChange:Y})})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("h5",{className:"text-muted",children:i.length!==n.length?"Filtered results":"No indents available"}),a.jsx("p",{className:"text-muted",children:i.length!==n.length?`Showing ${i.length} filtered indents. Click "Show All" to see all indents.`:"No purchase indents have been created yet."}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-primary mt-2",onClick:z,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All Indents"]})]})})})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:A})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:d,onChange:ae=>u(ae.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"location",children:"Location"}),a.jsx("option",{value:"buyerGroup",children:"Buyer Group"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:d==="indentId"?"Enter Indent ID (e.g., INDENT-100001 or 100001)":`Search by ${d}...`,value:l,onChange:L})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:P,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:O,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{children:H.length>0?a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Materials"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:H.map((ae,ne)=>a.jsxs("tr",{children:[a.jsx("td",{children:ne+1}),a.jsx("td",{children:ae.indentId}),a.jsx("td",{children:new Date(ae.documentDate).toLocaleDateString("en-IN")}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),ae.location]}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:ae.buyerGroup})}),a.jsx("td",{children:ae.categoryName}),a.jsx("td",{children:a.jsxs("span",{className:"badge bg-warning text-dark",children:[ae.items.length," items"]})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Z(ae),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ne))}),J>1&&a.jsx("tfoot",{children:a.jsx("tr",{children:a.jsx("td",{colSpan:8,children:a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx(re,{currentPage:e,totalPages:J,onPageChange:ee})})})})})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:n.length===0?"No indents loaded from API":l?`No indents found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:A,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx("div",{id:"standard-modal",className:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Quotation Items"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"table-responsive",children:k?.items?.length>0&&a.jsxs("table",{className:"table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Delivery Date"})]})}),a.jsx("tbody",{children:k?.items.map((ae,ne)=>a.jsxs("tr",{children:[a.jsx("td",{children:ne+1}),a.jsx("td",{children:ae.materialId}),a.jsx("td",{children:ae.description}),a.jsx("td",{children:ae.qty}),a.jsx("td",{children:ae.baseUnit}),a.jsx("td",{children:ae.orderUnit}),a.jsx("td",{children:k.location}),a.jsx("td",{children:k.buyerGroup}),a.jsx("td",{children:new Date(ae.deliveryDate).toLocaleDateString()})]},ae._id))})]})})})]})})})]})};function $Se(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState([]);Xu();const[c,d]=N.useState(""),[u,h]=N.useState(null),[m,p]=N.useState(null),[v,g]=N.useState(""),[b,y]=N.useState(""),[C,w]=N.useState(""),[k,S]=N.useState(""),[D,E]=N.useState([]),[T,A]=N.useState(""),[L,P]=N.useState(""),[O,Z]=N.useState(""),[z,K]=N.useState(!1),[B,Q]=N.useState(null),[U,J]=N.useState(0),[Y,oe]=N.useState(!1),[M,V]=N.useState(!1),[H,ee]=N.useState(""),[re,ae]=N.useState(""),[ne,ie]=N.useState(""),[G,de]=N.useState(""),[X,le]=N.useState(""),[Se,ue]=N.useState(""),[se,ye]=N.useState(null);console.log("cat",r),N.useEffect(()=>{if(X){const Xe=e.filter(Be=>Be.indentId.toLowerCase().includes(X.toLowerCase()));setFilteredIndents(Xe)}},[X]);const[Ne,Ue]=N.useState([]);N.useEffect(()=>{const Xe=localStorage.getItem("selectedCompanyId"),Be=localStorage.getItem("financialYear"),qe={params:{companyId:Xe,financialYear:Be}};Oe.get("/api/indent/get",qe).then(ft=>{const Ie=ft.data.filter(Ke=>!Ke.isDeleted&&!Ke.isBlocked);t(Ie.map(Ke=>({label:`${Ke.indentId} (${Ke.categoryName})`,value:Ke}))),t(Ie.map(Ke=>({label:`${Ke.indentId} (${Ke.categoryName})`,value:Ke})))}),Oe.get("/api/rfq-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}}).then(ft=>{n(ft.data.map(Ie=>({label:`${Ie.categoryName}`,value:Ie._id})))}),Oe.get("/api/vendors",qe).then(ft=>{const Ie=ft.data.filter(Ke=>!Ke.isDeleted&&!Ke.isBlocked);i(Ie.map(Ke=>({label:`${Ke.name1} ${Ke.name2||""}`,value:Ke._id,vnNo:Ke.vnNo||""})))}),Oe.get("/api/locations",qe).then(ft=>{console.log("Locations API response:",ft.data),Array.isArray(ft.data)?Ue(ft.data):ft.data&&Array.isArray(ft.data.locations)?Ue(ft.data.locations):Ue([])}).catch(ft=>{console.error("Failed to fetch locations:",ft),Ue([])}),console.log("location",T),Oe.get("/api/material",qe).then(ft=>{console.log("Fetched materials:",ft.data);const Ie=ft.data.filter(Ke=>!Ke.isDeleted&&!Ke.isBlocked);l(Ie),console.log("Filtered materials:",Ie)}).catch(ft=>console.error("Failed to fetch materials:",ft))},[]);const Qe=Xe=>{h(Xe);const{buyerGroup:Be,materialGroup:qe,deliveryDate:ft,location:Ie}=Xe.value;A(Ie||""),P(Be||"");const Ke=Xe.value.items.map(Ge=>({...Ge,unit:Ge.unit||"",price:Ge.price||"",materialGroup:Ge.materialGroup||qe||"",deliveryDate:Ge.deliveryDate||ft||""}));E(Ke)},ot=(Xe,Be,qe)=>{const ft=[...D];ft[Xe][Be]=qe,E(ft)},xt=Xe=>{console.log("Opening modal for item at index:",Xe),Q(Xe),K(!0)},Le=()=>{E([...D,{materialId:"",description:"",qty:0,baseUnit:"",orderUnit:"",location:"",buyerGroup:"",unit:"",materialGroup:"",deliveryDate:new Date().toISOString().slice(0,10),price:0}])},[dt,Tt]=N.useState(!1),[At,Vt]=N.useState("internal"),[xe,he]=N.useState(""),ve=async Xe=>{Xe.preventDefault(),Tt(!0)};N.useEffect(()=>{const Xe=D.reduce((Be,qe)=>{const ft=parseFloat(qe.price)||0,Ie=parseFloat(qe.qty)||0;return Be+ft*Ie},0);J(Xe)},[D]);const pe=async()=>{const Xe=localStorage.getItem("selectedCompanyId"),Be=localStorage.getItem("financialYear"),qe={indentId:u?.value?.indentId,categoryId:u?.value?.categoryId,rfqCategoryId:m?.value,vendor:v,vendorName:b,quotationReference:c,validityDate:O,vnNo:k,companyId:Xe,financialYear:Be,note:C,buyerGroup:L,location:T,totalPrice:U,items:D,quotationGenType:At,externalQuotationNumber:At==="external"?xe:null};console.log("Payload for submission:",qe);try{const ft=await Oe.post("/api/quotations/create",qe);alert("Quotation Created Successfully"),console.log(ft.data),Tt(!1)}catch(ft){console.error(ft),alert("Failed to create quotation")}},De=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Quotation Number Generation"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>Tt(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Quotation Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Vt("internal"),pe()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Vt("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),At==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Quotation Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom quotation number (max 50 characters)",value:xe,onChange:Xe=>{Xe.target.value.length<=50&&he(Xe.target.value)},onKeyPress:Xe=>{Xe.key==="Enter"&&xe.trim()&&pe()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[xe.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:pe,disabled:!xe.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Create Quotation"]})})]}),At==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"alert alert-info",role:"alert",children:"Quotation number will be auto-generated based on category and range count."})})]})]})})})]}),Ye=()=>{const[Xe,Be]=N.useState([]),[qe,ft]=N.useState("materialId"),[Ie,Ke]=N.useState(""),Ge=ke=>{const it=ke.target.value;Ke(it);const bt=o.filter(Xt=>(qe==="materialId"?Xt.materialId:Xt.description)?.toLowerCase().includes(it.toLowerCase()));Be(bt)},lt=()=>{Be(o),Ke("")},Mt=()=>{Be([]),Ke("")},Ae=ke=>{if(console.log("selectedItemIndex when selecting:",B),B==null){console.error("No item selected for update");return}E(it=>{console.log("Previous items:",it);const bt=[...it];return bt[B]={...bt[B],materialId:ke.materialId,description:ke.description,materialGroup:ke.materialgroup||"",baseUnit:ke.baseUnit,orderUnit:ke.orderUnit},console.log("Updated items:",bt),bt}),K(!1)};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>K(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:qe,onChange:ke=>ft(ke.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:qe==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:Ie,onChange:Ge})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:lt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Xe.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Mt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Xe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Xe.map((ke,it)=>a.jsxs("tr",{children:[a.jsx("td",{children:ke.materialId}),a.jsx("td",{children:ke.description}),a.jsx("td",{children:ke.baseUnit}),a.jsx("td",{children:ke.orderUnit}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ae(ke),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},it))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":Ie?`No materials found matching "${Ie}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Nt=()=>{const[Xe,Be]=N.useState("indentId"),[qe,ft]=N.useState([]),[Ie,Ke]=N.useState(""),Ge=Ae=>{const ke=Ae.target.value;Ke(ke);const it=e.filter(bt=>(Xe==="indentId"?bt?.value?.indentId:bt?.value?.categoryName)?.toLowerCase().includes(ke.toLowerCase()));ft(it)},lt=()=>{ft(e),Ke("")},Mt=()=>{ft([]),Ke("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>oe(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Xe,onChange:Ae=>Be(Ae.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Indent ID or Category",value:Ie,onChange:Ge})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:lt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),qe.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Mt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:qe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:qe.map((Ae,ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ae.value.indentId})}),a.jsx("td",{children:Ae.value.categoryName}),a.jsx("td",{children:Ae.value.buyerGroup}),a.jsx("td",{children:Ae.value.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{Qe(Ae),oe(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No indents found. Try different search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>oe(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Je=()=>{const[Xe,Be]=N.useState("name1"),[qe,ft]=N.useState([]),[Ie,Ke]=N.useState(""),Ge=Ae=>{const ke=Ae.target.value;Ke(ke);const it=s.filter(bt=>(Xe==="vnNo"?bt.vnNo:bt.label)?.toLowerCase().includes(ke.toLowerCase()));ft(it)},lt=()=>{ft(s),Ke("")},Mt=()=>{ft([]),Ke("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>V(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Xe,onChange:Ae=>Be(Ae.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vnNo",children:"Vendor No"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Name or VN No",value:Ie,onChange:Ge})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:lt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),qe.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Mt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:qe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Vendor No"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:qe.map((Ae,ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ae.label}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ae.vnNo})}),a.jsx("td",{children:Ae.city||"-"}),a.jsx("td",{children:Ae.region||"-"}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{g(Ae.value),y(Ae.label),S(Ae.vnNo||""),V(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No vendors found. Try another search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>V(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Quotation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Quotation"})]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Purchase Quotation Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select Indent"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:u?.value?.indentId||"",onChange:Xe=>{const Be=Xe.target.value;de(Be);const qe=e.find(ft=>ft.indentId.toLowerCase()===Be.toLowerCase());h(qe||null)},readOnly:!0}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{le(G),oe(!0)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("label",{className:"form-label",children:"Quotation Category"})}),a.jsx("div",{className:"col-xl-5",children:a.jsxs("select",{className:"form-select form-control-sm",value:m?.value||"",onChange:Xe=>p(r.find(Be=>Be.value===Xe.target.value)||null),children:[a.jsx("option",{value:"",children:"Select"}),r.map((Xe,Be)=>a.jsx("option",{value:Xe.value,children:Xe.label},Be))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Vendor",value:b,onChange:Xe=>{const Be=Xe.target.value;y(Be);const qe=s.find(ft=>ft.name.toLowerCase()===Be.toLowerCase());ye(qe||null)}}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{V(!0),ue(b)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Reference"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Quotation Reference",value:c,onChange:Xe=>d(Xe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-lg-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select form-select-sm ",value:T,onChange:Xe=>A(Xe.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(Ne)&&Ne.map((Xe,Be)=>a.jsx("option",{value:Xe.name||Xe._id||Xe,children:Xe.name||Xe.locationName||Xe},Be))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"text",className:"form-control",value:L,onChange:Xe=>P(Xe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Date"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:Xe=>Z(Xe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Additional Notes"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:C,onChange:Xe=>w(Xe.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:ve,children:[a.jsxs("div",{className:"border-bottom mb-3 pb-3",children:[a.jsx("h6",{className:"mb-3",children:"Items & Details"}),a.jsxs("div",{className:"table-responsive",children:[a.jsxs("table",{className:"table-bordered table-sm  mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:D.map((Xe,Be)=>a.jsxs("tr",{children:[a.jsx("td",{children:Be+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:Xe.materialId}),a.jsx("button",{type:"button",className:"btn btn-link btn-sm btn-outline-info",onClick:()=>xt(Be),children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Xe.description,onChange:qe=>ot(Be,"description",qe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:Xe.qty,onChange:qe=>ot(Be,"qty",qe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Xe.baseUnit,onChange:qe=>ot(Be,"baseUnit",qe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Xe.orderUnit,onChange:qe=>ot(Be,"orderUnit",qe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:Xe.materialGroup,onChange:qe=>ot(Be,"materialGroup",qe.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:Xe.deliveryDate,onChange:qe=>ot(Be,"deliveryDate",qe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:Xe.price,onChange:qe=>{qe.target.value=qe.target.value.replace(/[^0-9.]/g,""),ot(Be,"price",qe.target.value)}})})]},Be))})]}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsxs("button",{type:"button",onClick:Le,className:"btn btn-link",children:[a.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})]}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Quotation"})})]})}),a.jsx("div",{className:"col-xl-2 ms-auto  bg-light p-3 rounded",children:a.jsxs("h6",{className:"mb-0",children:["Total Price: ",a.jsxs("span",{className:"text-primary",children:["₹",U.toFixed(2)]})]})})]})})})]})]}),z&&a.jsx(Ye,{}),Y&&a.jsx(Nt,{}),M&&a.jsx(Je,{}),dt&&a.jsx(De,{})]})]})})}function Ua(e){"@babel/helpers - typeof";return Ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ua(e)}function VSe(e,t){if(Ua(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ua(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QH(e){var t=VSe(e,"string");return Ua(t)=="symbol"?t:t+""}function Pb(e,t,r){return(t=QH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z6(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Z6(Object(r),!0).forEach(function(n){Pb(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z6(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qSe(e){if(Array.isArray(e))return e}function zSe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function D5(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function JH(e,t){if(e){if(typeof e=="string")return D5(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?D5(e,t):void 0}}function HSe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yh(e,t){return qSe(e)||zSe(e,t)||JH(e,t)||HSe()}function bf(e,t){if(e==null)return{};var r,n,s=RSe(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}var WSe=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function GSe(e){var t=e.defaultInputValue,r=t===void 0?"":t,n=e.defaultMenuIsOpen,s=n===void 0?!1:n,i=e.defaultValue,o=i===void 0?null:i,l=e.inputValue,c=e.menuIsOpen,d=e.onChange,u=e.onInputChange,h=e.onMenuClose,m=e.onMenuOpen,p=e.value,v=bf(e,WSe),g=N.useState(l!==void 0?l:r),b=Yh(g,2),y=b[0],C=b[1],w=N.useState(c!==void 0?c:s),k=Yh(w,2),S=k[0],D=k[1],E=N.useState(p!==void 0?p:o),T=Yh(E,2),A=T[0],L=T[1],P=N.useCallback(function(U,J){typeof d=="function"&&d(U,J),L(U)},[d]),O=N.useCallback(function(U,J){var Y;typeof u=="function"&&(Y=u(U,J)),C(Y!==void 0?Y:U)},[u]),Z=N.useCallback(function(){typeof m=="function"&&m(),D(!0)},[m]),z=N.useCallback(function(){typeof h=="function"&&h(),D(!1)},[h]),K=l!==void 0?l:y,B=c!==void 0?c:S,Q=p!==void 0?p:A;return Kr(Kr({},v),{},{inputValue:K,menuIsOpen:B,onChange:P,onInputChange:O,onMenuClose:z,onMenuOpen:Z,value:Q})}function YSe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QH(n.key),n)}}function KSe(e,t,r){return t&&e8(e.prototype,t),r&&e8(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function XSe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E5(e,t)}function Bw(e){return Bw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bw(e)}function ZH(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ZH=function(){return!!e})()}function QSe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JSe(e,t){if(t&&(Ua(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return QSe(e)}function ZSe(e){var t=ZH();return function(){var r,n=Bw(e);if(t){var s=Bw(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return JSe(this,r)}}function eCe(e){if(Array.isArray(e))return D5(e)}function tCe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rCe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e4(e){return eCe(e)||tCe(e)||JH(e)||rCe()}function aCe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function nCe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var sCe=function(){function e(r){var n=this;this._insertTag=function(s){var i;n.tags.length===0?n.insertionPoint?i=n.insertionPoint.nextSibling:n.prepend?i=n.container.firstChild:i=n.before:i=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(s,i),n.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(nCe(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=aCe(s);try{i.insertRule(n,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var s;return(s=n.parentNode)==null?void 0:s.removeChild(n)}),this.tags=[],this.ctr=0},e}(),fo="-ms-",Uw="-moz-",tn="-webkit-",eW="comm",t4="rule",r4="decl",iCe="@import",tW="@keyframes",oCe="@layer",lCe=Math.abs,CS=String.fromCharCode,cCe=Object.assign;function dCe(e,t){return Yi(e,0)^45?(((t<<2^Yi(e,0))<<2^Yi(e,1))<<2^Yi(e,2))<<2^Yi(e,3):0}function rW(e){return e.trim()}function uCe(e,t){return(e=t.exec(e))?e[0]:e}function rn(e,t,r){return e.replace(t,r)}function A5(e,t){return e.indexOf(t)}function Yi(e,t){return e.charCodeAt(t)|0}function wy(e,t,r){return e.slice(t,r)}function Su(e){return e.length}function a4(e){return e.length}function Wj(e,t){return t.push(e),e}function hCe(e,t){return e.map(t).join("")}var kS=1,P0=1,aW=0,pl=0,ei=0,cg="";function _S(e,t,r,n,s,i,o){return{value:e,root:t,parent:r,type:n,props:s,children:i,line:kS,column:P0,length:o,return:""}}function mb(e,t){return cCe(_S("",null,null,"",null,null,0),e,{length:-e.length},t)}function fCe(){return ei}function mCe(){return ei=pl>0?Yi(cg,--pl):0,P0--,ei===10&&(P0=1,kS--),ei}function ec(){return ei=pl<aW?Yi(cg,pl++):0,P0++,ei===10&&(P0=1,kS++),ei}function Lu(){return Yi(cg,pl)}function _N(){return pl}function l1(e,t){return wy(cg,e,t)}function Sy(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function nW(e){return kS=P0=1,aW=Su(cg=e),pl=0,[]}function sW(e){return cg="",e}function EN(e){return rW(l1(pl-1,T5(e===91?e+2:e===40?e+1:e)))}function pCe(e){for(;(ei=Lu())&&ei<33;)ec();return Sy(e)>2||Sy(ei)>3?"":" "}function xCe(e,t){for(;--t&&ec()&&!(ei<48||ei>102||ei>57&&ei<65||ei>70&&ei<97););return l1(e,_N()+(t<6&&Lu()==32&&ec()==32))}function T5(e){for(;ec();)switch(ei){case e:return pl;case 34:case 39:e!==34&&e!==39&&T5(ei);break;case 40:e===41&&T5(e);break;case 92:ec();break}return pl}function vCe(e,t){for(;ec()&&e+ei!==57;)if(e+ei===84&&Lu()===47)break;return"/*"+l1(t,pl-1)+"*"+CS(e===47?e:ec())}function gCe(e){for(;!Sy(Lu());)ec();return l1(e,pl)}function bCe(e){return sW(DN("",null,null,null,[""],e=nW(e),0,[0],e))}function DN(e,t,r,n,s,i,o,l,c){for(var d=0,u=0,h=o,m=0,p=0,v=0,g=1,b=1,y=1,C=0,w="",k=s,S=i,D=n,E=w;b;)switch(v=C,C=ec()){case 40:if(v!=108&&Yi(E,h-1)==58){A5(E+=rn(EN(C),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=EN(C);break;case 9:case 10:case 13:case 32:E+=pCe(v);break;case 92:E+=xCe(_N()-1,7);continue;case 47:switch(Lu()){case 42:case 47:Wj(yCe(vCe(ec(),_N()),t,r),c);break;default:E+="/"}break;case 123*g:l[d++]=Su(E)*y;case 125*g:case 59:case 0:switch(C){case 0:case 125:b=0;case 59+u:y==-1&&(E=rn(E,/\f/g,"")),p>0&&Su(E)-h&&Wj(p>32?r8(E+";",n,r,h-1):r8(rn(E," ","")+";",n,r,h-2),c);break;case 59:E+=";";default:if(Wj(D=t8(E,t,r,d,u,s,l,w,k=[],S=[],h),i),C===123)if(u===0)DN(E,t,D,D,k,i,h,l,S);else switch(m===99&&Yi(E,3)===110?100:m){case 100:case 108:case 109:case 115:DN(e,D,D,n&&Wj(t8(e,D,D,0,0,s,l,w,s,k=[],h),S),s,S,h,l,n?k:S);break;default:DN(E,D,D,D,[""],S,0,l,S)}}d=u=p=0,g=y=1,w=E="",h=o;break;case 58:h=1+Su(E),p=v;default:if(g<1){if(C==123)--g;else if(C==125&&g++==0&&mCe()==125)continue}switch(E+=CS(C),C*g){case 38:y=u>0?1:(E+="\f",-1);break;case 44:l[d++]=(Su(E)-1)*y,y=1;break;case 64:Lu()===45&&(E+=EN(ec())),m=Lu(),u=h=Su(w=E+=gCe(_N())),C++;break;case 45:v===45&&Su(E)==2&&(g=0)}}return i}function t8(e,t,r,n,s,i,o,l,c,d,u){for(var h=s-1,m=s===0?i:[""],p=a4(m),v=0,g=0,b=0;v<n;++v)for(var y=0,C=wy(e,h+1,h=lCe(g=o[v])),w=e;y<p;++y)(w=rW(g>0?m[y]+" "+C:rn(C,/&\f/g,m[y])))&&(c[b++]=w);return _S(e,t,r,s===0?t4:l,c,d,u)}function yCe(e,t,r){return _S(e,t,r,eW,CS(fCe()),wy(e,2,-2),0)}function r8(e,t,r,n){return _S(e,t,r,r4,wy(e,0,n),wy(e,n+1,-1),n)}function l0(e,t){for(var r="",n=a4(e),s=0;s<n;s++)r+=t(e[s],s,e,t)||"";return r}function jCe(e,t,r,n){switch(e.type){case oCe:if(e.children.length)break;case iCe:case r4:return e.return=e.return||e.value;case eW:return"";case tW:return e.return=e.value+"{"+l0(e.children,n)+"}";case t4:e.value=e.props.join(",")}return Su(r=l0(e.children,n))?e.return=e.value+"{"+r+"}":""}function NCe(e){var t=a4(e);return function(r,n,s,i){for(var o="",l=0;l<t;l++)o+=e[l](r,n,s,i)||"";return o}}function wCe(e){return function(t){t.root||(t=t.return)&&e(t)}}function SCe(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var CCe=function(t,r,n){for(var s=0,i=0;s=i,i=Lu(),s===38&&i===12&&(r[n]=1),!Sy(i);)ec();return l1(t,pl)},kCe=function(t,r){var n=-1,s=44;do switch(Sy(s)){case 0:s===38&&Lu()===12&&(r[n]=1),t[n]+=CCe(pl-1,r,n);break;case 2:t[n]+=EN(s);break;case 4:if(s===44){t[++n]=Lu()===58?"&\f":"",r[n]=t[n].length;break}default:t[n]+=CS(s)}while(s=ec());return t},_Ce=function(t,r){return sW(kCe(nW(t),r))},a8=new WeakMap,ECe=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,n=t.parent,s=t.column===n.column&&t.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!a8.get(n))&&!s){a8.set(t,!0);for(var i=[],o=_Ce(r,i),l=n.props,c=0,d=0;c<o.length;c++)for(var u=0;u<l.length;u++,d++)t.props[d]=i[c]?o[c].replace(/&\f/g,l[u]):l[u]+" "+o[c]}}},DCe=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function iW(e,t){switch(dCe(e,t)){case 5103:return tn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return tn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return tn+e+Uw+e+fo+e+e;case 6828:case 4268:return tn+e+fo+e+e;case 6165:return tn+e+fo+"flex-"+e+e;case 5187:return tn+e+rn(e,/(\w+).+(:[^]+)/,tn+"box-$1$2"+fo+"flex-$1$2")+e;case 5443:return tn+e+fo+"flex-item-"+rn(e,/flex-|-self/,"")+e;case 4675:return tn+e+fo+"flex-line-pack"+rn(e,/align-content|flex-|-self/,"")+e;case 5548:return tn+e+fo+rn(e,"shrink","negative")+e;case 5292:return tn+e+fo+rn(e,"basis","preferred-size")+e;case 6060:return tn+"box-"+rn(e,"-grow","")+tn+e+fo+rn(e,"grow","positive")+e;case 4554:return tn+rn(e,/([^-])(transform)/g,"$1"+tn+"$2")+e;case 6187:return rn(rn(rn(e,/(zoom-|grab)/,tn+"$1"),/(image-set)/,tn+"$1"),e,"")+e;case 5495:case 3959:return rn(e,/(image-set\([^]*)/,tn+"$1$`$1");case 4968:return rn(rn(e,/(.+:)(flex-)?(.*)/,tn+"box-pack:$3"+fo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+tn+e+e;case 4095:case 3583:case 4068:case 2532:return rn(e,/(.+)-inline(.+)/,tn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Su(e)-1-t>6)switch(Yi(e,t+1)){case 109:if(Yi(e,t+4)!==45)break;case 102:return rn(e,/(.+:)(.+)-([^]+)/,"$1"+tn+"$2-$3$1"+Uw+(Yi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~A5(e,"stretch")?iW(rn(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Yi(e,t+1)!==115)break;case 6444:switch(Yi(e,Su(e)-3-(~A5(e,"!important")&&10))){case 107:return rn(e,":",":"+tn)+e;case 101:return rn(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+tn+(Yi(e,14)===45?"inline-":"")+"box$3$1"+tn+"$2$3$1"+fo+"$2box$3")+e}break;case 5936:switch(Yi(e,t+11)){case 114:return tn+e+fo+rn(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return tn+e+fo+rn(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return tn+e+fo+rn(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return tn+e+fo+e+e}return e}var ACe=function(t,r,n,s){if(t.length>-1&&!t.return)switch(t.type){case r4:t.return=iW(t.value,t.length);break;case tW:return l0([mb(t,{value:rn(t.value,"@","@"+tn)})],s);case t4:if(t.length)return hCe(t.props,function(i){switch(uCe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return l0([mb(t,{props:[rn(i,/:(read-\w+)/,":"+Uw+"$1")]})],s);case"::placeholder":return l0([mb(t,{props:[rn(i,/:(plac\w+)/,":"+tn+"input-$1")]}),mb(t,{props:[rn(i,/:(plac\w+)/,":"+Uw+"$1")]}),mb(t,{props:[rn(i,/:(plac\w+)/,fo+"input-$1")]})],s)}return""})}},TCe=[ACe],ICe=function(t){var r=t.key;if(r==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(g){var b=g.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var s=t.stylisPlugins||TCe,i={},o,l=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(g){for(var b=g.getAttribute("data-emotion").split(" "),y=1;y<b.length;y++)i[b[y]]=!0;l.push(g)});var c,d=[ECe,DCe];{var u,h=[jCe,wCe(function(g){u.insert(g)})],m=NCe(d.concat(s,h)),p=function(b){return l0(bCe(b),m)};c=function(b,y,C,w){u=C,p(b?b+"{"+y.styles+"}":y.styles),w&&(v.inserted[y.name]=!0)}}var v={key:r,sheet:new sCe({key:r,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:c};return v.sheet.hydrate(l),v},cE={exports:{}},cn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n8;function PCe(){if(n8)return cn;n8=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,n=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,o=e?Symbol.for("react.provider"):60109,l=e?Symbol.for("react.context"):60110,c=e?Symbol.for("react.async_mode"):60111,d=e?Symbol.for("react.concurrent_mode"):60111,u=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,m=e?Symbol.for("react.suspense_list"):60120,p=e?Symbol.for("react.memo"):60115,v=e?Symbol.for("react.lazy"):60116,g=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,y=e?Symbol.for("react.responder"):60118,C=e?Symbol.for("react.scope"):60119;function w(S){if(typeof S=="object"&&S!==null){var D=S.$$typeof;switch(D){case t:switch(S=S.type,S){case c:case d:case n:case i:case s:case h:return S;default:switch(S=S&&S.$$typeof,S){case l:case u:case v:case p:case o:return S;default:return D}}case r:return D}}}function k(S){return w(S)===d}return cn.AsyncMode=c,cn.ConcurrentMode=d,cn.ContextConsumer=l,cn.ContextProvider=o,cn.Element=t,cn.ForwardRef=u,cn.Fragment=n,cn.Lazy=v,cn.Memo=p,cn.Portal=r,cn.Profiler=i,cn.StrictMode=s,cn.Suspense=h,cn.isAsyncMode=function(S){return k(S)||w(S)===c},cn.isConcurrentMode=k,cn.isContextConsumer=function(S){return w(S)===l},cn.isContextProvider=function(S){return w(S)===o},cn.isElement=function(S){return typeof S=="object"&&S!==null&&S.$$typeof===t},cn.isForwardRef=function(S){return w(S)===u},cn.isFragment=function(S){return w(S)===n},cn.isLazy=function(S){return w(S)===v},cn.isMemo=function(S){return w(S)===p},cn.isPortal=function(S){return w(S)===r},cn.isProfiler=function(S){return w(S)===i},cn.isStrictMode=function(S){return w(S)===s},cn.isSuspense=function(S){return w(S)===h},cn.isValidElementType=function(S){return typeof S=="string"||typeof S=="function"||S===n||S===d||S===i||S===s||S===h||S===m||typeof S=="object"&&S!==null&&(S.$$typeof===v||S.$$typeof===p||S.$$typeof===o||S.$$typeof===l||S.$$typeof===u||S.$$typeof===b||S.$$typeof===y||S.$$typeof===C||S.$$typeof===g)},cn.typeOf=w,cn}var s8;function OCe(){return s8||(s8=1,cE.exports=PCe()),cE.exports}var dE,i8;function MCe(){if(i8)return dE;i8=1;var e=OCe(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},r={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},i={};i[e.ForwardRef]=n,i[e.Memo]=s;function o(v){return e.isMemo(v)?s:i[v.$$typeof]||t}var l=Object.defineProperty,c=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,u=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,m=Object.prototype;function p(v,g,b){if(typeof g!="string"){if(m){var y=h(g);y&&y!==m&&p(v,y,b)}var C=c(g);d&&(C=C.concat(d(g)));for(var w=o(v),k=o(g),S=0;S<C.length;++S){var D=C[S];if(!r[D]&&!(b&&b[D])&&!(k&&k[D])&&!(w&&w[D])){var E=u(g,D);try{l(v,D,E)}catch{}}}}return v}return dE=p,dE}MCe();var RCe=!0;function FCe(e,t,r){var n="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(n+=s+" ")}),n}var oW=function(t,r,n){var s=t.key+"-"+r.name;(n===!1||RCe===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles)},LCe=function(t,r,n){oW(t,r,n);var s=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var i=r;do t.insert(r===i?"."+s:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function BCe(e){for(var t=0,r,n=0,s=e.length;s>=4;++n,s-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var UCe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},$Ce=/[A-Z]|^ms/g,VCe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,lW=function(t){return t.charCodeAt(1)===45},o8=function(t){return t!=null&&typeof t!="boolean"},uE=SCe(function(e){return lW(e)?e:e.replace($Ce,"-$&").toLowerCase()}),l8=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(VCe,function(n,s,i){return Cu={name:s,styles:i,next:Cu},s})}return UCe[t]!==1&&!lW(t)&&typeof r=="number"&&r!==0?r+"px":r};function Cy(e,t,r){if(r==null)return"";var n=r;if(n.__emotion_styles!==void 0)return n;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return Cu={name:s.name,styles:s.styles,next:Cu},s.name;var i=r;if(i.styles!==void 0){var o=i.next;if(o!==void 0)for(;o!==void 0;)Cu={name:o.name,styles:o.styles,next:Cu},o=o.next;var l=i.styles+";";return l}return qCe(e,t,r)}case"function":{if(e!==void 0){var c=Cu,d=r(e);return Cu=c,Cy(e,t,d)}break}}var u=r;return u}function qCe(e,t,r){var n="";if(Array.isArray(r))for(var s=0;s<r.length;s++)n+=Cy(e,t,r[s])+";";else for(var i in r){var o=r[i];if(typeof o!="object"){var l=o;o8(l)&&(n+=uE(i)+":"+l8(i,l)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&t==null)for(var c=0;c<o.length;c++)o8(o[c])&&(n+=uE(i)+":"+l8(i,o[c])+";");else{var d=Cy(e,t,o);switch(i){case"animation":case"animationName":{n+=uE(i)+":"+d+";";break}default:n+=i+"{"+d+"}"}}}return n}var c8=/label:\s*([^\s;{]+)\s*(;|$)/g,Cu;function cW(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var n=!0,s="";Cu=void 0;var i=e[0];if(i==null||i.raw===void 0)n=!1,s+=Cy(r,t,i);else{var o=i;s+=o[0]}for(var l=1;l<e.length;l++)if(s+=Cy(r,t,e[l]),n){var c=i;s+=c[l]}c8.lastIndex=0;for(var d="",u;(u=c8.exec(s))!==null;)d+="-"+u[1];var h=BCe(s)+d;return{name:h,styles:s,next:Cu}}var zCe=function(t){return t()},HCe=VN.useInsertionEffect?VN.useInsertionEffect:!1,WCe=HCe||zCe,dW=N.createContext(typeof HTMLElement<"u"?ICe({key:"css"}):null);dW.Provider;var GCe=function(t){return N.forwardRef(function(r,n){var s=N.useContext(dW);return t(r,s,n)})},YCe=N.createContext({}),n4={}.hasOwnProperty,I5="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",KCe=function(t,r){var n={};for(var s in r)n4.call(r,s)&&(n[s]=r[s]);return n[I5]=t,n},XCe=function(t){var r=t.cache,n=t.serialized,s=t.isStringTag;return oW(r,n,s),WCe(function(){return LCe(r,n,s)}),null},QCe=GCe(function(e,t,r){var n=e.css;typeof n=="string"&&t.registered[n]!==void 0&&(n=t.registered[n]);var s=e[I5],i=[n],o="";typeof e.className=="string"?o=FCe(t.registered,i,e.className):e.className!=null&&(o=e.className+" ");var l=cW(i,void 0,N.useContext(YCe));o+=t.key+"-"+l.name;var c={};for(var d in e)n4.call(e,d)&&d!=="css"&&d!==I5&&(c[d]=e[d]);return c.className=o,r&&(c.ref=r),N.createElement(N.Fragment,null,N.createElement(XCe,{cache:t,serialized:l,isStringTag:typeof s=="string"}),N.createElement(s,c))}),JCe=QCe,Wr=function(t,r){var n=arguments;if(r==null||!n4.call(r,"css"))return N.createElement.apply(void 0,n);var s=n.length,i=new Array(s);i[0]=JCe,i[1]=KCe(t,r);for(var o=2;o<s;o++)i[o]=n[o];return N.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Wr||(Wr={}));function s4(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return cW(t)}function ZCe(){var e=s4.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}function eke(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}const O0=Math.min,hx=Math.max,$w=Math.round,Gj=Math.floor,Bu=e=>({x:e,y:e}),tke={left:"right",right:"left",bottom:"top",top:"bottom"},rke={start:"end",end:"start"};function ake(e,t,r){return hx(e,O0(t,r))}function ES(e,t){return typeof e=="function"?e(t):e}function M0(e){return e.split("-")[0]}function c1(e){return e.split("-")[1]}function nke(e){return e==="x"?"y":"x"}function i4(e){return e==="y"?"height":"width"}const ske=new Set(["top","bottom"]);function Jp(e){return ske.has(M0(e))?"y":"x"}function o4(e){return nke(Jp(e))}function ike(e,t,r){r===void 0&&(r=!1);const n=c1(e),s=o4(e),i=i4(s);let o=s==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Vw(o)),[o,Vw(o)]}function oke(e){const t=Vw(e);return[P5(e),t,P5(t)]}function P5(e){return e.replace(/start|end/g,t=>rke[t])}const d8=["left","right"],u8=["right","left"],lke=["top","bottom"],cke=["bottom","top"];function dke(e,t,r){switch(e){case"top":case"bottom":return r?t?u8:d8:t?d8:u8;case"left":case"right":return t?lke:cke;default:return[]}}function uke(e,t,r,n){const s=c1(e);let i=dke(M0(e),r==="start",n);return s&&(i=i.map(o=>o+"-"+s),t&&(i=i.concat(i.map(P5)))),i}function Vw(e){return e.replace(/left|right|bottom|top/g,t=>tke[t])}function hke(e){return{top:0,right:0,bottom:0,left:0,...e}}function uW(e){return typeof e!="number"?hke(e):{top:e,right:e,bottom:e,left:e}}function qw(e){const{x:t,y:r,width:n,height:s}=e;return{width:n,height:s,top:r,left:t,right:t+n,bottom:r+s,x:t,y:r}}function h8(e,t,r){let{reference:n,floating:s}=e;const i=Jp(t),o=o4(t),l=i4(o),c=M0(t),d=i==="y",u=n.x+n.width/2-s.width/2,h=n.y+n.height/2-s.height/2,m=n[l]/2-s[l]/2;let p;switch(c){case"top":p={x:u,y:n.y-s.height};break;case"bottom":p={x:u,y:n.y+n.height};break;case"right":p={x:n.x+n.width,y:h};break;case"left":p={x:n.x-s.width,y:h};break;default:p={x:n.x,y:n.y}}switch(c1(t)){case"start":p[o]-=m*(r&&d?-1:1);break;case"end":p[o]+=m*(r&&d?-1:1);break}return p}const fke=async(e,t,r)=>{const{placement:n="bottom",strategy:s="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let d=await o.getElementRects({reference:e,floating:t,strategy:s}),{x:u,y:h}=h8(d,n,c),m=n,p={},v=0;for(let g=0;g<l.length;g++){const{name:b,fn:y}=l[g],{x:C,y:w,data:k,reset:S}=await y({x:u,y:h,initialPlacement:n,placement:m,strategy:s,middlewareData:p,rects:d,platform:o,elements:{reference:e,floating:t}});u=C??u,h=w??h,p={...p,[b]:{...p[b],...k}},S&&v<=50&&(v++,typeof S=="object"&&(S.placement&&(m=S.placement),S.rects&&(d=S.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:u,y:h}=h8(d,m,c)),g=-1)}return{x:u,y:h,placement:m,strategy:s,middlewareData:p}};async function mke(e,t){var r;t===void 0&&(t={});const{x:n,y:s,platform:i,rects:o,elements:l,strategy:c}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:m=!1,padding:p=0}=ES(t,e),v=uW(p),b=l[m?h==="floating"?"reference":"floating":h],y=qw(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(b)))==null||r?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:u,strategy:c})),C=h==="floating"?{x:n,y:s,width:o.floating.width,height:o.floating.height}:o.reference,w=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),k=await(i.isElement==null?void 0:i.isElement(w))?await(i.getScale==null?void 0:i.getScale(w))||{x:1,y:1}:{x:1,y:1},S=qw(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:C,offsetParent:w,strategy:c}):C);return{top:(y.top-S.top+v.top)/k.y,bottom:(S.bottom-y.bottom+v.bottom)/k.y,left:(y.left-S.left+v.left)/k.x,right:(S.right-y.right+v.right)/k.x}}const pke=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=t,{element:d,padding:u=0}=ES(e,t)||{};if(d==null)return{};const h=uW(u),m={x:r,y:n},p=o4(s),v=i4(p),g=await o.getDimensions(d),b=p==="y",y=b?"top":"left",C=b?"bottom":"right",w=b?"clientHeight":"clientWidth",k=i.reference[v]+i.reference[p]-m[p]-i.floating[v],S=m[p]-i.reference[p],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let E=D?D[w]:0;(!E||!await(o.isElement==null?void 0:o.isElement(D)))&&(E=l.floating[w]||i.floating[v]);const T=k/2-S/2,A=E/2-g[v]/2-1,L=O0(h[y],A),P=O0(h[C],A),O=L,Z=E-g[v]-P,z=E/2-g[v]/2+T,K=ake(O,z,Z),B=!c.arrow&&c1(s)!=null&&z!==K&&i.reference[v]/2-(z<O?L:P)-g[v]/2<0,Q=B?z<O?z-O:z-Z:0;return{[p]:m[p]+Q,data:{[p]:K,centerOffset:z-K-Q,...B&&{alignmentOffset:Q}},reset:B}}}),xke=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=t,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...b}=ES(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const y=M0(s),C=Jp(l),w=M0(l)===l,k=await(c.isRTL==null?void 0:c.isRTL(d.floating)),S=m||(w||!g?[Vw(l)]:oke(l)),D=v!=="none";!m&&D&&S.push(...uke(l,g,v,k));const E=[l,...S],T=await mke(t,b),A=[];let L=((n=i.flip)==null?void 0:n.overflows)||[];if(u&&A.push(T[y]),h){const z=ike(s,o,k);A.push(T[z[0]],T[z[1]])}if(L=[...L,{placement:s,overflows:A}],!A.every(z=>z<=0)){var P,O;const z=(((P=i.flip)==null?void 0:P.index)||0)+1,K=E[z];if(K&&(!(h==="alignment"?C!==Jp(K):!1)||L.every(U=>Jp(U.placement)===C?U.overflows[0]>0:!0)))return{data:{index:z,overflows:L},reset:{placement:K}};let B=(O=L.filter(Q=>Q.overflows[0]<=0).sort((Q,U)=>Q.overflows[1]-U.overflows[1])[0])==null?void 0:O.placement;if(!B)switch(p){case"bestFit":{var Z;const Q=(Z=L.filter(U=>{if(D){const J=Jp(U.placement);return J===C||J==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(J=>J>0).reduce((J,Y)=>J+Y,0)]).sort((U,J)=>U[1]-J[1])[0])==null?void 0:Z[0];Q&&(B=Q);break}case"initialPlacement":B=l;break}if(s!==B)return{reset:{placement:B}}}return{}}}},vke=new Set(["left","top"]);async function gke(e,t){const{placement:r,platform:n,elements:s}=e,i=await(n.isRTL==null?void 0:n.isRTL(s.floating)),o=M0(r),l=c1(r),c=Jp(r)==="y",d=vke.has(o)?-1:1,u=i&&c?-1:1,h=ES(t,e);let{mainAxis:m,crossAxis:p,alignmentAxis:v}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof v=="number"&&(p=l==="end"?v*-1:v),c?{x:p*u,y:m*d}:{x:m*d,y:p*u}}const bke=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:s,y:i,placement:o,middlewareData:l}=t,c=await gke(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}};function DS(){return typeof window<"u"}function dg(e){return hW(e)?(e.nodeName||"").toLowerCase():"#document"}function tc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function eh(e){var t;return(t=(hW(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function hW(e){return DS()?e instanceof Node||e instanceof tc(e).Node:!1}function Vo(e){return DS()?e instanceof Element||e instanceof tc(e).Element:!1}function Wu(e){return DS()?e instanceof HTMLElement||e instanceof tc(e).HTMLElement:!1}function f8(e){return!DS()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof tc(e).ShadowRoot}const yke=new Set(["inline","contents"]);function d1(e){const{overflow:t,overflowX:r,overflowY:n,display:s}=Yc(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!yke.has(s)}const jke=new Set(["table","td","th"]);function Nke(e){return jke.has(dg(e))}const wke=[":popover-open",":modal"];function AS(e){return wke.some(t=>{try{return e.matches(t)}catch{return!1}})}const Ske=["transform","translate","scale","rotate","perspective"],Cke=["transform","translate","scale","rotate","perspective","filter"],kke=["paint","layout","strict","content"];function l4(e){const t=c4(),r=Vo(e)?Yc(e):e;return Ske.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||Cke.some(n=>(r.willChange||"").includes(n))||kke.some(n=>(r.contain||"").includes(n))}function _ke(e){let t=Vm(e);for(;Wu(t)&&!R0(t);){if(l4(t))return t;if(AS(t))return null;t=Vm(t)}return null}function c4(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Eke=new Set(["html","body","#document"]);function R0(e){return Eke.has(dg(e))}function Yc(e){return tc(e).getComputedStyle(e)}function TS(e){return Vo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Vm(e){if(dg(e)==="html")return e;const t=e.assignedSlot||e.parentNode||f8(e)&&e.host||eh(e);return f8(t)?t.host:t}function fW(e){const t=Vm(e);return R0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Wu(t)&&d1(t)?t:fW(t)}function ky(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const s=fW(e),i=s===((n=e.ownerDocument)==null?void 0:n.body),o=tc(s);if(i){const l=O5(o);return t.concat(o,o.visualViewport||[],d1(s)?s:[],l&&r?ky(l):[])}return t.concat(s,ky(s,[],r))}function O5(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function mW(e){const t=Yc(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const s=Wu(e),i=s?e.offsetWidth:r,o=s?e.offsetHeight:n,l=$w(r)!==i||$w(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function d4(e){return Vo(e)?e:e.contextElement}function c0(e){const t=d4(e);if(!Wu(t))return Bu(1);const r=t.getBoundingClientRect(),{width:n,height:s,$:i}=mW(t);let o=(i?$w(r.width):r.width)/n,l=(i?$w(r.height):r.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const Dke=Bu(0);function pW(e){const t=tc(e);return!c4()||!t.visualViewport?Dke:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ake(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==tc(e)?!1:t}function Ex(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const s=e.getBoundingClientRect(),i=d4(e);let o=Bu(1);t&&(n?Vo(n)&&(o=c0(n)):o=c0(e));const l=Ake(i,r,n)?pW(i):Bu(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,u=s.width/o.x,h=s.height/o.y;if(i){const m=tc(i),p=n&&Vo(n)?tc(n):n;let v=m,g=O5(v);for(;g&&n&&p!==v;){const b=c0(g),y=g.getBoundingClientRect(),C=Yc(g),w=y.left+(g.clientLeft+parseFloat(C.paddingLeft))*b.x,k=y.top+(g.clientTop+parseFloat(C.paddingTop))*b.y;c*=b.x,d*=b.y,u*=b.x,h*=b.y,c+=w,d+=k,v=tc(g),g=O5(v)}}return qw({width:u,height:h,x:c,y:d})}function u4(e,t){const r=TS(e).scrollLeft;return t?t.left+r:Ex(eh(e)).left+r}function xW(e,t,r){r===void 0&&(r=!1);const n=e.getBoundingClientRect(),s=n.left+t.scrollLeft-(r?0:u4(e,n)),i=n.top+t.scrollTop;return{x:s,y:i}}function Tke(e){let{elements:t,rect:r,offsetParent:n,strategy:s}=e;const i=s==="fixed",o=eh(n),l=t?AS(t.floating):!1;if(n===o||l&&i)return r;let c={scrollLeft:0,scrollTop:0},d=Bu(1);const u=Bu(0),h=Wu(n);if((h||!h&&!i)&&((dg(n)!=="body"||d1(o))&&(c=TS(n)),Wu(n))){const p=Ex(n);d=c0(n),u.x=p.x+n.clientLeft,u.y=p.y+n.clientTop}const m=o&&!h&&!i?xW(o,c,!0):Bu(0);return{width:r.width*d.x,height:r.height*d.y,x:r.x*d.x-c.scrollLeft*d.x+u.x+m.x,y:r.y*d.y-c.scrollTop*d.y+u.y+m.y}}function Ike(e){return Array.from(e.getClientRects())}function Pke(e){const t=eh(e),r=TS(e),n=e.ownerDocument.body,s=hx(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=hx(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+u4(e);const l=-r.scrollTop;return Yc(n).direction==="rtl"&&(o+=hx(t.clientWidth,n.clientWidth)-s),{width:s,height:i,x:o,y:l}}function Oke(e,t){const r=tc(e),n=eh(e),s=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const d=c4();(!d||d&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const Mke=new Set(["absolute","fixed"]);function Rke(e,t){const r=Ex(e,!0,t==="fixed"),n=r.top+e.clientTop,s=r.left+e.clientLeft,i=Wu(e)?c0(e):Bu(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,c=s*i.x,d=n*i.y;return{width:o,height:l,x:c,y:d}}function m8(e,t,r){let n;if(t==="viewport")n=Oke(e,r);else if(t==="document")n=Pke(eh(e));else if(Vo(t))n=Rke(t,r);else{const s=pW(e);n={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return qw(n)}function vW(e,t){const r=Vm(e);return r===t||!Vo(r)||R0(r)?!1:Yc(r).position==="fixed"||vW(r,t)}function Fke(e,t){const r=t.get(e);if(r)return r;let n=ky(e,[],!1).filter(l=>Vo(l)&&dg(l)!=="body"),s=null;const i=Yc(e).position==="fixed";let o=i?Vm(e):e;for(;Vo(o)&&!R0(o);){const l=Yc(o),c=l4(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&Mke.has(s.position)||d1(o)&&!c&&vW(e,o))?n=n.filter(u=>u!==o):s=l,o=Vm(o)}return t.set(e,n),n}function Lke(e){let{element:t,boundary:r,rootBoundary:n,strategy:s}=e;const o=[...r==="clippingAncestors"?AS(t)?[]:Fke(t,this._c):[].concat(r),n],l=o[0],c=o.reduce((d,u)=>{const h=m8(t,u,s);return d.top=hx(h.top,d.top),d.right=O0(h.right,d.right),d.bottom=O0(h.bottom,d.bottom),d.left=hx(h.left,d.left),d},m8(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Bke(e){const{width:t,height:r}=mW(e);return{width:t,height:r}}function Uke(e,t,r){const n=Wu(t),s=eh(t),i=r==="fixed",o=Ex(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const c=Bu(0);function d(){c.x=u4(s)}if(n||!n&&!i)if((dg(t)!=="body"||d1(s))&&(l=TS(t)),n){const p=Ex(t,!0,i,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&d();i&&!n&&s&&d();const u=s&&!n&&!i?xW(s,l):Bu(0),h=o.left+l.scrollLeft-c.x-u.x,m=o.top+l.scrollTop-c.y-u.y;return{x:h,y:m,width:o.width,height:o.height}}function hE(e){return Yc(e).position==="static"}function p8(e,t){if(!Wu(e)||Yc(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return eh(e)===r&&(r=r.ownerDocument.body),r}function gW(e,t){const r=tc(e);if(AS(e))return r;if(!Wu(e)){let s=Vm(e);for(;s&&!R0(s);){if(Vo(s)&&!hE(s))return s;s=Vm(s)}return r}let n=p8(e,t);for(;n&&Nke(n)&&hE(n);)n=p8(n,t);return n&&R0(n)&&hE(n)&&!l4(n)?r:n||_ke(e)||r}const $ke=async function(e){const t=this.getOffsetParent||gW,r=this.getDimensions,n=await r(e.floating);return{reference:Uke(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Vke(e){return Yc(e).direction==="rtl"}const qke={convertOffsetParentRelativeRectToViewportRelativeRect:Tke,getDocumentElement:eh,getClippingRect:Lke,getOffsetParent:gW,getElementRects:$ke,getClientRects:Ike,getDimensions:Bke,getScale:c0,isElement:Vo,isRTL:Vke};function bW(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function zke(e,t){let r=null,n;const s=eh(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=e.getBoundingClientRect(),{left:u,top:h,width:m,height:p}=d;if(l||t(),!m||!p)return;const v=Gj(h),g=Gj(s.clientWidth-(u+m)),b=Gj(s.clientHeight-(h+p)),y=Gj(u),w={rootMargin:-v+"px "+-g+"px "+-b+"px "+-y+"px",threshold:hx(0,O0(1,c))||1};let k=!0;function S(D){const E=D[0].intersectionRatio;if(E!==c){if(!k)return o();E?o(!1,E):n=setTimeout(()=>{o(!1,1e-7)},1e3)}E===1&&!bW(d,e.getBoundingClientRect())&&o(),k=!1}try{r=new IntersectionObserver(S,{...w,root:s.ownerDocument})}catch{r=new IntersectionObserver(S,w)}r.observe(e)}return o(!0),i}function yW(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,d=d4(e),u=s||i?[...d?ky(d):[],...ky(t)]:[];u.forEach(y=>{s&&y.addEventListener("scroll",r,{passive:!0}),i&&y.addEventListener("resize",r)});const h=d&&l?zke(d,r):null;let m=-1,p=null;o&&(p=new ResizeObserver(y=>{let[C]=y;C&&C.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),r()}),d&&!c&&p.observe(d),p.observe(t));let v,g=c?Ex(e):null;c&&b();function b(){const y=Ex(e);g&&!bW(g,y)&&r(),g=y,v=requestAnimationFrame(b)}return r(),()=>{var y;u.forEach(C=>{s&&C.removeEventListener("scroll",r),i&&C.removeEventListener("resize",r)}),h?.(),(y=p)==null||y.disconnect(),p=null,c&&cancelAnimationFrame(v)}}const Hke=bke,Wke=xke,x8=pke,Gke=(e,t,r)=>{const n=new Map,s={platform:qke,...r},i={...s.platform,_c:n};return fke(e,t,{...s,platform:i})};var M5=N.useLayoutEffect,Yke=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],zw=function(){};function Kke(e,t){return t?t[0]==="-"?e+t:e+"__"+t:e}function Xke(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),s=2;s<r;s++)n[s-2]=arguments[s];var i=[].concat(n);if(t&&e)for(var o in t)t.hasOwnProperty(o)&&t[o]&&i.push("".concat(Kke(e,o)));return i.filter(function(l){return l}).map(function(l){return String(l).trim()}).join(" ")}var v8=function(t){return s_e(t)?t.filter(Boolean):Ua(t)==="object"&&t!==null?[t]:[]},jW=function(t){t.className,t.clearValue,t.cx,t.getStyles,t.getClassNames,t.getValue,t.hasValue,t.isMulti,t.isRtl,t.options,t.selectOption,t.selectProps,t.setValue,t.theme;var r=bf(t,Yke);return Kr({},r)},ws=function(t,r,n){var s=t.cx,i=t.getStyles,o=t.getClassNames,l=t.className;return{css:i(r,t),className:s(n??{},o(r,t),l)}};function IS(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function Qke(e){return IS(e)?window.innerHeight:e.clientHeight}function NW(e){return IS(e)?window.pageYOffset:e.scrollTop}function Hw(e,t){if(IS(e)){window.scrollTo(0,t);return}e.scrollTop=t}function Jke(e){var t=getComputedStyle(e),r=t.position==="absolute",n=/(auto|scroll)/;if(t.position==="fixed")return document.documentElement;for(var s=e;s=s.parentElement;)if(t=getComputedStyle(s),!(r&&t.position==="static")&&n.test(t.overflow+t.overflowY+t.overflowX))return s;return document.documentElement}function Zke(e,t,r,n){return r*((e=e/n-1)*e*e+1)+t}function Yj(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:zw,s=NW(e),i=t-s,o=10,l=0;function c(){l+=o;var d=Zke(l,s,i,r);Hw(e,d),l<r?window.requestAnimationFrame(c):n(e)}c()}function g8(e,t){var r=e.getBoundingClientRect(),n=t.getBoundingClientRect(),s=t.offsetHeight/3;n.bottom+s>r.bottom?Hw(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+s,e.scrollHeight)):n.top-s<r.top&&Hw(e,Math.max(t.offsetTop-s,0))}function e_e(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}function b8(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function t_e(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var wW=!1,r_e={get passive(){return wW=!0}},Kj=typeof window<"u"?window:{};Kj.addEventListener&&Kj.removeEventListener&&(Kj.addEventListener("p",zw,r_e),Kj.removeEventListener("p",zw,!1));var a_e=wW;function n_e(e){return e!=null}function s_e(e){return Array.isArray(e)}function Xj(e,t,r){return e?t:r}var i_e=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];var i=Object.entries(t).filter(function(o){var l=Yh(o,1),c=l[0];return!n.includes(c)});return i.reduce(function(o,l){var c=Yh(l,2),d=c[0],u=c[1];return o[d]=u,o},{})},o_e=["children","innerProps"],l_e=["children","innerProps"];function c_e(e){var t=e.maxHeight,r=e.menuEl,n=e.minHeight,s=e.placement,i=e.shouldScroll,o=e.isFixedPosition,l=e.controlHeight,c=Jke(r),d={placement:"bottom",maxHeight:t};if(!r||!r.offsetParent)return d;var u=c.getBoundingClientRect(),h=u.height,m=r.getBoundingClientRect(),p=m.bottom,v=m.height,g=m.top,b=r.offsetParent.getBoundingClientRect(),y=b.top,C=o?window.innerHeight:Qke(c),w=NW(c),k=parseInt(getComputedStyle(r).marginBottom,10),S=parseInt(getComputedStyle(r).marginTop,10),D=y-S,E=C-g,T=D+w,A=h-w-g,L=p-C+w+k,P=w+g-S,O=160;switch(s){case"auto":case"bottom":if(E>=v)return{placement:"bottom",maxHeight:t};if(A>=v&&!o)return i&&Yj(c,L,O),{placement:"bottom",maxHeight:t};if(!o&&A>=n||o&&E>=n){i&&Yj(c,L,O);var Z=o?E-k:A-k;return{placement:"bottom",maxHeight:Z}}if(s==="auto"||o){var z=t,K=o?D:T;return K>=n&&(z=Math.min(K-k-l,t)),{placement:"top",maxHeight:z}}if(s==="bottom")return i&&Hw(c,L),{placement:"bottom",maxHeight:t};break;case"top":if(D>=v)return{placement:"top",maxHeight:t};if(T>=v&&!o)return i&&Yj(c,P,O),{placement:"top",maxHeight:t};if(!o&&T>=n||o&&D>=n){var B=t;return(!o&&T>=n||o&&D>=n)&&(B=o?D-S:T-S),i&&Yj(c,P,O),{placement:"top",maxHeight:B}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(s,'".'))}return d}function d_e(e){var t={bottom:"top",top:"bottom"};return e?t[e]:"bottom"}var SW=function(t){return t==="auto"?"bottom":t},u_e=function(t,r){var n,s=t.placement,i=t.theme,o=i.borderRadius,l=i.spacing,c=i.colors;return Kr((n={label:"menu"},Pb(n,d_e(s),"100%"),Pb(n,"position","absolute"),Pb(n,"width","100%"),Pb(n,"zIndex",1),n),r?{}:{backgroundColor:c.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:l.menuGutter,marginTop:l.menuGutter})},CW=N.createContext(null),h_e=function(t){var r=t.children,n=t.minMenuHeight,s=t.maxMenuHeight,i=t.menuPlacement,o=t.menuPosition,l=t.menuShouldScrollIntoView,c=t.theme,d=N.useContext(CW)||{},u=d.setPortalPlacement,h=N.useRef(null),m=N.useState(s),p=Yh(m,2),v=p[0],g=p[1],b=N.useState(null),y=Yh(b,2),C=y[0],w=y[1],k=c.spacing.controlHeight;return M5(function(){var S=h.current;if(S){var D=o==="fixed",E=l&&!D,T=c_e({maxHeight:s,menuEl:S,minHeight:n,placement:i,shouldScroll:E,isFixedPosition:D,controlHeight:k});g(T.maxHeight),w(T.placement),u?.(T.placement)}},[s,i,o,l,n,u,k]),r({ref:h,placerProps:Kr(Kr({},t),{},{placement:C||SW(i),maxHeight:v})})},f_e=function(t){var r=t.children,n=t.innerRef,s=t.innerProps;return Wr("div",ea({},ws(t,"menu",{menu:!0}),{ref:n},s),r)},m_e=f_e,p_e=function(t,r){var n=t.maxHeight,s=t.theme.spacing.baseUnit;return Kr({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},r?{}:{paddingBottom:s,paddingTop:s})},x_e=function(t){var r=t.children,n=t.innerProps,s=t.innerRef,i=t.isMulti;return Wr("div",ea({},ws(t,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:s},n),r)},kW=function(t,r){var n=t.theme,s=n.spacing.baseUnit,i=n.colors;return Kr({textAlign:"center"},r?{}:{color:i.neutral40,padding:"".concat(s*2,"px ").concat(s*3,"px")})},v_e=kW,g_e=kW,b_e=function(t){var r=t.children,n=r===void 0?"No options":r,s=t.innerProps,i=bf(t,o_e);return Wr("div",ea({},ws(Kr(Kr({},i),{},{children:n,innerProps:s}),"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),s),n)},y_e=function(t){var r=t.children,n=r===void 0?"Loading...":r,s=t.innerProps,i=bf(t,l_e);return Wr("div",ea({},ws(Kr(Kr({},i),{},{children:n,innerProps:s}),"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),s),n)},j_e=function(t){var r=t.rect,n=t.offset,s=t.position;return{left:r.left,position:s,top:n,width:r.width,zIndex:1}},N_e=function(t){var r=t.appendTo,n=t.children,s=t.controlElement,i=t.innerProps,o=t.menuPlacement,l=t.menuPosition,c=N.useRef(null),d=N.useRef(null),u=N.useState(SW(o)),h=Yh(u,2),m=h[0],p=h[1],v=N.useMemo(function(){return{setPortalPlacement:p}},[]),g=N.useState(null),b=Yh(g,2),y=b[0],C=b[1],w=N.useCallback(function(){if(s){var E=e_e(s),T=l==="fixed"?0:window.pageYOffset,A=E[m]+T;(A!==y?.offset||E.left!==y?.rect.left||E.width!==y?.rect.width)&&C({offset:A,rect:E})}},[s,l,m,y?.offset,y?.rect.left,y?.rect.width]);M5(function(){w()},[w]);var k=N.useCallback(function(){typeof d.current=="function"&&(d.current(),d.current=null),s&&c.current&&(d.current=yW(s,c.current,w,{elementResize:"ResizeObserver"in window}))},[s,w]);M5(function(){k()},[k]);var S=N.useCallback(function(E){c.current=E,k()},[k]);if(!r&&l!=="fixed"||!y)return null;var D=Wr("div",ea({ref:S},ws(Kr(Kr({},t),{},{offset:y.offset,position:l,rect:y.rect}),"menuPortal",{"menu-portal":!0}),i),n);return Wr(CW.Provider,{value:v},r?Ly.createPortal(D,r):D)},w_e=function(t){var r=t.isDisabled,n=t.isRtl;return{label:"container",direction:n?"rtl":void 0,pointerEvents:r?"none":void 0,position:"relative"}},S_e=function(t){var r=t.children,n=t.innerProps,s=t.isDisabled,i=t.isRtl;return Wr("div",ea({},ws(t,"container",{"--is-disabled":s,"--is-rtl":i}),n),r)},C_e=function(t,r){var n=t.theme.spacing,s=t.isMulti,i=t.hasValue,o=t.selectProps.controlShouldRenderValue;return Kr({alignItems:"center",display:s&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},r?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(n.baseUnit*2,"px")})},k_e=function(t){var r=t.children,n=t.innerProps,s=t.isMulti,i=t.hasValue;return Wr("div",ea({},ws(t,"valueContainer",{"value-container":!0,"value-container--is-multi":s,"value-container--has-value":i}),n),r)},__e=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},E_e=function(t){var r=t.children,n=t.innerProps;return Wr("div",ea({},ws(t,"indicatorsContainer",{indicators:!0}),n),r)},y8,D_e=["size"],A_e=["innerProps","isRtl","size"],T_e={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},_W=function(t){var r=t.size,n=bf(t,D_e);return Wr("svg",ea({height:r,width:r,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:T_e},n))},h4=function(t){return Wr(_W,ea({size:20},t),Wr("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},EW=function(t){return Wr(_W,ea({size:20},t),Wr("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},DW=function(t,r){var n=t.isFocused,s=t.theme,i=s.spacing.baseUnit,o=s.colors;return Kr({label:"indicatorContainer",display:"flex",transition:"color 150ms"},r?{}:{color:n?o.neutral60:o.neutral20,padding:i*2,":hover":{color:n?o.neutral80:o.neutral40}})},I_e=DW,P_e=function(t){var r=t.children,n=t.innerProps;return Wr("div",ea({},ws(t,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),r||Wr(EW,null))},O_e=DW,M_e=function(t){var r=t.children,n=t.innerProps;return Wr("div",ea({},ws(t,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),r||Wr(h4,null))},R_e=function(t,r){var n=t.isDisabled,s=t.theme,i=s.spacing.baseUnit,o=s.colors;return Kr({label:"indicatorSeparator",alignSelf:"stretch",width:1},r?{}:{backgroundColor:n?o.neutral10:o.neutral20,marginBottom:i*2,marginTop:i*2})},F_e=function(t){var r=t.innerProps;return Wr("span",ea({},r,ws(t,"indicatorSeparator",{"indicator-separator":!0})))},L_e=ZCe(y8||(y8=eke([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),B_e=function(t,r){var n=t.isFocused,s=t.size,i=t.theme,o=i.colors,l=i.spacing.baseUnit;return Kr({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:s,lineHeight:1,marginRight:s,textAlign:"center",verticalAlign:"middle"},r?{}:{color:n?o.neutral60:o.neutral20,padding:l*2})},fE=function(t){var r=t.delay,n=t.offset;return Wr("span",{css:s4({animation:"".concat(L_e," 1s ease-in-out ").concat(r,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},U_e=function(t){var r=t.innerProps,n=t.isRtl,s=t.size,i=s===void 0?4:s,o=bf(t,A_e);return Wr("div",ea({},ws(Kr(Kr({},o),{},{innerProps:r,isRtl:n,size:i}),"loadingIndicator",{indicator:!0,"loading-indicator":!0}),r),Wr(fE,{delay:0,offset:n}),Wr(fE,{delay:160,offset:!0}),Wr(fE,{delay:320,offset:!n}))},$_e=function(t,r){var n=t.isDisabled,s=t.isFocused,i=t.theme,o=i.colors,l=i.borderRadius,c=i.spacing;return Kr({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:c.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},r?{}:{backgroundColor:n?o.neutral5:o.neutral0,borderColor:n?o.neutral10:s?o.primary:o.neutral20,borderRadius:l,borderStyle:"solid",borderWidth:1,boxShadow:s?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:s?o.primary:o.neutral30}})},V_e=function(t){var r=t.children,n=t.isDisabled,s=t.isFocused,i=t.innerRef,o=t.innerProps,l=t.menuIsOpen;return Wr("div",ea({ref:i},ws(t,"control",{control:!0,"control--is-disabled":n,"control--is-focused":s,"control--menu-is-open":l}),o,{"aria-disabled":n||void 0}),r)},q_e=V_e,z_e=["data"],H_e=function(t,r){var n=t.theme.spacing;return r?{}:{paddingBottom:n.baseUnit*2,paddingTop:n.baseUnit*2}},W_e=function(t){var r=t.children,n=t.cx,s=t.getStyles,i=t.getClassNames,o=t.Heading,l=t.headingProps,c=t.innerProps,d=t.label,u=t.theme,h=t.selectProps;return Wr("div",ea({},ws(t,"group",{group:!0}),c),Wr(o,ea({},l,{selectProps:h,theme:u,getStyles:s,getClassNames:i,cx:n}),d),Wr("div",null,r))},G_e=function(t,r){var n=t.theme,s=n.colors,i=n.spacing;return Kr({label:"group",cursor:"default",display:"block"},r?{}:{color:s.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:i.baseUnit*3,paddingRight:i.baseUnit*3,textTransform:"uppercase"})},Y_e=function(t){var r=jW(t);r.data;var n=bf(r,z_e);return Wr("div",ea({},ws(t,"groupHeading",{"group-heading":!0}),n))},K_e=W_e,X_e=["innerRef","isDisabled","isHidden","inputClassName"],Q_e=function(t,r){var n=t.isDisabled,s=t.value,i=t.theme,o=i.spacing,l=i.colors;return Kr(Kr({visibility:n?"hidden":"visible",transform:s?"translateZ(0)":""},J_e),r?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:l.neutral80})},AW={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},J_e={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":Kr({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},AW)},Z_e=function(t){return Kr({label:"input",color:"inherit",background:0,opacity:t?0:1,width:"100%"},AW)},eEe=function(t){var r=t.cx,n=t.value,s=jW(t),i=s.innerRef,o=s.isDisabled,l=s.isHidden,c=s.inputClassName,d=bf(s,X_e);return Wr("div",ea({},ws(t,"input",{"input-container":!0}),{"data-value":n||""}),Wr("input",ea({className:r({input:!0},c),ref:i,style:Z_e(l),disabled:o},d)))},tEe=eEe,rEe=function(t,r){var n=t.theme,s=n.spacing,i=n.borderRadius,o=n.colors;return Kr({label:"multiValue",display:"flex",minWidth:0},r?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:s.baseUnit/2})},aEe=function(t,r){var n=t.theme,s=n.borderRadius,i=n.colors,o=t.cropWithEllipsis;return Kr({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},r?{}:{borderRadius:s/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},nEe=function(t,r){var n=t.theme,s=n.spacing,i=n.borderRadius,o=n.colors,l=t.isFocused;return Kr({alignItems:"center",display:"flex"},r?{}:{borderRadius:i/2,backgroundColor:l?o.dangerLight:void 0,paddingLeft:s.baseUnit,paddingRight:s.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},TW=function(t){var r=t.children,n=t.innerProps;return Wr("div",n,r)},sEe=TW,iEe=TW;function oEe(e){var t=e.children,r=e.innerProps;return Wr("div",ea({role:"button"},r),t||Wr(h4,{size:14}))}var lEe=function(t){var r=t.children,n=t.components,s=t.data,i=t.innerProps,o=t.isDisabled,l=t.removeProps,c=t.selectProps,d=n.Container,u=n.Label,h=n.Remove;return Wr(d,{data:s,innerProps:Kr(Kr({},ws(t,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:c},Wr(u,{data:s,innerProps:Kr({},ws(t,"multiValueLabel",{"multi-value__label":!0})),selectProps:c},r),Wr(h,{data:s,innerProps:Kr(Kr({},ws(t,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(r||"option")},l),selectProps:c}))},cEe=lEe,dEe=function(t,r){var n=t.isDisabled,s=t.isFocused,i=t.isSelected,o=t.theme,l=o.spacing,c=o.colors;return Kr({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},r?{}:{backgroundColor:i?c.primary:s?c.primary25:"transparent",color:n?c.neutral20:i?c.neutral0:"inherit",padding:"".concat(l.baseUnit*2,"px ").concat(l.baseUnit*3,"px"),":active":{backgroundColor:n?void 0:i?c.primary:c.primary50}})},uEe=function(t){var r=t.children,n=t.isDisabled,s=t.isFocused,i=t.isSelected,o=t.innerRef,l=t.innerProps;return Wr("div",ea({},ws(t,"option",{option:!0,"option--is-disabled":n,"option--is-focused":s,"option--is-selected":i}),{ref:o,"aria-disabled":n},l),r)},hEe=uEe,fEe=function(t,r){var n=t.theme,s=n.spacing,i=n.colors;return Kr({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},r?{}:{color:i.neutral50,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},mEe=function(t){var r=t.children,n=t.innerProps;return Wr("div",ea({},ws(t,"placeholder",{placeholder:!0}),n),r)},pEe=mEe,xEe=function(t,r){var n=t.isDisabled,s=t.theme,i=s.spacing,o=s.colors;return Kr({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},r?{}:{color:n?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},vEe=function(t){var r=t.children,n=t.isDisabled,s=t.innerProps;return Wr("div",ea({},ws(t,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),s),r)},gEe=vEe,bEe={ClearIndicator:M_e,Control:q_e,DropdownIndicator:P_e,DownChevron:EW,CrossIcon:h4,Group:K_e,GroupHeading:Y_e,IndicatorsContainer:E_e,IndicatorSeparator:F_e,Input:tEe,LoadingIndicator:U_e,Menu:m_e,MenuList:x_e,MenuPortal:N_e,LoadingMessage:y_e,NoOptionsMessage:b_e,MultiValue:cEe,MultiValueContainer:sEe,MultiValueLabel:iEe,MultiValueRemove:oEe,Option:hEe,Placeholder:pEe,SelectContainer:S_e,SingleValue:gEe,ValueContainer:k_e},yEe=function(t){return Kr(Kr({},bEe),t.components)},j8=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function jEe(e,t){return!!(e===t||j8(e)&&j8(t))}function NEe(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!jEe(e[r],t[r]))return!1;return!0}function wEe(e,t){t===void 0&&(t=NEe);var r=null;function n(){for(var s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;var o=e.apply(this,s);return r={lastResult:o,lastArgs:s,lastThis:this},o}return n.clear=function(){r=null},n}var SEe={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},CEe=function(t){return Wr("span",ea({css:SEe},t))},N8=CEe,kEe={guidance:function(t){var r=t.isSearchable,n=t.isMulti,s=t.tabSelectsValue,i=t.context,o=t.isInitialFocus;switch(i){case"menu":return"Use Up and Down to choose options, press Enter to select the currently focused option, press Escape to exit the menu".concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return o?"".concat(t["aria-label"]||"Select"," is focused ").concat(r?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":""):"";case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(t){var r=t.action,n=t.label,s=n===void 0?"":n,i=t.labels,o=t.isDisabled;switch(r){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(s,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return o?"option ".concat(s," is disabled. Select another option."):"option ".concat(s,", selected.");default:return""}},onFocus:function(t){var r=t.context,n=t.focused,s=t.options,i=t.label,o=i===void 0?"":i,l=t.selectValue,c=t.isDisabled,d=t.isSelected,u=t.isAppleDevice,h=function(g,b){return g&&g.length?"".concat(g.indexOf(b)+1," of ").concat(g.length):""};if(r==="value"&&l)return"value ".concat(o," focused, ").concat(h(l,n),".");if(r==="menu"&&u){var m=c?" disabled":"",p="".concat(d?" selected":"").concat(m);return"".concat(o).concat(p,", ").concat(h(s,n),".")}return""},onFilter:function(t){var r=t.inputValue,n=t.resultsMessage;return"".concat(n).concat(r?" for search term "+r:"",".")}},_Ee=function(t){var r=t.ariaSelection,n=t.focusedOption,s=t.focusedValue,i=t.focusableOptions,o=t.isFocused,l=t.selectValue,c=t.selectProps,d=t.id,u=t.isAppleDevice,h=c.ariaLiveMessages,m=c.getOptionLabel,p=c.inputValue,v=c.isMulti,g=c.isOptionDisabled,b=c.isSearchable,y=c.menuIsOpen,C=c.options,w=c.screenReaderStatus,k=c.tabSelectsValue,S=c.isLoading,D=c["aria-label"],E=c["aria-live"],T=N.useMemo(function(){return Kr(Kr({},kEe),h||{})},[h]),A=N.useMemo(function(){var K="";if(r&&T.onChange){var B=r.option,Q=r.options,U=r.removedValue,J=r.removedValues,Y=r.value,oe=function(ne){return Array.isArray(ne)?null:ne},M=U||B||oe(Y),V=M?m(M):"",H=Q||J||void 0,ee=H?H.map(m):[],re=Kr({isDisabled:M&&g(M,l),label:V,labels:ee},r);K=T.onChange(re)}return K},[r,T,g,l,m]),L=N.useMemo(function(){var K="",B=n||s,Q=!!(n&&l&&l.includes(n));if(B&&T.onFocus){var U={focused:B,label:m(B),isDisabled:g(B,l),isSelected:Q,options:i,context:B===n?"menu":"value",selectValue:l,isAppleDevice:u};K=T.onFocus(U)}return K},[n,s,m,g,T,i,l,u]),P=N.useMemo(function(){var K="";if(y&&C.length&&!S&&T.onFilter){var B=w({count:i.length});K=T.onFilter({inputValue:p,resultsMessage:B})}return K},[i,p,y,T,C,w,S]),O=r?.action==="initial-input-focus",Z=N.useMemo(function(){var K="";if(T.guidance){var B=s?"value":y?"menu":"input";K=T.guidance({"aria-label":D,context:B,isDisabled:n&&g(n,l),isMulti:v,isSearchable:b,tabSelectsValue:k,isInitialFocus:O})}return K},[D,n,s,v,g,b,y,T,l,k,O]),z=Wr(N.Fragment,null,Wr("span",{id:"aria-selection"},A),Wr("span",{id:"aria-focused"},L),Wr("span",{id:"aria-results"},P),Wr("span",{id:"aria-guidance"},Z));return Wr(N.Fragment,null,Wr(N8,{id:d},O&&z),Wr(N8,{"aria-live":E,"aria-atomic":"false","aria-relevant":"additions text",role:"log"},o&&!O&&z))},EEe=_Ee,R5=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],DEe=new RegExp("["+R5.map(function(e){return e.letters}).join("")+"]","g"),IW={};for(var mE=0;mE<R5.length;mE++)for(var pE=R5[mE],xE=0;xE<pE.letters.length;xE++)IW[pE.letters[xE]]=pE.base;var PW=function(t){return t.replace(DEe,function(r){return IW[r]})},AEe=wEe(PW),w8=function(t){return t.replace(/^\s+|\s+$/g,"")},TEe=function(t){return"".concat(t.label," ").concat(t.value)},IEe=function(t){return function(r,n){if(r.data.__isNew__)return!0;var s=Kr({ignoreCase:!0,ignoreAccents:!0,stringify:TEe,trim:!0,matchFrom:"any"},t),i=s.ignoreCase,o=s.ignoreAccents,l=s.stringify,c=s.trim,d=s.matchFrom,u=c?w8(n):n,h=c?w8(l(r)):l(r);return i&&(u=u.toLowerCase(),h=h.toLowerCase()),o&&(u=AEe(u),h=PW(h)),d==="start"?h.substr(0,u.length)===u:h.indexOf(u)>-1}},PEe=["innerRef"];function OEe(e){var t=e.innerRef,r=bf(e,PEe),n=i_e(r,"onExited","in","enter","exit","appear");return Wr("input",ea({ref:t},n,{css:s4({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var MEe=function(t){t.cancelable&&t.preventDefault(),t.stopPropagation()};function REe(e){var t=e.isEnabled,r=e.onBottomArrive,n=e.onBottomLeave,s=e.onTopArrive,i=e.onTopLeave,o=N.useRef(!1),l=N.useRef(!1),c=N.useRef(0),d=N.useRef(null),u=N.useCallback(function(b,y){if(d.current!==null){var C=d.current,w=C.scrollTop,k=C.scrollHeight,S=C.clientHeight,D=d.current,E=y>0,T=k-S-w,A=!1;T>y&&o.current&&(n&&n(b),o.current=!1),E&&l.current&&(i&&i(b),l.current=!1),E&&y>T?(r&&!o.current&&r(b),D.scrollTop=k,A=!0,o.current=!0):!E&&-y>w&&(s&&!l.current&&s(b),D.scrollTop=0,A=!0,l.current=!0),A&&MEe(b)}},[r,n,s,i]),h=N.useCallback(function(b){u(b,b.deltaY)},[u]),m=N.useCallback(function(b){c.current=b.changedTouches[0].clientY},[]),p=N.useCallback(function(b){var y=c.current-b.changedTouches[0].clientY;u(b,y)},[u]),v=N.useCallback(function(b){if(b){var y=a_e?{passive:!1}:!1;b.addEventListener("wheel",h,y),b.addEventListener("touchstart",m,y),b.addEventListener("touchmove",p,y)}},[p,m,h]),g=N.useCallback(function(b){b&&(b.removeEventListener("wheel",h,!1),b.removeEventListener("touchstart",m,!1),b.removeEventListener("touchmove",p,!1))},[p,m,h]);return N.useEffect(function(){if(t){var b=d.current;return v(b),function(){g(b)}}},[t,v,g]),function(b){d.current=b}}var S8=["boxSizing","height","overflow","paddingRight","position"],C8={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function k8(e){e.cancelable&&e.preventDefault()}function _8(e){e.stopPropagation()}function E8(){var e=this.scrollTop,t=this.scrollHeight,r=e+this.offsetHeight;e===0?this.scrollTop=1:r===t&&(this.scrollTop=e-1)}function D8(){return"ontouchstart"in window||navigator.maxTouchPoints}var A8=!!(typeof window<"u"&&window.document&&window.document.createElement),pb=0,Pv={capture:!1,passive:!1};function FEe(e){var t=e.isEnabled,r=e.accountForScrollbars,n=r===void 0?!0:r,s=N.useRef({}),i=N.useRef(null),o=N.useCallback(function(c){if(A8){var d=document.body,u=d&&d.style;if(n&&S8.forEach(function(v){var g=u&&u[v];s.current[v]=g}),n&&pb<1){var h=parseInt(s.current.paddingRight,10)||0,m=document.body?document.body.clientWidth:0,p=window.innerWidth-m+h||0;Object.keys(C8).forEach(function(v){var g=C8[v];u&&(u[v]=g)}),u&&(u.paddingRight="".concat(p,"px"))}d&&D8()&&(d.addEventListener("touchmove",k8,Pv),c&&(c.addEventListener("touchstart",E8,Pv),c.addEventListener("touchmove",_8,Pv))),pb+=1}},[n]),l=N.useCallback(function(c){if(A8){var d=document.body,u=d&&d.style;pb=Math.max(pb-1,0),n&&pb<1&&S8.forEach(function(h){var m=s.current[h];u&&(u[h]=m)}),d&&D8()&&(d.removeEventListener("touchmove",k8,Pv),c&&(c.removeEventListener("touchstart",E8,Pv),c.removeEventListener("touchmove",_8,Pv)))}},[n]);return N.useEffect(function(){if(t){var c=i.current;return o(c),function(){l(c)}}},[t,o,l]),function(c){i.current=c}}var LEe=function(t){var r=t.target;return r.ownerDocument.activeElement&&r.ownerDocument.activeElement.blur()},BEe={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function UEe(e){var t=e.children,r=e.lockEnabled,n=e.captureEnabled,s=n===void 0?!0:n,i=e.onBottomArrive,o=e.onBottomLeave,l=e.onTopArrive,c=e.onTopLeave,d=REe({isEnabled:s,onBottomArrive:i,onBottomLeave:o,onTopArrive:l,onTopLeave:c}),u=FEe({isEnabled:r}),h=function(p){d(p),u(p)};return Wr(N.Fragment,null,r&&Wr("div",{onClick:LEe,css:BEe}),t(h))}var $Ee={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},VEe=function(t){var r=t.name,n=t.onFocus;return Wr("input",{required:!0,name:r,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:$Ee,value:"",onChange:function(){}})},qEe=VEe;function f4(e){var t;return typeof window<"u"&&window.navigator!=null?e.test(((t=window.navigator.userAgentData)===null||t===void 0?void 0:t.platform)||window.navigator.platform):!1}function zEe(){return f4(/^iPhone/i)}function OW(){return f4(/^Mac/i)}function HEe(){return f4(/^iPad/i)||OW()&&navigator.maxTouchPoints>1}function WEe(){return zEe()||HEe()}function GEe(){return OW()||WEe()}var YEe=function(t){return t.label},KEe=function(t){return t.label},XEe=function(t){return t.value},QEe=function(t){return!!t.isDisabled},JEe={clearIndicator:O_e,container:w_e,control:$_e,dropdownIndicator:I_e,group:H_e,groupHeading:G_e,indicatorsContainer:__e,indicatorSeparator:R_e,input:Q_e,loadingIndicator:B_e,loadingMessage:g_e,menu:u_e,menuList:p_e,menuPortal:j_e,multiValue:rEe,multiValueLabel:aEe,multiValueRemove:nEe,noOptionsMessage:v_e,option:dEe,placeholder:fEe,singleValue:xEe,valueContainer:C_e},ZEe={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},eDe=4,MW=4,tDe=38,rDe=MW*2,aDe={baseUnit:MW,controlHeight:tDe,menuGutter:rDe},vE={borderRadius:eDe,colors:ZEe,spacing:aDe},nDe={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:b8(),captureMenuScroll:!b8(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:IEe(),formatGroupLabel:YEe,getOptionLabel:KEe,getOptionValue:XEe,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:QEe,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!t_e(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(t){var r=t.count;return"".concat(r," result").concat(r!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function T8(e,t,r,n){var s=LW(e,t,r),i=BW(e,t,r),o=FW(e,t),l=Ww(e,t);return{type:"option",data:t,isDisabled:s,isSelected:i,label:o,value:l,index:n}}function AN(e,t){return e.options.map(function(r,n){if("options"in r){var s=r.options.map(function(o,l){return T8(e,o,t,l)}).filter(function(o){return P8(e,o)});return s.length>0?{type:"group",data:r,options:s,index:n}:void 0}var i=T8(e,r,t,n);return P8(e,i)?i:void 0}).filter(n_e)}function RW(e){return e.reduce(function(t,r){return r.type==="group"?t.push.apply(t,e4(r.options.map(function(n){return n.data}))):t.push(r.data),t},[])}function I8(e,t){return e.reduce(function(r,n){return n.type==="group"?r.push.apply(r,e4(n.options.map(function(s){return{data:s.data,id:"".concat(t,"-").concat(n.index,"-").concat(s.index)}}))):r.push({data:n.data,id:"".concat(t,"-").concat(n.index)}),r},[])}function sDe(e,t){return RW(AN(e,t))}function P8(e,t){var r=e.inputValue,n=r===void 0?"":r,s=t.data,i=t.isSelected,o=t.label,l=t.value;return(!$W(e)||!i)&&UW(e,{label:o,value:l,data:s},n)}function iDe(e,t){var r=e.focusedValue,n=e.selectValue,s=n.indexOf(r);if(s>-1){var i=t.indexOf(r);if(i>-1)return r;if(s<t.length)return t[s]}return null}function oDe(e,t){var r=e.focusedOption;return r&&t.indexOf(r)>-1?r:t[0]}var gE=function(t,r){var n,s=(n=t.find(function(i){return i.data===r}))===null||n===void 0?void 0:n.id;return s||null},FW=function(t,r){return t.getOptionLabel(r)},Ww=function(t,r){return t.getOptionValue(r)};function LW(e,t,r){return typeof e.isOptionDisabled=="function"?e.isOptionDisabled(t,r):!1}function BW(e,t,r){if(r.indexOf(t)>-1)return!0;if(typeof e.isOptionSelected=="function")return e.isOptionSelected(t,r);var n=Ww(e,t);return r.some(function(s){return Ww(e,s)===n})}function UW(e,t,r){return e.filterOption?e.filterOption(t,r):!0}var $W=function(t){var r=t.hideSelectedOptions,n=t.isMulti;return r===void 0?n:r},lDe=1,VW=function(e){XSe(r,e);var t=ZSe(r);function r(n){var s;if(YSe(this,r),s=t.call(this,n),s.state={ariaSelection:null,focusedOption:null,focusedOptionId:null,focusableOptionsWithIds:[],focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0,instancePrefix:"",isAppleDevice:!1},s.blockOptionHover=!1,s.isComposing=!1,s.commonProps=void 0,s.initialTouchX=0,s.initialTouchY=0,s.openAfterFocus=!1,s.scrollToFocusedOptionOnUpdate=!1,s.userIsDragging=void 0,s.controlRef=null,s.getControlRef=function(c){s.controlRef=c},s.focusedOptionRef=null,s.getFocusedOptionRef=function(c){s.focusedOptionRef=c},s.menuListRef=null,s.getMenuListRef=function(c){s.menuListRef=c},s.inputRef=null,s.getInputRef=function(c){s.inputRef=c},s.focus=s.focusInput,s.blur=s.blurInput,s.onChange=function(c,d){var u=s.props,h=u.onChange,m=u.name;d.name=m,s.ariaOnChange(c,d),h(c,d)},s.setValue=function(c,d,u){var h=s.props,m=h.closeMenuOnSelect,p=h.isMulti,v=h.inputValue;s.onInputChange("",{action:"set-value",prevInputValue:v}),m&&(s.setState({inputIsHiddenAfterUpdate:!p}),s.onMenuClose()),s.setState({clearFocusValueOnUpdate:!0}),s.onChange(c,{action:d,option:u})},s.selectOption=function(c){var d=s.props,u=d.blurInputOnSelect,h=d.isMulti,m=d.name,p=s.state.selectValue,v=h&&s.isOptionSelected(c,p),g=s.isOptionDisabled(c,p);if(v){var b=s.getOptionValue(c);s.setValue(p.filter(function(y){return s.getOptionValue(y)!==b}),"deselect-option",c)}else if(!g)h?s.setValue([].concat(e4(p),[c]),"select-option",c):s.setValue(c,"select-option");else{s.ariaOnChange(c,{action:"select-option",option:c,name:m});return}u&&s.blurInput()},s.removeValue=function(c){var d=s.props.isMulti,u=s.state.selectValue,h=s.getOptionValue(c),m=u.filter(function(v){return s.getOptionValue(v)!==h}),p=Xj(d,m,m[0]||null);s.onChange(p,{action:"remove-value",removedValue:c}),s.focusInput()},s.clearValue=function(){var c=s.state.selectValue;s.onChange(Xj(s.props.isMulti,[],null),{action:"clear",removedValues:c})},s.popValue=function(){var c=s.props.isMulti,d=s.state.selectValue,u=d[d.length-1],h=d.slice(0,d.length-1),m=Xj(c,h,h[0]||null);u&&s.onChange(m,{action:"pop-value",removedValue:u})},s.getFocusedOptionId=function(c){return gE(s.state.focusableOptionsWithIds,c)},s.getFocusableOptionsWithIds=function(){return I8(AN(s.props,s.state.selectValue),s.getElementId("option"))},s.getValue=function(){return s.state.selectValue},s.cx=function(){for(var c=arguments.length,d=new Array(c),u=0;u<c;u++)d[u]=arguments[u];return Xke.apply(void 0,[s.props.classNamePrefix].concat(d))},s.getOptionLabel=function(c){return FW(s.props,c)},s.getOptionValue=function(c){return Ww(s.props,c)},s.getStyles=function(c,d){var u=s.props.unstyled,h=JEe[c](d,u);h.boxSizing="border-box";var m=s.props.styles[c];return m?m(h,d):h},s.getClassNames=function(c,d){var u,h;return(u=(h=s.props.classNames)[c])===null||u===void 0?void 0:u.call(h,d)},s.getElementId=function(c){return"".concat(s.state.instancePrefix,"-").concat(c)},s.getComponents=function(){return yEe(s.props)},s.buildCategorizedOptions=function(){return AN(s.props,s.state.selectValue)},s.getCategorizedOptions=function(){return s.props.menuIsOpen?s.buildCategorizedOptions():[]},s.buildFocusableOptions=function(){return RW(s.buildCategorizedOptions())},s.getFocusableOptions=function(){return s.props.menuIsOpen?s.buildFocusableOptions():[]},s.ariaOnChange=function(c,d){s.setState({ariaSelection:Kr({value:c},d)})},s.onMenuMouseDown=function(c){c.button===0&&(c.stopPropagation(),c.preventDefault(),s.focusInput())},s.onMenuMouseMove=function(c){s.blockOptionHover=!1},s.onControlMouseDown=function(c){if(!c.defaultPrevented){var d=s.props.openMenuOnClick;s.state.isFocused?s.props.menuIsOpen?c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&s.onMenuClose():d&&s.openMenu("first"):(d&&(s.openAfterFocus=!0),s.focusInput()),c.target.tagName!=="INPUT"&&c.target.tagName!=="TEXTAREA"&&c.preventDefault()}},s.onDropdownIndicatorMouseDown=function(c){if(!(c&&c.type==="mousedown"&&c.button!==0)&&!s.props.isDisabled){var d=s.props,u=d.isMulti,h=d.menuIsOpen;s.focusInput(),h?(s.setState({inputIsHiddenAfterUpdate:!u}),s.onMenuClose()):s.openMenu("first"),c.preventDefault()}},s.onClearIndicatorMouseDown=function(c){c&&c.type==="mousedown"&&c.button!==0||(s.clearValue(),c.preventDefault(),s.openAfterFocus=!1,c.type==="touchend"?s.focusInput():setTimeout(function(){return s.focusInput()}))},s.onScroll=function(c){typeof s.props.closeMenuOnScroll=="boolean"?c.target instanceof HTMLElement&&IS(c.target)&&s.props.onMenuClose():typeof s.props.closeMenuOnScroll=="function"&&s.props.closeMenuOnScroll(c)&&s.props.onMenuClose()},s.onCompositionStart=function(){s.isComposing=!0},s.onCompositionEnd=function(){s.isComposing=!1},s.onTouchStart=function(c){var d=c.touches,u=d&&d.item(0);u&&(s.initialTouchX=u.clientX,s.initialTouchY=u.clientY,s.userIsDragging=!1)},s.onTouchMove=function(c){var d=c.touches,u=d&&d.item(0);if(u){var h=Math.abs(u.clientX-s.initialTouchX),m=Math.abs(u.clientY-s.initialTouchY),p=5;s.userIsDragging=h>p||m>p}},s.onTouchEnd=function(c){s.userIsDragging||(s.controlRef&&!s.controlRef.contains(c.target)&&s.menuListRef&&!s.menuListRef.contains(c.target)&&s.blurInput(),s.initialTouchX=0,s.initialTouchY=0)},s.onControlTouchEnd=function(c){s.userIsDragging||s.onControlMouseDown(c)},s.onClearIndicatorTouchEnd=function(c){s.userIsDragging||s.onClearIndicatorMouseDown(c)},s.onDropdownIndicatorTouchEnd=function(c){s.userIsDragging||s.onDropdownIndicatorMouseDown(c)},s.handleInputChange=function(c){var d=s.props.inputValue,u=c.currentTarget.value;s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange(u,{action:"input-change",prevInputValue:d}),s.props.menuIsOpen||s.onMenuOpen()},s.onInputFocus=function(c){s.props.onFocus&&s.props.onFocus(c),s.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(s.openAfterFocus||s.props.openMenuOnFocus)&&s.openMenu("first"),s.openAfterFocus=!1},s.onInputBlur=function(c){var d=s.props.inputValue;if(s.menuListRef&&s.menuListRef.contains(document.activeElement)){s.inputRef.focus();return}s.props.onBlur&&s.props.onBlur(c),s.onInputChange("",{action:"input-blur",prevInputValue:d}),s.onMenuClose(),s.setState({focusedValue:null,isFocused:!1})},s.onOptionHover=function(c){if(!(s.blockOptionHover||s.state.focusedOption===c)){var d=s.getFocusableOptions(),u=d.indexOf(c);s.setState({focusedOption:c,focusedOptionId:u>-1?s.getFocusedOptionId(c):null})}},s.shouldHideSelectedOptions=function(){return $W(s.props)},s.onValueInputFocus=function(c){c.preventDefault(),c.stopPropagation(),s.focus()},s.onKeyDown=function(c){var d=s.props,u=d.isMulti,h=d.backspaceRemovesValue,m=d.escapeClearsValue,p=d.inputValue,v=d.isClearable,g=d.isDisabled,b=d.menuIsOpen,y=d.onKeyDown,C=d.tabSelectsValue,w=d.openMenuOnFocus,k=s.state,S=k.focusedOption,D=k.focusedValue,E=k.selectValue;if(!g&&!(typeof y=="function"&&(y(c),c.defaultPrevented))){switch(s.blockOptionHover=!0,c.key){case"ArrowLeft":if(!u||p)return;s.focusValue("previous");break;case"ArrowRight":if(!u||p)return;s.focusValue("next");break;case"Delete":case"Backspace":if(p)return;if(D)s.removeValue(D);else{if(!h)return;u?s.popValue():v&&s.clearValue()}break;case"Tab":if(s.isComposing||c.shiftKey||!b||!C||!S||w&&s.isOptionSelected(S,E))return;s.selectOption(S);break;case"Enter":if(c.keyCode===229)break;if(b){if(!S||s.isComposing)return;s.selectOption(S);break}return;case"Escape":b?(s.setState({inputIsHiddenAfterUpdate:!1}),s.onInputChange("",{action:"menu-close",prevInputValue:p}),s.onMenuClose()):v&&m&&s.clearValue();break;case" ":if(p)return;if(!b){s.openMenu("first");break}if(!S)return;s.selectOption(S);break;case"ArrowUp":b?s.focusOption("up"):s.openMenu("last");break;case"ArrowDown":b?s.focusOption("down"):s.openMenu("first");break;case"PageUp":if(!b)return;s.focusOption("pageup");break;case"PageDown":if(!b)return;s.focusOption("pagedown");break;case"Home":if(!b)return;s.focusOption("first");break;case"End":if(!b)return;s.focusOption("last");break;default:return}c.preventDefault()}},s.state.instancePrefix="react-select-"+(s.props.instanceId||++lDe),s.state.selectValue=v8(n.value),n.menuIsOpen&&s.state.selectValue.length){var i=s.getFocusableOptionsWithIds(),o=s.buildFocusableOptions(),l=o.indexOf(s.state.selectValue[0]);s.state.focusableOptionsWithIds=i,s.state.focusedOption=o[l],s.state.focusedOptionId=gE(i,o[l])}return s}return KSe(r,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&g8(this.menuListRef,this.focusedOptionRef),GEe()&&this.setState({isAppleDevice:!0})}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isDisabled,l=i.menuIsOpen,c=this.state.isFocused;(c&&!o&&s.isDisabled||c&&l&&!s.menuIsOpen)&&this.focusInput(),c&&o&&!s.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!c&&!o&&s.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(g8(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(s,i){this.props.onInputChange(s,i)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(s){var i=this,o=this.state,l=o.selectValue,c=o.isFocused,d=this.buildFocusableOptions(),u=s==="first"?0:d.length-1;if(!this.props.isMulti){var h=d.indexOf(l[0]);h>-1&&(u=h)}this.scrollToFocusedOptionOnUpdate=!(c&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:d[u],focusedOptionId:this.getFocusedOptionId(d[u])},function(){return i.onMenuOpen()})}},{key:"focusValue",value:function(s){var i=this.state,o=i.selectValue,l=i.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var c=o.indexOf(l);l||(c=-1);var d=o.length-1,u=-1;if(o.length){switch(s){case"previous":c===0?u=0:c===-1?u=d:u=c-1;break;case"next":c>-1&&c<d&&(u=c+1);break}this.setState({inputIsHidden:u!==-1,focusedValue:o[u]})}}}},{key:"focusOption",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",i=this.props.pageSize,o=this.state.focusedOption,l=this.getFocusableOptions();if(l.length){var c=0,d=l.indexOf(o);o||(d=-1),s==="up"?c=d>0?d-1:l.length-1:s==="down"?c=(d+1)%l.length:s==="pageup"?(c=d-i,c<0&&(c=0)):s==="pagedown"?(c=d+i,c>l.length-1&&(c=l.length-1)):s==="last"&&(c=l.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:l[c],focusedValue:null,focusedOptionId:this.getFocusedOptionId(l[c])})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(vE):Kr(Kr({},vE),this.props.theme):vE}},{key:"getCommonProps",value:function(){var s=this.clearValue,i=this.cx,o=this.getStyles,l=this.getClassNames,c=this.getValue,d=this.selectOption,u=this.setValue,h=this.props,m=h.isMulti,p=h.isRtl,v=h.options,g=this.hasValue();return{clearValue:s,cx:i,getStyles:o,getClassNames:l,getValue:c,hasValue:g,isMulti:m,isRtl:p,options:v,selectOption:d,selectProps:h,setValue:u,theme:this.getTheme()}}},{key:"hasValue",value:function(){var s=this.state.selectValue;return s.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var s=this.props,i=s.isClearable,o=s.isMulti;return i===void 0?o:i}},{key:"isOptionDisabled",value:function(s,i){return LW(this.props,s,i)}},{key:"isOptionSelected",value:function(s,i){return BW(this.props,s,i)}},{key:"filterOption",value:function(s,i){return UW(this.props,s,i)}},{key:"formatOptionLabel",value:function(s,i){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,l=this.state.selectValue;return this.props.formatOptionLabel(s,{context:i,inputValue:o,selectValue:l})}else return this.getOptionLabel(s)}},{key:"formatGroupLabel",value:function(s){return this.props.formatGroupLabel(s)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var s=this.props,i=s.isDisabled,o=s.isSearchable,l=s.inputId,c=s.inputValue,d=s.tabIndex,u=s.form,h=s.menuIsOpen,m=s.required,p=this.getComponents(),v=p.Input,g=this.state,b=g.inputIsHidden,y=g.ariaSelection,C=this.commonProps,w=l||this.getElementId("input"),k=Kr(Kr(Kr({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":m,role:"combobox","aria-activedescendant":this.state.isAppleDevice?void 0:this.state.focusedOptionId||""},h&&{"aria-controls":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?y?.action==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?N.createElement(v,ea({},C,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:w,innerRef:this.getInputRef,isDisabled:i,isHidden:b,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:d,form:u,type:"text",value:c},k)):N.createElement(OEe,ea({id:w,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:zw,onFocus:this.onInputFocus,disabled:i,tabIndex:d,inputMode:"none",form:u,value:""},k))}},{key:"renderPlaceholderOrValue",value:function(){var s=this,i=this.getComponents(),o=i.MultiValue,l=i.MultiValueContainer,c=i.MultiValueLabel,d=i.MultiValueRemove,u=i.SingleValue,h=i.Placeholder,m=this.commonProps,p=this.props,v=p.controlShouldRenderValue,g=p.isDisabled,b=p.isMulti,y=p.inputValue,C=p.placeholder,w=this.state,k=w.selectValue,S=w.focusedValue,D=w.isFocused;if(!this.hasValue()||!v)return y?null:N.createElement(h,ea({},m,{key:"placeholder",isDisabled:g,isFocused:D,innerProps:{id:this.getElementId("placeholder")}}),C);if(b)return k.map(function(T,A){var L=T===S,P="".concat(s.getOptionLabel(T),"-").concat(s.getOptionValue(T));return N.createElement(o,ea({},m,{components:{Container:l,Label:c,Remove:d},isFocused:L,isDisabled:g,key:P,index:A,removeProps:{onClick:function(){return s.removeValue(T)},onTouchEnd:function(){return s.removeValue(T)},onMouseDown:function(Z){Z.preventDefault()}},data:T}),s.formatOptionLabel(T,"value"))});if(y)return null;var E=k[0];return N.createElement(u,ea({},m,{data:E,isDisabled:g}),this.formatOptionLabel(E,"value"))}},{key:"renderClearIndicator",value:function(){var s=this.getComponents(),i=s.ClearIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!this.isClearable()||!i||c||!this.hasValue()||d)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return N.createElement(i,ea({},o,{innerProps:h,isFocused:u}))}},{key:"renderLoadingIndicator",value:function(){var s=this.getComponents(),i=s.LoadingIndicator,o=this.commonProps,l=this.props,c=l.isDisabled,d=l.isLoading,u=this.state.isFocused;if(!i||!d)return null;var h={"aria-hidden":"true"};return N.createElement(i,ea({},o,{innerProps:h,isDisabled:c,isFocused:u}))}},{key:"renderIndicatorSeparator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator,o=s.IndicatorSeparator;if(!i||!o)return null;var l=this.commonProps,c=this.props.isDisabled,d=this.state.isFocused;return N.createElement(o,ea({},l,{isDisabled:c,isFocused:d}))}},{key:"renderDropdownIndicator",value:function(){var s=this.getComponents(),i=s.DropdownIndicator;if(!i)return null;var o=this.commonProps,l=this.props.isDisabled,c=this.state.isFocused,d={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return N.createElement(i,ea({},o,{innerProps:d,isDisabled:l,isFocused:c}))}},{key:"renderMenu",value:function(){var s=this,i=this.getComponents(),o=i.Group,l=i.GroupHeading,c=i.Menu,d=i.MenuList,u=i.MenuPortal,h=i.LoadingMessage,m=i.NoOptionsMessage,p=i.Option,v=this.commonProps,g=this.state.focusedOption,b=this.props,y=b.captureMenuScroll,C=b.inputValue,w=b.isLoading,k=b.loadingMessage,S=b.minMenuHeight,D=b.maxMenuHeight,E=b.menuIsOpen,T=b.menuPlacement,A=b.menuPosition,L=b.menuPortalTarget,P=b.menuShouldBlockScroll,O=b.menuShouldScrollIntoView,Z=b.noOptionsMessage,z=b.onMenuScrollToTop,K=b.onMenuScrollToBottom;if(!E)return null;var B=function(V,H){var ee=V.type,re=V.data,ae=V.isDisabled,ne=V.isSelected,ie=V.label,G=V.value,de=g===re,X=ae?void 0:function(){return s.onOptionHover(re)},le=ae?void 0:function(){return s.selectOption(re)},Se="".concat(s.getElementId("option"),"-").concat(H),ue={id:Se,onClick:le,onMouseMove:X,onMouseOver:X,tabIndex:-1,role:"option","aria-selected":s.state.isAppleDevice?void 0:ne};return N.createElement(p,ea({},v,{innerProps:ue,data:re,isDisabled:ae,isSelected:ne,key:Se,label:ie,type:ee,value:G,isFocused:de,innerRef:de?s.getFocusedOptionRef:void 0}),s.formatOptionLabel(V.data,"menu"))},Q;if(this.hasOptions())Q=this.getCategorizedOptions().map(function(M){if(M.type==="group"){var V=M.data,H=M.options,ee=M.index,re="".concat(s.getElementId("group"),"-").concat(ee),ae="".concat(re,"-heading");return N.createElement(o,ea({},v,{key:re,data:V,options:H,Heading:l,headingProps:{id:ae,data:M.data},label:s.formatGroupLabel(M.data)}),M.options.map(function(ne){return B(ne,"".concat(ee,"-").concat(ne.index))}))}else if(M.type==="option")return B(M,"".concat(M.index))});else if(w){var U=k({inputValue:C});if(U===null)return null;Q=N.createElement(h,v,U)}else{var J=Z({inputValue:C});if(J===null)return null;Q=N.createElement(m,v,J)}var Y={minMenuHeight:S,maxMenuHeight:D,menuPlacement:T,menuPosition:A,menuShouldScrollIntoView:O},oe=N.createElement(h_e,ea({},v,Y),function(M){var V=M.ref,H=M.placerProps,ee=H.placement,re=H.maxHeight;return N.createElement(c,ea({},v,Y,{innerRef:V,innerProps:{onMouseDown:s.onMenuMouseDown,onMouseMove:s.onMenuMouseMove},isLoading:w,placement:ee}),N.createElement(UEe,{captureEnabled:y,onTopArrive:z,onBottomArrive:K,lockEnabled:P},function(ae){return N.createElement(d,ea({},v,{innerRef:function(ie){s.getMenuListRef(ie),ae(ie)},innerProps:{role:"listbox","aria-multiselectable":v.isMulti,id:s.getElementId("listbox")},isLoading:w,maxHeight:re,focusedOption:g}),Q)}))});return L||A==="fixed"?N.createElement(u,ea({},v,{appendTo:L,controlElement:this.controlRef,menuPlacement:T,menuPosition:A}),oe):oe}},{key:"renderFormField",value:function(){var s=this,i=this.props,o=i.delimiter,l=i.isDisabled,c=i.isMulti,d=i.name,u=i.required,h=this.state.selectValue;if(u&&!this.hasValue()&&!l)return N.createElement(qEe,{name:d,onFocus:this.onValueInputFocus});if(!(!d||l))if(c)if(o){var m=h.map(function(g){return s.getOptionValue(g)}).join(o);return N.createElement("input",{name:d,type:"hidden",value:m})}else{var p=h.length>0?h.map(function(g,b){return N.createElement("input",{key:"i-".concat(b),name:d,type:"hidden",value:s.getOptionValue(g)})}):N.createElement("input",{name:d,type:"hidden",value:""});return N.createElement("div",null,p)}else{var v=h[0]?this.getOptionValue(h[0]):"";return N.createElement("input",{name:d,type:"hidden",value:v})}}},{key:"renderLiveRegion",value:function(){var s=this.commonProps,i=this.state,o=i.ariaSelection,l=i.focusedOption,c=i.focusedValue,d=i.isFocused,u=i.selectValue,h=this.getFocusableOptions();return N.createElement(EEe,ea({},s,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:l,focusedValue:c,isFocused:d,selectValue:u,focusableOptions:h,isAppleDevice:this.state.isAppleDevice}))}},{key:"render",value:function(){var s=this.getComponents(),i=s.Control,o=s.IndicatorsContainer,l=s.SelectContainer,c=s.ValueContainer,d=this.props,u=d.className,h=d.id,m=d.isDisabled,p=d.menuIsOpen,v=this.state.isFocused,g=this.commonProps=this.getCommonProps();return N.createElement(l,ea({},g,{className:u,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:m,isFocused:v}),this.renderLiveRegion(),N.createElement(i,ea({},g,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:m,isFocused:v,menuIsOpen:p}),N.createElement(c,ea({},g,{isDisabled:m}),this.renderPlaceholderOrValue(),this.renderInput()),N.createElement(o,ea({},g,{isDisabled:m}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(s,i){var o=i.prevProps,l=i.clearFocusValueOnUpdate,c=i.inputIsHiddenAfterUpdate,d=i.ariaSelection,u=i.isFocused,h=i.prevWasFocused,m=i.instancePrefix,p=s.options,v=s.value,g=s.menuIsOpen,b=s.inputValue,y=s.isMulti,C=v8(v),w={};if(o&&(v!==o.value||p!==o.options||g!==o.menuIsOpen||b!==o.inputValue)){var k=g?sDe(s,C):[],S=g?I8(AN(s,C),"".concat(m,"-option")):[],D=l?iDe(i,C):null,E=oDe(i,k),T=gE(S,E);w={selectValue:C,focusedOption:E,focusedOptionId:T,focusableOptionsWithIds:S,focusedValue:D,clearFocusValueOnUpdate:!1}}var A=c!=null&&s!==o?{inputIsHidden:c,inputIsHiddenAfterUpdate:void 0}:{},L=d,P=u&&h;return u&&!P&&(L={value:Xj(y,C,C[0]||null),options:C,action:"initial-input-focus"},P=!h),d?.action==="initial-input-focus"&&(L=null),Kr(Kr(Kr({},w),A),{},{prevProps:s,ariaSelection:L,prevWasFocused:P})}}]),r}(N.Component);VW.defaultProps=nDe;var cDe=N.forwardRef(function(e,t){var r=GSe(e);return N.createElement(VW,ea({ref:t},r))}),Gw=cDe;const bE=10;function dDe(){const[e,t]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(null),[o,l]=N.useState(null),[c,d]=N.useState([]),[u,h]=N.useState([]),[m,p]=N.useState(""),[v,g]=N.useState(""),[b,y]=N.useState([]),[C,w]=N.useState([]),[k,S]=N.useState([]),D=async()=>{try{const de=(await Oe.get("/api/rfq-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}})).data.map(X=>({label:`${X.categoryName} (${X.prefix})`,value:X._id}));h(de),y(de)}catch(G){console.error("Failed to fetch categories:",G)}},E=async()=>{try{const G=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),Se=(await Oe.get("/api/vendors",{params:{companyId:G,financialYear:de}})).data.filter(ue=>!ue.isDeleted&&!ue.isBlocked).map(ue=>({label:`${ue.name1} ${ue.name2||""}`,value:ue._id,vnNo:ue.vnNo||""}));d(Se),w(Se)}catch(G){console.error("Failed to fetch vendors:",G)}},T=async()=>{try{const G=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),X=await Oe.get("/api/locations",{params:{companyId:G,financialYear:de}});Array.isArray(X.data)?S(X.data):X.data&&Array.isArray(X.data.locations)?S(X.data.locations):S([])}catch(G){console.error("Failed to fetch locations:",G),S([])}};N.useEffect(()=>{P(),E(),D(),T()},[]);const A=async G=>{try{const X=(await Oe.get(`/api/quotations/${G}`)).data;l({...X,validityDate:X.validityDate?new Date(X.validityDate).toISOString().split("T")[0]:"",items:X.items.map(le=>({...le,deliveryDate:le.deliveryDate?new Date(le.deliveryDate).toISOString().split("T")[0]:""}))})}catch(de){console.error("Failed to fetch quotation details:",de),alert("Failed to load quotation details")}},L=async()=>{try{const G=o.items.reduce((X,le)=>X+(parseFloat(le.price)||0),0),de={...o,totalPrice:G,items:o.items.map(X=>({...X,deliveryDate:X.deliveryDate||null}))};await Oe.put(`/api/quotations/${o._id}`,de),alert("Quotation updated successfully!"),l(null),P()}catch(G){console.error("Failed to update quotation:",G),alert("Failed to update quotation")}};N.useEffect(()=>{P(),E(),D()},[]);const P=async()=>{try{const G=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear");n(!0);const le=(await Oe.get("/api/quotations/get",{params:{companyId:G,financialYear:de}})).data.sort((Se,ue)=>new Date(ue.createdAt)-new Date(Se.createdAt));t(le),i(null)}catch(G){console.error("Failed to fetch quotations:",G),i("Failed to load quotations. Please try again.")}finally{n(!1)}},O=()=>{l(null)},Z=(G,de)=>{l(X=>({...X,[G]:de}))},z=(G,de,X)=>{const le=[...o.items];le[G][de]=X,l(Se=>({...Se,items:le}))},K=G=>{const de=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Quotation - ${G._id}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
          .info-item { margin-bottom: 10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f5f5f5; }
          .total-row { background-color: #f0f0f0; font-weight: bold; }
          .print-date { text-align: right; margin-top: 30px; font-size: 12px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div className="header">
          <h1>QUOTATION</h1>
          <h3>Quotation ID: ${G._id}</h3>
        </div>
        
        <div className="info-grid">
          <div>
            <div className="info-item"><strong>Indent ID:</strong> ${G.indentId}</div>
            <div className="info-item"><strong>Category ID:</strong> ${G.categoryId}</div>
            <div className="info-item"><strong>RFQ Category:</strong> ${G.rfqCategoryId}</div>
          </div>
          <div>
            <div className="info-item"><strong>Vendor:</strong> ${G.vendorName}</div>
            <div className="info-item"><strong>Date:</strong> ${new Date(G.createdAt).toLocaleDateString()}</div>
          </div>
        </div>
        
        ${G.note?`<div className="info-item"><strong>Note:</strong> ${G.note}</div>`:""}
        
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${G.items.map((le,Se)=>`
              <tr>
                <td>${Se+1}</td>
                <td>${le.materialId}</td>
                <td>${le.description}</td>
                <td>${le.qty}</td>
                <td>${le.unit||le.baseUnit}</td>
                <td>₹${le.price?parseFloat(le.price).toFixed(2):"0.00"}</td>
                <td>₹${le.price&&le.qty?(parseFloat(le.price)*parseFloat(le.qty)).toFixed(2):"0.00"}</td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr className="total-row">
              <td colspan="6" style="text-align: right;"><strong>Grand Total:</strong></td>
              <td><strong>₹${G.items.reduce((le,Se)=>{const ue=Se.price&&Se.qty?parseFloat(Se.price)*parseFloat(Se.qty):0;return le+ue},0).toFixed(2)}</strong></td>
            </tr>
          </tfoot>
        </table>
        
        <div className="print-date">
          Printed on: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}
        </div>
      </body>
      </html>
    `,X=window.open("","_blank");X.document.write(de),X.document.close(),X.focus(),X.print()},[B,Q]=N.useState(""),[U,J]=N.useState(1),[Y,oe]=N.useState(null),M=N.useMemo(()=>{let G=e;return(m||v)&&(G=G.filter(de=>{const X=new Date(de.createdAt),le=m?new Date(m):null,Se=v?new Date(v):null;return le&&Se?X>=le&&X<=Se:le?X>=le:Se?X<=Se:!0})),B&&(G=G.filter(de=>[de.quotationNumber,de.indentId,de.vendorName,de.vnNo,de.note,de.vendor,de.location,de.quotationReference].join(" ").toLowerCase().includes(B.toLowerCase())),G=G.sort((de,X)=>{const le=parseFloat(de.totalPrice)||0,Se=parseFloat(X.totalPrice)||0;return le-Se})),G},[B,e,m,v]),V=()=>{Q(""),p(""),g(""),J(1)},H=async G=>{try{const de=await Oe.get(`/api/quotations/${G}`);oe(de.data)}catch(de){console.error("Failed to fetch quotation details:",de),alert("Failed to load quotation details")}},ee=(G,de)=>{if(!de)return"transparent";switch(G){case 0:return"#d4edda";case 1:return"#fff3cd";default:return"transparent"}},re=Math.ceil(M.length/bE),ae=N.useMemo(()=>{const G=(U-1)*bE;return M.slice(G,G+bE)},[M,U]),ne=G=>{Q(G.target.value),J(1)},ie=G=>{G<1||G>re||J(G)};return r?a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):s?a.jsxs("div",{style:{padding:"20px",marginLeft:"300px"},children:[a.jsx("h2",{children:"Quotations"}),a.jsx("div",{style:{color:"red",marginBottom:"20px"},children:s}),a.jsx("button",{onClick:P,style:{padding:"10px 20px"},children:"Retry"})]}):Y?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Quotation Preview - ",Y.quotationNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>oe(null)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Indent ID"}),a.jsx("div",{className:"fw-bold",children:Y.indentId})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Vendor"}),a.jsx("div",{className:"fw-bold",children:Y.vendorName})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Vendor No"}),a.jsx("div",{className:"fw-bold",children:Y.vnNo||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Quotation Reference"}),a.jsx("div",{className:"fw-bold",children:Y.quotationReference||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Validity Date"}),a.jsx("div",{className:"fw-bold",children:Y.validityDate?new Date(Y.validityDate).toLocaleDateString():"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Location"}),a.jsx("div",{className:"fw-bold",children:Y.location||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Buyer Group"}),a.jsx("div",{className:"fw-bold",children:Y.buyerGroup||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Created Date"}),a.jsx("div",{className:"fw-bold",children:new Date(Y.createdAt).toLocaleDateString()})]})})})]}),Y.note&&a.jsxs("div",{className:"alert alert-info mb-4",children:[a.jsx("strong",{children:"Note:"})," ",Y.note]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:Y.items.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{children:G.materialId}),a.jsx("td",{children:G.description}),a.jsx("td",{children:G.qty}),a.jsx("td",{children:G.unit||G.baseUnit}),a.jsxs("td",{children:["₹",G.price?parseFloat(G.price).toFixed(2):"0.00"]}),a.jsx("td",{children:G.deliveryDate?new Date(G.deliveryDate).toLocaleDateString():"-"}),a.jsxs("td",{children:["₹",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})]},de))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"7",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["₹",Y.items.reduce((G,de)=>{const X=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return G+X},0).toFixed(2)]})]})})]})})]})]})})}):o?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Edit Quotation - ",o.quotationNumber]}),a.jsxs("div",{children:[a.jsx("button",{type:"button",className:"btn btn-success me-4 mx-4",onClick:L,children:"Save Changes"}),a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:O,children:"Cancel"})]})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Indent ID"}),a.jsx("input",{type:"text",className:"form-control",value:o.indentId||"",onChange:G=>Z("indentId",G.target.value),readOnly:!0})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"RFQ Category"}),a.jsx(Gw,{options:b,value:b.find(G=>G.value===o.rfqCategoryId),onChange:G=>Z("rfqCategoryId",G?.value),placeholder:"Select Category"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Vendor"}),a.jsx(Gw,{options:C,value:C.find(G=>G.value===o.vendor),onChange:G=>{o.vendor||(Z("vendor",G?.value),Z("vendorName",G?.label),Z("vnNo",G?.vnNo||""))},placeholder:"Select Vendor",isDisabled:!!o.vendor})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Quotation Reference"}),a.jsx("input",{type:"text",className:"form-control",value:o.quotationReference||"",onChange:G=>Z("quotationReference",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Validity Date"}),a.jsx("input",{type:"date",className:"form-control",value:o.validityDate||"",onChange:G=>Z("validityDate",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsxs("select",{className:"form-select",value:o.location||"",onChange:G=>Z("location",G.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),k.map((G,de)=>a.jsx("option",{value:G.name||G,children:G.name||G},de))]})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Buyer Group"}),a.jsx("input",{type:"text",className:"form-control",value:o.buyerGroup||"",onChange:G=>Z("buyerGroup",G.target.value)})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Note"}),a.jsx("textarea",{className:"form-control",rows:3,value:o.note||"",onChange:G=>Z("note",G.target.value),placeholder:"Add any notes (optional)"})]})]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:o.items.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.materialId||"",onChange:X=>z(de,"materialId",X.target.value),readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.description||"",onChange:X=>z(de,"description",X.target.value),readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.qty||"",onChange:X=>z(de,"qty",X.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.baseUnit||"",onChange:X=>z(de,"baseUnit",X.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.orderUnit||"",onChange:X=>z(de,"orderUnit",X.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.unit||"",onChange:X=>z(de,"unit",X.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.materialgroup||"",onChange:X=>z(de,"materialgroup",X.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:G.deliveryDate||"",onChange:X=>z(de,"deliveryDate",X.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.price||"",onChange:X=>z(de,"price",X.target.value),step:"0.01"})}),a.jsx("td",{children:a.jsxs("span",{className:"fw-bold text-success",children:["₹",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})})]},de))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"10",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["₹",o.items.reduce((G,de)=>{const X=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return G+X},0).toFixed(2)]})]})})]})})]})})})]})})}):a.jsxs("div",{className:"content",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h6",{children:"All Quotations"}),a.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:a.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"Search by Quotation Reference etc.......",value:B,onChange:ne,className:"form-control",style:{width:250,marginTop:"22px"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"From Date"}),a.jsx("input",{type:"date",value:m,onChange:G=>{p(G.target.value),J(1)},className:"form-control",style:{width:150}})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"To Date"}),a.jsx("input",{type:"date",value:v,onChange:G=>{g(G.target.value),J(1)},className:"form-control",style:{width:150}})]}),a.jsx("button",{onClick:V,className:"btn btn-sm btn-soft-warning",children:"Reset"}),a.jsx("button",{onClick:P,className:"btn btn-sm btn-soft-primary",children:"Refresh"})]})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",id:"DataTables_Table_0","aria-describedby":"DataTables_Table_0_info",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Quotation ID"}),a.jsx("th",{children:"Quotation Reference"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),"              ",a.jsx("th",{children:"Validity Date"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"TotalPrice"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ae.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{children:G.quotationNumber}),a.jsx("td",{children:G.quotationReference}),a.jsx("td",{className:"text-wrap",children:G.vendorName}),a.jsx("td",{className:"text-wrap",children:G.location}),a.jsx("td",{children:new Date(G.validityDate).toLocaleDateString()}),a.jsx("td",{children:new Date(G.createdAt).toLocaleDateString()}),a.jsx("td",{style:{backgroundColor:ee(de,!!B)},children:G.totalPrice}),a.jsx("td",{className:"text-wrap",children:G.note||"-"}),a.jsxs("td",{children:[a.jsx("button",{onClick:()=>H(G._id),className:"btn btn-sm ",title:"Preview",children:a.jsx("i",{className:"fas fa-eye",style:{color:"black"}})}),a.jsx("button",{onClick:()=>A(G._id),className:"btn btn-sm ",title:"Edit",children:a.jsx("i",{className:"fas fa-edit",style:{color:"black"}})}),a.jsx("button",{onClick:()=>K(G),className:"btn btn-sm ",title:"Print",children:a.jsx("i",{className:"fas fa-print",style:{color:"black"}})})]})]},G._id||de))})]})})})}),a.jsx("div",{className:"d-flex justify-content-end mt-2",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[a.jsx("li",{className:`page-item${U===1?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(U-1),disabled:U===1,children:a.jsx("i",{className:"fas fa-angle-left"})})}),(()=>{const G=[];let de=[1,2],X=[re-1,re].filter(ue=>ue>2),le=[];U<=4?(de=[1,2,3,4,5].filter(ue=>ue<=re),X=[re-1,re].filter(ue=>ue>5)):U>=re-3?(de=[1,2].filter(ue=>ue<re-4),X=[re-4,re-3,re-2,re-1,re].filter(ue=>ue>2&&ue<=re)):(de=[1,2],le=[U-1,U,U+1],X=[re-1,re]);const Se=ue=>ue.map(se=>a.jsx("li",{className:`page-item${U===se?" active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(se),children:se})},se));return G.push(...Se(de)),(le.length>0&&le[0]>de[de.length-1]+1||le.length===0&&X[0]>de[de.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"…"})},"start-ellipsis")),G.push(...Se(le)),X.length>0&&(le.length>0&&X[0]>le[le.length-1]+1||le.length===0&&X[0]>de[de.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"…"})},"end-ellipsis")),G.push(...Se(X)),G})(),a.jsx("li",{className:`page-item${U===re?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(U+1),disabled:U===re,children:a.jsx("i",{className:"fas fa-angle-right"})})})]})})})]})}function uDe(){const[e,t]=N.useState("enquiry"),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState([]),[u,h]=N.useState(null),[m,p]=N.useState(""),[v,g]=N.useState(""),[b,y]=N.useState(new Date().toISOString().substring(0,10)),[C,w]=N.useState(""),[k,S]=N.useState(""),[D,E]=N.useState(""),[T,A]=N.useState([]),[L,P]=N.useState(0),[O,Z]=N.useState([]),[z,K]=N.useState([]),[B,Q]=N.useState(!1),[U,J]=N.useState(""),[Y,oe]=N.useState([]),[M,V]=N.useState(""),[H,ee]=N.useState([]),[re,ae]=N.useState(""),[ne,ie]=N.useState([]);console.log("enquirySearchResults",Y);const[G,de]=N.useState(!1),[X,le]=N.useState(""),[Se,ue]=N.useState([]),[se,ye]=N.useState(""),[Ne,Ue]=N.useState(""),[Qe,ot]=N.useState(""),[xt,Le]=N.useState(""),[dt,Tt]=N.useState(""),[At,Vt]=N.useState(0),[xe,he]=N.useState(0),[ve,pe]=N.useState(0),[De,Ye]=N.useState(),[Nt,Je]=N.useState(),[Xe,Be]=N.useState(),[qe,ft]=N.useState([]),[Ie,Ke]=N.useState(null),[Ge,lt]=N.useState(0),[Mt,Ae]=N.useState(0),[ke,it]=N.useState(0),[bt,Xt]=N.useState(0),[Ft,rr]=N.useState(0),[pr,jr]=N.useState([]),[vt,Lt]=N.useState(!1),[fe,Me]=N.useState(""),[Te,_e]=N.useState(null),[Fe,Ve]=N.useState([]),[mt,wt]=N.useState([]),[nt,St]=N.useState([]),[Ct,Jt]=N.useState([]),[ir,xr]=N.useState([]);N.useEffect(()=>{const rt=localStorage.getItem("selectedCompanyId"),fr=localStorage.getItem("financialYear"),ar={params:{companyId:rt,financialYear:fr}};Oe.get("/api/po-categories",{params:{companyId:rt,financialYear:fr}}).then(Er=>n(Er.data)),Oe.get("/api/indent/get",ar).then(Er=>{l(Er.data)}),Oe.get("/api/quotations/get",ar).then(Er=>{i(Er.data);const kr=[];Er.data.forEach(kn=>{kn.items.forEach(Yo=>{Yo.buyerGroup&&!kr.includes(Yo.buyerGroup)&&kr.push(Yo.buyerGroup)})}),K(kr)}),Oe.get("/api/contracts/get",ar).then(Er=>{d(Er.data)}).catch(Er=>{console.error("Error fetching contracts:",Er),d([])}),Oe.get("/api/general-conditions",ar).then(Er=>{const kr=Er.data.filter(kn=>!kn.isDeleted).map(kn=>({_id:kn._id,name:kn.name,description:kn.description}));wt(kr)}),Oe.get("/api/processes",ar).then(Er=>{const kr=Er.data.filter(kn=>!kn.isDeleted).map(kn=>({_id:kn._id,processId:kn.processId,processDescription:kn.processDescription}));St(kr)}),Oe.get("/api/locations",ar).then(Er=>Ve(Er.data)),Oe.get("/api/tax",ar).then(Er=>ft(Er.data)),Oe.get("/api/material",ar).then(Er=>jr(Er.data)),Oe.get("/api/vendors",ar).then(Er=>Z(Er.data)),A([...Array(4).fill(null).map(()=>({materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",buyerGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10),note:""}))])},[]);const or=(rt,fr,ar)=>{fr.includes(rt)?ar(fr.filter(Er=>Er!==rt)):ar([...fr,rt])},ze=rt=>{if(J(rt),rt.trim()){const fr=s.filter(ar=>ar.quotationNumber.toLowerCase().includes(rt.toLowerCase()));oe(fr)}else oe([])},dr=()=>{oe(s)},ur=rt=>{if(V(rt),rt.trim()){const fr=o.filter(ar=>ar.quotationNumber?.toLowerCase().includes(rt.toLowerCase())||ar.indentId?.toLowerCase().includes(rt.toLowerCase()));ee(fr)}else ee([])},Vr=()=>{ee(o)},va=rt=>{if(ae(rt),rt.trim()){const fr=c.filter(ar=>ar.contractNumber?.toLowerCase().includes(rt.toLowerCase())||ar.contractId?.toLowerCase().includes(rt.toLowerCase()));ie(fr)}else ie([])},en=()=>{ie(c)},zs=rt=>{p(rt.quotationNumber),ni(rt.quotationNumber),Q(!1),J(""),oe([])},zn=rt=>{p(rt.indentId),Wo(rt.indentId),Q(!1),J(""),oe([])},fs=rt=>{p(rt.contractNumber||rt.contractId),Go(rt.contractNumber||rt.contractId),Q(!1),ae(""),ie([])},ks=()=>{Q(!1),J(""),oe([]),V(""),ee([]),ae(""),ie([])},yt=rt=>{if(le(rt),rt.trim()){const fr=O.filter(ar=>ar.vendorName?.toLowerCase().includes(rt.toLowerCase())||ar.vendorCode?.toLowerCase().includes(rt.toLowerCase()));ue(fr)}else ue([])},mr=()=>{ue(O)},hr=rt=>{w(rt.name1||rt.vendorName),de(!1),le(""),ue([])},Yr=()=>{de(!1),le(""),ue([])},Mr=(rt,fr,ar,Er,kr)=>{const kn=rt.reduce((Df,rd)=>Df+(rd.quantity||0)*(rd.price||0),0);P(kn.toFixed(2));const Yo=fr!==void 0?fr:Ge,Ef=ar!==void 0?ar:Mt,uc=Er!==void 0?Er:ke,Ko=kr!==void 0?kr:bt,Xo=kn*(parseFloat(Yo)||0)/100,Es=kn*(parseFloat(Ef)||0)/100,vi=kn*(parseFloat(uc)||0)/100,hc=parseFloat(Ko)||0;Vt(Xo.toFixed(2)),he(Es.toFixed(2)),pe(vi.toFixed(2));const Qo=kn+Xo+Es+vi-hc;rr(Qo.toFixed(2))},on=rt=>{lt(rt),Mr(T,rt,Mt,ke,bt)},Ho=rt=>{Ae(rt),Mr(T,Ge,rt,ke,bt)},es=rt=>{it(rt),Mr(T,Ge,Mt,rt,bt)},Io=rt=>{Xt(rt),Mr(T,Ge,Mt,ke,rt)},xa=(rt,fr,ar)=>{const Er=[...T];Er[rt][fr]=fr==="quantity"||fr==="price"?parseFloat(ar)||0:ar,A(Er),Mr(Er,Ge,Mt,ke,bt)},ni=rt=>{p(rt);const fr=s.find(ar=>ar.quotationNumber===rt);if(fr){w(fr.name1||fr.vendorName),S(fr.items[0]?.location||"");const ar=fr.items.find(kr=>kr.buyerGroup);ar&&ye(ar.buyerGroup);const Er=fr.items.map(kr=>({materialId:kr.materialId,description:kr.description,quantity:kr.qty,baseUnit:kr.baseUnit,unit:kr.unit,orderUnit:kr.orderUnit,price:kr.price,priceUnit:kr.priceUnit,materialgroup:kr.materialgroup,deliveryDate:kr.deliveryDate?String(kr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}));A(Er),Mr(Er)}},Wo=rt=>{p(rt);const fr=o.find(ar=>ar.indentId===rt);if(fr){w(fr.name1||fr.vendorName),S(fr.items[0]?.location||"");const ar=fr.items.find(kr=>kr.buyerGroup);ar&&ye(ar.buyerGroup);const Er=fr.items.map(kr=>({materialId:kr.materialId,description:kr.description,quantity:kr.qty,baseUnit:kr.baseUnit,unit:kr.unit,orderUnit:kr.orderUnit,price:kr.price,priceUnit:kr.priceUnit,materialgroup:kr.materialgroup,deliveryDate:kr.deliveryDate?String(kr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}));A(Er),Mr(Er)}},Go=rt=>{p(rt);const fr=c.find(ar=>ar.contractNumber===rt||ar.contractId===rt);if(fr){w(fr.vendorName||fr.name1),S(fr.items?.[0]?.location||"");const ar=fr.items?.find(kr=>kr.buyerGroup);ar&&ye(ar.buyerGroup);const Er=fr.items?.map(kr=>({materialId:kr.materialId,description:kr.description,quantity:kr.qty||kr.quantity,baseUnit:kr.baseUnit,unit:kr.unit,orderUnit:kr.orderUnit,price:kr.price,priceUnit:kr.priceUnit,materialgroup:kr.materialgroup,deliveryDate:kr.deliveryDate?String(kr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10)}))||[];A(Er),Mr(Er)}},Oi=()=>{A([...T,{materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",buyerGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10)}])},Va=rt=>{const fr=[...T];fr.splice(rt,1),A(fr),Mr(fr)},[Mi,_s]=N.useState(!1),[oc,ed]=N.useState(""),[yl,td]=N.useState(""),[jl,lc]=N.useState(null),Nl=async rt=>{if(rt.preventDefault(),!u||!m)return alert("Please select both category and quotation");const ar={quotationId:s.find(Er=>Er.quotationNumber===m)?._id,quotationNumber:m,categoryId:u._id,category:u.categoryName,date:b,vendor:C,notes:xt,contactPerson:Ne,generalConditions:mt,processes:nt,preparedby:Xe,approvedby:Nt,remarks:De,validityDate:dt,buyerGroup:se,deliveryLocation:k,deliveryAddress:D,items:T,total:parseFloat(L)||0,taxName:Ie?.taxName||"",cgst:parseFloat(Ge)||0,sgst:parseFloat(Mt)||0,igst:parseFloat(ke)||0,taxDiscount:parseFloat(bt)||0,finalTotal:parseFloat(Ft)||0};lc(ar),_s(!0)},cc=async()=>{try{const rt=localStorage.getItem("selectedCompanyId"),fr=localStorage.getItem("financialYear");let ar={...jl,companyId:rt,financialYear:fr};if(oc==="internal")ar.poGenerationType="internal";else if(oc==="external"){if(!yl.trim())return alert("Please enter external PO number");ar.poGenerationType="external",ar.poNumber=yl.trim()}const Er=await Oe.post("/api/purchase-orders",ar);console.log("Saved PO:",Er.data),ms(),_s(!1),ed(""),td(""),lc(null),alert("PO Created Successfully!")}catch(rt){console.error("Error during PO creation:",rt),alert("Failed to create PO")}},ms=()=>{h(null),p(""),y(new Date().toISOString().substring(0,10)),w(""),S(""),E(""),A([]),P(""),Ke(null),lt(""),Ae(""),it(""),Xt(""),rr(""),ot(""),Le(""),ye(""),Ue(""),Tt("")},dc=()=>{_s(!1),ed(""),td(""),lc(null)},wl=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-cog me-2"}),"PO Number Generation"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:dc,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the PO Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{ed("internal"),cc()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>ed("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),oc==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Custom PO Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"External PO Number (max 50 characters)",value:yl,onChange:rt=>td(rt.target.value),onKeyPress:rt=>{rt.key==="Enter"&&yl.trim()&&cc()},maxLength:50,autoComplete:"off",spellCheck:"false",autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[yl.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:cc,disabled:!yl.trim(),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Create PO"]})})]}),oc==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"alert alert-info",role:"alert",children:[a.jsx("strong",{children:"System Generated Number"}),a.jsx("br",{}),"Format: ",u?.prefix,"-XXXXXX"]})})]})]})})})]}),Jr=()=>{const rt=pr.filter(ar=>ar.materialId.toLowerCase().includes(fe.toLowerCase())||ar.description.toLowerCase().includes(fe.toLowerCase())),fr=ar=>{const Er=[...T];Er[Te]={...Er[Te],materialId:ar.materialId,description:ar.description,baseUnit:ar.baseUnit,unit:ar.unit,price:ar.price,buyerGroup:ar.buyerGroup,materialgroup:ar.materialgroup},A(Er),Mr(Er),Lt(!1)};return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:a.jsxs("div",{style:{background:"white",padding:20,maxHeight:"80%",overflowY:"auto",width:"80%"},children:[a.jsx("h3",{children:"Select Material"}),a.jsx("input",{type:"text",placeholder:"Search by ID or Description",value:fe,onChange:ar=>Me(ar.target.value),style:{width:"100%",marginBottom:10}}),a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Price Unit"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Select"})]})}),a.jsx("tbody",{children:rt.map((ar,Er)=>a.jsxs("tr",{children:[a.jsx("td",{children:ar.materialId}),a.jsx("td",{children:ar.description}),a.jsx("td",{children:ar.baseUnit}),a.jsx("td",{children:ar.unit}),a.jsx("td",{children:ar.price}),a.jsx("td",{children:ar.priceUnit}),a.jsx("td",{children:ar.buyerGroup}),a.jsx("td",{children:ar.materialgroup}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-info",onClick:()=>fr(ar),children:"Select"})})]},Er))})]}),a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-danger",onClick:()=>Lt(!1),style:{marginTop:10},children:"Close"})]})})},ih=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header text-white",children:[a.jsxs("ul",{className:"nav nav-tabs nav-tabs-bottom",children:[a.jsx("li",{className:"nav-item",children:a.jsx("a",{className:`nav-link ${e==="enquiry"?"active":""}`,onClick:()=>t("enquiry"),href:"#",children:"Enquiry"})}),a.jsx("li",{className:"nav-item",children:a.jsx("a",{className:`nav-link ${e==="quotation"?"active":""}`,onClick:()=>t("quotation"),href:"#",children:"Quotation"})}),a.jsx("li",{className:"nav-item",children:a.jsx("a",{className:`nav-link ${e==="contract"?"active":""}`,onClick:()=>t("contract"),href:"#",children:"Contract"})})]}),a.jsx("button",{type:"button",className:"btn-close btn-close-black",onClick:ks})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"tab-content",children:[e==="enquiry"&&a.jsxs("div",{className:`tab-pane ${e==="enquiry"?"show active":""}`,id:"bottom-tab1",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Enquiry Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Enquiry number...",value:M,onChange:rt=>ur(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:Vr,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:H.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Enquiry Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:H.map((rt,fr)=>a.jsxs("tr",{children:[a.jsx("td",{children:rt.indentId}),a.jsx("td",{children:new Date(rt.documentDate).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>zn(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},fr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:M?`No enquiries found matching "${M}"`:'Enter search term or click "View All"'})]})})]}),e==="quotation"&&a.jsxs("div",{className:`tab-pane ${e==="quotation"?"show active":""}`,id:"bottom-tab2",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Quotation Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter quotation number...",value:U,onChange:rt=>ze(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:dr,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Y.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Quotation Number"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Validity Date"}),a.jsx("th",{children:"Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Y.map((rt,fr)=>a.jsxs("tr",{children:[a.jsx("td",{children:rt.quotationNumber}),a.jsx("td",{className:"text-flex",children:rt.vendorName}),a.jsx("td",{children:new Date(rt.validityDate).toLocaleDateString()}),a.jsxs("td",{children:["₹",rt.totalPrice]}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>zs(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},fr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:U?`No quotations found matching "${U}"`:'Enter search term or click "View All"'})]})})]}),e==="contract"&&a.jsxs("div",{className:`tab-pane ${e==="contract"?"show active":""}`,id:"bottom-tab3",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Contract Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter contract number...",value:re,onChange:rt=>va(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:en,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ne.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Contract Number"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Start Date"}),a.jsx("th",{children:"End Date"}),a.jsx("th",{children:"Total Value"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ne.map((rt,fr)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-success",children:rt.contractNumber||rt.contractId})}),a.jsx("td",{children:rt.vendorName||rt.name1}),a.jsx("td",{children:new Date(rt.validityFDate).toLocaleDateString()}),a.jsx("td",{children:new Date(rt.validityTDate).toLocaleDateString()}),a.jsxs("td",{children:["₹",rt.totalPrice]}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>fs(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},fr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:re?`No contracts found matching "${re}"`:'Enter search term or click "View All"'})]})})]})]})})})})]})})}),_f=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Yr})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Vendor"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:X,onChange:rt=>yt(rt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:mr,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Se.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Code"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Se.map((rt,fr)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:rt.vnNo})}),a.jsx("td",{children:rt.name1}),a.jsx("td",{children:rt.email}),a.jsx("td",{children:rt.phone}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>hr(rt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},fr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:X?`No vendors found matching "${X}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Yr,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Order"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Order"})]})})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Purchase Order Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Ref_Document:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter reference document number",value:m,onChange:rt=>{p(rt.target.value),rt.target.value&&ni(rt.target.value)},required:!0}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>Q(!0),style:{border:"0px solid"},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"PO_Category:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",onChange:rt=>{const fr=r.find(ar=>ar._id===rt.target.value);h(fr)},required:!0,children:[a.jsx("option",{value:"",children:"-- Select Category --"}),r.map(rt=>a.jsx("option",{value:rt._id,children:rt.categoryName},rt._id))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor:"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:C,onChange:rt=>w(rt.target.value),placeholder:"Enter vendor name"}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>de(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"PO Number:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:v,readOnly:!0})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"PO Creating date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:b,onChange:rt=>y(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:k,onChange:rt=>S(rt.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),Fe.map(rt=>a.jsx("option",{value:rt.name||rt.locationName||rt._id,children:rt.name||rt.locationName||rt._id},rt._id||rt.id||rt.name))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:se,onChange:rt=>ye(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:Ne,onChange:rt=>Ue(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Date:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:dt,onChange:rt=>Tt(rt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select General Conditions"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:Ct.length===0?"Select...":`${Ct.length} selected`}),a.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:mt.map(rt=>a.jsx("div",{className:"dropdown-item-text",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:Ct.includes(rt._id),onChange:()=>or(rt._id,Ct,Jt)}),a.jsx("label",{className:"form-check-label ms-1",children:rt.name})]})},rt._id))})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select Processes"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:ir.length===0?"Select...":`${ir.length} selected`}),a.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:nt.map(rt=>a.jsx("div",{className:"dropdown-item-text",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:ir.includes(rt._id),onChange:()=>or(rt._id,ir,xr)}),a.jsx("label",{className:"form-check-label ms-1",children:rt.processId})]})},rt._id))})]})})]}),a.jsxs("div",{className:"col-lg-3  row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Header Note:"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("textarea",{className:"form-control form-control-sm",value:Qe,onChange:rt=>ot(rt.target.value),maxLength:"250"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Remarks:"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{className:"form-control",value:De,onChange:rt=>Ye(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Prepared By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:Xe,onChange:rt=>Be(rt.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Approved By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:Nt,onChange:rt=>Je(rt.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"table-responsive rounded table-nowrap border-bottom-0 border mb-3",children:[a.jsxs("table",{className:"table-sm table-bordered mb-0",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:T.map((rt,fr)=>a.jsxs("tr",{children:[a.jsx("td",{children:fr+1}),a.jsx("td",{children:a.jsx("input",{value:rt.materialId,readOnly:!0,className:"form-control form-control-sm",onClick:()=>{_e(fr),Lt(!0)},style:{cursor:"pointer",backgroundColor:"#f9f9f9"}})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.description,onChange:ar=>xa(fr,"description",ar.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:rt.quantity,onChange:ar=>xa(fr,"quantity",ar.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.baseUnit,onChange:ar=>xa(fr,"baseUnit",ar.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.orderUnit,onChange:ar=>xa(fr,"orderUnit",ar.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:rt.materialgroup,onChange:ar=>xa(fr,"materialgroup",ar.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:rt.price,onChange:ar=>xa(fr,"price",ar.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:rt.priceUnit,onChange:ar=>xa(fr,"priceUnit",ar.target.value),required:!0,className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"INR",children:"INR"}),a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EXTRA",children:"EXTRA"})]})}),a.jsx("td",{children:(rt.quantity*rt.price).toFixed(2)}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"date",value:rt.deliveryDate,onChange:ar=>xa(fr,"deliveryDate",ar.target.value)})}),a.jsx("td",{children:a.jsx("textarea",{className:"form-control form-control-sm",value:rt.note,onChange:ar=>xa(fr,"note",ar.target.value),maxLength:"250",rows:"2"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-outline-warning btn-sm",type:"button",onClick:()=>Va(fr),children:a.jsx("i",{className:"ti ti-trash"})})})]},fr))})]}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsxs("button",{type:"button",className:"btn btn-link",onClick:Oi,children:[a.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingFour",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Order Footer"})]})]})})})})}),a.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:Nl,children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{children:[a.jsx("i",{className:"fas fa-shipping-fast me-2"}),"Delivery Information"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Delivery Address:"}),a.jsx("textarea",{className:"form-control form-control-sm",value:D,onChange:rt=>E(rt.target.value),rows:"4",placeholder:"Enter complete delivery address..."})]})})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{className:"",children:[a.jsx("i",{className:"fas fa-calculator me-2"}),"Tax Calculation"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-xl-12  row",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select form-select-sm",onChange:rt=>{const fr=qe.find(ar=>ar.taxName===rt.target.value);if(Ke(fr),fr){const ar=fr.cgst||0,Er=fr.sgst||0,kr=fr.igst||0;lt(ar),Ae(Er),it(kr),Mr(T,ar,Er,kr,bt)}},children:[a.jsx("option",{value:"",children:"-- Select Tax Template --"}),qe.map(rt=>a.jsx("option",{value:rt.taxName,children:rt.taxName},rt._id))]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"CGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:Ge,onChange:rt=>on(rt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 mb-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:Mt,onChange:rt=>Ho(rt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 mb-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"IGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:ke,onChange:rt=>es(rt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 mb-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Discount:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:bt,onChange:rt=>Io(rt.target.value)})})]})]}),a.jsx("div",{className:"border-top ",children:a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-6",children:[a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("strong",{children:["₹",L]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"CGST:"}),a.jsxs("span",{children:["₹",At]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"SGST:"}),a.jsxs("span",{children:["₹",xe]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"IGST:"}),a.jsxs("span",{children:["₹",ve]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"Discount:"}),a.jsxs("span",{children:["- ₹",bt]})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("strong",{children:"Final Total:"}),a.jsxs("strong",{className:"text-success",children:["₹",Ft]})]})]})})})]})]})})]}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit PO"})})]})})})})})]}),vt&&a.jsx(Jr,{}),B&&a.jsx(ih,{}),G&&a.jsx(_f,{}),Mi&&a.jsx(wl,{})]})})]})}function hDe(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!0),o=localStorage.getItem("activeRole"),[l,c]=N.useState(""),[d,u]=N.useState({fromDate:"",toDate:""}),[h,m]=N.useState(!1),[p,v]=N.useState("poNumber"),[g,b]=N.useState([]),[y,C]=N.useState(1),[w]=N.useState(10),[k,S]=N.useState(!1),[D,E]=N.useState(null),[T,A]=N.useState({approvedBy:"",approvalDate:"",approvalComments:""}),[L,P]=N.useState(!1),[O,Z]=N.useState({poNumber:"",category:"",date:"",vendor:"",deliveryLocation:"",deliveryAddress:"",quotationNumber:"",items:[],remarks:"",notes:"",preparedby:"",cgst:0,sgst:0,igst:0,taxDiscount:0,total:0,finalTotal:0}),[z,K]=N.useState([]),[B,Q]=N.useState([]);N.useEffect(()=>{Y(),U(),J()},[]);const U=async()=>{try{const xe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear"),ve=await Oe.get("/api/vendors",{params:{companyId:xe,financialYear:he}});K(ve.data)}catch(xe){console.error("Error fetching vendors:",xe)}},J=async()=>{try{const xe=localStorage.getItem("selectedCompanyId"),he=await Oe.get("/api/po-categories",{params:{companyId:xe}});Q(he.data)}catch(xe){console.error("Error fetching categories:",xe)}},Y=()=>{i(!0);const xe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear");Oe.get("/api/purchase-orders",{params:{companyId:xe,financialYear:he}}).then(ve=>{const pe=ve.data.slice().sort((De,Ye)=>{const Nt=De.createdAt?new Date(De.createdAt):new Date(De.date||0),Je=Ye.createdAt?new Date(Ye.createdAt):new Date(Ye.date||0);return isNaN(Nt)&&isNaN(Je)?0:isNaN(Nt)?1:isNaN(Je)?-1:Je-Nt});t(pe),n(pe),i(!1)}).catch(ve=>{console.error("Error fetching POs:",ve),alert("Failed to fetch POs"),i(!1)})},oe=()=>{let xe=e;l.trim()&&(xe=xe.filter(he=>[he.poNumber,he.vendor,he.category,he.quotationNumber,he.deliveryLocation,he.deliveryAddress,he.date].some(pe=>pe&&pe.toString().toLowerCase().includes(l.toLowerCase())))),(d.fromDate||d.toDate)&&(xe=xe.filter(he=>{const ve=new Date(he.date),pe=d.fromDate?new Date(d.fromDate):null,De=d.toDate?new Date(d.toDate):null;De&&De.setHours(23,59,59,999);let Ye=!0;return pe&&ve<pe&&(Ye=!1),De&&ve>De&&(Ye=!1),Ye})),n(xe),C(1)},M=xe=>{c(xe.target.value)},V=(xe,he)=>{u(ve=>({...ve,[xe]:he}))},H=()=>{c(""),u({fromDate:"",toDate:""}),n(e),C(1)};N.useEffect(()=>{oe()},[l,d,e]);const ee=xe=>{const he=xe.target.value;if(c(he),he.trim()===""){b([]);return}const ve=e.filter(pe=>{switch(p){case"poNumber":return pe.poNumber?.toLowerCase().includes(he.toLowerCase());case"vendor":return pe.vendor?.toLowerCase().includes(he.toLowerCase());case"category":return pe.category?.toLowerCase().includes(he.toLowerCase());case"quotationNumber":return pe.quotationNumber?.toLowerCase().includes(he.toLowerCase());default:return pe.poNumber?.toLowerCase().includes(he.toLowerCase())}});b(ve)},re=()=>{b(e),c("")},ae=()=>{b([]),c("")},ne=xe=>{n([xe]),C(1),ie()},ie=()=>{m(!1),b([]),c("")},G=xe=>{Z({_id:xe._id,poNumber:xe.poNumber||"",category:xe.category||"",date:xe.date||"",vendor:xe.vendor||"",deliveryLocation:xe.deliveryLocation||"",deliveryAddress:xe.deliveryAddress||"",quotationNumber:xe.quotationNumber||"",items:xe.items||[],remarks:xe.remarks||"",notes:xe.notes||"",preparedby:xe.preparedby||"",cgst:xe.cgst||0,sgst:xe.sgst||0,igst:xe.igst||0,taxDiscount:xe.taxDiscount||0,total:xe.total||0,finalTotal:xe.finalTotal||0}),P(!0)},de=()=>{P(!1),Z({poNumber:"",category:"",date:"",vendor:"",deliveryLocation:"",deliveryAddress:"",quotationNumber:"",items:[],remarks:"",notes:"",preparedby:"",cgst:0,sgst:0,igst:0,taxDiscount:0,total:0,finalTotal:0})},X=(xe,he)=>{Z(ve=>({...ve,[xe]:he}))},le=(xe,he,ve)=>{const pe=[...O.items];if(pe[xe]={...pe[xe],[he]:ve},he==="price"||he==="quantity"){const De=he==="price"?parseFloat(ve)||0:parseFloat(pe[xe].price)||0,Ye=he==="quantity"?parseFloat(ve)||0:parseFloat(pe[xe].quantity)||0;pe[xe].total=De*Ye}Z(De=>({...De,items:pe})),se(pe)},Se=()=>{const xe={materialId:"",description:"",quantity:0,unit:"",price:0,deliveryDate:"",total:0};Z(he=>({...he,items:[...he.items,xe]}))},ue=xe=>{const he=O.items.filter((ve,pe)=>pe!==xe);Z(ve=>({...ve,items:he})),se(he)},se=(xe=O.items)=>{const he=xe.reduce((Je,Xe)=>Je+(parseFloat(Xe.price)||0)*(parseFloat(Xe.quantity)||0),0),ve=he*(parseFloat(O.cgst)||0)/100,pe=he*(parseFloat(O.sgst)||0)/100,De=he*(parseFloat(O.igst)||0)/100,Ye=parseFloat(O.taxDiscount)||0,Nt=he+ve+pe+De-Ye;Z(Je=>({...Je,total:he,finalTotal:Nt}))};N.useEffect(()=>{O.items.length>0&&se()},[O.cgst,O.sgst,O.igst,O.taxDiscount]);const ye=async()=>{try{if(!O.poNumber||!O.vendor){alert("Please fill in all required fields (PO Number and Vendor)");return}const xe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear"),ve={...O,companyId:xe,financialYear:he,updatedAt:new Date().toISOString()},pe=await Oe.put(`/api/purchase-orders/${O._id}`,ve),De=e.map(Ye=>Ye._id===O._id?pe.data:Ye);t(De),n(De.filter(Ye=>r.some(Nt=>Nt._id===Ye._id))),de(),alert("Purchase Order updated successfully!")}catch(xe){console.error("Error updating PO:",xe),alert(`Failed to update Purchase Order: ${xe.response?.data?.error||xe.message}`)}},Ne=xe=>{E(xe),A({approvedBy:"",approvalDate:"",approvalComments:""}),S(!0)},Ue=async()=>{try{if(!T.approvedBy||!T.approvalDate){alert("Please fill in all required approval fields");return}const xe=localStorage.getItem("selectedCompanyId"),he=localStorage.getItem("financialYear"),ve={status:"approved",approvedBy:T.approvedBy,approvalDate:T.approvalDate,approvalComments:T.approvalComments,companyId:xe,financialYear:he},pe=await Oe.put(`/api/purchase-orders/${D._id}/approve`,ve),De=e.map(Ye=>Ye._id===D._id?pe.data.purchaseOrder||pe.data:Ye);t(De),n(De.filter(Ye=>r.some(Nt=>Nt._id===Ye._id))),S(!1),E(null),alert("Purchase Order approved successfully!")}catch(xe){console.error("Error approving PO:",xe),alert(`Failed to approve Purchase Order: ${xe.response?.data?.error||xe.message}`)}},Qe=()=>{S(!1),E(null),A({approvedBy:"",approvalDate:"2025-01-02",approvalComments:""})},ot=y*w,xt=ot-w,Le=r.slice(xt,ot),dt=Math.ceil(r.length/w),Tt=xe=>C(xe),At=async xe=>{try{const he=localStorage.getItem("selectedCompanyId"),ve=localStorage.getItem("financialYear"),[pe,De]=await Promise.all([Oe.get(`/api/vendors/${xe.vendor}`,{params:{companyId:he,financialYear:ve}}),Oe.get(`/api/companies/${he}`)]),Ye=pe.data,Nt=De.data,Je=async lt=>{try{const Ae=`/api/image/${lt.includes("/")?lt.split("/").pop():lt}`,ke=await Oe.get(Ae,{responseType:"arraybuffer"});return`data:image/jpeg;base64,${btoa(new Uint8Array(ke.data).reduce((bt,Xt)=>bt+String.fromCharCode(Xt),""))}`}catch(Mt){return console.error("Error fetching image:",Mt),null}};let Xe=null;Nt.logo&&(Xe=await Je(Nt.logo));const Be=xe.items.map((lt,Mt)=>`
     <tr>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${Mt+1}</td>
       <td style="border: 1px solid #000; padding: 4px;">${lt.materialId||""}</td>
       <td style="border: 1px solid #000; padding: 4px;">${lt.description||""}</td>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${lt.deliveryDate||""}</td>
       <td style="text-align: center; border: 1px solid #000; padding: 4px;">${lt.quantity||""} ${lt.unit||""}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">₹${lt.price||0}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">₹${lt.price||0}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">₹${((lt.price||0)*(lt.quantity||0)).toFixed(2)}</td>
       <td style="text-align: right; border: 1px solid #000; padding: 4px;">₹${((lt.price||0)*(lt.quantity||0)).toFixed(2)}</td>
     </tr>
   `).join(""),qe=(()=>{if(xe.notes){if(typeof xe.notes=="string"){const lt=xe.notes.split(`
`).filter(Mt=>Mt.trim()!=="");if(lt.length>0)return lt.map((Mt,Ae)=>`
           <tr>
             <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">${Ae+1}.</td>
             <td style="border: 1px solid #000; padding: 4px;">${Mt.trim()}</td>
           </tr>
         `).join("")}else if(Array.isArray(xe.notes)&&xe.notes.length>0)return xe.notes.map((lt,Mt)=>`
         <tr>
           <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">${Mt+1}.</td>
           <td style="border: 1px solid #000; padding: 4px;">${lt}</td>
         </tr>
       `).join("")}return`
     <tr>
       <td style="border: 1px solid #000; padding: 4px; vertical-align: top; width: 30px;">-</td>
       <td style="border: 1px solid #000; padding: 4px; color: #666; font-style: italic;">No notes available</td>
     </tr>
   `})(),ft=xe.generalConditions&&xe.generalConditions.length>0?xe.generalConditions.map((lt,Mt)=>`
           <div style="margin-bottom: 8px;">
             <strong>${Mt+1}. ${lt.name}:</strong><br>
             ${lt.description}
           </div>
         `).join(""):"",Ie=lt=>{const Mt=["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"],Ae=["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],ke=["","","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];return lt===0?"Zero":lt<10?Mt[lt]:lt<20?Ae[lt-10]:lt<100?ke[Math.floor(lt/10)]+(lt%10?" "+Mt[lt%10]:""):lt<1e3?Mt[Math.floor(lt/100)]+" Hundred"+(lt%100?" "+Ie(lt%100):""):lt<1e5?Ie(Math.floor(lt/1e3))+" Thousand"+(lt%1e3?" "+Ie(lt%1e3):""):lt<1e7?Ie(Math.floor(lt/1e5))+" Lakh"+(lt%1e5?" "+Ie(lt%1e5):""):Ie(Math.floor(lt/1e7))+" Crore"+(lt%1e7?" "+Ie(lt%1e7):"")},Ke=`
     <!DOCTYPE html>
     <html>
     <head>
       <title>Purchase Order - ${xe.poNumber}</title>
       <style>
         @page {
           size: A4;
           margin: 0.5in;
         }
         body {
           font-family: Arial, sans-serif;
           font-size: 11px;
           line-height: 1.2;
           margin: 0;
           padding: 0;
           color: #000;
         }
         .header-table {
           width: 100%;
           border-collapse: collapse;
           border: 2px solid #000;
           margin-bottom: 0;
         }
         .header-table td {
           border: 1px solid #000;
           padding: 4px;
           vertical-align: top;
         }
         .main-table {
           width: 100%;
           border-collapse: collapse;
           border: 2px solid #000;
           margin-top: 0;
         }
         .main-table td, .main-table th {
           border: 1px solid #000;
           padding: 4px;
           vertical-align: top;
         }
         .center {
           text-align: center;
         }
         .bold {
           font-weight: bold;
         }
         .section-header {
           background-color: #f0f0f0;
           font-weight: bold;
           text-align: center;
           padding: 6px;
         }
         .amount-cell {
           text-align: right;
           padding-right: 8px;
         }
         .print-note {
           font-size: 10px;
           color: #666;
           text-align: center;
           margin-top: 10px;
         }
         .no-border {
           border: none !important;
         }
         .logo-img {
           max-width: 100px;
           max-height: 80px;
           object-fit: contain;
         }
         .general-conditions {
           padding: 8px;
           font-size: 10px;
           line-height: 1.3;
         }
       </style>
     </head>
     <body>
       <!-- Header Section -->
       <table class="header-table">
         <tr>
           <td colspan="6" class="section-header">PURCHASE ORDER</td>
         </tr>
         <tr>
           <td class="bold" style="width: 120px;">PO No.:</td>
           <td style="width: 150px;">${xe.poNumber}</td>
           <td rowspan="6" style="text-align: center; vertical-align: middle; width: 200px;">
           ${Xe?`<img src="${Xe}" alt="Company Logo" class="logo-img">`:'<div style="border: 1px dashed #ccc; padding: 20px; color: #999;">No Logo</div>'}
           </td>
         </tr>
         <tr>
           <td class="bold">PO Date:</td>
           <td>${xe.date}</td>
         </tr>
         <tr>
           <td class="bold">Rev. No.:</td>
           <td>${xe.revisionNumber||"1.0"}</td>
         </tr>
         <tr>
           <td class="bold">Rev. Date:</td>
           <td>${xe.revisionDate||xe.date}</td>
         </tr>
         <tr>
           <td class="bold">Ref No.:</td>
           <td>${xe.refNumber||""}</td>
         </tr>
         <tr>
           <td class="bold">Ref Date:</td>
           <td>${xe.refDate||xe.date}</td>
         </tr>
         <tr>
           <td class="bold">Supplier Details:</td>
           <td colspan="2">
             <strong>M/s. ${Ye.name1||Ye.name}</strong><br>
             ${Ye.address1||""}<br>
             ${Ye.address2||""}<br>
             ${Ye.city||""}, ${Ye.region||""}<br>
             ${Ye.country||""}<br>
             ${Ye.pincode||""}<br>
             Contact Details: ${Ye.contactNo||""}<br>
             ${Ye.email||""}
           </td>
         </tr>
         <tr>
           <td class="bold">GSTIN:</td>
           <td>${Nt.gstin||""}</td>
           <td></td>
         </tr>
       </table>
 
       <!-- Bill To and Ship To -->
       <table class="main-table">
         <tr>
           <td class="bold section-header">BILL TO:</td>
           <td class="bold section-header">SHIP TO:</td>
         </tr>
         <tr>
           <td style="width: 50%; padding: 8px;">
             <strong>M/s. ${Nt.name||""}</strong><br>
             ${Nt.address1||""}<br>
             ${Nt.address||""}<br>
             ${Nt.city||""} ${Nt.state||""}<br>
             <strong>Tel:</strong> ${Nt.phone||""}<br>
             <strong>Email:</strong> ${Nt.email||""}
           </td>
           <td style="width: 50%; padding: 8px;">
             <strong>M/s. ${Nt.name||""}</strong><br>
             ${Nt.address1||""}<br>
             ${Nt.address||""}<br>
             ${Nt.city||""} ${Nt.state||""}<br>
             <strong>Tel:</strong> ${Nt.phone||""}<br>
             <strong>Email:</strong> ${Nt.email||""}
           </td>
         </tr>
       </table>
 
       <!-- Items Section -->
       <table class="main-table">
         <tr>
           <td colspan="9" class="section-header">PLEASE SUPPLY THE FOLLOWING ITEMS AS PER THE DETAILS MENTIONED BELOW:</td>
         </tr>
         <tr class="bold" style="background-color: #f0f0f0;">
           <td class="center">SI No</td>
           <td class="center">Part No</td>
           <td class="center">Description</td>
           <td class="center">Schedule</td>
           <td class="center">Quantity & Unit</td>
           <td class="center">Unit Price</td>
           <td class="center">Unit Price (₹)</td>
           <td class="center">Int (₹)</td>
           <td class="center">Total</td>
         </tr>
         ${Be}
         <tr>
           <td colspan="6" class="bold">Basic Total:</td>
           <td class="amount-cell bold">₹${xe.total||0}</td>
           <td colspan="2"></td>
         </tr>
       </table>
 
       <!-- Notes Section -->
       <table class="main-table">
         <tr>
           <td colspan="2" class="section-header">NOTES:</td>
         </tr>
         ${qe}
       </table>
 
       <!-- Tax Summary -->
       <table class="main-table">
         <tr>
           <td style="width: 60%;">
             <strong>Total Amount (In Words):</strong><br>
             Rupees ${Ie(Math.floor(xe.finalTotal||xe.total||0))} Only
           </td>
           <td style="width: 40%;">
             <table style="width: 100%; border-collapse: collapse;">
               <tr>
                 <td class="no-border" style="padding: 2px;"><strong>SGST(${xe.sgst||0}%):</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;">₹${(xe.total*(xe.sgst||0)/100).toFixed(2)}</td>
               </tr>
               <tr>
                 <td class="no-border" style="padding: 2px;"><strong>CGST(${xe.cgst||0}%):</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;">₹${(xe.total*(xe.cgst||0)/100).toFixed(2)}</td>
               </tr>
               <tr style="border-top: 1px solid #000;">
                 <td class="no-border" style="padding: 2px;"><strong>Net Total:</strong></td>
                 <td class="no-border" style="padding: 2px; text-align: right;"><strong>₹${xe.finalTotal||xe.total||0}</strong></td>
               </tr>
             </table>
           </td>
         </tr>
       </table>
 
       <!-- Remarks -->
       <table class="main-table">
         <tr>
           <td class="bold" style="width: 100px;">REMARKS:</td>
           <td>${xe.remarks||""}</td>
         </tr>
       </table>
 
       <!-- Terms and Conditions -->
       <table class="main-table">
         <tr>
           <td style="width: 50%;">
             <strong>TERMS & CONDITIONS:</strong><br>
             <div class="general-conditions">
               ${ft||xe.termsAndConditions||""}
             </div>
           </td>
           <td style="width: 50%;">
             <strong>PREPARED BY:</strong> ${xe.preparedby||""}<br><br>
             <strong>APPROVED BY:</strong> ${xe.approvedBy||xe.approvedby||""}
           </td>
         </tr>
       </table>
 
       <div class="print-note">
         This is an electronically generated document and does not require signature.
       </div>
     </body>
     </html>
   `,Ge=window.open("","_blank","width=800,height=600");Ge.document.write(Ke),Ge.document.close(),Ge.focus(),Ge.onload=function(){Ge.print()}}catch(he){console.error("Error generating print:",he),alert("Error generating print. Please try again.")}},Vt=xe=>{switch(xe){case"approved":return a.jsx("span",{className:"badge bg-success",children:"Approved"});case"rejected":return a.jsx("span",{className:"badge bg-danger",children:"Rejected"});case"pending":return a.jsx("span",{className:"badge bg-warning",children:"Pending"});default:return a.jsx("span",{className:"badge bg-secondary",children:"Draft"})}};return s?a.jsx("div",{className:"content",children:a.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2",children:"Loading Purchase Orders..."})]})})}):a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Order Display"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Order Display"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6"}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Search All Fields"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search across all fields...",value:l,onChange:M})]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"From Date"}),a.jsx("input",{type:"date",className:"form-control",value:d.fromDate,onChange:xe=>V("fromDate",xe.target.value)})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"To Date"}),a.jsx("input",{type:"date",className:"form-control",value:d.toDate,onChange:xe=>V("toDate",xe.target.value)})]})]}),(l||d.fromDate||d.toDate)&&a.jsx("div",{className:"row mt-2",children:a.jsx("div",{className:"col-12",children:a.jsxs("button",{className:"btn btn-outline-secondary btn-sm",onClick:H,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear All Filters"]})})})]}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Quotation Number"}),a.jsx("th",{children:"Delivery Location"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Le.length>0?Le.map(xe=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:xe.poNumber})}),a.jsx("td",{children:xe.date}),a.jsx("td",{children:xe.vendor}),a.jsx("td",{children:xe.category}),a.jsx("td",{children:xe.quotationNumber}),a.jsx("td",{children:xe.deliveryLocation}),a.jsx("td",{children:Vt(xe.status)}),a.jsx("td",{children:a.jsxs("div",{className:"btn-group",role:"group",children:[a.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>G(xe),title:"Edit Purchase Order",disabled:xe.status==="approved",children:a.jsx("i",{className:"fas fa-edit"})}),xe.status!=="approved"&&o.toLowerCase()==="admin"&&a.jsx("button",{className:"btn btn-outline-success btn-sm",onClick:()=>Ne(xe),title:"Approve Purchase Order",children:a.jsx("i",{className:"fas fa-check"})}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>At(xe),title:"Print Purchase Order",children:a.jsx("i",{className:"fas fa-print"})})]})})]},xe._id)):a.jsx("tr",{children:a.jsxs("td",{colSpan:"8",className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-inbox fa-2x text-muted mb-2"}),a.jsx("p",{className:"text-muted mb-0",children:"No purchase orders found"}),(l||d.fromDate||d.toDate)&&a.jsxs("button",{className:"btn btn-outline-primary btn-sm mt-2",onClick:H,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear Filters"]})]})})})]})})})]}),dt>1&&a.jsx("nav",{"aria-label":"Purchase Orders pagination",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${y===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>Tt(y-1),disabled:y===1,children:a.jsx("i",{className:"fas fa-chevron-left"})})}),Array.from({length:dt},(xe,he)=>he+1).map(xe=>a.jsx("li",{className:`page-item ${y===xe?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>Tt(xe),children:xe})},xe)),a.jsx("li",{className:`page-item ${y===dt?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>Tt(y+1),disabled:y===dt,children:a.jsx("i",{className:"fas fa-chevron-right"})})})]})}),L&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-edit me-2"}),"Edit Purchase Order - ",O.poNumber]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:de})]}),a.jsxs("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[a.jsxs("div",{className:"row mb-4",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("h6",{className:"text-primary mb-3",children:[a.jsx("i",{className:"fas fa-info-circle me-2"}),"Basic Information"]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label",children:["PO Number ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",className:"form-control",value:O.poNumber,onChange:xe=>X("poNumber",xe.target.value),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label",children:["Date ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"date",className:"form-control",value:O.date,onChange:xe=>X("date",xe.target.value),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:O.category,onChange:xe=>X("category",xe.target.value),children:[a.jsx("option",{value:"",children:"Select Category"}),B.map(xe=>a.jsx("option",{value:xe.name,children:xe.name},xe._id))]})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsxs("h6",{className:"text-primary mb-3",children:[a.jsx("i",{className:"fas fa-truck me-2"}),"Delivery Information"]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label",children:["Vendor ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("select",{className:"form-select",value:O.vendor,onChange:xe=>X("vendor",xe.target.value),required:!0,children:[a.jsx("option",{value:"",children:"Select Vendor"}),z.map(xe=>a.jsx("option",{value:xe.name,children:xe.name},xe._id))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Delivery Location"}),a.jsx("input",{type:"text",className:"form-control",value:O.deliveryLocation,onChange:xe=>X("deliveryLocation",xe.target.value)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Delivery Address"}),a.jsx("textarea",{className:"form-control",rows:"2",value:O.deliveryAddress,onChange:xe=>X("deliveryAddress",xe.target.value)})]})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[a.jsxs("h6",{className:"text-primary mb-0",children:[a.jsx("i",{className:"fas fa-list me-2"}),"Items (",O.items.length,")"]}),a.jsxs("button",{type:"button",className:"btn btn-success btn-sm",onClick:Se,children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Add Item"]})]}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:O.items.map((xe,he)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:xe.materialId||"",onChange:ve=>le(he,"materialId",ve.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:xe.description||"",onChange:ve=>le(he,"description",ve.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:xe.quantity||"",onChange:ve=>le(he,"quantity",ve.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:xe.unit||"",onChange:ve=>le(he,"unit",ve.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",step:"0.01",className:"form-control form-control-sm",value:xe.price||"",onChange:ve=>le(he,"price",ve.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:xe.deliveryDate||"",onChange:ve=>le(he,"deliveryDate",ve.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:((parseFloat(xe.price)||0)*(parseFloat(xe.quantity)||0)).toFixed(2),readOnly:!0})}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>ue(he),disabled:O.items.length<=1,children:a.jsx("i",{className:"fas fa-trash"})})})]},he))})]})})]}),a.jsxs("div",{className:"row mb-4",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("h6",{className:"text-primary mb-3",children:[a.jsx("i",{className:"fas fa-percentage me-2"}),"Tax Information"]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"CGST (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:O.cgst,onChange:xe=>X("cgst",xe.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"SGST (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:O.sgst,onChange:xe=>X("sgst",xe.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"IGST (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:O.igst,onChange:xe=>X("igst",xe.target.value)})]})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsxs("h6",{className:"text-primary mb-3",children:[a.jsx("i",{className:"fas fa-calculator me-2"}),"Totals"]}),a.jsx("div",{className:"card bg-light",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("strong",{children:"Subtotal:"}),a.jsxs("span",{children:["₹",O.total.toFixed(2)]})]}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("span",{children:["CGST (",O.cgst,"%):"]}),a.jsxs("span",{children:["₹",(O.total*O.cgst/100).toFixed(2)]})]}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("span",{children:["SGST (",O.sgst,"%):"]}),a.jsxs("span",{children:["₹",(O.total*O.sgst/100).toFixed(2)]})]}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("span",{children:["IGST (",O.igst,"%):"]}),a.jsxs("span",{children:["₹",(O.total*O.igst/100).toFixed(2)]})]}),a.jsx("hr",{}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("strong",{children:"Final Total:"}),a.jsxs("strong",{children:["₹",O.finalTotal.toFixed(2)]})]})]})})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Quotation Number"}),a.jsx("input",{type:"text",className:"form-control",value:O.quotationNumber,onChange:xe=>X("quotationNumber",xe.target.value)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Prepared By"}),a.jsx("input",{type:"text",className:"form-control",value:O.preparedby,onChange:xe=>X("preparedby",xe.target.value)})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Remarks"}),a.jsx("textarea",{className:"form-control",rows:"2",value:O.remarks,onChange:xe=>X("remarks",xe.target.value)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Notes"}),a.jsx("textarea",{className:"form-control",rows:"2",value:O.notes,onChange:xe=>X("notes",xe.target.value)})]})]})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:de,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Cancel"]}),a.jsxs("button",{type:"button",className:"btn btn-primary",onClick:ye,disabled:!O.poNumber||!O.vendor,children:[a.jsx("i",{className:"fas fa-save me-1"}),"Update Purchase Order"]})]})]})})}),k&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-success text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-check me-2"}),"Approve Purchase Order"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Qe})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"PO Number:"})," ",D?.poNumber]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Vendor:"})," ",D?.vendor]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Total Amount:"})," ₹",(D?.finalTotal||D?.total||0).toLocaleString("en-IN")]}),a.jsx("hr",{}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label",children:["Approved By ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",className:"form-control",value:T.approvedBy,onChange:xe=>A(he=>({...he,approvedBy:xe.target.value})),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("label",{className:"form-label",children:["Approval Date ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"date",className:"form-control",value:T.approvalDate,onChange:xe=>A(he=>({...he,approvalDate:xe.target.value})),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Comments (Optional)"}),a.jsx("textarea",{className:"form-control",rows:"3",value:T.approvalComments,onChange:xe=>A(he=>({...he,approvalComments:xe.target.value})),placeholder:"Enter approval comments..."})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Qe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Cancel"]}),a.jsxs("button",{type:"button",className:"btn btn-success",onClick:Ue,disabled:!T.approvedBy||!T.approvalDate,children:[a.jsx("i",{className:"fas fa-check me-1"}),"Approve Purchase Order"]})]})]})})}),h&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Orders"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:ie})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search By"}),a.jsxs("select",{className:"form-select",value:p,onChange:xe=>v(xe.target.value),children:[a.jsx("option",{value:"poNumber",children:"PO Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"category",children:"Category"}),a.jsx("option",{value:"quotationNumber",children:"Quotation Number"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${p==="poNumber"?"PO Number":p}...`,value:l,onChange:ee})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:re,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ae,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:g.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:g.map((xe,he)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:xe.poNumber})}),a.jsx("td",{children:xe.date}),a.jsx("td",{children:xe.vendor}),a.jsx("td",{children:xe.category}),a.jsx("td",{children:Vt(xe.status)}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ne(xe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},he))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No purchase orders loaded from API":l?`No purchase orders found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:ie,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const O8=["Piece","Box","Kg","Ltr"],fDe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(null),[s,i]=N.useState(!1),[o,l]=N.useState([]),[c,d]=N.useState(!1),[u,h]=N.useState(null),[m,p]=N.useState(""),[v,g]=N.useState(""),[b,y]=N.useState([]),[C,w]=N.useState(""),[k,S]=N.useState(""),[D,E]=N.useState(""),[T,A]=N.useState(new Date().toISOString().split("T")[0]),[L,P]=N.useState([{materialId:"",description:"",baseUnit:"",orderUnit:"",materialgroup:"",qty:"",deliveryDate:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0},{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0}]),[O,Z]=N.useState(!1),[z,K]=N.useState(""),[B,Q]=N.useState([]),[U,J]=N.useState("materialId"),[Y,oe]=N.useState(null),[M,V]=N.useState(1),[H]=N.useState(5),ee="MMNR-",re=localStorage.getItem("selectedCompanyId"),ae=localStorage.getItem("financialYear"),ne=localStorage.getItem("selectedCompanyId");N.useEffect(()=>{Oe.get("/api/material",{params:{companyId:re,financialYear:ae}}).then(xe=>{const he=xe.data.filter(ve=>!ve.isDeleted&&!ve.isBlocked);console.log("Filtered materials:",he),t(he)}).catch(xe=>console.error(xe)),Oe.get("/api/locations",{params:{companyId:re,financialYear:ae}}).then(xe=>l(xe.data))},[]),N.useEffect(()=>{Oe.get("/api/salecategory",{params:{companyId:re,financialYear:ae}}).then(xe=>y(xe.data)).catch(xe=>console.error(xe))},[]);const ie=()=>{P(xe=>[...xe,{materialId:"",description:"",baseUnit:"",orderUnit:"",location:"",materialgroup:"",qty:"",deliveryDate:"",salesGroup:"",isManual:!0}])},G=xe=>{P(ve=>ve.filter((pe,De)=>De!==xe));const he=Math.ceil((L.length-1)/H);M>he&&he>0&&V(he)},de=async(xe,he,ve)=>{const pe=[...L];if(pe[xe][he]=ve,he==="materialId"&&pe[xe].isManual)try{const Ye=(await Oe.get(`/api/material/byId/${ve}`)).data;Ye&&(pe[xe]={...pe[xe],materialId:Ye.materialId,description:Ye.description,baseUnit:Ye.baseUnit,orderUnit:Ye.orderUnit,location:Ye.location,materialgroup:Ye.materialgroup,isManual:!0})}catch{console.error("Material ID not found:",ve)}P(pe)},X=()=>{if(!z.trim()){Q([]);return}if(console.log("Searching with query:",z,"Type:",U),console.log("Available materials:",e),U==="materialId"){let xe=z;/^\d+$/.test(z)&&(xe=ee+z);const he=e.filter(ve=>(ve.materialId||"").toLowerCase().includes(xe.toLowerCase()));console.log("Filtered results for materialId:",he),Q(he)}else{const xe=e.filter(he=>(he.description||"").toLowerCase().includes(z.toLowerCase()));console.log("Filtered results for description:",xe),Q(xe)}};N.useEffect(()=>{const xe=setTimeout(()=>{z.trim()?X():Q([])},300);return()=>clearTimeout(xe)},[z,U,e]);const le=xe=>{const he=xe.target.value;K(he)},Se=()=>{Q(e),K("")},ue=()=>{Q([]),K("")},se=xe=>{oe(xe),Z(!0),K(""),Q([])},ye=()=>{Z(!1),oe(null),K(""),Q([])},Ne=xe=>{if(Y!==null){const he=[...L];he[Y]={...he[Y],materialId:xe.materialId,description:xe.description,baseUnit:xe.baseUnit,orderUnit:xe.orderUnit,location:xe.location,materialgroup:xe.materialgroup,isManual:!0},P(he)}ye()},Ue=async()=>{if(!C){alert("Please select a purchase category");return}if(!k||!D){alert("Please fill in Location and Buyer Group");return}const xe=L.filter(ve=>ve.materialId&&ve.materialId.trim()!==""&&ve.description&&ve.description.trim()!==""&&ve.qty&&ve.qty>0);if(xe.length===0){alert("Please add at least one valid item with Material ID, Description, and Quantity");return}const he=b.find(ve=>ve.name===C||ve.categoryName===C||ve._id===C);try{const ve={indentIdType:m,externalIndentId:v,categoryId:he._id,categoryName:he.name||he.categoryName,location:k,salesGroup:D,documentDate:T,items:xe,companyId:ne,financialYear:ae};if(m==="")h(ve),d(!1),i(!0);else{if(m==="internal"){const pe=await Oe.post("/api/salerequest/create",ve);alert(`Indent saved successfully with ID: ${pe.data.indentId}`)}else if(m==="external"){if(!v||v.trim()===""){alert("Please enter an External Indent ID");return}ve.indentId=v;const pe=await Oe.post("/api/indent/create",ve);alert(`Indent saved successfully with External ID: ${pe.data.indentId}`)}else alert(`Indent saved successfully with ID: ${res.data.indentId}`);i(!1),P([]),S(""),E(""),A(new Date().toISOString().split("T")[0]),V(1)}}catch(ve){console.error(ve),alert("Failed to save indent")}},Qe=M*H,ot=Qe-H,xt=L.slice(ot,Qe),Le=Math.ceil(L.length/H),dt=xe=>V(xe),Tt=({currentPage:xe,totalPages:he,onPageChange:ve,size:pe="normal"})=>{if(he<=1)return null;const De=[],Ye=5;let Nt=Math.max(1,xe-Math.floor(Ye/2)),Je=Math.min(he,Nt+Ye-1);Je-Nt+1<Ye&&(Nt=Math.max(1,Je-Ye+1));for(let Be=Nt;Be<=Je;Be++)De.push(Be);const Xe=pe==="small"?"btn-sm":"";return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${xe===1?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Xe}`,onClick:()=>ve(xe-1),disabled:xe===1,children:"Previous"})}),Nt>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Xe}`,onClick:()=>ve(1),children:"1"})}),Nt>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Xe}`,children:"..."})})]}),De.map(Be=>a.jsx("li",{className:`page-item ${xe===Be?"active":""}`,children:a.jsx("button",{className:`page-link ${Xe}`,onClick:()=>ve(Be),children:Be})},Be)),Je<he&&a.jsxs(a.Fragment,{children:[Je<he-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:`page-link ${Xe}`,children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:`page-link ${Xe}`,onClick:()=>ve(he),children:he})})]}),a.jsx("li",{className:`page-item ${xe===he?"disabled":""}`,children:a.jsx("button",{className:`page-link ${Xe}`,onClick:()=>ve(xe+1),disabled:xe===he,children:"Next"})})]})})},At=()=>{i(!1),p(""),g(""),h(null),d(!0)},Vt=xe=>{p(xe),xe==="internal"&&Ue()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto ",children:[a.jsx("h2",{className:"mb-1",children:"Sales Enquiry"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Enquiry"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Indent Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Sales Category ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select form-select-lg",value:C,onChange:xe=>w(xe.target.value),children:[a.jsx("option",{value:"",children:"-- Select Category --"}),b.map((xe,he)=>a.jsx("option",{value:xe.name||xe.categoryName||xe._id,children:xe.name||xe.categoryName||`Category ${he+1}`},he))]})})]}),a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Doc Date ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:xe=>A(xe.target.value)})})]}),a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Location ",a.jsx("span",{className:"text-danger",children:"*"})]})})," ",a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select form-control-sm",value:k,onChange:xe=>S(xe.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),o.map((xe,he)=>a.jsx("option",{value:xe.name||xe._id,children:xe.name||xe._id},he))]})})]}),a.jsxs("div",{className:"col-md-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{className:"form-label fw-bold",children:["Sales Group ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:D,onChange:xe=>E(xe.target.value),placeholder:"Buyer Group"})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"}),a.jsxs("span",{className:"badge bg-light rounded-pill ms-2",children:["(",L.length,")"]})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsx("div",{className:"card-body p-0",children:L.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",style:{maxHeight:"400px",overflowY:"auto"},children:a.jsxs("table",{className:"table-sm table-bordered table-striped mb-0",children:[a.jsx("thead",{className:" sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"S.No"}),a.jsx("th",{children:"Material No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:xt.map((xe,he)=>{const ve=ot+he;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center fw-bold",children:ve+1}),a.jsx("td",{children:xe.isManual?a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm",value:xe.materialId,onChange:pe=>de(ve,"materialId",pe.target.value),placeholder:"Material ID"}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>se(ve),title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]}):a.jsx("span",{className:"badge ",children:xe.materialId})}),a.jsx("td",{children:xe.isManual?a.jsx("input",{className:"form-control form-control-sm",value:xe.description,onChange:pe=>de(ve,"description",pe.target.value),placeholder:"Description",readOnly:!!xe.materialId}):a.jsx("span",{title:xe.description,children:xe.description})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:xe.qty,onChange:pe=>de(ve,"qty",pe.target.value),min:"1"})}),a.jsx("td",{children:a.jsxs("select",{value:xe.baseUnit,onChange:pe=>de(ve,"baseUnit",pe.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),O8.map(pe=>a.jsx("option",{value:pe,children:pe},pe))]})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:xe.deliveryDate,onChange:pe=>de(ve,"deliveryDate",pe.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:xe.orderUnit,onChange:pe=>de(ve,"orderUnit",pe.target.value),className:"form-select form-select-sm",children:[a.jsx("option",{value:"",children:"--Select--"}),O8.map(pe=>a.jsx("option",{value:pe,children:pe},pe))]})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:xe.materialgroup||"-"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-outline-warning btn-sm",onClick:()=>G(ve),title:"Delete Item",children:a.jsx("i",{className:"fas fa-trash"})})})]},ve)})})]})}),a.jsx("div",{className:"card-footer bg-light",children:a.jsx(Tt,{currentPage:M,totalPages:Le,onPageChange:dt,size:"small"})})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No materials selected. Click "Add Manual Entry" to start.'})]})}),a.jsx("div",{className:"col-md-6 d-flex align-items-end",children:a.jsxs("button",{onClick:ie,className:"btn btn-outline-primary me-2 btn-sm",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Add Manual Entry"]})})]})})})]})]}),a.jsxs("button",{onClick:Ue,className:"btn btn-success btn-sm",disabled:!C||L.length===0,children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Indent"]}),O&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:ye})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:U,onChange:xe=>J(xe.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:U==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:z,onChange:le})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Se,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),B.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ue,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:B.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:B.map((xe,he)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge ",children:xe.materialId})}),a.jsx("td",{children:xe.description}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:xe.baseUnit})}),a.jsx("td",{children:xe.location}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:xe.materialgroup})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ne(xe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},he))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No materials loaded from API":z?`No materials found matching "${z}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:ye,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Indent ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:At,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Indent ID:"}),m==="external"?a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"External Indent ID"}),a.jsx("input",{type:"text",className:"form-control form-control-sm",value:v,onChange:xe=>g(xe.target.value),maxLength:50,required:!0,placeholder:"Enter custom Indent ID (max 50 characters)"}),a.jsxs("small",{className:"form-text text-muted",children:[v.length,"/50 characters"]})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-primary",onClick:Ue,disabled:!v.trim(),children:"Create Indent"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>p(""),children:"Back"})]})]}):a.jsx("div",{className:"text-center",children:a.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>Vt("internal"),children:[a.jsx("i",{className:"ti ti-settings me-2"}),"Internal (Auto-generated ID)"]}),a.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>Vt("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External(Custom ID)"]})]})})]})]})})})]})]})},mDe=()=>{const[e,t]=N.useState(1),[r]=N.useState(10),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(""),[d,u]=N.useState("indentId"),[h,m]=N.useState(!1),[p,v]=N.useState(!1),[g,b]=N.useState([]),[y,C]=N.useState(null),[w,k]=N.useState(null),S=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear");N.useEffect(()=>{E()},[]);const E=()=>{m(!0),Oe.get("/api/salerequest/get",{params:{companyId:S,financialYear:D}}).then(V=>{const H=V.data.sort((ee,re)=>new Date(re.createdAt||re.documentDate)-new Date(ee.createdAt||ee.documentDate));s(H),o(H)}).catch(V=>console.error("Failed to fetch saved indents",V)).finally(()=>m(!1))},T=async(V,H,ee)=>{try{const re={[H]:ee};await Oe.put(`/api/salerequest/status/${V}`,re);const ae=ne=>ne.map(ie=>ie._id===V?{...ie,[H]:ee}:ie);s(ae),o(ne=>ae(ne)),alert("Status updated successfully!")}catch(re){console.error("Error updating status:",re),alert("Failed to update status!")}},A=()=>{v(!0),b(n)},L=()=>{v(!1),c(""),b([])},P=V=>{const H=V.target.value;if(c(H),H.trim()===""){b(n);return}const ee=n.filter(re=>{if(d==="indentId"){const ae=H.toLowerCase(),ne=re.indentId.toLowerCase();return ne.includes(ae)||ne.replace(/[^0-9]/g,"").includes(ae.replace(/[^0-9]/g,""))}else{if(d==="location")return re.location.toLowerCase().includes(H.toLowerCase());if(d==="buyerGroup")return re.buyerGroup.toLowerCase().includes(H.toLowerCase());if(d==="categoryName")return re.categoryName.toLowerCase().includes(H.toLowerCase())}return!1});b(ee)};N.useEffect(()=>{const V=n.find(H=>H._id===y);k(V)},[y,n]);const O=()=>{b(n),c("")},Z=()=>{b([]),c("")},z=V=>{o([V]),t(1),L()},K=()=>{o(n),t(1)},B=V=>{const H=`
            <div style="padding: 20px; font-family: Arial, sans-serif;">
                <h2 style="text-align: center; color: #333; border-bottom: 2px solid #007bff; padding-bottom: 10px;">
                    Purchase Indent Details
                </h2>
                
                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Indent Information</h3>
                    <table style="width: 100%; border-collapse: collapse; margin: 10px 0;">
                        <tr>
                            <td style="padding: 8px; font-weight: bold; width: 150px;">Indent ID:</td>
                            <td style="padding: 8px;">${V.indentId}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Document Date:</td>
                            <td style="padding: 8px;">${new Date(V.documentDate).toLocaleDateString()}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Category:</td>
                            <td style="padding: 8px;">${V.categoryName}</td>
                        </tr>
                        <tr style="background-color: #f8f9fa;">
                            <td style="padding: 8px; font-weight: bold;">Location:</td>
                            <td style="padding: 8px;">${V.location}</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; font-weight: bold;">Buyer Group:</td>
                            <td style="padding: 8px;">${V.buyerGroup}</td>
                        </tr>
                    </table>
                </div>

                <div style="margin: 20px 0;">
                    <h3 style="color: #007bff;">Material Details</h3>
                    <table style="width: 100%; border-collapse: collapse; border: 1px solid #ddd;">
                        <thead>
                            <tr style="background-color: #007bff; color: white;">
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">S.No</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material ID</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Description</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Qty</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Base Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Order Unit</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Delivery Date</th>
                                <th style="border: 1px solid #ddd; padding: 8px; text-align: left;">Material Group</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${V.items.map((re,ae)=>`
                                <tr style="${ae%2===0?"background-color: #f8f9fa;":""}">
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${ae+1}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.materialId}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.description}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px; text-align: center;">${re.qty}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.baseUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.orderUnit}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.deliveryDate}</td>
                                    <td style="border: 1px solid #ddd; padding: 8px;">${re.materialgroup||"-"}</td>
                                </tr>
                            `).join("")}
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px; text-align: center; color: #666; font-size: 12px;">
                    Generated on: ${new Date().toLocaleString()}
                </div>
            </div>
        `,ee=window.open("","","width=900,height=700");ee.document.write("<html><head><title>Indent Print - "+V.indentId+"</title></head><body>"),ee.document.write(H),ee.document.write("</body></html>"),ee.document.close(),ee.print()},Q=e*r,U=Q-r,J=i.slice(U,Q),Y=Math.ceil(i.length/r),oe=V=>t(V),M=({currentPage:V,totalPages:H,onPageChange:ee})=>{if(H<=1)return null;const re=[],ae=5;let ne=Math.max(1,V-Math.floor(ae/2)),ie=Math.min(H,ne+ae-1);ie-ne+1<ae&&(ne=Math.max(1,ie-ae+1));for(let G=ne;G<=ie;G++)re.push(G);return a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-center mb-0",children:[a.jsx("li",{className:`page-item ${V===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ee(V-1),disabled:V===1,children:"Previous"})}),ne>1&&a.jsxs(a.Fragment,{children:[a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ee(1),children:"1"})}),ne>2&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})})]}),re.map(G=>a.jsx("li",{className:`page-item ${V===G?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ee(G),children:G})},G)),ie<H&&a.jsxs(a.Fragment,{children:[ie<H-1&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),a.jsx("li",{className:"page-item",children:a.jsx("button",{className:"page-link",onClick:()=>ee(H),children:H})})]}),a.jsx("li",{className:`page-item ${V===H?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ee(V+1),disabled:V===H,children:"Next"})})]})})};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Enquiry List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Enquiry List"})]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("div",{}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-light btn-sm",onClick:A,children:[a.jsx("i",{className:"fas fa-search me-1"}),"Search Indents"]}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-light btn-sm",onClick:K,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All"]})]})]}),a.jsx("div",{className:"card-body",children:h?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2 text-muted",children:"Loading indents..."})]}):J.length>0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table-sm table table-bordered align-middle",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"S.No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Sales Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Materials"}),a.jsx("th",{children:"Delete Status"}),a.jsx("th",{children:"Block Status"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:J.map((V,H)=>{const ee=U+H;return a.jsxs("tr",{children:[a.jsx("td",{className:"text-center",children:ee+1}),a.jsx("td",{children:V.indentId}),a.jsx("td",{children:new Date(V.documentDate).toLocaleDateString("en-IN")}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),V.location]}),a.jsx("td",{children:V.salesGroup}),a.jsx("td",{children:V.categoryName}),a.jsxs("td",{className:"text-center",children:[V.items.length," items"]}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:V.isDeleted||!1,onChange:re=>T(V._id,"isDeleted",re.target.checked)}),a.jsx("label",{className:"form-check-label",children:V.isDeleted?"Deleted":"Active"})]})}),a.jsx("td",{children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:V.isBlocked||!1,onChange:re=>T(V._id,"isBlocked",re.target.checked)}),a.jsx("label",{className:"form-check-label",children:V.isBlocked?"Blocked":"Active"})]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>B(V),title:"Print Indent",children:a.jsx("i",{className:"fas fa-print"})}),a.jsx("button",{type:"button",onClick:()=>C(V._id),className:"btn btn-outline-primary btn-sm ms-2","data-bs-toggle":"modal","data-bs-target":"#standard-modal",children:a.jsx("i",{className:"ti ti-eye"})})]})]},V._id)})})]})}),Y>1&&a.jsx("div",{className:"d-flex justify-content-center mt-4",children:a.jsx(M,{currentPage:e,totalPages:Y,onPageChange:oe})})]}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("h5",{className:"text-muted",children:i.length!==n.length?"Filtered results":"No indents available"}),a.jsx("p",{className:"text-muted",children:i.length!==n.length?`Showing ${i.length} filtered indents. Click "Show All" to see all indents.`:"No purchase indents have been created yet."}),i.length!==n.length&&a.jsxs("button",{className:"btn btn-outline-primary mt-2",onClick:K,children:[a.jsx("i",{className:"fas fa-list me-1"}),"Show All Indents"]})]})})]})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Purchase Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:L})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:d,onChange:V=>u(V.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"location",children:"Location"}),a.jsx("option",{value:"buyerGroup",children:"Buyer Group"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:d==="indentId"?"Enter Indent ID (e.g., INDENT-100001 or 100001)":`Search by ${d}...`,value:l,onChange:P})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:O,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),g.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Z,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:g.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Materials"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:g.map((V,H)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:V.indentId})}),a.jsx("td",{children:new Date(V.documentDate).toLocaleDateString("en-IN")}),a.jsxs("td",{children:[a.jsx("i",{className:"fas fa-map-marker-alt text-muted me-1"}),V.location]}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:V.buyerGroup})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-success",children:V.categoryName})}),a.jsx("td",{children:a.jsxs("span",{className:"badge bg-warning text-dark",children:[V.items.length," items"]})}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>z(V),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},H))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:n.length===0?"No indents loaded from API":l?`No indents found matching "${l}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:L,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx("div",{id:"standard-modal",className:"modal fade",tabindex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Quotation Items"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"table-responsive",children:w?.items?.length>0&&a.jsxs("table",{className:"table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Delivery Date"})]})}),a.jsx("tbody",{children:w?.items.map((V,H)=>a.jsxs("tr",{children:[a.jsx("td",{children:H+1}),a.jsx("td",{children:V.materialId}),a.jsx("td",{children:V.description}),a.jsx("td",{children:V.qty}),a.jsx("td",{children:V.baseUnit}),a.jsx("td",{children:V.orderUnit}),a.jsx("td",{children:V.location}),a.jsx("td",{children:new Date(V.deliveryDate).toLocaleDateString()})]},V._id))})]})})})]})})})]})};function pDe(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState(""),[u,h]=N.useState([]),[m,p]=N.useState(null),[v,g]=N.useState(null),[b,y]=N.useState(null),[C,w]=N.useState(""),[k,S]=N.useState(""),[D,E]=N.useState([]),[T,A]=N.useState(""),[L,P]=N.useState(""),[O,Z]=N.useState(""),[z,K]=N.useState(!1),[B,Q]=N.useState(!1),[U,J]=N.useState(!1),[Y,oe]=N.useState(null),[M,V]=N.useState(""),[H,ee]=N.useState([]),re=localStorage.getItem("selectedCompanyId"),ae=localStorage.getItem("financialYear"),ne=localStorage.getItem("selectedCompanyId");N.useEffect(()=>{Oe.get("/api/salerequest/get",{params:{companyId:re,financialYear:ae}}).then(he=>{const ve=he.data.filter(pe=>!pe.isBlocked&&!pe.isDeleted);t(ve)}).catch(console.error),Oe.get("/api/sale-quotation-categories",{params:{companyId:re,financialYear:ae}}).then(he=>n(he.data)).catch(console.error),Oe.get("/api/locations",{params:{companyId:re,financialYear:ae}}).then(he=>{console.log("Locations API response:",he.data),Array.isArray(he.data)?ee(he.data):he.data&&Array.isArray(he.data.locations)?ee(he.data.locations):ee([])}).catch(he=>{console.error("Failed to fetch locations:",he),ee([])}),console.log("location",M),Oe.get("/api/customers",{params:{companyId:re,financialYear:ae}}).then(he=>{const ve=he.data.filter(pe=>!pe.isBlocked&&!pe.isDeleted);i(ve)}).catch(console.error),Oe.get("/api/material").then(he=>l(he.data)).catch(console.error),ie()},[]);const ie=()=>{Oe.get("/api/salesquotations").then(he=>h(he.data)).catch(console.error)},G=he=>{p({label:he.indentId,value:he._id}),d(he.salesGroup||""),E(he.items.map(ve=>({...ve,customerName:b?.name1||"",price:"",unit:""}))),J(!1)},de=he=>{y({label:`${he.name1} ${he.name2}`,value:he._id}),E(ve=>ve.map(pe=>({...pe,customerName:he.name1}))),Q(!1)},X=he=>{const ve=[...D];ve[Y]={...ve[Y],materialId:he.materialId,description:he.description,baseUnit:he.baseUnit,unit:he.unit,price:he.price},E(ve),K(!1)},le=(he,ve,pe)=>{const De=[...D];De[he][ve]=pe,E(De)},Se=()=>{E(he=>[...he,{customerName:b?.label||"",materialId:"",description:"",qty:"",baseUnit:"",orderUnit:"",location:"",unit:"",price:""}])},[ue,se]=N.useState(!1),[ye,Ne]=N.useState("internal"),[Ue,Qe]=N.useState(""),ot=he=>{he.preventDefault(),se(!0)},xt=()=>{const he={indentId:m?.label,categoryId:v?.value,customerId:b?.value,note:C,companyId:ne,financialYear:ae,validityDate:k,salesGroup:c,location:M,items:D,quotationNumberType:ye,externalQuotationNumber:ye==="external"?Ue:null};Oe.post("/api/salesquotations",he).then(()=>{alert("Quotation saved successfully!"),ie(),dt(),se(!1),Ne("internal"),Qe("")}).catch(ve=>{console.error(ve),alert("Error saving quotation")})},Le=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-hashtag me-2"}),"Quotation Number Generation"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>se(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Quotation Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Ne("internal"),xt()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Ne("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),ye==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Quotation Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom quotation number (max 50 characters)",value:Ue,onChange:he=>{he.target.value.length<=50&&Qe(he.target.value)},onKeyPress:he=>{he.key==="Enter"&&Ue.trim()&&xt()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[Ue.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:xt,disabled:!Ue.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Quotation"]})})]})]})]})})})]}),dt=()=>{p(null),g(null),y(null),w(""),S(""),E([])},Tt=({children:he,onClose:ve})=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsx("h5",{className:"modal-title",children:"Select"}),a.jsx("button",{type:"button",className:"btn-close",onClick:ve})]}),a.jsx("div",{className:"modal-body",children:he})]})})}),At=()=>{const[he,ve]=N.useState([]),[pe,De]=N.useState("materialId"),Ye=Xe=>{const Be=Xe.target.value;A(Be);const qe=o.filter(ft=>(pe==="materialId"?ft.materialId:ft.description)?.toLowerCase().includes(Be.toLowerCase()));ve(qe)},Nt=()=>{ve(o),A("")},Je=()=>{ve([]),A("")};return a.jsxs(Tt,{onClose:()=>K(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:pe,onChange:Xe=>De(Xe.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:pe==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:T,onChange:Ye})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Nt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),he.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:he.map((Xe,Be)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Xe.materialId})}),a.jsx("td",{children:Xe.description}),a.jsx("td",{children:Xe.baseUnit}),a.jsx("td",{children:Xe.unit}),a.jsx("td",{children:Xe.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>X(Xe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Be))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":T?`No materials found matching "${T}"`:'Enter search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},Vt=()=>{const[he,ve]=N.useState("name1"),[pe,De]=N.useState([]),Ye=Xe=>{const Be=Xe.target.value;P(Be);const qe=s.filter(ft=>(he==="name1"?ft.name1:he==="city"?ft.city:he==="region"?ft.region:`${ft.name1} ${ft.name2}`)?.toLowerCase().includes(Be.toLowerCase()));De(qe)},Nt=()=>{De(s),P("")},Je=()=>{De([]),P("")};return a.jsxs(Tt,{onClose:()=>Q(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:he,onChange:Xe=>ve(Xe.target.value),children:[a.jsx("option",{value:"name1",children:"Name"}),a.jsx("option",{value:"city",children:"City"}),a.jsx("option",{value:"region",children:"Region"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Type to search...",value:L,onChange:Ye})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Nt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),pe.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:pe.map((Xe,Be)=>a.jsxs("tr",{children:[a.jsxs("td",{children:[Xe.name1," ",Xe.name2]}),a.jsx("td",{children:Xe.city}),a.jsx("td",{children:Xe.region}),a.jsx("td",{children:Xe.contactNo}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>de(Xe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Be))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:s.length===0?"No customers loaded":L?`No match found for "${L}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>Q(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},xe=()=>{const[he,ve]=N.useState([]),[pe,De]=N.useState("indentId"),[Ye,Nt]=N.useState(""),Je=qe=>{const ft=qe.target.value;Nt(ft);const Ie=e.filter(Ke=>(pe==="indentId"?Ke.indentId:pe==="categoryName"?Ke.categoryName:Ke.location)?.toLowerCase().includes(ft.toLowerCase()));ve(Ie)},Xe=()=>{ve(e),Nt("")},Be=()=>{ve([]),Nt("")};return a.jsxs(Tt,{onClose:()=>J(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:pe,onChange:qe=>De(qe.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"}),a.jsx("option",{value:"location",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search...",value:Ye,onChange:Je})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Xe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),he.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Be,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:he.map((qe,ft)=>a.jsxs("tr",{children:[a.jsx("td",{children:qe.indentId}),a.jsx("td",{children:qe.categoryName}),a.jsx("td",{children:qe.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>G(qe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ft))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No sales requests found":Ye?`No match for "${Ye}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>J(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Quotation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Quotation"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Quotation Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Request:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:m?.label||"",onChange:he=>{const ve=he.target.value;p({label:ve,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>J(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Customer:"})})," ",a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Customer",value:b?.label||"",onChange:he=>{const ve=he.target.value;y({label:ve,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>Q(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select",value:M,onChange:he=>V(he.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(H)&&H.map((he,ve)=>a.jsx("option",{value:he.name||he._id||he,children:he.name||he.locationName||he},ve))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("label",{className:"form-label",children:"Quotation Category:"})}),"  ",a.jsx("div",{className:"col-xl-5",children:a.jsxs("select",{className:"form-select",value:v?.value||"",onChange:he=>{const ve=he.target.value,pe=r.find(De=>De._id===ve);g(pe?{label:pe.categoryName,value:pe._id}:null)},children:[a.jsx("option",{value:"",children:"Select"}),r.map(he=>a.jsxs("option",{value:he._id,children:[he.categoryName," (",he.prefix,")"]},he._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Validity Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:k,onChange:he=>S(he.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:he=>d(he.target.value),placeholder:"Enter or edit Sales Group"})})]}),a.jsxs("div",{className:"col-xl-4 row",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{className:"form-label",children:"Notes"})})," ",a.jsx("div",{className:"col-xl-10",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:C,onChange:he=>w(he.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:ot,children:[a.jsx("div",{className:"table-responsive mb-3",children:a.jsxs("table",{className:"table-sm table-bordered mb-0",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:D.map((he,ve)=>a.jsxs("tr",{children:[a.jsx("td",{children:ve+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Material",value:he.materialId,onChange:pe=>le(ve,"materialId",pe.target.value)}),a.jsx("button",{className:"btn btn-outline-info",type:"button",title:"Search Material",onClick:()=>{oe(ve),K(!0)},children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.description,onChange:pe=>le(ve,"description",pe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:he.qty,onChange:pe=>le(ve,"qty",pe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.baseUnit,onChange:pe=>le(ve,"baseUnit",pe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.orderUnit,onChange:pe=>le(ve,"orderUnit",pe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.location,onChange:pe=>le(ve,"location",pe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.customerName,onChange:pe=>le(ve,"customerName",pe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:he.unit,onChange:pe=>le(ve,"unit",pe.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:he.price,onChange:pe=>le(ve,"price",pe.target.value)})})]},ve))})]})}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsx("button",{type:"button",className:"btn btn-link",onClick:Se,children:"+ Add Quotation Item"})})}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Quotation"})})]})})})})})]}),z&&a.jsx(At,{}),B&&a.jsx(Vt,{}),U&&a.jsx(xe,{}),ue&&a.jsx(Le,{})]})]})}function xDe(){const[e,t]=N.useState([]),[r,n]=N.useState(""),[s,i]=N.useState(1),o=10,l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear");N.useEffect(()=>{Oe.get("/api/salesquotations",{params:{companyId:l,financialYear:c}}).then(k=>{const S=k.data.sort((D,E)=>new Date(E.createdAt)-new Date(D.createdAt));t(S)}).catch(k=>{console.error("Failed to fetch quotations",k),alert("Error loading quotations")})},[]);const d=k=>{const S=window.open("","_blank"),D=`
      <html>
        <head>
          <title>Print Quotation</title>
          <style>
            body { font-family: Arial; padding: 20px; }
            h2 { margin-bottom: 5px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 6px; text-align: left; }
          </style>
        </head>
        <body>
          <h2>Quotation: ${k.quotationNumber}</h2>
          <p><strong>Indent ID:</strong> ${k.indentId}</p>
          <p><strong>Customer Name:</strong> ${k.customerName}</p>
          <p><strong>Validity Date:</strong> ${k.validityDate}</p>
          <p><strong>Note:</strong> ${k.note}</p>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Material ID</th>
                <th>Description</th>
                <th>Qty</th>
                <th>Base Unit</th>
                <th>Order Unit</th>
                <th>Location</th>
                <th>Unit</th>
                <th>Price</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${k.items.map((E,T)=>{const A=E.qty*parseFloat(E.price||0);return`
                    <tr>
                      <td>${T+1}</td>
                      <td>${E.materialId}</td>
                      <td>${E.description}</td>
                      <td>${E.qty}</td>
                      <td>${E.baseUnit}</td>
                      <td>${E.orderUnit}</td>
                      <td>${E.location}</td>
                      <td>${E.unit}</td>
                      <td>${E.price}</td>
                      <td>${A.toFixed(2)}</td>
                    </tr>
                  `}).join("")}
              <tr>
                <td colspan="9" style="text-align:right;"><strong>Grand Total</strong></td>
                <td><strong>${k.items.reduce((E,T)=>E+T.qty*parseFloat(T.price||0),0).toFixed(2)}</strong></td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;S.document.write(D),S.document.close(),S.print()},[u,h]=N.useState(""),[m,p]=N.useState(""),v=e.filter(k=>{const S=k.quotationNumber?.toLowerCase().includes(r.toLowerCase())||k.indentId?.toLowerCase().includes(r.toLowerCase())||k.customerName?.toLowerCase().includes(r.toLowerCase())||k.location?.toLowerCase().includes(r.toLowerCase()),D=new Date(k.createdAt),E=u?new Date(u):null,T=m?new Date(m):null,A=(!E||D>=E)&&(!T||D<=T);return S&&A}),g=s*o,b=g-o,y=v.slice(b,g),C=Math.ceil(v.length/o),w=k=>i(k);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Quotation List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item",children:"Sales Report"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Quotation List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6"}),a.jsx("div",{className:"col-xl-2",children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Quotation No, Indent ID or Customer Name",value:r,onChange:k=>{n(k.target.value),i(1)}})]})}),a.jsxs("div",{className:" col-xl-3  d-flex gap-2",children:[a.jsx("label",{children:"From:"}),a.jsx("input",{type:"date",className:"form-control",value:u,onChange:k=>{h(k.target.value),i(1)}}),a.jsx("label",{children:"To:"}),a.jsx("input",{type:"date",className:"form-control",value:m,onChange:k=>{p(k.target.value),i(1)}})]})]})}),a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Quotation No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Customer Name"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Validity Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:y.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-flex",children:k.quotationNumber}),a.jsx("td",{className:"text-flex",children:k.indentId}),a.jsx("td",{className:"text-flex",children:k.customerName}),a.jsx("td",{className:"text-flex",children:k.location}),a.jsx("td",{className:"text-flex",children:k.validityDate}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>d(k),children:[a.jsx("i",{className:"fas fa-print"})," Print"]})})]},S))})]})})]}),C>1&&a.jsx("nav",{className:"ms-auto",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{onClick:()=>w(s-1),className:"page-link",disabled:s===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const S=[],D=[];S.push(1);for(let A=Math.max(2,s-2);A<=Math.min(C-1,s+2);A++)S.push(A);C>1&&S.push(C);const E=[...new Set(S)].sort((A,L)=>A-L);let T;for(let A of E)T&&(A-T===2?D.push(T+1):A-T!==1&&D.push("...")),D.push(A),T=A;return D.map((A,L)=>A==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${L}`):a.jsx("li",{className:`page-item ${s===A?"active":""}`,children:a.jsx("button",{onClick:()=>w(A),className:"page-link",children:A})},A))})(),a.jsx("li",{className:`page-item ${s===C?"disabled":""}`,children:a.jsx("button",{onClick:()=>w(s+1),className:"page-link",disabled:s===C,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]})}function vDe(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState(""),[c,d]=N.useState(""),[u,h]=N.useState(new Date().toISOString().substring(0,10)),[m,p]=N.useState([]),[v,g]=N.useState(""),[b,y]=N.useState(""),[C,w]=N.useState(""),[k,S]=N.useState([]),[D,E]=N.useState(0),[T,A]=N.useState([]),[L,P]=N.useState([]),[O,Z]=N.useState([]),[z,K]=N.useState(""),[B,Q]=N.useState(!1),[U,J]=N.useState(""),[Y,oe]=N.useState([]),[M,V]=N.useState(!1),[H,ee]=N.useState(""),[re,ae]=N.useState([]),[ne,ie]=N.useState(""),[G,de]=N.useState(""),[X,le]=N.useState(""),[Se,ue]=N.useState(""),[se,ye]=N.useState(0),[Ne,Ue]=N.useState(0),[Qe,ot]=N.useState(0),[xt,Le]=N.useState([]),[dt,Tt]=N.useState([]),[At,Vt]=N.useState(null),[xe,he]=N.useState(0),[ve,pe]=N.useState(0),[De,Ye]=N.useState(0),[Nt,Je]=N.useState(0),[Xe,Be]=N.useState(0),[qe,ft]=N.useState([]),[Ie,Ke]=N.useState([]),[Ge,lt]=N.useState(!1),[Mt,Ae]=N.useState(""),[ke,it]=N.useState(null),bt=localStorage.getItem("selectedCompanyId"),Xt=localStorage.getItem("financialYear"),Ft=localStorage.getItem("selectedCompanyId");N.useEffect(()=>{Oe.get("/api/sales-order-categories",{params:{companyId:bt,financialYear:Xt}}).then(yt=>t(yt.data)),Oe.get("/api/salesquotations",{params:{companyId:bt,financialYear:Xt}}).then(yt=>{n(yt.data),Oe.get("/api/general-conditions",{params:{companyId:bt,financialYear:Xt}}).then(hr=>{const Yr=hr.data.filter(Mr=>!Mr.isDeleted).map(Mr=>({_id:Mr._id,name:Mr.name,description:Mr.description}));Le(Yr)});const mr=[];yt.data.forEach(hr=>{hr.items.forEach(Yr=>{Yr.salesGroup&&!mr.includes(Yr.salesGroup)&&mr.push(Yr.salesGroup)})}),Z(mr)}),Oe.get("/api/locations",{params:{companyId:bt,financialYear:Xt}}).then(yt=>p(yt.data)),Oe.get("/api/tax",{params:{companyId:bt,financialYear:Xt}}).then(yt=>Tt(yt.data)),Oe.get("/api/material",{params:{companyId:bt,financialYear:Xt}}).then(yt=>Ke(yt.data)),Oe.get("/api/customers",{params:{companyId:bt,financialYear:Xt}}).then(yt=>A(yt.data)),S([...Array(4).fill(null).map(()=>({materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",salesGroup:"",materialgroup:"",deliveryDate:new Date().toISOString().slice(0,10),note:""}))])},[]),console.log("customers",T);const rr=yt=>{console.log("Selected Quotation/Contract/Enquiry:",yt);const mr=hr=>hr?.map(Yr=>({...Yr,quantity:Yr.qty||Yr.quantity||0}))||[];yt.contractNumber?(l(yt.contractNumber),P(yt.customerName||""),y(yt.location||""),S(mr(yt.items)),ie(yt.salesGroup||"")):yt.quotationNumber?(l(yt.quotationNumber),P(yt.customerName||""),y(yt.location||""),S(mr(yt.items)),ie(yt.salesGroup||"")):yt.indentId&&(l(yt.indentId),y(yt.location||""),S(mr(yt.items)),ie(yt.salesGroup||"")),Q(!1)},pr=()=>{Q(!1),J(""),oe([])},jr=(yt,mr,hr)=>{mr.includes(yt)?hr(mr.filter(Yr=>Yr!==yt)):hr([...mr,yt])},vt=yt=>{if(ee(yt),yt.trim()){const mr=T.filter(hr=>hr.name1?.toLowerCase().includes(yt.toLowerCase())||hr.cnNo?.toLowerCase().includes(yt.toLowerCase()));ae(mr)}else ae([])},Lt=()=>{ae(T)},fe=yt=>{P(yt.name1||yt.customerName),V(!1),ee(""),ae([])},Me=yt=>{l(yt);const mr=r.find(hr=>hr.quotationNumber===yt);if(mr){P(mr.name1||mr.customerName),y(mr.items[0]?.location||"");const hr=mr.items.find(Mr=>Mr.salesGroup);hr&&setSalesGroup(hr.salesGroup);const Yr=mr.items.map(Mr=>({materialId:Mr.materialId,description:Mr.description,quantity:Mr.qty,baseUnit:Mr.baseUnit,unit:Mr.unit,orderUnit:Mr.orderUnit,price:Mr.price,priceUnit:Mr.priceUnit,materialgroup:Mr.materialgroup,deliveryDate:Mr.deliveryDate?String(Mr.deliveryDate).slice(0,10):new Date().toISOString().slice(0,10),note:Mr.note||""}));S(Yr),_e(Yr)}},Te=()=>{V(!1),ee(""),ae([])},_e=(yt,mr,hr,Yr,Mr)=>{const on=yt.reduce((Mi,_s)=>Mi+(_s.quantity||0)*(_s.price||0),0);E(on.toFixed(2));const Ho=mr!==void 0?mr:xe,es=hr!==void 0?hr:ve,Io=Yr!==void 0?Yr:De,xa=Mr!==void 0?Mr:Nt,ni=on*(parseFloat(Ho)||0)/100,Wo=on*(parseFloat(es)||0)/100,Go=on*(parseFloat(Io)||0)/100,Oi=parseFloat(xa)||0;ye(ni.toFixed(2)),Ue(Wo.toFixed(2)),ot(Go.toFixed(2));const Va=on+ni+Wo+Go-Oi;Be(Va.toFixed(2))},Fe=yt=>{he(yt),_e(k,yt,ve,De,Nt)},Ve=yt=>{pe(yt),_e(k,xe,yt,De,Nt)},mt=yt=>{Ye(yt),_e(k,xe,ve,yt,Nt)},wt=yt=>{Je(yt),_e(k,xe,ve,De,yt)},nt=(yt,mr,hr)=>{const Yr=[...k];Yr[yt][mr]=mr==="quantity"||mr==="price"?parseFloat(hr)||0:hr,S(Yr),_e(Yr,xe,ve,De,Nt)},St=()=>{S([...k,{materialId:"",description:"",quantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",salesGroup:"",materialGroup:"",note:"",deliveryDate:new Date().toISOString().slice(0,10)}])},Ct=yt=>{const mr=[...k];mr.splice(yt,1),S(mr),_e(mr)},[Jt,ir]=N.useState(!1),[xr,or]=N.useState("internal"),[ze,dr]=N.useState(""),[ur,Vr]=N.useState(""),va=async yt=>{if(yt.preventDefault(),!s||!o)return alert("Please select both category and quotation");ir(!0)},en=async(yt=null)=>{const mr=r.find(Yr=>Yr.quotationNumber===o),hr={soNumber:z,quotationId:mr?._id,quotationNumber:o,categoryId:s._id,category:s.categoryName,date:u,customerName:L,contactPerson:G,salesGroup:ne,payTerms:X,validityDate:Se,deliveryLocation:b,deliveryAddress:C,items:k,generalCondition:qe,companyId:Ft,financialYear:Xt,total:parseFloat(D)||0,taxName:At?.taxName||"",cgst:parseFloat(xe)||0,sgst:parseFloat(ve)||0,igst:parseFloat(De)||0,taxDiscount:parseFloat(Nt)||0,finalTotal:parseFloat(Xe)||0,soNumberType:yt?"external":"internal",customSONumber:yt};try{const Yr=await Oe.post("/api/sales-orders",hr);console.log("Saved SO:",Yr.data),i(null),l(""),h(new Date().toISOString().substring(0,10)),A(""),y(""),w(""),S([]),E(""),Vt(null),he(""),pe(""),Ye(""),Je(""),Be(""),le(""),ie(""),de(""),ir(!1),or("internal"),dr(""),Vr(""),alert("Sales Order Created Successfully with SO Number: "+Yr.data.soNumber)}catch(Yr){console.error("Error during SO creation:",Yr),alert("Failed to create Sales Order")}},zs=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Generate Sales Order Number"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{ir(!1),or("internal"),dr("")},"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the SO Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{or("internal"),en(null)},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>or("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),xr==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Custom SO Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter SO number (max 50 characters)",value:ze,onChange:yt=>dr(yt.target.value),onKeyPress:yt=>{yt.key==="Enter"&&ze.trim()&&en(ze)},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[ze.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:()=>en(ze),disabled:!ze.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Generate & Save SO"]})})]}),xr==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"alert alert-info",role:"alert",children:[a.jsx("i",{className:"fas fa-info-circle me-2"}),"SO number will be auto-generated based on category: ",a.jsx("strong",{children:s?.categoryName}),a.jsx("br",{}),a.jsxs("small",{children:["Range: ",s?.prefix,s?.rangeFrom," - ",s?.prefix,s?.rangeTo]})]})})]})]})})})]}),zn=()=>{const yt=Ie.filter(hr=>hr.materialId.toLowerCase().includes(Mt.toLowerCase())||hr.description.toLowerCase().includes(Mt.toLowerCase())),mr=hr=>{const Yr=[...k];Yr[ke]={...Yr[ke],materialId:hr.materialId,description:hr.description,baseUnit:hr.baseUnit,unit:hr.unit,price:hr.price,salesGroup:hr.salesGroup,materialgroup:hr.materialgroup},S(Yr),_e(Yr),lt(!1)};return a.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},children:a.jsxs("div",{style:{background:"white",padding:20,maxHeight:"80%",overflowY:"auto",width:"80%"},children:[a.jsx("h3",{children:"Select Material"}),a.jsx("input",{type:"text",placeholder:"Search by ID or Description",value:Mt,onChange:hr=>Ae(hr.target.value),style:{width:"100%",marginBottom:10}}),a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Price Unit"}),a.jsx("th",{children:"Sales Group"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Select"})]})}),a.jsx("tbody",{children:yt.map((hr,Yr)=>a.jsxs("tr",{children:[a.jsx("td",{children:hr.materialId}),a.jsx("td",{children:hr.description}),a.jsx("td",{children:hr.baseUnit}),a.jsx("td",{children:hr.unit}),a.jsx("td",{children:hr.price}),a.jsx("td",{children:hr.priceUnit}),a.jsx("td",{children:hr.salesGroup}),a.jsx("td",{children:hr.materialgroup}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-info",onClick:()=>mr(hr),children:"Select"})})]},Yr))})]}),a.jsx("button",{type:"button",className:"btn btn-sm btn-soft-danger",onClick:()=>lt(!1),style:{marginTop:10},children:"Close"})]})})};function fs({show:yt,onClose:mr,onSelect:hr,selectedTab:Yr="enquiry"}){const[Mr,on]=N.useState(Yr),[Ho,es]=N.useState(""),[Io,xa]=N.useState([]);N.useEffect(()=>{es(""),xa([]),ni()},[Mr]);const ni=async()=>{let Va="";Mr==="enquiry"?Va="/api/salerequest/get":Mr==="quotation"?Va="/api/salesquotations":Mr==="contract"&&(Va="/api/salescontracts");const Mi=await Oe.get(`${Va}`,{params:{companyId:bt,financialYear:Xt}});xa(Mi.data)},Wo=async Va=>{if(es(Va),!Va){ni();return}xa(Mi=>Mi.filter(_s=>(_s.quotationNumber||_s.enquiryNumber||_s.contractNumber||"").toLowerCase().includes(Va.toLowerCase())))},Go=Va=>Va.quotationNumber||Va.indentId||Va.contractNumber||"",Oi=Va=>new Date(Va.date||Va.validityDate||Va.createdAt||"").toLocaleDateString();return yt?a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),Mr==="enquiry"?"Search Enquiries":Mr==="quotation"?"Search Quotations":"Search Contracts"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:mr})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("ul",{className:"nav nav-tabs mb-3",children:[a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${Mr==="enquiry"?"active":""}`,onClick:()=>on("enquiry"),children:"Enquiry"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${Mr==="quotation"?"active":""}`,onClick:()=>on("quotation"),children:"Quotation"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${Mr==="contract"?"active":""}`,onClick:()=>on("contract"),children:"Contract"})})]}),a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Enter ${Mr} number...`,value:Ho,onChange:Va=>Wo(Va.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:ni,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Io.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Io.map((Va,Mi)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:Go(Va)})}),a.jsx("td",{children:Oi(Va)}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{hr(Va),mr()},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Mi))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Ho?`No ${Mr}s found matching "${Ho}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:mr,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}):null}const ks=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Customer"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Te})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Custmore"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:H,onChange:yt=>vt(yt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:Lt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:re.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer Code"}),a.jsx("th",{children:"Customer Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"address1"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:re.map((yt,mr)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:yt.cnNo})}),a.jsx("td",{children:yt.name1}),a.jsx("td",{children:yt.email}),a.jsx("td",{children:yt.address1}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>fe(yt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},mr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:H?`No vendors found matching "${H}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Te,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Order"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Order"})]})})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Sales Order Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Reference No:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter reference number",value:o,onChange:yt=>{l(yt.target.value),yt.target.value&&Me(yt.target.value)},required:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>Q(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SO Category:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",onChange:yt=>{const mr=e.find(hr=>hr._id===yt.target.value);i(mr)},required:!0,children:[a.jsx("option",{value:"",children:"-- Select Category --"}),e.map(yt=>a.jsx("option",{value:yt._id,children:yt.categoryName},yt._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SO Number:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:z,readOnly:!0})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SO Creating date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:u,onChange:yt=>h(yt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Customer:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:L,onChange:yt=>P(yt.target.value),placeholder:"Enter customer name"}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>V(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:b,onChange:yt=>y(yt.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),m.map(yt=>a.jsx("option",{value:yt.name||yt.locationName||yt._id,children:yt.name||yt.locationName||yt._id},yt._id||yt.id||yt.name))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:ne,onChange:yt=>ie(yt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:G,onChange:yt=>de(yt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Payment Terms:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("textarea",{className:"form-control form-control-sm",value:X,onChange:yt=>le(yt.target.value),maxLength:"250"})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Validity Date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:Se,onChange:yt=>ue(yt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select General Conditions"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:qe.length===0?"Select...":`${qe.length} selected`}),a.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:xt.map(yt=>a.jsx("div",{className:"dropdown-item-text",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:qe.includes(yt._id),onChange:()=>jr(yt._id,qe,ft)}),a.jsx("label",{className:"form-check-label ms-1",children:yt.name})]})},yt._id))})]})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",style:{width:"100%",tableLayout:"fixed"},children:a.jsxs("table",{className:" table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:k.map((yt,mr)=>a.jsxs("tr",{children:[a.jsx("td",{children:mr+1}),a.jsx("td",{children:a.jsx("input",{value:yt.materialId,readOnly:!0,className:"form-control form-control-sm",onClick:()=>{it(mr),lt(!0)},style:{cursor:"pointer",backgroundColor:"#f9f9f9"}})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:yt.description,onChange:hr=>nt(mr,"description",hr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:yt.quantity,onChange:hr=>nt(mr,"quantity",hr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:yt.baseUnit,onChange:hr=>nt(mr,"baseUnit",hr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:yt.orderUnit,onChange:hr=>nt(mr,"orderUnit",hr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:yt.materialgroup,onChange:hr=>nt(mr,"materialgroup",hr.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:yt.price,onChange:hr=>nt(mr,"price",hr.target.value)})}),a.jsx("td",{children:a.jsxs("select",{value:yt.priceUnit,onChange:hr=>nt(mr,"priceUnit",hr.target.value),required:!0,className:"form-select",children:[a.jsx("option",{value:"",children:"-- Select --"}),a.jsx("option",{value:"INR",children:"INR"}),a.jsx("option",{value:"USD",children:"USD"}),a.jsx("option",{value:"EXTRA",children:"EXTRA"})]})}),a.jsx("td",{children:(yt.quantity*yt.price).toFixed(2)}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"date",value:yt.deliveryDate,onChange:hr=>nt(mr,"deliveryDate",hr.target.value)})}),a.jsx("td",{children:a.jsx("textarea",{className:"form-control form-control-sm",value:yt.note,onChange:hr=>nt(mr,"note",hr.target.value),maxLength:"250",rows:"2"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-outline-warning",type:"button",onClick:()=>Ct(mr),children:a.jsx("i",{className:"ti ti-trash"})})})]},mr))})]})}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:St,style:{marginTop:10},children:"+ Add Item"})]})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingFour",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Order Footer"})]})]})})})})}),a.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:va,children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{children:[a.jsx("i",{className:"fas fa-shipping-fast me-2"}),"Delivery Information"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("label",{className:"form-label",children:"Delivery Address:"}),a.jsx("textarea",{className:"form-control form-control-sm",value:C,onChange:yt=>w(yt.target.value),rows:"4",placeholder:"Enter complete delivery address..."})]})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{children:[a.jsx("i",{className:"fas fa-calculator me-2"}),"Tax Calculation"]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-xl-6 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select",onChange:yt=>{const mr=dt.find(hr=>hr.taxName===yt.target.value);if(Vt(mr),mr){const hr=mr.cgst||0,Yr=mr.sgst||0,Mr=mr.igst||0;he(hr),pe(Yr),Ye(Mr),_e(k,hr,Yr,Mr,Nt)}},children:[a.jsx("option",{value:"",children:"-- Select Tax Template --"}),dt.map(yt=>a.jsx("option",{value:yt.taxName,children:yt.taxName},yt._id))]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"CGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:xe,onChange:yt=>Fe(yt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:ve,onChange:yt=>Ve(yt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"IGST (%):"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:De,onChange:yt=>mt(yt.target.value),step:"0.01"})})]}),a.jsxs("div",{className:"col-md-6 row ",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Tax Discount:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:Nt,onChange:yt=>wt(yt.target.value),step:"0.01"})})]})]}),a.jsx("div",{className:"border-top pt-3 ",children:a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-6",children:[a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("strong",{children:["₹",D]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"CGST:"}),a.jsxs("span",{children:["₹",se]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"SGST:"}),a.jsxs("span",{children:["₹",Ne]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"IGST:"}),a.jsxs("span",{children:["₹",Qe]})]}),a.jsxs("div",{className:"d-flex justify-content-between text-muted small",children:[a.jsx("span",{children:"Discount:"}),a.jsxs("span",{children:["- ₹",Nt]})]}),a.jsx("hr",{className:"my-2"}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("strong",{children:"Final Total:"}),a.jsxs("strong",{className:"text-success",children:["₹",Xe]})]})]})})})]})]})})]}),a.jsx("button",{type:"submit",className:"btn btn-success mb-6 mt-2",children:"Submit SO"})]})})})})})]}),Ge&&a.jsx(zn,{}),B&&a.jsx(fs,{show:B,onClose:pr,onSelect:rr}),M&&a.jsx(ks,{}),Jt&&a.jsx(zs,{})]})})]})})}function gDe(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!0),o=localStorage.getItem("selectedCompanyId")||"",l=localStorage.getItem("financialYear")||"",[c,d]=N.useState(""),[u,h]=N.useState(""),[m,p]=N.useState("");N.useEffect(()=>{const T=e.filter(A=>{const L=A.soNumber?.toLowerCase().includes(c.toLowerCase())||A.poNumber?.toLowerCase().includes(c.toLowerCase())||A.vendor?.toLowerCase().includes(c.toLowerCase())||A.customer?.toLowerCase().includes(c.toLowerCase())||A.category?.toLowerCase().includes(c.toLowerCase())||A.quotationNumber?.toLowerCase().includes(c.toLowerCase())||A.deliveryLocation?.toLowerCase().includes(c.toLowerCase())||A.deliveryAddress?.toLowerCase().includes(c.toLowerCase()),P=new Date(A.createdAt),O=u?new Date(u):null,Z=m?new Date(m):null,z=(!O||P>=O)&&(!Z||P<=Z);return L&&z});n(T)},[c,u,m,e]);const[v,g]=N.useState(1),[b]=N.useState(10);N.useEffect(()=>{y()},[]);const y=()=>{i(!0),Oe.get("/api/sales-orders",{params:{companyId:o,financialYear:l}}).then(T=>{const A=T.data.sort((L,P)=>new Date(P.createdAt)-new Date(L.createdAt));t(A),n(A),i(!1)}).catch(T=>{console.error("Error fetching POs:",T),alert("Failed to fetch POs"),i(!1)})},C=v*b,w=C-b,k=r.slice(w,C),S=Math.ceil(r.length/b),D=T=>g(T),E=T=>{const A=T.items.map((O,Z)=>`
      <tr>
        <td>${Z+1}</td>
        <td>${O.materialId}</td>
        <td>${O.description}</td>
        <td>${O.quantity}</td>
        <td>${O.baseUnit}</td>
        <td>${O.unit}</td>
        <td>${O.orderUnit}</td>
        <td>${O.price}</td>
        <td>${O.salesGroup}</td>
        <td>${O.materialgroup}</td>
        <td>${O.deliveryDate}</td>
      </tr>
    `).join(""),L=`
      <html>
      <head>
        <title>Sales Order - ${T.soNumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { border: 1px solid black; padding: 8px; text-align: left; }
          th { background-color: #f0f0f0; }
        </style>
      </head>
      <body>
        <h2>sales Order Details</h2>
        <p><strong>PO Number:</strong> ${T.poNumber}</p>
        <p><strong>Date:</strong> ${T.date}</p>
        <p><strong>Vendor:</strong> ${T.vendor}</p>
        <p><strong>Category:</strong> ${T.category}</p>
        <p><strong>Quotation Number:</strong> ${T.quotationNumber}</p>
        <p><strong>Delivery Location:</strong> ${T.deliveryLocation}</p>
        <p><strong>Delivery Address:</strong> ${T.deliveryAddress}</p>

        <h3>Item Details</h3>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Base Unit</th>
              <th>Unit</th>
              <th>Order Unit</th>
              <th>Price</th>
              <th>Buyer Group</th>
              <th>Material Group</th>
              <th>Delivery Date</th>
            </tr>
          </thead>
          <tbody>
            ${A}
          </tbody>
        </table>

        <h3>Tax Summary</h3>
        <p><strong>Total:</strong> ₹${T.total}</p>
        <p><strong>Tax Name:</strong> ${T.taxName}</p>
        <p><strong>CGST:</strong> ${T.cgst}%</p>
        <p><strong>SGST:</strong> ${T.sgst}%</p>
        <p><strong>IGST:</strong> ${T.igst}%</p>
        <p><strong>Tax Discount:</strong> ₹${T.taxDiscount}</p>
        <p><strong>Final Total:</strong> ₹${T.finalTotal}</p>
      </body>
      </html>
    `,P=window.open("","","width=800,height=600");P.document.write(L),P.document.close(),P.print()};return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsx("h2",{children:"Sales Order Display"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Search PO Number, Vendor, Category, etc.",value:c,onChange:T=>{d(T.target.value),g(1)}})}),a.jsx("div",{className:"col-md-3",children:a.jsx("input",{type:"date",className:"form-control",value:u,onChange:T=>{h(T.target.value),g(1)}})}),a.jsx("div",{className:"col-md-3",children:a.jsx("input",{type:"date",className:"form-control",value:m,onChange:T=>{p(T.target.value),g(1)}})}),a.jsx("div",{className:"col-md-2 mb-1",children:a.jsx("button",{className:"btn btn-secondary w-100",onClick:()=>{d(""),h(""),p(""),g(1)},children:"Reset Filters"})})]})]}),s?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"SO Number"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Quotation Number"}),a.jsx("th",{children:"Delivery Location"}),a.jsx("th",{children:"Delivery Address"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:k.length>0?k.map(T=>a.jsxs("tr",{children:[a.jsx("td",{children:T.soNumber}),a.jsx("td",{children:T.date}),a.jsx("td",{children:T.customerName}),a.jsx("td",{children:T.category}),a.jsx("td",{children:T.quotationNumber}),a.jsx("td",{children:T.deliveryLocation}),a.jsx("td",{children:T.deliveryAddress}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>E(T),children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print"]})})]},T._id)):a.jsx("tr",{children:a.jsxs("td",{colSpan:"8",className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-inbox fa-2x text-muted mb-2"}),a.jsx("p",{className:"text-muted mb-0",children:"No sales orders found"})]})})})]})})})}),S>1&&a.jsx("nav",{"aria-label":"sales Orders pagination",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>D(v-1),disabled:v===1,children:a.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const A=[],L=[];A.push(1);for(let Z=Math.max(2,v-2);Z<=Math.min(S-1,v+2);Z++)A.push(Z);S>1&&A.push(S);const P=[...new Set(A)].sort((Z,z)=>Z-z);let O;for(let Z of P)O&&(Z-O===2?L.push(O+1):Z-O!==1&&L.push("...")),L.push(Z),O=Z;return L.map((Z,z)=>Z==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${z}`):a.jsx("li",{className:`page-item ${v===Z?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>D(Z),children:Z})},Z))})(),a.jsx("li",{className:`page-item ${v===S?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>D(v+1),disabled:v===S,children:a.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})]})}function bDe(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState(""),[c,d]=N.useState(new Date().toISOString().substring(0,10)),[u,h]=N.useState(new Date().toISOString().substring(0,10)),[m,p]=N.useState([]),[v,g]=N.useState(""),[b,y]=N.useState(""),[C,w]=N.useState([]),[k,S]=N.useState(0),[D,E]=N.useState([]),[T,A]=N.useState(""),[L,P]=N.useState(""),[O,Z]=N.useState(!1),[z,K]=N.useState(""),[B,Q]=N.useState([]),[U,J]=N.useState(!1),[Y,oe]=N.useState(""),[M,V]=N.useState([]),[H,ee]=N.useState(""),[re,ae]=N.useState(""),[ne,ie]=N.useState([]),[G,de]=N.useState([]),[X,le]=N.useState(""),[Se,ue]=N.useState(""),[se,ye]=N.useState(""),[Ne,Ue]=N.useState(""),[Qe,ot]=N.useState("Full"),[xt,Le]=N.useState("Pending"),[dt,Tt]=N.useState(""),At=localStorage.getItem("selectedCompanyId"),Vt=localStorage.getItem("financialYear"),xe=localStorage.getItem("selectedCompanyId");N.useEffect(()=>{Oe.get("/api/sales-order-categories",{params:{companyId:At,financialYear:Vt}}).then(vt=>t(vt.data)),Oe.get("/api/sales-orders",{params:{companyId:At,financialYear:Vt}}).then(vt=>{n(vt.data)}),Oe.get("/api/general-conditions",{params:{companyId:At,financialYear:Vt}}).then(vt=>{const Lt=vt.data.filter(fe=>!fe.isDeleted).map(fe=>({_id:fe._id,name:fe.name,description:fe.description}));ie(Lt)}),Oe.get("/api/locations",{params:{companyId:At,financialYear:Vt}}).then(vt=>p(vt.data)),Oe.get("/api/customers",{params:{companyId:At,financialYear:Vt}}).then(vt=>E(vt.data)),w([...Array(4).fill(null).map(()=>({materialId:"",description:"",orderedQuantity:0,deliveredQuantity:0,pendingQuantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",deliveryDate:new Date().toISOString().slice(0,10),actualDeliveryDate:new Date().toISOString().slice(0,10),note:"",isPartialDelivery:!1}))])},[]);const he=vt=>{console.log("Selected Sales Order:",vt),l(vt.soNumber),A(vt.customerName||""),g(vt.deliveryLocation||""),y(vt.deliveryAddress||""),ee(vt.salesGroup||""),ae(vt.contactPerson||""),de(vt.generalCondition||[]);const Lt=vt.items?.map(fe=>({materialId:fe.materialId||"",description:fe.description||"",orderedQuantity:fe.quantity||0,deliveredQuantity:0,pendingQuantity:fe.quantity||0,baseUnit:fe.baseUnit||"",unit:fe.unit||"",orderUnit:fe.orderUnit||"",price:fe.price||0,priceUnit:fe.priceUnit||"",deliveryDate:fe.deliveryDate||new Date().toISOString().slice(0,10),actualDeliveryDate:new Date().toISOString().slice(0,10),note:fe.note||"",isPartialDelivery:!1}))||[];w(Lt),Be(Lt),Z(!1)},ve=()=>{Z(!1),K(""),Q([])},pe=(vt,Lt,fe)=>{Lt.includes(vt)?fe(Lt.filter(Me=>Me!==vt)):fe([...Lt,vt])},De=vt=>{if(oe(vt),vt.trim()){const Lt=D.filter(fe=>fe.name1?.toLowerCase().includes(vt.toLowerCase())||fe.cnNo?.toLowerCase().includes(vt.toLowerCase()));V(Lt)}else V([])},Ye=()=>{V(D)},Nt=vt=>{A(vt.name1||vt.customerName),J(!1),oe(""),V([])},Je=()=>{J(!1),oe(""),V([])},Xe=vt=>{l(vt);const Lt=r.find(fe=>fe.soNumber===vt);Lt&&he(Lt)},Be=vt=>{const Lt=vt.reduce((fe,Me)=>fe+(Me.deliveredQuantity||0)*(Me.price||0),0);S(Lt.toFixed(2))},qe=(vt,Lt,fe)=>{const Me=[...C];if(Lt==="deliveredQuantity"){const Te=parseFloat(fe)||0,_e=Me[vt].orderedQuantity||0,Fe=Math.max(0,_e-Te);Me[vt].deliveredQuantity=Te,Me[vt].pendingQuantity=Fe,Me[vt].isPartialDelivery=Te<_e&&Te>0}else Me[vt][Lt]=Lt==="orderedQuantity"||Lt==="price"?parseFloat(fe)||0:fe;w(Me),Be(Me)},ft=()=>{w([...C,{materialId:"",description:"",orderedQuantity:0,deliveredQuantity:0,pendingQuantity:0,baseUnit:"",unit:"",orderUnit:"",price:0,priceUnit:"",deliveryDate:new Date().toISOString().slice(0,10),actualDeliveryDate:new Date().toISOString().slice(0,10),note:"",isPartialDelivery:!1}])},Ie=vt=>{const Lt=[...C];Lt.splice(vt,1),w(Lt),Be(Lt)},[Ke,Ge]=N.useState(!1),[lt,Mt]=N.useState("internal"),[Ae,ke]=N.useState(""),[it,bt]=N.useState(""),Xt=async vt=>{if(vt.preventDefault(),!s||!o)return alert("Please select both category and sales order");Ge(!0)},Ft=async(vt=null)=>{const Lt=r.find(Me=>Me.soNumber===o),fe={deliveryNumber:L,salesOrderId:Lt?._id,soNumber:o,categoryId:s._id,category:s.categoryName,deliveryDate:c,actualDeliveryDate:u,customerName:T,contactPerson:re,salesGroup:H,deliveryLocation:v,deliveryAddress:b,transportDetails:X,vehicleNumber:Se,driverName:se,driverPhone:Ne,items:C,deliveryType:Qe,deliveryStatus:xt,generalCondition:G,remarks:dt,companyId:xe,financialYear:Vt,total:parseFloat(k)||0,deliveryNumberType:vt?"external":"internal",customDeliveryNumber:vt};try{const Me=await Oe.post("/api/del/salesdeliveries",fe);console.log("Saved Delivery:",Me.data),i(null),l(""),d(new Date().toISOString().substring(0,10)),h(new Date().toISOString().substring(0,10)),A(""),g(""),y(""),w([]),S(""),ee(""),ae(""),le(""),ue(""),ye(""),Ue(""),ot("Full"),Le("Pending"),Tt(""),Ge(!1),Mt("internal"),ke(""),bt(""),alert("Sales Delivery Created Successfully with Delivery Number: "+Me.data.deliveryNumber)}catch(Me){console.error("Error during Delivery creation:",Me),alert("Failed to create Sales Delivery")}},rr=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Generate Sales Delivery Number"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{Ge(!1),Mt("internal"),ke("")},"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Delivery Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Mt("internal"),Ft(null)},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Mt("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),lt==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Custom Delivery Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter delivery number (max 50 characters)",value:Ae,onChange:vt=>ke(vt.target.value),onKeyPress:vt=>{vt.key==="Enter"&&Ae.trim()&&Ft(Ae)},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[Ae.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:()=>Ft(Ae),disabled:!Ae.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Generate & Save Delivery"]})})]}),lt==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:"alert alert-info",role:"alert",children:[a.jsx("i",{className:"fas fa-info-circle me-2"}),"Delivery number will be auto-generated based on category: ",a.jsx("strong",{children:s?.categoryName}),a.jsx("br",{}),a.jsxs("small",{children:["Range: ",s?.prefix,s?.rangeFrom," - ",s?.prefix,s?.rangeTo]})]})})]})]})})})]});function pr({show:vt,onClose:Lt,onSelect:fe}){const[Me,Te]=N.useState(""),[_e,Fe]=N.useState([]);N.useEffect(()=>{vt&&Fe(r)},[vt]);const Ve=mt=>{if(Te(mt),!mt){Fe(r);return}Fe(r.filter(wt=>wt.soNumber?.toLowerCase().includes(mt.toLowerCase())||wt.customerName?.toLowerCase().includes(mt.toLowerCase())))};return vt?a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Lt})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search SO Number"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter SO number or customer name...",value:Me,onChange:mt=>Ve(mt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:()=>Fe(r),children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:_e.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"SO Number"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:_e.map((mt,wt)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:mt.soNumber})}),a.jsx("td",{children:mt.customerName}),a.jsx("td",{children:new Date(mt.date).toLocaleDateString()}),a.jsxs("td",{children:["₹",mt.finalTotal||mt.total]}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{fe(mt),Lt()},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},wt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Me?`No sales orders found matching "${Me}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Lt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}):null}const jr=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Customer"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Je})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Customer"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by customer name or code...",value:Y,onChange:vt=>De(vt.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:Ye,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:M.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer Code"}),a.jsx("th",{children:"Customer Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Address"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:M.map((vt,Lt)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:vt.cnNo})}),a.jsx("td",{children:vt.name1}),a.jsx("td",{children:vt.email}),a.jsx("td",{children:vt.address1}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Nt(vt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Lt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Y?`No customers found matching "${Y}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Je,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})});return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Delivery"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Delivery"})]})})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-truck me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Sales Delivery Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"SO Reference:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter SO number",value:o,onChange:vt=>{l(vt.target.value),vt.target.value&&Xe(vt.target.value)},required:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>Z(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",onChange:vt=>{const Lt=e.find(fe=>fe._id===vt.target.value);i(Lt)},required:!0,children:[a.jsx("option",{value:"",children:"-- Select Category --"}),e.map(vt=>a.jsx("option",{value:vt._id,children:vt.categoryName},vt._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Delivery Number:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:L,readOnly:!0})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Delivery Date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:c,onChange:vt=>d(vt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Actual Delivery Date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:u,onChange:vt=>h(vt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Customer:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:T,onChange:vt=>A(vt.target.value),placeholder:"Enter customer name"}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>J(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:v,onChange:vt=>g(vt.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),m.map(vt=>a.jsx("option",{value:vt.name||vt.locationName||vt._id,children:vt.name||vt.locationName||vt._id},vt._id||vt.id||vt.name))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:H,onChange:vt=>ee(vt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:re,onChange:vt=>ae(vt.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Delivery Type:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",value:Qe,onChange:vt=>ot(vt.target.value),children:[a.jsx("option",{value:"Full",children:"Full Delivery"}),a.jsx("option",{value:"Partial",children:"Partial Delivery"})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Delivery Status:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",value:xt,onChange:vt=>Le(vt.target.value),children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"In Transit",children:"In Transit"}),a.jsx("option",{value:"Delivered",children:"Delivered"}),a.jsx("option",{value:"Cancelled",children:"Cancelled"})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"General Conditions"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm w-100 text-start",type:"button","data-bs-toggle":"dropdown",children:G.length===0?"Select...":`${G.length} selected`}),a.jsx("div",{className:"dropdown-menu w-200",style:{maxHeight:"200px",overflowY:"auto"},children:ne.map(vt=>a.jsx("div",{className:"dropdown-item-text",children:a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:G.includes(vt._id),onChange:()=>pe(vt._id,G,de)}),a.jsx("label",{className:"form-check-label ms-1",children:vt.name})]})},vt._id))})]})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTransport",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTransport","aria-controls":"collapseTransport","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-shipping-fast me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Transport Details"})]})]})})})})}),a.jsx("div",{id:"collapseTransport",className:"accordion-collapse collapse","aria-labelledby":"headingTransport","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Transport Details:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("textarea",{className:"form-control form-control-sm",value:X,onChange:vt=>le(vt.target.value),rows:"2",placeholder:"Enter transport company details..."})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Vehicle Number:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:Se,onChange:vt=>ue(vt.target.value),placeholder:"Enter vehicle number"})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Driver Name:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:se,onChange:vt=>ye(vt.target.value),placeholder:"Enter driver name"})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Driver Phone:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:Ne,onChange:vt=>Ue(vt.target.value),placeholder:"Enter driver phone"})})]}),a.jsxs("div",{className:"col-xl-6 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Delivery Address:"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("textarea",{className:"form-control form-control-sm",value:b,onChange:vt=>y(vt.target.value),rows:"3",placeholder:"Enter complete delivery address..."})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Delivery Items"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Ordered Qty"}),a.jsx("th",{children:"Delivered Qty"}),a.jsx("th",{children:"Pending Qty"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Actual Delivery"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:C.map((vt,Lt)=>a.jsxs("tr",{className:vt.isPartialDelivery?"table-warning":"",children:[a.jsx("td",{children:Lt+1}),a.jsx("td",{children:vt.materialId}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:vt.description,onChange:fe=>qe(Lt,"description",fe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:vt.orderedQuantity,readOnly:!0,style:{backgroundColor:"#f8f9fa"}})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:vt.deliveredQuantity,onChange:fe=>qe(Lt,"deliveredQuantity",fe.target.value),max:vt.orderedQuantity})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:vt.pendingQuantity,readOnly:!0,style:{backgroundColor:"#f8f9fa"}})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:vt.baseUnit,onChange:fe=>qe(Lt,"baseUnit",fe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:vt.price,onChange:fe=>qe(Lt,"price",fe.target.value)})}),a.jsx("td",{children:(vt.deliveredQuantity*vt.price).toFixed(2)}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"date",value:vt.deliveryDate,onChange:fe=>qe(Lt,"deliveryDate",fe.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"date",value:vt.actualDeliveryDate,onChange:fe=>qe(Lt,"actualDeliveryDate",fe.target.value)})}),a.jsx("td",{children:a.jsx("textarea",{className:"form-control form-control-sm",value:vt.note,onChange:fe=>qe(Lt,"note",fe.target.value),maxLength:"250",rows:"2"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-outline-warning",type:"button",onClick:()=>Ie(Lt),children:a.jsx("i",{className:"ti ti-trash"})})})]},Lt))})]})}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-info",onClick:ft,style:{marginTop:10},children:"+ Add Item"})]})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingFour",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseFour","aria-controls":"collapseFour","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-check me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Delivery Summary"})]})]})})})})}),a.jsx("div",{id:"collapseFour",className:"accordion-collapse collapse","aria-labelledby":"headingFour","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:Xt,children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{children:[a.jsx("i",{className:"fas fa-comment me-2"}),"Remarks"]})}),a.jsx("div",{className:"card-body",children:a.jsx("textarea",{className:"form-control form-control-sm",value:dt,onChange:vt=>Tt(vt.target.value),rows:"4",placeholder:"Enter delivery remarks..."})})]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsxs("h6",{children:[a.jsx("i",{className:"fas fa-calculator me-2"}),"Delivery Summary"]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("span",{children:"Total Delivered Amount:"}),a.jsxs("strong",{className:"text-success",children:["₹",k]})]}),a.jsx("hr",{}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("span",{children:"Delivery Type:"}),a.jsx("span",{className:`badge ${Qe==="Full"?"bg-success":"bg-warning"}`,children:Qe})]}),a.jsxs("div",{className:"d-flex justify-content-between mt-2",children:[a.jsx("span",{children:"Status:"}),a.jsx("span",{className:`badge ${xt==="Delivered"?"bg-success":xt==="In Transit"?"bg-info":xt==="Cancelled"?"bg-danger":"bg-warning"}`,children:xt})]})]})]})})]}),a.jsxs("button",{type:"submit",className:"btn btn-success mb-6 mt-2",children:[a.jsx("i",{className:"fas fa-truck me-1"}),"Submit Delivery"]})]})})})})})]})]})}),O&&a.jsx(pr,{show:O,onClose:ve,onSelect:he}),U&&a.jsx(jr,{}),Ke&&a.jsx(rr,{})]})})}const yDe=()=>{const[e,t]=N.useState({name:"",address:"",pincode:"",country:"",phone:"",email:""}),r=l=>{t(c=>({...c,[l.target.name]:l.target.value}))},[n,s]=N.useState(null),i=l=>{s(l.target.files[0])},o=async l=>{l.preventDefault();const c=new FormData;Object.entries(e).forEach(([d,u])=>{c.append(d,u)}),n&&c.append("logo",n);try{await Oe.post("/api/companies/create",c,{headers:{"Content-Type":"multipart/form-data"}}),alert("Company added successfully!"),t({name:"",address:"",pincode:"",country:"",phone:"",email:""}),s(null),document.getElementById("logoInput").value=""}catch(d){alert("Error adding company. Please try again."),console.error("Error:",d)}};return a.jsx("div",{className:"content",children:a.jsx("div",{className:"row justify-content-center",children:a.jsx("div",{className:"col-md-8 col-lg-6",children:a.jsxs("div",{className:"card shadow",children:[a.jsx("div",{className:"card-header bg-primary text-white",children:a.jsxs("h3",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-building me-2"}),"Create Company"]})}),a.jsx("div",{className:"card-body",children:a.jsx("form",{onSubmit:o,children:a.jsxs("div",{className:"row",children:[[{label:"Company Name",name:"name",icon:"fas fa-building"},{label:"Address",name:"address",icon:"fas fa-map-marker-alt"},{label:"Pincode",name:"pincode",icon:"fas fa-map-pin"},{label:"Country",name:"country",icon:"fas fa-globe"},{label:"Phone",name:"phone",icon:"fas fa-phone"},{label:"Email",name:"email",type:"email",icon:"fas fa-envelope"}].map(({label:l,name:c,type:d="text",icon:u})=>a.jsxs("div",{className:"col-xl-4 mb-3",children:[a.jsxs("label",{htmlFor:c,className:"form-label",children:[a.jsx("i",{className:`${u} me-2`}),l,c==="name"&&a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:d,id:c,name:c,value:e[c],onChange:r,placeholder:`Enter ${l.toLowerCase()}`,className:"form-control",required:c==="name"})]},c)),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{htmlFor:"logoInput",className:"form-label",children:[a.jsx("i",{className:"fas fa-image me-2"}),"Company Logo"]}),a.jsx("input",{type:"file",id:"logoInput",accept:"image/*",onChange:i,className:"form-control form-control-sm"}),a.jsx("div",{className:"form-text",children:"Upload your company logo (PNG, JPG, or GIF format)"})]}),a.jsx("div",{className:"d-grid",children:a.jsxs("button",{type:"submit",className:"btn btn-primary btn-lg",children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Company"]})})]})})})]})})})})};function jDe(){const[e,t]=N.useState({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",name:"",email:""}),r=localStorage.getItem("selectedCompanyId"),n=localStorage.getItem("financialYear"),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState(""),[u,h]=N.useState(null),[m,p]=N.useState({}),[v,g]=N.useState([]),[b,y]=N.useState(!1),[C,w]=N.useState(!1),[k,S]=N.useState(""),[D,E]=N.useState(""),[T,A]=N.useState(!1),L=["Karnataka","Kerala","Tamil Nadu","Andhra Pradesh","Telangana","West Bengal","Odisha","Bihar","Jharkhand","Madhya Pradesh","Chhattisgarh","Uttar Pradesh"],P=["India","USA","Germany","France","UK"];N.useEffect(()=>{O(),Z()},[]);const O=async()=>{try{const Le=await Oe.get("/api/customer-categories",{params:{companyId:r,financialYear:n}});i(Le.data)}catch(Le){console.error("Error fetching categories:",Le)}},Z=async()=>{try{const dt=(await Oe.get("/api/customers",{params:{companyId:r,financialYear:n}})).data.sort((Tt,At)=>new Date(At.createdAt)-new Date(Tt.createdAt));l(dt)}catch(Le){console.error("Error fetching customers:",Le)}},z=Le=>{const{name:dt,value:Tt}=Le.target;dt==="email"&&Tt&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(Tt)?Le.target.setCustomValidity(""):Le.target.setCustomValidity("Please enter a valid email address")),t(At=>({...At,[dt]:Tt})),m[dt]&&p(At=>({...At,[dt]:""}))},K=()=>{const Le={};return e.categoryId||(Le.categoryId="Category is required."),e.name1.trim()||(Le.name1="Name 1 is required."),e.search.trim()||(Le.search="Search term is required."),e.address1.trim()||(Le.address1="Address 1 is required."),e.region||(Le.region="Region is required."),e.country||(Le.country="Country is required."),e.contactNo.trim()?/^[0-9]{10}$/.test(e.contactNo.trim())||(Le.contactNo="Contact No must be exactly 10 digits."):Le.contactNo="Contact No is required.",e.email.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email.trim())&&(Le.email="Please enter a valid email address."),e.pincode.trim()&&!/^[0-9]{6}$/.test(e.pincode.trim())&&(Le.pincode="Pincode must be exactly 6 digits."),k==="external"&&!D.trim()&&(Le.externalCustomerId="External Customer ID is required."),k==="external"&&D.length>50&&(Le.externalCustomerId="External Customer ID cannot exceed 50 characters."),p(Le),Object.keys(Le).length===0},B=async Le=>{if(Le.preventDefault(),!K()){const dt=Object.values(m).filter(Tt=>Tt);alert(dt.join(`
`));return}w(!0),A(!1)},Q=async(Le=k)=>{try{const dt={...e,customerType:Le,companyId:r,financialYear:n,externalCustomerId:Le==="external"?D:null};if(u)await Oe.put(`/api/customers/${u}`,dt),alert("Customer updated successfully!");else{const Tt=await Oe.post("/api/customers",dt);d(Tt.data.cnNo),alert(`Customer saved successfully! CNNo: ${Tt.data.cnNo}`)}Z(),U(),A(!1),w(!1)}catch(dt){console.error("Error saving customer:",dt),alert("Error saving customer. Please try again.")}},U=()=>{t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",name:"",email:""}),h(null),p({}),d(""),S(""),E("")},J=Le=>{t({categoryId:Le.categoryId?._id||"",name1:Le.name1||"",name2:Le.name2||"",search:Le.search||"",address1:Le.address1||"",address2:Le.address2||"",city:Le.city||"",pincode:Le.pincode||"",region:Le.region||"",country:Le.country||"",contactNo:Le.contactNo||"",name:Le.name||"",email:Le.email||""}),h(Le._id),d(Le.cnNo),S(Le.customerType||"internal"),E(Le.externalCustomerId||""),p({}),A(!0)},Y=()=>{w(!1),S(""),E("")},oe=Le=>{S(Le),Le==="internal"&&Q("internal")},M=()=>{if(!D.trim()){alert("Please enter External Customer ID");return}if(D.length>50){alert("External Customer ID cannot exceed 50 characters");return}Q("external")},[V,H]=N.useState(""),[ee,re]=N.useState(1),ae=10,ne=o.filter(Le=>{const dt=V.toLowerCase();return Le.cnNo?.toLowerCase().includes(dt)||Le.name1?.toLowerCase().includes(dt)||Le.categoryId?.categoryName?.toLowerCase().includes(dt)||Le.search?.toLowerCase().includes(dt)||Le.address1?.toLowerCase().includes(dt)||Le.city?.toLowerCase().includes(dt)||Le.pincode?.toLowerCase().includes(dt)||Le.region?.toLowerCase().includes(dt)||Le.country?.toLowerCase().includes(dt)||Le.contactNo?.includes(dt)||Le.email?.toLowerCase().includes(dt)}).sort((Le,dt)=>new Date(dt.createdAt)-new Date(Le.createdAt)),ie=ee*ae,G=ie-ae,de=ne.slice(G,ie),X=Math.ceil(ne.length/ae),le=()=>{A(!1),U()},[Se,ue]=N.useState(!1),se=()=>ue(!1),ye=()=>{const Le=ne.map(pe=>({"Customer No":pe.cnNo||"","Name 1":pe.name1||"","Name 2":pe.name2||"",Category:pe.categoryId?.categoryName||"","Search Term":pe.search||"","Address 1":pe.address1||"","Address 2":pe.address2||"","Extra Addresses":pe.extraAddresses?pe.extraAddresses.join(", "):"",City:pe.city||"",Pincode:pe.pincode||"",Region:pe.region||"",Country:pe.country||"","Contact No":pe.contactNo||"",Email:pe.email||"","Contact Person":pe.name||"","Customer Type":pe.customerType||"internal","External Customer ID":pe.externalCustomerId||"","Is Deleted":pe.isDeleted?"Yes":"No","Is Blocked":pe.isBlocked?"Yes":"No","Created Date":pe.createdAt?new Date(pe.createdAt).toLocaleDateString():"","Updated Date":pe.updatedAt?new Date(pe.updatedAt).toLocaleDateString():""})),dt=nn.book_new(),Tt=nn.json_to_sheet(Le),At=[{wch:15},{wch:25},{wch:25},{wch:20},{wch:20},{wch:30},{wch:30},{wch:40},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:25},{wch:20},{wch:15},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];Tt["!cols"]=At,nn.book_append_sheet(dt,Tt,"Customers");const Vt=new Date,xe=Vt.toLocaleDateString("en-GB").replace(/\//g,"-"),he=Vt.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ve=`Customer-Master-${xe}-${he}.xlsx`;Zu(dt,ve),se(),alert(`Excel file exported successfully as: ${ve}`)},Ne=()=>{t(Le=>({...Le,extraAddresses:[...Le.extraAddresses,""]}))},Ue=(Le,dt)=>{const Tt=[...e.extraAddresses];Tt[Le]=dt,t(At=>({...At,extraAddresses:Tt}))},Qe=Le=>{const dt=[...e.extraAddresses];dt.splice(Le,1),t(Tt=>({...Tt,extraAddresses:dt}))},ot=async(Le,dt,Tt)=>{try{const At={[dt]:Tt};await Oe.put(`/api/customers/status/${Le}`,At),l(o.map(Vt=>Vt._id===Le?{...Vt,[dt]:Tt}:Vt)),alert("Status updated successfully!")}catch(At){console.error("Error updating status:",At),alert("Failed to update status!")}},xt=Le=>{console.log("Import successful:",Le),Z()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search customers...",value:V,onChange:Le=>H(Le.target.value)})]})})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>y(!0),className:"btn btn-outline-primary btn-sm",children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:ye,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsx("a",{onClick:()=>A(!0),className:"btn btn-primary btn-sm",children:"New Customer"})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"CNNo"}),a.jsx("th",{children:"Name 1"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Search"}),a.jsx("th",{children:"Address 1"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Pincode"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Contact No"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Delete"}),a.jsx("th",{children:"Block"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:de.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"13",children:"No customers found"})}):de.map(Le=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Le.cnNo}),a.jsx("td",{className:"text-wrap",children:Le.name1}),a.jsx("td",{className:"text-wrap",children:Le.categoryId?.categoryName||"N/A"}),a.jsx("td",{className:"text-wrap",children:Le.search}),a.jsx("td",{className:"text-wrap",children:Le.address1}),a.jsx("td",{className:"text-wrap",children:Le.city}),a.jsx("td",{className:"text-wrap",children:Le.pincode}),a.jsx("td",{className:"text-wrap",children:Le.region}),a.jsx("td",{className:"text-wrap",children:Le.contactNo}),a.jsx("td",{className:"text-wrap",children:Le.email}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",checked:Le.isDeleted||!1,onChange:dt=>ot(Le._id,"isDeleted",dt.target.checked)})})}),a.jsx("td",{children:a.jsx("div",{className:"form-check",children:a.jsx("input",{className:"form-check-input",type:"checkbox",checked:Le.isBlocked||!1,onChange:dt=>ot(Le._id,"isBlocked",dt.target.checked)})})}),a.jsx("td",{children:a.jsx("button",{onClick:()=>J(Le),className:"btn btn-primary btn-sm",children:"Edit"})})]},Le._id))})]})})})]}),a.jsx("div",{className:"d-flex justify-content-end align-items-center mt-3",children:X>1&&a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[a.jsx("li",{className:`page-item ${ee===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>re(Le=>Math.max(Le-1,1)),disabled:ee===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const dt=[],Tt=[];dt.push(1);for(let xe=Math.max(2,ee-2);xe<=Math.min(X-1,ee+2);xe++)dt.push(xe);X>1&&dt.push(X);const At=[...new Set(dt)].sort((xe,he)=>xe-he);let Vt;for(let xe of At)Vt&&(xe-Vt===2?Tt.push(Vt+1):xe-Vt!==1&&Tt.push("...")),Tt.push(xe),Vt=xe;return Tt.map((xe,he)=>xe==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${he}`):a.jsx("li",{className:`page-item ${ee===xe?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>re(xe),children:xe})},xe))})(),a.jsx("li",{className:`page-item ${ee===X?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>re(Le=>Math.min(Le+1,X)),disabled:ee===X,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})}),C&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Customer Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:Y,"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the ID:"}),k==="external"?a.jsxs("div",{children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"External Customer ID"}),a.jsx("input",{type:"text",className:"form-control form-control-sm",value:D,onChange:Le=>E(Le.target.value),maxLength:50,required:!0,placeholder:"Enter External Customer ID (max 50 characters)"}),a.jsxs("small",{className:"form-text text-muted",children:[D.length,"/50 characters"]})]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-primary",onClick:M,disabled:!D.trim(),children:"Continue"}),a.jsx("button",{className:"btn btn-secondary",onClick:()=>S(""),children:"Back"})]})]}):a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>oe("internal"),children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>oe("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]})]})]})})})]}),T&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[u?"Edit Customer":"Add New Customer",k&&a.jsx("span",{className:"badge bg-info ms-2",children:k==="internal"?"Internal":"External"})]}),a.jsx("button",{type:"button",className:"btn-close",onClick:le,"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:B,children:[k==="external"&&a.jsxs("div",{className:"alert alert-info mb-3",children:[a.jsx("strong",{children:"External Customer ID:"})," ",D]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Category ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",value:e.categoryId,onChange:z,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Category"}),s.map(Le=>a.jsx("option",{value:Le._id,children:Le.categoryName},Le._id))]})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Name1 ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name1",placeholder:"Enter Name 1",value:e.name1,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Name2"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name2",placeholder:"Enter Name 2 (Optional)",value:e.name2,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["SearchTerm ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"search",placeholder:"Enter Search Term",value:e.search,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Address1 ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"address1",placeholder:"Enter Address 1",value:e.address1,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Address2"})}),a.jsx("div",{className:"col-6",children:a.jsx("input",{type:"text",name:"address2",placeholder:"Enter Address 2",value:e.address2,onChange:z,className:"form-control"})}),a.jsx("div",{className:"col-2",children:a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:Ne,children:"+"})})]}),e?.extraAddresses?.map((Le,dt)=>a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:`Address ${dt+3}`})}),a.jsx("div",{className:"col-6",children:a.jsx("input",{type:"text",placeholder:`Enter Address ${dt+3}`,value:Le,onChange:Tt=>Ue(dt,Tt.target.value),className:"form-control"})}),a.jsx("div",{className:"col-2",children:a.jsx("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>Qe(dt),children:a.jsx("i",{className:"ti ti-x"})})})]},dt)),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"City"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"city",placeholder:"Enter City",value:e.city,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Pincode"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"pincode",placeholder:"Enter 6-digit Pincode",value:e.pincode,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Region ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"region",value:e.region,onChange:z,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Region"}),L.map(Le=>a.jsx("option",{value:Le,children:Le},Le))]})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Country ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"country",value:e.country,onChange:z,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Country"}),P.map(Le=>a.jsx("option",{value:Le,children:Le},Le))]})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:["Contact No ",a.jsx("span",{className:"text-danger",children:"*"})]})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"contactNo",placeholder:"Enter 10-digit Contact No",value:e.contactNo,onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Email"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"email",name:"email",placeholder:"Enter Email (Optional)",value:e.email,pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address (e.g., user@example.com)",onChange:z,className:"form-control"})})]}),a.jsxs("div",{className:"row col-md-4 mb-2",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Contact Person"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name",placeholder:"Enter name (Optional)",value:e.name,onChange:z,className:"form-control"})})]})]}),a.jsxs("div",{className:"mt-3",children:[a.jsx("button",{type:"submit",className:"btn btn-success",children:u?"Update Customer":"Save Customer"}),u&&a.jsx("button",{type:"button",onClick:U,className:"btn btn-danger ms-2",children:"Cancel"})]})]})})]})})})]}),a.jsx(gf,{show:b,onClose:()=>y(!1),onImport:xt,masterDataType:"customer",apiEndpoint:"/api/customers/import"})]})}function NDe(){const e="MMNR-",[t,r]=N.useState([]),[n,s]=N.useState(!1),[i,o]=N.useState({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",salesGroup:"",taxId:"",tandc:""}),l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear"),[d,u]=N.useState(1),[h,m]=N.useState([]),[p,v]=N.useState([]),[g,b]=N.useState([]),[y,C]=N.useState([]),[w,k]=N.useState([]),[S,D]=N.useState(!1),[E,T]=N.useState([]),[A,L]=N.useState("materialId"),[P,O]=N.useState(null),[Z,z]=N.useState(!1),[K,B]=N.useState(1),Q=10,[U,J]=N.useState(""),[Y,oe]=N.useState(!1),[M,V]=N.useState([]),[H,ee]=N.useState("customerId"),[re,ae]=N.useState(""),ne=Be=>{s(!1),Se()},ie=()=>{const Be=Ne.map(Ae=>({"Customer Name":Ae.customerId?.name1||"","Customer ID":Ae.customerId?.cnNo||"",Category:Ae.categoryId?.categoryName||"","Material ID":Ae.materialId?.materialId||"","Material Description":Ae.materialId?.description||"",Unit:Ae.unit||"","BUM (Base Unit Measure)":Ae.bum||"","Order Unit":Ae.orderUnit||"",Price:Ae.price||"","Sales Group":Ae.salesGroup||"","Tax Name":Ae.taxId?.taxName||"","CGST %":Ae.taxId?.cgst||"","SGST %":Ae.taxId?.sgst||"","IGST %":Ae.taxId?.igst||"","Terms & Conditions":Ae.tandc||"","Company ID":Ae.companyId||"","Financial Year":Ae.financialYear||"","Created Date":Ae.createdAt?new Date(Ae.createdAt).toLocaleDateString():"","Updated Date":Ae.updatedAt?new Date(Ae.updatedAt).toLocaleDateString():""})),qe=nn.book_new(),ft=nn.json_to_sheet(Be),Ie=[{wch:25},{wch:15},{wch:20},{wch:20},{wch:35},{wch:10},{wch:15},{wch:15},{wch:12},{wch:15},{wch:15},{wch:10},{wch:10},{wch:10},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15}];ft["!cols"]=Ie,nn.book_append_sheet(qe,ft,"Customer Price List");const Ke=new Date,Ge=Ke.toLocaleDateString("en-GB").replace(/\//g,"-"),lt=Ke.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),Mt=`Customer-Price-List-${Ge}-${lt}.xlsx`;Zu(qe,Mt),alert(`Excel file exported successfully as: ${Mt}`)};N.useEffect(()=>{Oe.get("/api/locations",{params:{companyId:l,financialYear:c}}).then(Be=>r(Be.data))},[]),N.useEffect(()=>{G(),de(),X(),le(),Se()},[]);const G=async()=>{try{const Be=await Oe.get("/api/customer-categories",{params:{companyId:l,financialYear:c}});m(Be.data)}catch(Be){console.error("Error fetching categories:",Be),alert("Error loading categories")}},de=async()=>{try{const Be=await Oe.get("/api/customers",{params:{companyId:l,financialYear:c}});v(Be.data),console.log("customers",Be.data)}catch(Be){console.error("Error fetching customers:",Be),alert("Error loading customers")}},X=async()=>{try{const Be=await Oe.get("/api/material",{params:{companyId:l,financialYear:c}});b(Be.data)}catch(Be){console.error("Error fetching materials:",Be),alert("Error loading materials")}},le=async()=>{try{const Be=await Oe.get("/api/tax",{params:{companyId:l,financialYear:c}});C(Be.data)}catch(Be){console.error("Error fetching taxes:",Be),alert("Error loading taxes")}},Se=async()=>{try{const Be=await Oe.get("/api/customer-price-lists",{params:{companyId:l,financialYear:c}});k(Be.data)}catch(Be){console.error("Error fetching price lists:",Be),alert("Error loading price lists")}},ue=async Be=>{const{name:qe,value:ft}=Be.target;let Ie={...i,[qe]:ft};if(qe==="materialId")try{const Ge=(await Oe.get(`/api/material/${ft}`)).data.conversionValue||1;u(Ge)}catch(Ke){console.error("Error fetching material conversion:",Ke),u(1)}o(Ie)},se=async Be=>{Be.preventDefault();const qe={...i,companyId:l,financialYear:c};try{i._id?(await Oe.put(`/api/customer-price-lists/${i._id}`,qe),alert("Updated successfully")):(await Oe.post("/api/customer-price-lists",qe),alert("Saved successfully")),o({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",salesGroup:"",taxId:"",tandc:""}),u(1),Le(),Se()}catch(ft){alert("Error saving data"),console.error("Submit error:",ft)}},ye=Be=>{const qe=Ae=>Ae?typeof Ae=="object"&&Ae._id?Ae._id:typeof Ae=="string"?Ae:"":"",ft=qe(Be.categoryId),Ie=qe(Be.customerId),Ke=qe(Be.materialId),Ge=qe(Be.taxId),lt=qe(Be.tandc),Mt={_id:Be._id,categoryId:ft,customerId:Ie,materialId:Ke,unit:Be.unit||"",bum:Be.bum||"",orderUnit:Be.orderUnit||"",salesGroup:Be.salesGroup||"",taxId:Ge,tandc:lt,price:Be.price||""};o(Mt),z(!0),Ke&&Oe.get(`/api/material/${Ke}`).then(Ae=>{const ke=Ae.data.conversionValue||1;u(ke),console.log("Conversion value set to:",ke)}).catch(Ae=>{console.error("Error fetching material conversion:",Ae),u(1)})},Ne=w.filter(Be=>{const qe=Be.customerId?.name1?.toLowerCase()||"",ft=Be.categoryId?.categoryName?.toLowerCase()||"",Ie=Be.materialId?.description?.toLowerCase()||"";return qe.includes(U.toLowerCase())||ft.includes(U.toLowerCase())||Ie.includes(U.toLowerCase())}),Ue=Ne.slice((K-1)*Q,K*Q),Qe=Math.ceil(Ne.length/Q),ot=Be=>{Be>=1&&Be<=Qe&&B(Be)},xt=()=>z(!0),Le=()=>{z(!1),o({_id:"",categoryId:"",customerId:"",materialId:"",unit:"",bum:"",orderUnit:"",price:"",salesGroup:"",taxId:"",tandc:""})},dt=()=>{O(null),D(!0),T([])},Tt=()=>{D(!1),O(null),T([])},At=Be=>{console.log("Selected material:",Be),ue({target:{name:"materialId",value:Be._id}}),Tt()},Vt=()=>{const Be=U.trim();if(!Be){T([]);return}if(console.log("Searching with query:",Be,"Type:",A),console.log("Available materials:",g),A==="materialId"){let qe=Be;/^\d+$/.test(Be)&&(qe=e+Be);const ft=g.filter(Ie=>(Ie.materialId||"").toLowerCase().includes(qe.toLowerCase()));console.log("Filtered results for materialId:",ft),T(ft)}else{const qe=g.filter(ft=>(ft.description||"").toLowerCase().includes(Be.toLowerCase()));console.log("Filtered results for description:",qe),T(qe)}};N.useEffect(()=>{const Be=setTimeout(()=>{U.trim()?Vt():T([])},300);return()=>clearTimeout(Be)},[U,A]);const xe=()=>{T(g),J("")},he=()=>{T([]),J("")},ve=()=>{oe(!0),ae(""),V([])},pe=()=>{oe(!1),ae(""),V([])},De=Be=>{const qe=Be.target.value;ae(qe)},Ye=()=>{if(!re.trim()){V([]);return}if(H==="customerId"){const Be=p.filter(qe=>(qe.customerId||"").toLowerCase().includes(re.toLowerCase()));V(Be)}else{const Be=p.filter(qe=>(qe.name1||"").toLowerCase().includes(re.toLowerCase()));V(Be)}},Nt=()=>{V(p),ae("")},Je=()=>{V([]),ae("")},Xe=Be=>{ue({target:{name:"customerId",value:Be._id}}),pe()};return N.useEffect(()=>{const Be=setTimeout(()=>{re.trim()?Ye():V([])},300);return()=>clearTimeout(Be)},[re,H]),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Price List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Price List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:U,onChange:Be=>J(Be.target.value)})]})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsx("div",{children:a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>s(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]})}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:ie,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsx("div",{children:a.jsxs("a",{onClick:xt,className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Customer Price List"]})})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Material"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"BUM"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Sales Group"}),a.jsx("th",{children:"Tax"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ue.map(Be=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("div",{className:"d-flex align-items-center",children:a.jsx("div",{children:a.jsx("h6",{className:"fs-14 fw-medium mb-0",children:a.jsx("a",{href:"#",children:Be.customerId?.name1})})})})}),a.jsx("td",{children:Be.categoryId?.categoryName}),a.jsx("td",{children:Be.materialId?.description}),a.jsx("td",{className:"text-dark",children:Be.unit}),a.jsx("td",{className:"text-dark",children:Be.bum}),a.jsx("td",{className:"text-dark",children:Be.orderUnit}),a.jsxs("td",{className:"text-dark",children:["Rs",Be.price]})," ",a.jsx("td",{className:"text-dark",children:Be.salesGroup}),a.jsx("td",{className:"text-dark",children:Be.taxId?.taxName}),a.jsx("td",{style:{cursor:"pointer"},children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{ye(Be)},children:"Edit"})})]},Be._id))})]})})]}),Qe>1&&a.jsx("nav",{"aria-label":"Page navigation",className:"",children:a.jsxs("ul",{className:"pagination mb-0 justify-content-end ms-auto",children:[a.jsx("li",{className:`page-item ${K===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:Be=>{Be.preventDefault(),K>1&&ot(K-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const Be=[];if(Qe<=5)for(let ft=1;ft<=Qe;ft++)Be.push(a.jsx("li",{className:`page-item ${K===ft?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ie=>{Ie.preventDefault(),ot(ft)},children:ft})},ft));else{Be.push(a.jsx("li",{className:`page-item ${K===1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ke=>{Ke.preventDefault(),ot(1)},children:"1"})},1)),K>3&&Be.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"ellipsis1"));const ft=Math.max(2,K-1),Ie=Math.min(Qe-1,K+1);for(let Ke=ft;Ke<=Ie;Ke++)Ke!==1&&Ke!==Qe&&Be.push(a.jsx("li",{className:`page-item ${K===Ke?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ge=>{Ge.preventDefault(),ot(Ke)},children:Ke})},Ke));K<Qe-2&&Be.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"ellipsis2")),Qe>1&&Be.push(a.jsx("li",{className:`page-item ${K===Qe?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:Ke=>{Ke.preventDefault(),ot(Qe)},children:Qe})},Qe))}return Be})(),a.jsx("li",{className:`page-item ${K===Qe?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:Be=>{Be.preventDefault(),K<Qe&&ot(K+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})}),Z&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",id:"myLargeModalLabel",children:"Customer Price"}),a.jsx("button",{type:"button",className:"btn-close",onClick:Le,"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:se,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",className:"form-select",value:i.categoryId,onChange:ue,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),h.map(Be=>a.jsx("option",{value:Be._id,children:Be.categoryName},Be._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Customer:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"customerId",className:"form-select me-2",value:i.customerId,onChange:ue,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),p.map(Be=>a.jsx("option",{value:Be._id,children:Be.name1},Be._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:ve,title:"Search Customer",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Material:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"materialId",className:"form-select me-2",value:i.materialId,onChange:ue,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),g.map(Be=>a.jsx("option",{value:Be._id,children:Be.description},Be._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:dt,title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"unit",className:"form-select form-select-sm",value:i.unit,onChange:ue,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),t.map(Be=>a.jsx("option",{value:Be.name,children:Be.name},Be.name))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label",children:"BUM (Base Unit):"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"number",name:"bum",className:"form-control",placeholder:"Enter BUM",value:i.bum,onChange:Be=>{Be.target.value=Be.target.value.replace(/[^0-9.]/g,""),ue(Be)},required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Order Unit:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"orderUnit",className:"form-control",placeholder:"Enter Order Unit",value:i.orderUnit,onChange:Be=>{Be.target.value=Be.target.value.replace(/[^0-9.]/g,""),ue(Be)},required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Price:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",step:"0.01",name:"price",className:"form-control",placeholder:"Enter price",value:i.price,onChange:ue,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"salesGroup",className:"form-control",placeholder:"Enter Sales Group",value:i.salesGroup,onChange:ue,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"T&C:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"tandc",className:"form-control",placeholder:"Enter T&C",value:i.tandc,onChange:ue,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"taxId",className:"form-select",value:i.taxId,onChange:ue,children:[a.jsx("option",{value:"",children:"Select"}),y.map(Be=>a.jsxs("option",{value:Be._id,children:[Be.taxName," (CGST: ",Be.cgst,"%, SGST: ",Be.sgst,"%, IGST: ",Be.igst,"%)"]},Be._id))]})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:Le,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:i._id?"Update":"Save"})]})]})})]})})})]}),S&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:Tt})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:Be=>L(Be.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:A==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:U,onChange:Be=>J(Be.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:xe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),E.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:he,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:E.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:E.map((Be,qe)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Be.materialId}),a.jsx("td",{className:"text-wrap",children:Be.description}),a.jsx("td",{className:"text-wrap",children:Be.baseUnit}),a.jsx("td",{className:"text-wrap",children:Be.location}),a.jsx("td",{className:"text-wrap",children:Be.materialgroup}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>At(Be),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},qe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:g.length===0?"No materials loaded from API":U?`No materials found matching "${U}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:Tt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),Y&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Customers"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:pe})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:H,onChange:Be=>ee(Be.target.value),children:[a.jsx("option",{value:"customerId",children:"Customer ID"}),a.jsx("option",{value:"name",children:"Customer Name"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:H==="customerId"?"Enter Customer ID...":"Search by Customer Name...",value:re,onChange:De})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Nt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),M.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:M.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:M.map((Be,qe)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Be.cnNo}),a.jsx("td",{className:"text-wrap",children:Be.name1}),a.jsx("td",{className:"text-wrap",children:Be.city}),a.jsx("td",{className:"text-wrap",children:Be.email}),a.jsx("td",{className:"text-wrap",children:Be.contactNo}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Xe(Be),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},qe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:p.length===0?"No customers loaded from API":re?`No customers found matching "${re}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:pe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx(gf,{show:n,onClose:()=>s(!1),onImportSuccess:ne,masterDataType:"customerPriceList"})]})}const xb={code:"",name:"",address:"",city:"",state:"",country:"",postalCode:"",contactPerson:"",contactNumber:""},wDe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(xb),[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState(!1),[u,h]=N.useState(1),[m,p]=N.useState(10),[v,g]=N.useState(""),b=B=>{alert(`Import completed: ${B.results.imported} records imported`),d(!1),A()},y=e.filter(B=>{if(!v)return!0;const Q=v.toLowerCase();return B.code?.toLowerCase().includes(Q)||B.name?.toLowerCase().includes(Q)||B.address?.toLowerCase().includes(Q)||B.city?.toLowerCase().includes(Q)||B.state?.toLowerCase().includes(Q)||B.country?.toLowerCase().includes(Q)||B.postalCode?.toLowerCase().includes(Q)||B.contactPerson?.toLowerCase().includes(Q)||B.contactNumber?.toLowerCase().includes(Q)}),C=Math.ceil(y.length/m),w=(u-1)*m,k=w+m,S=y.slice(w,k),D=B=>{g(B.target.value),h(1)},E=B=>{h(B)},T=()=>{const Q=(v?y:e).map((ae,ne)=>({"S.No":ne+1,"Location Name":ae.name||"",Address:ae.address||"",City:ae.city||"",State:ae.state||"",Country:ae.country||"","Postal Code":ae.postalCode||"","Contact Person":ae.contactPerson||"","Contact Number":ae.contactNumber||"","Company ID":ae.companyId||"","Financial Year":ae.financialYear||"","Created Date":ae.createdAt?new Date(ae.createdAt).toLocaleDateString():"","Updated Date":ae.updatedAt?new Date(ae.updatedAt).toLocaleDateString():""})),U=nn.book_new(),J=nn.json_to_sheet(Q),Y=[{wch:8},{wch:25},{wch:40},{wch:20},{wch:20},{wch:15},{wch:12},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15},{wch:15}];J["!cols"]=Y,nn.book_append_sheet(U,J,"Location Master");const oe=new Date,M=oe.toLocaleDateString("en-GB").replace(/\//g,"-"),V=oe.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),ee=`Location-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${M}-${V}.xlsx`;Zu(U,ee);const re=v?y.length:e.length;alert(`Excel file exported successfully: ${re} records exported as ${ee}`)},A=async()=>{try{const B=localStorage.getItem("selectedCompanyId"),Q=localStorage.getItem("financialYear"),U=await Oe.get("/api/locations",{params:{companyId:B,financialYear:Q}});t(U.data),h(1)}catch(B){console.error("Error fetching locations:",B),alert("Error loading locations")}};N.useEffect(()=>{A()},[]);const L=B=>{n({...r,[B.target.name]:B.target.value})},P=async B=>{B.preventDefault();try{const Q=localStorage.getItem("selectedCompanyId"),U=localStorage.getItem("financialYear"),J={...r,companyId:Q,financialYear:U};o?(await Oe.put(`/api/locations/${o}`,J),alert("Location updated successfully!")):(await Oe.post("/api/locations",J),alert("Location created successfully!")),n(xb),l(null),i(!1),A()}catch(Q){console.error("Error saving location:",Q),alert("Error saving location. Please try again.")}},O=B=>{n({name:B.name||"",address:B.address||"",city:B.city||"",state:B.state||"",country:B.country||"",postalCode:B.postalCode||"",contactPerson:B.contactPerson||"",contactNumber:B.contactNumber||""}),l(B._id),i(!0)},Z=()=>{n(xb),l(null),i(!0)},z=()=>{i(!1),n(xb),l(null)},K=B=>({code:"Location Code",name:"Location Name",address:"Address",city:"City",state:"State",country:"Country",postalCode:"Postal Code",contactPerson:"Contact Person",contactNumber:"Contact Number"})[B]||B.charAt(0).toUpperCase()+B.slice(1);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Location Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Location Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search locations...",value:v,onChange:D})]})}),a.jsxs("div",{className:"d-flex my-xl-auto ms-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{onClick:()=>d(!0),className:"btn btn-outline-primary btn-sm",children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:T,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export Excel",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:y.length})]}),a.jsx("div",{children:a.jsxs("button",{onClick:Z,className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add Location"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Location Name"}),a.jsx("th",{children:"Address"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"State"}),a.jsx("th",{children:"Country"}),a.jsx("th",{children:"Postal Code"}),a.jsx("th",{children:"Contact Person"}),a.jsx("th",{children:"Contact Number"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:S.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"10",className:"text-center",children:v?"No locations found matching your search criteria":"No locations found"})}):S.map((B,Q)=>a.jsxs("tr",{children:[a.jsx("td",{children:w+Q+1}),a.jsx("td",{children:a.jsx("strong",{children:B.name})}),a.jsx("td",{children:B.address}),a.jsx("td",{children:B.city}),a.jsx("td",{children:B.state}),a.jsx("td",{children:B.country}),a.jsx("td",{children:B.postalCode}),a.jsx("td",{children:B.contactPerson}),a.jsx("td",{children:B.contactNumber}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>O(B),children:"Edit"})})]},B._id))})]})})})]}),C>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsx("div",{className:"text-muted"}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:B=>{B.preventDefault(),u>1&&E(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:C},(B,Q)=>a.jsx("li",{className:`page-item ${u===Q+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:U=>{U.preventDefault(),E(Q+1)},children:Q+1})},Q)),a.jsx("li",{className:`page-item ${u===C?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:B=>{B.preventDefault(),u<C&&E(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),a.jsx(gf,{show:c,onClose:()=>d(!1),onImportSuccess:b,masterDataType:"location"}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",tabIndex:"-1",role:"dialog",style:{display:"block"},"aria-modal":"true",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:o?"Edit Location":"Add New Location"}),a.jsx("button",{type:"button",className:"btn-close",onClick:z})]}),a.jsxs("form",{onSubmit:P,children:[a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"row",children:Object.keys(xb).map(B=>a.jsx("div",{className:`${B==="code"||B==="city"||B==="postalCode"?"col-md-3":"col-md-4"} mb-3`,children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:`${B==="code"||B==="city"||B==="postalCode"?"col-5":"col-4"}`,children:a.jsx("label",{className:"form-label",children:K(B)})}),a.jsx("div",{className:`${B==="code"||B==="city"||B==="postalCode"?"col-7":"col-8"} `,children:a.jsx("input",{type:B==="contactNumber"?"tel":"text",name:B,className:"form-control",placeholder:`Enter ${K(B)}`,value:r[B],onChange:L,required:B==="name"})})]})},B))})}),a.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:z,children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Location":"Create Location"})]})]})]})})})]})]})},SDe=()=>{const[e,t]=N.useState({}),[r,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState(!1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),[u,h]=N.useState(1),[m,p]=N.useState(10),[v,g]=N.useState("");N.useEffect(()=>{w()},[]);const[b,y]=N.useState({taxCode:"",taxName:"",cgst:"",sgst:"",igst:"",companyId:c,financialYear:d}),C=oe=>{alert(`Import completed: ${oe.results.imported} records imported`),l(!1),w()},w=async()=>{const oe=await Oe.get("/api/tax",{params:{companyId:c,financialYear:d}});n(oe.data),h(1)},k=r.filter(oe=>{if(!v)return!0;const M=v.toLowerCase();return oe.taxCode?.toLowerCase().includes(M)||oe.taxName?.toLowerCase().includes(M)||oe.cgst?.toString().includes(M)||oe.sgst?.toString().includes(M)||oe.igst?.toString().includes(M)||((parseFloat(oe.cgst)||0)+(parseFloat(oe.sgst)||0)+(parseFloat(oe.igst)||0)).toString().includes(M)}),S=Math.ceil(k.length/m),D=(u-1)*m,E=D+m,T=k.slice(D,E),A=oe=>{g(oe.target.value),h(1)},L=oe=>{h(oe)},P=()=>{const M=(v?k:r).map(X=>({"Tax Code":X.taxCode||"","Tax Name":X.taxName||"","CGST %":X.cgst||"","SGST %":X.sgst||"","IGST %":X.igst||"","Total Tax %":(parseFloat(X.cgst)||0)+(parseFloat(X.sgst)||0)+(parseFloat(X.igst)||0),"Tax Type":parseFloat(X.igst)>0?"IGST":"CGST + SGST","Created Date":X.createdAt?new Date(X.createdAt).toLocaleDateString():"","Updated Date":X.updatedAt?new Date(X.updatedAt).toLocaleDateString():""})),V=nn.book_new(),H=nn.json_to_sheet(M),ee=[{wch:12},{wch:25},{wch:10},{wch:10},{wch:10},{wch:12},{wch:15},{wch:15},{wch:15}];H["!cols"]=ee,nn.book_append_sheet(V,H,"Tax Master");const re=new Date,ae=re.toLocaleDateString("en-GB").replace(/\//g,"-"),ne=re.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),G=`Tax-Master${v?`-Filtered-${v.replace(/[^a-zA-Z0-9]/g,"_")}`:""}-${ae}-${ne}.xlsx`;Zu(V,G);const de=v?k.length:r.length;alert(`Excel file exported successfully: ${de} records exported as ${G}`)},O=(oe,M)=>{switch(oe){case"taxCode":if(!M)return"Required";if(M.length>4)return"Max 4 characters";break;case"taxName":if(!M)return"Required";if(M.length>25)return"Max 25 characters";break;case"cgst":case"igst":if(!M)return"Required";if(M.length>2)return"Max 2 digits";break;default:return""}return""},Z=oe=>{const{name:M,value:V}=oe.target;let H=V;switch(M){case"taxCode":H=V.replace(/[^A-Za-z0-9 ]/g,"").slice(0,4);break;case"taxName":H=V.replace(/[^A-Za-z0-9 ]/g,"").slice(0,25);break;case"cgst":case"sgst":case"igst":H=V.replace(/[^0-9]/g,"").slice(0,2);break}const ee=O(M,H);y({...b,[M]:H}),t({...e,[M]:ee})},z=()=>{y({taxCode:"",taxName:"",cgst:"",sgst:"",igst:""}),t({}),i(null)},K=async oe=>{oe.preventDefault();const M={};if(Object.entries(b).forEach(([H,ee])=>{const re=O(H,ee);re&&(M[H]=re)}),Object.keys(M).length>0){t(M);return}const V={...b,companyId:c,financialYear:d};try{s?(await Oe.put(`/api/tax/${s}`,V),alert("Tax updated!")):(await Oe.post("/api/tax",V),alert("Tax added!")),z(),w(),Y()}catch(H){console.error(H),alert("Failed to save")}},B=oe=>{y({taxCode:oe.taxCode,taxName:oe.taxName,cgst:oe.cgst,sgst:oe.sgst,igst:oe.igst}),i(oe._id)},[Q,U]=N.useState(!1),J=()=>U(!0),Y=()=>{U(!1),s||z()};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Taxes Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Taxes Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by code, name, or percentage...",value:v,onChange:A})]})}),a.jsxs("div",{className:"d-flex my-xl-auto ms-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>l(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:P,title:v?"Export filtered results to Excel":"Export all data to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export",v&&a.jsx("span",{className:"badge bg-primary ms-1",children:k.length})]}),a.jsx("div",{children:a.jsxs("a",{onClick:()=>{z(),J()},className:"btn btn-primary btn-sm",children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Tax"]})})]})]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Code"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"CGST %"}),a.jsx("th",{children:"SGST %"}),a.jsx("th",{children:"IGST %"}),a.jsx("th",{children:"Total %"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:T.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"text-center",children:v?"No taxes found matching your search criteria":"No taxes found"})}):T.map(oe=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:oe.taxCode})}),a.jsx("td",{children:oe.taxName}),a.jsxs("td",{className:"text-center",children:[oe.cgst,"%"]}),a.jsxs("td",{className:"text-center",children:[oe.sgst,"%"]}),a.jsxs("td",{className:"text-center",children:[oe.igst,"%"]}),a.jsx("td",{className:"text-center",children:a.jsxs("strong",{children:[(parseFloat(oe.cgst)||0)+(parseFloat(oe.sgst)||0)+(parseFloat(oe.igst)||0),"%"]})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{B(oe),J()},children:"Edit"})})]},oe._id))})]})}),S>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsxs("div",{className:"text-muted",children:["Page ",u," of ",S]}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:oe=>{oe.preventDefault(),u>1&&L(u-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:S},(oe,M)=>a.jsx("li",{className:`page-item ${u===M+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:V=>{V.preventDefault(),L(M+1)},children:M+1})},M)),a.jsx("li",{className:`page-item ${u===S?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:oe=>{oe.preventDefault(),u<S&&L(u+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]})]})]}),Q&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[s?"Edit":"Add"," Tax Code"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:Y,"aria-label":"Close"})]}),a.jsxs("form",{onSubmit:K,children:[a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"row",children:["taxCode","taxName","cgst","sgst","igst"].map(oe=>a.jsx("div",{className:` ${oe==="taxName"?"col-md-4":"col-md-2"} mb-3`,children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:`${oe==="taxName"?"col-3":"col-6"}`,children:a.jsx("label",{className:"form-label ",children:oe==="taxCode"?"Tax Code":oe==="taxName"?"Tax Name":oe==="sgst"?"SGST/UGST%":`${oe.toUpperCase()}%`})}),a.jsxs("div",{className:`${oe==="taxName"?"col-9":"col-6"}`,children:[a.jsx("input",{type:"text",name:oe,value:b[oe],onChange:Z,className:`form-control ${e[oe]?"is-invalid":""}`,placeholder:oe==="taxCode"?"Enter tax code (max 4 chars)":oe==="taxName"?"Enter tax name (max 25 chars)":"Enter percentage (max 2 digits)"}),e[oe]&&a.jsx("div",{className:"invalid-feedback",children:e[oe]})]})]})},oe))})}),a.jsxs("div",{className:"modal-footer d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:Y,children:"Cancel"}),a.jsx("button",{className:"btn btn-primary",type:"submit",children:s?"Update Tax":"Save Tax"})]})]})]})})})]}),a.jsx(gf,{show:o,onClose:()=>l(!1),onImportSuccess:C,masterDataType:"tax"})]})};function CDe(){const[e,t]=N.useState({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),r=localStorage.getItem("selectedCompanyId"),n=localStorage.getItem("financialYear"),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState(""),[u,h]=N.useState(null),[m,p]=N.useState([]),[v,g]=N.useState(!1),[b,y]=N.useState(!1),[C,w]=N.useState("internal"),[k,S]=N.useState(""),[D,E]=N.useState(""),T=["Karnataka","Kerala","Tamil Nadu","Andhra Pradesh","Telangana","Maharashtra","Gujarat","Rajasthan","Punjab","Haryana"],A=["India","USA","Germany","France","UK"],[L,P]=N.useState(!1),[O,Z]=N.useState(1),[z,K]=N.useState(""),B=10;N.useEffect(()=>{Q(),U()},[]),N.useEffect(()=>{Z(1)},[z]);const Q=async()=>{const ue=await Oe.get("/api/vendor-categories",{params:{companyId:r,financialYear:n}});i(ue.data)},U=async()=>{const se=(await Oe.get("/api/vendors",{params:{companyId:r,financialYear:n}})).data.sort((ye,Ne)=>new Date(Ne.createdAt)-new Date(ye.createdAt));l(se)},J=o.filter(ue=>{const se=ue.vnNo?.toLowerCase()||"",ye=ue.name1?.toLowerCase()||"",Ne=ue.categoryId?.categoryName?.toLowerCase()||"",Ue=z.toLowerCase();return se.includes(Ue)||ye.includes(Ue)||Ne.includes(Ue)}),Y=Math.ceil(J.length/B),oe=O*B,M=oe-B,V=J.slice(M,oe),H=ue=>{ue>=1&&ue<=Y&&Z(ue)},ee=ue=>{const{name:se,value:ye}=ue.target;se==="email"&&ye&&(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(ye)?ue.target.setCustomValidity(""):ue.target.setCustomValidity("Please enter a valid email address")),t(Ne=>({...Ne,[se]:ye}))},re=()=>{const ue=J.map(Le=>({"Vendor No":Le.vnNo||"","Name 1":Le.name1||"","Name 2":Le.name2||"",Category:Le.categoryId?.categoryName||"","Search Term":Le.search||"","Address 1":Le.address1||"","Address 2":Le.address2||"","Extra Addresses":Le.extraAddresses?Le.extraAddresses.join(", "):"",City:Le.city||"",Pincode:Le.pincode||"",Region:Le.region||"",Country:Le.country||"","Contact No":Le.contactNo||"","Contact Person":Le.contactname||"",Email:Le.email||"","Vendor Type":Le.vendorIdType||"internal","External Vendor ID":Le.externalVendorId||"","Is Deleted":Le.isDeleted?"Yes":"No","Is Blocked":Le.isBlocked?"Yes":"No","Created Date":Le.createdAt?new Date(Le.createdAt).toLocaleDateString():"","Updated Date":Le.updatedAt?new Date(Le.updatedAt).toLocaleDateString():""})),se=nn.book_new(),ye=nn.json_to_sheet(ue),Ne=[{wch:15},{wch:25},{wch:25},{wch:20},{wch:20},{wch:30},{wch:30},{wch:40},{wch:15},{wch:10},{wch:15},{wch:15},{wch:15},{wch:20},{wch:25},{wch:15},{wch:20},{wch:12},{wch:12},{wch:15},{wch:15}];ye["!cols"]=Ne,nn.book_append_sheet(se,ye,"Vendors");const Ue=new Date,Qe=Ue.toLocaleDateString("en-GB").replace(/\//g,"-"),ot=Ue.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),xt=`Vendor-Master-${Qe}-${ot}.xlsx`;Zu(se,xt),alert(`Excel file exported successfully as: ${xt}`)},ae=async()=>{try{const ue={...e,companyId:r,financialYear:n,vendorIdType:C,externalVendorId:C==="external"?k:null};if(u)await Oe.put(`/api/vendors/${u}`,ue),alert("Vendor updated!");else{const se=await Oe.post("/api/vendors",ue);d(se.data.vnNo),alert(`Vendor saved! VNNo: ${se.data.vnNo}`)}U(),t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),h(null),y(!1),P(!1),S(""),w("internal")}catch(ue){console.error(ue),alert("Error saving vendor")}},ne=async ue=>{if(ue.preventDefault(),!e.categoryId||!e.name1){alert("Please fill in required fields");return}y(!0)},ie=ue=>{t({categoryId:ue.categoryId?._id,name1:ue.name1,name2:ue.name2,search:ue.search,address1:ue.address1,address2:ue.address2,city:ue.city,pincode:ue.pincode,region:ue.region,country:ue.country,contactNo:ue.contactNo,contactname:ue.contactname,email:ue.email}),h(ue._id),d(ue.vnNo),P(!0)},G=()=>{t(ue=>({...ue,extraAddresses:[...ue.extraAddresses,""]}))},de=(ue,se)=>{const ye=[...e.extraAddresses];ye[ue]=se,t(Ne=>({...Ne,extraAddresses:ye}))},X=ue=>{const se=[...e.extraAddresses];se.splice(ue,1),t(ye=>({...ye,extraAddresses:se}))},le=async(ue,se,ye)=>{try{const Ne=await Oe.put(`/api/vendors/status/${ue}`,{[se]:ye});l(Ue=>Ue.map(Qe=>Qe._id===ue?{...Qe,[se]:ye}:Qe)),alert(`${se} updated successfully!`)}catch(Ne){console.error(Ne),alert("Failed to update vendor status")}},Se=ue=>{alert(`Import completed: ${ue.results.imported} records imported`),g(!1)};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb ",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Master"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Master"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search Vendors...",value:z,onChange:ue=>K(ue.target.value)})]})})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>g(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:re,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsxs("a",{href:"#",className:"btn btn-primary btn-sm",onClick:()=>{P(!0),t({categoryId:"",name1:"",name2:"",search:"",address1:"",address2:"",extraAddresses:[],city:"",pincode:"",region:"",country:"",contactNo:"",contactname:"",email:""}),h(null)},children:[a.jsx("i",{className:"ti ti-add-circle5 me-1"}),"New Vendor"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"VNNo"}),a.jsx("th",{children:"Name1"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Search"}),a.jsx("th",{children:"Address"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Delete"}),a.jsx("th",{children:"Block"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:V.length>0?V.map(ue=>a.jsxs("tr",{children:[a.jsx("td",{children:ue.vnNo}),a.jsx("td",{className:"text-wrap",children:ue.name1}),a.jsx("td",{children:ue.categoryId?.categoryName}),a.jsx("td",{className:"text-wrap",children:ue.contactNo}),a.jsx("td",{className:"text-wrap",children:ue.email}),a.jsx("td",{className:"text-wrap",children:ue.search}),a.jsx("td",{className:"text-wrap",children:ue.address1}),a.jsx("td",{className:"text-wrap",children:ue.city}),a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:ue.isDeleted||!1,onChange:se=>le(ue._id,"isDeleted",se.target.checked)})}),a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:ue.isBlocked||!1,onChange:se=>le(ue._id,"isBlocked",se.target.checked)})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>ie(ue),children:"Edit"})})]},ue._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"11",className:"text-center text-muted py-4",children:z?"No vendors found matching your search criteria":"No vendors available"})})})]})})})]}),J.length>0&&Y>1&&a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${O===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:ue=>{ue.preventDefault(),H(O-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const se=[],ye=[];se.push(1);for(let Qe=Math.max(2,O-2);Qe<=Math.min(Y-1,O+2);Qe++)se.push(Qe);Y>1&&se.push(Y);const Ne=[...new Set(se)].sort((Qe,ot)=>Qe-ot);let Ue;for(let Qe of Ne)Ue&&(Qe-Ue===2?ye.push(Ue+1):Qe-Ue!==1&&ye.push("...")),ye.push(Qe),Ue=Qe;return ye.map((Qe,ot)=>Qe==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${ot}`):a.jsx("li",{className:`page-item ${O===Qe?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:xt=>{xt.preventDefault(),H(Qe)},children:Qe})},Qe))})(),a.jsx("li",{className:`page-item ${O===Y?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:ue=>{ue.preventDefault(),H(O+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})}),L&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:u?"Edit Vendor":"Add New Vendor"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close btn-close-modal",onClick:()=>P(!1),children:a.jsx("i",{className:"fa-solid fa-x"})})]}),a.jsxs("form",{onSubmit:ne,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",className:"form-select",value:e.categoryId,onChange:ee,required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),s.map(ue=>a.jsx("option",{value:ue._id,children:ue.categoryName},ue._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Name1:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name1",className:"form-control",placeholder:"Enter Name 1",value:e.name1,onChange:ee,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Name2:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"name2",placeholder:"Enter Name 2",className:"form-control",value:e.name2,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Search Term:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"search",placeholder:"Enter Search Term",className:"form-control",value:e.search,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Address1:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"address1",placeholder:"Enter Address 1",value:e.address1,onChange:ee,className:"form-control"})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Address2:"})}),a.jsx("div",{className:"col-6",children:a.jsx("input",{type:"text",name:"address2",placeholder:"Enter Address 2",value:e.address2,onChange:ee,className:"form-control"})}),a.jsx("div",{className:"col-2",children:a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:G,children:"+"})})]})}),e.extraAddresses?.map((ue,se)=>a.jsx("div",{className:"col-md-4 mb-2 position-relative",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsxs("label",{className:"form-label",children:[`Address${se+3}`,":"]})}),a.jsxs("div",{className:"col-8 d-flex align-items-center",children:[a.jsx("input",{type:"text",placeholder:`Enter Address ${se+3}`,value:ue,onChange:ye=>de(se,ye.target.value),className:"form-control me-2"}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger",onClick:()=>X(se),children:a.jsx("i",{className:"ti ti-x"})})]})]})},se)),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"City:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"city",placeholder:"Enter City",className:"form-control",value:e.city,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Pincode:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"pincode",placeholder:"Enter Pincode",className:"form-control",value:e.pincode,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Region:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"region",className:"form-select",placeholder:"Select Region",value:e.region,onChange:ee,children:[a.jsx("option",{value:"",children:"Select Region"}),T.map(ue=>a.jsx("option",{value:ue,children:ue},ue))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Country:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"country",className:"form-select",value:e.country,onChange:ee,children:[a.jsx("option",{value:"",children:"Select Country"}),A.map(ue=>a.jsx("option",{value:ue,children:ue},ue))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"ContactNo:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"contactNo",placeholder:"Enter Contact No",className:"form-control",value:e.contactNo,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"contactname",placeholder:"Enter Contact Person Name",className:"form-control",value:e.contactname,onChange:ee})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Email:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"email",name:"email",placeholder:"Enter Email",pattern:"[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}",title:"Please enter a valid email address (e.g., user@example.com)",className:"form-control",value:e.email,onChange:ee})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>P(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Save"})]})]})]})})})]}),b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Select Vendor ID Type"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(!1),E(""),S(""),w("internal")},"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Vendor ID:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-outline-primary btn-md",onClick:()=>{w("internal"),ae()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-outline-secondary btn-md",onClick:()=>w("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),C==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"External Vendor ID"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter External Vendor ID (max 50 characters)",value:k,onChange:ue=>{ue.target.value.length<=50&&(S(ue.target.value),E(""))},onKeyPress:ue=>{ue.key==="Enter"&&k&&ae()},maxLength:50}),a.jsxs("div",{className:"form-text",children:[k.length,"/50 characters"]}),D&&a.jsx("div",{className:"alert alert-danger mt-2",role:"alert",children:D}),a.jsx("div",{className:"mt-3",children:a.jsx("button",{className:"btn btn-primary",onClick:ae,disabled:!k,children:"Confirm & Save Vendor"})})]})]})]})})})]}),a.jsx(gf,{show:v,onClose:()=>g(!1),onSuccess:Se,masterDataType:"vendor"})]})}function kDe(){const[e,t]=N.useState({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,d]=N.useState([]),[u,h]=N.useState([]),[m,p]=N.useState("vendorId"),[v,g]=N.useState("materialId"),[b,y]=N.useState(""),[C,w]=N.useState(""),[k,S]=N.useState([]),[D,E]=N.useState([]),[T,A]=N.useState([]),[L,P]=N.useState([]),[O,Z]=N.useState([]),[z,K]=N.useState(1),[B,Q]=N.useState(null),[U,J]=N.useState(!1),Y=localStorage.getItem("selectedCompanyId"),oe=localStorage.getItem("financialYear"),[M,V]=N.useState(!1);N.useEffect(()=>{ee(),re(),ae(),ne(),ie(),Oe.get("/api/locations",{params:{companyId:Y,financialYear:oe}}).then(Ae=>n(Ae.data))},[]);const H=()=>{const Ae=O.map(jr=>({Category:ue(jr.categoryId),"Vendor Name":se(jr.vendorId),"Vendor ID":ye(jr.vendorId),"Material ID":Ue(jr.materialId),"Material Description":Ne(jr.materialId),"Unit (Location)":jr.unit||"","BUM (Base Unit Measure)":jr.bum||"","Order Unit":jr.orderUnit||"",Price:jr.price||"",Buyer:jr.buyer||"","Tax Name":Qe(jr.taxId),"Tax Details":ot(jr.taxId),"Company ID":jr.companyId||"","Financial Year":jr.financialYear||"","Created Date":jr.createdAt?new Date(jr.createdAt).toLocaleDateString():"","Updated Date":jr.updatedAt?new Date(jr.updatedAt).toLocaleDateString():""})),ke=nn.book_new(),it=nn.json_to_sheet(Ae),bt=[{wch:20},{wch:25},{wch:15},{wch:20},{wch:35},{wch:15},{wch:15},{wch:15},{wch:12},{wch:20},{wch:15},{wch:25},{wch:15},{wch:15},{wch:15},{wch:15}];it["!cols"]=bt,nn.book_append_sheet(ke,it,"Vendor Price List");const Xt=new Date,Ft=Xt.toLocaleDateString("en-GB").replace(/\//g,"-"),rr=Xt.toLocaleTimeString("en-GB",{hour12:!1}).replace(/:/g,"-"),pr=`Vendor-Price-List-${Ft}-${rr}.xlsx`;Zu(ke,pr)},ee=async()=>{try{const Ae=await Oe.get("/api/vendor-categories",{params:{companyId:Y,financialYear:oe}});S(Ae.data)}catch(Ae){console.error("Error fetching categories:",Ae)}},re=async()=>{try{const Ae=await Oe.get("/api/vendors",{params:{companyId:Y,financialYear:oe}});E(Ae.data)}catch(Ae){console.error("Error fetching vendors:",Ae)}},ae=async()=>{try{const Ae=await Oe.get("/api/material",{params:{companyId:Y,financialYear:oe}});A(Ae.data)}catch(Ae){console.error("Error fetching materials:",Ae)}},ne=async()=>{try{const ke=await(await fetch("/api/tax",{params:{companyId:Y,financialYear:oe}})).json();P(ke)}catch(Ae){console.error("Error fetching taxes:",Ae)}},ie=async()=>{try{const Ae=localStorage.getItem("selectedCompanyId"),ke=localStorage.getItem("financialYear");console.log("comanyvendorpl",Ae,ke);const it=new URLSearchParams({companyId:Ae,financialYear:ke}).toString(),Xt=await(await fetch(`/api/vendor-price-lists?${it}`)).json();Z(Xt)}catch(Ae){console.error("Error fetching price list:",Ae)}},G=async Ae=>{const{name:ke,value:it}=Ae.target;let bt={...e,[ke]:it};if(ke==="materialId")try{const rr=(await(await fetch(`/api/material/${it}`)).json()).conversionValue||1;K(rr)}catch(Xt){console.error("Error fetching material:",Xt),K(1)}t(bt)},de=async Ae=>{Ae.preventDefault();const ke=[];e.unit.trim()||ke.push("Unit (Location) is required."),e.categoryId||ke.push("Category is required."),e.vendorId||ke.push("Vendor is required."),e.materialId||ke.push("Material is required."),e.bum||ke.push("BUM (Base Unit Multiplier) is required."),e.buyer.trim()||ke.push("Buyer is required.");const it={...e,companyId:Y,financialYear:oe};if(ke.length>0){alert(ke.join(`
`));return}try{if(B){console.log("Updating with ID:",B),console.log("Form data:",e);const bt=await fetch(`/api/vendor-price-lists/${B}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)});if(console.log("Update response status:",bt.status),bt.ok)alert("Vendor Price List Updated Successfully!"),Q(null);else{const Xt=await bt.text();throw console.error("Update failed:",Xt),new Error(`Update failed: ${bt.status} - ${Xt}`)}}else{const bt=await fetch("/api/vendor-price-lists",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(it)});if(bt.ok)alert("Vendor Price List Saved Successfully!");else{const Xt=await bt.text();throw console.error("Save failed:",Xt),new Error(`Save failed: ${bt.status} - ${Xt}`)}}X(),J(!1),Le(!1),ie()}catch(bt){console.error("Error saving data:",bt),alert("Failed to save Vendor Price List: "+bt.message)}},X=()=>{t({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),K(1),Q(null)},le=async Ae=>{try{console.log("Editing ID:",Ae);const ke=await fetch(`/api/vendor-price-lists/${Ae}`);if(!ke.ok)throw new Error(`Failed to fetch: ${ke.status} - ${ke.statusText}`);const it=await ke.json(),bt=Xt=>Xt?typeof Xt=="string"?Xt:typeof Xt=="object"&&(Xt.$oid||Xt._id)||Xt.toString():"";t({categoryId:bt(it.categoryId),vendorId:bt(it.vendorId),materialId:bt(it.materialId),unit:it.unit,bum:it.bum,orderUnit:it.orderUnit,price:it.price,buyer:it.buyer,taxId:bt(it.taxId)}),Q(Ae),J(!0),Le(!0)}catch(ke){console.error("Error fetching record for edit:",ke),alert("Failed to load record for editing: "+ke.message)}},Se=Ae=>Ae?typeof Ae=="string"?Ae:typeof Ae=="object"&&(Ae.$oid||Ae._id)||Ae.toString():null,ue=Ae=>{const ke=Se(Ae),it=k.find(bt=>bt._id===ke);return it?it.categoryName:"Unknown"},se=Ae=>{const ke=Se(Ae),it=D.find(bt=>bt._id===ke);return it?it.name1:"Unknown"},ye=Ae=>{const ke=Se(Ae),it=D.find(bt=>bt._id===ke);return it?it.vnNo||it.vendorId:"Unknown"},Ne=Ae=>{const ke=Se(Ae),it=T.find(bt=>bt._id===ke);return it?it.description:"Unknown"},Ue=Ae=>{const ke=Se(Ae),it=T.find(bt=>bt._id===ke);return it?it.materialId:"Unknown"},Qe=Ae=>{if(!Ae)return"No Tax";const ke=Se(Ae),it=L.find(bt=>bt._id===ke);return it?it.taxName:"Unknown"},ot=Ae=>{if(!Ae)return"No Tax";const ke=Se(Ae),it=L.find(bt=>bt._id===ke);return it?`CGST: ${it.cgst}%, SGST: ${it.sgst}%, IGST: ${it.igst}%`:"Unknown"},[xt,Le]=N.useState(!1),[dt,Tt]=N.useState(1),At=10,Vt=O.slice((dt-1)*At,dt*At),xe=Math.ceil(O.length/At),he=Ae=>{Ae>=1&&Ae<=xe&&Tt(Ae)},ve=()=>{i(!0),y(""),d([])},pe=()=>{i(!1),y(""),d([])},De=Ae=>{y(Ae.target.value)},Ye=()=>{if(!b.trim()){d([]);return}if(m==="vendorId"){const Ae=D.filter(ke=>(ke.vendorId||"").toLowerCase().includes(b.toLowerCase()));d(Ae)}else{const Ae=D.filter(ke=>(ke.name1||"").toLowerCase().includes(b.toLowerCase()));d(Ae)}},Nt=()=>{d(D),y("")},Je=()=>{d([]),y("")},Xe=Ae=>{G({target:{name:"vendorId",value:Ae._id}}),pe()},Be=()=>{l(!0),w(""),h([])},qe=()=>{l(!1),w(""),h([])},ft=Ae=>{w(Ae.target.value)},Ie=()=>{if(!C.trim()){h([]);return}if(v==="materialId"){const Ae=T.filter(ke=>(ke.materialId||"").toLowerCase().includes(C.toLowerCase()));h(Ae)}else{const Ae=T.filter(ke=>(ke.description||"").toLowerCase().includes(C.toLowerCase()));h(Ae)}},Ke=()=>{h(T),w("")},Ge=()=>{h([]),w("")},lt=Ae=>{G({target:{name:"materialId",value:Ae._id}}),qe()};N.useEffect(()=>{const Ae=setTimeout(()=>{b.trim()?Ye():d([])},300);return()=>clearTimeout(Ae)},[b,m,D]),N.useEffect(()=>{const Ae=setTimeout(()=>{C.trim()?Ie():h([])},300);return()=>clearTimeout(Ae)},[C,v,T]);const Mt=Ae=>{V(!1),ie()};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Price List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Price List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search"})]})}),a.jsxs("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:[a.jsxs("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>V(!0),children:[a.jsx("i",{className:"ti ti-file-import me-1"}),"Import"]}),a.jsxs("button",{className:"btn btn-outline-success btn-sm",onClick:H,title:"Export to Excel",children:[a.jsx("i",{className:"ti ti-file-export me-1"}),"Export"]}),a.jsx("div",{children:a.jsxs("a",{href:"javascript:void(0);",className:"btn btn-primary btn-sm",onClick:()=>{Le(!0),t({categoryId:"",vendorId:"",materialId:"",unit:"",bum:"",price:"",orderUnit:"",buyer:"",taxId:""}),Q(null)},children:[a.jsx("i",{className:"ti ti-circle-plus me-1"}),"Add New Vendor Price List"]})})]})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered datatable",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Material"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"BUM"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Buyer"}),a.jsx("th",{children:"Tax"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Vt.map(Ae=>a.jsxs("tr",{children:[a.jsx("td",{children:se(Ae.vendorId)}),a.jsx("td",{children:ue(Ae.categoryId)}),a.jsx("td",{children:Ne(Ae.materialId)}),a.jsx("td",{className:"text-wrap",children:Ae.unit}),a.jsx("td",{className:"text-wrap",children:Ae.bum}),a.jsx("td",{className:"text-wrap",children:Ae.orderUnit}),a.jsxs("td",{className:"text-wrap",children:["Rs",Ae.price||0]}),a.jsx("td",{className:"text-wrap",children:Ae.buyer}),a.jsx("td",{className:"text-wrap",children:Qe(Ae.taxId)}),a.jsx("td",{style:{cursor:"pointer"},children:a.jsx("button",{className:"btn btn-primary btn-sm me-2",onClick:()=>le(Se(Ae._id)),children:"Edit"})})]},Se(Ae._id)))})]})})})]}),xe>1&&a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0 justify-content-end ms-auto",children:[a.jsx("li",{className:`page-item ${dt===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:Ae=>{Ae.preventDefault(),he(dt-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Array.from({length:xe},(Ae,ke)=>a.jsx("li",{className:`page-item ${dt===ke+1?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:it=>{it.preventDefault(),he(ke+1)},children:ke+1})},ke)),a.jsx("li",{className:`page-item ${dt===xe?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:Ae=>{Ae.preventDefault(),he(dt+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})}),xt&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:B?"Edit Entry":"Add New Entry"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close btn-close-modal","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>Le(!1),children:a.jsx("i",{className:"fa-solid fa-x"})})]}),a.jsxs("form",{onSubmit:de,children:[a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Unit (Location):"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"unit",className:"form-select form-select-sm",value:e.unit,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select"}),r.map(Ae=>a.jsx("option",{value:Ae.name,children:Ae.name},Ae.name))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"categoryId",className:"form-select",value:e.categoryId,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),k.map(Ae=>a.jsx("option",{value:Ae._id,children:Ae.categoryName},Ae._id))]})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Vendor:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"vendorId",className:"form-select me-2",value:e.vendorId,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select Vendor"}),D.map(Ae=>a.jsx("option",{value:Ae._id,children:Ae.name1},Ae._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:ve,title:"Search Vendor",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Material:"})}),a.jsxs("div",{className:"col-8 d-flex",children:[a.jsxs("select",{name:"materialId",className:"form-select me-2",value:e.materialId,onChange:G,required:!0,children:[a.jsx("option",{value:"",children:"Select Material"}),T.map(Ae=>a.jsx("option",{value:Ae._id,children:Ae.description},Ae._id))]}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:Be,title:"Search Material",children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label",children:"Base Unit (BUM):"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"number",name:"bum",className:"form-control",placeholder:"Enter Base Unit (BUM)",value:e.bum,onChange:Ae=>{Ae.target.value=Math.max(0,Ae.target.value),G(Ae)},required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Price:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",step:"0.01",name:"price",className:"form-control",placeholder:"Enter Price",value:e.price,onChange:G})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Buyer:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"buyer",className:"form-control",placeholder:"Enter Buyer",value:e.buyer,onChange:G,required:!0})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Order Unit:"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"number",name:"orderUnit",className:"form-control",placeholder:"Auto-calculated",value:e.orderUnit,onChange:Ae=>{Ae.target.value=Math.max(0,Ae.target.value),G(Ae)}})})]})}),a.jsx("div",{className:"col-md-4 mb-2",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label",children:"Tax:"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"taxId",className:"form-select",value:e.taxId,onChange:G,children:[a.jsx("option",{value:"",children:"Select Tax"}),L.map(Ae=>a.jsx("option",{value:Ae._id,children:Ae.taxName},Ae._id))]})})]})})]})}),a.jsxs("div",{className:"modal-footer d-flex align-items-center justify-content-between gap-1",children:[a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>Le(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:B?"Update":"Save"})]})]})]})})})]}),s&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:pe})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:m,onChange:Ae=>p(Ae.target.value),children:[a.jsx("option",{value:"vendorId",children:"Vendor ID"}),a.jsx("option",{value:"name",children:"Vendor Name"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:m==="vendorId"?"Enter Vendor ID...":"Search by Vendor Name...",value:b,onChange:De})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Nt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),c.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Je,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:c.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:c.map((Ae,ke)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Ae.vnNo}),a.jsx("td",{className:"text-wrap",children:Ae.name1}),a.jsx("td",{className:"text-wrap",children:Ae.contactNo}),a.jsx("td",{className:"text-wrap",children:Ae.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Xe(Ae),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:D.length===0?"No vendors loaded from API":b?`No vendors found matching "${b}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:pe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:qe})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:v,onChange:Ae=>g(Ae.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:v==="materialId"?"Enter Material ID (e.g., MMNR-100000 or 100000)":"Search by Description...",value:C,onChange:ft})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ke,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),u.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ge,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:u.length>0?a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:u.map((Ae,ke)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-wrap",children:Ae.materialId}),a.jsx("td",{className:"text-wrap",children:Ae.description}),a.jsx("td",{className:"text-wrap",children:Ae.baseUnit}),a.jsx("td",{className:"text-wrap",children:Ae.location}),a.jsx("td",{className:"text-wrap",children:Ae.materialgroup}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>lt(Ae),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:T.length===0?"No materials loaded from API":C?`No materials found matching "${C}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:qe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),a.jsx(gf,{show:M,onClose:()=>V(!1),onImportSuccess:Mt,masterDataType:"vendorPriceList"})]})})}function M8(){const e=new Date().toISOString().split("T")[0],[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState(null),[l,c]=N.useState(!1),[d,u]=N.useState(!1),[h,m]=N.useState(!1),[p,v]=N.useState([]),[g,b]=N.useState(null),[y,C]=N.useState([]),[w,k]=N.useState(!1),[S,D]=N.useState("materialId"),[E,T]=N.useState(""),[A,L]=N.useState(!1),P=localStorage.getItem("selectedCompanyId"),O=localStorage.getItem("financialYear");N.useEffect(()=>{Oe.get("/api/material",{params:{companyId:P,financialYear:O}}).then(Ge=>{v(Ge.data),console.log("Materials loaded:",Ge.data)}).catch(Ge=>console.error("Error fetching materials:",Ge))},[]),N.useEffect(()=>{if(!A&&!E){C([]);return}const Ge=p.filter(lt=>{if(A&&!E)return!0;const Mt=E.toLowerCase();return(lt[S]?.toString().toLowerCase()||"").includes(Mt)});C(Ge)},[p,E,S,A]);const Z=Ge=>{if(z!==null&&i?.items){const lt=[...i.items];lt[z]&&(lt[z]={...lt[z],materialId:Ge.materialId,description:Ge.description,baseUnit:Ge.baseUnit,price:Ge.price},o({...i,items:lt}))}k(!1),K(null)},[z,K]=N.useState(null),[B,Q]=N.useState({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",customer:"",location:"",availableQty:0,isdelete:!1}),[U,J]=N.useState(""),[Y,oe]=N.useState("soNumber"),[M,V]=N.useState(!1),[H,ee]=N.useState([]),[re,ae]=N.useState(null),[ne,ie]=N.useState("name1"),[G,de]=N.useState(""),[X,le]=N.useState(!1),[Se,ue]=N.useState([]),[se,ye]=N.useState(""),[Ne,Ue]=N.useState(!1),[Qe,ot]=N.useState(!1);N.useEffect(()=>{Oe.get("/api/sales-orders",{params:{companyId:P,financialYear:O}}).then(Ge=>r(Ge.data)).catch(Ge=>console.error("Error fetching sales orders",Ge)),Oe.get("/api/goodsissuecategory",{params:{companyId:P,financialYear:O}}).then(Ge=>s(Ge.data)).catch(Ge=>console.error("Error fetching categories",Ge)),Oe.get("/api/customers",{params:{companyId:P,financialYear:O}}).then(Ge=>ee(Ge.data)).catch(Ge=>console.error("Error fetching customers",Ge))},[]);const xt=()=>{console.log("Fetching documents..."),Oe.get("/api/goodsissue",{params:{companyId:P,financialYear:O}}).then(Ge=>{console.log("Documents fetched:",Ge.data),ue(Ge.data)}).catch(Ge=>{console.error("Error fetching documents",Ge)})};N.useEffect(()=>{console.log("Categories loaded:",n),n.forEach(Ge=>{console.log(`Category: "${Ge.categoryName}" (length: ${Ge.categoryName.length})`)})},[n]);const Le=Ge=>{o(Ge),Q(lt=>({...lt,customer:Ge.sales||Ge.customer||Ge.customerName,location:Ge.deliveryLocation||""})),c(!1)},dt=Ge=>{Q(lt=>({...lt,customer:Ge.name1})),u(!1)},Tt=Ge=>{if(Q(lt=>({...lt,docnumber:Ge.docnumber,documentDate:Ge.documentDate||Ge.issueDate||e,postingDate:Ge.postingDate||e,reference:Ge.reference||"",customer:Ge.customer||"",location:Ge.location||""})),ae(Ge),Ge.salesOrderId){const lt=t.find(Mt=>Mt._id===Ge.salesOrderId);lt&&o(lt)}else Ge.items&&o({soNumber:Ge.docnumber,items:Ge.items,sales:Ge.customer,deliveryLocation:Ge.location});m(!1)},[At,Vt]=N.useState(!1),xe=Ge=>{const lt=Ge.target.value;console.log(`Selected category: "${lt}" (length: ${lt.length})`);let Mt="",Ae=!1;const ke=lt.trim().toLowerCase();ke==="cancel"?(Ae=!0,Vt(!0),console.log("Cancel category selected - enabling document search"),xt()):ke==="demo"?Mt=`DMP-${Date.now()}`:ke==="display"&&(Ae=!0,console.log("Display category selected - enabling document search"),xt());const it=n.find(bt=>bt.categoryName.trim().toLowerCase()===ke);console.log("Selected category object:",it),console.log("Document number enabled:",Ae),Q(bt=>({...bt,category:lt,catdesc:it?.description||"",docnumber:Ae?"":Mt})),ot(Ae)},he=Ge=>{const lt=Ge.target.value;if(Q(Mt=>({...Mt,docnumber:lt})),lt.length>2){const Mt=Se.find(Ae=>Ae.docnumber&&Ae.docnumber.toLowerCase().includes(lt.toLowerCase()));Mt&&Tt(Mt)}},ve=(Ge,lt,Mt)=>{const Ae=[...i.items];Ae[Ge][lt]=Mt,o({...i,items:Ae})},pe=async Ge=>{if(Ge.preventDefault(),!i)return alert("Please select a Sales Order.");const lt={...B,salesOrderId:i._id,items:i.items,issueDate:e};try{if(At){await Oe.patch(`/api/goodsissue/${re._id}`,{isdelete:!0}),alert("Goods Issue cancelled successfully!");return}else await Oe.post("/api/goodsissue",lt),alert("Goods Issue saved successfully!"),Q({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",customer:"",location:"",availableQty:0}),o(null),ot(!1)}catch(Mt){console.error("Error saving goods issue",Mt),alert("Failed to save goods issue")}},De=t.filter(Ge=>!M&&!U?!1:(Ge[Y]?.toLowerCase()||"").includes(U.toLowerCase())),Ye=H.filter(Ge=>!X&&!G?!1:(Ge[ne]?.toLowerCase()||"").includes(G.toLowerCase())),Nt=Se.filter(Ge=>!Ne&&!se?!1:(Ge.docnumber?.toLowerCase()||"").includes(se.toLowerCase())),Je=()=>{J(""),V(!0)},Xe=()=>{J(""),V(!1)},Be=()=>{de(""),le(!0)},qe=()=>{de(""),le(!1)},ft=()=>{ye(""),Ue(!0),xt()},Ie=()=>{ye(""),Ue(!1)},Ke=B.category.trim().toLowerCase()==="display";return a.jsxs("div",{className:"content p-3",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Material Issue"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Issue"})]})})]})}),a.jsxs("form",{onSubmit:pe,children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header p-2",children:[a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Category"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{name:"category",className:"form-select form-select-sm",value:B.category,onChange:xe,children:[a.jsx("option",{value:"",children:"Select"}),n.map(Ge=>a.jsx("option",{value:Ge.categoryName,children:Ge.categoryName},Ge._id))]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Description"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",name:"catdesc",className:"form-control form-control-sm",value:B.catdesc,readOnly:!0})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Sales Order"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",name:"so",value:i?.soNumber||"",className:"form-control form-control-sm",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>c(!0),children:"Search"})]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Doc Number"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",name:"docnumber",className:"form-control form-control-sm",value:B.docnumber,onChange:he,readOnly:!Qe,placeholder:Qe?"Enter document number...":""}),Qe&&a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>m(!0),children:"Search"})]})})]})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-xl-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"Doc Date"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:B.documentDate,onChange:Ge=>Q(lt=>({...lt,documentDate:Ge.target.value}))})})]})}),a.jsx("div",{className:"col-xl-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"Post Date"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:B.postingDate,onChange:Ge=>Q(lt=>({...lt,postingDate:Ge.target.value}))})})]})}),a.jsx("div",{className:"col-xl-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"DC/LLR/REF"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:B.reference,onChange:Ge=>Q(lt=>({...lt,reference:Ge.target.value}))})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Customer"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",value:B.customer,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>u(!0),children:"Search"})]})})]})}),a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Location"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:B.location,readOnly:!0})})]})})]})]}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"S. No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Mat Desc"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Value"}),a.jsx("th",{children:"Available Qty"}),At&&a.jsx("th",{children:"Cancel"})]})}),a.jsx("tbody",{children:i?.items?.map((Ge,lt)=>a.jsxs("tr",{children:[a.jsx("td",{children:lt+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control",value:Ge.materialId||"",readOnly:!0}),!Ke&&a.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{K(lt),k(!0)},children:"🔍"})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ge.description,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:`form-control ${Ke?"bg-light":""}`,value:Ge.quantity,onChange:Ke?void 0:Mt=>ve(lt,"quantity",Mt.target.value),readOnly:Ke,disabled:Ke})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ge.baseUnit,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:`form-control ${Ke?"bg-light":""}`,value:Ge.deliveryDate,onChange:Ke?void 0:Mt=>ve(lt,"deliveryDate",Mt.target.value),readOnly:Ke,disabled:Ke})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:`form-control ${Ke?"bg-light":""}`,value:Ge.lotNo||"",onChange:Ke?void 0:Mt=>ve(lt,"lotNo",Mt.target.value),readOnly:Ke,disabled:Ke})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ge.price,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:`form-control ${Ke?"bg-light":""}`,value:Ge.availableQty||"",onChange:Ke?void 0:Mt=>ve(lt,"availableQty",Mt.target.value),readOnly:Ke,disabled:Ke})}),At&&a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:Ge.isCancelled,onChange:Mt=>ve(lt,"isCancelled",Mt.target.checked)})})]},lt))})]})})})]}),!Ke&&a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),w&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>k(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:S,onChange:Ge=>D(Ge.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${S}`,value:E,onChange:Ge=>T(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>L(!0),children:"View All"}),(E||A)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{T(""),L(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:y.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:y.map((Ge,lt)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ge.materialId})}),a.jsx("td",{children:Ge.description}),a.jsx("td",{children:Ge.baseUnit}),a.jsx("td",{children:Ge.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Z(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:E?`No materials found for "${E}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),l&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>c(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Y,onChange:Ge=>oe(Ge.target.value),children:[a.jsx("option",{value:"soNumber",children:"SO Number"}),a.jsx("option",{value:"sales",children:"Customer"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${Y}`,value:U,onChange:Ge=>J(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Je,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(U||M)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Xe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:De.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"SO Number"}),a.jsx("th",{children:"Sales"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:De.map((Ge,lt)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Ge.soNumber})}),a.jsx("td",{children:Ge.sales||Ge.customer||Ge.customerName}),a.jsx("td",{children:Ge.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Le(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:U?`No sales orders found for "${U}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>c(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),d&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Customer"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>u(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:ne,onChange:Ge=>ie(Ge.target.value),children:[a.jsx("option",{value:"name1",children:"Customer Name"}),a.jsx("option",{value:"customerId",children:"Customer ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ne}`,value:G,onChange:Ge=>de(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Be,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(G||X)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:qe,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ye.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ye.map((Ge,lt)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ge.customerId})}),a.jsx("td",{children:Ge.name1}),a.jsx("td",{children:Ge.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>dt(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:G?`No customers found for "${G}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>u(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),h&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-file-alt me-2"}),"Search Documents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>m(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsx("select",{className:"form-select",value:"docnumber",readOnly:!0,children:a.jsx("option",{value:"docnumber",children:"Document Number"})})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Document Number",value:se,onChange:Ge=>ye(Ge.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:ft,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(se||Ne)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Ie,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Nt.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Document Number"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Nt.map((Ge,lt)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Ge.docnumber})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:Ge.category})}),a.jsx("td",{children:Ge.customer}),a.jsx("td",{children:Ge.documentDate||Ge.issueDate}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Tt(Ge),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},lt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-file-alt fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:se?`No documents found for "${se}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>m(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const _De=({show:e,onClose:t,issue:r})=>r?a.jsx("div",{className:`modal fade${e?" show d-block":""}`,tabIndex:"-1",style:e?{background:"rgba(0,0,0,0.5)"}:{display:"none"},children:a.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Preview: Goods Issue - ",r.docnumber]}),a.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:t})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Category:"})," ",r.category,a.jsx("br",{}),a.jsx("strong",{children:"Category Desc:"})," ",r.catdesc,a.jsx("br",{}),a.jsx("strong",{children:"Document Date:"})," ",r.documentDate,a.jsx("br",{}),a.jsx("strong",{children:"Posting Date:"})," ",r.postingDate,a.jsx("br",{}),a.jsx("strong",{children:"Reference:"})," ",r.reference,a.jsx("br",{}),a.jsx("strong",{children:"Customer:"})," ",r.customer,a.jsx("br",{})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Location:"})," ",r.location,a.jsx("br",{}),a.jsx("strong",{children:"Issue Date:"})," ",r.issueDate,a.jsx("br",{}),a.jsx("strong",{children:"Sales Order ID:"})," ",r.salesOrderId,a.jsx("br",{}),a.jsx("strong",{children:"Company ID:"})," ",r.companyId,a.jsx("br",{}),a.jsx("strong",{children:"Financial Year:"})," ",r.financialYear,a.jsx("br",{}),a.jsx("strong",{children:"Deleted:"})," ",r.isdelete?"Yes":"No",a.jsx("br",{})]})]}),a.jsx("h6",{className:"mt-3",children:"Items"}),a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Available Qty"}),a.jsx("th",{children:"Total (Qty × Price)"})]})}),a.jsx("tbody",{children:r.items.map((n,s)=>{const i=n.quantity*n.price;return a.jsxs("tr",{children:[a.jsx("td",{children:s+1}),a.jsx("td",{children:n.materialId}),a.jsx("td",{children:n.description}),a.jsx("td",{children:n.quantity}),a.jsx("td",{children:n.baseUnit}),a.jsx("td",{children:n.deliveryDate}),a.jsx("td",{children:n.lotNo}),a.jsx("td",{children:n.price}),a.jsx("td",{children:n.availableQty}),a.jsx("td",{children:i})]},s)})})]})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:t,children:"Close"})})]})})}):null,Ov=10,R8=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(null),[s,i]=N.useState(0),[o,l]=N.useState(1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),[u,h]=N.useState(!1);N.useEffect(()=>{m()},[o]);const m=async()=>{h(!0);try{const S=await Oe.get("/api/goodsissue",{params:{companyId:c,financialYear:d,skip:(o-1)*Ov,limit:Ov}});t(S.data.items||S.data),i(S.data.totalCount||S.data.total||S.data.length||0)}catch(S){console.error("Error fetching Goods Issues:",S)}h(!1)},p=S=>{const D=window.open("","","height=700,width=1000");D.document.write("<html><head><title>Print Goods Issue</title>"),D.document.write(`<style>
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 6px; }
        body { font-family: sans-serif; }
        h5, h6 { margin-top: 10px; }
      </style>`),D.document.write("</head><body>"),D.document.write(`<h5>Preview: Goods Issue - ${S.docnumber}</h5>
      <div>
        <div style="display:flex;gap:40px;margin-bottom:16px;">
          <div>
            <strong>Category:</strong> ${S.category||""}<br/>
            <strong>Category Desc:</strong> ${S.catdesc||""}<br/>
            <strong>Document Date:</strong> ${S.documentDate||""}<br/>
            <strong>Posting Date:</strong> ${S.postingDate||""}<br/>
            <strong>Reference:</strong> ${S.reference||""}<br/>
            <strong>Customer:</strong> ${S.customer||""}<br/>
          </div>
          <div>
            <strong>Location:</strong> ${S.location||""}<br/>
            <strong>Issue Date:</strong> ${S.issueDate||""}<br/>
            <strong>Sales Order ID:</strong> ${S.salesOrderId||""}<br/>
            <strong>Company ID:</strong> ${S.companyId||""}<br/>
            <strong>Financial Year:</strong> ${S.financialYear||""}<br/>
            <strong>Deleted:</strong> ${S.isdelete?"Yes":"No"}<br/>
          </div>
        </div>
        <h6>Items</h6>
        <table style="width:100%;border:1px solid black;">
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Base Unit</th>
              <th>Delivery Date</th>
              <th>Lot No</th>
              <th>Price</th>
              <th>Available Qty</th>
              <th>Total (Qty × Price)</th>
            </tr>
          </thead>
          <tbody>
            ${S.items&&S.items.length>0?S.items.map((E,T)=>{const A=E.quantity*E.price;return`
                      <tr>
                        <td>${T+1}</td>
                        <td>${E.materialId||""}</td>
                        <td>${E.description||""}</td>
                        <td>${E.quantity}</td>
                        <td>${E.baseUnit||""}</td>
                        <td>${E.deliveryDate||""}</td>
                        <td>${E.lotNo||""}</td>
                        <td>${E.price}</td>
                        <td>${E.availableQty}</td>
                        <td>${A}</td>
                      </tr>
                    `}).join(""):'<tr><td colSpan="10">No items</td></tr>'}
          </tbody>
        </table>
      </div>`),D.document.write("</body></html>"),D.document.close(),D.focus(),D.print(),D.close()},[v,g]=N.useState(1),b=v*Ov,y=b-Ov,C=e.slice(y,b),w=Math.ceil(e.length/Ov),k=S=>{S<1||S>w||g(S)};return a.jsxs("div",{className:"container mt-4",children:[a.jsx("h2",{className:"mb-3",children:"Goods Issue Records"}),u?a.jsx("p",{children:"Loading..."}):e.length===0?a.jsx("p",{children:"No records found."}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Document No"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Posting Date"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Issue Date"}),a.jsx("th",{children:"Preview Items"}),a.jsx("th",{children:"Print"})]})}),a.jsx("tbody",{children:C.map((S,D)=>{const E=S._id?.$oid||S._id||D;return a.jsxs("tr",{children:[a.jsx("td",{children:(v-1)*Ov+D+1}),a.jsx("td",{children:S.docnumber}),a.jsx("td",{children:S.category}),a.jsx("td",{children:S.documentDate}),a.jsx("td",{children:S.postingDate}),a.jsx("td",{children:S.reference}),a.jsx("td",{children:S.customer}),a.jsx("td",{children:S.location}),a.jsx("td",{children:S.issueDate}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-outline-info",onClick:()=>n(S),children:"Preview"})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>p(S),children:"Print"})})]},E)})})]})})})}),w>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${v===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>k(v-1),disabled:v===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const D=[],E=[];D.push(1);for(let L=Math.max(2,v-2);L<=Math.min(w-1,v+2);L++)D.push(L);w>1&&D.push(w);const T=[...new Set(D)].sort((L,P)=>L-P);let A;for(let L of T)A&&(L-A===2?E.push(A+1):L-A!==1&&E.push("...")),E.push(L),A=L;return E.map((L,P)=>L==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${P}`):a.jsx("li",{className:`page-item ${v===L?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>k(L),children:L})},L))})(),a.jsx("li",{className:`page-item ${v===w?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>k(v+1),disabled:v===w,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})})})]}),a.jsx(_De,{show:!!r,onClose:()=>n(null),issue:r})]})};function F8(){const e=new Date().toISOString().split("T")[0],[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),d=localStorage.getItem("selectedCompanyId"),u=localStorage.getItem("financialYear"),[h,m]=N.useState(null),[p,v]=N.useState(!1),[g,b]=N.useState(!1),[y,C]=N.useState(!1),[w,k]=N.useState(null),[S,D]=N.useState({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",vendor:"",location:""}),[E,T]=N.useState(""),[A,L]=N.useState("poNumber"),[P,O]=N.useState(!1),[Z,z]=N.useState(""),[K,B]=N.useState("name1"),[Q,U]=N.useState(!1),[J,Y]=N.useState(!1),[oe,M]=N.useState("materialId"),[V,H]=N.useState(""),[ee,re]=N.useState(!1);N.useEffect(()=>{Oe.get("/api/purchase-orders",{params:{companyId:d,financialYear:u}}).then(ve=>r(ve.data)).catch(ve=>console.error("Error fetching POs:",ve)),Oe.get("/api/vendors",{params:{companyId:d}}).then(ve=>s(ve.data)).catch(ve=>console.error("Error fetching vendors:",ve)),Oe.get("/api/material",{params:{companyId:d}}).then(ve=>o(ve.data)).catch(ve=>console.error("Error fetching materials:",ve)),Oe.get("/api/goodsreceiptcategory",{params:{companyId:d}}).then(ve=>c(ve.data)).catch(ve=>console.error("Error fetching categories:",ve))},[]);const ae=ve=>{m(ve),D(pe=>({...pe,vendor:ve.vendor||"",location:ve.deliveryLocation||""})),v(!1)},ne=ve=>{D(pe=>({...pe,vendor:ve.name1})),C(!1)},ie=ve=>{if(w!==null&&h?.items){const pe=[...h.items];pe[w]&&(pe[w]={...pe[w],materialId:ve.materialId,description:ve.description,baseUnit:ve.baseUnit,price:ve.price},m(De=>({...De,items:pe})))}Y(!1)},[G,de]=N.useState(!1),[X,le]=N.useState(!1),Se=ve=>{const pe=ve.target.value,De=l.find(Nt=>Nt.categoryName===pe);D(Nt=>({...Nt,category:pe,catdesc:De?.categoryName||""}));const Ye=De?.categoryName?.toLowerCase();le(Ye==="cancel"),de(Ye==="display")},ue=(ve,pe,De)=>{const Ye=[...h.items];Ye[ve][pe]=De,m({...h,items:Ye})},se=async ve=>{if(ve.preventDefault(),!h)return alert("Please select a Purchase Order.");const pe={...S,purchaseOrderId:h._id,items:h.items,receiptDate:e,companyId:d,financialYear:u};try{l.find(De=>De.categoryName===S.category)?.categoryName.toLowerCase()==="cancel"?await Oe.patch(`/api/goodsreceipt/${h._id}`,{isdelete:!0}):await Oe.post("/api/goodsreceipt",pe),alert("Goods Receipt saved successfully!"),D({category:"",catdesc:"",docnumber:"",documentDate:e,postingDate:e,reference:"",vendor:"",location:""}),m(null)}catch(De){console.error("Error saving goods receipt",De),alert("Failed to save goods receipt")}},ye=t.filter(ve=>!P&&!E?!1:(ve[A]?.toLowerCase()||"").includes(E.toLowerCase())),Ne=n.filter(ve=>!Q&&!Z?!1:(ve[K]?.toLowerCase()||"").includes(Z.toLowerCase())),Ue=i.filter(ve=>!ee&&!V?!1:(ve[oe]?.toLowerCase()||"").includes(V.toLowerCase())),[Qe,ot]=N.useState([]),[xt,Le]=N.useState("grNumber"),[dt,Tt]=N.useState(""),[At,Vt]=N.useState(!1);N.useEffect(()=>{Oe.get("/api/goodsreceipt",{params:{companyId:d,financialYear:u}}).then(ve=>ot(ve.data)).catch(ve=>console.error("Error fetching goods receipts:",ve))},[]);const xe=Qe.filter(ve=>!At&&!dt?!1:(ve[xt]?.toLowerCase()||"").includes(dt.toLowerCase())),he=ve=>{const De=ve.category?.toLowerCase()==="cancel";D(Xe=>({...Xe,docnumber:ve.docnumber,vendor:ve.vendor,location:ve.location,reference:ve.reference,documentDate:ve.documentDate,postingDate:ve.postingDate}));const{category:Ye,catdesc:Nt,...Je}=ve;m(Je),console.log("select ",ve.items),le(!De),b(!1)};return console.log("selectedPO",h),console.log("isReadOnlyMode",X),a.jsxs("div",{className:"content p-3",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Material Receipt"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Receipt"})]})})]})}),a.jsxs("form",{onSubmit:se,children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Category"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{className:"form-select form-select-sm",value:S.category,onChange:Se,children:[a.jsx("option",{value:"",children:"Select"}),l.map(ve=>a.jsx("option",{value:ve.categoryName,children:ve.categoryName},ve._id))]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Description"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.catdesc,readOnly:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"PO Number"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",value:h?.poNumber||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",disabled:X||G,onClick:()=>v(!0),children:"Search"})]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Doc Number"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.docnumber,onChange:ve=>D(pe=>({...pe,docnumber:ve.target.value})),readOnly:!X}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>b(!0),children:"Search"})]})})]})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-12 col-lg-7",children:a.jsx("label",{className:"form-label mb-0",children:"Document_Date"})}),a.jsx("div",{className:"col-12 col-lg-5",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:S.documentDate,readOnly:X,onChange:ve=>D(pe=>({...pe,documentDate:ve.target.value}))})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-12 col-lg-6",children:a.jsx("label",{className:"form-label mb-0",children:"Posting_Date"})}),a.jsx("div",{className:"col-12 col-lg-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:S.postingDate,readOnly:X,onChange:ve=>D(pe=>({...pe,postingDate:ve.target.value}))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-12 col-lg-4",children:a.jsx("label",{className:"form-label mb-0",children:"Reference"})}),a.jsx("div",{className:"col-12 col-lg-8",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.reference,onChange:ve=>D(pe=>({...pe,reference:ve.target.value})),readOnly:G})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-12 col-lg-3",children:a.jsx("label",{className:"form-label mb-0",children:"Vendor"})}),a.jsx("div",{className:"col-12 col-lg-9",children:a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.vendor,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",disabled:X||G,onClick:()=>C(!0),children:"Search"})]})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-12 col-lg-5",children:a.jsx("label",{className:"form-label mb-0",children:"Location"})}),a.jsx("div",{className:"col-12 col-lg-7",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:S.location,readOnly:!0})})]})})]})]}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"S. No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Price"}),X&&!G&&a.jsx("th",{children:"Cancel"})]})}),a.jsx("tbody",{children:(h?.items?.length?h.items:[{}]).map((ve,pe)=>a.jsxs("tr",{children:[a.jsx("td",{children:pe+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:ve.materialId||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{k(pe),Y(!0)},disabled:X||G,children:"🔍"})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:ve.description||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:ve.quantity||"",onChange:De=>ue(pe,"quantity",De.target.value),readOnly:X||G})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:ve.baseUnit||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control",value:ve.deliveryDate||e,onChange:De=>ue(pe,"deliveryDate",De.target.value),readOnly:X||G})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:ve.lotNo||"",onChange:De=>ue(pe,"lotNo",De.target.value),readOnly:X||G})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:ve.price||"",readOnly:!0})}),X&&!G&&a.jsx("td",{children:a.jsx("input",{type:"checkbox",onChange:De=>ue(pe,"cancel",De.target.checked)})})]},pe))})]})})})]}),a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),y&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Vendor"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>C(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:K,onChange:ve=>B(ve.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vendorId",children:"Vendor ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${K}`,value:Z,onChange:ve=>z(ve.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>U(!0),children:"View All"}),(Z||Q)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{z(""),U(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ne.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ne.map((ve,pe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:ve.vendorId})}),a.jsx("td",{children:ve.name1}),a.jsx("td",{children:ve.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ne(ve),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Z?`No vendors found for "${Z}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Select Purchase Order"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>v(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:ve=>L(ve.target.value),children:[a.jsx("option",{value:"poNumber",children:"PO Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${A}`,value:E,onChange:ve=>T(ve.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>O(!0),children:"View All"}),(E||P)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{T(""),O(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ye.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ye.map((ve,pe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:ve.poNumber})}),a.jsx("td",{children:ve.vendor}),a.jsx("td",{children:ve.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ae(ve),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:E?`No purchase orders found for "${E}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>v(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),J&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>Y(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:oe,onChange:ve=>M(ve.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${oe}`,value:V,onChange:ve=>H(ve.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>re(!0),children:"View All"}),(V||ee)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{H(""),re(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ue.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ue.map((ve,pe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:ve.materialId})}),a.jsx("td",{children:ve.description}),a.jsx("td",{children:ve.baseUnit}),a.jsx("td",{children:ve.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ie(ve),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:V?`No materials found for "${V}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>Y(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),g&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Select Goods Receipt"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>b(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:xt,onChange:ve=>Le(ve.target.value),children:[a.jsx("option",{value:"docnumber",children:"GR Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"location",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${xt}`,value:dt,onChange:ve=>Tt(ve.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>Vt(!0),children:"View All"}),(dt||At)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{Tt(""),Vt(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"GR Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:xe.map((ve,pe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:ve.docnumber})}),a.jsx("td",{children:ve.vendor}),a.jsx("td",{children:ve.location}),a.jsx("td",{children:ve.reference}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>he(ve),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},pe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:dt?`No receipts found for "${dt}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>b(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const vb=10,L8=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(null),[s,i]=N.useState(""),[o,l]=N.useState(""),[c,d]=N.useState(""),[u,h]=N.useState(1),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");N.useEffect(()=>{v()},[]);const v=async()=>{try{const T=await Oe.get("/api/goodsreceipt",{params:{companyId:m,financialYear:p}});t(T.data)}catch(T){console.error("Error fetching Goods Receipts:",T)}},g=T=>{const A=window.open("","","height=600,width=900");A.document.write("<html><head><title>Print Goods Receipt</title>"),A.document.write("<style>table, th, td { border: 1px solid black; border-collapse: collapse; padding: 6px; } h4 { margin-bottom: 10px; }</style>"),A.document.write("</head><body>"),A.document.write("<h4>Goods Receipt</h4>"),A.document.write('<table style="margin-bottom:10px;">'),A.document.write("<tbody>"),A.document.write(`<tr><td><strong>Document No:</strong></td><td>${T.docnumber}</td></tr>`),A.document.write(`<tr><td><strong>Document Date:</strong></td><td>${T.documentDate}</td></tr>`),A.document.write(`<tr><td><strong>Posting Date:</strong></td><td>${T.postingDate}</td></tr>`),A.document.write(`<tr><td><strong>Reference:</strong></td><td>${T.reference}</td></tr>`),A.document.write(`<tr><td><strong>Vendor:</strong></td><td>${T.vendor}</td></tr>`),A.document.write(`<tr><td><strong>Location:</strong></td><td>${T.location}</td></tr>`),A.document.write(`<tr><td><strong>Receipt Date:</strong></td><td>${T.receiptDate}</td></tr>`),A.document.write("</tbody></table>"),A.document.write("<h5>Items</h5>"),A.document.write('<table style="width:100%;">'),A.document.write("<thead><tr>"),A.document.write("<th>#</th>"),A.document.write("<th>Material ID</th>"),A.document.write("<th>Description</th>"),A.document.write("<th>Quantity</th>"),A.document.write("<th>Base Unit</th>"),A.document.write("<th>Delivery Date</th>"),A.document.write("<th>Lot No</th>"),A.document.write("<th>Price</th>"),A.document.write("<th>Total</th>"),A.document.write("</tr></thead><tbody>"),T.items&&T.items.length>0?T.items.forEach((L,P)=>{A.document.write("<tr>"),A.document.write(`<td>${P+1}</td>`),A.document.write(`<td>${L.materialId}</td>`),A.document.write(`<td>${L.description}</td>`),A.document.write(`<td>${L.quantity}</td>`),A.document.write(`<td>${L.baseUnit}</td>`),A.document.write(`<td>${L.deliveryDate}</td>`),A.document.write(`<td>${L.lotNo}</td>`),A.document.write(`<td>${L.price}</td>`),A.document.write(`<td>${(L.quantity*L.price).toFixed(2)}</td>`),A.document.write("</tr>")}):A.document.write('<tr><td colspan="9" style="text-align:center;">No items found</td></tr>'),A.document.write("</tbody></table>"),A.document.write("</body></html>"),A.document.close(),A.focus(),A.print(),A.close()},b=T=>{n(T)},y=()=>{n(null)},w=e.filter(T=>{if(o&&(T.postingDate?T.postingDate.slice(0,10):"")<o||c&&(T.postingDate?T.postingDate.slice(0,10):"")>c)return!1;if(s.trim()!==""){const A=s.trim().toLowerCase();if(![T.docnumber,T.reference,T.vendor,T.location].some(O=>O&&O.toLowerCase().includes(A)))return!1}return!0}),k=Math.ceil(w.length/vb)||1,S=T=>{T<1||T>k||h(T)},D=()=>{i(""),l(""),d(""),h(1)},E=w.slice((u-1)*vb,u*vb);return N.useEffect(()=>{u>k&&h(k)},[w,k]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Goods Receipt List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory Report"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Goods Receipt List"})]})})]})}),a.jsx("div",{className:"row",children:a.jsxs("div",{className:"col-sm-12",children:[a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row ",children:[a.jsxs("div",{className:"col-md-3 mb-2",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search (Doc No, Reference, Vendor, Location)...",value:s,onChange:T=>i(T.target.value)})]}),a.jsxs("div",{className:"col-md-3 mb-2",children:[a.jsx("label",{className:"form-label",children:"Posting Date From"}),a.jsx("input",{type:"date",className:"form-control",value:o,onChange:T=>l(T.target.value)})]}),a.jsxs("div",{className:"col-md-3 mb-2",children:[a.jsx("label",{className:"form-label",children:"Posting Date To"}),a.jsx("input",{type:"date",className:"form-control",value:c,onChange:T=>d(T.target.value)})]}),a.jsx("div",{className:"col-md-3 mb-2 d-flex align-items-end",children:a.jsx("button",{className:"btn btn-outline-secondary w-100",onClick:D,children:"Reset"})})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive table-nowrap",children:a.jsxs("table",{className:"table table-sm mb-0 border",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Document No"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Posting Date"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Receipt Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:E.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center",children:"No goods receipt records found."})}):E.map((T,A)=>a.jsxs("tr",{children:[a.jsx("td",{children:(u-1)*vb+A+1}),a.jsx("td",{children:T.docnumber}),a.jsx("td",{children:T.documentDate}),a.jsx("td",{children:T.postingDate}),a.jsx("td",{children:T.reference}),a.jsx("td",{children:T.vendor}),a.jsx("td",{children:T.location}),a.jsx("td",{children:T.receiptDate}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-primary btn-sm me-2",onClick:()=>g(T),children:"Print"}),a.jsx("button",{className:"btn btn-info btn-sm",onClick:()=>b(T),children:"Preview"})]})]},T._id?.$oid||(u-1)*vb+A))})]})})})]}),k>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${u===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>S(u-1),disabled:u===1,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),(()=>{const A=[],L=[];A.push(1);for(let Z=Math.max(2,u-2);Z<=Math.min(k-1,u+2);Z++)A.push(Z);k>1&&A.push(k);const P=[...new Set(A)].sort((Z,z)=>Z-z);let O;for(let Z of P)O&&(Z-O===2?L.push(O+1):Z-O!==1&&L.push("...")),L.push(Z),O=Z;return L.map((Z,z)=>Z==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${z}`):a.jsx("li",{className:`page-item ${u===Z?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>S(Z),children:Z})},Z))})(),a.jsx("li",{className:`page-item ${u===k?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>S(u+1),disabled:u===k,children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})})})]})})]}),r&&a.jsx("div",{className:"modal show",tabIndex:"-1",style:{display:"block",background:"rgba(0,0,0,0.3)",position:"fixed",top:0,left:0,width:"100vw",height:"100vh",zIndex:9999},onClick:y,children:a.jsx("div",{className:"modal-dialog modal-xl",style:{pointerEvents:"auto",marginTop:"5vh"},onClick:T=>T.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Preview - Document No: ",r.docnumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:y})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("table",{className:"table table-borderless mb-3",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:"Document Date:"})}),a.jsx("td",{children:r.documentDate}),a.jsx("td",{children:a.jsx("strong",{children:"Posting Date:"})}),a.jsx("td",{children:r.postingDate})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:"Reference:"})}),a.jsx("td",{children:r.reference}),a.jsx("td",{children:a.jsx("strong",{children:"Vendor:"})}),a.jsx("td",{children:r.vendor})]}),a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:"Location:"})}),a.jsx("td",{children:r.location}),a.jsx("td",{children:a.jsx("strong",{children:"Receipt Date:"})}),a.jsx("td",{children:r.receiptDate})]})]})}),a.jsx("h6",{children:"Items"}),a.jsxs("table",{className:"table border",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:r.items&&r.items.length>0?r.items.map((T,A)=>a.jsxs("tr",{children:[a.jsx("td",{children:A+1}),a.jsx("td",{children:T.materialId}),a.jsx("td",{children:T.description}),a.jsx("td",{children:T.quantity}),a.jsx("td",{children:T.baseUnit}),a.jsx("td",{children:T.deliveryDate}),a.jsx("td",{children:T.lotNo}),a.jsx("td",{children:T.price}),a.jsx("td",{children:(T.quantity*T.price).toFixed(2)})]},T._id?.$oid||A)):a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center",children:"No items found"})})})]})]}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{className:"btn btn-secondary",onClick:y,children:"Close"})})]})})})]})};function B8(){const e=new Date().toISOString().split("T")[0],[t,r]=N.useState({category:"",catdesc:"",docnumber:"",docDate:e,postDate:e,reference:"",location:""}),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[d,u]=N.useState([{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}]),[h,m]=N.useState([]),[p,v]=N.useState(!1),[g,b]=N.useState(""),[y,C]=N.useState(!1),[w,k]=N.useState(!1),[S,D]=N.useState(null),[E,T]=N.useState(!1),[A,L]=N.useState("materialId"),[P,O]=N.useState(""),[Z,z]=N.useState([]),K=t.category.trim().toLowerCase()==="display",B=localStorage.getItem("selectedCompanyId"),Q=localStorage.getItem("financialYear");N.useEffect(()=>{Oe.get("/api/material",{params:{companyId:B,financialYear:Q}}).then(se=>c(se.data)).catch(se=>console.error("Error fetching materials:",se)),Oe.get("/api/locations",{params:{companyId:B,financialYear:Q}}).then(se=>s(se.data)),Oe.get("/api/goodsTransferCategory",{params:{companyId:B,financialYear:Q}}).then(se=>o(se.data)).catch(se=>console.error("Error fetching categories:",se))},[]),N.useEffect(()=>{console.log("Categories loaded:",i),i.forEach(se=>{console.log(`Category: "${se.categoryName}" (length: ${se.categoryName.length})`)})},[i]);const U=()=>{console.log("Fetching documents..."),Oe.get("/api/goodsTransfer",{params:{companyId:B,financialYear:Q}}).then(se=>{console.log("Documents fetched:",se.data),m(se.data)}).catch(se=>{console.error("Error fetching documents",se)})},J=se=>{const ye=se.target.value;console.log(`Selected category: "${ye}" (length: ${ye.length})`);let Ne="",Ue=!1;const Qe=ye.trim().toLowerCase();Qe==="cancel"?Ne=`CNL-${Date.now()}`:Qe==="demo"?Ne=`DMP-${Date.now()}`:Qe==="display"&&(Ue=!0,console.log("Display category selected - enabling document search"),U());const ot=i.find(xt=>xt.categoryName.trim().toLowerCase()===Qe);console.log("Selected category object:",ot),console.log("Document number enabled:",Ue),r(xt=>({...xt,category:ye,catdesc:ot?.description||"",docnumber:Ue?"":Ne})),k(Ue)},Y=(se,ye)=>{r(Ne=>({...Ne,[se]:ye}))},oe=se=>{const ye=se.target.value;if(r(Ne=>({...Ne,docnumber:ye})),ye.length>=2){const Ne=h.find(Ue=>Ue.docnumber&&Ue.docnumber.toLowerCase().includes(ye.toLowerCase()));Ne&&V(Ne)}},M=()=>{w&&h.length===0&&(console.log("Input field clicked - fetching documents"),U())},V=se=>{console.log("Selected document:",se),r(ye=>({...ye,docnumber:se.docnumber||"",docDate:se.docDate||e,postDate:se.postDate||e,reference:se.reference||"",location:se.location||""})),se.items&&se.items.length>0&&u(se.items),v(!1)},H=(se,ye,Ne)=>{const Ue=[...d];Ue[se][ye]=Ne,u(Ue)},ee=()=>{u([...d,{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}])},re=async se=>{se.preventDefault();const ye={...t,companyId:B,financialYear:Q,items:d,date:e};try{await Oe.post("/api/goodsTransfer",ye),alert("Goods Transfer Saved Successfully!"),r({category:"",catdesc:"",docnumber:"",docDate:e,postDate:e,reference:"",location:""}),u([{materialId:"",description:"",baseUnit:"",price:"",quantity:"",deliveryDate:"",lotNo:"",text:""}]),k(!1),m([])}catch(Ne){alert("Failed to save. See console for error."),console.error(Ne)}},ae=se=>{O(se.target.value);const ye=l.filter(Ne=>Ne[A]?.toLowerCase().includes(se.target.value.toLowerCase()));z(ye)},ne=()=>{z(l)},ie=()=>{O(""),z([])},G=()=>{T(!1),O(""),z([])},de=se=>{const ye=[...d];ye[S]={...ye[S],materialId:se.materialId,description:se.description,baseUnit:se.baseUnit,price:se.price},u(ye),G()},X=h.filter(se=>!y&&!g?!1:(se.docnumber?.toLowerCase()||"").includes(g.toLowerCase())),le=()=>{b(""),C(!0),h.length===0&&U()},Se=()=>{b(""),C(!1)},ue=se=>{b(se.target.value),C(!1)};return a.jsxs("div",{className:"container p-3",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Delivery Challan"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Delivery Challan"})]})})]})}),a.jsxs("form",{onSubmit:re,children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Category"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{className:"form-select form-select-sm",value:t.category,onChange:J,children:[a.jsx("option",{value:"",children:"Select"}),i.map((se,ye)=>a.jsx("option",{value:se.categoryName,children:se.categoryName},ye))]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Description"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{className:"form-control form-control-sm",value:t.catdesc,readOnly:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Document No"})}),a.jsx("div",{className:"col-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:t.docnumber,onChange:oe,onClick:M,readOnly:!w,placeholder:w?"Enter document number...":""}),w&&a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{h.length===0&&U(),v(!0)},children:"Search"})]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Doc Date"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:t.docDate,onChange:se=>Y("docDate",se.target.value)})})]})})]}),a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Posting Date"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:t.postDate,onChange:se=>Y("postDate",se.target.value)})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"REF"})}),a.jsx("div",{className:"col-8",children:a.jsx("input",{className:"form-control form-control-sm",value:t.reference,onChange:se=>Y("reference",se.target.value)})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-4",children:a.jsx("label",{className:"form-label mb-0",children:"Location"})}),a.jsx("div",{className:"col-8",children:a.jsxs("select",{className:"form-select form-select-sm",value:t.location,onChange:se=>Y("location",se.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),n.map(se=>a.jsx("option",{value:se.name||se.locationName||se._id,children:se.name||se.locationName||se._id},se._id||se.id||se.name))]})})]})})]})]}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Text"})]})}),a.jsx("tbody",{children:d.map((se,ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:ye+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:se.materialId,readOnly:!0}),!K&&a.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>{D(ye),T(!0)},children:"🔍"})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control",value:se.description,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${K?"bg-light":""}`,value:se.quantity,onChange:K?void 0:Ne=>H(ye,"quantity",Ne.target.value),readOnly:K,disabled:K})}),a.jsx("td",{children:a.jsx("input",{className:"form-control",value:se.baseUnit,readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${K?"bg-light":""}`,type:"date",value:se.deliveryDate,onChange:K?void 0:Ne=>H(ye,"deliveryDate",Ne.target.value),readOnly:K,disabled:K})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${K?"bg-light":""}`,value:se.lotNo,onChange:K?void 0:Ne=>H(ye,"lotNo",Ne.target.value),readOnly:K,disabled:K})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${K?"bg-light":""}`,value:se.price,onChange:K?void 0:Ne=>H(ye,"price",Ne.target.value),readOnly:K,disabled:K})}),a.jsx("td",{children:a.jsx("input",{className:`form-control ${K?"bg-light":""}`,value:se.text,onChange:K?void 0:Ne=>H(ye,"text",Ne.target.value),readOnly:K,disabled:K})})]},ye))})]})}),!K&&a.jsx("button",{type:"button",className:"btn btn-sm btn-secondary mb-2 mt-2",onClick:ee,children:"+ Add Row"})]})]}),!K&&a.jsx("div",{className:"text-end",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),E&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:G})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:se=>L(se.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${A}`,value:P,onChange:ae})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:ne,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Z.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ie,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Z.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Z.map((se,ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:se.materialId})}),a.jsx("td",{children:se.description}),a.jsx("td",{children:se.baseUnit}),a.jsx("td",{children:se.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>de(se),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ye))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:P?`No materials found for "${P}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:G,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),p&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-file-alt me-2"}),"Search Documents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>v(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsx("select",{className:"form-select",value:"docnumber",readOnly:!0,children:a.jsx("option",{value:"docnumber",children:"Document Number"})})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Document Number",value:g,onChange:ue})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:le,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(g||y)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Se,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:X.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Document Number"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:X.map((se,ye)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:se.docnumber})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:se.category})}),a.jsx("td",{children:se.location}),a.jsx("td",{children:se.docDate}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>V(se),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ye))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-file-alt fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:g?`No documents found for "${g}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>v(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}function U8(){const[e,t]=N.useState([]),[r,n]=N.useState(""),[s,i]=N.useState(""),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),[c,d]=N.useState([]),u=e.filter(h=>{const m=h.description.toLowerCase().includes(r.toLowerCase())||h.materialId.toLowerCase().includes(r.toLowerCase());console.log("matchesSearch",s);const p=s?h.categoryId?._id===s:!0;return m&&p});return N.useEffect(()=>{(async()=>{try{const p=await Oe.get("/api/category",{params:{companyId:o}});d(p.data),console.log("Categories fetched:",p.data)}catch(p){console.error("Failed to fetch categories:",p)}})(),(async()=>{try{console.log("Fetching stock for companyId:",o,"and financialYear:",l);const p=await Oe.get("/api/stock/data",{params:{companyId:o,financialYear:l}});console.log("Stock data fetched:",p.data),t(p.data),console.log("Stock data fetched:",p.data)}catch(p){console.error("Failed to fetch stock:",p)}})()},[]),a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Stock Inventory"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Inventory"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Stock Inventory"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"🔍 Search by Description or Material No",value:r,onChange:h=>n(h.target.value)})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{className:"form-select",value:s,onChange:h=>i(h.target.value),children:[a.jsx("option",{value:"",children:"All Categories"}),c.map(h=>a.jsx("option",{value:h._id,children:h.categoryName},h._id))]})})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-hover table-sm align-middle",children:[a.jsx("thead",{className:"table-primary text-center",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Lot Number"}),a.jsx("th",{children:"Updated At"})]})}),a.jsx("tbody",{children:u.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"10",className:"text-center",children:"No stock found."})}):u.map((h,m)=>a.jsxs("tr",{children:[a.jsx("td",{className:"text-center",children:m+1}),a.jsx("td",{children:h.materialId||h.matno}),a.jsx("td",{children:h.description||h.matdesc}),a.jsx("td",{children:h.categoryId?.categoryName}),a.jsx("td",{className:"text-center",children:h.baseUnit||h.uom}),a.jsx("td",{className:"text-end",children:h.quantityAvailable??h.quantity}),a.jsx("td",{className:"text-center",children:a.jsx("span",{className:`badge ${(h.status||(h.quantityAvailable??h.quantity)>10?"In Stock":(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")=="In Stock"?"bg-success":(h.status||(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")=="Low Stock"?"bg-warning text-dark":"bg-danger"}`,children:h.status||((h.quantityAvailable??h.quantity)>10?"In Stock":(h.quantityAvailable??h.quantity)>0?"Low Stock":"Out of Stock")})}),a.jsx("td",{children:h.location||"-"}),a.jsx("td",{children:h.lotNumber||"-"}),a.jsx("td",{children:h.updatedAt?new Date(h.updatedAt).toLocaleString():"-"})]},m))})]})})})]})]})}const yE=10,EDe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(""),[s,i]=N.useState(1),[o,l]=N.useState(!0),[c,d]=N.useState(null),u=localStorage.getItem("selectedCompanyId"),h=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId"),N.useEffect(()=>{m()},[]);const m=async()=>{try{const k=(await Oe.get("/api/invoiceform",{params:{companyId:u,financialYear:h}})).data.sort((S,D)=>new Date(D.createdAt)-new Date(S.createdAt));t(k),d(null)}catch(w){d("Failed to fetch invoices"),console.error(w)}finally{l(!1)}},p=w=>{n(w.target.value),i(1)},v=N.useMemo(()=>r?e.filter(w=>[w.docnumber,w.vendor,w.location,w.invoiceRef,w.reference].join(" ").toLowerCase().includes(r.toLowerCase())):e,[r,e]),g=Math.ceil(v.length/yE),b=N.useMemo(()=>{const w=(s-1)*yE;return v.slice(w,w+yE)},[v,s]),y=w=>{w<1||w>g||i(w)},C=w=>{const k=`
    <html>
      <head>
        <title>Invoice - ${w.docnumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          h2 { text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ccc; padding: 8px; }
          th { background: #f0f0f0; }
          .summary { margin-top: 20px; font-weight: bold; }
          .summary p { margin: 4px 0; }
          .footer { margin-top: 40px; font-size: 12px; text-align: right; }
        </style>
      </head>
      <body>
        <h2>Invoice Document</h2>
        <p><strong>Document No:</strong> ${w.docnumber}</p>
        <p><strong>Vendor:</strong> ${w.vendor}</p>
        <p><strong>Location:</strong> ${w.location}</p>
        <p><strong>Reference:</strong> ${w.reference||"-"}</p>
        <p><strong>Invoice Ref:</strong> ${w.invoiceRef||"-"}</p>
        <p><strong>Date:</strong> ${new Date(w.documentDate).toLocaleDateString()}</p>

        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${w.items.map((D,E)=>`
              <tr>
                <td>${E+1}</td>
                <td>${D.materialId||"DEMO"}</td>
                <td>${D.description}</td>
                <td>${D.quantity}</td>
                <td>${D.baseUnit}</td>
                <td>₹${parseFloat(D.price).toFixed(2)}</td>
                <td>₹${(D.price*D.quantity).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div className="summary">
          <p>Total Amount: ₹${w.totalAmount?.toFixed(2)||"-"}</p>
          <p>Discount: ₹${w.discount?.toFixed(2)||"0.00"}</p>
          <p>Net Amount: ₹${w.netAmount?.toFixed(2)||"-"}</p>
          <p>CGST (%): ${w.cgst}%</p>
          <p>SGST (%): ${w.sgst}%</p>
          <p>IGST (%): ${w.igst}%</p>
          <p><strong>Final Total: ₹${w.finalTotal?.toFixed(2)}</strong></p>
        </div>

        <div className="footer">
          Printed on: ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `,S=window.open("","_blank");S.document.write(k),S.document.close(),S.focus(),S.print()};return o?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):c?a.jsx("div",{className:"alert alert-danger",children:c}):a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Invoice List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Vendor Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Invoice List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex justify-content-between ",children:[a.jsx("h5",{}),a.jsx("input",{type:"text",value:r,onChange:p,placeholder:"Search invoices...",className:"form-control w-25"})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Doc No"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Invoice Ref"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Final Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:b.map((w,k)=>a.jsxs("tr",{children:[a.jsx("td",{children:k+1}),a.jsx("td",{children:w.docnumber}),a.jsx("td",{children:w.vendor}),a.jsx("td",{children:w.location}),a.jsx("td",{children:w.reference||"-"}),a.jsx("td",{children:w.invoiceRef||"-"}),a.jsx("td",{children:new Date(w.documentDate).toLocaleDateString()}),a.jsxs("td",{children:["₹",w.finalTotal]}),a.jsx("td",{children:a.jsx("button",{onClick:()=>C(w),className:"btn btn-sm btn-primary",children:"Print"})})]},w._id))})]})})})]}),a.jsx("nav",{className:"d-flex justify-content-end",children:a.jsxs("ul",{className:"pagination pagination-sm",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(s-1),children:"«"})}),Array.from({length:g},(w,k)=>a.jsx("li",{className:`page-item ${s===k+1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(k+1),children:k+1})},k+1)),a.jsx("li",{className:`page-item ${s===g?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(s+1),children:"»"})})]})})]})};function DDe(){const e=new Date().toISOString().split("T")[0],[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState([]),[d,u]=N.useState([]),[h,m]=N.useState({}),[p,v]=N.useState(0),g=Xu(),[b,y]=N.useState(null),[C,w]=N.useState(!1),[k,S]=N.useState(!1),[D,E]=N.useState(null),[T,A]=N.useState("po"),[L,P]=N.useState([{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}]),O=localStorage.getItem("selectedCompanyId"),Z=localStorage.getItem("financialYear"),z=localStorage.getItem("selectedCompanyId"),[K,B]=N.useState({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",invoiceRef:"",vendor:"",location:"",hsnNo:"",priceUnit:"",balance:""}),[Q,U]=N.useState(""),[J,Y]=N.useState("poNumber"),[oe,M]=N.useState(!1),[V,H]=N.useState(""),[ee,re]=N.useState("name1"),[ae,ne]=N.useState(!1),[ie,G]=N.useState(!1),[de,X]=N.useState("materialId"),[le,Se]=N.useState(""),[ue,se]=N.useState(!1);N.useEffect(()=>{Oe.get("/api/purchase-orders",{params:{companyId:O,financialYear:Z}}).then(Ie=>r(Ie.data)).catch(Ie=>console.error("Error fetching POs:",Ie)),Oe.get("/api/vendors",{params:{companyId:O,financialYear:Z}}).then(Ie=>s(Ie.data)).catch(Ie=>console.error("Error fetching vendors:",Ie)),Oe.get("/api/material",{params:{companyId:O,financialYear:Z}}).then(Ie=>o(Ie.data)).catch(Ie=>console.error("Error fetching materials:",Ie)),Oe.get("/api/invoicecategory").then(Ie=>c(Ie.data)).catch(Ie=>console.error("Error fetching categories:",Ie)),Oe.get("/api/tax").then(Ie=>u(Ie.data)).catch(Ie=>console.error("Error fetching tax:",Ie))},[]);const ye=Ie=>{console.log("Selected PO:",Ie),y(Ie),B(Ke=>({...Ke,vendor:Ie.vendor||"",location:Ie.deliveryLocation||"",priceUnit:Ie.priceUnit||""})),w(!1)},Ne=Ie=>{B(Ke=>({...Ke,vendor:Ie.name1})),S(!1)},Ue=Ie=>{if(D!==null&&b?.items){const Ke=[...b.items];Ke[D]&&(Ke[D]={...Ke[D],materialId:Ie.materialId,description:Ie.description,baseUnit:Ie.baseUnit,price:Ie.price,priceUnit:Ie.priceUnit||K.priceUnit},y(Ge=>({...Ge,items:Ke})))}G(!1)},Qe=Ie=>{const Ke=Ie.target.value,Ge=l.find(lt=>lt.categoryName===Ke);B(lt=>({...lt,category:Ke,catdesc:Ge?.description||""}))},ot=(Ie,Ke,Ge)=>{const lt=[...b.items];lt[Ie][Ke]=Ge,y({...b,items:lt})},xt=(Ie,Ke,Ge)=>{const lt=[...L];if(lt[Ie][Ke]=Ge,Ke==="quantity"||Ke==="price"){const Mt=parseFloat(lt[Ie].quantity||0),Ae=parseFloat(lt[Ie].price||0);lt[Ie].amount=Mt*Ae}P(lt)},Le=()=>{P([...L,{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}])},dt=Ie=>{if(L.length>1){const Ke=L.filter((Ge,lt)=>lt!==Ie);P(Ke)}},Tt=Ie=>{A(Ie),Ie==="misc"&&(y(null),B(Ke=>({...Ke,vendor:"",location:""})))},At=async Ie=>{if(Ie.preventDefault(),T==="po"&&!b)return alert("Please select a Purchase Order.");if(T==="misc"&&!K.vendor)return alert("Please select a vendor for miscellaneous invoice.");const Ke={...K,invoiceType:T,purchaseOrderId:T==="po"?b._id:null,items:T==="po"?b.items:L,receiptDate:e,taxCode:h.taxCode,taxName:h.taxName,cgst:Xe,sgst:Be,igst:qe,companyId:z,financialYear:Z,totalAmount:ve,discount:p,netAmount:De,finalTotal:ft,balance:ft};try{await Oe.post("/api/invoiceform",Ke),alert("Invoice saved successfully!"),g("/InvoiceList"),B({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",invoiceRef:"",vendor:"",location:"",priceUnit:"",balance:""}),y(null),m({}),v(0),P([{description:"",hsnNo:"",quantity:1,baseUnit:"NOS",price:0,amount:0}]),A("po")}catch(Ge){console.error("Error saving invoice:",Ge),alert("Failed to save invoice")}},Vt=t.filter(Ie=>!oe&&!Q?!1:(Ie[J]?.toLowerCase()||"").includes(Q.toLowerCase())),xe=n.filter(Ie=>!ae&&!V?!1:(Ie[ee]?.toLowerCase()||"").includes(V.toLowerCase())),he=i.filter(Ie=>!ue&&!le?!1:(Ie[de]?.toLowerCase()||"").includes(le.toLowerCase())),ve=T==="po"?b?.items?.reduce((Ie,Ke)=>Ie+parseFloat(Ke.quantity||0)*parseFloat(Ke.price||0),0)||0:L.reduce((Ie,Ke)=>Ie+parseFloat(Ke.amount||0),0)||0,pe=parseFloat(p||0),De=ve-pe,Ye=parseFloat(h.cgst||0),Nt=parseFloat(h.sgst||0),Je=parseFloat(h.igst||0),Xe=parseFloat((Ye/100*De).toFixed(2)),Be=parseFloat((Nt/100*De).toFixed(2)),qe=parseFloat((Je/100*De).toFixed(2)),ft=parseFloat((De+Xe+Be+qe).toFixed(2));return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Vendor Invoice Creation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Vendor Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Vendor Invoice Creation"})]})})]})}),a.jsxs("form",{onSubmit:At,children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header",children:[a.jsx("div",{className:"row mb-3",children:a.jsxs("div",{className:"col-md-12",children:[a.jsx("label",{className:"form-label",children:"Invoice Type:"}),a.jsxs("div",{className:"d-flex gap-3",children:[a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"poInvoice",value:"po",checked:T==="po",onChange:Ie=>Tt(Ie.target.value)}),a.jsx("label",{className:"form-check-label",htmlFor:"poInvoice",children:"Purchase Order Invoice"})]}),a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"invoiceType",id:"miscInvoice",value:"misc",checked:T==="misc",onChange:Ie=>Tt(Ie.target.value)}),a.jsx("label",{className:"form-check-label",htmlFor:"miscInvoice",children:"Miscellaneous Invoice"})]})]})]})}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row mb-2",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"Category:"})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("select",{className:"form-select",value:K.category,onChange:Qe,children:[a.jsx("option",{value:"",children:"Select"}),l.map(Ie=>a.jsx("option",{value:Ie.categoryName,children:Ie.categoryName},Ie._id))]})})]})}),T==="po"&&a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"PO Number:"})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",placeholder:"Enter PO Number",className:"form-control form-control-sm",value:b?.poNumber||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>w(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("label",{className:"form-label",children:"Vendor :"})}),a.jsx("div",{className:"col-md-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter Vendor Name",value:K.vendor,readOnly:T==="po"}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>S(!0),children:a.jsx("i",{className:"fas fa-search"})})]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"Tax Code :"})}),a.jsx("div",{className:"col-md-8",children:a.jsxs("select",{className:"form-select",value:h.taxCode||"",onChange:Ie=>{const Ke=d.find(Ge=>Ge.taxCode===Ie.target.value);m(Ke||{})},children:[a.jsx("option",{value:"",children:"Select"}),d.map(Ie=>a.jsxs("option",{value:Ie.taxCode,children:[Ie.taxCode," - ",Ie.taxName]},Ie._id))]})})]})})," ",a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"Tax Name :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Tax Name",value:h.taxName||"",onChange:Ie=>m(Ke=>({...Ke,taxName:Ie.target.value}))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-5",children:a.jsx("label",{className:"form-label",children:"Document Date :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"date",className:"form-control",value:K.documentDate,onChange:Ie=>B(Ke=>({...Ke,documentDate:Ie.target.value}))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"Posting_Date:"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"date",className:"form-control",value:K.postingDate,onChange:Ie=>B(Ke=>({...Ke,postingDate:Ie.target.value}))})})]})}),a.jsxs("div",{className:"col-md-3",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("label",{className:"form-label",children:"Reference:"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Reference",value:K.reference,onChange:Ie=>B(Ke=>({...Ke,reference:Ie.target.value}))})})]}),"       "]}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",placeholder:"Enter Location",className:"form-control",value:K.location,onChange:Ie=>B(Ke=>({...Ke,location:Ie.target.value})),readOnly:T==="po"})})]})})," ",a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("label",{className:"form-label",children:"Invoice Ref :"})}),a.jsx("div",{className:"col-md-7",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Invoice Reference",value:K.invoiceRef,onChange:Ie=>B(Ke=>({...Ke,invoiceRef:Ie.target.value}))})})]})})]})]}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:T==="po"?a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"HSN NO"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"})]})}),a.jsx("tbody",{children:(b?.items?.length?b.items:[{}]).map((Ie,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ke+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:Ie.materialId||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{E(Ke),G(!0)},children:a.jsx("i",{className:"ti ti-search"})})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ie.description||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ie.hsnNo||"",onChange:Ge=>ot(Ke,"hsnNo",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ie.quantity||"",onChange:Ge=>ot(Ke,"quantity",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ie.baseUnit||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control",value:Ie.deliveryDate,onChange:Ge=>ot(Ke,"deliveryDate",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ie.lotNo||"",onChange:Ge=>ot(Ke,"lotNo",Ge.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ie.price||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ie.priceUnit||"",readOnly:!0})})]},Ke))})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[a.jsx("h6",{children:"Miscellaneous Items"}),a.jsxs("button",{type:"button",className:"btn btn-success btn-sm",onClick:Le,children:[a.jsx("i",{className:"fas fa-plus me-1"}),"Add Item"]})]}),a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"HSN NO"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:L.map((Ie,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ke+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ie.description,onChange:Ge=>xt(Ke,"description",Ge.target.value),placeholder:"Enter description"})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ie.hsnNo,onChange:Ge=>xt(Ke,"hsnNo",Ge.target.value),placeholder:"HSN Code"})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ie.quantity,onChange:Ge=>xt(Ke,"quantity",Ge.target.value),min:"0",step:"0.01"})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Ie.baseUnit,onChange:Ge=>xt(Ke,"baseUnit",Ge.target.value),placeholder:"Unit"})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ie.price,onChange:Ge=>xt(Ke,"price",Ge.target.value),min:"0",step:"0.01"})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Ie.amount.toFixed(2),readOnly:!0})}),a.jsx("td",{children:a.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>dt(Ke),disabled:L.length===1,children:a.jsx("i",{className:"fas fa-trash"})})})]},Ke))})]})]})}),a.jsx("div",{className:"row justify-content-end mt-3",children:a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"card  p-3",children:[a.jsx("h6",{className:"mb-3",children:"Billing Summary"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"Total Amount"}),a.jsx("input",{type:"number",className:"form-control",value:ve.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"Discount"}),a.jsx("input",{type:"number",className:"form-control",value:p,onChange:Ie=>v(parseFloat(Ie.target.value)||0)})]}),a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"Net Amount"}),a.jsx("input",{type:"number",className:"form-control",value:De.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"CGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:h.cgst||"",onChange:Ie=>m(Ke=>({...Ke,cgst:Ie.target.value}))})]}),a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"SGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:h.sgst||"",onChange:Ie=>m(Ke=>({...Ke,sgst:Ie.target.value}))})]}),a.jsxs("div",{className:"col-6 mb-2",children:[a.jsx("label",{className:"form-label",children:"IGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:h.igst||"",onChange:Ie=>m(Ke=>({...Ke,igst:Ie.target.value}))})]})]}),a.jsxs("div",{className:"mb-0 fw-bold",children:[a.jsx("label",{className:"form-label",children:"Final Total"}),a.jsx("input",{type:"number",className:"form-control",value:ft.toFixed(2),readOnly:!0})]})]})})})]})]}),a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save Invoice"})})]}),k&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Vendor"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>S(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:ee,onChange:Ie=>re(Ie.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vendorId",children:"Vendor ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${ee}`,value:V,onChange:Ie=>H(Ie.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>ne(!0),children:"View All"}),(V||ae)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{H(""),ne(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:xe.map((Ie,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ie.vendorId})}),a.jsx("td",{children:Ie.name1}),a.jsx("td",{children:Ie.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ne(Ie),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:V?`No vendors found for "${V}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>S(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),T==="po"&&C&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Select Purchase Order"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>w(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:J,onChange:Ie=>Y(Ie.target.value),children:[a.jsx("option",{value:"poNumber",children:"PO Number"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${J}`,value:Q,onChange:Ie=>U(Ie.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>M(!0),children:"View All"}),(Q||oe)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{U(""),M(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Vt.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"PO Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Vt.map((Ie,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Ie.poNumber})}),a.jsx("td",{children:Ie.vendor}),a.jsx("td",{children:Ie.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ye(Ie),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Q?`No purchase orders found for "${Q}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>w(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),T==="po"&&ie&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>G(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:de,onChange:Ie=>X(Ie.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${de}`,value:le,onChange:Ie=>Se(Ie.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>se(!0),children:"View All"}),(le||ue)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{Se(""),se(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:he.map((Ie,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Ie.materialId})}),a.jsx("td",{children:Ie.description}),a.jsx("td",{children:Ie.baseUnit}),a.jsx("td",{children:Ie.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Ue(Ie),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:le?`No materials found for "${le}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>G(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}function ADe(){const e=new Date().toISOString().split("T")[0];Xu();const[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState({}),[d,u]=N.useState(0),[h,m]=N.useState([]),[p,v]=N.useState(null),[g,b]=N.useState(!1),[y,C]=N.useState(!1),[w,k]=N.useState(null),[S,D]=N.useState({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",BillingRef:"",customer:"",location:"",hsnNo:"",priceUnit:"",balance:""}),[E,T]=N.useState(""),[A,L]=N.useState("soNumber"),[P,O]=N.useState(!1),[Z,z]=N.useState([]),[K,B]=N.useState("name1"),[Q,U]=N.useState(""),[J,Y]=N.useState(!1),[oe,M]=N.useState(!1),[V,H]=N.useState("materialId"),[ee,re]=N.useState(""),[ae,ne]=N.useState(!1),ie=localStorage.getItem("selectedCompanyId"),G=localStorage.getItem("financialYear"),de=localStorage.getItem("selectedCompanyId");N.useEffect(()=>{Oe.get("/api/sales-orders",{params:{companyId:ie,financialYear:G}}).then(Je=>m(Je.data)).catch(Je=>console.error("Error fetching sales orders",Je)),Oe.get("/api/customers",{params:{companyId:ie,financialYear:G}}).then(Je=>z(Je.data)).catch(Je=>console.error("Error fetching customers",Je)),Oe.get("/api/material",{params:{companyId:ie,financialYear:G}}).then(Je=>r(Je.data)).catch(Je=>console.error("Error fetching materials:",Je)),Oe.get("/api/billingcategory",{params:{companyId:ie,financialYear:G}}).then(Je=>s(Je.data)).catch(Je=>console.error("Error fetching categories:",Je)),Oe.get("/api/tax",{params:{companyId:ie,financialYear:G}}).then(Je=>o(Je.data)).catch(Je=>console.error("Error fetching tax:",Je))},[]);const X=Je=>{v(Je),D(Xe=>({...Xe,customer:Je.sales||Je.customer||Je.customerName,location:Je.deliveryLocation||""})),b(!1)},le=Je=>{D(Xe=>({...Xe,customer:Je.name1})),C(!1)},Se=Je=>{if(w!==null&&p?.items){const Xe=[...p.items];Xe[w]&&(Xe[w]={...Xe[w],materialId:Je.materialId,description:Je.description,baseUnit:Je.baseUnit,price:Je.price,priceUnit:Je.priceUnit||S.priceUnit},v(Be=>({...Be,items:Xe})))}M(!1)},ue=Je=>{const Xe=Je.target.value,Be=n.find(qe=>qe.categoryName===Xe);D(qe=>({...qe,category:Xe,catdesc:Be?.description||""}))},se=(Je,Xe,Be)=>{const qe=[...p.items];qe[Je][Xe]=Be,v({...p,items:qe})},ye=p?.items?.reduce((Je,Xe)=>Je+parseFloat(Xe.quantity||0)*parseFloat(Xe.price||0),0)||0,Ne=parseFloat(d||0),Ue=ye-Ne,Qe=parseFloat(l.cgst||0),ot=parseFloat(l.sgst||0),xt=parseFloat(l.igst||0),Le=Qe/100*Ue,dt=ot/100*Ue,Tt=xt/100*Ue,At=parseFloat((Ue+Le+dt+Tt).toFixed(2)),Vt=async Je=>{if(Je.preventDefault(),!p)return alert("Please select a Purchase Order.");const Xe={...S,salesOrderId:p._id,items:p.items,receiptDate:e,taxCode:l.taxCode,taxName:l.taxName,companyId:de,financialYear:G,cgst:Le,sgst:dt,igst:Tt,totalAmount:ye,discount:d,netAmount:Ue,finalTotal:At,balance:At};console.log(Xe.finalTotal);try{await Oe.post("/api/billingform",Xe),alert("billing saved successfully!"),D({category:"",catdesc:"",docnumber:"",documentDate:"",postingDate:"",reference:"",BillingRef:"",customer:"",location:"",priceUnit:"",balance:""}),v(null),c({}),u(0)}catch(Be){console.error("Error saving biiling:",Be),alert("Failed to save billing")}},xe=h.filter(Je=>!P&&!E?!1:(Je[A]?.toLowerCase()||"").includes(E.toLowerCase())),he=Z.filter(Je=>!J&&!Q?!1:(Je[K]?.toLowerCase()||"").includes(Q.toLowerCase())),ve=t.filter(Je=>!ae&&!ee?!1:(Je[V]?.toLowerCase()||"").includes(ee.toLowerCase())),pe=()=>{T(""),O(!0)},De=()=>{T(""),O(!1)},Ye=()=>{U(""),Y(!0)},Nt=()=>{U(""),Y(!1)};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Invoice Creation"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Customer Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Invoice Creation"})]})})]})}),a.jsxs("form",{onSubmit:Vt,children:[a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("div",{className:"row ",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Category :"}),a.jsxs("select",{className:"form-select",value:S.category,onChange:ue,children:[a.jsx("option",{value:"",children:"Select"}),n.map(Je=>a.jsx("option",{value:Je.categoryName,children:Je.categoryName},Je._id))]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Sales Order :"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",name:"so",placeholder:"Search Sales Order",value:p?.soNumber||"",className:"form-control form-control-sm",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>b(!0),children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Customer :"}),a.jsxs("div",{className:"input-group",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search Customer",value:S.customer,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>C(!0),children:a.jsx("i",{className:"fas fa-search"})})]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Tax Code :"}),a.jsxs("select",{className:"form-select",value:l.taxCode||"",onChange:Je=>{const Xe=i.find(Be=>Be.taxCode===Je.target.value);c(Xe||{})},children:[a.jsx("option",{value:"",children:"Select"}),i.map(Je=>a.jsxs("option",{value:Je.taxCode,children:[Je.taxCode," - ",Je.taxName]},Je._id))]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"180px"},children:"Document Date :"}),a.jsx("input",{type:"date",className:"form-control",value:S.documentDate,onChange:Je=>D(Xe=>({...Xe,documentDate:Je.target.value}))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"180px"},children:"Posting Date:"}),a.jsx("input",{type:"date",className:"form-control",value:S.postingDate,onChange:Je=>D(Xe=>({...Xe,postingDate:Je.target.value}))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Reference :"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Reference",value:S.reference,onChange:Je=>D(Xe=>({...Xe,reference:Je.target.value}))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Location :"}),a.jsx("input",{type:"text",placeholder:"Location",className:"form-control",value:S.location,readOnly:!0})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label",style:{width:"120px"},children:"Billing Ref :"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Billing Reference",value:S.BillingRef,onChange:Je=>D(Xe=>({...Xe,BillingRef:Je.target.value}))})]})})]})})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"HSN NO"}),a.jsx("th",{children:"QTY"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Del Date"}),a.jsx("th",{children:"LOT No"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"PriceUnit"})]})}),a.jsx("tbody",{children:(p?.items?.length?p.items:[{}]).map((Je,Xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:Xe+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:Je.materialId||"",readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>{k(Xe),M(!0)},children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Je.description||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Je.hsnNo||"",onChange:Be=>se(Xe,"hsnNo",Be.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Je.quantity||"",onChange:Be=>se(Xe,"quantity",Be.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Je.baseUnit||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control",value:Je.deliveryDate,onChange:Be=>se(Xe,"deliveryDate",Be.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Je.lotNo||"",onChange:Be=>se(Xe,"lotNo",Be.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control",value:Je.price||"",readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:Je.priceUnit||"",readOnly:!0})})]},Xe))})]})}),a.jsx("div",{className:"row justify-content-end mt-3",children:a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"card p-3",children:[a.jsx("h6",{className:"mb-3",children:"Billing Summary"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6 mb-2",children:[a.jsx("label",{children:"Total Amount"}),a.jsx("input",{type:"number",className:"form-control",value:ye.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:" col-xl-6 mb-2",children:[a.jsx("label",{children:"Discount"}),a.jsx("input",{type:"number",className:"form-control",value:d,onChange:Je=>u(parseFloat(Je.target.value)||0)})]}),a.jsxs("div",{className:" col-xl-6 mb-2",children:[a.jsx("label",{children:"Net Amount"}),a.jsx("input",{type:"number",className:"form-control",value:Ue.toFixed(2),readOnly:!0})]}),a.jsxs("div",{className:" col-xl-6 mb-2",children:[a.jsx("label",{children:"CGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:l.cgst||"",onChange:Je=>c(Xe=>({...Xe,cgst:Je.target.value}))})]}),a.jsxs("div",{className:"col-xl-6 mb-2",children:[a.jsx("label",{children:"SGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:l.sgst||"",onChange:Je=>c(Xe=>({...Xe,sgst:Je.target.value}))})]}),a.jsxs("div",{className:"col-xl-6 mb-2",children:[a.jsx("label",{children:"IGST (%)"}),a.jsx("input",{type:"number",className:"form-control",value:l.igst||"",onChange:Je=>c(Xe=>({...Xe,igst:Je.target.value}))})]})]}),a.jsxs("div",{className:"mb-0 fw-bold",children:[a.jsx("label",{children:"Final Total"}),a.jsx("input",{type:"number",className:"form-control",value:At,readOnly:!0})]})]})})})]})]}),a.jsx("div",{className:"text-end mt-3",children:a.jsx("button",{type:"submit",className:"btn btn-success",children:"Save"})})]}),g&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Sales Orders"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>b(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:A,onChange:Je=>L(Je.target.value),children:[a.jsx("option",{value:"soNumber",children:"SO Number"}),a.jsx("option",{value:"sales",children:"Customer"}),a.jsx("option",{value:"deliveryLocation",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${A}`,value:E,onChange:Je=>T(Je.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:pe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(E||P)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:De,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:xe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"SO Number"}),a.jsx("th",{children:"Sales"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:xe.map((Je,Xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:Je.soNumber})}),a.jsx("td",{children:Je.sales||Je.customer||Je.customerName}),a.jsx("td",{children:Je.deliveryLocation}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>X(Je),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:E?`No sales orders found for "${E}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>b(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),y&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-users me-2"}),"Select Customer"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>C(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:K,onChange:Je=>B(Je.target.value),children:[a.jsx("option",{value:"name1",children:"Customer Name"}),a.jsx("option",{value:"customerId",children:"Customer ID"}),a.jsx("option",{value:"city",children:"City"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${K}`,value:Q,onChange:Je=>U(Je.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ye,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),(Q||J)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Nt,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:he.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Customer ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:he.map((Je,Xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Je.customerId})}),a.jsx("td",{children:Je.name1}),a.jsx("td",{children:Je.city}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>le(Je),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-users fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:Q?`No customers found for "${Q}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),oe&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-box-open me-2"}),"Select Material"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>M(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:V,onChange:Je=>H(Je.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"}),a.jsx("option",{value:"baseUnit",children:"Base Unit"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${V}`,value:ee,onChange:Je=>re(Je.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("button",{className:"btn btn-info",onClick:()=>ne(!0),children:"View All"}),(ee||ae)&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:()=>{re(""),ne(!1)},children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:ve.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:ve.map((Je,Xe)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:Je.materialId})}),a.jsx("td",{children:Je.description}),a.jsx("td",{children:Je.baseUnit}),a.jsx("td",{children:Je.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Se(Je),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xe))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-box fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:ee?`No materials found for "${ee}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>M(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})]})}const jE=10,TDe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(null),[o,l]=N.useState(""),[c,d]=N.useState(1),u=localStorage.getItem("selectedCompanyId"),h=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId"),N.useEffect(()=>{m()},[]);const m=async()=>{try{const w=await Oe.get("/api/billingform",{params:{companyId:u,financialYear:h}});t(w.data),i(null)}catch(w){i("Failed to fetch billing data"),console.error(w)}finally{n(!1)}},p=w=>{l(w.target.value),d(1)},v=N.useMemo(()=>o?e.filter(w=>[w.docnumber,w.customer,w.reference,w.BillingRef,w.location].join(" ").toLowerCase().includes(o.toLowerCase())):e,[o,e]),g=Math.ceil(v.length/jE),b=N.useMemo(()=>{const w=(c-1)*jE;return v.slice(w,w+jE)},[v,c]),y=w=>{w<1||w>g||d(w)},C=w=>{const k=`
    <html>
      <head>
        <title>Billing - ${w.docnumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          h2 { text-align: center; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ccc; padding: 8px; }
          th { background: #f0f0f0; }
          .summary { margin-top: 20px; font-weight: bold; }
          .summary p { margin: 4px 0; }
          .footer { margin-top: 40px; font-size: 12px; text-align: right; }
        </style>
      </head>
      <body>
        <h2>Billing Document</h2>
        <p><strong>Document No:</strong> ${w.docnumber}</p>
        <p><strong>Customer:</strong> ${w.customer}</p>
        <p><strong>Location:</strong> ${w.location}</p>
        <p><strong>Reference:</strong> ${w.reference}</p>
        <p><strong>Invoice Ref:</strong> ${w.BillingRef}</p>
        <p><strong>Date:</strong> ${new Date(w.documentDate).toLocaleDateString()}</p>

        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${w.items.map((D,E)=>`
              <tr>
                <td>${E+1}</td>
                <td>${D.materialId}</td>
                <td>${D.description}</td>
                <td>${D.quantity}</td>
                <td>${D.baseUnit}</td>
                <td>₹${parseFloat(D.price).toFixed(2)}</td>
                <td>₹${(D.price*D.quantity).toFixed(2)}</td>
              </tr>
            `).join("")}
          </tbody>
        </table>

        <div className="summary">
          <p>Total Amount: ₹${w.totalAmount.toFixed(2)}</p>
          <p>Discount: ₹${w.discount.toFixed(2)}</p>
          <p>Net Amount: ₹${w.netAmount.toFixed(2)}</p>
          <p>CGST (%): ${w.cgst}%</p>
          <p>SGST (%): ${w.sgst}%</p>
          <p>IGST (%): ${w.igst}%</p>
          <p><strong>Final Total: ₹${w.finalTotal.toFixed(2)}</strong></p>
        </div>

        <div className="footer">
          Printed on: ${new Date().toLocaleString()}
        </div>
      </body>
    </html>
  `,S=window.open("","_blank");S.document.write(k),S.document.close(),S.focus(),S.print()};return r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):s?a.jsx("div",{className:"alert alert-danger",children:s}):a.jsxs("div",{className:"content mt-4",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Customer Invoice List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Invoice"}),a.jsx("li",{className:"breadcrumb-item",children:"Customer Invoice"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Customer Invoice List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("h5",{}),a.jsx("input",{type:"text",value:o,onChange:p,placeholder:"Search billing...",className:"form-control w-25"})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Item No"}),a.jsx("th",{children:"Doc No"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Ref"}),a.jsx("th",{children:"BillingRef"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Final Total"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:b.map((w,k)=>a.jsxs("tr",{children:[a.jsx("td",{children:k+1}),a.jsx("td",{children:w.docnumber}),a.jsx("td",{children:w.customer}),a.jsx("td",{children:w.location}),a.jsx("td",{children:w.reference}),a.jsx("td",{children:w.BillingRef}),a.jsx("td",{children:new Date(w.documentDate).toLocaleDateString()}),a.jsxs("td",{children:["₹",w.finalTotal]}),a.jsx("td",{children:a.jsx("button",{onClick:()=>C(w),className:"btn btn-sm btn-primary",children:"Print"})})]},w._id))})]})})})]}),a.jsx("nav",{className:"d-flex justify-content-end",children:a.jsxs("ul",{className:"pagination pagination-sm",children:[a.jsx("li",{className:`page-item ${c===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(c-1),children:"«"})}),Array.from({length:g},(w,k)=>a.jsx("li",{className:`page-item ${c===k+1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(k+1),children:k+1})},k+1)),a.jsx("li",{className:`page-item ${c===g?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>y(c+1),children:"»"})})]})})]})},$8={productName:"",hsnCode:"",quantity:"",unit:"",taxableValue:"",taxRate:""};function IDe(){const[e,t]=N.useState("Outward"),[r,n]=N.useState({type:"",number:"",date:""}),[s,i]=N.useState({name:"",gstin:"",address:"",state:""}),[o,l]=N.useState({name:"",gstin:"",address:"",state:""}),[c,d]=N.useState([{...$8}]),[u,h]=N.useState({mode:"",transporterId:"",vehicleNo:"",distance:""}),[m,p]=N.useState(!1),[v,g]=N.useState([]);N.useEffect(()=>{const S=JSON.parse(localStorage.getItem("invoices"))||[];g(S)},[]);const b=(S,D,E)=>{const T=[...c];T[S][D]=E,d(T)},y=()=>d([...c,{...$8}]),C=S=>d(c.filter((D,E)=>E!==S)),w=S=>{S.preventDefault(),console.log("e-Way Bill Data:",{transactionType:e,document:r,consignor:s,consignee:o,items:c,transport:u}),alert("e-Way Bill data logged to console.")},k=S=>{n({type:S.category,number:S.docnumber,date:S.docdate}),i({name:"Your Company",gstin:"",address:"",state:""}),l({name:S.customer,gstin:"",address:S.location,state:""});const D=S.items.map(E=>({productName:E.matdesc,hsnCode:"",quantity:E.matqty,unit:E.unit,taxableValue:E.price*E.matqty,taxRate:18}));d(D),p(!1)};return a.jsxs("div",{className:"content",children:[a.jsx("h3",{className:"mb-4",children:"e-Way Bill Entry"}),a.jsx("button",{className:"btn btn-outline-primary mb-3",onClick:()=>p(!0),children:"Search Billing"}),a.jsxs("form",{onSubmit:w,children:[a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{className:"col-sm-3 col-form-label",children:"Transaction Type"}),a.jsxs("div",{className:"col-sm-9 d-flex align-items-center",children:[a.jsxs("div",{className:"form-check me-3",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"transactionType",id:"outward",checked:e==="Outward",onChange:()=>t("Outward")}),a.jsx("label",{className:"form-check-label",htmlFor:"outward",children:"Outward"})]}),a.jsxs("div",{className:"form-check",children:[a.jsx("input",{className:"form-check-input",type:"radio",name:"transactionType",id:"inward",checked:e==="Inward",onChange:()=>t("Inward")}),a.jsx("label",{className:"form-check-label",htmlFor:"inward",children:"Inward"})]})]})]}),a.jsx("h5",{children:"Document Details"}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsx("label",{htmlFor:"documentType",className:"col-sm-3 col-form-label",children:"Document Type"}),a.jsx("input",{type:"text",className:"form-control",id:"documentType",placeholder:"Invoice, Bill of Supply, etc.",value:r.type,onChange:S=>n({...r,type:S.target.value}),required:!0})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsx("label",{htmlFor:"documentNumber",className:"col-sm-3 col-form-label",children:"Document Number"}),a.jsx("input",{type:"text",className:"form-control",id:"documentNumber",value:r.number,onChange:S=>n({...r,number:S.target.value}),required:!0})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsx("label",{htmlFor:"documentDate",className:"col-sm-3 col-form-label",children:"Document Date"}),a.jsx("input",{type:"date",className:"form-control",id:"documentDate",value:r.date,onChange:S=>n({...r,date:S.target.value}),required:!0})]})]}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-5",children:[a.jsx("h5",{children:"Consignor (From)"}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consignorName",className:"col-sm-3 col-form-label",children:"Name"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorName",value:s.name,onChange:S=>i({...s,name:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consignorGSTIN",className:"col-sm-3 col-form-label",children:"GSTIN"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorGSTIN",placeholder:"15-character GSTIN",maxLength:15,value:s.gstin,onChange:S=>i({...s,gstin:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consignorAddress",className:"col-sm-3 col-form-label",children:"Address"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorAddress",value:s.address,onChange:S=>i({...s,address:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-4 row",children:[a.jsx("label",{htmlFor:"consignorState",className:"col-sm-3 col-form-label",children:"State"}),a.jsx("input",{type:"text",className:"form-control",id:"consignorState",placeholder:"State name or code",value:s.state,onChange:S=>i({...s,state:S.target.value}),required:!0})]})]}),a.jsxs("div",{className:"col-xl-5",children:[a.jsx("h5",{children:"Consignee (To)"}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consigneeName",className:"col-sm-3 col-form-label",children:"Name"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeName",value:o.name,onChange:S=>l({...o,name:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consigneeGSTIN",className:"col-sm-3 col-form-label",children:"GSTIN"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeGSTIN",placeholder:"15-character GSTIN",maxLength:15,value:o.gstin,onChange:S=>l({...o,gstin:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"consigneeAddress",className:"col-sm-3 col-form-label",children:"Address"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeAddress",value:o.address,onChange:S=>l({...o,address:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-4 row",children:[a.jsx("label",{htmlFor:"consigneeState",className:"col-sm-3 col-form-label",children:"State"}),a.jsx("input",{type:"text",className:"form-control",id:"consigneeState",placeholder:"State name or code",value:o.state,onChange:S=>l({...o,state:S.target.value}),required:!0})]})]})]}),a.jsx("h5",{children:"Item Details"}),a.jsxs("table",{className:"table table-bordered table-hover table-sm mb-3",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Product Name"}),a.jsx("th",{children:"HSN Code"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Taxable Value"}),a.jsx("th",{children:"Tax Rate (%)"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:c.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:D+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:S.productName,onChange:E=>b(D,"productName",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:S.hsnCode,onChange:E=>b(D,"hsnCode",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",min:"0",className:"form-control",value:S.quantity,onChange:E=>b(D,"quantity",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control",value:S.unit,onChange:E=>b(D,"unit",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",min:"0",className:"form-control",value:S.taxableValue,onChange:E=>b(D,"taxableValue",E.target.value),required:!0})}),a.jsx("td",{children:a.jsx("input",{type:"number",min:"0",max:"100",className:"form-control",value:S.taxRate,onChange:E=>b(D,"taxRate",E.target.value),required:!0})}),a.jsx("td",{children:c.length>1&&a.jsx("button",{type:"button",className:"btn btn-danger btn-sm",onClick:()=>C(D),children:"Remove"})})]},D))})]}),a.jsx("button",{type:"button",className:"btn btn-secondary mb-4",onClick:y,children:"Add Item"}),a.jsx("h5",{children:"Transport Details"}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"transportMode",className:"col-sm-3 col-form-label",children:"Mode of Transport"}),a.jsx("div",{className:"col-sm-9",children:a.jsxs("select",{id:"transportMode",className:"form-select",value:u.mode,onChange:S=>h({...u,mode:S.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select mode"}),a.jsx("option",{value:"Road",children:"Road"}),a.jsx("option",{value:"Rail",children:"Rail"}),a.jsx("option",{value:"Air",children:"Air"}),a.jsx("option",{value:"Ship",children:"Ship"})]})})]}),a.jsxs("div",{className:"mb-3 row",children:[a.jsx("label",{htmlFor:"transporterId",className:"col-sm-3 col-form-label",children:"Transporter ID / Vehicle No."}),a.jsx("div",{className:"col-sm-9",children:a.jsx("input",{type:"text",id:"transporterId",className:"form-control",placeholder:"Transporter ID or Vehicle Number",value:u.transporterId,onChange:S=>h({...u,transporterId:S.target.value}),required:!0})})]}),a.jsxs("div",{className:"mb-4 row",children:[a.jsx("label",{htmlFor:"distance",className:"col-sm-3 col-form-label",children:"Distance (km)"}),a.jsx("div",{className:"col-sm-9",children:a.jsx("input",{type:"number",min:"0",id:"distance",className:"form-control",value:u.distance,onChange:S=>h({...u,distance:S.target.value}),required:!0})})]}),a.jsx("button",{type:"submit",className:"btn btn-primary mt-4",children:"Generate e-Way Bill"})]}),m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Select Billing Entry"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(!1)})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Doc No"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:v.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:S.docnumber}),a.jsx("td",{children:S.customer}),a.jsx("td",{children:S.location}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>k(S),children:"Select"})})]},D))})]})})]})})})]})]})}const PDe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(""),[s,i]=N.useState(""),[o,l]=N.useState([]),[c,d]=N.useState(null),[u,h]=N.useState(!1),[m,p]=N.useState(""),[v,g]=N.useState({}),[b,y]=N.useState(""),[C,w]=N.useState([]),[k,S]=N.useState(1),[D]=N.useState(5),[E,T]=N.useState(!1),[A,L]=N.useState(!1);N.useEffect(()=>{if(e.length>0){const ye=e.filter(Ne=>Ne.roleId.toLowerCase().includes(b.toLowerCase())||Ne.roleName.toLowerCase().includes(b.toLowerCase()));w(ye),S(1)}},[b,e]);const P={Dashboard:["Dashboard"],"Master Data":["Material Master","Customer Master","Vendor Master","Customer Price List","Vendor Price List","Tax List","Location Master","Process List Master","General Condition Master"],MRP:["MRP"],Category:["Material Category","Customer Category","Vendor Category","Purchase Indent Category","Sales Indent Category","PO Category","Sales RFQ Category","Sales Order Category","Goods Receipt Category","Goods Issue Category","Purchase Contract Category","Billing Category","Invoice Category","Purchase Quotation Category","Sale Contract Category","Transfer Category"],Purchase:["Purchase Indent","Purchase Quotation","Purchase Contract","Purchase Order","Purchase Indent List","Purchase Quotations List","Purchase Contract List","Purchase Order List"],Sales:["Sales Indent","Sales Quotation Form","Sales Contract","Sales Order","Sales Delivery","Sales Indent List","Sales Quotations List","Sales Contract List","Sales Order List","Sales Delivery List"],Inventory:["Material Receipt","Material Receipt List","Material Issue","Material Transfer","Material Issue List","Stock List"],Invoice:["Invoice Form","Invoice List"],Billing:["Billing Form","Billing List"],Accounts:["GST","Ledger","Payments"],CRM:["Contacts List","Leads","Proposals","Sources","Lost Reason","Contact Stage","Industry","Calls"],"Project Management":["Projects","Tasks","Milestones","Time Entries"],Campaigns:["Campaigns","Analytics"],HRMS:["Designation","Department","Employee","LeaveRequests","LeaveRequestManagement","Payroll","AttendanceRegister","AttendanceReports","AttendanceTaking"]},O=Object.keys(P);N.useEffect(()=>{Z(),z()},[]);const Z=async()=>{try{const ye=await Oe.get("/api/roles");t(ye.data)}catch(ye){console.error("Error fetching roles:",ye)}},z=async()=>{try{const ye=await Oe.get("/api/roles/next-id");p(ye.data.nextId),c||n(ye.data.nextId)}catch(ye){console.error("Error fetching next role ID:",ye),p("R-XX")}},K=()=>{const ye={};return/^[A-Za-z\s]+$/.test(s)||(ye.roleName="Role name should contain only alphabets and spaces"),o.length===0&&(ye.permissions="At least one permission is required"),g(ye),Object.keys(ye).length===0},B=async ye=>{if(ye.preventDefault(),!K())return;if(E){g({...v,roleName:"Role name already exists"}),alert("Role name already exists so choose another name");return}const Ne={roleId:r,roleName:s,permissions:o};try{c?(await Oe.put(`/api/roles/${c}`,Ne),alert("Role updated successfully!")):(await Oe.post("/api/roles",Ne),alert("Role created successfully!")),Z(),re(),ne()}catch(Ue){console.error("Error saving role:",Ue)}},Q=ye=>{d(ye._id),n(ye.roleId),i(ye.roleName),l(ye.permissions||[]),ae()},U=ye=>["SuperAdmin","Telecaller","Faculty","Student"].includes(ye),J=async(ye,Ne)=>{if(U(Ne)){alert(`The role "${Ne}" is a system role and cannot be deleted.`);return}if(window.confirm(`Are you sure you want to delete the role "${Ne}"?`))try{await Oe.delete(`/api/roles/${ye}`),Z()}catch(Ue){console.error("Error deleting role:",Ue)}},Y=k*D,oe=Y-D,M=C.slice(oe,Y),V=Math.ceil(C.length/D),H=ye=>S(ye),ee=ye=>{y(ye.target.value)},re=()=>{g({}),c?n(""):z(),i(""),l([]),d(null),T(!1)},ae=()=>{c||z(),L(!0)},ne=()=>{h(!1),L(!1),re()},ie=ye=>{const Ne=[...o],Ue=P[ye]||[];if(Ne.includes(ye)){const Qe=Ne.filter(ot=>ot!==ye&&!Ue.includes(ot));l(Qe)}else Ne.includes(ye)||Ne.push(ye),Ue.forEach(Qe=>{Ne.includes(Qe)||Ne.push(Qe)}),l(Ne);Ne.length>0&&v.permissions&&g({...v,permissions:null})},G=(ye,Ne)=>{const Ue=[...o];if(Ue.includes(Ne)){const Qe=Ue.indexOf(Ne);if(Qe>-1&&Ue.splice(Qe,1),!(P[ye]||[]).some(Le=>Ue.includes(Le))&&Ue.includes(ye)){const Le=Ue.indexOf(ye);Le>-1&&Ue.splice(Le,1)}}else Ue.includes(ye)||Ue.push(ye),Ue.push(Ne);l(Ue),Ue.length>0&&v.permissions&&g({...v,permissions:null})},de=ye=>{if(P[ye]){const Ne=P[ye]||[],Ue=o.filter(Qe=>Qe!==ye&&!Ne.includes(Qe));l(Ue)}else{const Ne=o.filter(Ue=>Ue!==ye);for(const[Ue,Qe]of Object.entries(P))if(Qe.includes(ye)){if(!Qe.some(xt=>xt!==ye&&Ne.includes(xt))&&Ne.includes(Ue)){const xt=Ne.indexOf(Ue);xt>-1&&Ne.splice(xt,1)}break}l(Ne)}o.length===0&&g({...v,permissions:"At least one permission is required"})},X=ye=>o.includes(ye),le=ye=>(P[ye]||[]).every(Ue=>o.includes(Ue)),Se=ye=>{if(!ye||ye.length===0)return"None";const Ne={};return ye.forEach(Ue=>{P[Ue]&&(Ne[Ue]||(Ne[Ue]=[]))}),ye.forEach(Ue=>{if(!P[Ue]){for(const[Qe,ot]of Object.entries(P))if(ot.includes(Ue)){Ne[Qe]||(Ne[Qe]=[]),Ne[Qe].push(Ue);break}}}),Object.entries(Ne).map(([Ue,Qe])=>a.jsxs("div",{className:"permission-group mb-1",children:[a.jsx("span",{className:"fw-bold",children:Ue}),Qe.length>0&&a.jsx("div",{className:"sub-permissions ms-2 small",children:Qe.join(", ")})]},Ue))},ue=async ye=>{if(!ye){T(!1);return}try{if(c){const Ue=e.find(Qe=>Qe._id===c);if(Ue&&Ue.roleName===ye){T(!1);return}}const Ne=await Oe.get(`/api/roles/check-name?name=${encodeURIComponent(ye)}`);if(T(Ne.data.exists),Ne.data.exists)g({...v,roleName:"Role name already exists"});else{const Ue={...v};Ue.roleName==="Role name already exists"&&(delete Ue.roleName,g(Ue))}}catch(Ne){console.error("Error checking role name:",Ne)}},se=ye=>{const Ne=ye.target.value;if(i(Ne),!/^[A-Za-z\s]*$/.test(Ne))g({...v,roleName:"Role name should contain only alphabets and spaces"});else{const Ue={...v};delete Ue.roleName,g(Ue),Ne.trim()&&ue(Ne)}};return a.jsx(a.Fragment,{children:a.jsx("div",{className:"",children:a.jsx("div",{className:"page-wrapper cardhead",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("h4",{children:"Access Control"})}),a.jsx("div",{className:"col-xl-5 float-end ms-auto",children:a.jsx("div",{className:"d-flex title-head",children:a.jsx("div",{className:"daterange-picker d-flex align-items-center justify-content-center",children:a.jsxs("div",{className:"head-icons",children:[a.jsx("a",{href:"/AccessControl","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"Refresh",children:a.jsx("i",{className:"ti ti-refresh-dot"})}),a.jsx("a",{href:"javascript:void(0);","data-bs-toggle":"tooltip","data-bs-placement":"top","data-bs-original-title":"Collapse",id:"collapse-header",children:a.jsx("i",{className:"ti ti-chevrons-up"})})]})})})})]})})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsx("div",{children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"input-group",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Role ID or Role Name",value:b,onChange:ee})})}),a.jsx("div",{className:"col-md-3"}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"d-flex title-head",children:a.jsx("div",{className:"daterange-picker d-flex align-items-center justify-content-center",children:a.jsx("div",{className:"head-icons",children:a.jsx("button",{className:"btn btn-primary mt-2",type:"button",onClick:()=>{re(),ae()},children:"Add Role"})})})})})]})}),a.jsx("div",{className:"table-responsive mt-3",children:a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{style:{width:"15%"},children:"Role ID"}),a.jsx("th",{style:{width:"15%"},children:"Role Name"}),a.jsx("th",{style:{width:"40%"},children:"Permissions"}),a.jsx("th",{style:{width:"20%"},children:"Actions"})]})}),a.jsx("tbody",{children:M.length>0?M.map(ye=>a.jsxs("tr",{children:[a.jsx("td",{children:ye.roleId}),a.jsx("td",{children:ye.roleName}),a.jsx("td",{style:{width:"100%"},children:a.jsx("div",{style:{maxHeight:"100px",overflowY:"auto",fontSize:"0.85rem",textWrap:"wrap"},children:Se(ye.permissions)})}),a.jsx("td",{children:a.jsxs("div",{className:"hstack gap-2 fs-15",children:[a.jsx("button",{onClick:()=>Q(ye),className:"btn btn-icon btn-sm btn-soft-info rounded-pill",children:a.jsx("i",{className:"feather-edit"})}),a.jsx("button",{onClick:()=>J(ye._id,ye.roleName),className:"btn btn-icon btn-sm btn-soft-danger rounded-pill",disabled:U(ye.roleName),style:{opacity:U(ye.roleName)?"0.5":"1",cursor:U(ye.roleName)?"not-allowed":"pointer"},children:a.jsx("i",{className:"feather-trash"})})]})})]},ye._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"text-center",children:"No roles found."})})})]})}),C.length>0&&a.jsx("div",{className:"d-flex justify-content-left mt-4",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination",style:{gap:"0px"},children:[a.jsx("li",{className:`page-item ${k===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>H(k-1),disabled:k===1,style:{fontSize:"28px",width:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"«"})}),a.jsx("li",{className:`page-item ${k===V?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>H(k+1),disabled:k===V,style:{fontSize:"28px",width:"48px",display:"flex",alignItems:"center",justifyContent:"center",padding:0},children:"»"})})]})})})]})})})}),A&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:c?"Edit Role":"Add New Role"}),a.jsx("button",{type:"button",className:"btn-close",onClick:ne})]}),a.jsx("div",{className:"modal-body p-4",children:a.jsxs("form",{onSubmit:B,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Role ID"}),a.jsx("input",{type:"text",className:"form-control",value:c?r:m,disabled:!0}),a.jsx("small",{className:"text-muted",children:"Role ID is automatically generated"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Role Name"}),a.jsx("input",{type:"text",className:`form-control ${v.roleName||E?"is-invalid":""}`,value:s,onChange:se,disabled:!!c,placeholder:"Enter role name",required:!0}),v.roleName&&a.jsx("div",{className:"invalid-feedback",children:v.roleName}),!v.roleName&&E&&a.jsx("div",{className:"invalid-feedback",children:"Role name already exists"}),!v.roleName&&!E&&s.trim()&&a.jsx("div",{className:"text-success small mt-1",children:"Role name is available"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Permissions"}),a.jsx("div",{className:`permissions-container p-3 border rounded ${v.permissions?"border-danger":""}`,style:{maxHeight:"400px",overflowY:"auto"},children:O.map(ye=>a.jsxs("div",{className:"permission-item mb-3",children:[a.jsxs("div",{className:"form-check",children:[a.jsx("input",{type:"checkbox",className:"form-check-input",id:`perm-${ye}`,checked:o.includes(ye),onChange:()=>ie(ye)}),a.jsx("label",{className:"form-check-label fw-bold",htmlFor:`perm-${ye}`,children:ye}),o.includes(ye)&&a.jsx("span",{className:"ms-2 small",children:le(ye)?"(All selected)":"(Some selected)"})]}),P[ye]?.length>0&&a.jsx("div",{className:"sub-permissions ms-4 mt-2",children:P[ye].map(Ne=>a.jsxs("div",{className:"form-check",children:[a.jsx("input",{type:"checkbox",className:"form-check-input",id:`subperm-${Ne}`,checked:X(Ne),onChange:()=>G(ye,Ne)}),a.jsx("label",{className:"form-check-label",htmlFor:`subperm-${Ne}`,children:Ne})]},Ne))})]},ye))}),v.permissions&&a.jsx("div",{className:"text-danger small mt-1",children:v.permissions}),a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{children:"Selected Permissions:"}),a.jsx("div",{className:"selected-permissions mt-2",children:o.length>0?o.map(ye=>a.jsxs("span",{className:"badge bg-soft-primary mb-1 m-1",children:[ye," ",a.jsx("button",{type:"button",className:"btn-close btn-close-primary rounded-pill",onClick:()=>de(ye)})]},ye)):a.jsx("span",{className:"text-muted",children:"No permissions selected"})})]})]}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save Role"})]})})]})})})]})})})})};function ODe(){const[e,t]=N.useState(null),[r,n]=N.useState(0),[s,i]=N.useState(0),[o,l]=N.useState("input"),[c,d]=N.useState(0),[u,h]=N.useState(0),[m,p]=N.useState([]),[v,g]=N.useState([]),[b,y]=N.useState([]),[C,w]=N.useState(!0),[k,S]=N.useState([]),[D,E]=N.useState([]),[T,A]=N.useState(""),[L,P]=N.useState(null),[O,Z]=N.useState([]),[z,K]=N.useState([]),[B,Q]=N.useState([]),U=localStorage.getItem("selectedCompanyId"),J=localStorage.getItem("financialYear");localStorage.getItem("selectedCompanyId");const Y=["Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","Jan","Feb","Mar"];N.useEffect(()=>{Oe.get("/api/locations",{params:{companyId:U,financialYear:J}}).then(H=>g(H.data)).catch(H=>console.error("Error fetching locations",H)),Oe.get("/api/billingform",{params:{companyId:U,financialYear:J}}).then(H=>E(H.data)).catch(H=>console.error("Error fetching customer invoices",H)),y(Y)},[]),N.useEffect(()=>{if(!J){Q([]);return}const[H,ee]=J.split(" - ");if(!H||!ee){Q(Y.map(ue=>({key:ue,label:ue})));return}const[re,ae,ne]=H.split("/"),[ie,G,de]=ee.split("/"),X=Number(ne),le=Number(de);let Se=[];for(let ue=0;ue<Y.length;ue++){let se="";ue<9?se=`${Y[ue]} ${X}`:se=`${Y[ue]} ${le}`,Se.push({key:`${Y[ue]}-${ue<9?X:le}`,month:Y[ue],year:ue<9?X:le,label:se})}Q(Se)},[J]);const oe=H=>{if(!J)return!0;const[ee,re]=J.split(" - ");if(!ee||!re)return!0;const[ae,ne,ie]=ee.split("/"),[G,de,X]=re.split("/"),le=new Date(`${ie}-${ne}-${ae}T00:00:00`),Se=new Date(`${X}-${de}-${G}T23:59:59`),ue=new Date(H);return ue>=le&&ue<=Se};N.useEffect(()=>{const H=()=>{const ee={};B.forEach(ae=>{ee[ae.label]={month:ae.label,input:0,output:0,balance:0}}),k.forEach(ae=>{if(!oe(ae.createdAt))return;const ne=new Date(ae.createdAt),ie=ne.toLocaleString("en-US",{month:"short"}),G=(ne.getMonth()<3,ne.getFullYear()),de=B.find(le=>le.month===ie&&le.year===G)?.label,X=(ae.cgst||0)+(ae.sgst||0)+(ae.igst||0);de&&ee[de]&&(ee[de].input+=X)}),D.forEach(ae=>{if(!oe(ae.createdAt))return;const ne=new Date(ae.createdAt),ie=ne.toLocaleString("en-US",{month:"short"}),G=(ne.getMonth()<3,ne.getFullYear()),de=B.find(le=>le.month===ie&&le.year===G)?.label,X=(ae.cgst||0)+(ae.sgst||0)+(ae.igst||0);de&&ee[de]&&(ee[de].output+=X)});const re=Object.values(ee).map(ae=>({...ae,balance:ae.output-ae.input}));p(re)};(k.length||D.length)&&H()},[k,D,J,b,B]),N.useEffect(()=>{(async()=>{try{const ee=await Oe.get("/api/invoiceform",{params:{companyId:U,financialYear:J}}),re=ee.data.filter(ie=>{if(!oe(ie.createdAt))return!1;const G=!L||ie.location===L,de=new Date(ie.createdAt),X=de.toLocaleString("en-US",{month:"short"}),le=(de.getMonth()<3,de.getFullYear()),Se=!T||`${X} ${le}`===T;return G&&Se}),ae=re?.sort((ie,G)=>new Date(G.createdAt)-new Date(ie.createdAt)),ne=re.reduce((ie,G)=>ie+(G.cgst||0)+(G.sgst||0)+(G.igst||0),0);n(ne),d(ne),S(ee.data),Z(ae),t(null)}catch(ee){t("Failed to fetch invoices"),console.error(ee)}finally{w(!1)}})()},[T,L,J,B]),N.useEffect(()=>{(async()=>{try{const ee=await Oe.get("/api/billingform",{params:{companyId:U,financialYear:J}}),re=ee.data.filter(ie=>{if(!oe(ie.createdAt))return!1;const G=!L||ie.location===L,de=new Date(ie.createdAt),X=de.toLocaleString("en-US",{month:"short"}),le=(de.getMonth()<3,de.getFullYear()),Se=!T||`${X} ${le}`===T;return G&&Se}),ae=re.reduce((ie,G)=>ie+(G.cgst||0)+(G.sgst||0)+(G.igst||0),0);i(ae);const ne=re?.sort((ie,G)=>new Date(G.createdAt)-new Date(ie.createdAt));E(ee.data),K(ne),t(null)}catch(ee){t("Failed to fetch invoices"),console.error(ee)}finally{w(!1)}})()},[T,L,J,B]);const M=s-r,V=M>0?"You need to pay GST":M<0?"You will get a GST refund":"No GST to pay or refund";return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"GST List"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Accounts"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"GST List"})]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-xl-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:"Month"}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{name:"month",className:"form-select",id:"month-select",onChange:H=>A(H.target.value),children:[a.jsx("option",{value:"",children:"Select Month"}),B.map((H,ee)=>a.jsx("option",{value:H.label,children:H.label},ee))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-4",children:"Location"}),a.jsx("div",{className:"col-xl-8",children:a.jsxs("select",{name:"location",className:"form-select",id:"location-select",onChange:H=>P(H.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),v.map((H,ee)=>a.jsx("option",{value:H.name,children:H.name},ee))]})})]}),a.jsxs("div",{className:"col-xl-3 ms-auto ",children:[o==="input"&&a.jsxs("h5",{style:{color:"blue"},children:["Total Input GST: ₹",r.toFixed(2)]}),o==="output"&&a.jsxs("h5",{style:{color:"orange"},children:["Total Output GST: ₹",s.toFixed(2)]}),o==="gstr"&&a.jsxs("h5",{style:{color:M>0?"red":M<0?"green":"black"},children:[V," — ₹",Math.abs(M).toFixed(2)]})]})]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("ul",{className:"nav nav-tabs tab-style-6",id:"myTab-3",role:"tablist",children:[a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:`nav-link ${o==="input"?"active":""}`,id:"products-tab","data-bs-toggle":"tab","data-bs-target":"#products-tab-pane",type:"button",role:"tab","aria-controls":"products-tab-pane","aria-selected":o==="input",onClick:()=>l("input"),children:[a.jsx("i",{className:"feather-gift me-1 align-middle d-inline-block"}),"Input Tax"]})}),a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:`nav-link ${o==="output"?"active":""}`,id:"sales-tab","data-bs-toggle":"tab","data-bs-target":"#sales-tab-pane",type:"button",role:"tab","aria-controls":"sales-tab-pane","aria-selected":o==="output",onClick:()=>l("output"),children:[a.jsx("i",{className:"feather-file me-1 align-middle d-inline-block"}),"Output Tax"]})}),a.jsx("li",{className:"nav-item",role:"presentation",children:a.jsxs("button",{className:`nav-link ${o==="gstr"?"active":""}`,id:"profit-tab","data-bs-toggle":"tab","data-bs-target":"#profit-tab-pane",type:"button",role:"tab","aria-controls":"profit-tab-pane","aria-selected":o==="gstr",onClick:()=>l("gstr"),children:[a.jsx("i",{className:"feather-file-text me-1 align-middle d-inline-block"}),"GSTR"]})})]}),a.jsxs("div",{className:"tab-content",id:"myTabContent2",children:[a.jsx("div",{className:`tab-pane fade ${o==="input"?"show active":""} p-0 border-bottom-0`,id:"products-tab-pane",role:"tabpanel","aria-labelledby":"products-tab",tabIndex:"0",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",children:"Invoice No"}),a.jsx("th",{scope:"col",children:"Date"}),a.jsx("th",{scope:"col",children:"Amount"}),a.jsx("th",{scope:"col",children:"CGST"}),a.jsx("th",{scope:"col",children:"SGST/UTGST"}),a.jsx("th",{scope:"col",children:"IGST"}),a.jsx("th",{scope:"col",children:"Total GST"})]})}),a.jsx("tbody",{children:O.map((H,ee)=>a.jsxs("tr",{children:[a.jsx("td",{children:H.docnumber}),a.jsx("td",{children:new Date(H.createdAt).toLocaleDateString()}),a.jsx("td",{children:H.finalTotal}),a.jsx("td",{children:H.cgst}),a.jsx("td",{children:H.sgst}),a.jsx("td",{children:H.igst}),a.jsx("td",{children:(H.cgst||0)+(H.sgst||0)+(H.igst||0)})]},ee))})]})})}),a.jsx("div",{className:`tab-pane fade ${o==="output"?"show active":""}`,id:"sales-tab-pane",role:"tabpanel","aria-labelledby":"sales-tab",tabIndex:"0",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",children:"Invoice No"}),a.jsx("th",{scope:"col",children:"Date"}),a.jsx("th",{scope:"col",children:"Amount"}),a.jsx("th",{scope:"col",children:"CGST"}),a.jsx("th",{scope:"col",children:"SGST/UTGST"}),a.jsx("th",{scope:"col",children:"IGST"}),a.jsx("th",{scope:"col",children:"Total GST"})]})}),a.jsx("tbody",{children:z.map((H,ee)=>a.jsxs("tr",{children:[a.jsx("td",{children:H.docnumber}),a.jsx("td",{children:new Date(H.createdAt).toLocaleDateString()}),a.jsx("td",{children:H.finalTotal}),a.jsx("td",{children:H.cgst}),a.jsx("td",{children:H.sgst}),a.jsx("td",{children:H.igst}),a.jsx("td",{children:((H.cgst||0)+(H.sgst||0)+(H.igst||0)).toFixed(2)})]},ee))})]})})}),a.jsx("div",{className:`tab-pane fade ${o==="gstr"?"show active":""}`,id:"profit-tab-pane",role:"tabpanel","aria-labelledby":"profit-tab",tabIndex:"0",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{scope:"col",children:"Month"}),a.jsx("th",{scope:"col",children:"Input"}),a.jsx("th",{scope:"col",children:"Output"}),a.jsx("th",{scope:"col",children:"Balance"})]})}),a.jsx("tbody",{children:m.map((H,ee)=>a.jsxs("tr",{children:[a.jsx("td",{children:H.month}),a.jsx("td",{children:H.input.toFixed(2)}),a.jsx("td",{children:H.output.toFixed(2)}),a.jsx("td",{children:H.balance.toFixed(2)})]},ee))})]})})})]})]})]})})})]})}const NE=10;function MDe(){const[e,t]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(null),[o,l]=N.useState(null),[c,d]=N.useState([]),[u,h]=N.useState([]),[m,p]=N.useState(""),[v,g]=N.useState(""),[b,y]=N.useState([]),[C,w]=N.useState([]),[k,S]=N.useState(""),[D,E]=N.useState(1),[T,A]=N.useState(null),L=async()=>{try{const de=(await Oe.get("/api/purchase-contract-categories",{params:{companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}})).data.map(X=>({label:`${X.categoryName} (${X.prefix})`,value:X._id}));h(de)}catch(G){console.error("Failed to fetch categories:",G)}},P=localStorage.getItem("selectedCompanyId"),O=localStorage.getItem("financialYear"),Z=async()=>{try{const X=(await Oe.get("/api/vendors",{params:{companyId:P,financialYear:O}})).data.filter(le=>!le.isDeleted&&!le.isBlocked).map(le=>({label:`${le.name1} ${le.name2||""}`,value:le.vendorName,vnNo:le.vnNo||""}));d(X),y(X)}catch(G){console.error("Failed to fetch vendors:",G)}},z=async()=>{try{const G=await Oe.get("/api/locations",{params:{companyId:P,financialYear:O}});Array.isArray(G.data)?w(G.data):G.data&&Array.isArray(G.data.locations)?w(G.data.locations):w([])}catch(G){console.error("Failed to fetch locations:",G),w([])}},K=async()=>{try{n(!0);const G=localStorage.getItem("selectedCompanyId"),de=localStorage.getItem("financialYear"),le=(await Oe.get("/api/contracts/get",{params:{companyId:G,financialYear:de}})).data.sort((Se,ue)=>new Date(ue.createdAt)-new Date(Se.createdAt));t(le),i(null)}catch(G){console.error("Failed to fetch contracts:",G),i("Failed to load contracts. Please try again.")}finally{n(!1)}};N.useEffect(()=>{K(),Z(),L(),z()},[]);const B=async G=>{try{const X=(await Oe.get(`/api/contracts/${G}`)).data;l({...X,validityFDate:X.validityFDate?new Date(X.validityFDate).toISOString().split("T")[0]:"",validityTDate:X.validityTDate?new Date(X.validityTDate).toISOString().split("T")[0]:"",items:X.items.map(le=>({...le}))})}catch(de){console.error("Failed to fetch contract details:",de),alert("Failed to load contract details")}},Q=async()=>{try{const G=o.items.reduce((X,le)=>X+(parseFloat(le.price)*parseFloat(le.qty)||0),0),de={...o,totalPrice:G};await Oe.put(`/api/contracts/${o._id}`,de),alert("Contract updated successfully!"),l(null),K()}catch(G){console.error("Failed to update contract:",G),alert("Failed to update contract")}},U=()=>{l(null)},J=(G,de)=>{l(X=>({...X,[G]:de}))},Y=(G,de,X)=>{const le=[...o.items];le[G][de]=X,l(Se=>({...Se,items:le}))},oe=async G=>{try{const de=await Oe.get(`/api/contracts/${G}`);A(de.data)}catch(de){console.error("Failed to fetch contract details:",de),alert("Failed to load contract details")}},M=G=>{const de=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Purchase Contract - ${G.contractNumber}</title>
        <style>
          body { font-family: Arial, sans-serif; margin: 20px; }
          .header { text-align: center; margin-bottom: 30px; }
          .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
          .info-item { margin-bottom: 10px; }
          table { width: 100%; border-collapse: collapse; margin-top: 20px; }
          th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
          th { background-color: #f5f5f5; }
          .total-row { background-color: #f0f0f0; font-weight: bold; }
          .print-date { text-align: right; margin-top: 30px; font-size: 12px; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>PURCHASE CONTRACT</h1>
          <h3>Contract Number: ${G.contractNumber}</h3>
        </div>
        
        <div class="info-grid">
          <div>
            <div class="info-item"><strong>Vendor:</strong> ${G.vendorName}</div>
            <div class="info-item"><strong>Location:</strong> ${G.location||"-"}</div>
            <div class="info-item"><strong>Purchase Group:</strong> ${G.buyerGroup||"-"}</div>
          </div>
          <div>
            <div class="info-item"><strong>Valid From:</strong> ${G.validityFDate?new Date(G.validityFDate).toLocaleDateString():"-"}</div>
            <div class="info-item"><strong>Valid To:</strong> ${G.validityTDate?new Date(G.validityTDate).toLocaleDateString():"-"}</div>
            <div class="info-item"><strong>Created:</strong> ${new Date(G.createdAt).toLocaleDateString()}</div>
          </div>
        </div>
        
        ${G.note?`<div class="info-item"><strong>Note:</strong> ${G.note}</div>`:""}
        
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Quantity</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody>
            ${G.items.map((le,Se)=>`
              <tr>
                <td>${Se+1}</td>
                <td>${le.materialId}</td>
                <td>${le.description}</td>
                <td>${le.qty}</td>
                <td>${le.unit||le.baseUnit}</td>
                <td>₹${le.price?parseFloat(le.price).toFixed(2):"0.00"}</td>
                <td>₹${le.price&&le.qty?(parseFloat(le.price)*parseFloat(le.qty)).toFixed(2):"0.00"}</td>
              </tr>
            `).join("")}
          </tbody>
          <tfoot>
            <tr class="total-row">
              <td colspan="6" style="text-align: right;"><strong>Grand Total:</strong></td>
              <td><strong>₹${G.items.reduce((le,Se)=>{const ue=Se.price&&Se.qty?parseFloat(Se.price)*parseFloat(Se.qty):0;return le+ue},0).toFixed(2)}</strong></td>
            </tr>
          </tfoot>
        </table>
        
        <div class="print-date">
          Printed on: ${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}
        </div>
      </body>
      </html>
    `,X=window.open("","_blank");X.document.write(de),X.document.close(),X.focus(),X.print()},V=N.useMemo(()=>{let G=e;return(m||v)&&(G=G.filter(de=>{const X=new Date(de.createdAt),le=m?new Date(m):null,Se=v?new Date(v):null;return le&&Se?X>=le&&X<=Se:le?X>=le:Se?X<=Se:!0})),k&&(G=G.filter(de=>[de.contractNumber,de.vendorName,de.note,de.location,de.buyerGroup].join(" ").toLowerCase().includes(k.toLowerCase())),G=G.sort((de,X)=>{const le=contract.items?.reduce((ue,se)=>{const ye=se.price&&se.qty?parseFloat(se.price)*parseFloat(se.qty):0;return ue+ye},0)||0,Se=contract.items?.reduce((ue,se)=>{const ye=se.price&&se.qty?parseFloat(se.price)*parseFloat(se.qty):0;return ue+ye},0)||0;return le-Se})),G},[k,e,m,v]),H=()=>{S(""),p(""),g(""),E(1)},ee=(G,de)=>{if(!de)return"transparent";switch(G){case 0:return"#d4edda";case 1:return"#fff3cd";default:return"transparent"}},re=Math.ceil(V.length/NE),ae=N.useMemo(()=>{const G=(D-1)*NE;return V.slice(G,G+NE)},[V,D]),ne=G=>{S(G.target.value),E(1)},ie=G=>{G<1||G>re||E(G)};return r?a.jsx("div",{className:"d-flex justify-content-center",children:a.jsx("div",{className:"spinner-border",role:"status"})}):s?a.jsxs("div",{style:{padding:"20px"},children:[a.jsx("h2",{children:"Purchase Contracts"}),a.jsx("div",{style:{color:"red",marginBottom:"20px"},children:s}),a.jsx("button",{onClick:K,style:{padding:"10px 20px"},children:"Retry"})]}):T?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Purchase Contract Preview - ",T.contractNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>A(null)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Contract Number"}),a.jsx("div",{className:"fw-bold",children:T.contractNumber})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Vendor"}),a.jsx("div",{className:"fw-bold",children:T.vendorName})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Location"}),a.jsx("div",{className:"fw-bold",children:T.location||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Purchase Group"}),a.jsx("div",{className:"fw-bold",children:T.buyerGroup||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Valid From"}),a.jsx("div",{className:"fw-bold",children:T.validityFDate?new Date(T.validityFDate).toLocaleDateString():"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Valid To"}),a.jsx("div",{className:"fw-bold",children:T.validityTDate?new Date(T.validityTDate).toLocaleDateString():"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Financial Year"}),a.jsx("div",{className:"fw-bold",children:T.financialYear||"-"})]})})}),a.jsx("div",{className:"col-md-3",children:a.jsx("div",{className:"card border-0 bg-light",children:a.jsxs("div",{className:"card-body p-3",children:[a.jsx("small",{className:"text-muted",children:"Created Date"}),a.jsx("div",{className:"fw-bold",children:new Date(T.createdAt).toLocaleDateString()})]})})})]}),T.note&&a.jsxs("div",{className:"alert alert-info mb-4",children:[a.jsx("strong",{children:"Note:"})," ",T.note]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:T.items.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{children:G.materialId}),a.jsx("td",{children:G.description}),a.jsx("td",{children:G.qty}),a.jsx("td",{children:G.unit||G.baseUnit}),a.jsxs("td",{children:["₹",G.price?parseFloat(G.price).toFixed(2):"0.00"]}),a.jsxs("td",{children:["₹",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})]},de))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"6",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["₹",T.items.reduce((G,de)=>{const X=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return G+X},0).toFixed(2)]})]})})]})})]})]})})}):o?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Edit Purchase Contract - ",o.contractNumber]}),a.jsxs("div",{children:[a.jsx("button",{type:"button",className:"btn btn-success me-4 mx-4",onClick:Q,children:"Save Changes"}),a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:U,children:"Cancel"})]})]}),a.jsx("div",{className:"modal-body",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row g-3 mb-4",children:[a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Contract Number"}),a.jsx("input",{type:"text",className:"form-control",value:o.contractNumber||"",onChange:G=>J("contractNumber",G.target.value),readOnly:!0})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsx(Gw,{options:u,value:u.find(G=>G.value===o.categoryId),onChange:G=>J("categoryId",G?.value),placeholder:"Select Category"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Vendor"}),a.jsx(Gw,{options:b,value:b.find(G=>G.value===o.vendorName),onChange:G=>{J("vendorId",G?.value),J("vendorName",G?.label)},placeholder:"Select Vendor"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Valid From Date"}),a.jsx("input",{type:"date",className:"form-control",value:o.validityFDate||"",onChange:G=>J("validityFDate",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Valid To Date"}),a.jsx("input",{type:"date",className:"form-control",value:o.validityTDate||"",onChange:G=>J("validityTDate",G.target.value)})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsxs("select",{className:"form-select",value:o.location||"",onChange:G=>J("location",G.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),C.map((G,de)=>a.jsx("option",{value:G.name||G,children:G.name||G},de))]})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Purchase Group"}),a.jsx("input",{type:"text",className:"form-control",value:o.buyerGroup||"",onChange:G=>J("buyerGroup",G.target.value)})]}),a.jsxs("div",{className:"col-md-8",children:[a.jsx("label",{className:"form-label",children:"Note"}),a.jsx("textarea",{className:"form-control",rows:3,value:o.note||"",onChange:G=>J("note",G.target.value),placeholder:"Add any notes (optional)"})]})]}),a.jsx("h6",{className:"mb-3",children:"Items"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"})]})}),a.jsx("tbody",{children:o.items.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.materialId||"",onChange:X=>Y(de,"materialId",X.target.value),readOnly:!0})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.description||"",onChange:X=>Y(de,"description",X.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.qty||"",onChange:X=>Y(de,"qty",X.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.baseUnit||"",onChange:X=>Y(de,"baseUnit",X.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.orderUnit||"",onChange:X=>Y(de,"orderUnit",X.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:G.unit||"",onChange:X=>Y(de,"unit",X.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"number",className:"form-control form-control-sm",value:G.price||"",onChange:X=>Y(de,"price",X.target.value),step:"0.01"})}),a.jsx("td",{children:a.jsxs("span",{className:"fw-bold text-success",children:["₹",G.price&&G.qty?(parseFloat(G.price)*parseFloat(G.qty)).toFixed(2):"0.00"]})})]},de))}),a.jsx("tfoot",{children:a.jsxs("tr",{className:"table-success",children:[a.jsx("td",{colSpan:"8",className:"text-end fw-bold",children:"Grand Total:"}),a.jsxs("td",{className:"fw-bold",children:["₹",o.items.reduce((G,de)=>{const X=de.price&&de.qty?parseFloat(de.price)*parseFloat(de.qty):0;return G+X},0).toFixed(2)]})]})})]})})]})})})]})})}):a.jsxs("div",{className:"content",children:[a.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h6",{children:"All Purchase Contracts"}),a.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:a.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"center"},children:[a.jsx("input",{type:"text",placeholder:"Search by Contract Number, Vendor, etc...",value:k,onChange:ne,className:"form-control",style:{width:300,marginTop:"22px"}}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"From Date"}),a.jsx("input",{type:"date",value:m,onChange:G=>{p(G.target.value),E(1)},className:"form-control",style:{width:150}})]}),a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[a.jsx("label",{style:{fontSize:"12px",marginBottom:"2px"},children:"To Date"}),a.jsx("input",{type:"date",value:v,onChange:G=>{g(G.target.value),E(1)},className:"form-control",style:{width:150}})]}),a.jsx("button",{onClick:H,className:"btn btn-sm btn-soft-warning",children:"Reset"}),a.jsx("button",{onClick:K,className:"btn btn-sm btn-soft-primary",children:"Refresh"})]})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Contract Number"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Valid From"}),a.jsx("th",{children:"Valid To"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Total Price"}),a.jsx("th",{children:"Note"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ae.map((G,de)=>a.jsxs("tr",{children:[a.jsx("td",{children:de+1}),a.jsx("td",{className:"text-wrap",children:G.contractNumber}),a.jsx("td",{className:"text-wrap",children:G.vendorName}),a.jsx("td",{className:"text-wrap",children:G.location||"-"}),a.jsx("td",{children:G.validityFDate?new Date(G.validityFDate).toLocaleDateString():"-"}),a.jsx("td",{children:G.validityTDate?new Date(G.validityTDate).toLocaleDateString():"-"}),a.jsx("td",{children:new Date(G.createdAt).toLocaleDateString()}),a.jsxs("td",{style:{backgroundColor:ee(de,!!k)},children:["₹",G.items?.reduce((X,le)=>{const Se=le.price&&le.qty?parseFloat(le.price)*parseFloat(le.qty):0;return X+Se},0).toFixed(2)||"0.00"]}),a.jsx("td",{children:G.note||"-"}),a.jsxs("td",{children:[a.jsx("button",{onClick:()=>oe(G._id),className:"btn btn-sm",title:"Preview",children:a.jsx("i",{className:"fas fa-eye",style:{color:"black"}})}),a.jsx("button",{onClick:()=>B(G._id),className:"btn btn-sm",title:"Edit",children:a.jsx("i",{className:"fas fa-edit",style:{color:"black"}})}),a.jsx("button",{onClick:()=>M(G),className:"btn btn-sm",title:"Print",children:a.jsx("i",{className:"fas fa-print",style:{color:"black"}})})]})]},G._id||de))})]})})})}),a.jsx("div",{className:"d-flex justify-content-end ms-auto",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[a.jsx("li",{className:`page-item${D===1?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(D-1),disabled:D===1,children:a.jsx("i",{className:"bi bi-chevron-double-left"})})}),(()=>{const G=[];let de=[1,2],X=[re-1,re].filter(ue=>ue>2),le=[];D<=4?(de=[1,2,3,4,5].filter(ue=>ue<=re),X=[re-1,re].filter(ue=>ue>5)):D>=re-3?(de=[1,2].filter(ue=>ue<re-4),X=[re-4,re-3,re-2,re-1,re].filter(ue=>ue>2&&ue<=re)):(de=[1,2],le=[D-1,D,D+1],X=[re-1,re]);const Se=ue=>ue.map(se=>a.jsx("li",{className:`page-item${D===se?" active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(se),children:se})},se));return G.push(...Se(de)),(le.length>0&&le[0]>de[de.length-1]+1||le.length===0&&X[0]>de[de.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"…"})},"start-ellipsis")),G.push(...Se(le)),X.length>0&&(le.length>0&&X[0]>le[le.length-1]+1||le.length===0&&X[0]>de[de.length-1]+1)&&G.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"…"})},"end-ellipsis")),G.push(...Se(X)),G})(),a.jsx("li",{className:`page-item${D===re?" disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ie(D+1),disabled:D===re,children:a.jsx("i",{className:"bi bi-chevron-double-right"})})})]})})})]})}function RDe(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState([]);Xu();const[c,d]=N.useState(""),[u,h]=N.useState(null),[m,p]=N.useState(null),[v,g]=N.useState(""),[b,y]=N.useState(""),[C,w]=N.useState(""),[k,S]=N.useState(""),[D,E]=N.useState([]),[T,A]=N.useState(""),[L,P]=N.useState(""),[O,Z]=N.useState(""),[z,K]=N.useState(""),[B,Q]=N.useState(!1),[U,J]=N.useState(null),[Y,oe]=N.useState(0),[M,V]=N.useState(!1),[H,ee]=N.useState(!1),[re,ae]=N.useState(""),[ne,ie]=N.useState(""),[G,de]=N.useState(""),[X,le]=N.useState(""),[Se,ue]=N.useState(""),[se,ye]=N.useState(""),[Ne,Ue]=N.useState(null);N.useEffect(()=>{if(Se){const qe=e.filter(ft=>ft.indentId.toLowerCase().includes(Se.toLowerCase()));setFilteredIndents(qe)}},[Se]);const[Qe,ot]=N.useState([]);N.useEffect(()=>{const qe=localStorage.getItem("selectedCompanyId"),ft=localStorage.getItem("financialYear");Oe.get("/api/indent/get",{params:{companyId:qe,financialYear:ft}}).then(Ie=>{const Ke=Ie.data.filter(Ge=>!Ge.isDeleted&&!Ge.isBlocked);t(Ke.map(Ge=>({label:`${Ge.indentId} (${Ge.categoryName})`,value:Ge})))}),Oe.get("/api/purchase-contract-categories",{params:{companyId:qe,financialYear:ft}}).then(Ie=>{n(Ie.data.map(Ke=>({label:`${Ke.categoryName}`,value:Ke._id})))}),Oe.get("/api/vendors",{params:{companyId:qe,financialYear:ft}}).then(Ie=>{const Ke=Ie.data.filter(Ge=>!Ge.isDeleted&&!Ge.isBlocked);i(Ke.map(Ge=>({label:`${Ge.name1} ${Ge.name2||""}`,value:Ge._id,vnNo:Ge.vnNo||""})))}),Oe.get("/api/locations",{params:{companyId:qe,financialYear:ft}}).then(Ie=>{console.log("Locations API response:",Ie.data),Array.isArray(Ie.data)?ot(Ie.data):Ie.data&&Array.isArray(Ie.data.locations)?ot(Ie.data.locations):ot([])}).catch(Ie=>{console.error("Failed to fetch locations:",Ie),ot([])}),console.log("location",T),Oe.get("/api/material",{params:{companyId:qe,financialYear:ft}}).then(Ie=>{console.log("Fetched materials:",Ie.data);const Ke=Ie.data.filter(Ge=>!Ge.isDeleted&&!Ge.isBlocked);l(Ke),console.log("Filtered materials:",Ke)}).catch(Ie=>console.error("Failed to fetch materials:",Ie))},[]);const xt=qe=>{h(qe);const{buyerGroup:ft,materialGroup:Ie,deliveryDate:Ke,location:Ge}=qe.value;A(Ge||""),P(ft||"");const lt=qe.value.items.map(Mt=>({...Mt,unit:Mt.unit||"",price:Mt.price||"",materialGroup:Mt.materialGroup||Ie||"",deliveryDate:Mt.deliveryDate||Ke||""}));E(lt)},Le=(qe,ft,Ie)=>{const Ke=[...D];Ke[qe][ft]=Ie,E(Ke)},dt=()=>{E([...D,{materialId:"",description:"",qty:0,baseUnit:"",orderUnit:"",location:"",buyerGroup:"",unit:"",materialGroup:"",deliveryDate:new Date(new Date().setDate(new Date().getDate()+5)).toISOString().slice(0,10),price:0}])},[Tt,At]=N.useState(!1),[Vt,xe]=N.useState("internal"),[he,ve]=N.useState(""),pe=async qe=>{qe.preventDefault(),At(!0)};N.useEffect(()=>{const qe=D.reduce((ft,Ie)=>{const Ke=parseFloat(Ie.price)||0,Ge=parseFloat(Ie.qty)||0;return ft+Ke*Ge},0);oe(qe)},[D]);const De=async()=>{const qe=localStorage.getItem("selectedCompanyId"),ft=localStorage.getItem("financialYear"),Ie={indentId:u?.value?.indentId,categoryId:m?.value,rfqCategoryId:m?.value,vendor:v,vendorName:b,contractReference:c,validityFDate:O,validityTDate:z,companyId:qe,financialYear:ft,vnNo:k,note:C,buyerGroup:L,location:T,totalPrice:Y,items:D,contractGenType:Vt,externalContractNumber:Vt==="external"?he:null};console.log("Payload for submission:",Ie);try{const Ke=await Oe.post("/api/contracts/create",Ie);alert("Contract Created Successfully"),console.log(Ke.data),At(!1)}catch(Ke){console.error(Ke),alert("Failed to create contract")}},Ye=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-hashtag me-2"}),"Contract Number Generation"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>At(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Contract Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{xe("internal"),De()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>xe("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),Vt==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Contract Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom contract number (max 50 characters)",value:he,onChange:qe=>{qe.target.value.length<=50&&ve(qe.target.value)},onKeyPress:qe=>{qe.key==="Enter"&&he.trim()&&De()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[he.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:De,disabled:!he.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Create Contract"]})})]}),Vt==="internal"&&a.jsx("div",{className:"mt-4",children:a.jsx("div",{className:"alert alert-info",role:"alert",children:"Contract number will be auto-generated based on category and range count."})})]})]})})})]}),Nt=qe=>{console.log("Opening modal for item at index:",qe),J(qe),Q(!0)},Je=()=>{const[qe,ft]=N.useState([]),[Ie,Ke]=N.useState("materialId"),[Ge,lt]=N.useState(""),Mt=bt=>{const Xt=bt.target.value;lt(Xt);const Ft=o.filter(rr=>(Ie==="materialId"?rr.materialId:rr.description)?.toLowerCase().includes(Xt.toLowerCase()));ft(Ft)},Ae=()=>{ft(o),lt("")},ke=()=>{ft([]),lt("")},it=bt=>{if(console.log("selectedItemIndex when selecting:",U),U==null){console.error("No item selected for update");return}E(Xt=>{console.log("Previous items:",Xt);const Ft=[...Xt];return Ft[U]={...Ft[U],materialId:bt.materialId,description:bt.description,materialGroup:bt.materialgroup||"",baseUnit:bt.baseUnit,orderUnit:bt.orderUnit},console.log("Updated items:",Ft),Ft}),Q(!1)};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Materials"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>Q(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Ie,onChange:bt=>Ke(bt.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:Ie==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:Ge,onChange:Mt})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ae,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),qe.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ke,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:qe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:qe.map((bt,Xt)=>a.jsxs("tr",{children:[a.jsx("td",{children:bt.materialId}),a.jsx("td",{children:bt.description}),a.jsx("td",{children:bt.baseUnit}),a.jsx("td",{children:bt.orderUnit}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>it(bt),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Xt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":Ge?`No materials found matching "${Ge}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>Q(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Xe=()=>{const[qe,ft]=N.useState("indentId"),[Ie,Ke]=N.useState([]),[Ge,lt]=N.useState(""),Mt=it=>{const bt=it.target.value;lt(bt);const Xt=e.filter(Ft=>(qe==="indentId"?Ft?.value?.indentId:Ft?.value?.categoryName)?.toLowerCase().includes(bt.toLowerCase()));Ke(Xt)},Ae=()=>{Ke(e),lt("")},ke=()=>{Ke([]),lt("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Indents"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>V(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:qe,onChange:it=>ft(it.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Indent ID or Category",value:Ge,onChange:Mt})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ae,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ie.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ke,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ie.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Buyer Group"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ie.map((it,bt)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:it.value.indentId})}),a.jsx("td",{children:it.value.categoryName}),a.jsx("td",{children:it.value.buyerGroup}),a.jsx("td",{children:it.value.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{xt(it),V(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},bt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No indents found. Try different search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>V(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})},Be=()=>{const[qe,ft]=N.useState("name1"),[Ie,Ke]=N.useState([]),[Ge,lt]=N.useState(""),Mt=it=>{const bt=it.target.value;lt(bt);const Xt=s.filter(Ft=>(qe==="vnNo"?Ft.vnNo:Ft.label)?.toLowerCase().includes(bt.toLowerCase()));Ke(Xt)},Ae=()=>{Ke(s),lt("")},ke=()=>{Ke([]),lt("")};return a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>ee(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:qe,onChange:it=>ft(it.target.value),children:[a.jsx("option",{value:"name1",children:"Vendor Name"}),a.jsx("option",{value:"vnNo",children:"Vendor No"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Name or VN No",value:Ge,onChange:Mt})]}),a.jsxs("div",{className:"col-md-3 d-flex gap-2 mt-4",children:[a.jsxs("button",{className:"btn btn-info",onClick:Ae,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ie.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ke,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ie.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Vendor No"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ie.map((it,bt)=>a.jsxs("tr",{children:[a.jsx("td",{children:it.label}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:it.vnNo})}),a.jsx("td",{children:it.city||"-"}),a.jsx("td",{children:it.region||"-"}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>{g(it.value),y(it.label),S(it.vnNo||""),ee(!1)},children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},bt))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:'No vendors found. Try another search or click "View All".'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>ee(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto ",children:[a.jsx("h2",{className:"mb-1",children:"Purchase Contract"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Purchase Contract"})]})})]})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-clipboard-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Purchase Contract Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Select Indent"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:u?.value?.indentId||"",onChange:qe=>{const ft=qe.target.value;le(ft);const Ie=e.find(Ke=>Ke.indentId.toLowerCase()===ft.toLowerCase());h(Ie||null)},readOnly:!0}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{ue(X),V(!0)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Category"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select form-control-sm",value:m?.value||"",onChange:qe=>p(r.find(ft=>ft.value===qe.target.value)||null),children:[a.jsx("option",{value:"",children:"Select"}),r.map((qe,ft)=>a.jsx("option",{value:qe.value,children:qe.label},ft))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Vendor",value:b,onChange:qe=>{const ft=qe.target.value;y(ft);const Ie=s.find(Ke=>Ke.name.toLowerCase()===ft.toLowerCase());Ue(Ie||null)}}),a.jsx("button",{className:"btn btn-outline-info btn-sm",onClick:()=>{ee(!0),ye(b)},children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Reference"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter Contract Reference",value:c,onChange:qe=>d(qe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-lg-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select form-select-sm ",value:T,onChange:qe=>A(qe.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(Qe)&&Qe.map((qe,ft)=>a.jsx("option",{value:qe.name||qe._id||qe,children:qe.name||qe.locationName||qe},ft))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"text",className:"form-control",value:L,onChange:qe=>P(qe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity From"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:qe=>Z(qe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Till"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:z,onChange:qe=>K(qe.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Additional Notes"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:4,value:C,onChange:qe=>w(qe.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-body",children:[a.jsxs("form",{onSubmit:pe,children:[a.jsxs("div",{className:"border-bottom mb-3 pb-3",children:[a.jsx("h6",{className:"mb-3",children:"Items & Details"}),a.jsxs("div",{className:"table-responsive",children:[a.jsxs("table",{className:"table-bordered table-sm  mb-0",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Material Group"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:D.map((qe,ft)=>a.jsxs("tr",{children:[a.jsx("td",{children:ft+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:qe.materialId,readOnly:!0}),a.jsx("button",{type:"button",className:"btn btn-link btn-sm btn-outline-info",onClick:()=>Nt(ft),children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:qe.description,onChange:Ie=>Le(ft,"description",Ie.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:qe.qty,onChange:Ie=>Le(ft,"qty",Ie.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:qe.baseUnit,onChange:Ie=>Le(ft,"baseUnit",Ie.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:qe.orderUnit,onChange:Ie=>Le(ft,"orderUnit",Ie.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:qe.materialGroup,onChange:Ie=>Le(ft,"materialGroup",Ie.target.value)})}),a.jsx("td",{children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:qe.deliveryDate,onChange:Ie=>Le(ft,"deliveryDate",Ie.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:qe.price,onChange:Ie=>Le(ft,"price",Ie.target.value)})})]},ft))})]}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsxs("button",{type:"button",onClick:dt,className:"btn btn-link",children:[a.jsx("i",{className:"isax isax-add-circle5 text-primary me-1"}),"Add Item"]})})})]})]}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit"})})]}),B&&a.jsx(Je,{})]}),a.jsx("div",{className:"col-xl-2 ms-auto  bg-light p-3 rounded",children:a.jsxs("h6",{className:"mb-0",children:["Total Price: ",a.jsxs("span",{className:"text-primary",children:["₹",Y.toFixed(2)]})]})})]})})})]})]}),M&&a.jsx(Xe,{}),H&&a.jsx(Be,{}),Tt&&a.jsx(Ye,{})]})]})})}function FDe(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState(""),[u,h]=N.useState([]),[m,p]=N.useState(null),[v,g]=N.useState(null),[b,y]=N.useState(null),[C,w]=N.useState(""),[k,S]=N.useState(""),[D,E]=N.useState(""),[T,A]=N.useState([]),[L,P]=N.useState(""),[O,Z]=N.useState(""),[z,K]=N.useState(""),[B,Q]=N.useState(!1),[U,J]=N.useState(!1),[Y,oe]=N.useState(!1),[M,V]=N.useState(null),[H,ee]=N.useState(""),[re,ae]=N.useState([]),ne=localStorage.getItem("selectedCompanyId"),ie=localStorage.getItem("financialYear"),G=localStorage.getItem("selectedCompanyId");N.useEffect(()=>{Oe.get("/api/salerequest/get",{params:{companyId:ne,financialYear:ie}}).then(pe=>{const De=pe.data.filter(Ye=>!Ye.isBlocked&&!Ye.isDeleted);t(De)}).catch(console.error),Oe.get("/api/sale-contract-categories",{params:{companyId:ne,financialYear:ie}}).then(pe=>n(pe.data)).catch(console.error),Oe.get("/api/locations",{params:{companyId:ne,financialYear:ie}}).then(pe=>{console.log("Locations API response:",pe.data),Array.isArray(pe.data)?ae(pe.data):pe.data&&Array.isArray(pe.data.locations)?ae(pe.data.locations):ae([])}).catch(pe=>{console.error("Failed to fetch locations:",pe),ae([])}),Oe.get("/api/customers").then(pe=>{const De=pe.data.filter(Ye=>!Ye.isBlocked&&!Ye.isDeleted);i(De)}).catch(console.error),Oe.get("/api/material").then(pe=>l(pe.data)).catch(console.error),de()},[]);const de=()=>{Oe.get("/api/salescontracts",{params:{companyId:ne,financialYear:ie}}).then(pe=>h(pe.data)).catch(console.error)},X=pe=>{p({label:pe.indentId,value:pe._id}),d(pe.salesGroup||""),ee(pe.location),A(pe.items.map(De=>({...De,customerName:b?.name1||"",price:"",unit:""}))),oe(!1)},le=pe=>{y({label:`${pe.name1} ${pe.name2}`,value:pe._id}),A(De=>De.map(Ye=>({...Ye,customerName:pe.name1}))),J(!1)},Se=pe=>{const De=[...T];De[M]={...De[M],materialId:pe.materialId,description:pe.description,baseUnit:pe.baseUnit,unit:pe.unit,price:pe.price},A(De),Q(!1)},ue=(pe,De,Ye)=>{const Nt=[...T];Nt[pe][De]=Ye,A(Nt)},se=()=>{A(pe=>[...pe,{customerName:b?.label||"",materialId:"",description:"",qty:"",baseUnit:"",orderUnit:"",location:"",unit:"",price:""}])},[ye,Ne]=N.useState(!1),[Ue,Qe]=N.useState("internal"),[ot,xt]=N.useState(""),Le=pe=>{if(pe.preventDefault(),k&&D&&k>D){alert("Validity From date cannot be later than Validity To date");return}Ne(!0)},dt=()=>{const pe={indentId:m?.label,categoryId:v?.value,customerId:b?.value,note:C,companyId:G,financialYear:ie,validityFromDate:k,validityToDate:D,salesGroup:c,location:H,items:T,contractNumberType:Ue,externalContractNumber:Ue==="external"?ot:null};Oe.post("/api/salescontracts",pe).then(()=>{alert("Contract saved successfully!"),de(),At(),Ne(!1),Qe("internal"),xt("")}).catch(De=>{console.error(De),alert("Error saving contract")})},Tt=()=>a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-md",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h4",{className:"modal-title",children:"Contract Number Generation"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>Ne(!1),"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{className:"mb-4",children:"Choose how you want to create the Contract Number:"}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-primary btn-md",onClick:()=>{Qe("internal"),dt()},children:[a.jsx("i",{className:"ti ti-user me-2"}),"Internal (Auto-generate)"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("button",{className:"btn btn-secondary btn-md",onClick:()=>Qe("external"),children:[a.jsx("i",{className:"ti ti-edit me-2"}),"External (Manual Entry)"]})})]}),Ue==="external"&&a.jsxs("div",{className:"mt-4",children:[a.jsx("label",{className:"form-label",children:"Enter Contract Number"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Enter custom contract number (max 50 characters)",value:ot,onChange:pe=>{pe.target.value.length<=50&&xt(pe.target.value)},onKeyPress:pe=>{pe.key==="Enter"&&ot.trim()&&dt()},maxLength:50,autoFocus:!0}),a.jsxs("div",{className:"form-text",children:[ot.length,"/50 characters"]}),a.jsx("div",{className:"mt-3",children:a.jsxs("button",{className:"btn btn-primary",onClick:dt,disabled:!ot.trim(),children:[a.jsx("i",{className:"fas fa-save me-1"}),"Save Contract"]})})]})]})]})})})]}),At=()=>{p(null),g(null),y(null),w(""),S(""),E(""),A([])},Vt=({children:pe,onClose:De})=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsx("h5",{className:"modal-title",children:"Select"}),a.jsx("button",{type:"button",className:"btn-close",onClick:De})]}),a.jsx("div",{className:"modal-body",children:pe})]})})}),xe=()=>{const[pe,De]=N.useState([]),[Ye,Nt]=N.useState("materialId"),Je=qe=>{const ft=qe.target.value;P(ft);const Ie=o.filter(Ke=>(Ye==="materialId"?Ke.materialId:Ke.description)?.toLowerCase().includes(ft.toLowerCase()));De(Ie)},Xe=()=>{De(o),P("")},Be=()=>{De([]),P("")};return a.jsxs(Vt,{onClose:()=>Q(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Ye,onChange:qe=>Nt(qe.target.value),children:[a.jsx("option",{value:"materialId",children:"Material ID"}),a.jsx("option",{value:"description",children:"Description"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:Ye==="materialId"?"Enter Material ID (e.g., MMNR-100001)":"Search by Description...",value:L,onChange:Je})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Xe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),pe.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Be,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:pe.map((qe,ft)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:qe.materialId})}),a.jsx("td",{children:qe.description}),a.jsx("td",{children:qe.baseUnit}),a.jsx("td",{children:qe.unit}),a.jsx("td",{children:qe.price}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>Se(qe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ft))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:o.length===0?"No materials loaded from API":L?`No materials found matching "${L}"`:'Enter search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>Q(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},he=()=>{const[pe,De]=N.useState("name1"),[Ye,Nt]=N.useState([]),Je=qe=>{const ft=qe.target.value;Z(ft),Nt(filtered)},Xe=()=>{Nt(s),Z("")},Be=()=>{Nt([]),Z("")};return a.jsxs(Vt,{onClose:()=>J(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:pe,onChange:qe=>De(qe.target.value),children:[a.jsx("option",{value:"name1",children:"Name"}),a.jsx("option",{value:"city",children:"City"}),a.jsx("option",{value:"region",children:"Region"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Type to search...",value:O,onChange:Je})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:Xe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),Ye.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:Be,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:Ye.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"City"}),a.jsx("th",{children:"Region"}),a.jsx("th",{children:"Contact"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:Ye.map((qe,ft)=>a.jsxs("tr",{children:[a.jsxs("td",{children:[qe.name1," ",qe.name2]}),a.jsx("td",{children:qe.city}),a.jsx("td",{children:qe.region}),a.jsx("td",{children:qe.contactNo}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>le(qe),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},ft))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:s.length===0?"No customers loaded":O?`No match found for "${O}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>J(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})},ve=()=>{const[pe,De]=N.useState([]),[Ye,Nt]=N.useState("indentId"),[Je,Xe]=N.useState(""),Be=Ie=>{const Ke=Ie.target.value;Xe(Ke);const Ge=e.filter(lt=>(Ye==="indentId"?lt.indentId:Ye==="categoryName"?lt.categoryName:lt.location)?.toLowerCase().includes(Ke.toLowerCase()));De(Ge)},qe=()=>{De(e),Xe("")},ft=()=>{De([]),Xe("")};return a.jsxs(Vt,{onClose:()=>oe(!1),children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search Type"}),a.jsxs("select",{className:"form-select",value:Ye,onChange:Ie=>Nt(Ie.target.value),children:[a.jsx("option",{value:"indentId",children:"Indent ID"}),a.jsx("option",{value:"categoryName",children:"Category"}),a.jsx("option",{value:"location",children:"Location"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Query"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search...",value:Je,onChange:Be})]})]}),a.jsxs("div",{className:"col-md-3 d-flex align-items-end gap-2",children:[a.jsxs("button",{className:"btn btn-info",onClick:qe,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]}),pe.length>0&&a.jsxs("button",{className:"btn btn-outline-secondary",onClick:ft,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:pe.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:pe.map((Ie,Ke)=>a.jsxs("tr",{children:[a.jsx("td",{children:Ie.indentId}),a.jsx("td",{children:Ie.categoryName}),a.jsx("td",{children:Ie.location}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>X(Ie),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},Ke))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No sales requests found":Je?`No match for "${Je}"`:'Enter a search term or click "View All"'})]})}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{className:"btn btn-secondary",onClick:()=>oe(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Contract"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Sales Contract"})]})})]})}),a.jsxs("div",{className:"accordion todo-accordion",id:"accordionExample",children:[a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingTwo",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseTwo","aria-controls":"collapseTwo","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-file-contract me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Contract Header"})]})]})})})})}),a.jsx("div",{id:"collapseTwo",className:"accordion-collapse collapse show","aria-labelledby":"headingTwo","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Request:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Indent",value:m?.label||"",onChange:pe=>{const De=pe.target.value;p({label:De,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>oe(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Customer:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Customer",value:b?.label||"",onChange:pe=>{const De=pe.target.value;y({label:De,value:null})}}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",type:"button",onClick:()=>J(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Location"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("select",{className:"form-select",value:H,onChange:pe=>ee(pe.target.value),children:[a.jsx("option",{value:"",children:"Select Location"}),Array.isArray(re)&&re.map((pe,De)=>a.jsx("option",{value:pe.name,children:pe.name},De))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-7",children:a.jsx("label",{className:"form-label",children:"Contract Category:"})}),a.jsx("div",{className:"col-xl-5",children:a.jsxs("select",{className:"form-select",value:v?.value||"",onChange:pe=>{const De=pe.target.value,Ye=r.find(Nt=>Nt._id===De);g(Ye?{label:Ye.categoryName,value:Ye._id}:null)},children:[a.jsx("option",{value:"",children:"Select"}),r.map(pe=>a.jsxs("option",{value:pe._id,children:[pe.categoryName," (",pe.prefix,")"]},pe._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Validity From Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:k,onChange:pe=>S(pe.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Validity To Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:D,onChange:pe=>E(pe.target.value),min:k})})]}),a.jsxs("div",{className:"col-xl-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Sales Group:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",value:c,onChange:pe=>d(pe.target.value),placeholder:"Enter or edit Sales Group"})})]}),a.jsxs("div",{className:"col-xl-4 row",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{className:"form-label",children:"Notes"})}),a.jsx("div",{className:"col-xl-10",children:a.jsx("textarea",{className:"form-control form-control-sm",rows:"3",value:C,onChange:pe=>w(pe.target.value)})})]})]})})})})})]}),a.jsxs("div",{className:"accordion-item mb-3",children:[a.jsx("div",{className:"row align-items-center mb-3 row-gap-3",children:a.jsx("div",{className:"col-lg-4 col-sm-6",children:a.jsx("div",{className:"accordion-header",id:"headingThree",children:a.jsx("div",{className:"accordion-button collapsed","data-bs-toggle":"collapse","data-bs-target":"#collapseThree","aria-controls":"collapseThree","aria-expanded":"false",children:a.jsxs("div",{className:"d-flex align-items-center w-100",children:[a.jsx("div",{className:"me-2",children:a.jsx("a",{href:"javascript:void(0);",children:a.jsx("span",{children:a.jsx("i",{className:"fas fa-chevron-down"})})})}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{children:a.jsx("i",{className:"fas fa-list me-2"})}),a.jsx("h5",{className:"fw-semibold",children:"Item List"})]})]})})})})}),a.jsx("div",{id:"collapseThree",className:"accordion-collapse collapse","aria-labelledby":"headingThree","data-bs-parent":"#accordionExample",children:a.jsx("div",{className:"accordion-body",children:a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("form",{onSubmit:Le,children:[a.jsx("div",{className:"table-responsive mb-3",children:a.jsxs("table",{className:"table-sm table-bordered mb-0",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Qty"}),a.jsx("th",{children:"Base Unit"}),a.jsx("th",{children:"Order Unit"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Unit"}),a.jsx("th",{children:"Price"})]})}),a.jsx("tbody",{children:T.map((pe,De)=>a.jsxs("tr",{children:[a.jsx("td",{children:De+1}),a.jsx("td",{children:a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{className:"form-control form-control-sm",placeholder:"Type or search Material",value:pe.materialId,onChange:Ye=>ue(De,"materialId",Ye.target.value)}),a.jsx("button",{className:"btn btn-outline-info",type:"button",title:"Search Material",onClick:()=>{V(De),Q(!0)},children:a.jsx("i",{className:"fas fa-search"})})]})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:pe.description,onChange:Ye=>ue(De,"description",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",type:"number",value:pe.qty,onChange:Ye=>ue(De,"qty",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:pe.baseUnit,onChange:Ye=>ue(De,"baseUnit",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:pe.orderUnit,onChange:Ye=>ue(De,"orderUnit",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:pe.location,onChange:Ye=>ue(De,"location",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:pe.customerName,onChange:Ye=>ue(De,"customerName",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:pe.unit,onChange:Ye=>ue(De,"unit",Ye.target.value)})}),a.jsx("td",{children:a.jsx("input",{className:"form-control form-control-sm",value:pe.price,onChange:Ye=>ue(De,"price",Ye.target.value)})})]},De))})]})}),a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"mb-3",children:a.jsx("button",{type:"button",className:"btn btn-link",onClick:se,children:"+ Add Contract Item"})})}),a.jsx("div",{className:"d-flex align-items-center justify-content-between",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:"Submit Contract"})})]})})})})})]}),B&&a.jsx(xe,{}),U&&a.jsx(he,{}),Y&&a.jsx(ve,{}),ye&&a.jsx(Tt,{})]})]})})}function LDe(){const[e,t]=N.useState([]),[r,n]=N.useState(""),[s,i]=N.useState(1),o=5,l=localStorage.getItem("selectedCompanyId"),c=localStorage.getItem("financialYear");N.useEffect(()=>{Oe.get("/api/salescontracts",{params:{companyId:l,financialYear:c}}).then(k=>{const S=k.data.sort((D,E)=>new Date(E.createdAt)-new Date(D.createdAt));t(S)}).catch(k=>{console.error("Failed to fetch contracts",k),alert("Error loading contracts")})},[]);const d=k=>{const S=window.open("","_blank"),D=`
      <html>
        <head>
          <title>Print Contract</title>
          <style>
            body { font-family: Arial; padding: 20px; }
            h2 { margin-bottom: 5px; }
            table { width: 100%; border-collapse: collapse; margin-top: 20px; }
            th, td { border: 1px solid #000; padding: 6px; text-align: left; }
            .contract-header { margin-bottom: 20px; }
            .validity-dates { display: flex; gap: 20px; margin: 10px 0; }
          </style>
        </head>
        <body>
          <div class="contract-header">
            <h2>Sales Contract: ${k.contractNumber}</h2>
            <p><strong>Indent ID:</strong> ${k.indentId}</p>
            <p><strong>Customer Name:</strong> ${k.customerName}</p>
            <div class="validity-dates">
              <p><strong>Validity From:</strong> ${k.validityFromDate||"N/A"}</p>
              <p><strong>Validity To:</strong> ${k.validityToDate||"N/A"}</p>
            </div>
            <p><strong>Location:</strong> ${k.location||"N/A"}</p>
            <p><strong>Sales Group:</strong> ${k.salesGroup||"N/A"}</p>
            <p><strong>Note:</strong> ${k.note||"N/A"}</p>
          </div>
          <table>
            <thead>
              <tr>
                <th>#</th>
                <th>Material ID</th>
                <th>Description</th>
                <th>Qty</th>
                <th>Base Unit</th>
                <th>Order Unit</th>
                <th>Location</th>
                <th>Unit</th>
                <th>Price</th>
                <th>Total</th>
              </tr>
            </thead>
            <tbody>
              ${k.items.map((E,T)=>{const A=E.qty*parseFloat(E.price||0);return`
                    <tr>
                      <td>${T+1}</td>
                      <td>${E.materialId||"N/A"}</td>
                      <td>${E.description||"N/A"}</td>
                      <td>${E.qty||0}</td>
                      <td>${E.baseUnit||"N/A"}</td>
                      <td>${E.orderUnit||"N/A"}</td>
                      <td>${E.location||"N/A"}</td>
                      <td>${E.unit||"N/A"}</td>
                      <td>${E.price||0}</td>
                      <td>${A.toFixed(2)}</td>
                    </tr>
                  `}).join("")}
              <tr>
                <td colspan="9" style="text-align:right;"><strong>Grand Total</strong></td>
                <td><strong>${k.items.reduce((E,T)=>E+T.qty*parseFloat(T.price||0),0).toFixed(2)}</strong></td>
              </tr>
            </tbody>
          </table>
        </body>
      </html>
    `;S.document.write(D),S.document.close(),S.print()},[u,h]=N.useState(""),[m,p]=N.useState(""),v=e.filter(k=>{const S=k.contractNumber?.toLowerCase().includes(r.toLowerCase())||k.indentId?.toLowerCase().includes(r.toLowerCase())||k.customerName?.toLowerCase().includes(r.toLowerCase())||k.location?.toLowerCase().includes(r.toLowerCase()),D=new Date(k.createdAt),E=u?new Date(u):null,T=m?new Date(m):null,A=(!E||D>=E)&&(!T||D<=T);return S&&A}),g=s*o,b=g-o,y=v.slice(b,g),C=Math.ceil(v.length/o),w=k=>i(k);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Contracts"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contract List"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6"}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by Contract No, Indent ID, Customer Name, or Location",value:r,onChange:k=>{n(k.target.value),i(1)}})]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"From Date"}),a.jsx("input",{type:"date",className:"form-control",value:u,onChange:k=>{h(k.target.value),i(1)}})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"To Date"}),a.jsx("input",{type:"date",className:"form-control",value:m,min:u,onChange:k=>{p(k.target.value),i(1)}})]})]})}),a.jsx("div",{className:"card-body",children:y.length===0?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-file-contract fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:e.length===0?"No contracts found. Create your first contract!":"No contracts match your search criteria."})]}):a.jsx(a.Fragment,{children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Contract No"}),a.jsx("th",{children:"Indent ID"}),a.jsx("th",{children:"Customer Name"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Validity From"}),a.jsx("th",{children:"Validity To"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:y.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:k.contractNumber}),a.jsx("td",{children:k.indentId}),a.jsx("td",{children:k.customerName}),a.jsx("td",{children:k.location||"N/A"}),a.jsx("td",{children:k.validityFromDate?new Date(k.validityFromDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:k.validityToDate?new Date(k.validityToDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:k.createdAt?new Date(k.createdAt).toLocaleDateString():"N/A"}),a.jsx("td",{children:a.jsx("div",{className:"d-flex gap-1",children:a.jsxs("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>d(k),title:"Print Contract",children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print"]})})})]},S))})]})})})})]}),C>=1&&a.jsx("nav",{className:"mt-1",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{onClick:()=>s>1&&w(s-1),className:"page-link",disabled:s===1,children:a.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const S=[],D=[];S.push(1);for(let A=Math.max(2,s-2);A<=Math.min(C-1,s+2);A++)S.push(A);C>1&&S.push(C);const E=[...new Set(S)].sort((A,L)=>A-L);let T;for(let A of E)T&&(A-T===2?D.push(T+1):A-T!==1&&D.push("...")),D.push(A),T=A;return D.map((A,L)=>A==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${L}`):a.jsx("li",{className:`page-item ${s===A?"active":""}`,children:a.jsx("button",{onClick:()=>w(A),className:"page-link",children:A})},A))})(),a.jsx("li",{className:`page-item ${s===C?"disabled":""}`,children:a.jsx("button",{onClick:()=>s<C&&w(s+1),className:"page-link",disabled:s===C,children:a.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})}function BDe(){const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState({recordType:"",status:"",paymentMethod:"",entityName:"",startDate:"",endDate:"",page:1,limit:10}),[o,l]=N.useState({currentPage:1,totalPages:1,totalCount:0,hasNext:!1,hasPrev:!1}),[c,d]=N.useState({byType:[],byMethod:[]}),[u,h]=N.useState(null),[m,p]=N.useState(!1),[v,g]=N.useState(!1),[b,y]=N.useState(null),[C,w]=N.useState({type:"",text:""}),k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=localStorage.getItem("selectedCompanyId");N.useEffect(()=>{E(),T()},[s.page]),N.useEffect(()=>{const M=setTimeout(()=>{i(V=>({...V,page:1})),E()},500);return()=>clearTimeout(M)},[s.recordType,s.status,s.paymentMethod,s.entityName,s.startDate,s.endDate,s.limit]);const E=async()=>{n(!0);try{const M=new URLSearchParams;Object.entries(s).forEach(([H,ee])=>{ee&&M.append(H,ee)}),console.log("Fetching payments with filters:",k,S);const V=await Oe.get(`/api/payment?${M}`,{params:{companyId:k,financialYear:S}});t(V.data.payments||[]),l(V.data.pagination||{})}catch(M){console.error("Error fetching payments:",M)}finally{n(!1)}},T=async()=>{try{console.log("Fetching summary for:",{companyId:k,financialYear:S});const M=await Oe.get("/api/payment-summary",{params:{companyId:k,financialYear:S}});console.log("Summary response:",M.data),d({byType:M.data.byType||[],byMethod:M.data.byMethod||[],today:M.data.today||{totalAmount:0,count:0}})}catch(M){console.error("Error fetching summary:",M),w({type:"error",text:"Failed to fetch payment summary."})}},A=M=>{const{name:V,value:H}=M.target;i(ee=>({...ee,[V]:H}))},L=()=>{i({recordType:"",status:"",paymentMethod:"",entityName:"",startDate:"",endDate:"",page:1,limit:10})},P=M=>{i(V=>({...V,page:M}))},O=M=>{h(M),p(!0)},Z=M=>{y({...M,paymentDate:new Date(M.paymentDate).toISOString().split("T")[0]}),g(!0)},z=M=>{const{name:V,value:H}=M.target;y(ee=>({...ee,[V]:H}))},K=async M=>{M.preventDefault();try{const V={paymentAmount:parseFloat(b.paymentAmount),paymentMethod:b.paymentMethod,status:b.status,description:b.description,companyId:D,financialYear:S,paymentDate:b.paymentDate,paymentDetails:b.paymentDetails||{}};await Oe.put(`/api/payment/${b._id}`,V),w({type:"success",text:"Payment updated successfully!"}),g(!1),E(),setTimeout(()=>{w({type:"",text:""})},3e3)}catch(V){console.error("Error updating payment:",V),w({type:"error",text:"Failed to update payment. Please try again."})}},B=M=>{const V=window.open("","_blank"),H=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Payment Receipt - ${M.paymentDocNumber}</title>
        <style>
          body { 
            font-family: Arial, sans-serif; 
            margin: 20px; 
            color: #333;
          }
          .header { 
            text-align: center; 
            border-bottom: 2px solid #333; 
            padding-bottom: 20px;
            margin-bottom: 30px;
          }
          .company-name { 
            font-size: 24px; 
            font-weight: bold; 
            margin-bottom: 5px;
          }
          .receipt-title { 
            font-size: 18px; 
            color: #666;
          }
          .details { 
            margin: 20px 0; 
          }
          .detail-row { 
            display: flex; 
            justify-content: space-between; 
            margin: 10px 0;
            padding: 8px 0;
            border-bottom: 1px dotted #ccc;
          }
          .detail-label { 
            font-weight: bold; 
            width: 40%;
          }
          .detail-value { 
            width: 60%;
            text-align: right;
          }
          .amount { 
            font-size: 20px; 
            font-weight: bold; 
            color: #28a745;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            text-align: center;
            margin: 20px 0;
          }
          .footer { 
            margin-top: 40px; 
            text-align: center; 
            font-size: 12px; 
            color: #666;
            border-top: 1px solid #ccc;
            padding-top: 20px;
          }
          .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
          }
          .status-cleared { background: #d4edda; color: #155724; }
          .status-pending { background: #fff3cd; color: #856404; }
          .status-bounced { background: #f8d7da; color: #721c24; }
          .status-cancelled { background: #e2e3e5; color: #383d41; }
          @media print {
            body { margin: 0; }
            .no-print { display: none; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <div class="company-name">Your Company Name</div>
          <div class="receipt-title">PAYMENT RECEIPT</div>
        </div>
        
        <div class="details">
          <div class="detail-row">
            <span class="detail-label">Receipt Number:</span>
            <span class="detail-value">${M.paymentDocNumber}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Date & Time:</span>
            <span class="detail-value">${Q(M.paymentDate)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Payment Type:</span>
            <span class="detail-value">${M.recordType.toUpperCase()}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">${M.recordType==="vendor"?"Vendor":"Customer"} Name:</span>
            <span class="detail-value">${M.entityName}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Original Document:</span>
            <span class="detail-value">${M.docnumber}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Payment Method:</span>
            <span class="detail-value">${M.paymentMethod.replace("_"," ").toUpperCase()}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Status:</span>
            <span class="detail-value">
              <span class="status-badge status-${M.status}">${M.status.toUpperCase()}</span>
            </span>
          </div>
        </div>

        <div class="amount">
          AMOUNT PAID: ${U(M.paymentAmount)}
        </div>

        <div class="details">
          <div class="detail-row">
            <span class="detail-label">Previous Balance:</span>
            <span class="detail-value">${U(M.previousBalance)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">New Balance:</span>
            <span class="detail-value">${U(M.newBalance)}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Balance Reduction:</span>
            <span class="detail-value">${U(M.previousBalance-M.newBalance)}</span>
          </div>
        </div>

        ${M.description?`
          <div class="details">
            <div class="detail-row">
              <span class="detail-label">Description:</span>
              <span class="detail-value">${M.description}</span>
            </div>
          </div>
        `:""}

        ${M.paymentDetails?`
          <div class="details">
            <h4>Payment Details:</h4>
            ${M.paymentMethod==="cheque"&&M.paymentDetails.chequeNumber?`
              <div class="detail-row">
                <span class="detail-label">Cheque Number:</span>
                <span class="detail-value">${M.paymentDetails.chequeNumber}</span>
              </div>
            `:""}
            ${M.paymentMethod==="bank_transfer"&&M.paymentDetails.transactionId?`
              <div class="detail-row">
                <span class="detail-label">Transaction ID:</span>
                <span class="detail-value">${M.paymentDetails.transactionId}</span>
              </div>
            `:""}
          </div>
        `:""}

        <div class="footer">
          <p>Thank you for your payment!</p>
          <p>This is a computer-generated receipt. No signature required.</p>
          <p>Generated on: ${new Date().toLocaleString()}</p>
        </div>

        <div class="no-print" style="text-align: center; margin-top: 30px;">
          <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Print Receipt</button>
          <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Close</button>
        </div>
      </body>
      </html>
    `;V.document.write(H),V.document.close(),V.focus()},Q=M=>new Date(M).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}),U=M=>`₹${parseFloat(M).toFixed(2)}`,J=M=>`badge bg-${{pending:"warning",cleared:"success",bounced:"danger",cancelled:"secondary"}[M]||"secondary"}`,Y=M=>({cash:"ti ti-cash",cheque:"ti ti-file-text",bank_transfer:"ti ti-building-bank",upi:"ti ti-qrcode",card:"ti ti-credit-card",other:"ti ti-dots"})[M]||"ti-payment",oe=()=>{if(e.length===0){alert("No data to export");return}const M=e.map(ae=>({"Payment Doc":ae.paymentDocNumber,Date:Q(ae.paymentDate),Type:ae.recordType,Entity:ae.entityName,"Doc Number":ae.docnumber,Amount:ae.paymentAmount,Method:ae.paymentMethod,Status:ae.status,"Previous Balance":ae.previousBalance,"New Balance":ae.newBalance})),V=[Object.keys(M[0]).join(","),...M.map(ae=>Object.values(ae).join(","))].join(`
`),H=new Blob([V],{type:"text/csv"}),ee=window.URL.createObjectURL(H),re=document.createElement("a");re.href=ee,re.download=`payments_${new Date().toISOString().split("T")[0]}.csv`,re.click(),window.URL.revokeObjectURL(ee)};return console.log("Payment summary state:",c),a.jsxs("div",{className:"content",children:[C.text&&a.jsxs("div",{className:`alert alert-${C.type==="success"?"success":"danger"} alert-dismissible fade show`,children:[C.text,a.jsx("button",{type:"button",className:"btn-close",onClick:()=>w({type:"",text:""})})]}),a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Payment Records"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/ledger",children:"Ledger"})}),a.jsx("li",{className:"breadcrumb-item",children:"Payments"})]})})]}),a.jsxs("div",{className:"",children:[a.jsxs("a",{href:"/payments",className:"btn btn-primary me-2",children:[a.jsx("i",{className:"ti ti-plus"})," Record Payment"]}),a.jsxs("button",{onClick:oe,className:"btn btn-outline-secondary",children:[a.jsx("i",{className:"ti ti-download"})," Export"]})]})]}),a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-primary-light rounded",children:a.jsx("i",{className:"ti ti-receipt text-primary"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Total Payments"}),a.jsx("h4",{className:"mb-0",children:o.totalCount})]})]})})})}),a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-success-light rounded",children:a.jsx("i",{className:"ti ti-building-store text-success"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Vendor Payments"}),a.jsx("h4",{className:"mb-0",children:U(c.byType.find(M=>M._id==="vendor")?.totalAmount||0)})]})]})})})}),a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-info-light rounded",children:a.jsx("i",{className:"ti ti-users text-info"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Customer Payments"}),a.jsx("h4",{className:"mb-0",children:U(c.byType.find(M=>M._id==="customer")?.totalAmount||0)})]})]})})})}),a.jsx("div",{className:"col-md-3 col-sm-6 mb-3",children:a.jsx("div",{className:"card border-0 shadow-sm",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("div",{className:"avatar avatar-md bg-warning-light rounded",children:a.jsx("i",{className:"ti ti-cash text-warning"})})}),a.jsxs("div",{className:"flex-grow-1 ms-3",children:[a.jsx("p",{className:"text-muted mb-1",children:"Today's Total"}),a.jsx("h4",{className:"mb-0",children:U(e.filter(M=>new Date(M.paymentDate).toDateString()===new Date().toDateString()).reduce((M,V)=>M+V.paymentAmount,0))})]})]})})})})]}),a.jsxs("div",{className:"card mb-4",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Filters"})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Type"}),a.jsxs("select",{className:"form-select",name:"recordType",value:s.recordType,onChange:A,children:[a.jsx("option",{value:"",children:"All Types"}),a.jsx("option",{value:"vendor",children:"Vendor"}),a.jsx("option",{value:"customer",children:"Customer"})]})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{className:"form-select",name:"status",value:s.status,onChange:A,children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"cleared",children:"Cleared"}),a.jsx("option",{value:"bounced",children:"Bounced"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Method"}),a.jsxs("select",{className:"form-select",name:"paymentMethod",value:s.paymentMethod,onChange:A,children:[a.jsx("option",{value:"",children:"All Methods"}),a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"cheque",children:"Cheque"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),a.jsx("option",{value:"upi",children:"UPI"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"Entity Name"}),a.jsx("input",{type:"text",className:"form-control",name:"entityName",placeholder:"Search entity...",value:s.entityName,onChange:A})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"From Date"}),a.jsx("input",{type:"date",className:"form-control",name:"startDate",value:s.startDate,onChange:A})]}),a.jsxs("div",{className:"col-md-2 mb-3",children:[a.jsx("label",{className:"form-label",children:"To Date"}),a.jsx("input",{type:"date",className:"form-control",name:"endDate",value:s.endDate,onChange:A})]})]}),a.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[a.jsxs("button",{className:"btn btn-outline-secondary",onClick:L,children:[a.jsx("i",{className:"ti ti-refresh"})," Clear Filters"]}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("label",{className:"form-label me-2 mb-0",children:"Show:"}),a.jsxs("select",{className:"form-select",name:"limit",value:s.limit,onChange:A,style:{width:"auto"},children:[a.jsx("option",{value:"10",children:"10"}),a.jsx("option",{value:"25",children:"25"}),a.jsx("option",{value:"50",children:"50"}),a.jsx("option",{value:"100",children:"100"})]})]})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Payment Records"})}),a.jsx("div",{className:"card-body",children:r?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):e.length===0?a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"ti ti-receipt-off text-muted",style:{fontSize:"3rem"}}),a.jsx("h5",{className:"text-muted mt-2",children:"No payments found"}),a.jsx("p",{className:"text-muted",children:"Try adjusting your filters or record a new payment."}),a.jsxs("a",{href:"/payments",className:"btn btn-primary",children:[a.jsx("i",{className:"ti ti-plus"})," Record Payment"]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Payment Doc"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Entity"}),a.jsx("th",{children:"Original Doc"}),a.jsx("th",{children:"Amount"}),a.jsx("th",{children:"Method"}),a.jsx("th",{children:"Balance Change"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map((M,V)=>a.jsxs("tr",{children:[a.jsx("td",{children:(o.currentPage-1)*s.limit+V+1}),a.jsx("td",{children:a.jsx("strong",{className:"text-primary",children:M.paymentDocNumber})}),a.jsx("td",{children:a.jsx("small",{children:Q(M.paymentDate)})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${M.recordType==="vendor"?"success":"info"}`,children:M.recordType})}),a.jsx("td",{children:a.jsx("div",{children:a.jsx("strong",{children:M.entityName})})}),a.jsx("td",{children:a.jsx("span",{className:"text-muted",children:M.docnumber})}),a.jsx("td",{children:a.jsx("strong",{className:"text-success",children:U(M.paymentAmount)})}),a.jsx("td",{children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:`${Y(M.paymentMethod)} me-2`}),a.jsx("span",{className:"text-capitalize",children:M.paymentMethod.replace("_"," ")})]})}),a.jsx("td",{children:a.jsxs("div",{className:"text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"From:"})," ",U(M.previousBalance)]}),a.jsxs("div",{children:[a.jsx("span",{className:"text-muted",children:"To:"})," ",U(M.newBalance)]})]})}),a.jsx("td",{children:a.jsx("span",{className:J(M.status),children:M.status})}),a.jsx("td",{children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-sm btn-outline-secondary dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:"Actions"}),a.jsxs("ul",{className:"dropdown-menu",children:[a.jsx("li",{children:a.jsxs("button",{className:"dropdown-item",onClick:()=>O(M),children:[a.jsx("i",{className:"ti ti-eye me-2"}),"View Details"]})}),a.jsx("li",{children:a.jsxs("button",{className:"dropdown-item",onClick:()=>B(M),children:[a.jsx("i",{className:"ti ti-printer me-2"}),"Print Receipt"]})}),a.jsx("li",{children:a.jsx("hr",{className:"dropdown-divider"})}),a.jsx("li",{children:a.jsxs("button",{className:"dropdown-item text-primary",onClick:()=>Z(M),disabled:M.status==="cancelled",children:[a.jsx("i",{className:"ti ti-edit me-2"}),"Edit"]})})]})]})})]},M._id))})]})}),o.totalPages>1&&a.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[a.jsxs("div",{className:"text-muted",children:["Showing ",(o.currentPage-1)*s.limit+1," to"," ",Math.min(o.currentPage*s.limit,o.totalCount)," of"," ",o.totalCount," entries"]}),a.jsx("nav",{children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${o.hasPrev?"":"disabled"}`,children:a.jsx("button",{className:"page-link",onClick:()=>P(o.currentPage-1),disabled:!o.hasPrev,children:a.jsx("i",{className:"ti ti-chevron-left"})})}),[...Array(Math.min(5,o.totalPages))].map((M,V)=>{const H=Math.max(1,o.currentPage-2)+V;return H<=o.totalPages?a.jsx("li",{className:`page-item ${H===o.currentPage?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>P(H),children:H})},H):null}),a.jsx("li",{className:`page-item ${o.hasNext?"":"disabled"}`,children:a.jsx("button",{className:"page-link",onClick:()=>P(o.currentPage+1),disabled:!o.hasNext,children:a.jsx("i",{className:"ti ti-chevron-right"})})})]})})]})]})})]}),m&&u&&a.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Payment Details"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>p(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("h6",{className:"text-muted mb-3",children:"Payment Information"}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Payment Document:"}),a.jsx("div",{children:u.paymentDocNumber})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Date & Time:"}),a.jsx("div",{children:Q(u.paymentDate)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Amount:"}),a.jsx("div",{className:"text-success",children:U(u.paymentAmount)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Payment Method:"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:`${Y(u.paymentMethod)} me-2`}),a.jsx("span",{className:"text-capitalize",children:u.paymentMethod.replace("_"," ")})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Status:"}),a.jsx("div",{children:a.jsx("span",{className:J(u.status),children:u.status})})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("h6",{className:"text-muted mb-3",children:"Entity & Transaction Details"}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Entity Type:"}),a.jsx("div",{className:"text-capitalize",children:u.recordType})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Entity Name:"}),a.jsx("div",{children:u.entityName})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Original Document:"}),a.jsx("div",{children:u.docnumber})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("strong",{children:"Balance Changes:"}),a.jsxs("div",{children:[a.jsxs("div",{children:["Previous: ",U(u.previousBalance)]}),a.jsxs("div",{children:["New: ",U(u.newBalance)]}),a.jsxs("div",{className:"text-success",children:["Reduction: ",U(u.previousBalance-u.newBalance)]})]})]})]})]}),u.description&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{className:"text-muted",children:"Description"}),a.jsx("p",{className:"bg-light p-3 rounded",children:u.description})]}),u.paymentDetails&&a.jsxs("div",{className:"mt-3",children:[a.jsx("h6",{className:"text-muted",children:"Payment Method Details"}),a.jsxs("div",{className:"bg-light p-3 rounded",children:[u.paymentMethod==="cheque"&&a.jsxs(a.Fragment,{children:[u.paymentDetails.chequeNumber&&a.jsxs("div",{children:[a.jsx("strong",{children:"Cheque Number:"})," ",u.paymentDetails.chequeNumber]}),u.paymentDetails.bankName&&a.jsxs("div",{children:[a.jsx("strong",{children:"Bank:"})," ",u.paymentDetails.bankName]})]}),u.paymentMethod==="bank_transfer"&&a.jsxs(a.Fragment,{children:[u.paymentDetails.accountNumber&&a.jsxs("div",{children:[a.jsx("strong",{children:"Account Number:"})," ",u.paymentDetails.accountNumber]}),u.paymentDetails.transactionId&&a.jsxs("div",{children:[a.jsx("strong",{children:"Transaction ID:"})," ",u.paymentDetails.transactionId]})]}),u.paymentMethod==="upi"&&a.jsxs(a.Fragment,{children:[u.paymentDetails.upiId&&a.jsxs("div",{children:[a.jsx("strong",{children:"UPI ID:"})," ",u.paymentDetails.upiId]}),u.paymentDetails.transactionId&&a.jsxs("div",{children:[a.jsx("strong",{children:"Transaction ID:"})," ",u.paymentDetails.transactionId]})]})]})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>p(!1),children:"Close"}),a.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>B(u),children:[a.jsx("i",{className:"ti ti-printer me-2"}),"Print Receipt"]})]})]})})}),v&&b&&a.jsx("div",{className:"modal fade show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Edit Payment - ",b.paymentDocNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>g(!1)})]}),a.jsxs("form",{onSubmit:K,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Amount *"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:"₹"}),a.jsx("input",{type:"number",className:"form-control",name:"paymentAmount",value:b.paymentAmount,onChange:z,min:"0",step:"0.01",required:!0})]})]}),a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Method *"}),a.jsxs("select",{className:"form-select",name:"paymentMethod",value:b.paymentMethod,onChange:z,required:!0,children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"cheque",children:"Cheque"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),a.jsx("option",{value:"upi",children:"UPI"}),a.jsx("option",{value:"card",children:"Card"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Date *"}),a.jsx("input",{type:"date",className:"form-control",name:"paymentDate",value:b.paymentDate,onChange:z,required:!0})]}),a.jsxs("div",{className:"col-md-6 mb-3",children:[a.jsx("label",{className:"form-label",children:"Status *"}),a.jsxs("select",{className:"form-select",name:"status",value:b.status,onChange:z,required:!0,children:[a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"cleared",children:"Cleared"}),a.jsx("option",{value:"bounced",children:"Bounced"}),a.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{className:"col-12 mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",name:"description",value:b.description||"",onChange:z,rows:"3",placeholder:"Payment description or notes..."})]})]}),a.jsxs("div",{className:"alert alert-warning",children:[a.jsx("i",{className:"ti ti-alert-triangle me-2"}),a.jsx("strong",{children:"Note:"})," Editing payment details will not automatically update the balance in the original invoice/billing record. You may need to manually adjust balances if necessary."]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>g(!1),children:"Cancel"}),a.jsxs("button",{type:"submit",className:"btn btn-primary",children:[a.jsx("i",{className:"ti ti-check me-2"}),"Update Payment"]})]})]})]})})})]})}function UDe(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(1),[o,l]=N.useState(1),[c,d]=N.useState(!1),[u,h]=N.useState([]),[m,p]=N.useState(Date.now()),[v,g]=N.useState({totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),[b,y]=N.useState({totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),[C,w]=N.useState(""),[k,S]=N.useState(""),[D,E]=N.useState(""),[T,A]=N.useState(""),[L,P]=N.useState(""),[O,Z]=N.useState(""),[z,K]=N.useState(!1),[B,Q]=N.useState(""),[U,J]=N.useState(""),[Y,oe]=N.useState(""),[M,V]=N.useState(""),[H,ee]=N.useState(!1),[re,ae]=N.useState(null),[ne,ie]=N.useState(null),[G,de]=N.useState(null),[X,le]=N.useState(new Date),[Se,ue]=N.useState({type:"",text:""}),se=localStorage.getItem("selectedCompanyId"),ye=localStorage.getItem("financialYear"),Ne=10;N.useEffect(()=>{Qe();const ke=it=>{it.key==="paymentUpdated"&&(ue({type:"info",text:"Payment updated in another tab. Refreshing ledger..."}),Qe(),setTimeout(()=>ue({type:"",text:""}),3e3))};return window.addEventListener("storage",ke),()=>{window.removeEventListener("storage",ke),G&&clearInterval(G)}},[]);const Ue=async()=>{try{return(await Oe.get("/api/payment",{params:{companyId:se,financialYear:ye,limit:1e3}})).data.payments||[]}catch(ke){return console.error("Error fetching payments:",ke),[]}},Qe=async()=>{d(!0);try{const[ke,it,bt]=await Promise.all([Oe.get("/api/invoiceform",{params:{companyId:se,financialYear:ye}}),Oe.get("/api/billingform",{params:{companyId:se,financialYear:ye}}),Ue()]);t(ke.data||[]),n(it.data||[]),h(bt||[]),p(Date.now()),ot(ke.data||[],it.data||[]),le(new Date)}catch(ke){console.error("Error fetching data",ke),ue({type:"error",text:"Failed to fetch data. Please refresh the page."})}finally{d(!1)}},ot=(ke,it)=>{const bt=ke.reduce((Ft,rr)=>{const pr=rr.category?.toLowerCase()==="debit"&&(rr.finalTotal||rr.netAmount)||0,jr=rr.category?.toLowerCase()==="credit"&&(rr.finalTotal||rr.netAmount)||0,vt=rr.balance||0;let Lt=pr,fe=jr;return pr>0&&jr===0?fe=-vt:jr>0&&pr===0&&(Lt=-vt),{totalDebit:Ft.totalDebit+Lt,totalCredit:Ft.totalCredit+fe,totalBalance:Ft.totalBalance+(fe-Lt),outstandingBalance:Ft.outstandingBalance+vt}},{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),Xt=it.reduce((Ft,rr)=>{const pr=rr.category?.toLowerCase()==="debit"&&rr.finalTotal||0,jr=rr.category?.toLowerCase()==="credit"&&rr.finalTotal||0,vt=rr.balance||0;let Lt=pr,fe=jr;return pr>0&&jr===0?fe=-vt:jr>0&&pr===0&&(Lt=-vt),{totalDebit:Ft.totalDebit+Lt,totalCredit:Ft.totalCredit+fe,totalBalance:Ft.totalBalance+(Lt-fe),outstandingBalance:Ft.outstandingBalance+vt}},{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0});g(bt),y(Xt)},xt=(ke,it,bt)=>{let Xt=ke,Ft=it;return ke>0&&it===0?Ft=ke-bt:it>0&&ke===0&&(Xt=it-bt),{adjustedDebit:Xt,adjustedCredit:Ft}},Le=(ke,it,bt)=>!u||u.length===0?[]:u.filter(Xt=>{const Ft=Xt.docnumber===ke||Xt.invoiceNumber===ke||Xt.originalDocNumber===ke;return Xt.recordType===bt&&Ft}),dt=(ke,it)=>{ie(ke),ae(it),ee(!0)},Tt=e.map((ke,it)=>{const bt=ke.category?.toLowerCase()==="debit"&&(ke.finalTotal||ke.netAmount)||0,Xt=ke.category?.toLowerCase()==="credit"&&(ke.finalTotal||ke.netAmount)||0,Ft=ke?.vendor||"Unknown Vendor",rr=ke?.docnumber||"_",pr=Le(rr,Ft,"vendor"),jr=pr.filter(_e=>_e.status==="cleared"),vt=jr.reduce((_e,Fe)=>_e+(Fe.paymentAmount||0),0),Lt=jr.sort((_e,Fe)=>new Date(Fe.paymentDate)-new Date(_e.paymentDate))[0];let fe=ke.balance||0;fe<0&&(fe=0);const{adjustedDebit:Me,adjustedCredit:Te}=xt(bt,Xt,fe);return{id:ke._id||it,name:Ft,docnumber:rr,debit:Me,credit:Te,balance:fe,originalAmount:ke.finalTotal||ke.netAmount||0,lastPaymentAmount:Lt?.paymentAmount||0,lastPaymentDate:Lt?.paymentDate||null,lastPaymentMethod:Lt?.paymentMethod||null,createdAt:ke.createdAt||new Date,category:ke.category||"debit",originalDebit:bt,originalCredit:Xt,totalPayments:vt,paymentCount:jr.length,pendingPayments:pr.filter(_e=>_e.status==="pending").length,specificInvoicePayments:pr,allPaymentStatuses:pr.map(_e=>_e.status),paymentMethods:[...new Set(pr.map(_e=>_e.paymentMethod))],firstPaymentDate:pr.length>0?pr.sort((_e,Fe)=>new Date(_e.paymentDate)-new Date(Fe.paymentDate))[0].paymentDate:null}}),At=r.map((ke,it)=>{const bt=ke.category?.toLowerCase()==="debit"&&ke.finalTotal||0,Xt=ke.category?.toLowerCase()==="credit"&&ke.finalTotal||0,Ft=ke?.customer||"Unknown Customer",rr=ke.docnumber||"_",pr=Le(rr,Ft,"customer"),jr=pr.filter(_e=>_e.status==="cleared"),vt=jr.reduce((_e,Fe)=>_e+(Fe.paymentAmount||0),0),Lt=jr.sort((_e,Fe)=>new Date(Fe.paymentDate)-new Date(_e.paymentDate))[0];let fe=ke.balance||0;fe<0&&(fe=0);const{adjustedDebit:Me,adjustedCredit:Te}=xt(bt,Xt,fe);return{id:ke._id||it,docnumber:rr,name:Ft,debit:Me,credit:Te,balance:fe,originalAmount:ke.finalTotal||0,lastPaymentAmount:Lt?.paymentAmount||0,lastPaymentDate:Lt?.paymentDate||null,lastPaymentMethod:Lt?.paymentMethod||null,createdAt:ke.createdAt||new Date,category:ke.category||"debit",originalDebit:bt,originalCredit:Xt,totalPayments:vt,paymentCount:jr.length,pendingPayments:pr.filter(_e=>_e.status==="pending").length,specificInvoicePayments:pr,allPaymentStatuses:pr.map(_e=>_e.status),paymentMethods:[...new Set(pr.map(_e=>_e.paymentMethod))],firstPaymentDate:pr.length>0?pr.sort((_e,Fe)=>new Date(_e.paymentDate)-new Date(Fe.paymentDate))[0].paymentDate:null}}),Vt=[...new Set(Tt.map(ke=>ke.name))],xe=[...new Set(At.map(ke=>ke.name))],he=(ke,it,bt)=>!it&&!bt?ke:ke.filter(Xt=>{const Ft=new Date(Xt.createdAt),rr=it?new Date(it):null,pr=bt?new Date(bt):null;return!(rr&&Ft<rr||pr&&Ft>pr)});let ve=C?Tt.filter(ke=>ke.name===C):Tt;ve=he(ve,D,T);let pe=k?At.filter(ke=>ke.name===k):At;pe=he(pe,L,O),console.log("filteredCustomerData",pe);const De=ve.reduce((ke,it)=>({totalDebit:ke.totalDebit+it.debit,totalCredit:ke.totalCredit+it.credit,totalBalance:ke.totalBalance+(it.credit-it.debit),outstandingBalance:ke.outstandingBalance+it.balance}),{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),Ye=pe.reduce((ke,it)=>({totalDebit:ke.totalDebit+it.debit,totalCredit:ke.totalCredit+it.credit,totalBalance:ke.totalBalance+(it.debit-it.credit),outstandingBalance:ke.outstandingBalance+it.balance}),{totalDebit:0,totalCredit:0,totalBalance:0,outstandingBalance:0}),Nt=(ke,it="")=>{Q(ke),J(it),oe(""),V(""),K(!0)},Je=(ke,it,bt)=>{const Xt=["S.No","Invoice/Doc Number",bt==="vendor"?"Vendor Name":"Customer Name","Invoice Original Amount","Current Debit","Current Credit","Outstanding Balance","Payment Status","Total Payments Made (This Invoice)","Payment Count (This Invoice)","Cleared Payments Count","Pending Payments Count","Payment Methods Used","First Payment Date","Last Payment Date","Last Payment Amount","Last Payment Method","Invoice Created Date","Detailed Payment History","Payment Status Breakdown","Balance Calculation Details"],Ft=[];Ft.push(Xt.join(",")),ke.forEach((Lt,fe)=>{const Me=Lt.specificInvoicePayments||[],Te=Me.map(wt=>{const nt=Ge(wt.paymentDate),St=(wt.paymentAmount||0).toFixed(2),Ct=wt.paymentMethod||"N/A",Jt=wt.status||"N/A",ir=wt.paymentDocNumber||"N/A",xr=wt.description||"N/A";return`[${nt}] Amount: ${St} | Method: ${Ct} | Status: ${Jt.toUpperCase()} | Reference: ${ir} | Description: ${xr} `}).join(` 
 `),_e=Lt.allPaymentStatuses.reduce((wt,nt)=>(wt[nt]=(wt[nt]||0)+1,wt),{}),Fe=Object.entries(_e).map(([wt,nt])=>`${wt.toUpperCase()}: ${nt}`).join(", "),Ve=`Original: ${Lt.originalAmount.toFixed(2)} | Total Paid: ${Lt.totalPayments.toFixed(2)} | Outstanding: ${Lt.balance.toFixed(2)} | Calculation: ${Lt.originalAmount.toFixed(2)} - ${Lt.totalPayments.toFixed(2)} = ${Lt.balance.toFixed(2)}`,mt=[fe+1,`"${Lt.docnumber}"`,`"${Lt.name}"`,Lt.originalAmount.toFixed(2),Lt.debit.toFixed(2),Lt.credit.toFixed(2),Lt.balance.toFixed(2),lt(Lt.balance,Lt.originalAmount).status,Lt.totalPayments.toFixed(2),Lt.paymentCount,Me.filter(wt=>wt.status==="cleared").length,Me.filter(wt=>wt.status==="pending").length,`"${Lt.paymentMethods.join(", ")||"No payments"}"`,Lt.firstPaymentDate?Ke(Lt.firstPaymentDate):"N/A",Lt.lastPaymentDate?Ke(Lt.lastPaymentDate):"N/A",Lt.lastPaymentAmount.toFixed(2),`"${Lt.lastPaymentMethod||"N/A"}"`,Ke(Lt.createdAt),`"${Te||"No payment history for this invoice"}"`,`"${Fe||"No payment status available"}"`,`"${Ve}"`];Ft.push(mt.join(","))}),Ft.push(""),Ft.push("Invoice Number,Entity Name,Invoice Amount,Payments Received,Outstanding,Payment Efficiency %,First Payment,Last Payment,Payment Methods,Status"),ke.forEach(Lt=>{const fe=Lt.originalAmount>0?(Lt.totalPayments/Lt.originalAmount*100).toFixed(1):0;Ft.push([`"${Lt.docnumber}"`,`"${Lt.name}"`,Lt.originalAmount.toFixed(2),Lt.totalPayments.toFixed(2),Lt.balance.toFixed(2),`${fe}%`,Lt.firstPaymentDate?Ke(Lt.firstPaymentDate):"No payments",Lt.lastPaymentDate?Ke(Lt.lastPaymentDate):"No payments",`"${Lt.paymentMethods.join(", ")||"None"}"`,lt(Lt.balance,Lt.originalAmount).status].join(","))}),Ft.push(""),Ft.push(`"Financial Year","${ye}"`),Ft.push(`"Total Invoices","${ke.length}"`),Ft.push(`"Total Payment Records","${ke.reduce((Lt,fe)=>Lt+fe.paymentCount,0)}"`);const rr=Ft.join(`
`),pr=new Blob([rr],{type:"text/csv;charset=utf-8;"}),jr=document.createElement("a"),vt=URL.createObjectURL(pr);jr.setAttribute("href",vt),jr.setAttribute("download",it),jr.style.visibility="hidden",document.body.appendChild(jr),jr.click(),document.body.removeChild(jr)},Xe=()=>{let ke=[],it="";B==="vendor"?(ke=U?Tt.filter(Xt=>Xt.name===U):Tt,it=U?`${U}_vendor_detailed_invoice_payments`:"all_vendor_detailed_invoice_payments"):(ke=U?At.filter(Xt=>Xt.name===U):At,it=U?`${U}_customer_detailed_invoice_payments`:"all_customer_detailed_invoice_payments"),ke=he(ke,Y,M),(Y||M)&&(it+=`_${Y||"start"}_to_${M||"end"}`);const bt=new Date().toISOString().slice(0,19).replace(/:/g,"-");it+=`_${bt}.csv`,Je(ke,it,B),K(!1)},Be=(ke,it)=>ke.slice((it-1)*Ne,it*Ne),qe=Math.ceil(ve.length/Ne)||1,ft=Math.ceil(pe.length/Ne)||1,Ie=ke=>{const it=parseFloat(ke||0),Xt=`₹${Math.abs(it).toFixed(2)}`;return it<0?`(${Xt})`:Xt},Ke=ke=>ke?new Date(ke).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"-",Ge=ke=>ke?new Date(ke).toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-",lt=(ke,it)=>ke<=0?{status:"Paid",class:"success"}:ke===it?{status:"Unpaid",class:"danger"}:{status:"Partial",class:"warning"},Mt=ke=>ke>0?"text-success":ke<0?"text-danger":"text-muted",Ae=ke=>({cash:"ti ti-cash",cheque:"ti ti-file-text",bank_transfer:"ti ti-building-bank",upi:"ti ti-qrcode",card:"ti ti-credit-card",other:"ti ti-dots"})[ke]||"ti ti-payment";return a.jsxs("div",{className:"content",children:[Se.text&&a.jsxs("div",{className:`alert alert-${Se.type==="success"?"success":Se.type==="info"?"info":"danger"} alert-dismissible fade show`,children:[Se.text,a.jsx("button",{type:"button",className:"btn-close",onClick:()=>ue({type:"",text:""})})]}),a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Ledger"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Accounts"}),a.jsx("li",{className:"breadcrumb-item active",children:"Ledger"})]})})]}),a.jsxs("div",{children:[a.jsxs("a",{href:"/payments",className:"btn btn-primary me-2",children:[a.jsx("i",{className:"ti ti-plus"})," Record Payment"]}),a.jsxs("a",{href:"/paymentdisplay",className:"btn btn-outline-primary me-2",children:[a.jsx("i",{className:"ti ti-eye"})," View Payments"]}),a.jsxs("button",{onClick:Qe,className:"btn btn-outline-secondary",children:[a.jsx("i",{className:"ti ti-refresh"})," Refresh Now"]})]})]}),a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h6",{className:"mb-0",children:"Vendor Summary"}),a.jsx("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Nt("vendor"),title:"Download Detailed Vendor Payment Data",children:a.jsx("i",{className:"ti ti-download"})})]}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-12 mb-2",children:[a.jsx("label",{children:"Select Vendor: "}),a.jsxs("select",{value:C,onChange:ke=>{w(ke.target.value),i(1)},className:"form-select",style:{maxWidth:250,display:"inline-block",marginLeft:10},children:[a.jsx("option",{value:"",children:"All Vendors"}),Vt.map(ke=>a.jsx("option",{value:ke,children:ke},ke))]}),C&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn btn-link text-danger ms-2 px-2 py-0",onClick:()=>w(""),children:"Clear"}),a.jsxs("button",{className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>Nt("vendor",C),title:`Download detailed ${C} payment data`,children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"From Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:D,onChange:ke=>{E(ke.target.value),i(1)}})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"To Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:T,onChange:ke=>{A(ke.target.value),i(1)}})]})]}),a.jsxs("div",{className:"row text-center",children:[a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Debit"}),a.jsx("h6",{className:"text-danger",children:Ie(De.totalDebit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Credit"}),a.jsx("h6",{className:"text-success",children:Ie(De.totalCredit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Net Balance"}),a.jsx("h6",{className:De.totalBalance>=0?"text-success":"text-danger",children:Ie(De.totalBalance)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Outstanding"}),a.jsx("h6",{className:"text-warning",children:Ie(De.outstandingBalance)})]})]})]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card border-0 shadow-sm",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h6",{className:"mb-0",children:"Customer Summary"}),a.jsx("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Nt("customer"),title:"Download Detailed Customer Payment Data",children:a.jsx("i",{className:"ti ti-download"})})]}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-12 mb-2",children:[a.jsx("label",{children:"Select Customer: "}),a.jsxs("select",{value:k,onChange:ke=>{S(ke.target.value),l(1)},className:"form-select",style:{maxWidth:250,display:"inline-block",marginLeft:10},children:[a.jsx("option",{value:"",children:"All Customers"}),xe.map(ke=>a.jsx("option",{value:ke,children:ke},ke))]}),k&&a.jsxs(a.Fragment,{children:[a.jsx("button",{className:"btn btn-link text-danger ms-2 px-2 py-0",onClick:()=>S(""),children:"Clear"}),a.jsxs("button",{className:"btn btn-sm btn-outline-primary ms-2",onClick:()=>Nt("customer",k),title:`Download detailed ${k} payment data`,children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"From Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:L,onChange:ke=>{P(ke.target.value),l(1)}})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"To Date:"}),a.jsx("input",{type:"date",className:"form-control form-control-sm",value:O,onChange:ke=>{Z(ke.target.value),l(1)}})]})]}),a.jsxs("div",{className:"row text-center",children:[a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Debit"}),a.jsx("h6",{className:"text-danger",children:Ie(Ye.totalDebit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Total Credit"}),a.jsx("h6",{className:"text-success",children:Ie(Ye.totalCredit)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Net Balance"}),a.jsx("h6",{className:Ye.totalBalance>=0?"text-success":"text-danger",children:Ie(Ye.totalBalance)})]}),a.jsxs("div",{className:"col-3",children:[a.jsx("div",{className:"text-muted mb-1",children:"Outstanding"}),a.jsx("h6",{className:"text-warning",children:Ie(Ye.outstandingBalance)})]})]})]})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-12 mb-4",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h5",{className:"mb-0",children:"Vendor Ledger"}),a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsxs("small",{className:"me-3",children:["Total Records: ",ve.length]}),a.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Nt("vendor",C),children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})]})]}),a.jsx("div",{className:"card-body",children:c?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"DocNumber"}),a.jsx("th",{children:"Vendor"}),a.jsx("th",{children:"Original Amount"}),a.jsx("th",{children:"Debit"}),a.jsx("th",{children:"Credit"}),a.jsx("th",{children:"Current Balance"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Payment Summary"}),a.jsx("th",{children:"Payment Timeline"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Be(ve,s).map((ke,it)=>{const bt=lt(Number(ke.balance),ke.originalAmount),Xt=ke.originalAmount>0?(ke.totalPayments/ke.originalAmount*100).toFixed(1):0;return a.jsxs("tr",{children:[a.jsx("td",{children:(s-1)*Ne+it+1}),a.jsx("td",{children:a.jsx("strong",{className:"text-primary",children:ke.docnumber})}),a.jsx("td",{children:a.jsx("strong",{children:ke.name})}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{children:Ie(ke.originalAmount)})}),a.jsx("td",{className:`text-end fw-bold ${Mt(ke.debit)}`,children:Ie(ke.totalPayments)}),a.jsx("td",{className:`text-end fw-bold ${Mt(ke.credit)}`,children:Ie(ke.balance)}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{className:`${ke.balance>0?"text-danger":"text-success"}`,children:Ie(ke.balance)})}),a.jsxs("td",{children:[a.jsx("span",{className:`badge bg-${bt.class}`,children:bt.status}),a.jsx("div",{className:"mt-1",children:a.jsxs("small",{className:"text-muted",children:[Xt,"% paid"]})})]}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[ke.totalPayments>0?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"badge bg-success mb-1",children:["₹",ke.totalPayments.toFixed(0)]}),a.jsxs("small",{className:"text-muted",children:[ke.paymentCount," payment(s)"]})]}):a.jsx("span",{className:"badge bg-secondary",children:"No Payments"}),ke.pendingPayments>0&&a.jsxs("span",{className:"badge bg-warning mt-1",children:[ke.pendingPayments," Pending"]})]})}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[a.jsxs("small",{className:"text-muted",children:["Created: ",Ke(ke.createdAt)]}),ke.firstPaymentDate&&a.jsxs("small",{className:"text-success",children:["First Payment: ",Ke(ke.firstPaymentDate)]}),ke.lastPaymentDate&&a.jsxs("small",{className:"text-primary",children:["Last Payment: ",Ke(ke.lastPaymentDate)]})]})}),a.jsx("td",{className:"text-center",children:a.jsx("div",{className:"btn-group-vertical",role:"group",children:ke.specificInvoicePayments.length>0?a.jsxs("button",{className:"btn btn-sm btn-outline-info mb-1",onClick:()=>dt(ke,ke.specificInvoicePayments),title:"View detailed payment history",children:[a.jsx("i",{className:"ti ti-eye"})," View Details"]}):a.jsxs("span",{className:"btn btn-sm btn-outline-secondary mb-1 disabled",children:[a.jsx("i",{className:"ti ti-ban"})," No Payments"]})})})]},ke.id)})})]})}),qe>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"d-flex justify-content-end align-items-end",children:a.jsx("nav",{"aria-label":"Vendor pagination",children:a.jsxs("ul",{className:"pagination justify-content-end mb-0",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>i(ke=>Math.max(ke-1,1)),disabled:s===1,title:"Previous page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-left"})})})}),(()=>{const it=[],bt=[];it.push(1);for(let rr=Math.max(2,s-2);rr<=Math.min(qe-1,s+2);rr++)it.push(rr);qe>1&&it.push(qe);const Xt=[...new Set(it)].sort((rr,pr)=>rr-pr);let Ft;for(let rr of Xt)Ft&&(rr-Ft===2?bt.push(Ft+1):rr-Ft!==1&&bt.push("...")),bt.push(rr),Ft=rr;return bt.map((rr,pr)=>rr==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`vendor-ellipsis-${pr}`):a.jsx("li",{className:`page-item ${s===rr?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>i(rr),title:`Go to page ${rr}`,children:rr})},`vendor-page-${rr}`))})(),a.jsx("li",{className:`page-item ${s===qe?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>i(ke=>Math.min(ke+1,qe)),disabled:s===qe,title:"Next page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-right"})})})})]})})})})})]})})]})}),a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header text-white d-flex justify-content-between align-items-center",children:[a.jsx("h5",{className:"mb-0",children:"Customer Ledger"}),a.jsx("div",{className:"d-flex align-items-center",children:a.jsxs("button",{className:"btn btn-sm btn-outline-light",onClick:()=>Nt("customer",k),children:[a.jsx("i",{className:"ti ti-download"})," Detailed Export"]})})]}),a.jsx("div",{className:"card-body",children:c?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"DocNumber"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Original Amount"}),a.jsx("th",{children:"Debit"}),a.jsx("th",{children:"Credit"}),a.jsx("th",{children:"Current Balance"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Payment Summary"}),a.jsx("th",{children:"Payment Timeline"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Be(pe,o).map((ke,it)=>{const bt=lt(ke.balance,ke.originalAmount),Xt=ke.originalAmount>0?(ke.totalPayments/ke.originalAmount*100).toFixed(1):0;return a.jsxs("tr",{children:[a.jsx("td",{children:(o-1)*Ne+it+1}),a.jsx("td",{children:a.jsx("strong",{className:"text-primary",children:ke.docnumber})}),a.jsx("td",{children:a.jsx("strong",{children:ke.name})}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{children:Ie(ke.originalAmount)})}),a.jsx("td",{className:`text-end fw-bold ${Mt(ke.debit)}`,children:Ie(ke.balance)}),a.jsx("td",{className:`text-end fw-bold ${Mt(ke.credit)}`,children:Ie(ke.totalPayments.toFixed(0))}),a.jsx("td",{className:"text-end",children:a.jsx("strong",{className:`${ke.balance>0?"text-danger":"text-success"}`,children:Ie(ke.balance)})}),a.jsxs("td",{children:[a.jsx("span",{className:`badge bg-${bt.class}`,children:bt.status}),a.jsx("div",{className:"mt-1",children:a.jsxs("small",{className:"text-muted",children:[Xt,"% paid"]})})]}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[ke.totalPayments>0?a.jsxs(a.Fragment,{children:[a.jsxs("span",{className:"badge bg-success mb-1",children:["₹",ke.totalPayments.toFixed(0)]}),a.jsxs("small",{className:"text-muted",children:[ke.paymentCount," payment(s)"]})]}):a.jsx("span",{className:"badge bg-secondary",children:"No Payments"}),ke.pendingPayments>0&&a.jsxs("span",{className:"badge bg-warning mt-1",children:[ke.pendingPayments," Pending"]})]})}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex flex-column",children:[a.jsxs("small",{className:"text-muted",children:["Created: ",Ke(ke.createdAt)]}),ke.firstPaymentDate&&a.jsxs("small",{className:"text-success",children:["First Payment: ",Ke(ke.firstPaymentDate)]}),ke.lastPaymentDate&&a.jsxs("small",{className:"text-primary",children:["Last Payment: ",Ke(ke.lastPaymentDate)]})]})}),a.jsx("td",{className:"text-center",children:a.jsx("div",{className:"btn-group-vertical",role:"group",children:ke.specificInvoicePayments.length>0?a.jsxs("button",{className:"btn btn-sm btn-outline-info mb-1",onClick:()=>dt(ke,ke.specificInvoicePayments),title:"View detailed payment history",children:[a.jsx("i",{className:"ti ti-eye"})," View Details"]}):a.jsxs("span",{className:"btn btn-sm btn-outline-secondary mb-1 disabled",children:[a.jsx("i",{className:"ti ti-ban"})," No Payments"]})})})]},ke.id)})})]})}),ft>1&&a.jsx("div",{className:"row mb-3",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"d-flex justify-content-end align-items-end",children:a.jsx("nav",{"aria-label":"Customer pagination",children:a.jsxs("ul",{className:"pagination justify-content-end mb-0",children:[a.jsx("li",{className:`page-item ${o===1?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>l(ke=>Math.max(ke-1,1)),disabled:o===1,title:"Previous page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-left"})})})}),(()=>{const it=[],bt=[];it.push(1);for(let rr=Math.max(2,o-2);rr<=Math.min(ft-1,o+2);rr++)it.push(rr);ft>1&&it.push(ft);const Xt=[...new Set(it)].sort((rr,pr)=>rr-pr);let Ft;for(let rr of Xt)Ft&&(rr-Ft===2?bt.push(Ft+1):rr-Ft!==1&&bt.push("...")),bt.push(rr),Ft=rr;return bt.map((rr,pr)=>rr==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`customer-ellipsis-${pr}`):a.jsx("li",{className:`page-item ${o===rr?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>l(rr),title:`Go to page ${rr}`,children:rr})},`customer-page-${rr}`))})(),a.jsx("li",{className:`page-item ${o===ft?"disabled":""}`,children:a.jsx("button",{className:"page-link btn-sm",onClick:()=>l(ke=>Math.min(ke+1,ft)),disabled:o===ft,title:"Next page",children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"ti ti-chevron-right"})})})})]})})})})})]})})]})})]}),H&&re&&ne&&a.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header ",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"ti ti-file-invoice me-2"}),"Payment Analysis - Invoice ",ne.docnumber]}),a.jsx("button",{type:"button",className:"btn-close btn-close",onClick:()=>ee(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card ",children:[a.jsx("div",{className:"card-header ",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"ti ti-clipboard-data me-2"}),"Invoice Summary & Payment Overview"]})}),a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:"text-primary",children:"Invoice Number"}),a.jsx("br",{}),a.jsx("span",{className:"h5 text-dark",children:ne.docnumber})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:"text-info",children:"Entity"}),a.jsx("br",{}),a.jsx("span",{className:"h6 text-dark",children:ne.name})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:"text-success",children:"Original Amount"}),a.jsx("br",{}),a.jsx("span",{className:"h5 text-success",children:Ie(ne.originalAmount)})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-3 border rounded",children:[a.jsx("strong",{className:ne.balance>0?"text-danger":"text-success",children:"Outstanding Balance"}),a.jsx("br",{}),a.jsx("span",{className:`h5 ${ne.balance>0?"text-danger":"text-success"}`,children:Ie(ne.balance)})]})})]}),a.jsxs("div",{className:"row mt-3",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-2 bg-info text-white rounded",children:[a.jsx("strong",{children:"Total Payments"}),a.jsx("br",{}),a.jsx("span",{className:"h6",children:Ie(ne.totalPayments)})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-2 bg-primary text-white rounded",children:[a.jsx("strong",{children:"Payment Count"}),a.jsx("br",{}),a.jsx("span",{className:"h6",children:ne.paymentCount})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:`text-center p-2 text-white rounded bg-${lt(ne.balance,ne.originalAmount).class}`,children:[a.jsx("strong",{children:"Status"}),a.jsx("br",{}),a.jsx("span",{className:"h6",children:lt(ne.balance,ne.originalAmount).status})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"text-center p-2 bg-secondary text-white rounded",children:[a.jsx("strong",{children:"Invoice Age"}),a.jsx("br",{}),a.jsxs("span",{className:"h6",children:[Math.floor((new Date-new Date(ne.createdAt))/(1e3*60*60*24))," days"]})]})})]})]})]})})}),re.length>0&&a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header text-dark",children:a.jsxs("h6",{className:"mb-0",children:[a.jsx("i",{className:"ti ti-chart-bar me-2"}),"Payment Analytics & Summary"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-4",children:[a.jsx("h6",{className:"text-primary",children:"Payment Status Breakdown:"}),a.jsx("ul",{className:"list-unstyled",children:Object.entries(re.reduce((ke,it)=>(ke[it.status]=(ke[it.status]||0)+1,ke),{})).map(([ke,it])=>a.jsxs("li",{className:"mb-1",children:[a.jsx("span",{className:`badge bg-${ke==="cleared"?"success":ke==="pending"?"warning":ke==="bounced"?"danger":"secondary"}`,children:ke.toUpperCase()}),a.jsxs("span",{className:"ms-2",children:[it," transaction(s)"]})]},ke))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("h6",{className:"text-success",children:"Payment Method Summary:"}),a.jsx("ul",{className:"list-unstyled",children:Object.entries(re.reduce((ke,it)=>{const bt=it.paymentMethod||"Unknown";return ke[bt]=(ke[bt]||0)+(it.paymentAmount||0),ke},{})).map(([ke,it])=>a.jsxs("li",{className:"mb-1",children:[a.jsx("i",{className:`${Ae(ke)} me-2 text-primary`}),a.jsx("span",{className:"text-capitalize",children:ke.replace("_"," ")}),a.jsx("span",{className:"ms-2 text-success",children:Ie(it)})]},ke))})]})]})})]})})})]}),a.jsxs("div",{className:"modal-footer gap-2",children:[a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>ee(!1),children:[a.jsx("i",{className:"ti ti-x me-1"})," Close"]}),a.jsxs("button",{type:"button",className:"btn btn-primary",onClick:()=>{const ke=re.map((pr,jr)=>[jr+1,ne.docnumber,ne.name,Ke(pr.paymentDate),pr.paymentDocNumber||"N/A",pr.paymentAmount||0,pr.paymentMethod||"N/A",pr.status||"N/A",pr.previousBalance||0,pr.newBalance||0,pr.description||"N/A",Ge(pr.createdAt||pr.paymentDate)]),bt=[["S.No","Invoice Number","Entity Name","Payment Date","Payment Doc Number","Payment Amount","Payment Method","Status","Balance Before","Balance After","Description","Created At"].join(","),...ke.map(pr=>pr.map(jr=>`"${jr}"`).join(","))].join(`
`),Xt=new Blob([bt],{type:"text/csv;charset=utf-8;"}),Ft=document.createElement("a"),rr=URL.createObjectURL(Xt);Ft.setAttribute("href",rr),Ft.setAttribute("download",`invoice_${ne.docnumber}_payment_details_${new Date().toISOString().slice(0,10)}.csv`),Ft.style.visibility="hidden",document.body.appendChild(Ft),Ft.click(),document.body.removeChild(Ft)},children:[a.jsx("i",{className:"ti ti-download me-1"})," Export to CSV"]})]})]})})}),z&&a.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Download ",B==="vendor"?"Vendor":"Customer"," Payment Details"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>K(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("div",{className:"mb-3",children:a.jsx("strong",{children:U?`${B==="vendor"?"Vendor":"Customer"}: ${U}`:`All ${B==="vendor"?"Vendors":"Customers"}`})}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"From Date (Optional):"}),a.jsx("input",{type:"date",className:"form-control",value:Y,onChange:ke=>oe(ke.target.value)})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"To Date (Optional):"}),a.jsx("input",{type:"date",className:"form-control",value:M,onChange:ke=>V(ke.target.value)})]})]})]}),a.jsxs("div",{className:"modal-footer gap-2",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(!1),children:"Cancel"}),a.jsxs("button",{type:"button",className:"btn btn-primary",onClick:Xe,children:[a.jsx("i",{className:"ti ti-download"})," Download Report"]})]})]})})})]})}function $De(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState({}),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,h]=N.useState(""),[m,p]=N.useState([]),[v,g]=N.useState([]),[b,y]=N.useState(""),[C,w]=N.useState(""),[k,S]=N.useState([]),[D,E]=N.useState([]),[T,A]=N.useState(!1),[L,P]=N.useState(""),[O,Z]=N.useState([]),[z,K]=N.useState(""),[B,Q]=N.useState(""),[U,J]=N.useState("internal"),[Y,oe]=N.useState(""),[M,V]=N.useState(""),[H,ee]=N.useState(""),[re,ae]=N.useState(""),[ne,ie]=N.useState([]),[G,de]=N.useState(null),[X,le]=N.useState(0),[Se,ue]=N.useState(""),[se,ye]=N.useState([]),[Ne,Ue]=N.useState([]),[Qe,ot]=N.useState(""),[xt,Le]=N.useState(""),[dt,Tt]=N.useState(""),[At,Vt]=N.useState([]),[xe,he]=N.useState(1),[ve,pe]=N.useState(10),[De,Ye]=N.useState(0),[Nt,Je]=N.useState(""),[Xe,Be]=N.useState([]),[qe,ft]=N.useState([]),[Ie,Ke]=N.useState(""),[Ge,lt]=N.useState(""),[Mt,Ae]=N.useState(""),[ke,it]=N.useState(""),bt=localStorage.getItem("selectedCompanyId"),Xt=localStorage.getItem("financialYear"),Ft=async()=>{try{const dr=(await Oe.get("/api/material",{params:{companyId:bt,financialYear:Xt}})).data.sort((ur,Vr)=>new Date(Vr.createdAt)-new Date(ur.createdAt));t(dr),Ye(dr.length),he(1)}catch(ze){console.error("Failed to fetch materials:",ze)}},rr=async()=>{try{const ze=await Oe.get("/api/stock/data",{params:{companyId:bt,financialYear:Xt}});n(ze.data),console.log("Stock data fetched:",ze.data)}catch(ze){console.error("Failed to fetch stock:",ze)}},pr=(ze,dr,ur)=>{dr.includes(ze)?ur(dr.filter(Vr=>Vr!==ze)):ur([...dr,ze])},jr=ze=>{Je(ze.target.value),he(1)};N.useEffect(()=>{Ft(),rr(),Oe.get("/api/vendors",{params:{companyId:bt,financialYear:Xt}}).then(ze=>S(ze.data)),Oe.get("/api/tax",{params:{companyId:bt,financialYear:Xt}}).then(ze=>ie(ze.data)),Oe.get("/api/locations",{params:{companyId:bt,financialYear:Xt}}).then(ze=>Vt(ze.data)),Oe.get("/api/general-conditions",{params:{companyId:bt,financialYear:Xt}}).then(ze=>{const dr=ze.data.filter(ur=>!ur.isDeleted).map(ur=>({_id:ur._id,name:ur.name,description:ur.description}));Be(dr)}),Oe.get("/api/processes",{params:{companyId:bt,financialYear:Xt}}).then(ze=>{const dr=ze.data.filter(ur=>!ur.isDeleted).map(ur=>({_id:ur._id,processId:ur.processId,processDescription:ur.processDescription}));ft(dr)})},[]);const Lt=e.map(ze=>{const ur=r.find(zs=>zs.materialId===ze.materialId)?.quantityAvailable||0;ze.safetyStock;const Vr=ze.maxstock||0,va=Math.abs(Vr-ur),en=Math.abs(Vr-ur);return{...ze,inventoryStock:ur,reorderPoint:va,reorderQuantity:en}}).filter(ze=>{if(!Nt)return!0;const dr=Nt.toLowerCase();return ze.materialId?.toLowerCase().includes(dr)||ze.description?.toLowerCase().includes(dr)||ze.minstock?.toString().includes(dr)||ze.maxstock?.toString().includes(dr)||ze.safetyStock?.toString().includes(dr)||ze.inventoryStock?.toString().includes(dr)||ze.reorderQuantity?.toString().includes(dr)}),fe=Math.ceil(Lt.length/ve),Me=(xe-1)*ve,Te=Me+ve,_e=Lt.slice(Me,Te),Fe=ze=>{ze>=1&&ze<=fe&&he(ze)},Ve=()=>{const ze=[];if(fe<=5)for(let ur=1;ur<=fe;ur++)ze.push(ur);else if(xe<=3)for(let ur=1;ur<=5;ur++)ze.push(ur);else if(xe>=fe-2)for(let ur=fe-5+1;ur<=fe;ur++)ze.push(ur);else for(let ur=xe-2;ur<=xe+2;ur++)ze.push(ur);return ze},mt=async()=>{if(u==="PO"){if(!D){alert("Please select a vendor for Purchase Order");return}if(!G){alert("Please select tax for Purchase Order");return}}console.log("modalMaterial",c);const ze=parseFloat(c.unitPrice)||0,dr=parseFloat(c.reorderQuantity)||0;if(u==="PE"){const ur=m.find(en=>en._id===M),Vr={materialId:c.materialId,description:c.description,qty:dr,baseUnit:c.baseUnit,orderUnit:c.orderUnit},va={indentIdType:U,categoryId:ur._id,categoryName:ur.name||ur.categoryName,location:H,buyerGroup:re,companyId:bt,financialYear:Xt,deliveryDate:b,documentDate:new Date().toISOString().split("T")[0],items:[Vr]};if(U==="external"){if(!Y.trim()){alert("Please enter External Indent ID");return}va.indentId=Y.trim()}try{const en=await Oe.post("/api/indent/create",va);alert(`Indent created with ID: ${en.data.indentId}`),wt()}catch(en){console.error("Indent creation failed",en),alert("Failed to create indent")}}else if(u==="PO"){const ur=v.find(on=>on._id===M._id),Vr=dr*ze;if(isNaN(Vr)){alert("Please enter valid quantity and unit price");return}const va=parseFloat(G?.cgst)||0,en=parseFloat(G?.sgst)||0,zs=parseFloat(G?.igst)||0,zn=Vr*va/100,fs=Vr*en/100,ks=Vr*zs/100,yt=zn+fs+ks,mr=parseFloat(X)||0,hr=Vr+yt-mr,Yr={materialId:c.materialId,description:c.description,quantity:dr,price:ze,baseUnit:c.baseUnit,orderUnit:c.orderUnit},Mr={companyId:bt,financialYear:Xt,categoryId:ur._id,category:ur.name||ur.categoryName,date:new Date().toISOString().split("T")[0],vendor:D,deliveryLocation:z||"",deliveryAddress:B||"",items:[Yr],notes:C||"",remarks:Qe||"",preparedby:dt||"",approvedby:xt||"",taxName:G?.taxName||"",cgst:zn,sgst:fs,igst:ks,taxDiscount:mr,finalTotal:hr,processes:Ne||[],generalConditions:se||[],poGenerationType:U};if(U==="external"){if(!Y.trim()){alert("Please enter External PO ID");return}Mr.poNumber=Y.trim()}console.log("PO Payload:",Mr);try{const on=await Oe.post("/api/purchase-orders",Mr);alert(`Purchase Order created with ID: ${on.data.poNumber}`),wt()}catch(on){console.error("Purchase Order creation failed",on),alert(`Failed to create Purchase Order: ${on.response?.data?.error||on.message}`)}}},wt=()=>{l(!1),d(null),V(""),ee(""),ae(""),y(""),oe(""),E(""),de(null),w(""),ue(""),ot(""),Tt(""),Le(""),K(""),Q(""),le(0)},nt=(ze,dr)=>{i(ur=>{const Vr={...ur};return Vr[`${ze}_PE`]=!1,Vr[`${ze}_PO`]=!1,Vr[`${ze}_${dr}`]=!0,Vr})};N.useEffect(()=>{Oe.get("/api/purchasecategory",{params:{companyId:bt,financialYear:Xt}}).then(ze=>p(ze.data)),Oe.get("/api/po-categories",{params:{companyId:bt,financialYear:Xt}}).then(ze=>g(ze.data))},[]);const St=()=>a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-search me-2"}),"Search Vendors"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:xr})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Search Vendor"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"fas fa-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by vendor name or code...",value:L,onChange:ze=>Ct(ze.target.value)})]})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsx("div",{className:"d-flex gap-2",children:a.jsxs("button",{className:"btn btn-info",onClick:Jt,children:[a.jsx("i",{className:"fas fa-list me-1"}),"View All"]})})]})]}),a.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:O.length>0?a.jsxs("table",{className:"table table-hover",children:[a.jsx("thead",{className:"table-light sticky-top",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Vendor Code"}),a.jsx("th",{children:"Vendor Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:O.map((ze,dr)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:ze.vnNo})}),a.jsx("td",{children:ze.name1}),a.jsx("td",{children:ze.email}),a.jsx("td",{children:ze.phone}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-success btn-sm",onClick:()=>ir(ze),children:[a.jsx("i",{className:"fas fa-check me-1"}),"Select"]})})]},dr))})]}):a.jsxs("div",{className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-search fa-3x text-muted mb-3"}),a.jsx("p",{className:"text-muted",children:L?`No vendors found matching "${L}"`:'Enter search term or click "View All"'})]})})]}),a.jsx("div",{className:"modal-footer",children:a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:xr,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})})]})})}),Ct=ze=>{if(P(ze),ze.trim()){const dr=k.filter(ur=>ur.vendorName.toLowerCase().includes(ze.toLowerCase())||ur.vendorCode.toLowerCase().includes(ze.toLowerCase()));Z(dr)}else Z([])},Jt=()=>{Z(k)},ir=ze=>{E(ze.name1||ze.vendorName),A(!1),P(""),Z([])},xr=()=>{A(!1),P(""),Z([])};return a.jsxs("div",{className:"content",children:[a.jsx("style",{children:`
.checkbox-radio {
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    width: 16px;
    height: 16px;
    border: 2px solid #ccc;
    border-radius: 3px;
    background-color: white;
    cursor: pointer;
    position: relative;
    vertical-align: middle;
}

.checkbox-radio:checked {
    background-color: #007bff;
    border-color: #007bff;
}

.checkbox-radio:checked::after {
    content: '✓';
    position: absolute;
    top: -2px;
    left: 2px;
    color: white;
    font-size: 12px;
    font-weight: bold;
}

.checkbox-radio:hover {
    border-color: #007bff;
}

.checkbox-radio:focus {
    outline: none;
    box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
}

.pagination-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin: 20px 0;
    flex-wrap: wrap;
    gap: 10px;
}

.pagination-info {
    color: #6c757d;
    font-size: 14px;
}

.pagination-controls .form-select {
    width: auto;
    min-width: 80px;
}

.page-item.active .page-link {
    background-color: #007bff;
    border-color: #007bff;
    color: white;
}

.page-link {
    color: #007bff;
    border: 1px solid #dee2e6;
    padding: 0.375rem 0.75rem;
}

.page-link:hover {
    color: #0056b3;
    background-color: #e9ecef;
    border-color: #dee2e6;
}

.page-item.disabled .page-link {
    color: #6c757d;
    background-color: #fff;
    border-color: #dee2e6;
}
`}),a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Material Requirements Planning"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Master"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Material Requirements Planning"})]})})]})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3",children:[a.jsx("div",{className:"d-flex align-items-center gap-2",children:a.jsxs("div",{className:"input-group",style:{width:"300px"},children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search materials...",value:Nt,onChange:jr})]})}),a.jsx("div",{})]})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered text-wrap",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Mat No"}),a.jsx("th",{children:"Mat Desc"}),a.jsx("th",{children:"Min Stock"}),a.jsx("th",{children:"Max Stock"}),a.jsx("th",{children:"Safety Stock"}),a.jsx("th",{children:"INV Stock"}),a.jsx("th",{children:"ROP"}),a.jsx("th",{className:"wrap-header",children:"PE"}),a.jsx("th",{style:{whiteSpace:"normal",wordWrap:"break-word"},children:"PO"}),a.jsx("th",{children:"Action"})]})}),a.jsxs("tbody",{children:[_e.map((ze,dr)=>a.jsxs("tr",{children:[a.jsx("td",{children:Me+dr+1}),a.jsx("td",{children:ze.materialId||"-"}),a.jsx("td",{children:ze.description||"-"}),a.jsx("td",{children:ze.minstock||0}),a.jsx("td",{children:ze.maxstock||0}),a.jsx("td",{children:ze.safetyStock||0}),a.jsx("td",{children:ze.inventoryStock}),a.jsx("td",{style:{backgroundColor:ze.inventoryStock<ze.safetyStock?ze.inventoryStock<ze.minstock?"red":"orange":"green",fontWeight:ze.reorderQuantity<ze.safetyStock?"bold":"normal"},children:ze.reorderQuantity}),a.jsx("td",{children:a.jsx("input",{type:"radio",name:`action_${ze.materialId}`,value:"PE",className:"checkbox-radio",checked:!!s[`${ze.materialId}_PE`],onChange:()=>nt(ze.materialId,"PE")})}),a.jsx("td",{children:a.jsx("input",{type:"radio",name:`action_${ze.materialId}`,value:"PO",className:"checkbox-radio",checked:!!s[`${ze.materialId}_PO`],onChange:()=>nt(ze.materialId,"PO")})}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>{const ur=s[`${ze.materialId}_PE`],Vr=s[`${ze.materialId}_PO`];if(!ur&&!Vr){alert("Please select PE or PO before creating.");return}h(ur?"PE":"PO"),d(ze),l(!0)},children:"Create"})})]},ze._id||dr)),_e.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"11",style:{textAlign:"center"},children:Nt?"No materials found matching your search criteria":"No materials found."})})]})]})})})]}),fe>1&&a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between mt-3",children:[a.jsx("div",{className:"text-muted"}),a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination mb-0",children:[a.jsx("li",{className:`page-item ${xe===1?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Previous",onClick:ze=>{ze.preventDefault(),xe>1&&Fe(xe-1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-left"})})})}),Ve().map(ze=>a.jsx("li",{className:`page-item ${xe===ze?"active":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);",onClick:dr=>{dr.preventDefault(),Fe(ze)},children:ze})},ze)),a.jsx("li",{className:`page-item ${xe===fe?"disabled":""}`,children:a.jsx("a",{className:"page-link",href:"javascript:void(0);","aria-label":"Next",onClick:ze=>{ze.preventDefault(),xe<fe&&Fe(xe+1)},children:a.jsx("span",{"aria-hidden":"true",children:a.jsx("i",{className:"fas fa-angle-right"})})})})]})})]}),o&&c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal show d-block",tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",children:["Create ",u==="PE"?"Purchase Enquiry":"Purchase Order"," for ",c.description]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("h6",{className:"text-primary mb-3",children:"Basic Information"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"ID Type"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",value:U,onChange:ze=>J(ze.target.value),children:[a.jsx("option",{value:"internal",children:"Internal"}),a.jsx("option",{value:"external",children:"External"})]})})]}),U==="external"&&a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsxs("label",{children:["External ",u," ID"]})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",className:"form-control",value:Y,onChange:ze=>oe(ze.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{children:"Buyer Group *"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"text",className:"form-control",value:re,onChange:ze=>ae(ze.target.value),placeholder:"Enter buyer group",required:!0})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"Delivery Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control",value:b,onChange:ze=>y(ze.target.value)})})]})]})]}),u==="PE"&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:"mb-4",children:[a.jsx("h6",{className:"text-success mb-3",children:"Purchase Enquiry Details"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{children:"PE Category"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",value:M,onChange:ze=>V(ze.target.value),children:[a.jsx("option",{value:"",children:"Select"}),m.map(ze=>a.jsx("option",{value:ze._id,children:ze.name||ze.categoryName},ze._id))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:H,onChange:ze=>ee(ze.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),At.map(ze=>a.jsx("option",{value:ze.name||ze.locationName||ze._id,children:ze.name||ze.locationName||ze._id},ze._id||ze.id||ze.name))]})})]})]})]})}),u==="PO"&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h6",{className:"text-info mb-3",children:"Purchase Order Details"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"PO Category:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:M?._id||"",onChange:ze=>{const dr=v.find(ur=>ur._id===ze.target.value);V(dr)},required:!0,children:[a.jsx("option",{value:"",children:"-- Select Category --"}),v.map(ze=>a.jsx("option",{value:ze._id,children:ze.categoryName||ze.name},ze._id))]})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"PO Number:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:Mt,readOnly:!0})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"PO Creating Date:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:ke,onChange:ze=>it(ze.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{children:"Unit Price *"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:c?.unitPrice||0,onChange:ze=>{const dr=parseFloat(ze.target.value)||0;d(ur=>({...ur,unitPrice:dr}))},placeholder:"Enter unit price",required:!0})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Vendor *"})}),a.jsx("div",{className:"col-xl-9",children:a.jsxs("div",{className:"input-group",children:[a.jsx("input",{className:"form-control form-control-sm",value:D,onChange:ze=>E(ze.target.value),placeholder:"Enter vendor name"}),a.jsx("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>A(!0),children:a.jsx("i",{className:"ti ti-search"})})]})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{children:"Tax *"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{className:"form-select",value:G?._id||"",onChange:ze=>{const dr=ne.find(ur=>ur._id===ze.target.value);de(dr)},children:[a.jsx("option",{value:"",children:"Select Tax"}),ne.map(ze=>a.jsx("option",{value:ze._id,children:ze.taxName},ze._id))]})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{children:"Discount"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{type:"number",className:"form-control",value:X,onChange:ze=>le(parseFloat(ze.target.value)||0),placeholder:"Enter discount amount"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Validity Date:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:Ie,onChange:ze=>Ke(ze.target.value)})})]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Conditions & Processes"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3",children:[a.jsx("label",{className:"form-label",children:"Select General Conditions"}),Xe.map(ze=>a.jsxs("div",{className:"d-flex align-items-center mb-1",children:[a.jsx("input",{type:"checkbox",className:"me-2",checked:se.includes(ze._id),onChange:()=>pr(ze._id,se,ye)}),a.jsx("label",{children:ze.name})]},ze._id))]}),a.jsxs("div",{className:"col-lg-3",children:[a.jsx("label",{className:"form-label",children:"Select Processes"}),qe.map(ze=>a.jsxs("div",{className:"d-flex align-items-center mb-1",children:[a.jsx("input",{type:"checkbox",className:"me-2",checked:Ne.includes(ze._id),onChange:()=>pr(ze._id,Ne,Ue)}),a.jsx("label",{children:ze.processDescription})]},ze._id))]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Delivery Information"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Location:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsxs("select",{className:"form-select",value:z,onChange:ze=>K(ze.target.value),children:[a.jsx("option",{value:"",children:"-- Select Location --"}),At.map(ze=>a.jsx("option",{value:ze.name||ze.locationName||ze._id,children:ze.name||ze.locationName||ze._id},ze._id||ze.id||ze.name))]})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{children:"Delivery Address"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("textarea",{className:"form-control",rows:"2",value:B,onChange:ze=>Q(ze.target.value),placeholder:"Enter delivery address"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control form-control-sm",value:Se,onChange:ze=>ue(ze.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-5",children:a.jsx("label",{className:"form-label",children:"Buyer Group:"})}),a.jsx("div",{className:"col-xl-7",children:a.jsx("input",{className:"form-control form-control-sm",value:re,onChange:ze=>ae(ze.target.value)})})]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Authorization"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Prepared By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:dt,onChange:ze=>Tt(ze.target.value)})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Approved By:"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{className:"form-control",value:xt,onChange:ze=>Le(ze.target.value)})})]})]}),a.jsx("h6",{className:"text-secondary mt-4 mb-3",children:"Additional Information"}),a.jsxs("div",{className:"row gap-2",children:[a.jsxs("div",{className:"col-lg-4 row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Payment:"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("textarea",{className:"form-control form-control-sm",value:Ge,onChange:ze=>lt(ze.target.value),maxLength:"250"})})]}),a.jsxs("div",{className:"col-lg-3 row",children:[a.jsx("div",{className:"col-xl-4",children:a.jsx("label",{className:"form-label",children:"Remarks:"})}),a.jsx("div",{className:"col-xl-8",children:a.jsx("input",{className:"form-control",value:Qe,onChange:ze=>ot(ze.target.value)})})]}),a.jsxs("div",{className:"col-xl-3 row form-group",children:[a.jsx("div",{className:"col-xl-2",children:a.jsx("label",{children:"Notes"})}),a.jsx("div",{className:"col-xl-10",children:a.jsx("textarea",{className:"form-control",rows:"2",value:C,onChange:ze=>w(ze.target.value),placeholder:"Enter notes"})})]})]})]})]}),a.jsxs("div",{className:"modal-footer gap-2",children:[a.jsx("button",{className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:mt,children:["Create ",u==="PE"?"Purchase Enquiry":"Purchase Order"]})]})]})})})]}),T&&a.jsx(St,{})]})}function VDe(){const[e,t]=N.useState({type:"vendor",recordId:"",selectedRecord:null,paymentAmount:"",paymentMethod:"cash",description:"",docnumber:""}),r=localStorage.getItem("selectedCompanyId"),n=localStorage.getItem("financialYear"),s=localStorage.getItem("selectedCompanyId"),[i,o]=N.useState([]),[l,c]=N.useState([]),[d,u]=N.useState(!1),[h,m]=N.useState({type:"",text:""}),[p,v]=N.useState("");N.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Oe.get("/api/invoiceform",{params:{companyId:r,financialYear:n}}),T=await Oe.get("/api/billingform",{params:{companyId:r,financialYear:n}});o(E.data||[]),c(T.data||[])}catch(E){console.error("Error fetching invoices",E)}},b=()=>(e.type==="vendor"?i:l).filter(T=>{const A=e.type==="vendor"?T.vendor||"":T.salesOrderId?.customer||"",L=T.docnumber||"",P=A.toLowerCase().includes(p.toLowerCase())||L.toLowerCase().includes(p.toLowerCase()),O=(T.balance||0)>0;return P&&O}),y=E=>{t(T=>({...T,recordId:E._id||E.id,selectedRecord:E,docnumber:E.docnumber||""}))},C=E=>{const{name:T,value:A}=E.target;T==="type"?(t(L=>({...L,[T]:A,recordId:"",selectedRecord:null,docnumber:""})),v("")):t(L=>({...L,[T]:A}))},w=()=>{if(!e.selectedRecord||!e.paymentAmount)return null;const E=e.selectedRecord.balance||0,T=parseFloat(e.paymentAmount);return E.toFixed(2)-T.toFixed(2)},k=async E=>{E.preventDefault(),u(!0),m({type:"",text:""});try{if(!e.selectedRecord)throw new Error("Please select a record to update");const T=parseFloat(e.paymentAmount),A=e.selectedRecord.balance||0,L=A-T,P={balance:L,lastPaymentAmount:T,companyId:s,financialYear:n,lastPaymentDocNumber:e.docnumber||"",lastPaymentMethod:e.paymentMethod,paymentDescription:e.description||`Payment via ${e.paymentMethod}`},O=e.type==="vendor"?`/api/invoiceform/${e.recordId}`:`/api/billingform/${e.recordId}`;await Oe.put(O,P);const Z=e.type==="vendor"?e.selectedRecord.vendor||"Unknown Vendor":e.selectedRecord.salesOrderId?.customer||e.selectedRecord.customer||"Unknown Customer",z={recordType:e.type,recordId:e.recordId,docnumber:e.docnumber,entityName:Z,paymentAmount:T,companyId:s,financialYear:n,previousBalance:A,newBalance:L,paymentMethod:e.paymentMethod,description:e.description,paymentDate:new Date().toISOString()};console.log("Payment History Payload:",z);try{const K=await Oe.post("/api/payment",z);console.log("Payment history saved successfully:",K.data)}catch(K){console.error("Payment history save failed:",K),console.error("Error details:",K.response?.data),m({type:"warning",text:`Payment updated successfully, but payment history could not be saved. Error: ${K.response?.data?.message||K.message}`})}h.text||m({type:"success",text:`Payment of ₹${T} recorded successfully for ${Z}. New balance: ₹${L.toFixed(2)}`}),await g(),t({type:"vendor",recordId:"",selectedRecord:null,paymentAmount:"",paymentMethod:"cash",description:"",docnumber:""}),v("")}catch(T){console.error("Error recording payment",T),m({type:"error",text:T.response?.data?.message||T.message||"Failed to record payment. Please try again."})}finally{u(!1)}},S=b(),D=w();return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Record Payment"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/ledger",children:"Ledger"})}),a.jsx("li",{className:"breadcrumb-item",children:"Payment"})]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header text-white",children:a.jsx("h5",{className:"mb-0",children:"Update Balance with Payment"})}),a.jsxs("div",{className:"card-body",children:[h.text&&a.jsxs("div",{className:`alert alert-${h.type==="success"?"success":"danger"} alert-dismissible`,children:[h.text,a.jsx("button",{type:"button",className:"btn-close",onClick:()=>m({type:"",text:""})})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Type *"}),a.jsxs("select",{className:"form-select",name:"type",value:e.type,onChange:C,children:[a.jsx("option",{value:"vendor",children:"Vendor Payment"}),a.jsx("option",{value:"customer",children:"Customer Payment"})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Search Records"}),a.jsx("input",{type:"text",className:"form-control",placeholder:`Search by ${e.type} name or document number...`,value:p,onChange:E=>v(E.target.value)})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Select Record to Update *"}),a.jsx("div",{className:"border rounded",style:{maxHeight:"300px",overflowY:"auto"},children:S.length===0?a.jsx("div",{className:"p-3 text-muted text-center",children:"No records found"}):S.map(E=>{const T=e.type==="vendor"?E.vendor:E?.customer,A=e.recordId===(E._id||E.id);return a.jsx("div",{className:`p-3 border-bottom cursor-pointer ${A?"bg-primary text-white":"bg-light"}`,onClick:()=>y(E),style:{cursor:"pointer"},children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("strong",{children:T||"Unknown"}),a.jsx("br",{}),a.jsxs("small",{children:["Doc: ",E.docnumber||"N/A"]})]}),a.jsxs("div",{className:"text-end",children:[a.jsxs("strong",{children:["₹",(E.balance||0).toFixed(2)]}),a.jsx("br",{}),a.jsx("small",{children:"Balance"})]})]})},E._id||E.id)})})]})]}),a.jsx("div",{className:"col-md-6",children:a.jsxs("form",{onSubmit:k,children:[e.selectedRecord&&a.jsxs("div",{className:"alert alert-info mb-3",children:[a.jsx("h6",{children:"Selected Record:"}),a.jsx("p",{className:"mb-1",children:a.jsxs("strong",{children:[e.type==="vendor"?e.selectedRecord.vendor:e.selectedRecord.customer,console.log(e.selectedRecord.customer)]})}),a.jsxs("p",{className:"mb-1",children:["Document: ",e.selectedRecord.docnumber]}),a.jsxs("p",{className:"mb-0",children:["Current Balance: ",a.jsxs("strong",{children:["₹",(e.selectedRecord.balance||0).toFixed(2)]})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{htmlFor:"paymentAmount",className:"form-label",children:"Payment Amount *"}),a.jsxs("div",{className:"input-group",children:[a.jsx("span",{className:"input-group-text",children:a.jsx("i",{className:"ti ti-currency-rupee"})}),a.jsx("input",{type:"number",id:"paymentAmount",className:`form-control ${parseFloat(e?.paymentAmount)>parseFloat(e?.selectedRecord?.balance||0)?"is-invalid":""}`,name:"paymentAmount",value:e.paymentAmount,onChange:C,placeholder:"0.00",min:"0",step:"0.01",required:!0,max:e?.selectedRecord?.balance,disabled:!e.selectedRecord}),parseFloat(e.paymentAmount)>parseFloat(e?.selectedRecord?.balance||0)&&a.jsxs("div",{className:"invalid-feedback",children:["Amount cannot exceed current balance of ₹",(e?.selectedRecord?.balance||0).toFixed(2)]})]}),D!==null&&a.jsxs("small",{className:"text-muted mt-1 d-block",children:["New balance will be: ",a.jsxs("strong",{children:["₹",D.toFixed(2)]})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Payment Method *"}),a.jsxs("select",{className:"form-select",name:"paymentMethod",value:e.paymentMethod,onChange:C,required:!0,children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"cheque",children:"Cheque"}),a.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),a.jsx("option",{value:"upi",children:"UPI"}),a.jsx("option",{value:"card",children:"Card"})]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",name:"description",value:e.description,onChange:C,rows:"3",placeholder:"Payment description or notes..."})]}),a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>window.history.back(),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:d||!e.selectedRecord||!e.paymentAmount,children:d?"Updating...":"Update Balance"})]})]})})]})]})]})})})]})}function qDe(){const[e,t]=N.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState({}),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear"),u=()=>{let D={};const E=/^\d{6}$/;return D.categoryName=e.categoryName?"":"Required",D.rangeFrom=e.rangeFrom?E.test(e.rangeFrom)?"":"Must be 6 digits":"Required",D.rangeTo=e.rangeTo?E.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be ≥ Range From":"Must be 6 digits":"Required",l(D),Object.values(D).every(T=>T==="")},h=D=>{t({...e,[D.target.name]:D.target.value})},m=async D=>{if(D.preventDefault(),!!u())try{s?(await Oe.put(`/api/purchase-contract-categories/${s}`,e),alert("Purchase contract category updated successfully!")):(await Oe.post("/api/purchase-contract-categories",e),alert("Purchase contract category added successfully!")),p(),g()}catch(E){console.error("Error saving purchase contract category:",E),alert("Error saving purchase contract category. Please try again.")}},p=async()=>{try{const D=await Oe.get("/api/purchase-contract-categories",{params:{companyId:c,financialYear:d}});n(D.data)}catch(D){console.error("Error fetching purchase contract categories:",D)}},v=D=>{t(D),i(D._id),l({})},g=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};N.useEffect(()=>{p()},[]);const[b,y]=N.useState(!1),C=()=>y(!0),w=()=>y(!1),[k,S]=N.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-1",children:a.jsxs("div",{className:"my-auto ",children:[a.jsx("h2",{className:"",children:"Purchase Contract Categories"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Purchase"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contract Categories"})]})})]})}),a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{C()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"New Contract Category"]})})})]}),b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"contractCategoryModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header ",children:[a.jsxs("h4",{className:"modal-title",id:"contractCategoryModalLabel",children:[s?"Edit":"Create"," Purchase Contract Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{w(),g()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:m,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Category Name ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:h,className:`form-control ${o.categoryName?"is-invalid":""}`,placeholder:"Enter category name (e.g., Procurement Contracts)"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range From ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:D=>{D.target.value=D.target.value.replace(/[^0-9]/g,""),h(D)},className:`form-control ${o.rangeFrom?"is-invalid":""}`,placeholder:"Enter start range (6 digits)",min:"100000",maxLength:6,max:"999999"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range To ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeTo",type:"text",className:`form-control ${o.rangeTo?"is-invalid":""}`,value:e.rangeTo,onChange:D=>{D.target.value=D.target.value.replace(/[^0-9]/g,""),h(D)},placeholder:"Enter end range (6 digits)",min:"100000",maxLength:6,max:"999999"})]})]}),a.jsx("div",{className:"d-flex gap-2 justify-content-end",children:a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((D,E)=>a.jsxs("tr",{children:[a.jsx("td",{children:E+1}),a.jsx("td",{children:D.categoryName}),a.jsx("td",{children:D.rangeFrom?.toLocaleString()}),a.jsx("td",{children:D.rangeTo?.toLocaleString()}),a.jsx("td",{children:a.jsx("div",{className:"d-flex gap-1",children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{v(D),C()},title:"Edit Category",children:"Edit"})})})]},D._id))})]})})})})]})}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var qW=function(e,t){return(qW=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])})(e,t)};function Ud(e,t){function r(){this.constructor=e}qW(e,t),e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function Pr(e,t,r,n){return new(r||(r=Promise))(function(s,i){function o(d){try{c(n.next(d))}catch(u){i(u)}}function l(d){try{c(n.throw(d))}catch(u){i(u)}}function c(d){d.done?s(d.value):new r(function(u){u(d.value)}).then(o,l)}c((n=n.apply(e,[])).next())})}function Or(e,t){var r,n,s,i,o={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function l(c){return function(d){return function(u){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(s=2&u[0]?n.return:u[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,u[1])).done)return s;switch(n=0,s&&(u=[2&u[0],s.value]),u[0]){case 0:case 1:s=u;break;case 4:return o.label++,{value:u[1],done:!1};case 5:o.label++,n=u[1],u=[0];continue;case 7:u=o.ops.pop(),o.trys.pop();continue;default:if(!(s=(s=o.trys).length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){o=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){o.label=u[1];break}if(u[0]===6&&o.label<s[1]){o.label=s[1],s=u;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(u);break}s[2]&&o.ops.pop(),o.trys.pop();continue}u=t.call(e,o)}catch(h){u=[6,h],n=0}finally{r=s=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([c,d])}}}var zDe=function(){function e(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(t,r){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+r+"."),this.platformName=t,this.platform=r},e.prototype.registerFlag=function(t,r,n){if(this.flagRegistry[t]={evaluationFn:r,setHook:n},this.urlFlags[t]!=null){var s=this.urlFlags[t];console.warn("Setting feature override from URL "+t+": "+s+"."),this.set(t,s)}},e.prototype.get=function(t){return t in this.flags?this.flags[t]:(this.flags[t]=this.evaluateFlag(t),this.flags[t])},e.prototype.getNumber=function(t){return this.get(t)},e.prototype.getBool=function(t){return this.get(t)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(t,r){if(this.flagRegistry[t]==null)throw new Error("Cannot set flag "+t+" as it has not been registered.");this.flags[t]=r,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(r)},e.prototype.evaluateFlag=function(t){if(this.flagRegistry[t]==null)throw new Error("Cannot evaluate flag '"+t+"': no evaluation function found.");return this.flagRegistry[t].evaluationFn()},e.prototype.setFlags=function(t){this.flags=Object.assign({},t)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var t=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var r,n,s=(r=this.global.location.search,n={},r.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(i){for(var o=[],l=1;l<arguments.length;l++)o[l-1]=arguments[l];return HDe(n,o[0],o[1]),o.join("=")}),n);"tfjsflags"in s&&s.tfjsflags.split(",").forEach(function(i){var o=i.split(":"),l=o[0],c=o[1];t.urlFlags[l]=function(d,u){if((u=u.toLowerCase())==="true"||u==="false")return u==="true";if(""+ +u===u)return+u;throw new Error("Could not parse value flag value "+u+" for flag "+d+".")}(l,c)})}},e}();function HDe(e,t,r){e[decodeURIComponent(t)]=decodeURIComponent(r||"")}function zt(){return zW}var zW=null,Yw=new Map,F5=new Map;function HW(e,t){var r=GW(e,t);return Yw.get(r)}function WDe(e){return F5.get(e)}function V8(e){for(var t=Yw.entries(),r=[];;){var n=t.next(),s=n.done,i=n.value;if(s)break;var o=i[0],l=i[1];o.split("_")[0]===e&&r.push(l)}return r}function WW(e){var t=e.kernelName,r=e.backendName,n=GW(t,r);if(Yw.has(n))throw new Error("The kernel '"+t+"' for backend '"+r+"' is already registered");Yw.set(n,e)}function GDe(e){var t=e.kernelName;F5.has(t)&&console.warn("Overriding the gradient for '"+t+"'"),F5.set(t,e)}function GW(e,t){return t+"_"+e}function L5(e,t,r){return Math.max(e,Math.min(t,r))}function YW(e){return e%2==0?e:e+1}function YDe(e){for(var t=0,r=0;r<e.length;r++)t+=e[r];return t}function He(e,t){if(!e)throw new Error(typeof t=="string"?t:t())}function un(e,t,r){r===void 0&&(r=""),He(Ei(e,t),function(){return r+" Shapes "+e+" and "+t+" must match"})}function ug(e){He(e!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function F0(e,t,r){if(t===void 0&&(t=[]),r===void 0&&(r=!1),t==null&&(t=[]),Array.isArray(e)||Uu(e)&&!r)for(var n=0;n<e.length;++n)F0(e[n],t,r);else t.push(e);return t}function Fr(e){if(e.length===0)return 1;for(var t=e[0],r=1;r<e.length;r++)t*=e[r];return t}function Ei(e,t){if(e===t)return!0;if(e==null||t==null||e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Vs(e){return e%1==0}function KDe(e){if(Math.tanh!=null)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function B5(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function d0(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function q8(e,t,r){return t===void 0&&(t=function(n){return 0}),new Promise(function(n,s){var i=0,o=function(){if(e())n();else{i++;var l=t(i);r!=null&&i>=r?s():setTimeout(o,l)}};o()})}function XDe(e,t){for(var r=1,n=-1,s=0;s<e.length;++s)if(e[s]>=0)r*=e[s];else if(e[s]===-1){if(n!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+n+" and dim "+s);n=s}else if(e[s]<0)throw Error("Shapes can not be < 0. Found "+e[s]+" at dim "+s);if(n===-1){if(t>0&&t!==r)throw Error("Size("+t+") must match the product of shape "+e);return e}if(r===0)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%r!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+r);var i=e.slice();return i[n]=t/r,i}function xi(e,t){var r=t.length;return He((e=e==null?t.map(function(n,s){return s}):[].concat(e)).every(function(n){return n>=-r&&n<r}),function(){return"All values in axis param must be in range [-"+r+", "+r+") but got axis "+e}),He(e.every(function(n){return Vs(n)}),function(){return"All values in axis param must be integers but got axis "+e}),e.map(function(n){return n<0?r+n:n})}function $p(e,t){for(var r=[],n=[],s=t!=null&&Array.isArray(t)&&t.length===0,i=t==null||s?null:xi(t,e).sort(),o=0,l=0;l<e.length;++l){if(i!=null){if(i[o]===l&&e[l]!==1)throw new Error("Can't squeeze axis "+l+" since its dim '"+e[l]+"' is not 1");(i[o]==null||i[o]>l)&&e[l]===1&&(r.push(e[l]),n.push(l)),i[o]<=l&&o++}e[l]!==1&&(r.push(e[l]),n.push(l))}return{newShape:r,keptDims:n}}function _y(e,t){var r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else{if(e!=="bool")throw new Error("Unknown data type "+e);r=new Uint8Array(t)}return r}function Kw(e,t){var r=null;if(e==null||e==="float32")r=new Float32Array(t);else if(e==="int32")r=new Int32Array(t);else if(e==="bool")r=new Uint8Array(t);else{if(e!=="string")throw new Error("Unknown data type "+e);r=new Array(t)}return r}function QDe(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(isNaN(n)||!isFinite(n))throw Error("A tensor of type "+t+" being uploaded contains "+n+".")}}function JDe(e){return e==="bool"||e==="complex64"||e==="float32"||e==="int32"||e==="string"}function ZDe(e,t){return t!=="complex64"&&(t!=="float32"||e==="complex64")&&(t!=="int32"||e==="float32"||e==="complex64")&&(t!=="bool"||e!=="bool")}function Uu(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function KW(e){if(e==="float32"||e==="int32")return 4;if(e==="complex64")return 8;if(e==="bool")return 1;throw new Error("Unknown dtype "+e)}function e5e(e){if(e==null)return 0;var t=0;return e.forEach(function(r){return t+=r.length}),t}function m4(e){return typeof e=="string"||e instanceof String}function t5e(e){return typeof e=="boolean"}function r5e(e){return typeof e=="number"}function u1(e){return Array.isArray(e)?u1(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":r5e(e)?"float32":m4(e)?"string":t5e(e)?"bool":"float32"}function U5(e){return!!(e&&e.constructor&&e.call&&e.apply)}function $5(e,t){for(var r=t;r<e;++r)if(e%r==0)return r;return e}function $u(e){var t=e.length;if(t<2)return[];var r=new Array(t-1);r[t-2]=e[t-1];for(var n=t-3;n>=0;--n)r[n]=r[n+1]*e[n+1];return r}function XW(e,t,r){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=F0(e)),r&&QDe(e,t),function(i,o){return i instanceof Float32Array&&o==="float32"||i instanceof Int32Array&&o==="int32"||i instanceof Uint8Array&&o==="bool"}(e,t))return e;if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool"){for(var n=new Uint8Array(e.length),s=0;s<n.length;++s)Math.round(e[s])!==0&&(n[s]=1);return n}throw new Error("Unknown data type "+t)}function z8(e,t){if(e.length===0)return t[0];var r=e.reduce(function(n,s){return n*s});if(r===0)return[];if(r!==t.length)throw new Error("["+e+"] does not match the input size.");return function n(s,i,o){var l=new Array;if(i.length===1)for(var c=i[0],d=0;d<c;d++)l[d]=o[s+d];else{c=i[0];var u=i.slice(1),h=u.reduce(function(m,p){return m*p});for(d=0;d<c;d++)l[d]=n(s+d*h,u,o)}return l}(0,e,t)}function QW(e,t){for(var r=h1(e,t),n=0;n<r.length;n++)r[n]=1;return r}function h1(e,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(e);if(t==="int32")return new Int32Array(e);if(t==="bool")return new Uint8Array(e);throw new Error("Unknown data type "+t)}function ku(){return zt().platform.now()}function JW(e){e.forEach(function(t){He(Number.isInteger(t)&&t>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."})})}function a5e(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",zt().platform.encode(e,t)}function Xw(e,t){return t===void 0&&(t="utf-8"),t=t||"utf-8",zt().platform.decode(e,t)}function H8(e,t,r){if(t===0)return 0;if(t===1)return e[0];for(var n=e[e.length-1],s=0;s<e.length-1;++s)n+=r[s]*e[s];return n}function n5e(e,t,r){if(t===0)return[];if(t===1)return[e];for(var n=new Array(t),s=0;s<n.length-1;++s)n[s]=Math.floor(e/r[s]),e-=n[s]*r[s];return n[n.length-1]=e,n}var s5e=function(){function e(t,r){this.backendTimer=t,this.logger=r,r==null&&(this.logger=new i5e)}return e.prototype.profileKernel=function(t,r,n){var s,i=this,o=this.backendTimer.time(function(){s=n()});return s.forEach(function(l){l.data().then(function(c){(function(d,u,h){if(u!=="float32")return!1;for(var m=0;m<d.length;m++){var p=d[m];if(isNaN(p)||!isFinite(p))return console.warn("Found "+p+" in the result of '"+h+"'"),!0}})(c,l.dtype,t),o.then(function(d){var u="";d.getExtraProfileInfo!=null&&(u=d.getExtraProfileInfo()),i.logger.logKernelProfile(t,l,c,d.kernelMs,r,u)})})}),s},e}(),i5e=function(){function e(){}return e.prototype.logKernelProfile=function(t,r,n,s,i,o){var l=typeof s=="number"?d0(s+"ms",9):s.error,c=d0(t,25),d=r.rank,u=r.size,h=d0(r.shape.toString(),14),m="";for(var p in i){var v=i[p].shape||r.shape,g=v.length;m+=p+": "+g+"D "+(g>0?v:"")+" "}console.log("%c"+c+"	%c"+l+"	%c"+d+"D "+h+"	%c"+u+"	%c"+m+"	%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),W8=20,gb=3,wE=7;function o5e(e,t,r,n){var s=$u(t),i=function(d,u,h,m){var p=Fr(u),v=m[m.length-1],g=new Array(v).fill(0),b=u.length,y=h==="complex64"?yb(d):d;if(b>1)for(var C=0;C<p/v;C++)for(var w=C*v,k=0;k<v;k++)g[k]=Math.max(g[k],bb(y[w+k],0,h).length);return g}(e,t,r,s),o=t.length,l=function d(u,h,m,p,v,g){g===void 0&&(g=!0);var b=m==="complex64"?2:1,y=h[0],C=h.length;if(C===0)return m==="complex64"?[bb(yb(u)[0],0,m)]:m==="bool"?[ZW(u[0])]:[u[0].toString()];if(C===1){if(y>W8){var w=gb*b,k=Array.from(u.slice(0,w)),S=Array.from(u.slice((y-gb)*b,y*b));return m==="complex64"&&(k=yb(k),S=yb(S)),["["+k.map(function(K,B){return bb(K,v[B],m)}).join(", ")+", ..., "+S.map(function(K,B){return bb(K,v[y-gb+B],m)}).join(", ")+"]"]}return["["+(m==="complex64"?yb(u):Array.from(u)).map(function(K,B){return bb(K,v[B],m)}).join(", ")+"]"]}var D=h.slice(1),E=p.slice(1),T=p[0]*b,A=[];if(y>W8){for(var L=0;L<gb;L++){var P=(O=L*T)+T;A.push.apply(A,d(u.slice(O,P),D,m,E,v,!1))}for(A.push("..."),L=y-gb;L<y;L++)P=(O=L*T)+T,A.push.apply(A,d(u.slice(O,P),D,m,E,v,L===y-1))}else for(L=0;L<y;L++){var O;P=(O=L*T)+T,A.push.apply(A,d(u.slice(O,P),D,m,E,v,L===y-1))}var Z=C===2?",":"";for(A[0]="["+A[0]+Z,L=1;L<A.length-1;L++)A[L]=" "+A[L]+Z;var z=`,
`;for(L=2;L<C;L++)z+=`
`;return A[A.length-1]=" "+A[A.length-1]+"]"+(g?"":z),A}(e,t,r,s,i),c=["Tensor"];return n&&(c.push("  dtype: "+r),c.push("  rank: "+o),c.push("  shape: ["+t+"]"),c.push("  values:")),c.push(l.map(function(d){return"    "+d}).join(`
`)),c.join(`
`)}function bb(e,t,r){return d0(Array.isArray(e)?parseFloat(e[0].toFixed(wE))+" + "+parseFloat(e[1].toFixed(wE))+"j":m4(e)?"'"+e+"'":r==="bool"?ZW(e):parseFloat(e.toFixed(wE)).toString(),t)}function ZW(e){return e===0?"false":"true"}function yb(e){for(var t=[],r=0;r<e.length;r+=2)t.push([e[r],e[r+1]]);return t}var Ey=function(){function e(t,r,n){var s=this;if(this.dtype=r,this.shape=t.slice(),this.size=Fr(t),n!=null){var i=n.length;He(i===this.size,function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+s.size+"'."})}if(r==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Kw(r,this.size),this.strides=$u(t)}return e.prototype.set=function(t){for(var r=this,n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];n.length===0&&(n=[0]),He(n.length===this.rank,function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+r.rank+")"});var i=this.locToIndex(n);this.values[i]=t},e.prototype.get=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];t.length===0&&(t=[0]);for(var n=0,s=0,i=t;s<i.length;s++){var o=i[s];if(o<0||o>=this.shape[n]){var l="Requested out of range element at "+t+".   Buffer shape="+this.shape;throw new Error(l)}n++}for(var c=t[t.length-1],d=0;d<t.length-1;++d)c+=this.strides[d]*t[d];return this.values[c]},e.prototype.locToIndex=function(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];for(var r=t[t.length-1],n=0;n<t.length-1;++n)r+=this.strides[n]*t[n];return r},e.prototype.indexToLoc=function(t){if(this.rank===0)return[];if(this.rank===1)return[t];for(var r=new Array(this.shape.length),n=0;n<r.length-1;++n)r[n]=Math.floor(t/this.strides[n]),t-=r[n]*this.strides[n];return r[r.length-1]=t,r},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return Eu().makeTensor(this.values,this.shape,this.dtype)},e}(),Eu=null,Bt=null,eG=null,os=function(){function e(t,r,n,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=r||"float32",this.size=Fr(t),this.strides=$u(t),this.dataId=n,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}return e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),He(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(t,r){return this.throwIfDisposed(),this.reshape([t,r])},e.prototype.as3D=function(t,r,n){return this.throwIfDisposed(),this.reshape([t,r,n])},e.prototype.as4D=function(t,r,n,s){return this.throwIfDisposed(),this.reshape([t,r,n,s])},e.prototype.as5D=function(t,r,n,s,i){return this.throwIfDisposed(),this.reshape([t,r,n,s,i])},e.prototype.asType=function(t){return this.throwIfDisposed(),Bt.cast(this,t)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return t=r.sent(),[2,Bt.buffer(this.shape,this.dtype,t)]}})})},e.prototype.bufferSync=function(){return Bt.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){switch(r.label){case 0:return[4,this.data()];case 1:return t=r.sent(),[2,z8(this.shape,t)]}})})},e.prototype.arraySync=function(){return z8(this.shape,this.dataSync())},e.prototype.data=function(){return Pr(this,void 0,void 0,function(){var t,r;return Or(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),t=Eu().read(this.dataId),this.dtype!=="string"?[3,2]:[4,t];case 1:r=n.sent();try{return[2,r.map(function(s){return Xw(s)})]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,t]}})})},e.prototype.dataSync=function(){this.throwIfDisposed();var t=Eu().readSync(this.dataId);if(this.dtype==="string")try{return t.map(function(r){return Xw(r)})}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t},e.prototype.bytes=function(){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),[4,Eu().read(this.dataId)];case 1:return t=r.sent(),this.dtype==="string"?[2,t]:[2,new Uint8Array(t.buffer)]}})})},e.prototype.dispose=function(){this.isDisposed||(Eu().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(t){return t===void 0&&(t=!1),Bt.print(this,t)},e.prototype.reshape=function(t){return this.throwIfDisposed(),Bt.reshape(this,t)},e.prototype.reshapeAs=function(t){return this.throwIfDisposed(),this.reshape(t.shape)},e.prototype.expandDims=function(t){return t===void 0&&(t=0),Bt.expandDims(this,t)},e.prototype.cumsum=function(t,r,n){return t===void 0&&(t=0),r===void 0&&(r=!1),n===void 0&&(n=!1),Bt.cumsum(this,t,r,n)},e.prototype.squeeze=function(t){return this.throwIfDisposed(),Bt.squeeze(this,t)},e.prototype.clone=function(){return this.throwIfDisposed(),Bt.clone(this)},e.prototype.oneHot=function(t,r,n){return this.throwIfDisposed(),Bt.oneHot(this,t,r,n)},e.prototype.toString=function(t){return t===void 0&&(t=!1),o5e(this.dataSync(),this.shape,this.dtype,t)},e.prototype.tile=function(t){return this.throwIfDisposed(),Bt.tile(this,t)},e.prototype.gather=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),Bt.gather(this,t,r)},e.prototype.matMul=function(t,r,n){return r===void 0&&(r=!1),n===void 0&&(n=!1),this.throwIfDisposed(),Bt.matMul(this,t,r,n)},e.prototype.dot=function(t){return this.throwIfDisposed(),Bt.dot(this,t)},e.prototype.norm=function(t,r,n){return t===void 0&&(t="euclidean"),r===void 0&&(r=null),n===void 0&&(n=!1),this.throwIfDisposed(),Bt.norm(this,t,r,n)},e.prototype.slice=function(t,r){return this.throwIfDisposed(),Bt.slice(this,t,r)},e.prototype.reverse=function(t){return this.throwIfDisposed(),Bt.reverse(this,t)},e.prototype.concat=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),Bt.concat([this].concat(t),r)},e.prototype.split=function(t,r){return r===void 0&&(r=0),this.throwIfDisposed(),Bt.split(this,t,r)},e.prototype.stack=function(t,r){return r===void 0&&(r=0),Bt.stack([this,t],r)},e.prototype.unstack=function(t){return t===void 0&&(t=0),Bt.unstack(this,t)},e.prototype.pad=function(t,r){return r===void 0&&(r=0),Bt.pad(this,t,r)},e.prototype.batchNormalization=function(t,r,n,s,i){return n===void 0&&(n=.001),eG("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(t,r,i,s,n)},e.prototype.batchNorm=function(t,r,n,s,i){return i===void 0&&(i=.001),this.throwIfDisposed(),Bt.batchNorm(this,t,r,n,s,i)},e.prototype.all=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Bt.all(this,t,r)},e.prototype.any=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Bt.any(this,t,r)},e.prototype.logSumExp=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Bt.logSumExp(this,t,r)},e.prototype.sum=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Bt.sum(this,t,r)},e.prototype.prod=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Bt.prod(this,t,r)},e.prototype.mean=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Bt.mean(this,t,r)},e.prototype.min=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Bt.min(this,t,r)},e.prototype.max=function(t,r){return t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),Bt.max(this,t,r)},e.prototype.argMin=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Bt.argMin(this,t)},e.prototype.argMax=function(t){return t===void 0&&(t=null),this.throwIfDisposed(),Bt.argMax(this,t)},e.prototype.cast=function(t){return this.throwIfDisposed(),Bt.cast(this,t)},e.prototype.add=function(t){return this.throwIfDisposed(),Bt.add(this,t)},e.prototype.addStrict=function(t){return this.throwIfDisposed(),Bt.addStrict(this,t)},e.prototype.atan2=function(t){return this.throwIfDisposed(),Bt.atan2(this,t)},e.prototype.sub=function(t){return this.throwIfDisposed(),Bt.sub(this,t)},e.prototype.subStrict=function(t){return this.throwIfDisposed(),Bt.subStrict(this,t)},e.prototype.pow=function(t){return this.throwIfDisposed(),Bt.pow(this,t)},e.prototype.powStrict=function(t){return this.throwIfDisposed(),Bt.powStrict(this,t)},e.prototype.mul=function(t){return this.throwIfDisposed(),Bt.mul(this,t)},e.prototype.mulStrict=function(t){return this.throwIfDisposed(),Bt.mulStrict(this,t)},e.prototype.div=function(t){return this.throwIfDisposed(),Bt.div(this,t)},e.prototype.divNoNan=function(t){return this.throwIfDisposed(),Bt.divNoNan(this,t)},e.prototype.floorDiv=function(t){return this.throwIfDisposed(),Bt.floorDiv(this,t)},e.prototype.divStrict=function(t){return this.throwIfDisposed(),Bt.divStrict(this,t)},e.prototype.minimum=function(t){return this.throwIfDisposed(),Bt.minimum(this,t)},e.prototype.minimumStrict=function(t){return this.throwIfDisposed(),Bt.minimumStrict(this,t)},e.prototype.maximum=function(t){return this.throwIfDisposed(),Bt.maximum(this,t)},e.prototype.maximumStrict=function(t){return this.throwIfDisposed(),Bt.maximumStrict(this,t)},e.prototype.mod=function(t){return this.throwIfDisposed(),Bt.mod(this,t)},e.prototype.modStrict=function(t){return this.throwIfDisposed(),Bt.modStrict(this,t)},e.prototype.squaredDifferenceStrict=function(t){return this.throwIfDisposed(),Bt.squaredDifferenceStrict(this,t)},e.prototype.transpose=function(t){return this.throwIfDisposed(),Bt.transpose(this,t)},e.prototype.notEqual=function(t){return this.throwIfDisposed(),Bt.notEqual(this,t)},e.prototype.notEqualStrict=function(t){return this.throwIfDisposed(),Bt.notEqualStrict(this,t)},e.prototype.less=function(t){return this.throwIfDisposed(),Bt.less(this,t)},e.prototype.lessStrict=function(t){return this.throwIfDisposed(),Bt.lessStrict(this,t)},e.prototype.equal=function(t){return this.throwIfDisposed(),Bt.equal(this,t)},e.prototype.equalStrict=function(t){return this.throwIfDisposed(),Bt.equalStrict(this,t)},e.prototype.lessEqual=function(t){return this.throwIfDisposed(),Bt.lessEqual(this,t)},e.prototype.lessEqualStrict=function(t){return this.throwIfDisposed(),Bt.lessEqualStrict(this,t)},e.prototype.greater=function(t){return this.throwIfDisposed(),Bt.greater(this,t)},e.prototype.greaterStrict=function(t){return this.throwIfDisposed(),Bt.greaterStrict(this,t)},e.prototype.greaterEqual=function(t){return this.throwIfDisposed(),Bt.greaterEqual(this,t)},e.prototype.greaterEqualStrict=function(t){return this.throwIfDisposed(),Bt.greaterEqualStrict(this,t)},e.prototype.logicalAnd=function(t){return this.throwIfDisposed(),Bt.logicalAnd(this,t)},e.prototype.logicalOr=function(t){return this.throwIfDisposed(),Bt.logicalOr(this,t)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),Bt.logicalNot(this)},e.prototype.logicalXor=function(t){return this.throwIfDisposed(),Bt.logicalXor(this,t)},e.prototype.where=function(t,r){return this.throwIfDisposed(),Bt.where(t,this,r)},e.prototype.neg=function(){return this.throwIfDisposed(),Bt.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),Bt.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),Bt.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),Bt.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),Bt.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),Bt.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),Bt.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),Bt.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),Bt.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),Bt.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),Bt.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),Bt.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),Bt.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),Bt.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),Bt.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),Bt.abs(this)},e.prototype.clipByValue=function(t,r){return this.throwIfDisposed(),Bt.clipByValue(this,t,r)},e.prototype.relu=function(){return this.throwIfDisposed(),Bt.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),Bt.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),Bt.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),Bt.selu(this)},e.prototype.leakyRelu=function(t){return t===void 0&&(t=.2),this.throwIfDisposed(),Bt.leakyRelu(this,t)},e.prototype.prelu=function(t){return this.throwIfDisposed(),Bt.prelu(this,t)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),Bt.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),Bt.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),Bt.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),Bt.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),Bt.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),Bt.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),Bt.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),Bt.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),Bt.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),Bt.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),Bt.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),Bt.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),Bt.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),Bt.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),Bt.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),Bt.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),Bt.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),Bt.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),Bt.round(this)},e.prototype.step=function(t){return t===void 0&&(t=0),this.throwIfDisposed(),Bt.step(this,t)},e.prototype.softmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Bt.softmax(this,t)},e.prototype.logSoftmax=function(t){return t===void 0&&(t=-1),this.throwIfDisposed(),Bt.logSoftmax(this,t)},e.prototype.resizeBilinear=function(t,r){return r===void 0&&(r=!1),this.throwIfDisposed(),Bt.image.resizeBilinear(this,t,r)},e.prototype.resizeNearestNeighbor=function(t,r){return r===void 0&&(r=!1),this.throwIfDisposed(),Bt.image.resizeNearestNeighbor(this,t,r)},e.prototype.conv1d=function(t,r,n,s,i,o){return s===void 0&&(s="NWC"),i===void 0&&(i=1),this.throwIfDisposed(),Bt.conv1d(this,t,r,n,s,i,o)},e.prototype.conv2d=function(t,r,n,s,i,o){return s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Bt.conv2d(this,t,r,n,s,i,o)},e.prototype.conv2dTranspose=function(t,r,n,s,i){return this.throwIfDisposed(),Bt.conv2dTranspose(this,t,r,n,s,i)},e.prototype.depthwiseConv2D=function(t,r,n,s,i,o){return s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]),this.throwIfDisposed(),Bt.depthwiseConv2d(this,t,r,n,s,i,o)},e.prototype.separableConv2d=function(t,r,n,s,i,o){return i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC"),this.throwIfDisposed(),Bt.separableConv2d(this,t,r,n,s,i,o)},e.prototype.avgPool=function(t,r,n,s){return this.throwIfDisposed(),Bt.avgPool(this,t,r,n,s)},e.prototype.maxPool=function(t,r,n,s){return this.throwIfDisposed(),Bt.maxPool(this,t,r,n,s)},e.prototype.localResponseNormalization=function(t,r,n,s){return t===void 0&&(t=5),r===void 0&&(r=1),n===void 0&&(n=1),s===void 0&&(s=.5),Bt.localResponseNormalization(this,t,r,n,s)},e.prototype.pool=function(t,r,n,s,i){return this.throwIfDisposed(),Bt.pool(this,t,r,n,s,i)},e.prototype.variable=function(t,r,n){return t===void 0&&(t=!0),this.throwIfDisposed(),Eu().makeVariable(this,t,r,n)},e.prototype.unsortedSegmentSum=function(t,r){return this.throwIfDisposed(),Bt.unsortedSegmentSum(this,t,r)},e.prototype.batchToSpaceND=function(t,r){return this.throwIfDisposed(),Bt.batchToSpaceND(this,t,r)},e.prototype.spaceToBatchND=function(t,r){return this.throwIfDisposed(),Bt.spaceToBatchND(this,t,r)},e.prototype.topk=function(t,r){return t===void 0&&(t=1),r===void 0&&(r=!0),this.throwIfDisposed(),Bt.topk(this,t,r)},e.prototype.stridedSlice=function(t,r,n,s,i,o,l,c){return s===void 0&&(s=0),i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=0),c===void 0&&(c=0),this.throwIfDisposed(),Bt.stridedSlice(this,t,r,n,s,i,o,l,c)},e.prototype.depthToSpace=function(t,r){return this.throwIfDisposed(),Bt.depthToSpace(this,t,r)},e.prototype.fft=function(){return this.throwIfDisposed(),Bt.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),Bt.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),Bt.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),Bt.spectral.irfft(this)},e}();Object.defineProperty(os,Symbol.hasInstance,{value:function(e){return!!e&&e.dataId!=null&&e.shape!=null&&e.dtype!=null}});var G8,V5,q5,z5,H5,L0=function(e){function t(r,n,s,i){var o=e.call(this,r.shape,r.dtype,r.dataId,i)||this;return o.trainable=n,o.name=s,o}return Ud(t,e),t.prototype.assign=function(r){if(r.dtype!==this.dtype)throw new Error("dtype of the new value ("+r.dtype+") and previous value ("+this.dtype+") must match");if(!Ei(r.shape,this.shape))throw new Error("shape of the new value ("+r.shape+") and previous value ("+this.shape+") must match");Eu().disposeTensor(this),this.dataId=r.dataId,Eu().incRef(this,null)},t.prototype.dispose=function(){Eu().disposeVariable(this),this.isDisposedInternal=!0},t}(os);Object.defineProperty(L0,Symbol.hasInstance,{value:function(e){return e instanceof os&&e.assign!=null&&e.assign instanceof Function}}),function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(G8||(G8={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(V5||(V5={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(q5||(q5={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(z5||(z5={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(H5||(H5={}));var l5e={float32:z5,int32:V5,bool:q5,complex64:H5};function Wi(e,t){if(e==="string"||t==="string"){if(e==="string"&&t==="string")return"string";throw new Error("Can not upcast "+e+" with "+t)}return l5e[e][t]}function SE(e){return Wi(e,"int32")}function hs(e,t){if(e.dtype===t.dtype)return[e,t];var r=Wi(e.dtype,t.dtype);return[e.cast(r),t.cast(r)]}function c5e(e,t){He(e.dtype===t.dtype,function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"})}function tG(e){var t=[];return function r(n,s,i){if(n!=null){if(n instanceof os)return void s.push(n);if(o=n,!(!Array.isArray(o)&&typeof o!="object")){var o,l=n;for(var c in l){var d=l[c];i.has(d)||(i.add(d),r(d,s,i))}}}}(e,t,new Set),t}var CE,Y8=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var t in this.registeredVariables)this.registeredVariables[t].dispose()},e}(),d5e=function(){function e(t){this.ENV=t,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new Y8}return e.prototype.ready=function(){return Pr(this,void 0,void 0,function(){var t,r,n;return Or(this,function(s){switch(s.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];t=this.getSortedBackends(),r=0,s.label=1;case 1:return r<t.length?(n=t[r],[4,this.initializeBackend(n).success]):[3,5];case 2:return s.sent()?[4,this.setBackend(n)]:[3,4];case 3:return s.sent(),[2];case 4:return r++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(e.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var t=this.initializeBackendsAndReturnBest(),r=t.name;if(t.asyncInit)throw new Error("The highest priority backend '"+r+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(r)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(t){return!(t in this.registry)&&(!(t in this.registryFactory)||this.initializeBackend(t).asyncInit)?null:this.registry[t]},e.prototype.findBackendFactory=function(t){return t in this.registryFactory?this.registryFactory[t].factory:null},e.prototype.registerBackend=function(t,r,n){return n===void 0&&(n=1),t in this.registryFactory?(console.warn(t+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[t]={factory:r,priority:n},!0)},e.prototype.setBackend=function(t){return Pr(this,void 0,void 0,function(){var r,n,s;return Or(this,function(i){switch(i.label){case 0:if(this.registryFactory[t]==null)throw new Error("Backend name '"+t+"' not found in registry");return this.backendName=t,this.registry[t]!=null?[3,4]:(this.backendInstance=null,r=this.initializeBackend(t),n=r.success,r.asyncInit?[4,n]:[3,2]);case 1:return s=i.sent(),[3,3];case 2:s=n,i.label=3;case 3:if(!s)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[t],this.setupRegisteredKernels(),this.profiler=new s5e(this.backendInstance),[2,!0]}})})},e.prototype.setupRegisteredKernels=function(){var t=this;V8(this.backendName).forEach(function(r){r.setupFunc!=null&&r.setupFunc(t.backendInstance)})},e.prototype.disposeRegisteredKernels=function(t){var r=this;V8(t).forEach(function(n){n.disposeFunc!=null&&n.disposeFunc(r.registry[t])})},e.prototype.initializeBackend=function(t){var r=this,n=this.registryFactory[t];if(n==null)throw new Error("Cannot initialize backend "+t+", no registration found.");try{var s=n.factory();if(Promise.resolve(s)===s){var i=++this.pendingBackendInitId,o=s.then(function(l){return!(i<r.pendingBackendInitId)&&(r.registry[t]=l,r.pendingBackendInit=null,!0)}).catch(function(l){return!(i<r.pendingBackendInitId)&&(r.pendingBackendInit=null,console.warn("Initialization of backend "+t+" failed"),console.warn(l.stack||l.message),!1)});return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[t]=s,{success:!0,asyncInit:!1}}catch(l){return console.warn("Initialization of backend "+t+" failed"),console.warn(l.stack||l.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(t){if(!(t in this.registryFactory))throw new Error(t+" backend not found in registry");this.backendName===t&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,t in this.registry&&(this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t]),delete this.registryFactory[t],this.backendName===t&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var t=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(r,n){return t.registryFactory[n].priority-t.registryFactory[r].priority})},e.prototype.initializeBackendsAndReturnBest=function(){for(var t=this.getSortedBackends(),r=0;r<t.length;r++){var n=t[r],s=this.initializeBackend(n),i=s.success,o=s.asyncInit;if(o||i)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(t,r){var n=this.state.tensorInfo.get(r),s=n.backend,i=this.readSync(r);s.disposeData(r),n.backend=t,t.move(r,i,n.shape,n.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},e.prototype.tidy=function(t,r){var n,s=this,i=null;if(r==null){if(typeof t!="function")throw new Error("Please provide a function to tidy()");r=t}else{if(typeof t!="string"&&!(t instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof r!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=t}return this.scopedRun(function(){return s.startScope(i)},function(){return s.endScope(n)},function(){return(n=r())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n})},e.prototype.scopedRun=function(t,r,n){t();try{var s=n();return r(),s}catch(i){throw r(),i}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(t){var r=this.makeTensorFromDataId(t.dataId,t.shape,t.dtype),n={x:t};return this.addTapeNode(this.state.activeScope.name,n,[r],function(s){return{x:function(){return s.toFloat()}}},[]),r},e.prototype.runKernel=function(t,r,n,s,i){return this.runKernelFunc(null,r,null,t,n,s,i)},e.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},e.prototype.checkKernelForMemLeak=function(t,r,n){var s=this.backend.numDataIds(),i=0;n.forEach(function(c){i+=c.dtype==="complex64"?3:1});var o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=s-r-i-o;if(l>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+l+" data ids) after running '"+t+"'")},e.prototype.runKernelFunc=function(t,r,n,s,i,o,l){var c,d=this;o===void 0&&(o=[]),l===void 0&&(l=[]);var u=[],h=this.isTapeOn();s==null&&(s=this.state.activeScope!=null?this.state.activeScope.name:"");var m,p=function(C){h&&(u=C.map(function(w){return d.keep(d.clone(w))}))},v=this.state.numBytes,g=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var b,y=HW(s,this.backendName);return m=y!=null?function(){var C=d.backend.numDataIds();b=y.kernelFunc({inputs:r,attrs:i,backend:d.backend});var w=Array.isArray(b)?b:[b];d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(s,C,w);var k=w.map(function(D){var E=D.dataId,T=D.shape,A=D.dtype;return d.makeTensorFromDataId(E,T,A)}),S=k.filter(function(D,E){return l[E]});return p((o||[]).slice().concat(S)),k}:function(){var C=d.backend.numDataIds();b=d.tidy(function(){return t(d.backend,p)});var w=Array.isArray(b)?b:[b];return d.shouldCheckForMemLeaks()&&d.checkKernelForMemLeak(s,C,w),w},this.scopedRun(function(){return d.state.kernelDepth++},function(){return d.state.kernelDepth--},function(){c=d.ENV.getBool("DEBUG")?d.profiler.profileKernel(s,r,function(){return m()}):m()}),h&&this.addTapeNode(s,r,c,n,u),this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-v,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-g,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(r).map(function(C){return r[C].shape}),outputShapes:c.map(function(C){return C.shape})}),Array.isArray(b)?c:c[0]},e.prototype.makeTensor=function(t,r,n,s){if(t==null)throw new Error("Values passed to engine.makeTensor() are null");n=n||"float32",s=s||this.backend;var i=t;n==="string"&&m4(t[0])&&(i=t.map(function(u){return a5e(u)}));var o=s.write(i,r,n),l=new os(r,n,o,this.nextTensorId());if(this.incRef(l,s),n==="string"){var c=this.state.tensorInfo.get(o),d=e5e(i);this.state.numBytes+=d-c.bytes,c.bytes=d}return l},e.prototype.makeTensorFromDataId=function(t,r,n,s){var i=new os(r,n=n||"float32",t,this.nextTensorId());return this.incRef(i,s),i},e.prototype.makeVariable=function(t,r,n,s){r===void 0&&(r=!0),n=n||this.nextVariableId().toString(),s!=null&&s!==t.dtype&&(t=t.asType(s));var i=new L0(t,r,n,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error("Variable with name "+i.name+" was already registered");return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i},e.prototype.incRef=function(t,r){var n=this.state.tensorInfo.has(t.dataId)?this.state.tensorInfo.get(t.dataId).refCount:0;if(this.state.numTensors++,t.dtype==="string"&&this.state.numStringTensors++,n===0){this.state.numDataBuffers++;var s=0;t.dtype!=="complex64"&&t.dtype!=="string"&&(s=t.size*KW(t.dtype)),this.state.tensorInfo.set(t.dataId,{backend:r||this.backend,dtype:t.dtype,shape:t.shape,bytes:s,refCount:0}),this.state.numBytes+=s}this.state.tensorInfo.get(t.dataId).refCount++,t instanceof L0||this.track(t)},e.prototype.disposeTensor=function(t){if(this.state.tensorInfo.has(t.dataId)){this.state.numTensors--,t.dtype==="string"&&this.state.numStringTensors--;var r=this.state.tensorInfo.get(t.dataId);r.refCount<=1?(t.dtype!=="complex64"&&(this.state.numBytes-=r.bytes),this.state.numDataBuffers--,r.backend.disposeData(t.dataId),this.state.tensorInfo.delete(t.dataId)):this.state.tensorInfo.get(t.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var t in this.state.registeredVariables){var r=this.state.registeredVariables[t];this.disposeVariable(r)}},e.prototype.disposeVariable=function(t){this.disposeTensor(t),this.state.registeredVariables[t.name]!=null&&delete this.state.registeredVariables[t.name]},e.prototype.memory=function(){var t=this.backend.memory();return t.numTensors=this.state.numTensors,t.numDataBuffers=this.state.numDataBuffers,t.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(t.unreliable=!0,t.reasons==null&&(t.reasons=[]),t.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),t},e.prototype.profile=function(t){return Pr(this,void 0,void 0,function(){var r,n;return Or(this,function(s){return this.state.profiling=!0,r=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=t(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(i){return i.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-r,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]})})},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},e.prototype.addTapeNode=function(t,r,n,s,i){var o=this,l={id:this.state.nextTapeNodeId++,kernelName:t,inputs:r,outputs:n,saved:i},c=WDe(t);c!=null&&(s=c.gradFunc),s!=null&&(l.gradient=function(d){return d=d.map(function(u,h){if(u==null){var m=n[h],p=h1(m.size,m.dtype);return o.makeTensor(p,m.shape,m.dtype)}return u}),s(d.length>1?d:d[0],i)}),this.state.activeTape.push(l)},e.prototype.keep=function(t){return t.kept=!0,t},e.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(t){var r={track:[],name:"unnamed scope",id:this.state.nextScopeId++};t&&(r.name=t),this.state.scopeStack.push(r),this.state.activeScope=r},e.prototype.endScope=function(t){for(var r=this,n=tG(t),s=new Set(n.map(function(c){return c.id})),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||s.has(o.id)||o.dispose()}var l=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(function(c){c.kept||c.scopeId!==l.id||r.track(c)})},e.prototype.gradients=function(t,r,n,s){var i=this;if(s===void 0&&(s=!1),He(r.length>0,function(){return"gradients() received an empty list of xs."}),n!=null&&n.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var o=this.scopedRun(function(){return i.startTape()},function(){return i.endTape()},function(){return i.tidy("forward",t)});He(o instanceof os,function(){return"The result y returned by f() must be a tensor."});var l=function(c,d,u){for(var h={},m={},p=0;p<d.length;p++)h[d[p].id]=!0;for(p=0;p<c.length;p++){var v=(D=c[p]).inputs;for(var g in v){for(var b=v[g],y=!1,C=0;C<d.length;C++)if(h[b.id]){D.outputs.forEach(function(L){return h[L.id]=!0}),y=!0,m[D.id]=!0;break}if(y)break}}var w={};w[u.id]=!0;var k={};for(p=c.length-1;p>=0;p--)for(v=(D=c[p]).inputs,C=0;C<D.outputs.length;C++)if(w[D.outputs[C].id]){for(var g in v)w[v[g].id]=!0,k[D.id]=!0;break}var S=[];for(p=0;p<c.length;p++){var D;if(m[(D=c[p]).id]&&k[D.id]){var E={};for(var g in D.inputs){var T=D.inputs[g];h[T.id]&&(E[g]=T)}var A=Object.assign({},D);A.inputs=E,A.outputs=D.outputs,S.push(A)}}return S}(this.state.activeTape,r,o);if(!s&&l.length===0&&r.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var c,d,u={};u[o.id]=n??(c=o.shape,d=QW(Fr(c),"float32"),ht.makeTensor(d,c,"float32")),function(m,p,v){for(var g=function(y){var C=p[y],w=[];if(C.outputs.forEach(function(E){var T=m[E.id];T!=null?w.push(T):w.push(null)}),C.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+C.kernelName+".");var k=C.gradient(w),S=function(E){if(!(E in k))throw new Error("Cannot backprop through input "+E+". Available gradients found: "+Object.keys(k)+".");var T=v(function(){return k[E]()});if(T.dtype!=="float32")throw new Error("Error in gradient for op "+C.kernelName+". The gradient of input "+E+" must have 'float32' dtype, but has '"+T.dtype+"'");var A=C.inputs[E];if(!Ei(T.shape,A.shape))throw new Error("Error in gradient for op "+C.kernelName+". The gradient of input '"+E+"' has shape '"+T.shape+"', which does not match the shape of the input '"+A.shape+"'");if(m[A.id]==null)m[A.id]=T;else{var L=m[A.id];m[A.id]=L.add(T),L.dispose()}};for(var D in C.inputs)S(D)},b=p.length-1;b>=0;b--)g(b)}(u,l,function(m){return i.tidy(m)});var h=r.map(function(m){return u[m.id]});return i.state.gradientDepth===0&&(i.state.activeTape.forEach(function(m){for(var p=0,v=m.saved;p<v.length;p++)v[p].dispose()}),i.state.activeTape=null),{value:o,grads:h}})},e.prototype.customGrad=function(t){var r=this;return He(U5(t),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var n,s=[],i=0;i<arguments.length;i++)s[i]=arguments[i];He(s.every(function(l){return l instanceof os}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var o={};return s.forEach(function(l,c){o[c]=l}),r.runKernelFunc(function(l,c){return He((n=t.apply(void 0,s.concat([c]))).value instanceof os,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),He(U5(n.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),n.value},o,function(l,c){var d=n.gradFunc(l,c),u=Array.isArray(d)?d:[d];He(u.length===s.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),He(u.every(function(m){return m instanceof os}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var h={};return u.forEach(function(m,p){h[p]=function(){return m}}),h})}},e.prototype.readSync=function(t){return this.state.tensorInfo.get(t).backend.readSync(t)},e.prototype.read=function(t){return this.state.tensorInfo.get(t).backend.read(t)},e.prototype.time=function(t){return Pr(this,void 0,void 0,function(){var r,n;return Or(this,function(s){switch(s.label){case 0:return r=ku(),[4,this.backend.time(t)];case 1:return(n=s.sent()).wallMs=ku()-r,[2,n]}})})},e.prototype.track=function(t){return this.state.activeScope!=null&&(t.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(t)),t},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var t in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new Y8,this.registry)this.disposeRegisteredKernels(t),this.registry[t].dispose(),delete this.registry[t];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),ht=function(){var e=function(){if(CE==null){var r=void 0;if(typeof window<"u")r=window;else if(typeof global<"u")r=global;else if(typeof process<"u")r=process;else{if(typeof self>"u")throw new Error("Could not find a global object");r=self}CE=r}return CE}();if(e._tfengine==null){var t=new zDe(e);e._tfengine=new d5e(t)}return function(r){zW=r}(e._tfengine.ENV),Eu=function(){return e._tfengine},e._tfengine}();function rG(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var Ph=zt();Ph.registerFlag("DEBUG",function(){return!1},function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),Ph.registerFlag("IS_BROWSER",function(){return rG()}),Ph.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),Ph.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),Ph.registerFlag("PROD",function(){return!1}),Ph.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return Ph.getBool("DEBUG")}),Ph.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),Ph.registerFlag("IS_TEST",function(){return!1});var Dy,Yl,zl,Rp={},kE={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function u5e(e,t){Rp[e]=t}function th(e){e in Rp||(Rp[e]=function(r){if(r!==1&&r!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var n=function(s){if(typeof OffscreenCanvas<"u"&&s===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}(r);return n.addEventListener("webglcontextlost",function(s){s.preventDefault(),delete Rp[r]},!1),r===1?n.getContext("webgl",kE)||n.getContext("experimental-webgl",kE):n.getContext("webgl2",kE)}(e));var t=Rp[e];return t.isContextLost()?(delete Rp[e],th(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),Rp[e])}function PS(e,t){return[t,e]}function Wb(e){var t=Fr(e);return B5(Math.ceil(t/4))}function f1(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function p4(e,t){var r,n,s,i,o,l,c,d,u,h=e;return zt().getNumber("WEBGL_VERSION")===2?(r=h.R32F,n=h.R16F,s=h.RGBA16F,i=h.RGBA32F,o=h.RED,l=4,c=1,d=h.HALF_FLOAT,u=h.FLOAT):(r=e.RGBA,n=e.RGBA,s=e.RGBA,i=h.RGBA,o=e.RGBA,l=4,c=4,d=t!=null?t.HALF_FLOAT_OES:null,u=e.FLOAT),{internalFormatFloat:r,internalFormatHalfFloat:n,internalFormatPackedHalfFloat:s,internalFormatPackedFloat:i,textureFormatFloat:o,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:d,textureTypeFloat:u}}function Lr(e,t,r){var n=r();return t&&function(s){var i=s.getError();if(i!==s.NO_ERROR)throw new Error("WebGL Error: "+p5e(s,i))}(e),n}(function(e){e[e.DENSE=0]="DENSE",e[e.SHARED_BATCH=1]="SHARED_BATCH"})(Dy||(Dy={})),function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(Yl||(Yl={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(zl||(zl={}));var h5e=596e-10,f5e=65504;function m5e(e){return!!(zt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||e===0||h5e<Math.abs(e)&&Math.abs(e)<f5e)}function p5e(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function Qj(e,t,r){return yf(e,t,function(){return e.getExtension(r)},'Extension "'+r+'" not supported on this browser.')}function x5e(e,t,r){var n=yf(e,t,function(){return e.createShader(e.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(Lr(e,t,function(){return e.shaderSource(n,r)}),Lr(e,t,function(){return e.compileShader(n)}),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw console.log(e.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function v5e(e,t,r){var n=yf(e,t,function(){return e.createShader(e.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(Lr(e,t,function(){return e.shaderSource(n,r)}),Lr(e,t,function(){return e.compileShader(n)}),e.getShaderParameter(n,e.COMPILE_STATUS)===!1)throw function(s,i){var o=g5e.exec(i);if(o==null)return console.log("Couldn't parse line number in error: "+i),void console.log(s);for(var l=+o[1],c=s.split(`
`),d=c.length.toString().length+2,u=c.map(function(b,y){return d0((y+1).toString(),d)+b}),h=0,m=0;m<u.length;m++)h=Math.max(u[m].length,h);var p=u.slice(0,l-1),v=u.slice(l-1,l),g=u.slice(l);console.log(p.join(`
`)),console.log(i.split(`
`)[0]),console.log("%c "+d0(v[0],h),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(g.join(`
`))}(r,e.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}var _E,EE,g5e=/ERROR: [0-9]+:([0-9]+):/g;function b5e(e,t){return yf(e,t,function(){return e.createProgram()},"Unable to create WebGLProgram.")}function y5e(e,t,r){if(Lr(e,t,function(){return e.linkProgram(r)}),e.getProgramParameter(r,e.LINK_STATUS)===!1)throw console.log(e.getProgramInfoLog(r)),new Error("Failed to link vertex and fragment shaders.")}function DE(e,t,r){if(Lr(e,t,function(){return e.validateProgram(r)}),e.getProgramParameter(r,e.VALIDATE_STATUS)===!1)throw console.log(e.getProgramInfoLog(r)),new Error("Shader program validation failed.")}function j5e(e,t,r){var n=yf(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Lr(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),Lr(e,t,function(){return e.bufferData(e.ARRAY_BUFFER,r,e.STATIC_DRAW)}),n}function N5e(e,t,r){var n=yf(e,t,function(){return e.createBuffer()},"Unable to create WebGLBuffer");return Lr(e,t,function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n)}),Lr(e,t,function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,r,e.STATIC_DRAW)}),n}function w5e(e,t){return yf(e,t,function(){return e.createTexture()},"Unable to create WebGLTexture.")}function S5e(e,t){var r=zt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var n="["+e+"x"+t+"]";throw new Error("Requested texture size "+n+" is invalid.")}if(e>r||t>r)throw n="["+e+"x"+t+"]",new Error("Requested texture size "+n+" greater than WebGL maximum on this browser / GPU "+("["+r+"x"+r+"]")+".")}function C5e(e,t){return yf(e,t,function(){return e.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function K8(e,t,r,n,s,i,o,l){var c=e.getAttribLocation(r,n);return c!==-1&&(Lr(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,s)}),Lr(e,t,function(){return e.vertexAttribPointer(c,i,e.FLOAT,!1,o,l)}),Lr(e,t,function(){return e.enableVertexAttribArray(c)}),!0)}function k5e(e,t,r,n){T5e(e,n),Lr(e,t,function(){return e.activeTexture(e.TEXTURE0+n)}),Lr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)})}function _5e(e,t,r,n){return yf(e,t,function(){return e.getUniformLocation(r,n)},'uniform "'+n+'" not present in program.')}function E5e(e,t,r){return e.getUniformLocation(t,r)}function D5e(e,t,r,n,s,i){Lr(e,t,function(){return k5e(e,t,n,i)}),Lr(e,t,function(){return e.uniform1i(s,i)})}function AE(e,t,r,n){Lr(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)}),Lr(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0)})}function X8(e,t,r){Lr(e,t,function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)}),Lr(e,t,function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)})}function Jj(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+A5e(e,t))}function A5e(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function yf(e,t,r,n){var s=Lr(e,t,function(){return r()});if(s==null)throw new Error(n);return s}function T5e(e,t){var r=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,n=t+e.TEXTURE0;if(n<e.TEXTURE0||n>r)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+r+"]")+".")}function Qw(e,t){return t===void 0&&(t=2),Fr(e.slice(0,e.length-t))}function Jw(e){if(e.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function TE(e){var t=[1,1,1];return e.length===0||e.length===1&&e[0]===1||(t=[Qw(e)].concat(Jw(e))),t}function I5e(e,t){var r;t===void 0&&(t=!1);var n=zt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(n*=2,(e=e.map(function(d,u){return u>=e.length-2?YW(e[u]):e[u]})).length===1&&(e=[2,e[0]])),e.length!==2){var s=$p(e);e=s.newShape}var i=Fr(e);if(e.length<=1&&i<=n)return[1,i];if(e.length===2&&e[0]<=n&&e[1]<=n)return e;if(e.length===3&&e[0]*e[1]<=n&&e[2]<=n)return[e[0]*e[1],e[2]];if(e.length===3&&e[0]<=n&&e[1]*e[2]<=n)return[e[0],e[1]*e[2]];if(e.length===4&&e[0]*e[1]*e[2]<=n&&e[3]<=n)return[e[0]*e[1]*e[2],e[3]];if(e.length===4&&e[0]<=n&&e[1]*e[2]*e[3]<=n)return[e[0],e[1]*e[2]*e[3]];if(t){var o=Qw(e),l=2,c=2;return e.length&&(l=(r=Jw(e))[0],c=r[1]),B5(i=o*(l/2)*(c/2)).map(function(d){return 2*d})}return B5(i)}function Zj(e){return e%2==0}function eN(e,t){if(Ei(e=e.slice(-2),t=t.slice(-2))||!e.length||!t.length||e[0]===0||e[1]===0||t[0]===0||t[1]===0)return!0;if(e.length!==t.length){var r=e.slice(-1)[0],n=t.slice(-1)[0];if(r===n||Zj(r)&&Zj(n)&&(e[0]===1||t[0]===1))return!0}return e[1]===t[1]&&Zj(e[0])&&Zj(t[0])}function P5e(e){if(_E==null){var t=th(e);_E=t.getParameter(t.MAX_TEXTURE_SIZE)}return _E}function O5e(e){if(EE==null){var t=th(e);EE=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,EE)}function M5e(e){if(e===0)return 0;var t=th(e);return qc(t,"EXT_disjoint_timer_query_webgl2")&&e===2?2:qc(t,"EXT_disjoint_timer_query")?1:0}function qc(e,t){return e.getExtension(t)!=null}function Q8(e){try{if(th(e)!=null)return!0}catch{return!1}return!1}function R5e(e){if(e===0)return!1;var t=th(e);if(e===1){if(!qc(t,"OES_texture_float"))return!1}else if(!qc(t,"EXT_color_buffer_float"))return!1;return W5(t)}function F5e(e){if(e===0)return!1;var t=th(e);if(e!==1){if(qc(t,"EXT_color_buffer_float"))return W5(t);if(qc(t,"EXT_color_buffer_half_float")){var r=t.getExtension("EXT_color_buffer_half_float");return function(n,s){var i=p4(n,s),o=n.createTexture();n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,i.internalFormatHalfFloat,1,1,0,i.textureFormatFloat,i.textureTypeHalfFloat,null);var l=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,l),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,o,0);var c=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(o),n.deleteFramebuffer(l),c}(t,r)}return!1}return!!qc(t,"OES_texture_float")&&!!qc(t,"WEBGL_color_buffer_float")&&W5(t)}function W5(e){var t=p4(e),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var n=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var s=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(n),s}function L5e(e){return e===2&&th(e).fenceSync!=null}var ca=zt();function aG(e){zt().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function _r(e,t){return ht.tidy(e,t)}function fl(e){tG(e).forEach(function(t){return t.dispose()})}function B5e(e){return ht.keep(e)}function Zw(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];zt().getBool("IS_TEST")||console.warn.apply(console,e)}function rp(e,t){var r=e;if(Uu(e))return t==="string"?[]:[e.length];if(!Array.isArray(e))return[];for(var n=[];Array.isArray(r)||Uu(r)&&t!=="string";)n.push(r.length),r=r[0];return Array.isArray(e)&&zt().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function s(i,o,l){if(l=l||[],!Array.isArray(i)&&!Uu(i))return void He(o.length===0,function(){return"Element arr["+l.join("][")+"] is a primitive, but should be an array/TypedArray of "+o[0]+" elements"});He(o.length>0,function(){return"Element arr["+l.join("][")+"] should be a primitive, but is an array of "+i.length+" elements"}),He(i.length===o[0],function(){return"Element arr["+l.join("][")+"] should have "+o[0]+" elements, but has "+i.length+" elements"});for(var c=o.slice(1),d=0;d<i.length;++d)s(i[d],c,l.concat(d))}(e,n,[]),n}function J8(e,t,r,n){if(e!=null&&(e!=="numeric"&&e!==t||e==="numeric"&&t==="string"))throw new Error("Argument '"+r+"' passed to '"+n+"' must be "+e+" tensor, but got "+t+" tensor")}function Re(e,t,r,n){if(n===void 0&&(n="numeric"),e instanceof os)return J8(n,e.dtype,t,r),e;var s=u1(e);if(s!=="string"&&["bool","int32","float32"].indexOf(n)>=0&&(s=n),J8(n,s,t,r),e==null||!Uu(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string"){var i=e==null?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+r+"' must be a Tensor or TensorLike, but got '"+i+"'")}var o=rp(e,s);Uu(e)||Array.isArray(e)||(e=[e]);var l=s!=="string"?XW(e,s,zt().getBool("DEBUG")):F0(e,[],!0);return ht.makeTensor(l,o,s)}function e2(e,t,r,n){if(n===void 0&&(n="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+r+" must be a `Tensor[]` or `TensorLike[]`");return e.map(function(s,i){return Re(s,t+"["+i+"]",r)},n)}function nG(e,t){for(var r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0}function U5e(e,t,r){for(var n=e.length+t.length,s=[],i=0,o=0,l=0;l<n;l++)r.indexOf(l)===-1?s.push(e[i++]):s.push(t[o++]);return s}function xo(e,t){for(var r=[],n=e.length,s=0;s<n;s++)t.indexOf(s)===-1&&r.push(e[s]);return[r,t.map(function(i){return e[i]})]}function xl(e,t){return U5e(e,t.map(function(r){return 1}),t)}function Ul(e,t,r){He(nG(t,r),function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+r+" input."})}function rh(e,t){if(nG(e,t))return null;for(var r=[],n=0;n<t;++n)e.indexOf(n)===-1&&r.push(n);return e.forEach(function(s){return r.push(s)}),r}function x4(e){return e.map(function(t,r){return[r,t]}).sort(function(t,r){return t[1]-r[1]}).map(function(t){return t[0]})}function ah(e,t){for(var r=[],n=t-e;n<t;++n)r.push(n);return r}function $5e(e,t){var r=e[0].length;e.forEach(function(s,i){He(s.length===r,function(){return"Error in concat"+r+"D: rank of tensors["+i+"] must be the same as the rank of the rest ("+r+")"})}),He(t>=0&&t<r,function(){return"Error in concat"+r+"D: axis must be between 0 and "+(r-1)+"."});var n=e[0];e.forEach(function(s,i){for(var o=0;o<r;o++)He(o===t||s[o]===n[o],function(){return"Error in concat"+r+"D: Shape of tensors["+i+"] ("+s+") does not match the shape of the rest ("+n+") along the non-concatenated axis "+i+"."})})}function B0(e,t){for(var r=e[0].slice(),n=1;n<e.length;n++)r[t]+=e[n][t];return r}function et(e){var t=Object.keys(e);if(t.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var r=t[0],n=e[r];r.endsWith("_")&&(r=r.substring(0,r.length-1));var s=function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];ht.startScope(r);try{var l=n.apply(void 0,i);return l instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),ht.endScope(l),l}catch(c){throw ht.endScope(null),c}};return Object.defineProperty(s,"name",{value:r,configurable:!0}),s}ca.registerFlag("HAS_WEBGL",function(){return ca.getNumber("WEBGL_VERSION")>0}),ca.registerFlag("WEBGL_VERSION",function(){return Q8(2)?2:Q8(1)?1:0}),ca.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return ca.get("WEBGL_VERSION")===2}),ca.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),ca.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),ca.registerFlag("WEBGL_PACK",function(){return ca.getBool("HAS_WEBGL")}),ca.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return ca.getBool("WEBGL_PACK")}),ca.registerFlag("WEBGL_PACK_CLIP",function(){return ca.getBool("WEBGL_PACK")}),ca.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),ca.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return ca.getBool("WEBGL_PACK")}),ca.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return ca.getBool("WEBGL_PACK")}),ca.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return ca.getBool("WEBGL_PACK")}),ca.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return ca.getBool("WEBGL_PACK")}),ca.registerFlag("WEBGL_PACK_REDUCE",function(){return ca.getBool("WEBGL_PACK")}),ca.registerFlag("WEBGL_LAZILY_UNPACK",function(){return ca.getBool("WEBGL_PACK")}),ca.registerFlag("WEBGL_CONV_IM2COL",function(){return ca.getBool("WEBGL_PACK")}),ca.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return P5e(ca.getNumber("WEBGL_VERSION"))}),ca.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return O5e(ca.getNumber("WEBGL_VERSION"))}),ca.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var e=ca.getNumber("WEBGL_VERSION");return e===0?0:M5e(e)}),ca.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return ca.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e}),ca.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return R5e(ca.getNumber("WEBGL_VERSION"))}),ca.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!ca.getBool("WEBGL_FORCE_F16_TEXTURES")&&ca.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),ca.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return F5e(ca.getNumber("WEBGL_VERSION"))}),ca.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return L5e(ca.getNumber("WEBGL_VERSION"))}),ca.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return ca.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),eG=aG;var zi=et({complex_:function(e,t){var r=Re(e,"real","complex"),n=Re(t,"imag","complex");return un(r.shape,n.shape,"real and imag shapes, "+r.shape+" and "+n.shape+", must match in call to tf.complex()."),ht.runKernelFunc(function(s){return s.complex(r,n)},{$real:r,$imag:n})}}),Uc=et({real_:function(e){var t=Re(e,"input","real");return ht.runKernelFunc(function(r){return r.real(t)},{$input:t})}}),Du=et({imag_:function(e){var t=Re(e,"input","imag");return ht.runKernelFunc(function(r){return r.imag(t)},{$input:t})}});function Ki(e,t,r){return ap(e,t,rp(e,r),r)}function ap(e,t,r,n){if(n==null&&(n=u1(e)),n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!Uu(e)&&!Array.isArray(e)&&typeof e!="number"&&typeof e!="boolean"&&typeof e!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){JW(t);var s=Fr(t),i=Fr(r);He(s===i,function(){return"Based on the provided shape, ["+t+"], the tensor should have "+s+" values but has "+i});for(var o=0;o<r.length;++o){var l=r[o],c=o!==r.length-1||l!==Fr(t.slice(o));He(r[o]===t[o]||!c,function(){return"Error creating a new Tensor. Inferred shape ("+r+") does not match the provided shape ("+t+"). "})}}return Uu(e)||Array.isArray(e)||(e=[e]),t=t||r,e=n!=="string"?XW(e,n,zt().getBool("DEBUG")):F0(e,[],!0),ht.makeTensor(e,t,n)}function Nr(e,t){if((Uu(e)&&t!=="string"||Array.isArray(e))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Uu(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ap(e,[],[],t)}function ti(e,t){ug(e);var r=rp(e,t);if(r.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ap(e,null,r,t)}function Im(e,t,r){if(ug(e),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var n=rp(e,r);if(n.length!==2&&n.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ap(e,t,n,r)}function v4(e,t,r){if(ug(e),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var n=rp(e,r);if(n.length!==3&&n.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ap(e,t,n,r)}function ol(e,t,r){if(ug(e),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var n=rp(e,r);if(n.length!==4&&n.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ap(e,t,n,r)}function V5e(e,t,r){if(ug(e),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var n=rp(e,r);if(n.length!==5&&n.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ap(e,t,n,r)}function q5e(e,t,r){if(ug(e),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var n=rp(e,r);if(n.length!==6&&n.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return ap(e,t=t||n,n,r)}function z5e(e,t,r,n){return t===void 0&&(t=!0),ht.makeVariable(e,t,r,n)}function hg(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var r=hg(e,"float32"),n=Ln(e,"float32");return zi(r,n)}var s=QW(Fr(e),t);return ht.makeTensor(s,e,t)}function Ln(e,t){if(t===void 0&&(t="float32"),t==="complex64"){var r=Ln(e,"float32"),n=Ln(e,"float32");return zi(r,n)}var s=h1(Fr(e),t);return ht.makeTensor(s,e,t)}function Vu(e,t,r){return ht.runKernelFunc(function(n){return n.fill(e,t,r)},{})}function H5e(e,t,r){if(r<=0)throw new Error("The number of values should be positive.");return ht.runKernelFunc(function(n){return n.linspace(e,t,r)},{})}function t2(e,t,r,n){if(r===void 0&&(r=1),n===void 0&&(n="float32"),r===0)throw new Error("Cannot have a step of zero");if(e===t||e<t&&r<0||t<e&&r>1)return Ln([0],n);var s=h1(Math.abs(Math.ceil((t-e)/r)),n);t<e&&r===1&&(r=-1),s[0]=e;for(var i=1;i<s.length;i++)s[i]=s[i-1]+r;return ti(s,n)}var sG=et({onesLike_:function(e){var t=Re(e,"x","onesLike");if(t.dtype==="complex64"){var r=sG(Uc(t)),n=$a(Du(t));return zi(r,n)}return ht.runKernelFunc(function(s){return s.onesLike(t)},{$x:t},function(s,i){return{$x:function(){return $a(s)}}})}}),$a=et({zerosLike_:function(e){var t=Re(e,"x","zerosLike");return ht.runKernelFunc(function(r){return r.zerosLike(t)},{$x:t},function(r,n){return{$x:function(){return $a(r)}}})}}),di=et({concat_:function(e,t){t===void 0&&(t=0),He(e.length>=1,function(){return"Pass at least one tensor to concat"});var r=e2(e,"tensors","concat");r[0].dtype==="complex64"&&r.forEach(function(l){if(l.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+l.dtype+". ")}),t=xi(t,r[0].shape)[0];var n=B0(r.map(function(l){return l.shape}),t);if(Fr(n)===0)return Ki([],n);if((r=r.filter(function(l){return l.size>0})).length===1)return r[0];var s=r.map(function(l){return l.shape});$5e(s,t);var i=r,o={axis:t};return ht.runKernelFunc(function(l){return l.concat(r,t)},i,function(l){var c=s.map(function(d){return d[t]});return g4(l,c,t).map(function(d){return function(){return d}})},"Concat",o)}}),W5e=et({concat1d_:function(e){return di(e,0)}}),G5e=et({concat2d_:function(e,t){return di(e,t)}}),Y5e=et({concat3d_:function(e,t){return di(e,t)}}),K5e=et({concat4d_:function(e,t){return di(e,t)}}),g4=et({split_:function(e,t,r){r===void 0&&(r=0);var n,s=Re(e,"x","split");return r=xi(r,s.shape)[0],typeof t=="number"?(He(s.shape[r]%t==0,function(){return"Number of splits must evenly divide the axis."}),n=new Array(t).fill(s.shape[r]/t)):(He(s.shape[r]===t.reduce(function(i,o){return i+o}),function(){return"The sum of sizes must match the size of the axis dimension."}),n=t),ht.runKernelFunc(function(i){return i.split(s,n,r)},{$x:s},function(i){return{$x:function(){return di(i,r)}}})}});function zx(e,t){return e(t={exports:{}},t.exports),t.exports}var X5e=zx(function(e){(function(t,r,n){function s(l){var c,d=this,u=(c=4022871197,function(h){h=h.toString();for(var m=0;m<h.length;m++){var p=.02519603282416938*(c+=h.charCodeAt(m));p-=c=p>>>0,c=(p*=c)>>>0,c+=4294967296*(p-=c)}return 23283064365386963e-26*(c>>>0)});d.next=function(){var h=2091639*d.s0+23283064365386963e-26*d.c;return d.s0=d.s1,d.s1=d.s2,d.s2=h-(d.c=0|h)},d.c=1,d.s0=u(" "),d.s1=u(" "),d.s2=u(" "),d.s0-=u(l),d.s0<0&&(d.s0+=1),d.s1-=u(l),d.s1<0&&(d.s1+=1),d.s2-=u(l),d.s2<0&&(d.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var d=new s(l),u=c&&c.state,h=d.next;return h.int32=function(){return 4294967296*d.next()|0},h.double=function(){return h()+11102230246251565e-32*(2097152*h()|0)},h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.alea=o})(0,e)}),Q5e=zx(function(e){(function(t,r,n){function s(l){var c=this,d="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var h=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^h^h>>>8},l===(0|l)?c.x=l:d+=l;for(var u=0;u<d.length+64;u++)c.x^=0|d.charCodeAt(u),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xor128=o})(0,e)}),J5e=zx(function(e){(function(t,r,n){function s(l){var c=this,d="";c.next=function(){var h=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^h^h<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(0|l)?c.x=l:d+=l;for(var u=0;u<d.length+64;u++)c.x^=0|d.charCodeAt(u),u==d.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function i(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xorwow=o})(0,e)}),Z5e=zx(function(e){(function(t,r,n){function s(l){var c=this;c.next=function(){var d,u,h=c.x,m=c.i;return d=h[m],u=(d^=d>>>7)^d<<24,u^=(d=h[m+1&7])^d>>>10,u^=(d=h[m+3&7])^d>>>3,u^=(d=h[m+4&7])^d<<7,d=h[m+7&7],u^=(d^=d<<13)^d<<9,h[m]=u,c.i=m+1&7,u},function(d,u){var h,m=[];if(u===(0|u))m[0]=u;else for(u=""+u,h=0;h<u.length;++h)m[7&h]=m[7&h]<<15^u.charCodeAt(h)+m[h+1&7]<<13;for(;m.length<8;)m.push(0);for(h=0;h<8&&m[h]===0;++h);for(h==8?m[7]=-1:m[h],d.x=m,d.i=0,h=256;h>0;--h)d.next()}(c,l)}function i(l,c){return c.x=l.x.slice(),c.i=l.i,c}function o(l,c){l==null&&(l=+new Date);var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(u.x&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xorshift7=o})(0,e)}),e3e=zx(function(e){(function(t,r,n){function s(l){var c=this;c.next=function(){var d,u,h=c.w,m=c.X,p=c.i;return c.w=h=h+1640531527|0,u=m[p+34&127],d=m[p=p+1&127],u^=u<<13,d^=d<<17,u^=u>>>15,d^=d>>>12,u=m[p]=u^d,c.i=p,u+(h^h>>>16)|0},function(d,u){var h,m,p,v,g,b=[],y=128;for(u===(0|u)?(m=u,u=null):(u+="\0",m=0,y=Math.max(y,u.length)),p=0,v=-32;v<y;++v)u&&(m^=u.charCodeAt((v+32)%u.length)),v===0&&(g=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,v>=0&&(g=g+1640531527|0,p=(h=b[127&v]^=m+g)==0?p+1:0);for(p>=128&&(b[127&(u&&u.length||0)]=-1),p=127,v=512;v>0;--v)m=b[p+34&127],h=b[p=p+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,b[p]=m^h;d.w=g,d.X=b,d.i=p}(c,l)}function i(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function o(l,c){l==null&&(l=+new Date);var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(u.X&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.xor4096=o})(0,e)}),t3e=zx(function(e){(function(t,r,n){function s(l){var c=this,d="";c.next=function(){var h=c.b,m=c.c,p=c.d,v=c.a;return h=h<<25^h>>>7^m,m=m-p|0,p=p<<24^p>>>8^v,v=v-h|0,c.b=h=h<<20^h>>>12^m,c.c=m=m-p|0,c.d=p<<16^m>>>16^v,c.a=v-h|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=0|l):d+=l;for(var u=0;u<d.length+20;u++)c.b^=0|d.charCodeAt(u),c.next()}function i(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function o(l,c){var d=new s(l),u=c&&c.state,h=function(){return(d.next()>>>0)/4294967296};return h.double=function(){do var m=((d.next()>>>11)+(d.next()>>>0)/4294967296)/2097152;while(m===0);return m},h.int32=d.next,h.quick=h,u&&(typeof u=="object"&&i(u,d),h.state=function(){return i(d,{})}),h}r&&r.exports?r.exports=o:this.tychei=o})(0,e)}),Fp=zx(function(e){(function(t,r){var n,s=this,i=256,o=6,l="random",c=r.pow(i,o),d=r.pow(2,52),u=2*d,h=i-1;function m(y,C,w){var k=[],S=g(function T(A,L){var P,O=[],Z=typeof A;if(L&&Z=="object")for(P in A)try{O.push(T(A[P],L-1))}catch{}return O.length?O:Z=="string"?A:A+"\0"}((C=C==1?{entropy:!0}:C||{}).entropy?[y,b(t)]:y??function(){try{var T;return n&&(T=n.randomBytes)?T=T(i):(T=new Uint8Array(i),(s.crypto||s.msCrypto).getRandomValues(T)),b(T)}catch{var A=s.navigator,L=A&&A.plugins;return[+new Date,s,L,s.screen,b(t)]}}(),3),k),D=new p(k),E=function(){for(var T=D.g(o),A=c,L=0;T<d;)T=(T+L)*i,A*=i,L=D.g(1);for(;T>=u;)T/=2,A/=2,L>>>=1;return(T+L)/A};return E.int32=function(){return 0|D.g(4)},E.quick=function(){return D.g(4)/4294967296},E.double=E,g(b(D.S),t),(C.pass||w||function(T,A,L,P){return P&&(P.S&&v(P,D),T.state=function(){return v(D,{})}),L?(r[l]=T,A):T})(E,S,"global"in C?C.global:this==r,C.state)}function p(y){var C,w=y.length,k=this,S=0,D=k.i=k.j=0,E=k.S=[];for(w||(y=[w++]);S<i;)E[S]=S++;for(S=0;S<i;S++)E[S]=E[D=h&D+y[S%w]+(C=E[S])],E[D]=C;(k.g=function(T){for(var A,L=0,P=k.i,O=k.j,Z=k.S;T--;)A=Z[P=h&P+1],L=L*i+Z[h&(Z[P]=Z[O=h&O+A])+(Z[O]=A)];return k.i=P,k.j=O,L})(i)}function v(y,C){return C.i=y.i,C.j=y.j,C.S=y.S.slice(),C}function g(y,C){for(var w,k=y+"",S=0;S<k.length;)C[h&S]=h&(w^=19*C[h&S])+k.charCodeAt(S++);return b(C)}function b(y){return String.fromCharCode.apply(0,y)}if(r["seed"+l]=m,g(r.random(),t),e.exports){e.exports=m;try{n=require("crypto")}catch{}}})([],Math)});Fp.alea=X5e,Fp.xor128=Q5e,Fp.xorwow=J5e,Fp.xorshift7=Z5e,Fp.xor4096=e3e,Fp.tychei=t3e;var OS=Fp.alea,b4=function(){function e(t,r,n,s,i){this.mean=t,this.stdDev=r,this.dtype=n,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=OS(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var t=this.nextVal;return this.nextVal=NaN,t}for(var r,n,s=!1;!s;){var i=void 0,o=void 0,l=void 0;do l=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o;while(l>=1||l===0);var c=Math.sqrt(-2*Math.log(l)/l);r=this.mean+this.stdDev*i*c,n=this.mean+this.stdDev*o*c,this.truncated&&!this.isValidTruncated(r)||(s=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(r)},e.prototype.convertValue=function(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)},e.prototype.isValidTruncated=function(t){return t<=this.upper&&t>=this.lower},e}(),r3e=function(){function e(t,r,n,s){this.alpha=t,this.beta=1/r,this.dtype=n;var i=s||Math.random();this.randu=OS(i.toString()),this.randn=new b4(0,1,n,!1,this.randu()),this.d=t<1?t+2/3:t-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var t,r,n,s,i,o;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,r=1-.331*(t=s*s)*t,n=.5*t+this.d*(1-o+Math.log(o)),(i=this.randu())<r||Math.log(i)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(t){return this.dtype==="float32"?t:Math.round(t)},e}(),a3e=function(){function e(t,r,n,s){var i=this;if(t===void 0&&(t=0),r===void 0&&(r=1),this.canReturnFloat=function(){return i.dtype==null||i.dtype==="float32"},this.min=t,this.range=r-t,this.dtype=n,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+t+" - "+r+" <= 1 and dtype is not float");this.random=OS(s)}return e.prototype.convertValue=function(t){return this.canReturnFloat()?t:Math.round(t)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function fa(e,t,r){return t===void 0&&(t="float32"),t=t||"float32",JW(e),new Ey(e,t,r)}function n3e(e,t){t===void 0&&(t=!1),console.log(e.toString(t))}var iG=et({batchToSpaceND_:function(e,t,r){var n=Re(e,"x","batchToSpaceND"),s=t.reduce(function(i,o){return i*o});return He(n.rank>=1+t.length,function(){return"input rank is "+n.rank+" but should be > than blockShape.length "+t.length}),He(r.length===t.length,function(){return"crops.length is "+r.length+" but should be equal to blockShape.length  "+t.length}),He(n.shape[0]%s==0,function(){return"input tensor batch is "+n.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+s}),ht.runKernelFunc(function(i){return i.batchToSpaceND(n,t,r)},{$x:n},function(i){return{$x:function(){return i.spaceToBatchND(t,r)}}})}}),s3e=et({broadcastTo_:function(e,t){var r=Re(e,"broadcastTo","x"),n=r.shape;if(t.some(function(c){return!(c>0)||c%1!=0}))throw new Error("broadcastTo(): Invalid broadcast shape ["+t+"].");if(t.length<r.rank)throw new Error("broadcastTo(): shape.length="+t.length+" < input.rank="+r.rank+".");if(t.length>r.rank){for(var s=r.shape.slice();s.length<t.length;)s.unshift(1);r=r.reshape(s)}for(var i=Array.from(t),o=t.length-1;o>=0;o--)if(r.shape[o]===t[o])i[o]=1;else if(r.shape[o]!==1)throw new Error("broadcastTo(): ["+n+"] cannot be broadcast to ["+t+"].");var l=i.map(function(c,d){return c>1?d:-1}).filter(function(c){return c>=0});return l.length===0?r.clone():ht.runKernelFunc(function(c){return c.tile(r,i)},{input:r},function(c){return{input:function(){return c.sum(l,!0)}}})}}),i3e=et({cast_:function(e,t){var r=Re(e,"x","cast");if(!JDe(t))throw new Error("Failed to cast to unknown dtype "+t);if(t==="string"&&r.dtype!=="string"||t!=="string"&&r.dtype==="string")throw new Error("Only strings can be casted to strings");var n={dtype:t};return ht.runKernelFunc(function(s){return s.cast(r,t)},{x:r},function(s){return{x:function(){return s.clone()}}},"Cast",n)}}),o3e=et({clone_:function(e){var t=Re(e,"x","clone",null);return ht.runKernelFunc(function(){return ht.makeTensorFromDataId(t.dataId,t.shape,t.dtype)},{$x:t},function(r){return{$x:function(){return r.toFloat()}}})}}),l3e=et({cumsum_:function(e,t,r,n){t===void 0&&(t=0),r===void 0&&(r=!1),n===void 0&&(n=!1);var s=Re(e,"x","cumsum"),i=rh([t|=0],s.rank),o=s;i!=null&&(o=s.transpose(i));var l=ah(1,s.rank)[0],c=ht.runKernelFunc(function(d){return d.cumsum(o,l,r,n)},{permutedX:o},function(d){return{permutedX:function(){return d.cumsum(t,r,!n)}}});return i!=null&&(c=c.transpose(i)),c}}),c3e=et({depthToSpace_:function(e,t,r){r===void 0&&(r="NHWC");var n=Re(e,"x","depthToSpace"),s=r==="NHWC"?n.shape[1]:n.shape[2],i=r==="NHWC"?n.shape[2]:n.shape[3],o=r==="NHWC"?n.shape[3]:n.shape[1];return He(s*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+s+" and "+t+`  for depthToSpace with input shape
      `+n.shape}),He(i*t>=0,function(){return`Negative dimension size caused by overflow when multiplying
      `+i+" and "+t+` for depthToSpace with input shape
          `+n.shape}),He(o%(t*t)==0,function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+o+" for depthToSpace with input shape "+n.shape}),ht.runKernelFunc(function(l){return l.depthToSpace(n,t,r)},{$x:n})}}),Lc=et({expandDims_:function(e,t){t===void 0&&(t=0);var r=Re(e,"x","expandDims",null);He(t<=r.rank,function(){return"Axis must be <= rank of the tensor"});var n=r.shape.slice();return t<0&&(He(-(r.rank+1)<=t,function(){return"Axis must be in the interval ["+-(r.rank+1)+", "+r.rank+"]"}),t=r.rank+t+1),n.splice(t,0,1),Ad(r,n)}}),oG=et({eye_:function(e,t,r,n){n===void 0&&(n="float32"),t==null&&(t=e);for(var s=fa([e,t],n),i=e<=t?e:t,o=0;o<i;++o)s.set(1,o,o);var l=s.toTensor().as2D(e,t);if(r==null)return l;if(r.length===1)return u0(Lc(l,0),[r[0],1,1]);if(r.length===2)return u0(Lc(Lc(l,0),0),[r[0],r[1],1,1]);if(r.length===3)return u0(Lc(Lc(Lc(l,0),0),0),[r[0],r[1],r[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+r.length+"D.")}}),d3e=et({multinomial_:function(e,t,r,n){n===void 0&&(n=!1);var s=Re(e,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+i+".");if(o>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+o);r=r||Math.random();var l=o===1?s.as2D(1,-1):s,c=ht.runKernelFunc(function(d){return d.multinomial(l,n,t,r)},{logits2D:l});return o===1?c.as1D():c}}),G5=et({oneHot_:function(e,t,r,n){if(r===void 0&&(r=1),n===void 0&&(n=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var s=Re(e,"indices","oneHot","int32"),i=s.shape.concat([t]);return s=s.flatten(),ht.runKernelFunc(function(o){return o.oneHot(s,t,r,n)},{$indices:s},function(o){return{$indices:function(){return Ln(s.shape,"float32")}}}).reshape(i)}}),Hx=et({pad_:function(e,t,r){r===void 0&&(r=0);var n=Re(e,"x","pad");if(n.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var s={paddings:t,constantValue:r};return ht.runKernelFunc(function(i){return i.pad(n,t,r)},{x:n},function(i){var o=t.map(function(l){return l[0]});return{x:function(){return i.slice(o,n.shape)}}},"PadV2",s)}}),u3e=et({pad1d_:function(e,t,r){return r===void 0&&(r=0),He(t.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Hx(e,[t],r)}}),h3e=et({pad2d_:function(e,t,r){return r===void 0&&(r=0),He(t.length===2&&t[0].length===2&&t[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Hx(e,t,r)}}),f3e=et({pad3d_:function(e,t,r){return r===void 0&&(r=0),He(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Hx(e,t,r)}}),m3e=et({pad4d_:function(e,t,r){return r===void 0&&(r=0),He(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Hx(e,t,r)}}),p3e=et({rand_:function(e,t,r){var n=Fr(e),s=null;if(r==null||r==="float32")s=new Float32Array(n);else if(r==="int32")s=new Int32Array(n);else{if(r!=="bool")throw new Error("Unknown data type "+r);s=new Uint8Array(n)}for(var i=0;i<n;i++)s[i]=t();return ht.makeTensor(s,e,r)}}),x3e=et({randomNormal_:function(e,t,r,n,s){if(t===void 0&&(t=0),r===void 0&&(r=1),n!=null&&n==="bool")throw new Error("Unsupported data type "+n);for(var i=new b4(t,r,n,!1,s),o=fa(e,n),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),v3e=et({randomGamma_:function(e,t,r,n,s){if(r===void 0&&(r=1),n===void 0&&(n="float32"),r==null&&(r=1),n==null&&(n="float32"),n!=="float32"&&n!=="int32")throw new Error("Unsupported data type "+n);for(var i=new r3e(t,r,n,s),o=fa(e,n),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),lG=et({randomUniform_:function(e,t,r,n,s){t===void 0&&(t=0),r===void 0&&(r=1),n===void 0&&(n="float32");for(var i=fa(e,n),o=new a3e(t,r,null,s),l=0;l<i.values.length;l++)i.values[l]=o.nextValue();return i.toTensor()}}),Ad=et({reshape_:function(e,t){var r=Re(e,"x","reshape",null);t=XDe(t,r.size),He(r.size===Fr(t),function(){return"new shape and old shape must have the same number of elements."});var n={shape:t};return ht.runKernelFunc(function(s){return s.reshape(r,t)},{x:r},function(s){return{x:function(){return s.reshape(r.shape)}}},"Reshape",n)}}),cG=et({spaceToBatchND_:function(e,t,r){var n=Re(e,"x","spaceToBatchND");return He(n.rank>=1+t.length,function(){return"input rank "+n.rank+" should be > than [blockShape] "+t.length}),He(r.length===t.length,function(){return"paddings.shape[0] "+r.length+" must be equal to [blockShape] "+t.length}),He(n.shape.reduce(function(s,i,o){return o>0&&o<=t.length?s&&(i+r[o-1][0]+r[o-1][1])%t[o-1]==0:s},!0),function(){return"input spatial dimensions "+n.shape.slice(1)+" with paddings "+r.toString()+" must be divisible by blockShapes "+t.toString()}),ht.runKernelFunc(function(s){return s.spaceToBatchND(n,t,r)},{$x:n},function(s){return{$x:function(){return s.batchToSpaceND(t,r)}}})}}),dG=et({squeeze_:function(e,t){var r=Re(e,"x","squeeze");return Ad(r,$p(r.shape,t).newShape)}}),rc=et({stack_:function(e,t){t===void 0&&(t=0);var r=e2(e,"tensors","stack");if(He(r.length>=1,function(){return"Pass at least one tensor to tf.stack"}),r.length===1)return r[0].expandDims(t);var n=r[0].rank,s=r[0].shape,i=r[0].dtype;He(t<=n,function(){return"Axis must be <= rank of the tensor"}),r.forEach(function(l){un(s,l.shape,"All tensors passed to stack must have matching shapes")}),r.forEach(function(l){He(i===l.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var o=r.map(function(l){return l.expandDims(t)});return di(o,t)}}),u0=et({tile_:function(e,t){var r=Re(e,"x","tile",null);He(r.rank===t.length,function(){return"Error in transpose: rank of input "+r.rank+" must match length of reps "+t+"."});var n=[r],s={reps:t};return ht.runKernelFunc(function(i,o){var l=i.tile(r,t);return o([r]),l},{x:r},function(i,o){var l=o[0];return{x:function(){var c=$a(l);if(l.rank===1)for(var d=0;d<t[0];++d)c=c.add(i.slice([d*l.shape[0]],[l.shape[0]]));else if(l.rank===2)for(d=0;d<t[0];++d)for(var u=0;u<t[1];++u)c=c.add(i.slice([d*l.shape[0],u*l.shape[1]],[l.shape[0],l.shape[1]]));else if(l.rank===3)for(d=0;d<t[0];++d)for(u=0;u<t[1];++u)for(var h=0;h<t[2];++h)c=c.add(i.slice([d*l.shape[0],u*l.shape[1],h*l.shape[2]],[l.shape[0],l.shape[1],l.shape[2]]));else{if(l.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+l.rank+" tensors yet.");for(d=0;d<t[0];++d)for(u=0;u<t[1];++u)for(h=0;h<t[2];++h)for(var m=0;m<t[3];++m)c=c.add(i.slice([d*l.shape[0],u*l.shape[1],h*l.shape[2],m*l.shape[3]],[l.shape[0],l.shape[1],l.shape[2],l.shape[3]]))}return c}}},"Tile",s,n)}}),g3e=et({truncatedNormal_:function(e,t,r,n,s){if(t===void 0&&(t=0),r===void 0&&(r=1),n!=null&&n==="bool")throw new Error("Unsupported data type "+n);for(var i=new b4(t,r,n,!0,s),o=fa(e,n),l=0;l<o.values.length;l++)o.values[l]=i.nextValue();return o.toTensor()}}),ui=et({unstack_:function(e,t){t===void 0&&(t=0),t=t||0;var r=Re(e,"x","unstack");He(t>=-r.shape.length&&t<r.shape.length,function(){return"Axis = "+t+" is not in [-"+r.shape.length+", "+r.shape.length+")"}),t<0&&(t+=r.shape.length);var n={axis:t};return ht.runKernelFunc(function(s){return s.unstack(r,t)},{x:r},function(s){return{x:function(){return rc(s,t)}}},"Unpack",n)}}),b3e=function(e,t){return Pr(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h;return Or(this,function(m){switch(m.label){case 0:return r=Re(e,"x","setdiff1d"),n=Re(t,"y","setdiff1d"),He(r.dtype===n.dtype,function(){return"x and y should have the same dtype, but got x ("+r.dtype+") and y ("+n.dtype+")."}),He(r.rank===1,function(){return"x should be 1D tensor, but got x ("+r.shape+")."}),He(n.rank===1,function(){return"y should be 1D tensor, but got y ("+n.shape+")."}),[4,r.data()];case 1:return s=m.sent(),[4,n.data()];case 2:for(i=m.sent(),o=new Set(i),l=0,u=0;u<s.length;u++)o.has(s[u])||l++;for(c=new Ey([l],r.dtype),d=new Ey([l],"int32"),u=0,h=0;u<s.length;u++)o.has(s[u])||(c.values[h]=s[u],d.values[h]=u,h++);return[2,[c.toTensor(),d.toTensor()]]}})})};function r2(e,t,r,n){n===void 0&&(n=!0);var s=[];if(n)(s=s.concat(t.slice(0))).push(e[0]/r),s=s.concat(e.slice(1));else{s=s.concat(e[0]);for(var i=t.length,o=0;o<i;++o)s=s.concat([e[o+1]/t[o],t[o]]);s=s.concat(e.slice(i+1))}return s}function a2(e,t,r){r===void 0&&(r=!0);var n=[];if(r){n.push(t);for(var s=t+1;s<e;++s)s<=2*t?(n.push(s),n.push(s-(t+1))):n.push(s)}else{var i=[],o=[];for(s=1;s<e;++s)s>=2*t+1||s%2==1?o.push(s):i.push(s);n.push.apply(n,i),n.push(0),n.push.apply(n,o)}return n}function n2(e,t,r,n){n===void 0&&(n=!0);var s=[];n?s.push(e[0]/r):s.push(e[0]*r);for(var i=1;i<e.length;++i)i<=t.length?n?s.push(t[i-1]*e[i]):s.push(e[i]/t[i-1]):s.push(e[i]);return s}function uG(e,t){for(var r=[0],n=0;n<t;++n)r.push(e[n][0]);return r}function hG(e,t,r){for(var n=e.slice(0,1),s=0;s<r;++s)n.push(e[s+1]-t[s][0]-t[s][1]);return n}function fG(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(t.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(e.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var r=t.shape,n=r[r.length-1],s=1,i=0;i<r.length-1;++i)s*=r[i];var o=e.shape,l=r.slice();l.pop();var c=1;for(i=n;i<e.rank;++i)c*=o[i],l.push(o[i]);var d=$u(e.shape).map(function(u){return u/c}).concat([1]).slice(0,n);return[l,s,c,d]}var mG=30;function IE(e){return e<=mG?e:$5(e,Math.floor(Math.sqrt(e)))}function y3e(e,t,r){var n=t.rank>1?t.shape[t.rank-1]:1,s=t.rank>1?t.rank-1:1,i="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+r.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+n+", and batchDim: "+s+".";if(r.rank<s)throw new Error(i+" update.rank < "+s+". ");if(e.length<n+(r.rank-s))throw new Error(i+" Output shape length < "+(n+(r.rank-s)));if(r.rank!==s+e.length-n)throw new Error(i+" update.rank != "+(s+e.length-n));for(var o=0;o<s;++o)if(r.shape[o]!==t.shape[o])throw new Error(i+" updates.shape["+o+"] ("+r.shape[o]+") != indices.shape["+o+"] ("+t.shape[o]+").");for(o=0;o<r.rank-s;++o)if(r.shape[o+s]!==e[o+n])throw new Error(i+" updates.shape["+(o+s)+"] ("+r.shape[o+s]+") != shape["+(o+s)+"] ("+e[o+s]+")")}function j3e(e,t,r){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if(t.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(r.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+r);if(r.length===0){if(t.size===0)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(e.size===0)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}y3e(r,t,e)}function s2(e,t,r){for(var n=t.shape.length,s=n>1?t.shape[n-1]:1,i=r.length,o=1,l=s;l<i;++l)o*=r[l];var c=s<1?1:s;return{sliceRank:s,numUpdates:Fr(t.shape)/c,sliceSize:o,strides:$u(r.slice(0,s)).concat([1]),outputSize:Fr(r)}}function N3e(e,t,r){He(e.rank===t.length,function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."}),He(e.rank===r.length,function(){return"Error in slice"+e.rank+"D: Length of size "+r+" must match the rank of the array ("+e.rank+")."});for(var n=function(i){He(t[i]+r[i]<=e.shape[i],function(){return"Error in slice"+e.rank+"D: begin["+i+"] + size["+i+"] ("+(t[i]+r[i])+") would overflow input.shape["+i+"] ("+e.shape[i]+")"})},s=0;s<e.rank;++s)n(s)}function Z8(e){for(var t=[],r=0;e>0;)1&e&&t.push(r),e/=2,r++;return t}function y4(e,t,r){for(var n=[],s=0;s<e.length;s++)n[s]=Math.ceil((t[s]-e[s])/r[s]);return n}function w3e(e,t,r,n,s){var i=t[s],o=r[s]||1;(e&1<<s||i==null)&&(i=o>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var l=n[s];return i<0&&(i+=l),i=L5(0,i,l-1)}function S3e(e,t,r,n,s){var i=t[s],o=r[s]||1;(e&1<<s||i==null)&&(i=o>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var l=n[s];return i<0&&(i+=l),i=o>0?L5(0,i,l):L5(-1,i,l-1)}function pG(e,t,r){for(var n=r.length,s=0;s<r.length;s++)if(r[s]>1){n=s;break}for(s=n+1;s<r.length;s++)if(t[s]>0||r[s]!==e[s])return!1;return!0}function xG(e,t){for(var r=e.length>0?e[e.length-1]:1,n=0;n<e.length-1;n++)r+=e[n]*t[n];return r}function C3e(e,t){He(U5(e),function(){return"The f passed in variableGrads(f) must be a function"}),He(t==null||Array.isArray(t)&&t.every(function(u){return u instanceof L0}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var r=t!=null;if(!r)for(var n in t=[],ht.registeredVariables)t.push(ht.registeredVariables[n]);var s=r?t.filter(function(u){return!u.trainable}):null,i=t.length;He((t=t.filter(function(u){return u.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+i+" variables is trainable."});var o=ht.gradients(e,t,null,!0),l=o.value,c=o.grads;He(c.some(function(u){return u!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),He(l.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+l.rank+" tensor"});var d={};return t.forEach(function(u,h){c[h]!=null&&(d[u.name]=c[h])}),s?.forEach(function(u){return d[u.name]=null}),{value:l,grads:d}}function MS(e){return ht.customGrad(e)}var jf=et({softmax_:function(e,t){t===void 0&&(t=-1);var r=Re(e,"logits","softmax","float32");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+r.rank+" and dim was "+t);return ht.runKernelFunc(function(n,s){var i=n.softmax(r,t);return s([i]),i},{logits:r},function(n,s){var i=s[0],o=n.mul(i);return{logits:function(){return o.sub(o.sum([t],!0).mul(i))}}},"Softmax",{dim:t},[],[!0])}}),k3e=et({logSoftmax_:function(e,t){t===void 0&&(t=-1);var r=Re(e,"logits","logSoftmax");if(t===-1&&(t=r.rank-1),t!==r.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+r.rank+" and axis was "+t);return MS(function(n,s){var i=n.max(t,!0),o=n.sub(i),l=o.toFloat().sub(o.exp().sum(t,!0).log());return s([l]),{value:l,gradFunc:function(c,d){var u=d[0].exp();return c.sub(c.sum(t,!0).mul(u))}}})(r)}}),vG=function(){function e(t,r){this.backend=t,this.dataMover=r,this.data=new WeakMap,this.dataIdsCount=0}return e.prototype.get=function(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)},e.prototype.set=function(t,r){this.dataIdsCount++,this.data.set(t,r)},e.prototype.has=function(t){return this.data.has(t)},e.prototype.delete=function(t){return this.dataIdsCount--,this.data.delete(t)},e.prototype.numDataIds=function(){return this.dataIdsCount},e}(),gG=function(){function e(){}return e.prototype.time=function(t){return Ot("time")},e.prototype.read=function(t){return Ot("read")},e.prototype.readSync=function(t){return Ot("readSync")},e.prototype.numDataIds=function(){return Ot("numDataIds")},e.prototype.disposeData=function(t){return Ot("disposeData")},e.prototype.write=function(t,r,n){return Ot("write")},e.prototype.move=function(t,r,n,s){return Ot("move")},e.prototype.memory=function(){return Ot("memory")},e.prototype.floatPrecision=function(){return Ot("floatPrecision")},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.batchMatMul=function(t,r,n,s){return Ot("batchMatMul")},e.prototype.fusedBatchMatMul=function(t){return t.a,t.b,t.transposeA,t.transposeB,t.bias,t.activation,t.preluActivationWeights,Ot("fusedBatchMatMul")},e.prototype.slice=function(t,r,n){return Ot("slice")},e.prototype.stridedSlice=function(t,r,n,s){return Ot("stridedSlice")},e.prototype.unstack=function(t,r){return Ot("unstack")},e.prototype.reverse=function(t,r){return Ot("reverse")},e.prototype.concat=function(t,r){return Ot("concat")},e.prototype.neg=function(t){return Ot("neg")},e.prototype.add=function(t,r){return Ot("add")},e.prototype.addN=function(t){return Ot("addN")},e.prototype.subtract=function(t,r){return Ot("subtract")},e.prototype.multiply=function(t,r){return Ot("multiply")},e.prototype.realDivide=function(t,r){return Ot("realDivide")},e.prototype.floorDiv=function(t,r){return Ot("floorDiv")},e.prototype.sum=function(t,r){return Ot("sum")},e.prototype.prod=function(t,r){return Ot("prod")},e.prototype.unsortedSegmentSum=function(t,r,n){return Ot("unsortedSegmentSum")},e.prototype.argMin=function(t,r){return Ot("argMin")},e.prototype.argMax=function(t,r){return Ot("argMax")},e.prototype.equal=function(t,r){return Ot("equal")},e.prototype.notEqual=function(t,r){return Ot("notEqual")},e.prototype.less=function(t,r){return Ot("less")},e.prototype.lessEqual=function(t,r){return Ot("lessEqual")},e.prototype.greater=function(t,r){return Ot("greater")},e.prototype.greaterEqual=function(t,r){return Ot("greaterEqual")},e.prototype.logicalNot=function(t){return Ot("logicalNot")},e.prototype.logicalAnd=function(t,r){return Ot("logicalAnd")},e.prototype.logicalOr=function(t,r){return Ot("logicalOr")},e.prototype.where=function(t){return Ot("where")},e.prototype.select=function(t,r,n){return Ot("select")},e.prototype.topk=function(t,r,n){return Ot("topk")},e.prototype.min=function(t,r){return Ot("min")},e.prototype.minimum=function(t,r){return Ot("minimum")},e.prototype.mod=function(t,r){return Ot("mod")},e.prototype.max=function(t,r){return Ot("max")},e.prototype.maximum=function(t,r){return Ot("maximum")},e.prototype.all=function(t,r){return Ot("all")},e.prototype.any=function(t,r){return Ot("any")},e.prototype.squaredDifference=function(t,r){return Ot("squaredDifference")},e.prototype.ceil=function(t){return Ot("ceil")},e.prototype.floor=function(t){return Ot("floor")},e.prototype.round=function(t){return Ot("round")},e.prototype.sign=function(t){return Ot("sign")},e.prototype.isNaN=function(t){return Ot("isNaN")},e.prototype.isInf=function(t){return Ot("isInf")},e.prototype.isFinite=function(t){return Ot("isFinite")},e.prototype.pow=function(t,r){return Ot("pow")},e.prototype.exp=function(t){return Ot("exp")},e.prototype.expm1=function(t){return Ot("expm1")},e.prototype.softmax=function(t,r){return Ot("softmax")},e.prototype.log=function(t){return Ot("log")},e.prototype.log1p=function(t){return Ot("log1p")},e.prototype.sqrt=function(t){return Ot("sqrt")},e.prototype.rsqrt=function(t){return Ot("rsqrt")},e.prototype.square=function(t){return Ot("square")},e.prototype.reciprocal=function(t){return Ot("reciprocal")},e.prototype.relu=function(t){return Ot("relu")},e.prototype.relu6=function(t){return Ot("relu6")},e.prototype.prelu=function(t,r){return Ot("prelu")},e.prototype.elu=function(t){return Ot("elu")},e.prototype.eluDer=function(t,r){return Ot("eluDer")},e.prototype.selu=function(t){return Ot("selu")},e.prototype.int=function(t){return Ot("int")},e.prototype.clip=function(t,r,n){return Ot("clip")},e.prototype.abs=function(t){return Ot("abs")},e.prototype.complexAbs=function(t){return Ot("complexAbs")},e.prototype.sigmoid=function(t){return Ot("sigmoid")},e.prototype.softplus=function(t){return Ot("softplus")},e.prototype.sin=function(t){return Ot("sin")},e.prototype.cos=function(t){return Ot("cos")},e.prototype.tan=function(t){return Ot("tan")},e.prototype.asin=function(t){return Ot("asin")},e.prototype.acos=function(t){return Ot("acos")},e.prototype.atan=function(t){return Ot("atan")},e.prototype.atan2=function(t,r){return Ot("atan2")},e.prototype.sinh=function(t){return Ot("sinh")},e.prototype.cosh=function(t){return Ot("cosh")},e.prototype.tanh=function(t){return Ot("tanh")},e.prototype.asinh=function(t){return Ot("asinh")},e.prototype.acosh=function(t){return Ot("acosh")},e.prototype.atanh=function(t){return Ot("atanh")},e.prototype.erf=function(t){return Ot("erf")},e.prototype.step=function(t,r){return Ot("step")},e.prototype.fusedConv2d=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Ot("fusedConv2d")},e.prototype.conv2d=function(t,r,n){return Ot("conv2d")},e.prototype.conv2dDerInput=function(t,r,n){return Ot("conv2dDerInput")},e.prototype.conv2dDerFilter=function(t,r,n){return Ot("conv2dDerFilter")},e.prototype.fusedDepthwiseConv2D=function(t){return t.input,t.filter,t.convInfo,t.bias,t.activation,t.preluActivationWeights,Ot("fusedDepthwiseConv2D")},e.prototype.depthwiseConv2D=function(t,r,n){return Ot("depthwiseConv2D")},e.prototype.depthwiseConv2DDerInput=function(t,r,n){return Ot("depthwiseConv2DDerInput")},e.prototype.depthwiseConv2DDerFilter=function(t,r,n){return Ot("depthwiseConv2DDerFilter")},e.prototype.conv3d=function(t,r,n){return Ot("conv3d")},e.prototype.conv3dDerInput=function(t,r,n){return Ot("conv3dDerInput")},e.prototype.conv3dDerFilter=function(t,r,n){return Ot("conv3dDerFilter")},e.prototype.maxPool=function(t,r){return Ot("maxPool")},e.prototype.maxPoolBackprop=function(t,r,n,s){return Ot("maxPoolBackprop")},e.prototype.avgPool=function(t,r){return Ot("avgPool")},e.prototype.avgPoolBackprop=function(t,r,n){return Ot("avgPoolBackprop")},e.prototype.avgPool3d=function(t,r){return Ot("avgPool3d")},e.prototype.avgPool3dBackprop=function(t,r,n){return Ot("avgPool3dBackprop")},e.prototype.maxPool3d=function(t,r){return Ot("maxPool3d")},e.prototype.maxPool3dBackprop=function(t,r,n,s){return Ot("maxPool3dBackprop")},e.prototype.reshape=function(t,r){return Ot("reshape")},e.prototype.cast=function(t,r){return Ot("cast")},e.prototype.tile=function(t,r){return Ot("tile")},e.prototype.pad=function(t,r,n){return Ot("pad")},e.prototype.transpose=function(t,r){return Ot("transpose")},e.prototype.gather=function(t,r,n){return Ot("gather")},e.prototype.gatherND=function(t,r){return Ot("gatherND")},e.prototype.scatterND=function(t,r,n){return Ot("scatterND")},e.prototype.batchToSpaceND=function(t,r,n){return Ot("batchToSpaceND")},e.prototype.spaceToBatchND=function(t,r,n){return Ot("spaceToBatchND")},e.prototype.resizeBilinear=function(t,r,n,s){return Ot("resizeBilinear")},e.prototype.resizeBilinearBackprop=function(t,r,n){return Ot("resizeBilinearBackprop")},e.prototype.resizeNearestNeighbor=function(t,r,n,s){return Ot("resizeNearestNeighbor")},e.prototype.resizeNearestNeighborBackprop=function(t,r,n){return Ot("resizeNearestNeighborBackprop")},e.prototype.batchNormalization=function(t,r,n,s,i,o){return Ot("batchNormalization")},e.prototype.localResponseNormalization4D=function(t,r,n,s,i){return Ot("localResponseNormalization4D")},e.prototype.LRNGrad=function(t,r,n,s,i,o,l){return Ot("LRNGrad")},e.prototype.multinomial=function(t,r,n,s){return Ot("multinomial")},e.prototype.oneHot=function(t,r,n,s){return Ot("oneHot")},e.prototype.cumsum=function(t,r,n,s){return Ot("cumsum")},e.prototype.nonMaxSuppression=function(t,r,n,s,i){return Ot("nonMaxSuppression")},e.prototype.fft=function(t){return Ot("fft")},e.prototype.ifft=function(t){return Ot("ifft")},e.prototype.complex=function(t,r){return Ot("complex")},e.prototype.real=function(t){return Ot("real")},e.prototype.imag=function(t){return Ot("imag")},e.prototype.cropAndResize=function(t,r,n,s,i,o){return Ot("cropAndResize")},e.prototype.depthToSpace=function(t,r,n){return Ot("depthToSpace")},e.prototype.split=function(t,r,n){return Ot("split")},e.prototype.sparseToDense=function(t,r,n,s){return Ot("sparseToDense")},e.prototype.diag=function(t){return Ot("diag")},e.prototype.fill=function(t,r,n){return Ot("fill")},e.prototype.onesLike=function(t){return Ot("onesLike")},e.prototype.zerosLike=function(t){return Ot("zerosLike")},e.prototype.linspace=function(t,r,n){return Ot("linspace")},e.prototype.dispose=function(){return Ot("dispose")},e}();function Ot(e){throw new Error("'"+e+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function km(e,t){for(var r=e.length,n=[],s=0;s<r;s++){var i=r-1-s,o=e[i]||1;(t[t.length-1-s]||1)>1&&o===1&&n.unshift(i)}return n}function fi(e,t){for(var r=[],n=0;n<t.length;n++){var s=e[e.length-n-1],i=t.length-n-1,o=t[i];(s==null||s===1&&o>1)&&r.unshift(i)}return r}function Ma(e,t){for(var r=[],n=Math.max(e.length,t.length),s=0;s<n;s++){var i=e[e.length-s-1];i==null&&(i=1);var o=t[t.length-s-1];if(o==null&&(o=1),i===1)r.unshift(o);else if(o===1)r.unshift(i);else{if(i!==o)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");r.unshift(i)}}return r}function Ay(e,t,r,n,s,i,o){o===void 0&&(o="channelsLast");var l,c=l2(t),d=c[0],u=c[1];if(o==="channelsLast")l=[d,u,e[3],e[3]];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);l=[d,u,e[1],e[1]]}return Wx(e,l,r,n,s,i,!1,o)}function i2(e,t,r,n,s,i,o){o===void 0&&(o="NDHWC");var l,c,d=Y5(t),u=d[0],h=d[1],m=d[2];if(o==="NDHWC")c="channelsLast",l=[u,h,m,e[4],e[4]];else{if(o!=="NCDHW")throw new Error("Unknown dataFormat "+o);c="channelsFirst",l=[u,h,m,e[1],e[1]]}return o2(e,l,r,n,s,!1,c,i)}function Wx(e,t,r,n,s,i,o,l){o===void 0&&(o=!1),l===void 0&&(l="channelsLast");var c=[-1,-1,-1,-1],d=c[0],u=c[1],h=c[2],m=c[3];if(l==="channelsLast")d=e[0],u=e[1],h=e[2],m=e[3];else{if(l!=="channelsFirst")throw new Error("Unknown dataFormat "+l);d=e[0],m=e[1],u=e[2],h=e[3]}var p,v=t[0],g=t[1],b=t[3],y=l2(r),C=y[0],w=y[1],k=l2(n),S=k[0],D=k[1],E=h0(v,S),T=h0(g,D),A=function(z,K,B,Q,U,J,Y,oe){var M,V,H;if(typeof z=="number"){M={top:z,bottom:z,left:z,right:z,type:z===0?"VALID":"NUMBER"};var ee=function(de,X,le,Se,ue){Se==null&&(Se=bG(de,X,le));var se=de[0],ye=de[1],Ne=Gb((se-X+2*Se)/le+1,ue);He(Vs(Ne),function(){return"The output # of rows ("+Ne+") must be an integer. Change the stride and/or zero pad parameters"});var Ue=Gb((ye-X+2*Se)/le+1,ue);return He(Vs(Ue),function(){return"The output # of columns ("+Ue+") must be an integer. Change the stride and/or zero pad parameters"}),[Ne,Ue]}([K,B],J,Q,z,oe);V=ee[0],H=ee[1]}else if(z==="same"){V=Math.ceil(K/Q),H=Math.ceil(B/U);var re=Math.max(0,(V-1)*Q+J-K),ae=Math.max(0,(H-1)*U+Y-B),ne=Math.floor(re/2),ie=re-ne,G=Math.floor(ae/2);M={top:ne,bottom:ie,left:G,right:ae-G,type:"SAME"}}else{if(z!=="valid")throw Error("Unknown padding parameter: "+z);M={top:0,bottom:0,left:0,right:0,type:"VALID"},V=Math.ceil((K-J+1)/Q),H=Math.ceil((B-Y+1)/U)}return{padInfo:M,outHeight:V,outWidth:H}}(s,u,h,C,w,E,T,i),L=A.padInfo,P=A.outHeight,O=A.outWidth,Z=o?b*m:b;return l==="channelsFirst"?p=[d,Z,P,O]:l==="channelsLast"&&(p=[d,P,O,Z]),{batchSize:d,dataFormat:l,inHeight:u,inWidth:h,inChannels:m,outHeight:P,outWidth:O,outChannels:Z,padInfo:L,strideHeight:C,strideWidth:w,filterHeight:v,filterWidth:g,effectiveFilterHeight:E,effectiveFilterWidth:T,dilationHeight:S,dilationWidth:D,inShape:e,outShape:p,filterShape:t}}function o2(e,t,r,n,s,i,o,l){i===void 0&&(i=!1),o===void 0&&(o="channelsLast");var c=[-1,-1,-1,-1,-1],d=c[0],u=c[1],h=c[2],m=c[3],p=c[4];if(o==="channelsLast")d=e[0],u=e[1],h=e[2],m=e[3],p=e[4];else{if(o!=="channelsFirst")throw new Error("Unknown dataFormat "+o);d=e[0],p=e[1],u=e[2],h=e[3],m=e[4]}var v,g=t[0],b=t[1],y=t[2],C=t[4],w=Y5(r),k=w[0],S=w[1],D=w[2],E=Y5(n),T=E[0],A=E[1],L=E[2],P=h0(g,T),O=h0(b,A),Z=h0(y,L),z=function(Y,oe,M,V,H,ee,re,ae,ne,ie,G){var de,X,le,Se;if(typeof Y=="number"){de={top:Y,bottom:Y,left:Y,right:Y,front:Y,back:Y,type:Y===0?"VALID":"NUMBER"};var ue=function(dt,Tt,At,Vt,xe,he){xe==null&&(xe=bG(dt,Tt,Vt));var ve=dt[0],pe=dt[1],De=dt[2],Ye=Gb((ve-Tt+2*xe)/Vt+1,he);He(Vs(Ye),function(){return"The output # of depths ("+Ye+") must be an integer. Change the stride and/or zero pad parameters"});var Nt=Gb((pe-Tt+2*xe)/Vt+1,he);He(Vs(Nt),function(){return"The output # of rows ("+Nt+") must be an integer. Change the stride and/or zero pad parameters"});var Je=Gb((De-Tt+2*xe)/Vt+1,he);return He(Vs(Je),function(){return"The output # of columns ("+Je+") must be an integer. Change the stride and/or zero pad parameters"}),[Ye,Nt,Je,At]}([oe,M,V,1],ae,1,H,Y,G);X=ue[0],le=ue[1],Se=ue[2]}else if(Y==="same"){X=Math.ceil(oe/H),le=Math.ceil(M/ee),Se=Math.ceil(V/re);var se=(X-1)*H+ae-oe,ye=(le-1)*ee+ne-M,Ne=(Se-1)*re+ie-V,Ue=Math.floor(se/2),Qe=se-Ue,ot=Math.floor(ye/2),xt=ye-ot,Le=Math.floor(Ne/2);de={top:ot,bottom:xt,left:Le,right:Ne-Le,front:Ue,back:Qe,type:"SAME"}}else{if(Y!=="valid")throw Error("Unknown padding parameter: "+Y);de={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},X=Math.ceil((oe-ae+1)/H),le=Math.ceil((M-ne+1)/ee),Se=Math.ceil((V-ie+1)/re)}return{padInfo:de,outDepth:X,outHeight:le,outWidth:Se}}(s,u,h,m,k,S,D,P,O,Z,l),K=z.padInfo,B=z.outDepth,Q=z.outHeight,U=z.outWidth,J=i?C*p:C;return o==="channelsFirst"?v=[d,J,B,Q,U]:o==="channelsLast"&&(v=[d,B,Q,U,J]),{batchSize:d,dataFormat:o,inDepth:u,inHeight:h,inWidth:m,inChannels:p,outDepth:B,outHeight:Q,outWidth:U,outChannels:J,padInfo:K,strideDepth:k,strideHeight:S,strideWidth:D,filterDepth:g,filterHeight:b,filterWidth:y,effectiveFilterDepth:P,effectiveFilterHeight:O,effectiveFilterWidth:Z,dilationDepth:T,dilationHeight:A,dilationWidth:L,inShape:e,outShape:v,filterShape:t}}function bG(e,t,r,n){n===void 0&&(n=1);var s=h0(t,n);return Math.floor((e[0]*(r-1)-r+s)/2)}function l2(e){return typeof e=="number"?[e,e,e]:e.length===2?[e[0],e[1],1]:e}function Y5(e){return typeof e=="number"?[e,e,e]:e}function h0(e,t){return t<=1?e:e+(e-1)*(t-1)}function Gb(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function U0(e){var t=l2(e),r=t[0],n=t[1],s=t[2];return r===1&&n===1&&s===1}function vl(e,t){return U0(e)||U0(t)}function j4(e){if(e==="NHWC")return"channelsLast";if(e==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function yG(e,t,r){if(t==="complex64"){if(e.dtype==="complex64")return e.clone();var n=Ln(e.shape),s=e.toFloat(),i=r.complex(s,n);return n.dispose(),s.dispose(),i}if(!ZDe(e.dtype,t))return ht.makeTensorFromDataId(e.dataId,e.shape,t);if(e.dtype==="complex64"){var o=r.real(e);return i=o.cast(t),o.dispose(),i}if(t==="int32")return r.int(e);if(t==="bool"){var l=Nr(0,e.dtype);return i=r.notEqual(e,l),l.dispose(),i}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function K5(e,t){return ht.makeTensorFromDataId(e.dataId,t,e.dtype)}function jG(e,t,r){var n=(t-e)/(r-1),s=h1(r,"float32");s[0]=e;for(var i=1;i<s.length;i++)s[i]=s[i-1]+n;return ti(s,"float32")}function X5(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var r=new Float32Array(2*e.length),n=0;n<r.length;n+=2)r[n]=e[n/2],r[n+1]=t[n/2];return r}function eB(e,t){return{real:e[2*t],imag:e[2*t+1]}}function _3e(e,t,r,n){e[2*n]=t,e[2*n+1]=r}function E3e(e,t,r){var n=(r?2:-2)*Math.PI*(e/t);return{real:Math.cos(n),imag:Math.sin(n)}}function D3e(e,t,r){var n=function(i,o,l){return function(c,d,u){for(var h=0,m=c.length,p=0,v=!1;h<m;){var g=u(d,c[p=h+(m-h>>>1)]);g>0?h=p+1:(m=p,v=!g)}return v?h:-h-1}(i,o,l||A3e)}(e,t,r),s=n<0?-(n+1):n;e.splice(s,0,t)}function A3e(e,t){return e>t?1:e<t?-1:0}function N4(e,t,r,n,s){return NG(e,t,r,n,s,0).selectedIndices}function w4(e,t,r,n,s,i){var o=NG(e,t,r,n,s,i);return o.numValidOutputs.dispose(),{selectedIndices:o.selectedIndices,selectedScores:o.selectedScores}}function NG(e,t,r,n,s,i,o,l){l===void 0&&(l=!1);for(var c=Array.from(t).map(function(k,S){return{score:k,boxIndex:S,suppressBeginIndex:0}}).filter(function(k){return k.score>s}).sort(tB),d=i>0?-.5/i:0,u=[],h=[];u.length<r&&c.length>0;){var m=c.pop(),p=m.score,v=m.boxIndex,g=m.suppressBeginIndex;if(p<s)break;for(var b=!1,y=u.length-1;y>=g;--y){var C=T3e(e,v,u[y]);if(C>=n){b=!0;break}if(m.score=m.score*I3e(n,d,C),m.score<=s)break}m.suppressBeginIndex=u.length,b||(m.score===p?(u.push(v),h.push(m.score)):m.score>s&&D3e(c,m,tB))}var w=u.length;return l&&(u.fill(0,w),h.fill(0,w)),{selectedIndices:ti(u,"int32"),selectedScores:ti(h,"float32"),numValidOutputs:Nr(w,"int32")}}function T3e(e,t,r){var n=e.subarray(4*t,4*t+4),s=e.subarray(4*r,4*r+4),i=Math.min(n[0],n[2]),o=Math.min(n[1],n[3]),l=Math.max(n[0],n[2]),c=Math.max(n[1],n[3]),d=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),h=Math.max(s[0],s[2]),m=Math.max(s[1],s[3]),p=(l-i)*(c-o),v=(h-d)*(m-u);if(p<=0||v<=0)return 0;var g=Math.max(i,d),b=Math.max(o,u),y=Math.min(l,h),C=Math.min(c,m),w=Math.max(y-g,0)*Math.max(C-b,0);return w/(p+v-w)}function I3e(e,t,r){var n=Math.exp(t*r*r);return r<=e?n:0}function tB(e,t){return e.score-t.score||e.score===t.score&&t.boxIndex-e.boxIndex}function wG(e,t,r){var n=new Array(e.rank).fill(0),s=e.shape.slice();return t.map(function(i){s[r]=i;var o=e.slice(n,s);return n[r]+=i,o})}function SG(e,t){for(var r=new Array(e.rank),n=0;n<r.length;n++)r[n]=e.shape[n]*t[n];var s=fa(r,e.dtype);for(n=0;n<s.values.length;++n){for(var i=s.indexToLoc(n),o=new Array(e.rank),l=0;l<o.length;l++)o[l]=i[l]%e.shape[l];var c=e.locToIndex(o);s.values[n]=e.values[c]}return s.toTensor()}function CG(e,t,r,n,s){for(var i=t[t.length-1],o=[e.length/i,i],l=o[0],c=o[1],d=_y(r,l*n),u=_y("int32",l*n),h=0;h<l;h++){for(var m=h*c,p=e.subarray(m,m+c),v=[],g=0;g<p.length;g++)v.push({value:p[g],index:g});v.sort(function(k,S){return S.value-k.value});var b=h*n,y=d.subarray(b,b+n),C=u.subarray(b,b+n);for(g=0;g<n;g++)y[g]=v[g].value,C[g]=v[g].index}var w=t.slice();return w[w.length-1]=n,[Ki(d,w,r),Ki(u,w,"int32")]}function S4(e,t){for(var r=[],n=0;n<t.length;n++)t[n]&&r.push(n);var s=fa(e,"int32"),i=fa([r.length,e.length],"int32");for(n=0;n<r.length;n++){var o=s.indexToLoc(r[n]),l=n*e.length;i.values.set(o,l)}return i.toTensor()}var P3e=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map(function(s,i){return"T"+i});var r=[];this.variableNames.forEach(function(s){r.push("float v"+s+" = get"+s+"AtOutCoords();")});var n=this.variableNames.map(function(s){return"v"+s}).join(" + ");this.userCode=`
      void main() {
        `+r.join(`
        `)+`

        float result = `+n+`;
        setOutput(result);
      }
    `},O3e=function(e,t){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=t.map(function(s,i){return"T"+i});var r=[];this.variableNames.forEach(function(s){r.push("vec4 v"+s+" = get"+s+"AtOutCoords();")});var n=this.variableNames.map(function(s){return"v"+s}).join(" + ");this.userCode=`
      void main() {
        `+r.join(`
        `)+`

        vec4 result = `+n+`;
        setOutput(result);
      }
    `},M3e=function(e,t,r){this.variableNames=["A"];var n=e.windowSize,s=e.batchSize,i=e.inSize,o=Math.ceil(i/n);r||this.variableNames.push("bestIndicesA"),this.outputShape=[s,o];var l=t==="max"?">":"<",c=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+n+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+n+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+l+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function kG(e,t){return["x","y","z","w","u","v"].slice(0,t).map(function(r){return e+"."+r})}function ll(e,t){return t===1?[e]:kG(e,t)}function wo(){var e,t,r,n,s,i,o,l,c,d;return zt().getNumber("WEBGL_VERSION")===2?(e="#version 300 es",t="in",r="out",n="in",s="texture",i="outputColor",o="out vec4 outputColor;",l=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",d=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(e="",t="attribute",r="varying",n="varying",s="texture2D",i="gl_FragColor",o="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,d=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:e,attribute:t,varyingVs:r,varyingFs:n,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:l,defineSpecialInf:c,defineRound:d}}function Zp(e,t,r){r===void 0&&(r="index");var n=$u(t);return n.map(function(s,i){return"int "+e[i]+" = "+r+" / "+s+"; "+(i===n.length-1?"int "+e[i+1]+" = "+r+" - "+e[i]+" * "+s:"index -= "+e[i]+" * "+s)+";"}).join("")}function C4(e){var t=$u(e).map(function(r){return r.toString()});return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+t[0]+" + coords.y * "+t[1]+` + coords.z;
  }
`}var _G=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function R3e(e,t,r,n){var s=[];e.forEach(function(p){var v=Fr(p.shapeInfo.logicalShape);p.shapeInfo.isUniform?s.push("uniform float "+p.name+(v>1?"["+v+"]":"")+";"):(s.push("uniform sampler2D "+p.name+";"),s.push("uniform int offset"+p.name+";"))});var i,o,l=s.join(`
`),c=e.map(function(p){return function(v,g,b){b===void 0&&(b=!1);var y="";y+=b?EG(v):qv(v);var C=v.shapeInfo.logicalShape,w=g.logicalShape;return C.length<=w.length&&(y+=b?function(k,S){var D,E=k.name,T=E.charAt(0).toUpperCase()+E.slice(1),A="get"+T+"AtOutCoords",L=k.shapeInfo.logicalShape.length,P=S.logicalShape.length,O=km(k.shapeInfo.logicalShape,S.logicalShape),Z=Mn(P),z=P-L,K=["x","y","z","w","u","v"];D=L===0?"":P<2&&O.length>=1?"coords = 0;":O.map(function(M){return"coords."+K[M+z]+" = 0;"}).join(`
`);var B="";B=P<2&&L>0?"coords":k.shapeInfo.logicalShape.map(function(M,V){return"coords."+K[V+z]}).join(", ");var Q="return outputValue;",U=Fr(k.shapeInfo.logicalShape)===1,J=Fr(S.logicalShape)===1;if(L!==1||U||J){if(U&&!J)Q=P===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(O.length){var Y=L-2,oe=L-1;O.indexOf(Y)>-1&&O.indexOf(oe)>-1?Q="return vec4(outputValue.x);":O.indexOf(Y)>-1?Q="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":O.indexOf(oe)>-1&&(Q="return vec4(outputValue.xx, outputValue.zz);")}}else Q=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+A+`() {
      `+Z+` coords = getOutputCoords();
      `+D+`
      vec4 outputValue = get`+T+"("+B+`);
      `+Q+`
    }
  `}(v,g):function(k,S){var D=k.name,E=D.charAt(0).toUpperCase()+D.slice(1),T="get"+E+"AtOutCoords",A=S.texShape,L=k.shapeInfo.texShape,P=k.shapeInfo.logicalShape.length,O=S.logicalShape.length;if(!k.shapeInfo.isUniform&&P===O&&k.shapeInfo.flatOffset==null&&Ei(L,A))return`
      float `+T+`() {
        return sampleTexture(`+D+`, resultUV);
      }
    `;var Z,z=Mn(O),K=km(k.shapeInfo.logicalShape,S.logicalShape),B=O-P,Q=["x","y","z","w","u","v"];Z=P===0?"":O<2&&K.length>=1?"coords = 0;":K.map(function(J){return"coords."+Q[J+B]+" = 0;"}).join(`
`);var U="";return U=O<2&&P>0?"coords":k.shapeInfo.logicalShape.map(function(J,Y){return"coords."+Q[Y+B]}).join(", "),`
    float `+T+`() {
      `+z+` coords = getOutputCoords();
      `+Z+`
      return get`+E+"("+U+`);
    }
  `}(v,g)),y}(p,t,n)}).join(`
`),d=t.texShape,u=wo(),h=function(p){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+p.texture2D+`(textureSampler, uv).r;
    }
  `}(u),m=function(p){return p.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+p.varyingFs+` vec2 resultUV;
    `+p.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+p.defineSpecialNaN+`
    `+p.defineSpecialInf+`
    `+p.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+F3e+`
    `+L3e+`
    `+B3e+`
  `}(u);return t.isPacked?(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(k,S){var D=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)];return D[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+D[1]+`.0);
      }
    `:D[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+D[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      return 2 * (resTexRC.x * `+D[1]+` + resTexRC.y);
    }
  `}(0,v);case 2:return function(k,S){var D=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)];if(Ei(k,S))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+D[0]+", "+D[1]+`));
      }
    `;var E=Math.ceil(k[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));

      int index = resTexRC.x * `+D[1]+` + resTexRC.y;
      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec2(r, c);
    }
  `}(p,v);case 3:return g=p,b=v,y=[Math.ceil(b[0]/2),Math.ceil(b[1]/2)],C=Math.ceil(g[2]/2),w=C*Math.ceil(g[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+y[0]+", "+y[1]+`));
      int index = resTexRC.x * `+y[1]+` + resTexRC.y;

      int b = index / `+w+`;
      index -= b * `+w+`;

      int r = 2 * (index / `+C+`);
      int c = imod(index, `+C+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return function(k,S){for(var D=[Math.ceil(S[0]/2),Math.ceil(S[1]/2)],E=Math.ceil(k[k.length-1]/2),T=E*Math.ceil(k[k.length-2]/2),A=T,L="",P="b, r, c",O=2;O<k.length-1;O++)A*=k[k.length-O-1],L=`
      int b`+O+" = index / "+A+`;
      index -= b`+O+" * "+A+`;
    `+L,P="b"+O+", "+P;return`
    ivec`+k.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      int index = resTexRC.x * `+D[1]+` + resTexRC.y;

      `+L+`

      int b = index / `+T+`;
      index -= b * `+T+`;

      int r = 2 * (index / `+E+`);
      int c = imod(index, `+E+`) * 2;

      return ivec`+k.length+"("+P+`);
    }
  `}(p,v)}var g,b,y,C,w}(t.logicalShape,d),o=function(p){return`
    void setOutput(vec4 val) {
      `+p.output+` = val;
    }
  `}(u)):(i=function(p,v){switch(p.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return function(y,C){return C[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+C[1]+`.0);
      }
    `:C[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+C[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      return resTexRC.x * `+C[1]+` + resTexRC.y;
    }
  `}(0,v);case 2:return function(y,C){return Ei(y,C)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+C[0]+", "+C[1]+`));
      }
    `:y[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+C[0]+", "+C[1]+`));
        int index = resTexRC.x * `+C[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:y[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+C[0]+", "+C[1]+`));
        int index = resTexRC.x * `+C[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      int r = index / `+y[1]+`;
      int c = index - r * `+y[1]+`;
      return ivec2(r, c);
    }
  `}(p,v);case 3:return g=v,b=Zp(["r","c","d"],p),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+g[0]+", "+g[1]+`));
      int index = resTexRC.x * `+g[1]+` + resTexRC.y;
      `+b+`
      return ivec3(r, c, d);
    }
  `;case 4:return function(y,C){var w=Zp(["r","c","d","d2"],y);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;
      `+w+`
      return ivec4(r, c, d, d2);
    }
  `}(p,v);case 5:return function(y,C){var w=Zp(["r","c","d","d2","d3"],y);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+C[0]+`,
                             `+C[1]+`));

      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+w+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}(p,v);case 6:return function(y,C){var w=Zp(["r","c","d","d2","d3","d4"],y);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      `+w+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}(p,v);default:throw new Error(p.length+"-D output sampling is not yet supported")}var g,b}(t.logicalShape,d),o=function(p){return`
    void setOutput(float val) {
      `+p.output+` = vec4(val, 0, 0, 0);
    }
  `}(u)),n&&(m+=U3e),[m,h,o,l,i,c,r].join(`
`)}function qv(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(r){var n=r.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(r.shapeInfo.isUniform)return"float "+s+"() {return "+n+";}";var i=r.shapeInfo.texShape,o=i[0],l=i[1];if(o===1&&l===1)return`
      float `+s+`() {
        return sampleTexture(`+n+`, halfCR);
      }
    `;var c=r.shapeInfo.texShape,d=c[0],u=c[1],h=Ip(n);return`
    float `+s+`() {
      vec2 uv = uvFromFlat(`+d+", "+u+", "+h+`);
      return sampleTexture(`+n+`, uv);
    }
  `}(e);case 1:return function(r){var n=r.name,s="get"+n.charAt(0).toUpperCase()+n.slice(1);if(r.shapeInfo.isUniform)return`
      float `+s+`(int index) {
        `+Mv(r)+`
      }
    `;var i=r.shapeInfo.texShape,o=i[0],l=i[1];if(l===1&&o===1)return`
      float `+s+`(int index) {
        return sampleTexture(`+n+`, halfCR);
      }
    `;var c=Ip(n);return l===1?`
      float `+s+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+o+`.0);
        return sampleTexture(`+n+`, uv);
      }
    `:o===1?`
      float `+s+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+l+`.0, 0.5);
        return sampleTexture(`+n+`, uv);
      }
    `:`
    float `+s+`(int index) {
      vec2 uv = uvFromFlat(`+o+", "+l+", index + "+c+`);
      return sampleTexture(`+n+`, uv);
    }
  `}(e);case 2:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=r.shapeInfo.texShape;if(o!=null&&Ei(n,o)){var l=o[0],c=o[1];return`
    float `+i+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `}var d=$p(n),u=d.newShape,h=d.keptDims,m=u;if(m.length<n.length){var p=zv(r,m);return`
      `+qv(p)+`
      float `+i+`(int row, int col) {
        return `+i+"("+Hv(["row","col"],h)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+n[1]+`, 1)));
        `+Mv(r)+`
      }
    `;var v=o[0],g=o[1],b=Ip(s);return g===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+n[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+v+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `:v===1?`
    float `+i+`(int row, int col) {
      float index = dot(vec3(row, col, `+b+"), vec3("+n[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+g+`.0, 0.5);
      return sampleTexture(`+s+`, uv);
    }
  `:`
  float `+i+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+n[1]+" + col + "+b+`;
    vec2 uv = uvFromFlat(`+v+", "+g+`, index);
    return sampleTexture(`+s+`, uv);
  }
`}(e);case 3:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=n[1]*n[2],l=n[2],c=$p(n),d=c.newShape,u=c.keptDims,h=d;if(h.length<n.length){var m=zv(r,h);return`
        `+qv(m)+`
        float `+i+`(int row, int col, int depth) {
          return `+i+"("+Hv(["row","col","depth"],u)+`);
        }
      `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+o+", "+l+`, 1)));
        `+Mv(r)+`
      }
    `;var p=r.shapeInfo.texShape,v=p[0],g=p[1],b=r.shapeInfo.flatOffset;if(g===o&&b==null)return`
        float `+i+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+l+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+g+".0, "+v+`.0);
          return sampleTexture(`+s+`, uv);
        }
      `;if(g===l&&b==null)return`
    float `+i+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+n[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+g+".0, "+v+`.0);
      return sampleTexture(`+s+`, uv);
    }
  `;var y=Ip(s);return`
      float `+i+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+o+" + col * "+l+" + depth + "+y+`;
        vec2 uv = uvFromFlat(`+v+", "+g+`, index);
        return sampleTexture(`+s+`, uv);
      }
  `}(e);case 4:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=n[3],l=n[2]*o,c=n[1]*l,d=$p(n),u=d.newShape,h=d.keptDims;if(u.length<n.length){var m=zv(r,u);return`
      `+qv(m)+`
      float `+i+`(int row, int col, int depth, int depth2) {
        return `+i+"("+Hv(["row","col","depth","depth2"],h)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+l+", "+o+`, 1)));
        `+Mv(r)+`
      }
    `;var p=r.shapeInfo.flatOffset,v=r.shapeInfo.texShape,g=v[0],b=v[1];if(b===c&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+l+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(b===o&&p==null)return`
      float `+i+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+n[1]*n[2]+", "+n[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+b+".0, "+g+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var y=Ip(s);return`
    float `+i+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+l+` +
          depth * `+o+` + depth2;
      vec2 uv = uvFromFlat(`+g+", "+b+", index + "+y+`);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);case 5:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=n[4],l=n[3]*o,c=n[2]*l,d=n[1]*c,u=$p(n),h=u.newShape,m=u.keptDims;if(h.length<n.length){var p=zv(r,h);return`
      `+qv(p)+`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        return `+i+"("+Hv(["row","col","depth","depth2","depth3"],m)+`);
      }
    `}if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+d+", "+c+", "+l+", "+o+`)) +
          depth3;
        `+Mv(r)+`
      }
    `;var v=r.shapeInfo.flatOffset,g=r.shapeInfo.texShape,b=g[0],y=g[1];if(y===d&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+l+", "+o+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+y+".0, "+b+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(y===o&&v==null)return`
      float `+i+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+n[1]*n[2]*n[3]+`,
               `+n[2]*n[3]+", "+n[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+y+".0, "+b+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var C=Ip(s);return`
    float `+i+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+d+" + col * "+c+" + depth * "+l+` +
          depth2 * `+o+" + depth3 + "+C+`;
      vec2 uv = uvFromFlat(`+b+", "+y+`, index);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);case 6:return function(r){var n=r.shapeInfo.logicalShape,s=r.name,i="get"+s.charAt(0).toUpperCase()+s.slice(1),o=$p(n),l=o.newShape,c=o.keptDims;if(l.length<n.length){var d=zv(r,l);return`
      `+qv(d)+`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+i+"("+Hv(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var u=n[5],h=n[4]*u,m=n[3]*h,p=n[2]*m,v=n[1]*p;if(r.shapeInfo.isUniform)return`
      float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+v+", "+p+", "+m+", "+h+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+u+`, 1)));
        `+Mv(r)+`
      }
    `;var g=r.shapeInfo.flatOffset,b=r.shapeInfo.texShape,y=b[0],C=b[1];if(C===v&&g==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+p+", "+m+", "+h+", "+u+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+C+".0, "+y+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;if(C===u&&g==null)return`
      float `+i+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+n[1]*n[2]*n[3]*n[4]+`,
               `+n[2]*n[3]*n[4]+`,
               `+n[3]*n[4]+`,
               `+n[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+C+".0, "+y+`.0);
        return sampleTexture(`+s+`, uv);
      }
    `;var w=Ip(s);return`
    float `+i+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+v+" + col * "+p+" + depth * "+m+` +
          depth2 * `+h+" + depth3 * "+u+" + depth4 + "+w+`;
      vec2 uv = uvFromFlat(`+y+", "+C+`, index);
      return sampleTexture(`+s+`, uv);
    }
  `}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function EG(e){var t,r,n;switch(e.shapeInfo.logicalShape.length){case 0:return t=e.name,r="get"+t.charAt(0).toUpperCase()+t.slice(1),n=wo(),`
    vec4 `+r+`() {
      return `+n.texture2D+"("+t+`, halfCR);
    }
  `;case 1:return function(s){var i=s.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),l=s.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=wo();return`
    vec4 `+o+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+d.texture2D+"("+i+`, uv);
    }
  `}(e);case 2:return function(s){var i=s.shapeInfo.logicalShape,o=s.name,l="get"+o.charAt(0).toUpperCase()+o.slice(1),c=s.shapeInfo.texShape,d=c[0],u=c[1],h=wo();if(c!=null&&Ei(i,c))return`
      vec4 `+l+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+u+".0, "+d+`.0);

        return `+h.texture2D+"("+o+`, uv);
      }
    `;var m=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],p=Math.ceil(i[1]/2);return`
    vec4 `+l+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+p+", "+m[0]+", "+m[1]+`, row, col);
      return `+h.texture2D+"("+o+`, uv);
    }
  `}(e);case 3:return function(s){var i=s.shapeInfo.logicalShape,o=s.name,l="get"+o.charAt(0).toUpperCase()+o.slice(1),c=s.shapeInfo.texShape,d=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(i[0]===1){var u=i.slice(1),h=zv(s,u);return`
        `+EG(h)+`
        vec4 `+l+`(int b, int row, int col) {
          return `+l+"("+Hv(["b","row","col"],[1,2])+`);
        }
      `}var m=d[0],p=d[1],v=Math.ceil(i[2]/2),g=v*Math.ceil(i[1]/2),b=wo();return`
    vec4 `+l+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+m+", "+p+", "+g+", "+v+`, b, row, col);
      return `+b.texture2D+"("+o+`, uv);
    }
  `}(e);default:return function(s){for(var i=s.shapeInfo.logicalShape,o=i.length,l=s.name,c="get"+l.charAt(0).toUpperCase()+l.slice(1),d=s.shapeInfo.texShape,u=[Math.ceil(d[0]/2),Math.ceil(d[1]/2)],h=u[0],m=u[1],p=Math.ceil(i[o-1]/2),v=p*Math.ceil(i[o-2]/2),g="int b, int row, int col",b="b * "+v+" + (row / 2) * "+p+" + (col / 2)",y=2;y<o-1;y++)g="int b"+y+", "+g,v*=i[o-y-1],b="b"+y+" * "+v+" + "+b;var C=wo();return`
    vec4 `+c+"("+g+`) {
      int index = `+b+`;
      int texR = index / `+m+`;
      int texC = index - texR * `+m+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+", "+h+`);
      return `+C.texture2D+"("+l+`, uv);
    }
  `}(e)}}var F3e=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,L3e=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,B3e=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,U3e=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Ip(e){return"offset"+e}function Mv(e){var t=e.name,r=Fr(e.shapeInfo.logicalShape);return r<2?"return "+t+";":`
    for (int i = 0; i < `+r+`; i++) {
      if (i == index) {
        return `+t+`[i];
      }
    }
  `}function Mn(e){if(e<=1)return"int";if(e===2)return"ivec2";if(e===3)return"ivec3";if(e===4)return"ivec4";if(e===5)return"ivec5";if(e===6)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function zv(e,t){var r=JSON.parse(JSON.stringify(e));return r.shapeInfo.logicalShape=t,r}function Hv(e,t){return t.map(function(r){return e[r]}).join(", ")}var $3e=function(e,t,r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,He(e.length>2,function(){return"Packed arg"+(r.charAt(0).toUpperCase()+r.slice(1))+" supports only inputs with rank above 2."});var s=e[e.length-1],i=Math.ceil(s/t);this.outputShape=e.slice(0,-1),i>1&&this.outputShape.push(i),n||this.variableNames.push("bestIndicesA");var o,l,c=this.outputShape,d=c.length,u=Mn(d),h=ll("coords",d);if(i===1){var m=Mn(l=d+1);o=`
        `+m+" sourceLocR = "+m+"("+h.join()+`, 0);
        ++`+h[d-1]+`;
        `+m+" sourceLocG = "+m+"("+h.join()+`, 0);
        ++`+h[d-2]+`;
        `+m+" sourceLocA = "+m+"("+h.join()+`, 0);
        --`+h[d-1]+`;
        `+m+" sourceLocB = "+m+"("+h.join()+`, 0);
        --`+h[d-2]+";"}else l=d,o=`
        `+u+` sourceLocR = coords;
        ++`+h[d-1]+`;
        `+u+` sourceLocG = coords;
        ++`+h[d-2]+`;
        `+u+` sourceLocA = coords;
        --`+h[d-1]+`;
        `+u+` sourceLocB = coords;
        --`+h[d-2]+";";var p=["x","y","z","w","u","v"].slice(0,l),v="."+p[l-1],g=p.map(function(T){return"int "+T}),b=ll("sourceLocR",l-1).concat("inIdx.r"),y=ll("sourceLocG",l-1).concat("inIdx.g"),C=ll("sourceLocB",l-1).concat("inIdx.b"),w=ll("sourceLocA",l-1).concat("inIdx.a"),k=r==="max"?"greaterThan":"lessThan",S=n?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+b.join()+`),
                             getBestIndicesAChannel(`+y.join()+`),
                             getBestIndicesAChannel(`+C.join()+`),
                             getBestIndicesAChannel(`+w.join()+")));",D=`vec4(
            getAChannel(`+b.join()+`),
            hasNextCol ? getAChannel(`+y.join()+`) : 0.,
            hasNextRow ? getAChannel(`+C.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+w.join()+") : 0.)",E=n?"":`
      float getBestIndicesAChannel(`+g.join()+`) {
        return getChannel(getBestIndicesA(`+p.join()+`),
                                          vec2(`+p.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+g.join()+`) {
        return getChannel(getA(`+p.join()+`),
                               vec2(`+p.slice(-2).join()+`));
      }
      `+E+`
      void main() {
        `+u+` coords = getOutputCoords();
        bool hasNextCol = `+h[d-1]+" < "+(c[d-1]-1)+`;
        bool hasNextRow = `+h[d-2]+" < "+(c[d-2]-1)+`;
        `+o+`
        ivec4 srcIdx = ivec4(sourceLocR`+v+", sourceLocG"+v+`,
          sourceLocB`+v+", sourceLocA"+v+") * "+t+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+t+`; i++) {
          inIdx = srcIdx;
          `+S+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+k+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},V3e=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,n=e.strideHeight,s=e.strideWidth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,d=l-1-e.padInfo.top,u=c-1-e.padInfo.left,h=1/(t*r);this.userCode=`
      const ivec2 pads = ivec2(`+d+", "+u+`);
      const float avgMultiplier = float(`+h+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`;
            wR += `+i+`) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+o+`) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},q3e=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,r=e.filterHeight,n=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,m=e.effectiveFilterWidth,p=u-1-e.padInfo.front,v=h-1-e.padInfo.top,g=m-1-e.padInfo.left,b=1/(t*r*n);this.userCode=`
      const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);
      const float avgMultiplier = float(`+b+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+l+`) {
          float dyD = float(dyDCorner + wD) / `+s+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+h+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+m+`;
                wC += `+d+`) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},z3e=function(e,t,r,n,s,i){this.outputShape=[],this.variableNames=["x","mean","variance"],Ma(e,t),Ma(e,r);var o="0.0";n!=null&&(Ma(e,n),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var l="1.0";s!=null&&(Ma(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+o+`;
        float scale = `+l+`;
        float inv = scale * inversesqrt(variance + float(`+i+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},H3e=function(e,t,r,n,s,i){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],Ma(e,t),Ma(e,r);var o="vec4(0.0)";n!=null&&(Ma(e,n),this.variableNames.push("offset"),o="getOffsetAtOutCoords()");var l="vec4(1.0)";s!=null&&(Ma(e,s),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = `+o+`;
        vec4 scale = `+l+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+i+`));

        setOutput((x - mean) * inv + offset);
      }
    `},W3e="return areal * breal - aimag * bimag;",G3e="return areal * bimag + aimag * breal;",rB=function(e,t,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=Ma(t,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+e+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},PE="return a + b;",OE="return a - b;",aB="return a * b;",DG="return (a < 0.) ? b * a : a;",bs=function(e,t,r){this.variableNames=["A","B"],this.outputShape=Ma(t,r),this.userCode=`
      float binaryOperation(float a, float b) {
        `+e+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},AG=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,Mh=function(e,t,r,n){n===void 0&&(n=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=Ma(t,r);var s=this.outputShape.length,i="";if(n)if(s===0||Fr(this.outputShape)===1)i=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(i=`
          `+Mn(s)+` coords = getOutputCoords();
        `,s===1)i+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var o=ll("coords",s);i+=`
            bool nextRowOutOfBounds =
              (`+o[s-2]+" + 1) >= "+this.outputShape[s-2]+`;
            bool nextColOutOfBounds =
              (`+o[s-1]+" + 1) >= "+this.outputShape[s-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+e+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+i+`

        setOutput(result);
      }
    `},Y3e=function(){function e(t){this.variableNames=["A"],this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,r){var n=this;return function(s,i){n.minLoc==null&&(n.minLoc=s.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=s.getUniformLocationNoThrow(i,"maxVal")),s.gl.uniform1f(n.minLoc,t),s.gl.uniform1f(n.maxLoc,r)}},e}(),K3e=function(){function e(t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return e.prototype.getCustomSetupFunc=function(t,r){var n=this;return function(s,i){n.minLoc==null&&(n.minLoc=s.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=s.getUniformLocationNoThrow(i,"maxVal")),s.gl.uniform1f(n.minLoc,t),s.gl.uniform1f(n.maxLoc,r)}},e}(),X3e=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},Q3e=function(e){this.outputShape=[],this.outputShape=B0(e,1),this.variableNames=e.map(function(l,c){return"T"+c});var t=new Array(e.length-1);t[0]=e[0][1];for(var r=1;r<t.length;r++)t[r]=t[r-1]+e[r][1];var n=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(r=1;r<t.length;r++){var s=t[r-1];n.push("else if (yC < "+t[r]+") setOutput(getT"+r+"(yR, yC-"+s+"));")}var i=t.length,o=t[t.length-1];n.push("else setOutput(getT"+i+"(yR, yC-"+o+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+n.join(`
        `)+`
      }
    `},J3e=function(e,t){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=B0(e,t);var r=this.outputShape,n=r.length,s=Mn(n),i=ll("coords",n),o=["x","y","z","w","u","v"].slice(0,n);this.variableNames=e.map(function(b,y){return"T"+y});var l=new Array(e.length-1);l[0]=e[0][t];for(var c=1;c<l.length;c++)l[c]=l[c-1]+e[c][t];var d=o[t],u=o.slice(-2),h=o.join(),m="if ("+d+" < "+l[0]+`) {
        return getChannel(
            getT0(`+h+"), vec2("+u.join()+`));
        }`;for(c=1;c<l.length;c++){var p=l[c-1];m+=`
        if (`+d+" < "+l[c]+"  && "+d+" >= "+l[c-1]+`) {
          return getChannel(
            getT`+c+"("+tN(o,d,p)+`),
            vec2(`+tN(u,d,p)+`));
        }`}var v=l.length,g=l[l.length-1];m+=`
        return getChannel(
          getT`+v+"("+tN(o,d,g)+`),
          vec2(`+tN(u,d,g)+"));",this.userCode=`
      float getValue(`+o.map(function(b){return"int "+b})+`) {
        `+m+`
      }

      void main() {
        `+s+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+i+`), 0., 0., 0.);

        `+i[n-1]+" = "+i[n-1]+` + 1;
        if (`+i[n-1]+" < "+r[n-1]+`) {
          result.g = getValue(`+i+`);
        }

        `+i[n-2]+" = "+i[n-2]+` + 1;
        if (`+i[n-2]+" < "+r[n-2]+`) {
          result.a = getValue(`+i+`);
        }

        `+i[n-1]+" = "+i[n-1]+` - 1;
        if (`+i[n-2]+" < "+r[n-2]+` &&
            `+i[n-1]+" < "+r[n-1]+`) {
          result.b = getValue(`+i+`);
        }
        setOutput(result);
      }
    `};function tN(e,t,r){var n=e.indexOf(t);return e.map(function(s,i){return i===n?s+" - "+r:s}).join()}var Z3e=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,r=e.strideWidth,n=e.padInfo.top,s=e.padInfo.left,i=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+n+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+r+" - "+s+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              if (`+i+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},eAe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,n=e.strideHeight,s=e.strideWidth,i=e.dataFormat==="channelsLast",o=t-1-e.padInfo.top,l=r-1-e.padInfo.left,c=i?1:2,d=i?2:3,u=i?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+u+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+d+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+r+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+r+` - 1 - wC;

            for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {

              if (`+i+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},tAe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,r=e.strideHeight,n=e.strideWidth,s=e.padInfo.front,i=e.padInfo.top,o=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yF = 0; yF < `+e.outDepth+`; yF++) {
            int xF = wF + yF * `+t+" - "+s+`;

            if (xF < 0 || xF >= `+e.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+e.outHeight+`; yR++) {
              int xR = wR + yR * `+r+" - "+i+`;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+e.outWidth+`; yC++) {
                int xC = wC + yC * `+n+" - "+o+`;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},rAe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,r=e.filterHeight,n=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=t-1-e.padInfo.front,c=r-1-e.padInfo.top,d=n-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+c+", "+d+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+t+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+s+`.0;

          if (dyF < 0.0 || dyF >= `+e.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+t+` - 1 - wF;

          for (int wR = 0; wR < `+r+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+i+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+r+` - 1 - wR;

            for (int wC = 0; wC < `+n+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+o+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+n+` - 1 - wC;

              for (int d2 = 0; d2 < `+e.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},aAe=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,r=e.strideWidth,n=e.padInfo.top,s=e.padInfo.left,i=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+i+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+e.batchSize+`; b++) {
          for (int yR = 0; yR < `+e.outHeight+`; yR++) {
            int xR = wR + yR * `+t+" - "+n+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+e.outWidth+`; yC++) {
              int xC = wC + yC * `+r+" - "+s+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},nAe=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,r=e.filterWidth,n=e.strideHeight,s=e.strideWidth,i=t-1-e.padInfo.top,o=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+i+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+t+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+n+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+t+` - 1 - wR;

          for (int wC = 0; wC < `+r+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+s+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+r+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+l+`; dm++) {
              int d2 = d1 * `+l+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},nB=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.padInfo.top,i=e.padInfo.left,o=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,u=e.filterHeight,h=e.filterWidth,m=4*Math.floor(e.inChannels/4),p=e.inChannels%4,v=e.dataFormat==="channelsLast",g=v?1:2,b=v?2:3,y=v?3:1,C="",w="";r&&(C=n?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`
          float activation(float x) {
            `+r+`
          }
        `,w="result = activation(result);");var k=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+C+`

      const ivec2 strides = ivec2(`+o+", "+l+`);
      const ivec2 pads = ivec2(`+s+", "+i+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+y+`];

        ivec2 xRCCorner =
            ivec2(coords[`+g+"], coords["+b+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+u+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+h+`; wC++) {
            int xC = xCCorner + wC * `+d+`;

            if (xC < 0 || xC >= `+e.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+m+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+v+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(p===1)+`) {

              if (`+v+`) {
                dotProd +=
                    getX(batch, xR, xC, `+m+`) *
                    getW(wR, wC, `+m+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+m+`, xR, xC) *
                    getW(wR, wC, `+m+`, d2);
              }

            } else if (`+(p===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2)
              );

              if (`+v+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(p===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2),
                getW(wR, wC, `+m+` + 2, d2)
              );

              if (`+v+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1),
                  getX(batch, xR, xC, `+m+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC),
                  getX(batch, `+m+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+k+`
        `+w+`
        setOutput(result);
      }
    `},sAe=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,r=e.padInfo.top,n=e.padInfo.left,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.filterDepth,h=e.filterHeight,m=e.filterWidth,p=4*Math.floor(e.inChannels/4),v=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+s+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+t+", "+r+", "+n+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+u+`; wF++) {
          int xF = xFCorner + wF * `+l+`;

          if (xF < 0 || xF >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+m+`; wC++) {
              int xC = xCCorner + wC * `+d+`;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+p+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(v===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+p+`) *
                  getW(wF, wR, wC, `+p+`, d2);
              } else if (`+(v===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(v===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+p+`),
                  getX(batch, xF, xR, xC, `+p+` + 1),
                  getX(batch, xF, xR, xC, `+p+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+p+`, d2),
                  getW(wF, wR, wC, `+p+` + 1, d2),
                  getW(wF, wR, wC, `+p+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},sB=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,d=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,m=e.filterHeight,p=e.filterWidth,v=e.outChannels/e.inChannels,g="",b="";r&&(g=n?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`
          float activation(float x) {
            `+r+`
          }
        `,b="result = activation(result);");var y=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+v+`;
        int q = d2 - d1 * `+v+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+m+`; wR++) {
          int xR = xRCorner + wR * `+u+`;

          if (xR < 0 || xR >= `+s+`) {
            continue;
          }

          for (int wC = 0; wC < `+p+`; wC++) {
            int xC = xCCorner + wC * `+h+`;

            if (xC < 0 || xC >= `+i+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+y+`
        `+b+`
        setOutput(result);
      }
    `},iB=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=null),n===void 0&&(n=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.outShape;for(var s=e.inHeight,i=e.inWidth,o=e.padInfo.top,l=e.padInfo.left,c=e.strideHeight,d=e.strideWidth,u=e.dilationHeight,h=e.dilationWidth,m=e.filterHeight,p=e.filterWidth,v=p,g="int xR; int xC; int xCOffset;",b=0;b<m;b++)for(var y=0;y<p;y++)g+=`
          vec4 xTexelR`+b+"C"+2*y+` = vec4(0.);
          vec4 wR`+b+"C"+y+` = vec4(0.);
          vec4 xR`+b+"C"+y+" = vec4(0.);";for(b=0;b<m;b++)for(var C=0;C<v;C++){if(g+=`
          xR = xRCorner + `+b*u+`;
          xC = xCCorner + `+(y=2*C)*h+`;
        `,d===1){if(y<p&&(g+=l%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+s+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    xTexelR`+b+"C"+y+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+s+" && xCOffset >= 0 && xCOffset < "+i+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+i+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+b+"C"+y+" = vec4(previous.zw, xTexelR"+b+"C"+y+`.xy);
                } else {
                  xR`+b+"C"+y+" = vec4(0, 0, xTexelR"+b+"C"+y+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+s+" && xC >= 0 && xC < "+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xR`+b+"C"+y+" = xTexelR"+b+"C"+y+`;
              `,y+1<p)){var w=l%2==0?YW(h):h;h%2==0&&l%2==1||h%2!=0&&l%2!=1?(g+=`
                  xCOffset = xC + `+l%2+" + "+w+`;

                  if(xR >= 0 && xR < `+s+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,h>1&&(g+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+s+` &&
                      xCOffset >= 0 && xCOffset < `+i+`) {
                      xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+b+"C"+y+` = vec4(0.);
                    }
                  `),g+=`
                  xR`+b+"C"+(y+1)+` = vec4(
                    xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.xy);
                `):g+=`
                  xCOffset = xC + `+w+`;

                  if(xR >= 0 && xR < `+s+` &&
                    xCOffset >= 0 && xCOffset < `+i+`) {
                    xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+b+"C"+(y+1)+" = xTexelR"+b+"C"+(y+2)+`;
                `}}else y<p&&(g+=`
              if(xR >= 0 && xR < `+s+`) {
            `,l%2==1?(g+=`
                xCOffset = xC + 1 - `+d+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+i+`) {
                  xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+b+"C"+(y+2)+` = vec4(0.);
                }

                xR`+b+"C"+y+` = vec4(
                  xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.zw);
              `,y+1<p&&(g+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+d+`;
                  if(xCOffset >= 0 && xCOffset < `+i+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+b+"C"+(y+1)+" = vec4(xTexelR"+b+"C"+(y+2)+`.xy, final.xy);
                `)):(g+=`
                if(xC >= 0 && xC < `+i+`) {
                  xTexelR`+b+"C"+y+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+b+"C"+y+` = vec4(0.);
                }

                xCOffset = xC + `+d+`;
                if(xCOffset >= 0 && xCOffset < `+i+`) {
                  xTexelR`+b+"C"+(y+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+b+"C"+(y+2)+` = vec4(0.);
                }

                xR`+b+"C"+y+` = vec4(
                  xTexelR`+b+"C"+y+".xy, xTexelR"+b+"C"+(y+2)+`.xy);
              `,y+1<p&&(g+=`
                  xR`+b+"C"+(y+1)+` = vec4(
                    xTexelR`+b+"C"+y+".zw, xTexelR"+b+"C"+(y+2)+`.zw);
                `)),g+="}");y<p&&(g+=`
            vec4 wTexelR`+b+"C"+y+" = getW("+b+", "+y+`, d1, q);
            wR`+b+"C"+y+" = vec4(wTexelR"+b+"C"+y+".xz, wTexelR"+b+"C"+y+`.xz);
          `,y+1<p&&(g+=`
              vec4 wTexelR`+b+"C"+(y+1)+" = getW("+b+", "+(y+1)+`, d1, q);
              wR`+b+"C"+(y+1)+` =
                vec4(wTexelR`+b+"C"+(y+1)+".xz, wTexelR"+b+"C"+(y+1)+".xz);"))}for(b=0;b<m;b++)for(y=0;y<p;y++)g+="dotProd += xR"+b+"C"+y+" * wR"+b+"C"+y+";";var k="",S="";r&&(k=n?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+r+`
        }`:`vec4 activation(vec4 x) {
          `+r+`
        }`,S="result = activation(result);");var D=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),n&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+k+`

      const ivec2 strides = ivec2(`+c+", "+d+`);
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+g+`

        vec4 result = dotProd;
        `+D+`
        `+S+`
        setOutput(result);
      }
    `},iAe=function(e,t,r,n,s){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var i=e[0],o=e[1],l=e[2],c=e[3],d=t[0],u=r[0],h=r[1];this.outputShape=[d,u,h,c];var m=n==="bilinear"?1:0,p=[o-1+".0",l-1+".0"],v=p[0],g=p[1],b=u>1?[""+(o-1)/(u-1),"(y2-y1) * height_ratio","y1*"+v+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+v],y=b[0],C=b[1],w=b[2],k=h>1?[""+(l-1)/(h-1),"(x2-x1) * width_ratio","x1*"+g+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+g],S=k[0],D=k[1],E=k[2];this.userCode=`
      const float height_ratio = float(`+y+`);
      const float width_ratio = float(`+S+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+i+`) {
          return;
        }

        float height_scale = `+C+`;
        float width_scale = `+D+`;

        float in_y = `+w+`;
        if( in_y < 0.0 || in_y > `+v+` ) {
          setOutput(float(`+s+`));
          return;
        }
        float in_x = `+E+`;
        if( in_x < 0.0 || in_x > `+g+` ) {
          setOutput(float(`+s+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+m+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},oAe=function(e,t,r){this.variableNames=["x"],this.outputShape=e;var n=e.length,s=e[e.length-1],i=r?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(r?"return "+s+" -i - 1;":"return i;")+`
      }

      void main() {
        `+Mn(n)+` coords = getOutputCoords();
        int end = `+oB(n,"coords")+`;
        float val = 0.0;
        for (int i = `+s+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+i+` end) {
            continue;
          }
          if (idx == end && `+t+`) {
            continue;
          }
          `+oB(n,"coords")+` = idx;
          val += getX(`+function(o,l){if(o===1)return""+l;if(o===2)return l+".x, "+l+".y";if(o===3)return l+".x, "+l+".y, "+l+".z";if(o===4)return l+".x, "+l+".y, "+l+".z, "+l+".w";throw Error("Cumulative sum for rank "+o+" is not yet supported")}(n,"coords")+`);
        }
        setOutput(val);
      }
    `};function oB(e,t){if(e===1)return""+t;if(e===2)return t+".y";if(e===3)return t+".z";if(e===4)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var lAe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Dy.DENSE;var t=Wb(e),r=wo();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Zp(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+r.output+` = result;
      }
    `},cAe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Dy.DENSE;var t=Wb(e),r=wo();this.outputShape=e,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Zp(["r","c","d"],e)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+t[0]+", "+t[1]+`));
        int index = 4 * (resTexRC.x * `+t[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+r.output+` = result;
      }
    `},dAe=function(){function e(t,r,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=t,this.blockSize=r,this.dataFormat=n,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+r+`;
      int offset_h = imod(h, `+r+`);
      int in_w = w / `+r+`;
      int offset_w = imod(w, `+r+`);
      int offset_d = (offset_h * `+r+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return e.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),uAe=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},hAe=function(e){this.variableNames=["A"],this.outTexUsage=Yl.DOWNLOAD;var t=wo();this.outputShape=e,this.userCode=`
      `+_G+`

      void main() {
        float x = getAAtOutCoords();
        `+t.output+` = encode_float(x);
      }
    `},fAe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Yl.DOWNLOAD;var t=wo();this.outputShape=e,this.userCode=`
      `+_G+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+t.output+` = encode_float(x);
      }
    `},mAe=function(e,t,r){r===void 0&&(r=!1),this.variableNames=["A"];var n=wo(),s=t[0],i=t[1];this.outputShape=e;var o="result";r&&(o="floor(result * 255. + 0.5)"),this.userCode=`
      `+C4(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+i+`;
        int c = imod(flatIndex, `+i+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+s+`.0);
        vec4 values = `+n.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+n.output+" = vec4("+o+`, 0., 0., 0.);
      }
    `},pAe=function(e,t,r){r===void 0&&(r=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var n=wo(),s=t[0],i=t[1];this.outputShape=e;var o="",l="result";r&&(l="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var d=0;d<=1;d++){var u=2*c+d;o+=`
          localCoords = coords;
          if(localCoords[2] + `+d+" < "+e[2]+`) {
            localCoords[2] += `+d+`;
            if(localCoords[1] + `+c+" < "+e[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+i+`;
              c = imod(flatIndex, `+i+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+i+".0, "+s+`.0);
              values = `+n.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+u+`] = values[0];
              } else if(offset == 1) {
                result[`+u+`] = values[1];
              } else if(offset == 2) {
                result[`+u+`] = values[2];
              } else {
                result[`+u+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+C4(e)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+o+`

        `+n.output+" = "+l+`;
      }
    `},xAe="return real * expR - imag * expI;",vAe="return real * expI + imag * expR;",lB=function(e,t,r){this.variableNames=["real","imag"];var n=t[1];this.outputShape=t;var s=r?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,i=r?n+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+s+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+e+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+n+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+n+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+i+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},gAe=function(){function e(t,r){this.outputShape=[],this.variableNames=["x"],this.outputShape=t,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;return function(n,s){r.valueLoc==null&&(r.valueLoc=n.getUniformLocationNoThrow(s,"value")),n.gl.uniform1f(r.valueLoc,t)}},e}(),bAe=function(e,t,r){this.variableNames=["A","indices"];var n=e.slice();n[r]=t,this.outputShape=n,this.rank=n.length;var s=Mn(this.rank),i=function(o,l){var c=o.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var d=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],h=0;h<o.length;h++)h===l?u.push("int(getIndices("+d[h]+"))"):u.push(""+d[h]);return u.join()}(e,r);this.userCode=`
      void main() {
        `+s+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},yAe=function(e,t,r){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=r;var n=Mn(t.length),s=Mn(r.length),i=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+n+" strides = "+n+"("+this.strides+`);
         void main() {
          `+s+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+i+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function jAe(e,t){var r=wo();return x5e(e,t,r.version+`
    precision highp float;
    `+r.attribute+` vec3 clipSpacePos;
    `+r.attribute+` vec2 uv;
    `+r.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function NAe(e,t){return j5e(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function wAe(e,t){return N5e(e,t,new Uint16Array([0,1,2,2,1,3]))}function m1(e,t,r,n,s,i,o){S5e(r,n);var l=w5e(e,t),c=e.TEXTURE_2D;return Lr(e,t,function(){return e.bindTexture(c,l)}),Lr(e,t,function(){return e.texParameteri(c,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)}),Lr(e,t,function(){return e.texParameteri(c,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)}),Lr(e,t,function(){return e.texParameteri(c,e.TEXTURE_MIN_FILTER,e.NEAREST)}),Lr(e,t,function(){return e.texParameteri(c,e.TEXTURE_MAG_FILTER,e.NEAREST)}),Lr(e,t,function(){return e.texImage2D(c,0,s,r,n,0,i,o,null)}),Lr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)}),l}function SAe(e,t,r,n,s){var i=PS(r,n);return m1(e,t,i[0],i[1],s.internalFormatFloat,s.textureFormatFloat,e.FLOAT)}function CAe(e,t,r,n,s){var i=PS(r,n);return m1(e,t,i[0],i[1],s.internalFormatHalfFloat,s.textureFormatFloat,s.textureTypeHalfFloat)}function kAe(e,t,r,n,s){var i=PS(r,n);return m1(e,t,i[0],i[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function _Ae(e,t,r,n,s){var i=f1(r,n);return m1(e,t,i[0],i[1],s.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function EAe(e,t,r,n,s){var i=f1(r,n);return m1(e,t,i[0],i[1],s.internalFormatPackedHalfFloat,e.RGBA,s.textureTypeHalfFloat)}function DAe(e,t,r,n){return Lr(e,t,function(){return e.bindBuffer(e.ARRAY_BUFFER,n)}),K8(e,t,r,"clipSpacePos",n,3,20,0)&&K8(e,t,r,"uv",n,2,20,12)}function AAe(e,t,r,n,s,i,o){var l,c,d;Lr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)}),i instanceof Uint8Array?(l=new Uint8Array(n*s*4),c=e.UNSIGNED_BYTE,d=e.RGBA):(l=new Float32Array(n*s*4),c=e.FLOAT,d=o.internalFormatPackedFloat),l.set(i),Lr(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,d,n,s,0,e.RGBA,c,l)}),Lr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function TAe(e,t,r,n){Lr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,r)}),n.data instanceof Uint8Array?Lr(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,n.width,n.height,0,e.RGBA,e.UNSIGNED_BYTE,n.data)}):Lr(e,t,function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)}),Lr(e,t,function(){return e.bindTexture(e.TEXTURE_2D,null)})}function IAe(e,t,r,n,s){var i=e.createBuffer();Lr(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,i)});var o=16*r*n;return Lr(e,t,function(){return e.bufferData(e.PIXEL_PACK_BUFFER,o,e.STREAM_READ)}),Lr(e,t,function(){return e.readPixels(0,0,n,r,e.RGBA,e.FLOAT,0)}),Lr(e,t,function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)}),i}function PAe(e,t,r){var n=e,s=new Float32Array(r);return n.bindBuffer(n.PIXEL_PACK_BUFFER,t),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,s),n.bindBuffer(n.PIXEL_PACK_BUFFER,null),s}function OAe(e,t,r,n,s){var i=PS(r,n),o=i[0],l=i[1],c=new Uint8Array(r*n*4);return Lr(e,t,function(){return e.readPixels(0,0,o,l,s.downloadTextureFormat,e.UNSIGNED_BYTE,c)}),new Float32Array(c.buffer)}function MAe(e,t,r,n,s,i,o,l){var c=e,d=new Float32Array(function(u,h){var m=f1(u,h);return m[0]*m[1]*4}(i,o));return c.bindBuffer(c.PIXEL_PACK_BUFFER,t),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,d),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),d}function RAe(e,t,r,n){var s=new Float32Array(r*n*4);return Lr(e,t,function(){return e.readPixels(0,0,n,r,e.RGBA,e.FLOAT,s)}),s}var FAe=function(){function e(t){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var r=zt().getNumber("WEBGL_VERSION");t!=null?(this.gl=t,u5e(r,t)):this.gl=th(r);var n="WEBGL_color_buffer_float";if(zt().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Qj(this.gl,this.debug,"OES_texture_float"),qc(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Qj(this.gl,this.debug,"OES_texture_half_float");else if(zt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(n),qc(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Qj(this.gl,this.debug,"EXT_color_buffer_half_float");else if(zt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(n="EXT_color_buffer_float",qc(this.gl,n))this.colorBufferFloatExtension=this.gl.getExtension(n);else{if(!qc(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=NAe(this.gl,this.debug),this.indexBuffer=wAe(this.gl,this.debug),this.framebuffer=C5e(this.gl,this.debug),this.textureConfig=p4(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return zt().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var t=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var r=this.gl;Lr(r,this.debug,function(){return r.finish()}),Lr(r,this.debug,function(){return r.bindFramebuffer(r.FRAMEBUFFER,null)}),Lr(r,this.debug,function(){return r.deleteFramebuffer(t.framebuffer)}),Lr(r,this.debug,function(){return r.bindBuffer(r.ARRAY_BUFFER,null)}),Lr(r,this.debug,function(){return r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,null)}),Lr(r,this.debug,function(){return r.deleteBuffer(t.indexBuffer)}),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(t,r){return this.throwIfDisposed(),SAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(t,r){return this.throwIfDisposed(),CAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(t,r){return this.throwIfDisposed(),kAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(t,r){this.throwIfDisposed(),TAe(this.gl,this.debug,t,r)},e.prototype.uploadDenseMatrixToTexture=function(t,r,n,s){this.throwIfDisposed(),AAe(this.gl,this.debug,t,r,n,s,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(t,r){return this.throwIfDisposed(),EAe(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(t,r){return this.throwIfDisposed(),_Ae(this.gl,this.debug,t,r,this.textureConfig)},e.prototype.deleteMatrixTexture=function(t){var r=this;this.throwIfDisposed(),this.outputTexture===t&&(X8(this.gl,this.debug,this.framebuffer),this.outputTexture=null),Lr(this.gl,this.debug,function(){return r.gl.deleteTexture(t)})},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(t,r,n){var s=this;return this.downloadMatrixDriver(t,function(){return OAe(s.gl,s.debug,r,n,s.textureConfig)})},e.prototype.downloadPackedMatrixFromBuffer=function(t,r,n,s,i,o){return MAe(this.gl,t,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(t,r){return PAe(this.gl,t,r)},e.prototype.createBufferFromTexture=function(t,r,n){this.bindTextureToFrameBuffer(t);var s=IAe(this.gl,this.debug,r,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),s},e.prototype.createAndWaitForFence=function(){var t=this.createFence(this.gl);return this.pollFence(t)},e.prototype.createFence=function(t){var r,n,s=this;if(zt().getBool("WEBGL_FENCE_API_ENABLED")){var i=t,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);t.flush(),n=function(){var l=i.clientWaitSync(o,0,0);return l===i.ALREADY_SIGNALED||l===i.CONDITION_SATISFIED},r=o}else zt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(r=this.beginQuery(),this.endQuery(),n=function(){return s.isQueryAvailable(r,zt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:r,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(t,r,n){var s=this;return this.downloadMatrixDriver(t,function(){return RAe(s.gl,s.debug,r,n)})},e.prototype.createProgram=function(t){this.throwIfDisposed();var r=this.gl,n=v5e(r,this.debug,t),s=jAe(r,this.debug),i=b5e(r,this.debug);return Lr(r,this.debug,function(){return r.attachShader(i,s)}),Lr(r,this.debug,function(){return r.attachShader(i,n)}),y5e(r,this.debug,i),this.debug&&DE(r,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=DAe(r,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(t){var r=this;this.throwIfDisposed(),t===this.program&&(this.program=null),t!=null&&Lr(this.gl,this.debug,function(){return r.gl.deleteProgram(t)})},e.prototype.setProgram=function(t){var r=this;this.throwIfDisposed(),this.program=t,this.program!=null&&this.debug&&DE(this.gl,this.debug,this.program),Lr(this.gl,this.debug,function(){return r.gl.useProgram(t)})},e.prototype.getUniformLocation=function(t,r,n){return n===void 0&&(n=!0),this.throwIfDisposed(),n?_5e(this.gl,this.debug,t,r):E5e(this.gl,t,r)},e.prototype.getAttributeLocation=function(t,r){var n=this;return this.throwIfDisposed(),Lr(this.gl,this.debug,function(){return n.gl.getAttribLocation(t,r)})},e.prototype.getUniformLocationNoThrow=function(t,r){return this.throwIfDisposed(),this.gl.getUniformLocation(t,r)},e.prototype.setInputMatrixTexture=function(t,r,n){this.throwIfDisposed(),this.throwIfNoProgram(),D5e(this.gl,this.debug,this.program,t,r,n)},e.prototype.setOutputMatrixTexture=function(t,r,n){this.setOutputMatrixTextureDriver(t,n,r)},e.prototype.setOutputPackedMatrixTexture=function(t,r,n){this.throwIfDisposed();var s=f1(r,n),i=s[0],o=s[1];this.setOutputMatrixTextureDriver(t,i,o)},e.prototype.setOutputMatrixWriteRegion=function(t,r,n,s){this.setOutputMatrixWriteRegionDriver(n,t,s,r)},e.prototype.setOutputPackedMatrixWriteRegion=function(t,r,n,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){this.program!=null&&DE(this.gl,this.debug,this.program),Jj(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var t=this.gl;this.debug&&this.debugValidate(),Lr(t,this.debug,function(){return t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)})},e.prototype.blockUntilAllProgramsCompleted=function(){var t=this;this.throwIfDisposed(),Lr(this.gl,this.debug,function(){return t.gl.finish()})},e.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Qj(this.gl,this.debug,zt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(zt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var t=this.gl,r=this.getQueryTimerExtensionWebGL2(),n=t.createQuery();return t.beginQuery(r.TIME_ELAPSED_EXT,n),n}var s=this.getQueryTimerExtensionWebGL1(),i=s.createQueryEXT();return s.beginQueryEXT(s.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(zt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var t=this.getQueryTimerExtensionWebGL1();t.endQueryEXT(t.TIME_ELAPSED_EXT)}else{var r=this.gl,n=this.getQueryTimerExtensionWebGL2();r.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(t){return Pr(this,void 0,void 0,function(){var r=this;return Or(this,function(n){switch(n.label){case 0:return[4,q8(function(){return r.disposed||r.isQueryAvailable(t,zt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return n.sent(),[2,this.getQueryTime(t,zt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},e.prototype.getQueryTime=function(t,r){if(r===0)return null;if(r===2){var n=this.gl;return n.getQueryParameter(t,n.QUERY_RESULT)/1e6}var s=this.getQueryTimerExtensionWebGL1();return s.getQueryObjectEXT(t,s.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(t,r){if(r===0)return!0;if(r===2){var n=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(s=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(t,s.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(t){var r=this;return new Promise(function(n){r.addItemToPoll(function(){return t.isFencePassed()},function(){return n()})})},e.prototype.pollItems=function(){for(var t=function(n){for(var s=0;s<n.length&&n[s]();++s);return s-1}(this.itemsToPoll.map(function(n){return n.isDoneFn})),r=0;r<=t;++r)(0,this.itemsToPoll[r].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(t+1)},e.prototype.addItemToPoll=function(t,r){var n=this;this.itemsToPoll.push({isDoneFn:t,resolveFn:r}),this.itemsToPoll.length>1||q8(function(){return n.pollItems(),n.itemsToPoll.length===0})},e.prototype.bindTextureToFrameBuffer=function(t){this.throwIfDisposed(),AE(this.gl,this.debug,t,this.framebuffer),this.debug&&Jj(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(AE(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Jj(this.gl)):X8(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(t,r){this.bindTextureToFrameBuffer(t);var n=r();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(t,r,n){this.throwIfDisposed();var s=this.gl;AE(s,this.debug,t,this.framebuffer),this.debug&&Jj(s),this.outputTexture=t,Lr(s,this.debug,function(){return s.viewport(0,0,r,n)}),Lr(s,this.debug,function(){return s.scissor(0,0,r,n)})},e.prototype.setOutputMatrixWriteRegionDriver=function(t,r,n,s){var i=this;this.throwIfDisposed(),Lr(this.gl,this.debug,function(){return i.gl.scissor(t,r,n,s)})},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},e}();function cB(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach(function(r,n){var s=r.logicalShape,i=t[n],o=i.shape;if(!Ei(s,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+s+" and "+o+" must match");if(!r.isUniform||!i.isUniform){var l=r.texShape,c=i.isUniform?null:i.texData.texShape;if(!Ei(l,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+l+" and "+c+" must match")}})}var LAe=function(e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var n=r.filterWidth,s=r.inChannels,i=r.strideWidth,o=r.strideHeight,l=r.padInfo,c=r.outWidth,d=r.dilationWidth,u=r.dilationHeight,h=r.dataFormat,m=l.left,p=l.top,v=s*n,g=wo(),b=h==="channelsLast",y=b?0:1,C=b?1:2,w="",k=0;k<=1;k++)for(var S=0;S<=1;S++)w+=`
          blockIndex = rc.y + `+S+`;
          pos = rc.x + `+k+`;

          if(blockIndex < `+e[1]+" && pos < "+e[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+o+" - "+p+`;
            d0 = offsetY + `+u+" * (pos / "+v+`);

            if(d0 < `+t[y]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+i+". - "+m+`.);
              d1 = offsetX + `+d+" * (int(mod(float(pos), "+v+".) / "+s+`.));

              if(d1 < `+t[C]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+s+`.));

                if (`+b+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*k+S)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*k+S)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+w+`

        `+g.output+` = result;
      }
    `},BAe=function(e,t,r,n,s){this.variableNames=["x"],this.outputShape=[];var i,o=t,l=e[3]-1;this.outputShape=e;var c="float("+r+") + float("+n+") * sum";i=s===.5?"inversesqrt("+c+")":s===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+s+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+o+"; j <= "+o+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+l+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+i+`;
        setOutput(val);
      }
    `},UAe=function(e,t,r,n,s){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=r,this.alpha=n,this.beta=s,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+t+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+t+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+n+") * norm + float("+r+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+n+`)
                * float(`+s+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+s+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},$Ae=function(e,t,r,n,s){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var i,o=t,l=e[3]-1;this.outputShape=e;var c="float("+r+") + float("+n+") * sum";i=s===.5?"inversesqrt("+c+")":s===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+s+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+o+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+o+"; j <= "+o+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+l+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+i+`;
        setOutput(result);
      }
    `},VAe=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,r=e.strideWidth,n=e.dilationHeight,s=e.effectiveFilterHeight,i=e.effectiveFilterWidth,o=s-1-e.padInfo.top,l=i-1-e.padInfo.left,c=s*i-1;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+s+`;
          wR += `+n+`) {
          float dyR = float(dyRCorner + wR) / `+t+`.0;

          if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+i+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+r+`.0;

            if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+i+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},qAe=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,r=e.strideHeight,n=e.strideWidth,s=e.dilationDepth,i=e.dilationHeight,o=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,u=l-1-e.padInfo.front,h=c-1-e.padInfo.top,m=d-1-e.padInfo.left,p=l*c*d-1;this.userCode=`
      const ivec3 pads = ivec3(`+u+", "+h+", "+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
           wD += `+s+`) {
          float dyD = float(dyDCorner + wD) / `+t+`.0;

          if (dyD < 0.0 || dyD >= `+e.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+i+`) {
            float dyR = float(dyRCorner + wR) / `+r+`.0;

            if (dyR < 0.0 || dyR >= `+e.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+d+`;
                wC += `+o+`) {
              float dyC = float(dyCCorner + wC) / `+n+`.0;

              if (dyC < 0.0 || dyC >= `+e.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+p+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+d+` +
                  wR * `+d+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},ME=function(e,t,r,n,s,i,o){r===void 0&&(r=!1),n===void 0&&(n=!1),s===void 0&&(s=!1),i===void 0&&(i=null),o===void 0&&(o=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t;var l=r?e[1]:e[2],c=Math.ceil(l/2),d=r?"i * 2, rc.y":"rc.y, i * 2",u=n?"rc.z, i * 2":"i * 2, rc.z",h=r?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=n?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",v="";i&&(p=o?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+i+`
        }`:`vec4 activation(vec4 x) {
          `+i+`
        }`,v="result = activation(result);");var g=s?"result += getBiasAtOutCoords();":"";s&&this.variableNames.push("bias"),o&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+p+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+d+`);
          vec4 b = getMatrixB(rc.x, `+u+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+h[0]+" * "+m[0]+`);
          result += (`+h[1]+" * "+m[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+g+`

        `+v+`

        setOutput(result);
      }
    `},zAe=function(){function e(t,r,n){this.variableNames=["probs"],this.outputShape=[t,n],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(r-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(r-1)+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;return function(n,s){r.seedLoc==null&&(r.seedLoc=n.getUniformLocation(s,"seed")),n.gl.uniform1f(r.seedLoc,t)}},e}(),HAe=function(e,t,r,n){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+n+"), float("+r+`),
                      float(index == coords.y)));
      }
    `},WAe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e;var t=e.length;if(t===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var r=ll("rc",t),n=Mn(t),s=function(l,c,d){if(l===1)return"rc > "+c[0];for(var u="",h=l-2;h<l;h++)u+=d[h]+" >= "+c[h],h<l-1&&(u+="||");return u}(t,e,r),i=function(l,c,d,u){if(l===1)return"";var h=u.slice(-2);return`
    int r = `+h[0]+`;
    int c = `+h[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+d+`;
  `}(t,e[e.length-1],e[e.length-2],r),o=function(l,c){var d=l.length,u=function(h,m){for(var p=[],v=0;v<=1;v++)for(var g=0;g<=1;g++){for(var b=(v===0?"r":"rp1")+", "+(g===0?"c":"cp1"),y=2;y<h;y++)b=m[m.length-1-y]+","+b;p.push(b)}return p}(d,c);return d===1?`getA(rc),
            rc + 1 >= `+l[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+u[0]+`),
          cEdge ? 0. : getA(`+u[1]+`),
          rEdge ? 0. : getA(`+u[2]+`),
          rEdge || cEdge ? 0. : getA(`+u[3]+")"}(e,r);this.userCode=`
        void main() {
          `+n+` rc = getOutputCoords();

          if(`+s+`) {
            setOutput(vec4(0));
          } else {
            `+i+`

            setOutput(vec4(`+o+`));
          }
        }
      `}},GAe=function(e,t,r){this.variableNames=["x"],this.outputShape=t.map(function(c,d){return c[0]+e[d]+c[1]});var n=e.length,s=Mn(n),i=t.map(function(c){return c[0]}).join(","),o=t.map(function(c,d){return c[0]+e[d]}).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,n);this.userCode=n!==1?`
      `+s+" start = "+s+"("+i+`);
      `+s+" end = "+s+"("+o+`);

      void main() {
        `+s+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+r+`));
        } else {
          `+s+` coords = outC - start;
          setOutput(getX(`+l+`));
        }
      }
    `:`
        int start = `+i+`;
        int end = `+o+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+r+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},YAe=function(e,t,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t.map(function(b,y){return b[0]+e[y]+b[1]});for(var n=e.length,s=Mn(n),i=t.map(function(b){return b[0]}).join(","),o=t.map(function(b,y){return b[0]+e[y]}).join(","),l=ll("rc",n),c=ll("source",n),d=l[n-1]+" < "+this.outputShape[n-1],u=n===1?"source":"vec2("+c.slice(-2).join()+")",h=[s+" rc = outputLoc;",l[n-1]+` += 1;
       if(`+d+`) {
      `,n===1?"":`}
       rc = outputLoc;
       `+l[n-2]+` += 1;
       if(`+l[n-2]+" < "+this.outputShape[n-2]+") {",n===1?"":"  "+l[n-1]+` += 1;
         if(`+d+") {"],m=n===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",v=0,g=n===1?2:4;v<g;v++)p+=`
        `+h[v]+`
        if (`+m+`) {
          result[`+v+"] = float("+r+`);
        } else {
          `+s+` source = rc - start;
          result[`+v+"] = getChannel(getX("+c.join()+"), "+u+`);
        }
      `;p+=n===1?"} ":"}}",this.userCode=`
      const `+s+" start = "+s+"("+i+`);
      const `+s+" end = "+s+"("+o+`);

      void main() {
        `+s+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+p+`
        setOutput(result);
      }
    `},RE=function(e,t,r){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var n=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterHeight,d=e.effectiveFilterWidth,u=e.padInfo.top,h=e.padInfo.left;this.outputShape=e.outShape;var m=t==="avg",p="0.0";if(m||(p="-1.0 / 1e-20"),r)this.userCode=`
        const ivec2 strides = ivec2(`+s+", "+i+`);
        const ivec2 pads = ivec2(`+u+", "+h+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+d+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+e.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+d+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var v=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(v="avgValue / count");var g=4*Math.floor(n/4),b=n%4,y=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+s+", "+i+`);
      const ivec2 pads = ivec2(`+u+", "+h+`);
      const float initializationValue = `+p+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+p+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+o+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+e.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+y+`
          }

          int xC = xCCorner + `+g+`;
          if (`+(b===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(b===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+y+`
          } else if (`+(b===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+y+`
          }
        }
        setOutput(`+v+`);
      }
    `}},FE=function(e,t,r){if(this.variableNames=["x"],t==="avg"&&r)throw new Error("Cannot compute positions for average pool.");var n=e.filterWidth,s=e.strideDepth,i=e.strideHeight,o=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,d=e.dilationWidth,u=e.effectiveFilterDepth,h=e.effectiveFilterHeight,m=e.effectiveFilterWidth,p=e.padInfo.front,v=e.padInfo.top,g=e.padInfo.left;this.outputShape=e.outShape;var b=t==="avg",y="0.0";if(b||(y="-1.0 / 1e-20"),r)this.userCode=`
        const ivec3 strides =
            ivec3(`+s+", "+i+", "+o+`);
        const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+u+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+e.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+h+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+e.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+m+`;
                  wC += `+d+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+e.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+h+" * "+m+` +
                      wR * `+m+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var C=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="avg"&&(C="avgValue / count");var w=4*Math.floor(n/4),k=n%4,S=`
      if (`+b+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+s+", "+i+", "+o+`);
      const ivec3 pads = ivec3(`+p+", "+v+", "+g+`);
      const float initializationValue = `+y+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+e.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+y+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+u+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+e.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+h+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+e.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+w+`; wC += 4) {
              int xC = xCCorner + wC * `+d+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+d+`, ch)
              );

              `+S+`
            }

            int xC = xCCorner + `+w+`;
            if (`+(k===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+S+`
            } else if (`+(k===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                initializationValue,
                initializationValue
              );

              `+S+`
            } else if (`+(k===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+d+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+d+`, ch),
                initializationValue
              );

              `+S+`
            }
          }
          setOutput(`+C+`);
        }
      }
    `}},KAe=function(e,t){this.variableNames=["x"];var r=e.windowSize,n=e.batchSize,s=e.inSize,i=Math.ceil(s/r);this.outputShape=[n,i];var o="0.0",l="";t==="prod"?o="1.0":t==="min"?(o="1.0 / 1e-20",l="min"):t==="max"&&(o="-1.0 / 1e-20",l="max");var c=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";t==="sum"?c="sumValue":t==="prod"?c="prodValue":t==="all"?c="allValue":t==="any"&&(c="anyValue");var d=4*Math.floor(r/4),u=r%4,h=`
      if (`+(t==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(t==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+l+`(values, minMaxValue);
      }
    `,m="vec4";t==="all"?(o="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):t==="any"&&(o="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");var p="";s%r>0&&(p=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+o+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+p+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        vec4 minMaxValue = vec4(`+o+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+d+`; i += 4) {
          int inIdx = inOffset + i;
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+h+`
        }

        int inIdx = inOffset + `+d+`;
        if (`+(u===1)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(u===2)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+h+`
        } else if (`+(u===3)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+h+`
        }
        setOutput(`+c+`);
      }
    `},XAe=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;for(var r="",n=0;n<4;n++){var s="thisRC = rc;";n%2==1&&(s+="thisRC.z += 1;"),n>1&&(s+="thisRC.y += 1;"),r+=`
        `+s+`
        `+(n>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+n+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(n>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Zp(["r","c","d"],t)+`
      return ivec3(r, c, d);
    }
  
      `+C4(e)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+e[1]+`;
        int cols = `+e[2]+`;

        `+r+`

        setOutput(result);
      }
    `},QAe=function(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var n=t.shape,s=n[1],i=n[2],o=e.shape,l=o[1],c=o[2],d=[r&&l>1?s-1:s,r&&c>1?i-1:i],u=[r&&l>1?l-1:l,r&&c>1?c-1:c],h=d[0]/u[0],m=d[1]/u[1],p=1/h,v=1/m,g=2*Math.ceil(p)+2,b=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(s-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(i-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},JAe=function(e,t,r,n){this.variableNames=["A"],this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[n&&t>1?i-1:i,n&&r>1?o-1:o],d=[n&&t>1?t-1:t,n&&r>1?r-1:r];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},ZAe=function(e,t,r,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[n&&t>1?i-1:i,n&&r>1?o-1:o],d=[n&&t>1?t-1:t,n&&r>1?r-1:r];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`,
          `+c[1]/d[1]+`);
      const vec3 inputShapeRC = vec3(`+i+".0, "+o+`.0,
                                     `+o+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(l-1)+`;
        bool hasNextRow = coords.z < `+(r-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},eTe=function(e,t,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var n=t.shape,s=n[1],i=n[2],o=e.shape,l=o[1],c=o[2],d=[r&&l>1?s-1:s,r&&c>1?i-1:i],u=[r&&l>1?l-1:l,r&&c>1?c-1:c],h=d[0]/u[0],m=d[1]/u[1],p=1/h,v=1/m,g=2*Math.ceil(p)+2,b=2*Math.ceil(v)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+h+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+p+`);
        const float invWidthScale = float(`+v+`);

        const int winHeight = int(`+g+`);
        const int winWidth = int(`+b+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+d[0]+`) *
                (float(dyR) / float(`+u[0]+`));

            float sourceFracCol =
                float(`+d[1]+`) *
                  (float(dyC) / float(`+u[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+s+`) - 1),
                `+r+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+i+`) - 1),
                `+r+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},tTe=function(e,t,r,n){this.variableNames=["A"],this.outputShape=[];var s=e[0],i=e[1],o=e[2],l=e[3];this.outputShape=[s,t,r,l];var c=[n&&t>1?i-1:i,n&&r>1?o-1:o],d=[n&&t>1?t-1:t,n&&r>1?r-1:r],u=n?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/d[0]+`,
          `+c[1]/d[1]+`);
      const vec2 inputShapeRC = vec2(`+i+".0, "+o+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+u+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},rTe=function(e,t){this.variableNames=["x"];var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-"+r+" tensor is not yet supported");if(this.outputShape=e,r!==1){var n=e.map(function(i,o){return function(l){return t.indexOf(l)!==-1&&e[l]!==1?e[l]+" - coords["+l+"] - 1":"coords["+l+"]"}(o)}).join(","),s=Mn(r);this.userCode=`
      void main() {
        `+s+` coords = getOutputCoords();
        setOutput(getX(`+n+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+e[0]+` - coord - 1));
        }
      `},aTe=function(e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var r=e.length;if(r>4)throw new Error("WebGL backend: Reverse of rank-"+r+" tensor is not yet supported");this.outputShape=e;var n=ll("rc",r),s=n[r-1]+" + 1 < "+this.outputShape[r-1],i=n[r-2]+" + 1 < "+this.outputShape[r-2],o=Mn(r);function l(c){var d=e.map(function(u,h){return function(m,p){return t.indexOf(m)!==-1&&e[m]!==1?e[m]+" - "+p[m]+" - 1":""+p[m]}(h,c)});return"getChannel(getX("+d.join(",")+"), vec2("+d.slice(-2).join(",")+"))"}this.userCode=r===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+e[0]+` - rc - 1),
            `+e[0]+` - rc - 1);
          if(`+s+`){
              result.g = getChannel(getX(`+e[0]+` - (rc  + 1) - 1),
                `+e[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+o+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+function(c){return l(c)}(n.slice())+`;
          if(`+s+`){
            result.g = `+function(c){return c[r-1]="("+c[r-1]+" + 1)",l(c)}(n.slice())+`;
          }
          if(`+i+`) {
            result.b = `+function(c){return c[r-2]="("+c[r-2]+" + 1)",l(c)}(n.slice())+`;
            if(`+s+`) {
              result.a = `+function(c){return c[r-1]="("+c[r-1]+" + 1)",c[r-2]="("+c[r-2]+" + 1)",l(c)}(n.slice())+`;
            }
          }
          setOutput(result);
        }
    `},dB=function(e,t,r,n,s,i,o){this.variableNames=["updates","indices","defaultValue"],this.outputShape=i;var l=Mn(s.length),c=Mn(i.length),d="";r===1?d="i":r===2&&(d="i, j");var u="getIndices("+d+")",h="";n===1?h="i":n===2&&(h="i, coords[1]");var m="getUpdates("+h+")",p=t>1?"strides[j]":"strides";this.userCode=`
        `+l+" strides = "+l+"("+s+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+e+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+t+`; j++) {
              int index = round(`+u+`);
              flattenedIndex += index * `+p+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+m+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},nTe=function(e,t){this.variableNames=["x","segmentIds"];var r=e.windowSize,n=e.batchSize,s=e.inSize,i=e.numSegments,o=i*Math.ceil(s/r);this.outputShape=[n,o];var l=4*Math.floor(r/4),c=r%4,d=`
        sumValue += dot(values, segFilter);
    `,u="";s%r>0&&(u=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return initializationValue;
        }
      `);var h="";s%r>0&&(h=`
        if (inIdx < 0 || inIdx >= `+s+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+u+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+h+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+i+")) * float("+r+`));
        int currentSeg = int(mod(float(outIdx), float(`+i+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+d+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+d+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+d+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+d+`
        }
        setOutput(sumValue);
      }
    `},sTe=function(e,t,r){var n,s;if(this.variableNames=["c","a","b"],this.outputShape=t,r>4)throw Error("Where for rank "+r+" is not yet supported");if(r===1)s="resRC",n="resRC";else{for(var i=["resRC.x","resRC.y","resRC.z","resRC.w"],o=[],l=[],c=0;c<t.length;c++)l.push(""+i[c]),c<e&&o.push(""+i[c]);n=o.join(),s=l.join()}var d=Mn(r);this.userCode=`
      void main() {
        `+d+` resRC = getOutputCoords();
        float cVal = getC(`+n+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+s+`));
        } else {
          setOutput(getB(`+s+`));
        }
      }
    `},iTe=function(){function e(t){this.variableNames=["source"],this.outputShape=t,this.rank=t.length;var r,n=Mn(this.rank),s="uniform int start["+this.rank+"];",i=function(o){if(o===1)return"sourceLoc";if(o<=6)return LE.slice(0,o).map(function(l){return"sourceLoc."+l}).join(",");throw Error("Slicing for rank "+o+" is not yet supported")}(this.rank);r=`
        `+n+` sourceLoc;
        `+n+` coords = getOutputCoords();
        `+t.map(function(o,l){return"sourceLoc."+LE[l]+" = start["+l+"] + coords."+LE[l]+";"}).join(`
`)+`
      `,this.userCode=`
      `+s+`
      void main() {
        `+r+`
        setOutput(getSource(`+i+`));
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,s){r.startLoc==null&&(r.startLoc=n.getUniformLocationNoThrow(s,"start"),r.startLoc==null)||n.gl.uniform1iv(r.startLoc,t)}},e}(),LE=["x","y","z","w","u","v"],oTe=function(){function e(t){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=t,this.rank=t.length;var r=Mn(this.rank),n=ll("coords",this.rank),s=ll("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":"vec2("+s.slice(-2).join()+")",o="getChannel(getSource("+s.join()+"), "+i+")",l=`
      result.x = `+o+`;
      if (++`+n[this.rank-1]+" < "+t[this.rank-1]+`) {
        ++`+s[this.rank-1]+`;
        result.y = `+o+`;
        --`+s[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+n[this.rank-1]+`;
      if (++`+n[this.rank-2]+" < "+t[this.rank-2]+`) {
        ++`+s[this.rank-2]+`;
        result.z = `+o+`;
        if (++`+n[this.rank-1]+" < "+t[this.rank-1]+`) {
          ++`+s[this.rank-1]+`;
          result.w = `+o+`;
        }
      }
    `,d=this.rank<=4?`sourceLoc = coords +
            `+r+"("+t.map(function(u,h){return"start["+h+"]"}).join()+");":t.map(function(u,h){return s[h]+" = "+n[h]+" + start["+h+"];"}).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+r+` coords = getOutputCoords();
        `+r+` sourceLoc;
        `+d+`
        vec4 result = vec4(0.);
        `+l+`
        `+c+`
        setOutput(result);
      }
    `}return e.prototype.getCustomSetupFunc=function(t){var r=this;if(t.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+t.length+")");return function(n,s){r.startLoc==null&&(r.startLoc=n.getUniformLocationNoThrow(s,"start"),r.startLoc==null)||n.gl.uniform1iv(r.startLoc,t)}},e}(),lTe=function(e,t,r){this.variableNames=["x"],this.outputShape=r;var n=r.length,s=Mn(r.length),i=Mn(r.length),o="";if(n===1)o="coords * strides + begin";else{var l=0;o=r.map(function(c,d){return l++,r.length===1?"coords * strides["+d+"] + begin["+d+"]":"coords["+(l-1)+"] * strides["+d+"] + begin["+d+"]"}).join(",")}this.userCode=`
      `+s+" begin = "+s+"("+e+`);
      `+s+" strides = "+s+"("+t+`);

      void main() {
        `+i+` coords = getOutputCoords();
        setOutput(getX(`+o+`));
      }
    `},cTe=function(){function e(t){this.gpgpu=t,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(t,r,n){var s,i=uB(r,n),o=hB(t,i,n);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var l=this.freeTextures[o].shift();return this.usedTextures[o].push(l),l}return this.numUsedTextures++,this.log(),i===zl.PACKED_2X2_FLOAT32?s=this.gpgpu.createPackedMatrixTexture(t[0],t[1]):i===zl.PACKED_2X2_FLOAT16?s=this.gpgpu.createFloat16PackedMatrixTexture(t[0],t[1]):i===zl.UNPACKED_FLOAT32?s=this.gpgpu.createFloat32MatrixTexture(t[0],t[1]):i===zl.UNPACKED_FLOAT16?s=this.gpgpu.createFloat16MatrixTexture(t[0],t[1]):i===zl.PACKED_4X1_UNSIGNED_BYTE&&(s=this.gpgpu.createUnsignedBytesMatrixTexture(t[0],t[1])),this.usedTextures[o].push(s),s},e.prototype.releaseTexture=function(t,r,n,s){if(this.freeTextures!=null){var i=hB(r,uB(n,s),s);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(t),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],l=o.indexOf(t);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(l,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var t=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+t+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var t=this;if(this.freeTextures!=null){for(var r in this.freeTextures)this.freeTextures[r].forEach(function(n){t.gpgpu.deleteMatrixTexture(n)});for(var r in this.usedTextures)this.usedTextures[r].forEach(function(s){t.gpgpu.deleteMatrixTexture(s)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function uB(e,t){if(e===Yl.UPLOAD)return zl.PACKED_2X2_FLOAT32;if(e===Yl.RENDER||e==null)return function(r){return zt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?r?zl.PACKED_2X2_FLOAT32:zl.UNPACKED_FLOAT32:r?zl.PACKED_2X2_FLOAT16:zl.UNPACKED_FLOAT16}(t);if(e===Yl.DOWNLOAD||e===Yl.PIXELS)return zl.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function hB(e,t,r){return e[0]+"_"+e[1]+"_"+t+"_"+r}var dTe=function(e,t){this.variableNames=["A"];for(var r=new Array(e.length),n=0;n<r.length;n++)r[n]=e[n]*t[n];this.outputShape=r,this.rank=r.length;var s=Mn(this.rank),i=function(o){var l=o.length;if(l>5)throw Error("Tile for rank "+l+" is not yet supported");if(l===1)return"imod(resRC, "+o[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],d=[],u=0;u<o.length;u++)d.push("imod("+c[u]+", "+o[u]+")");return d.join()}(e);this.userCode=`
      void main() {
        `+s+` resRC = getOutputCoords();
        setOutput(getA(`+i+`));
      }
    `},uTe=function(e,t){this.variableNames=["A"];for(var r=new Array(e.length),n=0;n<r.length;n++)r[n]=e[t[n]];this.outputShape=r,this.rank=r.length;var s=Mn(this.rank),i=function(o){var l=o.length;if(l>6)throw Error("Transpose for rank "+l+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],d=new Array(l),u=0;u<o.length;u++)d[o[u]]=c[u];return d.join()}(t);this.userCode=`
    void main() {
      `+s+` resRC = getOutputCoords();
      setOutput(getA(`+i+`));
    }
    `},hTe=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var r=new Array(e.length),n=0;n<r.length;n++)r[n]=e[t[n]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var s=Mn(this.rank),i=kG("rc",this.rank),o=new Array(this.rank);for(n=0;n<t.length;n++)o[t[n]]=i[n];var l="vec2("+o.slice(-2).join()+")",c="++"+i[this.rank-1]+" < "+r[this.rank-1],d="getChannel(getA("+o.join()+"), "+l+")";this.userCode=`
    void main() {
      `+s+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+d+`;
      if(`+c+`) {
        result[1] = `+d+`;
      }
      --`+i[this.rank-1]+`;
      if(++`+i[this.rank-2]+" < "+r[this.rank-2]+`) {
        result[2] = `+d+`;
        if(`+c+`) {
          result[3] = `+d+`;
        }
      }
      setOutput(result);
    }
    `},k4=1.7580993408473768,_4=1.0507009873554805,Na=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      float unaryOperation(float x) {
        `+t+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},$d="if (isnan(x)) return x;",fTe="return x;",fB="return abs(x);",TG=$d+`
  return (x < 0.0) ? 0.0 : x;
`,IG=$d+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,PG="return (x >= 0.0) ? x : (exp(x) - 1.0);",mTe=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+k4+`;
  float scale = `+_4+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,mB="return -x;",pB="return ceil(x);",xB="return floor(x);",vB="return exp(x);",gB="return exp(x) - 1.0;",pTe=$d+`
  return sin(x);
`,xTe=$d+`
  return cos(x);
`,vTe=$d+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,gTe=$d+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,bTe=$d+`
  return atan(x);
`,yTe=$d+"return log(x + sqrt(x * x + 1.0));",jTe=$d+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,NTe=$d+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,rN="return x;",wTe="return x;",OG=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,MG=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,RG=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,jb=function(e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+t+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},STe=function(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e;var t=e.length,r=ll("rc",t),n=Mn(t),s=function(l,c){if(l===1)return"rc";for(var d="",u=0;u<l;u++)d+=c[u],u<l-1&&(d+=",");return d}(t,r),i=r.slice(-2),o=t<=1?"rc":"vec2("+i.join(",")+")";this.userCode=`
      void main() {
        `+n+` rc = getOutputCoords();
        vec4 packedInput = getA(`+s+`);

        setOutput(getChannel(packedInput, `+o+`));
      }
    `},aN={};function nN(e,t){if(t===void 0&&(t=!1),e==="linear")return t?wTe:fTe;if(e==="relu")return t?OG:TG;if(e==="elu")return t?RG:PG;if(e==="relu6")return t?MG:IG;if(e==="prelu")return t?AG:DG;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var CTe=600,kTe=function(e){function t(r){var n,s=e.call(this)||this;if(s.pendingRead=new WeakMap,s.pendingDisposal=new WeakSet,s.dataRefCount=new WeakMap,s.numBytesInGPU=0,s.uploadWaitMs=0,s.downloadWaitMs=0,s.warnedAboutMemory=!1,s.pendingDeletes=0,s.disposed=!1,!zt().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(r==null){var i=th(zt().getNumber("WEBGL_VERSION"));s.binaryCache=((n=zt().getNumber("WEBGL_VERSION"))in aN||(aN[n]={}),aN[n]),s.gpgpu=new FAe(i),s.canvas=i.canvas,s.gpgpuCreatedLocally=!0}else s.gpgpu=r,s.binaryCache={},s.gpgpuCreatedLocally=!1,s.canvas=r.gl.canvas;return s.textureManager=new cTe(s.gpgpu),s.numMBBeforeWarning=zt().global.screen==null?1024:zt().global.screen.height*zt().global.screen.width*window.devicePixelRatio*CTe/1024/1024,s.texData=new vG(s,ht),s}return Ud(t,e),t.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},t.prototype.write=function(r,n,s){if(zt().getBool("DEBUG")&&this.checkNumericalProblems(r),s==="complex64"&&r!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var i={};return this.texData.set(i,{shape:n,dtype:s,values:r,usage:Yl.UPLOAD}),i},t.prototype.move=function(r,n,s,i){if(zt().getBool("DEBUG")&&this.checkNumericalProblems(n),i==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(r,{shape:s,dtype:i,values:n,usage:Yl.UPLOAD})},t.prototype.readSync=function(r){var n=this.texData.get(r),s=n.values,i=n.dtype,o=n.complexTensors,l=n.slice,c=n.shape,d=n.isPacked;if(l!=null){var u=void 0;u=d?new jb(c,rN):new Na(c,rN);var h=this.runWebGLProgram(u,[{dataId:r,shape:c,dtype:i}],i),m=this.readSync(h.dataId);return this.disposeData(h.dataId),m}if(s!=null)return this.convertAndCacheOnCPU(r);if(i==="string")return s;var p,v,g=this.activeTimers!=null;return g&&(p=ku()),i==="complex64"?v=X5(o.real.dataSync(),o.imag.dataSync()):v=this.getValuesFromTexture(r),g&&(this.downloadWaitMs+=ku()-p),this.convertAndCacheOnCPU(r,v)},t.prototype.read=function(r){return Pr(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,w,k,S,D,E,T;return Or(this,function(A){switch(A.label){case 0:if(this.pendingRead.has(r))return n=this.pendingRead.get(r),[2,new Promise(function(L){return n.push(L)})];if(s=this.texData.get(r),i=s.values,o=s.shape,l=s.slice,c=s.dtype,d=s.complexTensors,u=s.isPacked,l!=null)return h=void 0,h=u?new jb(o,rN):new Na(o,rN),m=this.runWebGLProgram(h,[{dataId:r,shape:o,dtype:c}],c),p=this.read(m.dataId),this.disposeData(m.dataId),[2,p];if(i!=null)return[2,this.convertAndCacheOnCPU(r)];if(!zt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&zt().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return v=null,c!=="complex64"&&zt().get("WEBGL_BUFFER_SUPPORTED")&&(g=this.decode(r),b=this.texData.get(g.dataId),v=(T=this.gpgpu).createBufferFromTexture.apply(T,[b.texture].concat(Wb(o)))),this.pendingRead.set(r,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:A.sent(),A.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([d.real.data(),d.imag.data()])];case 3:return C=A.sent(),w=C[0],k=C[1],y=X5(w,k),[3,5];case 4:v==null?y=this.getValuesFromTexture(r):(S=Fr(o),y=this.gpgpu.downloadFloat32MatrixFromBuffer(v,S)),A.label=5;case 5:return g!=null&&this.disposeData(g.dataId),D=this.convertAndCacheOnCPU(r,y),E=this.pendingRead.get(r),this.pendingRead.delete(r),E.forEach(function(L){return L(D)}),this.pendingDisposal.has(r)&&(this.pendingDisposal.delete(r),this.disposeData(r),this.pendingDeletes--),[2,D]}})})},t.prototype.checkNumericalProblems=function(r){if(r!=null)for(var n=0;n<r.length;n++){var s=r[n];if(!m5e(s))throw zt().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+s+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+s+" cannot be represented on this device.")}},t.prototype.getValuesFromTexture=function(r){var n,s=this.texData.get(r),i=s.shape,o=s.dtype,l=s.isPacked,c=Fr(i);if(zt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var d=this.decode(r),u=this.texData.get(d.dataId),h=(n=this.gpgpu).downloadMatrixFromPackedTexture.apply(n,[u.texture].concat(Wb(i))).subarray(0,c);return this.disposeData(d.dataId),h}var m=zt().getBool("WEBGL_PACK")&&l===!0,p=m?TE(i):i,v=m?new fAe(p):new hAe(p),g=this.runWebGLProgram(v,[{shape:p,dtype:o,dataId:r}],"float32"),b=this.texData.get(g.dataId),y=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(b.texture,b.texShape[0],b.texShape[1]).subarray(0,c);return this.disposeData(g.dataId),y},t.prototype.time=function(r){return Pr(this,void 0,void 0,function(){var n,s,i,o,l,c,d;return Or(this,function(u){switch(u.label){case 0:return n=this.activeTimers,s=[],i=!1,this.programTimersStack==null?(this.programTimersStack=s,i=!0):this.activeTimers.push(s),this.activeTimers=s,r(),o=F0(this.activeTimers.map(function(h){return h.query})).filter(function(h){return h!=null}),l=F0(this.activeTimers.map(function(h){return h.name})).filter(function(h){return h!=null}),this.activeTimers=n,i&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},zt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(o)]:[3,2];case 1:return d=u.sent(),c.kernelMs=YDe(d),c.getExtraProfileInfo=function(){return d.map(function(h,m){return{name:l[m],ms:h}}).map(function(h){return h.name+": "+h.ms}).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},u.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return zt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:ku(),endMs:null}},t.prototype.endTimer=function(r){return zt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),r):(r.endMs=ku(),r)},t.prototype.getQueryTime=function(r){return Pr(this,void 0,void 0,function(){var n;return Or(this,function(s){return zt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(r)]:[2,(n=r).endMs-n.startMs]})})},t.prototype.disposeData=function(r){if(!this.pendingDisposal.has(r)){if(this.pendingRead.has(r))return this.pendingDisposal.add(r),void this.pendingDeletes++;if(this.texData.has(r)){this.releaseGPUData(r);var n=this.texData.get(r).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.texData.delete(r)}}},t.prototype.releaseGPUData=function(r){var n=this.texData.get(r),s=n.texture,i=n.dtype,o=n.texShape,l=n.usage,c=n.isPacked,d=n.slice,u=d&&d.origDataId||r,h=this.dataRefCount.get(u);h>1?this.dataRefCount.set(u,h-1):(this.dataRefCount.delete(u),s!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(s,o,l,c)));var m=this.texData.get(r);m.texture=null,m.texShape=null,m.isPacked=!1,m.slice=null},t.prototype.getTexture=function(r){return this.uploadToGPU(r),this.texData.get(r).texture},t.prototype.getDataInfo=function(r){return this.texData.get(r)},t.prototype.getCPUBackend=function(){return zt().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=ht.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(r,n){var s=this;return n===void 0&&(n=128),this.getCPUBackend()!=null&&r.every(function(i){return s.texData.get(i.dataId).texture==null&&i.size<n})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(r,n){var s=this.makeOutput(r.shape,"complex64");return this.texData.get(s.dataId).complexTensors={real:ht.keep(r.clone()),imag:ht.keep(n.clone())},s},t.prototype.real=function(r){return this.texData.get(r.dataId).complexTensors.real.clone()},t.prototype.imag=function(r){return this.texData.get(r.dataId).complexTensors.imag.clone()},t.prototype.slice=function(r,n,s){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.slice(r,n,s);if(Fr(s)===0)return Ki([],s,r.dtype);var i=this.texData.get(r.dataId).isPacked,o=pG(r.shape,n,s);if(i||!o){var l=zt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new oTe(s):new iTe(s),c=l.getCustomSetupFunc(n);return this.compileAndRun(l,[r],null,c)}return this.uploadToGPU(r.dataId),this.shallowSlice(r,n,s)},t.prototype.shallowSlice=function(r,n,s){var i=this.texData.get(r.dataId),o=this.makeOutput(s,r.dtype),l=this.texData.get(o.dataId);Object.assign(l,i),l.shape=s,l.dtype=r.dtype;var c=xG(n,r.strides);i.slice&&(c+=i.slice.flatOffset),l.slice={flatOffset:c,origDataId:i.slice&&i.slice.origDataId||r.dataId};var d=this.dataRefCount.get(l.slice.origDataId)||1;return this.dataRefCount.set(l.slice.origDataId,d+1),o},t.prototype.stridedSlice=function(r,n,s,i){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.stridedSlice(r,n,s,i);var o=y4(n,s,i);if(o.some(function(c){return c===0}))return Ki([],o);var l=new lTe(n,i,o);return this.compileAndRun(l,[r])},t.prototype.reverse=function(r,n){var s=zt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new aTe(r.shape,n):new rTe(r.shape,n);return this.compileAndRun(s,[r])},t.prototype.concat=function(r,n){if(r[0].dtype==="complex64"){var s=r.map(function(p){return Uc(p)}),i=r.map(function(p){return Du(p)});return zi(this.concat(s,n),this.concat(i,n))}if(this.shouldExecuteOnCPU(r))return this.cpuBackend.concat(r,n);if(r.length===1)return r[0];if(r.length>zt().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(r.length/2),l=this.concat(r.slice(0,o),n),c=this.concat(r.slice(o),n);return this.concat([l,c],n)}if(zt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&r[0].rank>1){var d=new J3e(r.map(function(p){return p.shape}),n);return this.compileAndRun(d,r)}var u=B0(r.map(function(p){return p.shape}),n),h=r.map(function(p){return p.as2D(-1,Fr(p.shape.slice(n)))}),m=new Q3e(h.map(function(p){return p.shape}));return this.compileAndRun(m,h).reshape(u)},t.prototype.neg=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.neg(r);if(zt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,mB,r.dtype);var n=new Na(r.shape,mB);return this.compileAndRun(n,[r])},t.prototype.batchMatMul=function(r,n,s,i){var o=s?r.shape[2]:r.shape[1],l=i?n.shape[1]:n.shape[2],c=s?r.shape[1]:r.shape[2],d=r.shape[0];if((o===1||l===1)&&c>1e3){s&&(r=r.transpose([0,2,1])),i&&(n=n.transpose([0,2,1]));var u=l===1?r:r.as3D(d,c,1),h=l===1?2:1,m=l===1?n.as3D(d,1,c):n;return this.multiply(u,m).sum(h,!0)}var p=Wi(r.dtype,n.dtype),v=new ME(r.shape,[d,o,l],s,i);return this.compileAndRun(v,[r,n],p)},t.prototype.fusedBatchMatMul=function(r){var n=r.a,s=r.b,i=r.transposeA,o=r.transposeB,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=i?n.shape[2]:n.shape[1],h=o?s.shape[1]:s.shape[2],m=n.shape[0],p=Wi(n.dtype,s.dtype),v=l!=null,g=d!=null,b=c?nN(c,!0):null,y=new ME(n.shape,[m,u,h],i,o,v,b,g),C=[n,s];return l&&C.push(l),d&&C.push(d),this.compileAndRun(y,C,p)},t.prototype.multiply=function(r,n){if(r.dtype==="complex64"){var s=this.texData.get(r.dataId),i=this.texData.get(n.dataId),o=new rB(W3e,r.shape,n.shape),l=new rB(G3e,r.shape,n.shape),c=[this.makeComplexComponentTensorInfo(r,s.complexTensors.real),this.makeComplexComponentTensorInfo(r,s.complexTensors.imag),this.makeComplexComponentTensorInfo(n,i.complexTensors.real),this.makeComplexComponentTensorInfo(n,i.complexTensors.imag)],d=this.compileAndRun(o,c),u=this.compileAndRun(l,c),h=this.complex(d,u);return d.dispose(),u.dispose(),h}if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.multiply(r,n);if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,aB,r.dtype);var m=new bs(aB,r.shape,n.shape);return this.compileAndRun(m,[r,n],r.dtype)},t.prototype.batchNormalization=function(r,n,s,i,o,l){var c=[r,n,s],d=null;l!=null&&(d=l.shape,c.push(l));var u=null;if(o!=null&&(u=o.shape,c.push(o)),zt().getBool("WEBGL_PACK_NORMALIZATION")){var h=new H3e(r.shape,n.shape,s.shape,d,u,i);return this.compileAndRun(h,c)}var m=new z3e(r.shape,n.shape,s.shape,d,u,i);return this.compileAndRun(m,c)},t.prototype.localResponseNormalization4D=function(r,n,s,i,o){var l=zt().getBool("WEBGL_PACK_NORMALIZATION")?new $Ae(r.shape,n,s,i,o):new BAe(r.shape,n,s,i,o);return this.compileAndRun(l,[r])},t.prototype.LRNGrad=function(r,n,s,i,o,l,c){var d=new UAe(n.shape,i,o,l,c);return this.compileAndRun(d,[n,s,r])},t.prototype.tile=function(r,n){if(r.dtype==="string"){var s=this.readSync(r.dataId).map(function(o){return Xw(o)});return SG(fa(r.shape,r.dtype,s),n)}var i=new dTe(r.shape,n);return this.compileAndRun(i,[r])},t.prototype.pad=function(r,n,s){var i=zt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new YAe(r.shape,n,s):new GAe(r.shape,n,s);return this.compileAndRun(i,[r])},t.prototype.transpose=function(r,n){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.transpose(r,n);var s=zt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new hTe(r.shape,n):new uTe(r.shape,n);return this.compileAndRun(s,[r])},t.prototype.gather=function(r,n,s){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.gather(r,n,s);var i=new bAe(r.shape,n.size,s);return this.compileAndRun(i,[r,n])},t.prototype.batchToSpaceND=function(r,n,s){He(r.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=n.reduce(function(h,m){return h*m}),o=r2(r.shape,n,i),l=a2(o.length,n.length),c=n2(r.shape,n,i),d=uG(s,n.length),u=hG(c,s,n.length);return r.reshape(o).transpose(l).reshape(c).slice(d,u)},t.prototype.spaceToBatchND=function(r,n,s){He(r.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=n.reduce(function(m,p){return m*p}),o=[[0,0]];o.push.apply(o,s);for(var l=1+n.length;l<r.shape.length;++l)o.push([0,0]);var c=r.pad(o),d=r2(c.shape,n,i,!1),u=a2(d.length,n.length,!1),h=n2(c.shape,n,i,!1);return c.reshape(d).transpose(u).reshape(h)},t.prototype.reduce=function(r,n,s){var i=r.shape[0],o=r.shape[1],l=IE(o),c=new KAe({windowSize:l,inSize:o,batchSize:i},n),d=this.compileAndRun(c,[r],s);return d.shape[1]===1?d:this.reduce(d,n,s)},t.prototype.argReduce=function(r,n,s){s===void 0&&(s=null);var i=r.shape[0],o=r.shape[1];s!=null&&(i=s.shape[0],o=s.shape[1]);var l=IE(o),c=new M3e({windowSize:l,inSize:o,batchSize:i},n,s==null),d=[r];s!=null&&d.push(s);var u=this.compileAndRun(c,d,"int32");return u.shape[1]===1?u:this.argReduce(r,n,u)},t.prototype.argReducePacked=function(r,n,s){s===void 0&&(s=null);var i=s!=null?s.shape:r.shape,o=IE(i[i.length-1]),l=new $3e(i,o,n,s==null),c=s==null?[r]:[r,s],d=this.compileAndRun(l,c,"int32");return d.rank===r.rank?this.argReducePacked(r,n,d):d},t.prototype.sum=function(r,n){Ul("sum",n,r.rank);var s=xo(r.shape,n),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o),c=SE(r.dtype);return this.reduce(l,"sum",c).reshape(i)},t.prototype.prod=function(r,n){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.prod(r,n);var s=xo(r.shape,n),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o),c=SE(r.dtype);return this.reduce(l,"prod",c).reshape(i)},t.prototype.unsortedSegmentSum=function(r,n,s){var i=0,o=rh([i],r.rank),l=r;o!=null&&(l=r.transpose(o),i=ah(1,r.rank)[0]);var c=function(p,v,g){for(var b=[],y=p.length,C=0;C<y;C++)C!==v?b.push(p[C]):b.push(g);return b}(l.shape,i,s),d=Fr([l.shape[i]]),u=l.as2D(-1,d),h=SE(r.dtype),m=this.segOpCompute(u,"unsortedSegmentSum",n,h,s).reshape(c);return o!=null&&(m=m.transpose(x4(o))),m},t.prototype.segOpCompute=function(r,n,s,i,o){var l=r.shape[0],c=r.shape[1],d=function(m,p){var v,g=!1;for(m<=mG?(v=m,g=!0):v=$5(m,Math.floor(Math.sqrt(m)));!g;)v>p||v===m?g=!0:v=$5(m,v+1);return v}(c,o),u=new nTe({windowSize:d,inSize:c,batchSize:l,numSegments:o}),h=this.compileAndRun(u,[r,s],i);return h.shape[1]===o?h:(s=t2(0,o).tile([c/d]),this.segOpCompute(h,n,s,i,o))},t.prototype.argMinMaxReduce=function(r,n,s){var i=[n];if(Ul("arg"+s.charAt(0).toUpperCase()+s.slice(1),i,r.rank),!zt().getBool("WEBGL_PACK_REDUCE")||r.rank<=2){var o=xo(r.shape,i),l=o[0],c=Fr(o[1]),d=r.as2D(-1,c);return this.argReduce(d,s).reshape(l)}return this.argReducePacked(r,s)},t.prototype.argMin=function(r,n){return this.argMinMaxReduce(r,n,"min")},t.prototype.argMax=function(r,n){return this.argMinMaxReduce(r,n,"max")},t.prototype.cumsum=function(r,n,s,i){if(n!==r.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(r.rank-1)+" but got axis="+n);var o=new oAe(r.shape,s,i);return this.compileAndRun(o,[r])},t.prototype.equal=function(r,n){if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(equal(a, b));
`,"bool");var s=new bs("return float(a == b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.notEqual=function(r,n){if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(notEqual(a, b));
`,"bool");var s=new bs("return float(a != b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.less=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.less(r,n);if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(lessThan(a, b));
`,"bool");var s=new bs("return float(a < b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.lessEqual=function(r,n){if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(lessThanEqual(a, b));
`,"bool");var s=new bs("return float(a <= b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.greater=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.greater(r,n);if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(greaterThan(a, b));
`,"bool");var s=new bs("return float(a > b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.greaterEqual=function(r,n){if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var s=new bs("return float(a >= b);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.logicalNot=function(r){var n=new Na(r.shape,"return float(!(x >= 1.0));");return this.compileAndRun(n,[r])},t.prototype.logicalAnd=function(r,n){if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var s=new bs("return float(a >= 1.0 && b >= 1.0);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.logicalOr=function(r,n){if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var s=new bs("return float(a >= 1.0 || b >= 1.0);",r.shape,n.shape);return this.compileAndRun(s,[r,n],"bool")},t.prototype.select=function(r,n,s){var i=new sTe(r.rank,n.shape,n.rank);return this.compileAndRun(i,[r,n,s],Wi(n.dtype,s.dtype))},t.prototype.where=function(r){Zw("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var n=r.dataSync();return S4(r.shape,n)},t.prototype.topk=function(r,n,s){return CG(r.dataSync(),r.shape,r.dtype,n)},t.prototype.min=function(r,n){Ul("min",n,r.rank);var s=xo(r.shape,n),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"min",l.dtype).reshape(i)},t.prototype.minimum=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.minimum(r,n);var s=zt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new bs(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.mod=function(r,n){var s=zt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new bs(`if (b == 0.0) return NAN;
  return mod(a, b);`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.max=function(r,n){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.max(r,n);Ul("max",n,r.rank);var s=xo(r.shape,n),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"max",l.dtype).reshape(i)},t.prototype.maximum=function(r,n){if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.maximum(r,n);var s=zt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new bs(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.all=function(r,n){Ul("all",n,r.rank);var s=xo(r.shape,n),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"all",l.dtype).reshape(i)},t.prototype.any=function(r,n){Ul("any",n,r.rank);var s=xo(r.shape,n),i=s[0],o=Fr(s[1]),l=r.as2D(-1,o);return this.reduce(l,"any",l.dtype).reshape(i)},t.prototype.realDivide=function(r,n){if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var s=new bs(`
if (a == b) {
  return 1.0;
};
return a / b;`,r.shape,n.shape);return this.compileAndRun(s,[r,n],"float32")},t.prototype.floorDiv=function(r,n){if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var s=new bs(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,r.shape,n.shape);return this.compileAndRun(s,[r,n],"int32")},t.prototype.add=function(r,n){if(r.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(r,n,PE);if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.add(r,n);var s=Wi(r.dtype,n.dtype);if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,PE,s);var i=new bs(PE,r.shape,n.shape);return this.compileAndRun(i,[r,n],s)},t.prototype.packedUnaryOp=function(r,n,s){var i=new jb(r.shape,n);return this.compileAndRun(i,[r],s)},t.prototype.packedBinaryOp=function(r,n,s,i,o){o===void 0&&(o=!1);var l=new Mh(s,r.shape,n.shape,o);return this.compileAndRun(l,[r,n],i)},t.prototype.complexSeparableBinaryOp=function(r,n,s){var i=this,o=this.texData.get(r.dataId),l=this.texData.get(n.dataId),c=[[o.complexTensors.real,l.complexTensors.real],[o.complexTensors.imag,l.complexTensors.imag]].map(function(m){var p=m[0],v=m[1],g=i.makeComplexComponentTensorInfo(r,p),b=i.makeComplexComponentTensorInfo(n,v),y=new bs(s,r.shape,n.shape);return i.compileAndRun(y,[g,b],Wi(p.dtype,v.dtype))}),d=c[0],u=c[1],h=this.complex(d,u);return d.dispose(),u.dispose(),h},t.prototype.makeComplexComponentTensorInfo=function(r,n){return{dataId:n.dataId,dtype:n.dtype,shape:r.shape}},t.prototype.addN=function(r){if(r.length===1)return r[0];if(r.length>zt().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var n=Math.floor(r.length/2),s=this.addN(r.slice(0,n)),i=this.addN(r.slice(n));return this.addN([s,i])}var o=r.map(function(d){return d.dtype}).reduce(function(d,u){return Wi(d,u)}),l=r.map(function(d){return d.shape}),c=zt().getBool("WEBGL_PACK")?new O3e(r[0].shape,l):new P3e(r[0].shape,l);return this.compileAndRun(c,r,o)},t.prototype.subtract=function(r,n){if(r.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(r,n,OE);if(this.shouldExecuteOnCPU([r,n]))return this.cpuBackend.subtract(r,n);var s=Wi(r.dtype,n.dtype);if(zt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(r,n,OE,r.dtype);var i=new bs(OE,r.shape,n.shape);return this.compileAndRun(i,[r,n],s)},t.prototype.pow=function(r,n){var s=zt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new bs(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,r.shape,n.shape),i=Wi(r.dtype,n.dtype);return this.compileAndRun(s,[r,n],i)},t.prototype.ceil=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.ceil(r);if(zt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,pB,r.dtype);var n=new Na(r.shape,pB);return this.compileAndRun(n,[r])},t.prototype.floor=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.floor(r);if(zt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,xB,r.dtype);var n=new Na(r.shape,xB);return this.compileAndRun(n,[r])},t.prototype.sign=function(r){var n=new Na(r.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(n,[r])},t.prototype.isNaN=function(r){var n=new Na(r.shape,"return float(isnan(x));");return this.compileAndRun(n,[r],"bool")},t.prototype.isInf=function(r){var n=new Na(r.shape,"return float(isinf(x));");return this.compileAndRun(n,[r],"bool")},t.prototype.isFinite=function(r){var n=new Na(r.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(n,[r],"bool")},t.prototype.round=function(r){var n=new Na(r.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(n,[r])},t.prototype.exp=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.exp(r);if(zt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,vB,r.dtype);var n=new Na(r.shape,vB);return this.compileAndRun(n,[r])},t.prototype.expm1=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.expm1(r);if(zt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,gB,r.dtype);var n=new Na(r.shape,gB);return this.compileAndRun(n,[r])},t.prototype.softmax=function(r,n){var s=xi([n],r.shape),i=this.max(r,s),o=xl(i.shape,s),l=this.subtract(r,i.reshape(o)),c=this.exp(l),d=this.sum(c,s).reshape(o);return this.realDivide(c,d)},t.prototype.log=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.log(r);if(zt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,r.dtype);var n=new Na(r.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(n,[r])},t.prototype.log1p=function(r){var n=new Na(r.shape,"return log(1.0 + x);");return this.compileAndRun(n,[r])},t.prototype.sqrt=function(r){var n=new Na(r.shape,"return sqrt(x);");return this.compileAndRun(n,[r])},t.prototype.rsqrt=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.rsqrt(r);var n=new Na(r.shape,"return inversesqrt(x);");return this.compileAndRun(n,[r])},t.prototype.reciprocal=function(r){var n=new Na(r.shape,"return 1.0 / x;");return this.compileAndRun(n,[r])},t.prototype.relu=function(r){var n;return n=zt().getBool("WEBGL_PACK")?new jb(r.shape,OG):new Na(r.shape,TG),this.compileAndRun(n,[r])},t.prototype.relu6=function(r){var n;return n=zt().getBool("WEBGL_PACK")?new jb(r.shape,MG):new Na(r.shape,IG),this.compileAndRun(n,[r])},t.prototype.prelu=function(r,n){var s=zt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(AG,r.shape,n.shape):new bs(DG,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.elu=function(r){if(zt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,RG,r.dtype);var n=new Na(r.shape,PG);return this.compileAndRun(n,[r])},t.prototype.eluDer=function(r,n){var s=zt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,r.shape,n.shape):new bs("return (b >= 1.0) ? a : a * (b + 1.0);",r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.selu=function(r){var n=new Na(r.shape,mTe);return this.compileAndRun(n,[r])},t.prototype.int=function(r){var n=new Na(r.shape,"return float(int(x));");return this.compileAndRun(n,[r],"int32")},t.prototype.clip=function(r,n,s){var i,o=(i=zt().getBool("WEBGL_PACK_CLIP")?new K3e(r.shape):new Y3e(r.shape)).getCustomSetupFunc(n,s);return this.compileAndRun(i,[r],null,o)},t.prototype.abs=function(r){if(this.shouldExecuteOnCPU([r]))return this.cpuBackend.abs(r);if(zt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(r,fB,r.dtype);var n=new Na(r.shape,fB);return this.compileAndRun(n,[r])},t.prototype.complexAbs=function(r){var n=this.texData.get(r.dataId),s=new X3e(r.shape),i=[this.makeComplexComponentTensorInfo(r,n.complexTensors.real),this.makeComplexComponentTensorInfo(r,n.complexTensors.imag)];return this.compileAndRun(s,i)},t.prototype.sigmoid=function(r){var n=new Na(r.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(n,[r])},t.prototype.softplus=function(r){var n=new Na(r.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(n,[r])},t.prototype.sin=function(r){var n=new Na(r.shape,pTe);return this.compileAndRun(n,[r])},t.prototype.cos=function(r){var n=new Na(r.shape,xTe);return this.compileAndRun(n,[r])},t.prototype.tan=function(r){var n=new Na(r.shape,"return tan(x);");return this.compileAndRun(n,[r])},t.prototype.asin=function(r){var n=new Na(r.shape,vTe);return this.compileAndRun(n,[r])},t.prototype.acos=function(r){var n=new Na(r.shape,gTe);return this.compileAndRun(n,[r])},t.prototype.atan=function(r){var n=new Na(r.shape,bTe);return this.compileAndRun(n,[r])},t.prototype.atan2=function(r,n){var s=zt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,r.shape,n.shape):new bs(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,r.shape,n.shape);return this.compileAndRun(s,[r,n])},t.prototype.sinh=function(r){var n=new Na(r.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(n,[r])},t.prototype.cosh=function(r){var n=new Na(r.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(n,[r])},t.prototype.tanh=function(r){var n=new Na(r.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(n,[r])},t.prototype.asinh=function(r){var n=new Na(r.shape,yTe);return this.compileAndRun(n,[r])},t.prototype.acosh=function(r){var n=new Na(r.shape,jTe);return this.compileAndRun(n,[r])},t.prototype.atanh=function(r){var n=new Na(r.shape,NTe);return this.compileAndRun(n,[r])},t.prototype.erf=function(r){var n=new Na(r.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(n,[r])},t.prototype.step=function(r,n){var s=new Na(r.shape,function(i){return i===void 0&&(i=0),$d+`
    return x > 0.0 ? 1.0 : float(`+i+`);
  `}(n));return this.compileAndRun(s,[r])},t.prototype.conv2dByMatMul=function(r,n,s,i,o,l){var c=r.shape,d=this.texData.get(r.dataId),u=s.inChannels,h=c[0]*c[1]*c[2],m=s.outChannels,p=s.dataFormat==="channelsLast",v=(h===1||m===1)&&u>1e3,g=c[2]%2!=0&&!!d.isPacked;if(v||!zt().getBool("WEBGL_LAZILY_UNPACK")||!zt().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!g){var b=p?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],y=this.reshape(r,[1,b,s.inChannels]),C=this.reshape(n,[1,s.inChannels,s.outChannels]);return this.reshape(this.fusedBatchMatMul({a:y,b:C,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:l}),s.outShape)}var w=p?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),k={dataId:r.dataId,shape:[1,w,s.inChannels],dtype:r.dtype},S=d.shape;d.shape=d.shape.slice(),d.shape[d.shape.length-2]++,He(eN(d.shape,k.shape),function(){return"packed reshape "+d.shape+" to "+k.shape+" isn't free"});var D=this.reshape(n,[1,s.inChannels,s.outChannels]),E=this.fusedBatchMatMul({a:k,b:D,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:l}),T=this.texData.get(E.dataId);return He(T.isPacked,function(){return"batchMatMul result is expected to be packed"}),d.shape=S,T.shape=s.outShape,ht.makeTensorFromDataId(E.dataId,s.outShape,E.dtype)},t.prototype.conv2dWithIm2Row=function(r,n,s,i,o,l){var c=s.filterWidth,d=s.filterHeight,u=s.inChannels,h=s.outWidth,m=s.outHeight,p=s.dataFormat==="channelsLast",v=c*d*u,g=m*h,b=[v,g],y=r.squeeze([0]),C=n.reshape([1,v,-1]),w=new LAe(b,y.shape,s),k=this.compileAndRun(w,[y]).reshape([1,b[0],b[1]]),S=i!=null,D=l!=null,E=o?nN(o,!0):null,T=new ME(k.shape,[1,g,s.outChannels],!0,!1,S,E,D),A=[k,C];i&&A.push(i),D&&A.push(l);var L=this.compileAndRun(T,A);return p?L.reshape([1,m,h,s.outChannels]):L.reshape([1,s.outChannels,m,h])},t.prototype.fusedConv2d=function(r){var n=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(n,s,i,o,l,c);if(zt().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,s,i,o,l,c);var d=o!=null,u=c!=null,h=l?nN(l,!1):null,m=new nB(i,d,h,u),p=[n,s];return o&&p.push(o),c&&p.push(c),this.compileAndRun(m,p)},t.prototype.conv2d=function(r,n,s){if(s.filterHeight===1&&s.filterWidth===1&&s.dilationHeight===1&&s.dilationWidth===1&&s.strideHeight===1&&s.strideWidth===1&&(s.padInfo.type==="SAME"||s.padInfo.type==="VALID"))return this.conv2dByMatMul(r,n,s);if(zt().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,n,s);var i=new nB(s);return this.compileAndRun(i,[r,n])},t.prototype.conv2dDerInput=function(r,n,s){var i=new eAe(s);return this.compileAndRun(i,[r,n])},t.prototype.conv2dDerFilter=function(r,n,s){var i=new Z3e(s);return this.compileAndRun(i,[r,n])},t.prototype.fusedDepthwiseConv2D=function(r){var n,s=r.input,i=r.filter,o=r.convInfo,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=zt().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,h=c?nN(c,u):null,m=[s,i],p=l!=null,v=d!=null;return p&&m.push(l),v&&m.push(d),u?(n=new iB(o,p,h,v),this.compileAndRun(n,m)):(n=new sB(o,p,h,v),this.compileAndRun(n,m))},t.prototype.depthwiseConv2D=function(r,n,s){var i;return zt().getBool("WEBGL_PACK_DEPTHWISECONV")&&s.strideWidth<=2&&s.outChannels/s.inChannels==1?(i=new iB(s),this.compileAndRun(i,[r,n])):(i=new sB(s),this.compileAndRun(i,[r,n]))},t.prototype.depthwiseConv2DDerInput=function(r,n,s){var i=new nAe(s);return this.compileAndRun(i,[r,n])},t.prototype.depthwiseConv2DDerFilter=function(r,n,s){var i=new aAe(s);return this.compileAndRun(i,[r,n])},t.prototype.conv3d=function(r,n,s){var i=new sAe(s);return this.compileAndRun(i,[r,n])},t.prototype.conv3dDerInput=function(r,n,s){var i=new rAe(s);return this.compileAndRun(i,[r,n])},t.prototype.conv3dDerFilter=function(r,n,s){var i=new tAe(s);return this.compileAndRun(i,[r,n])},t.prototype.maxPool=function(r,n){var s=new RE(n,"max",!1);return this.compileAndRun(s,[r])},t.prototype.avgPool=function(r,n){var s=new RE(n,"avg",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.maxPoolBackprop=function(r,n,s,i){var o=new RE(i,"max",!0),l=this.compileAndRun(o,[n]),c=new VAe(i),d=this.compileAndRun(c,[r,l],n.dtype);return l.dispose(),d},t.prototype.avgPoolBackprop=function(r,n,s){var i=new V3e(s);return this.compileAndRun(i,[r],n.dtype)},t.prototype.cast=function(r,n){return yG(r,n,this)},t.prototype.unstack=function(r,n){for(var s=r.shape[n],i=new Array(r.rank-1),o=0,l=0;l<r.rank;l++)l!==n&&(i[o++]=r.shape[l]);var c=new Array(r.rank).fill(0),d=r.shape.slice();d[n]=1;var u=new Array(s);for(l=0;l<u.length;l++)c[n]=l,u[l]=this.slice(r,c,d).reshape(i);return u},t.prototype.avgPool3d=function(r,n){var s=new FE(n,"avg",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.avgPool3dBackprop=function(r,n,s){var i=new q3e(s);return this.compileAndRun(i,[r],n.dtype)},t.prototype.maxPool3d=function(r,n){var s=new FE(n,"max",!1);return this.compileAndRun(s,[r],"float32")},t.prototype.maxPool3dBackprop=function(r,n,s,i){var o=new FE(i,"max",!0),l=this.compileAndRun(o,[n]),c=new qAe(i),d=this.compileAndRun(c,[r,l],n.dtype);return l.dispose(),d},t.prototype.reshape=function(r,n){var s=this.texData.get(r.dataId);if(s.isPacked&&!eN(r.shape,n)&&(s.texture===null||!eN(s.shape,n))){var i=this.packedReshape(r,n);return ht.makeTensorFromDataId(i.dataId,i.shape,i.dtype)}return K5(r,n)},t.prototype.resizeBilinear=function(r,n,s,i){var o=zt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new ZAe(r.shape,n,s,i):new JAe(r.shape,n,s,i);return this.compileAndRun(o,[r],"float32")},t.prototype.resizeBilinearBackprop=function(r,n,s){var i=new QAe(r,n,s);return this.compileAndRun(i,[r])},t.prototype.resizeNearestNeighbor=function(r,n,s,i){var o=new tTe(r.shape,n,s,i);return this.compileAndRun(o,[r])},t.prototype.resizeNearestNeighborBackprop=function(r,n,s){var i=new eTe(r,n,s);return this.compileAndRun(i,[r])},t.prototype.multinomial=function(r,n,s,i){var o=n?r:jf(r),l=o.shape[0],c=o.shape[1],d=new zAe(l,c,s),u=d.getCustomSetupFunc(i);return this.compileAndRun(d,[o],"int32",u)},t.prototype.oneHot=function(r,n,s,i){var o=new HAe(r.size,n,s,i);return this.compileAndRun(o,[r])},t.prototype.diag=function(r){var n=new uAe(r.size);return this.compileAndRun(n,[r])},t.prototype.nonMaxSuppression=function(r,n,s,i,o){return Zw("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),N4(r.dataSync(),n.dataSync(),s,i,o)},t.prototype.cropAndResize=function(r,n,s,i,o,l){var c=new iAe(r.shape,n.shape,i,o,l);return this.compileAndRun(c,[r,n,s],"float32")},t.prototype.depthToSpace=function(r,n,s){He(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});var i=r.shape[0],o=s==="NHWC"?r.shape[1]:r.shape[2],l=s==="NHWC"?r.shape[2]:r.shape[3],c=s==="NHWC"?r.shape[3]:r.shape[1],d=o*n,u=l*n,h=c/(n*n),m=new dAe(s==="NHWC"?[i,d,u,h]:[i,h,d,u],n,s);return this.compileAndRun(m,[r])},t.prototype.split=function(r,n,s){return wG(r,n,s)},t.prototype.scatterND=function(r,n,s){var i=s2(0,r,s),o=i.sliceRank,l=i.numUpdates,c=i.sliceSize,d=i.strides,u=i.outputSize,h=[u/c,c],m=r.reshape([l,o]),p=n.reshape([l,c]);if(u===0)return K5(Ki([]),s);var v=Nr(0),g=new dB(l,o,m.rank,p.rank,d,h);return this.compileAndRun(g,[p,m,v]).reshape(s)},t.prototype.sparseToDense=function(r,n,s,i){var o=s2(0,r,s),l=o.sliceRank,c=o.numUpdates,d=o.strides,u=o.outputSize,h=new dB(c,l,r.rank,n.rank,d,[u,1]);return this.compileAndRun(h,[n,r,i]).reshape(s)},t.prototype.fft=function(r){return this.fftImpl(r,!1)},t.prototype.ifft=function(r){return this.fftImpl(r,!0)},t.prototype.fftImpl=function(r,n){var s=this.texData.get(r.dataId),i=new lB(xAe,r.shape,n),o=new lB(vAe,r.shape,n),l=[this.makeComplexComponentTensorInfo(r,s.complexTensors.real),this.makeComplexComponentTensorInfo(r,s.complexTensors.imag)],c=this.compileAndRun(i,l),d=this.compileAndRun(o,l),u=this.complex(c,d).as2D(r.shape[0],r.shape[1]);return c.dispose(),d.dispose(),u},t.prototype.gatherND=function(r,n){var s=n.shape,i=s[s.length-1],o=fG(r,n),l=o[0],c=o[1],d=o[2],u=o[3],h=n.reshape([c,i]),m=r.reshape([r.size/d,d]),p=new yAe(i,u,[c,d]);return this.compileAndRun(p,[m,h]).reshape(l)},t.prototype.fill=function(r,n,s){if((s=s||u1(n))==="string"){var i=Kw(s,Fr(r));return i.fill(n),ht.makeTensor(i,r,s,this)}var o=new gAe(r,n),l=o.getCustomSetupFunc(n);return this.compileAndRun(o,[],s,l)},t.prototype.onesLike=function(r){if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(r.shape,1,r.dtype)},t.prototype.zerosLike=function(r){return this.fill(r.shape,r.dtype==="string"?"":0,r.dtype)},t.prototype.linspace=function(r,n,s){return jG(r,n,s)},t.prototype.makeTensorInfo=function(r,n){var s=this.write(null,r,n);return this.texData.get(s).usage=null,{dataId:s,shape:r,dtype:n}},t.prototype.makeOutput=function(r,n){var s=this.makeTensorInfo(r,n).dataId;return ht.makeTensorFromDataId(s,r,n,this)},t.prototype.unpackTensor=function(r){var n=new STe(r.shape);return this.runWebGLProgram(n,[r],r.dtype)},t.prototype.packTensor=function(r){var n=new WAe(r.shape);return this.runWebGLProgram(n,[r],r.dtype,null,!0)},t.prototype.packedReshape=function(r,n){var s=[Qw(r.shape)].concat(Jw(r.shape)),i={dtype:r.dtype,shape:s,dataId:r.dataId},o=[Qw(n)].concat(Jw(n)),l=new XAe(o,s),c=this.runWebGLProgram(l,[i],r.dtype,null,!0);return{dataId:c.dataId,shape:n,dtype:c.dtype}},t.prototype.decode=function(r){var n,s=this.texData.get(r),i=s.isPacked,o=s.shape,l=s.dtype,c=TE(o);return n=i?new cAe(c):new lAe(c),{dtype:l,shape:o,dataId:this.runWebGLProgram(n,[{shape:c,dtype:l,dataId:r}],l,null,!0).dataId}},t.prototype.runWebGLProgram=function(r,n,s,i,o){var l=this;o===void 0&&(o=!1);var c=this.makeTensorInfo(r.outputShape,s),d=this.texData.get(c.dataId);if(r.packedOutput&&(d.isPacked=!0),r.outPackingScheme===Dy.DENSE){var u=Wb(r.outputShape);d.texShape=u.map(function(w){return 2*w})}if(r.outTexUsage!=null&&(d.usage=r.outTexUsage),Fr(c.shape)===0)return d.values=_y(c.dtype,0),c;var h=[],m=n.map(function(w){if(w.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var k=l.texData.get(w.dataId);if(k.texture==null){if(!r.packedInputs&&Fr(w.shape)<=zt().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:w.shape,texData:null,isUniform:!0,uniformValues:k.values};r.packedInputs&&(k.isPacked=!0,k.shape=w.shape)}else if(!!k.isPacked!=!!r.packedInputs)w=k.isPacked?l.unpackTensor(w):l.packTensor(w),h.push(w),k=l.texData.get(w.dataId);else if(k.isPacked&&!eN(k.shape,w.shape)){var S=w,D=w.shape;w.shape=k.shape,w=l.packedReshape(w,D),h.push(w),k=l.texData.get(w.dataId),S.shape=D}return l.uploadToGPU(w.dataId),{shape:w.shape,texData:k,isUniform:!1}});this.uploadToGPU(c.dataId);var p,v={shape:c.shape,texData:d,isUniform:!1},g=function(w,k,S){var D="";k.concat(S).forEach(function(A){var L=A.texData!=null&&A.texData.slice!=null&&A.texData.slice.flatOffset>0,P=A.isUniform?"uniform":A.texData.texShape;D+=A.shape+"_"+P+"_"+L});var E=w.userCode,T=w.constructor.name;return T+="_"+D+"_"+E}(r,m,v),b=this.getAndSaveBinary(g,function(){return function(w,k,S,D){var E=k.userCode,T=S.map(function(U,J){var Y={logicalShape:U.shape,texShape:U.isUniform?null:U.texData.texShape,isUniform:U.isUniform,isPacked:!U.isUniform&&U.texData.isPacked,flatOffset:null};return U.texData!=null&&U.texData.slice!=null&&U.texData.slice.flatOffset>0&&(Y.flatOffset=U.texData.slice.flatOffset),{name:k.variableNames[J],shapeInfo:Y}}),A=T.map(function(U){return U.shapeInfo}),L={logicalShape:D.shape,texShape:D.texData.texShape,isUniform:!1,isPacked:D.texData.isPacked,flatOffset:null},P=R3e(T,L,E,k.packedInputs),O=w.createProgram(P),Z=null,z=w.getUniformLocation(O,"NAN",!1);zt().getNumber("WEBGL_VERSION")===1&&(Z=w.getUniformLocation(O,"INFINITY",!1));for(var K={},B=0;B<k.variableNames.length;B++){var Q=k.variableNames[B];K[Q]=w.getUniformLocation(O,Q,!1),K["offset"+Q]=w.getUniformLocation(O,"offset"+Q,!1)}return{program:k,source:P,webGLProgram:O,uniformLocations:K,inShapeInfos:A,outShapeInfo:L,infLoc:Z,nanLoc:z}}(l.gpgpu,r,m,v)}),y=this.activeTimers!=null;if(y&&(p=this.startTimer()),function(w,k,S,D,E){cB(k.inShapeInfos,S),cB([k.outShapeInfo],[D]);var T=D.texData.texture,A=D.texData.texShape;D.texData.isPacked?w.setOutputPackedMatrixTexture(T,A[0],A[1]):w.setOutputMatrixTexture(T,A[0],A[1]),w.setProgram(k.webGLProgram),zt().getNumber("WEBGL_VERSION")===1&&k.infLoc!==null&&w.gl.uniform1f(k.infLoc,1/0),k.nanLoc!==null&&w.gl.uniform1f(k.nanLoc,NaN),S.forEach(function(L,P){var O=k.program.variableNames[P],Z=k.uniformLocations[O],z=k.uniformLocations["offset"+O];if(Z!=null)if(L.isUniform)if(Fr(L.shape)<2)w.gl.uniform1f(Z,L.uniformValues[0]);else{var K=L.uniformValues;K instanceof Float32Array||(K=new Float32Array(K)),w.gl.uniform1fv(Z,K)}else L.texData.slice!=null&&z!=null&&w.gl.uniform1i(z,L.texData.slice.flatOffset),w.setInputMatrixTexture(L.texData.texture,Z,P)}),E?.(w,k.webGLProgram),w.executeProgram()}(this.gpgpu,b,m,v,i),h.forEach(function(w){return l.disposeData(w.dataId)}),y&&(p=this.endTimer(p),this.activeTimers.push({name:r.constructor.name,query:this.getQueryTime(p)})),!zt().getBool("WEBGL_LAZILY_UNPACK")&&d.isPacked&&o===!1){var C=this.unpackTensor(c);return this.disposeData(c.dataId),C}return c},t.prototype.compileAndRun=function(r,n,s,i,o){o===void 0&&(o=!1),s=s||n[0].dtype;var l=this.runWebGLProgram(r,n,s,i,o);return ht.makeTensorFromDataId(l.dataId,l.shape,l.dtype)},t.prototype.getAndSaveBinary=function(r,n){return r in this.binaryCache||(this.binaryCache[r]=n()),this.binaryCache[r]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){var r=this;this.disposed||(zt().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(function(n){r.gpgpu.deleteProgram(r.binaryCache[n].webGLProgram),delete r.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var r=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=_r(function(){if(!zt().get("WEBGL_RENDER_FLOAT32_ENABLED")){var n=zt().getBool("DEBUG");zt().set("DEBUG",!1);var s=r.abs(Nr(1e-8)).dataSync()[0];if(zt().set("DEBUG",n),s>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(r){var n,s=this.texData.get(r),i=s.shape,o=s.dtype,l=s.values,c=s.texture,d=s.usage,u=s.isPacked;if(c==null){var h,m=this.activeTimers!=null;m&&(h=ku());var p=s.texShape;if(p==null&&(p=I5e(i,u),s.texShape=p),l!=null){var v=TE(i),g=void 0,b=p[1],y=p[0],C=l instanceof Uint8Array;u?(b=(n=f1(p[0],p[1]))[0],y=n[1],g=new pAe(v,[y,b],C)):g=new mAe(v,[y,b],C);var w=this.makeTensorInfo([y,b],o);this.texData.get(w.dataId).usage=C?Yl.PIXELS:Yl.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),b,y,l);var k=this.runWebGLProgram(g,[w],o,null,!0),S=this.texData.get(k.dataId);s.texture=S.texture,s.texShape=S.texShape,s.isPacked=S.isPacked,s.usage=S.usage,this.disposeData(w.dataId),this.texData.delete(k.dataId),s.values=null,m&&(this.uploadWaitMs+=ku()-h)}else{var D=this.acquireTexture(p,d,o,u);s.texture=D}}},t.prototype.convertAndCacheOnCPU=function(r,n){var s=this.texData.get(r),i=s.dtype;return this.releaseGPUData(r),n!=null&&(s.values=function(o,l){if(l==="float32"||l==="complex64")return o;if(l==="int32"||l==="bool"){for(var c=l==="int32"?new Int32Array(o.length):new Uint8Array(o.length),d=0;d<c.length;++d)c[d]=Math.round(o[d]);return c}throw new Error("Unknown dtype "+l)}(n,i)),s.values},t.prototype.acquireTexture=function(r,n,s,i){if(this.numBytesInGPU+=this.computeBytes(r,s),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(r,n,i)},t.prototype.computeBytes=function(r,n){return r[0]*r[1]*KW(n)},t}(gG);rG()&&ht.registerBackend("webgl",function(){return new kTe},2);var _Te=et({square_:function(e){var t=Re(e,"x","square"),r=[t];return ht.runKernelFunc(function(n,s){return s([t]),n.square(t)},{x:t},null,"Square",{},r,[])}}),Ty="SquaredDifference",FG=et({squaredDifference_:function(e,t){var r,n=Re(e,"a","squaredDifference"),s=Re(t,"b","squaredDifference");r=hs(n,s),n=r[0],s=r[1],Ma(n.shape,s.shape);var i={a:n,b:s},o=[n,s];return ht.runKernelFunc(function(l,c){var d=l.squaredDifference(n,s);return c([n,s]),d},i,function(l,c){var d=c[0],u=c[1],h=Nr(2);return{a:function(){return l.mul(d.sub(u).mul(h))},b:function(){return l.mul(u.sub(d).mul(h))}}},Ty,{},o,[])}}),ETe=et({abs_:function(e){var t=Re(e,"x","abs");return t.dtype==="complex64"?ht.runKernelFunc(function(r){return r.complexAbs(t)},{$x:t}):ht.runKernelFunc(function(r,n){var s=r.abs(t);return n([t]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return r.mul(s.toFloat().step(-1))}}},"Abs")}}),DTe=et({acos_:function(e){var t=Re(e,"x","acos");return ht.runKernelFunc(function(r,n){var s=r.acos(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(Nr(1).sub(s.toFloat().square()).sqrt()).neg()}}})}}),ATe=et({acosh_:function(e){var t=Re(e,"x","acosh");return ht.runKernelFunc(function(r,n){var s=r.acosh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(s.toFloat().square().sub(1).sqrt())}}})}}),TTe=et({asin_:function(e){var t=Re(e,"x","asin");return ht.runKernelFunc(function(r,n){var s=r.asin(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(Nr(1).sub(s.toFloat().square()).sqrt())}}})}}),ITe=et({asinh_:function(e){var t=Re(e,"x","asinh");return ht.runKernelFunc(function(r,n){var s=r.asinh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.divStrict(Nr(1).add(s.toFloat().square()).sqrt())}}})}}),PTe=et({atan_:function(e){var t=Re(e,"x","atan");return ht.runKernelFunc(function(r,n){var s=r.atan(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.toFloat().square().add(1))}}})}}),OTe=et({atanh_:function(e){var t=Re(e,"x","atanh");return ht.runKernelFunc(function(r,n){var s=r.atanh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(Nr(1).sub(s.toFloat().square()))}}})}}),MTe=et({ceil_:function(e){var t=Re(e,"x","ceil");return ht.runKernelFunc(function(r){return r.ceil(t)},{$x:t},function(r){return{$x:function(){return $a(r)}}})}}),E4=et({clipByValue_:function(e,t,r){var n=Re(e,"x","clipByValue");He(t<=r,function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+r+")."});var s=[n],i={min:t,max:r};return ht.runKernelFunc(function(o,l){var c=o.clip(n,t,r);return l([n]),c},{x:n},function(o,l){var c=l[0];return{x:function(){return o.where(c.greaterEqual(t).logicalAnd(c.lessEqual(r)),$a(o))}}},"ClipByValue",i,s)}}),RTe=et({cos_:function(e){var t=Re(e,"x","cos"),r=[t];return ht.runKernelFunc(function(n,s){var i=n.cos(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return i.toFloat().sin().neg().mul(n)}}},"Cos",{},r)}}),FTe=et({cosh_:function(e){var t=Re(e,"x","cosh");return ht.runKernelFunc(function(r,n){var s=r.cosh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return s.toFloat().sinh().mulStrict(r)}}})}}),LTe=et({erf_:function(e){var t=Re(e,"x","erf");return He(t.dtype==="int32"||t.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),t.dtype==="int32"&&(t=t.toFloat()),ht.runKernelFunc(function(r,n){var s=r.erf(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),Q5=et({exp_:function(e){var t=Re(e,"x","exp");return ht.runKernelFunc(function(r,n){var s=r.exp(t);return n([s]),s},{x:t},function(r,n){return{x:function(){return r.mulStrict(n[0])}}},"Exp",{},[],[!0])}}),BTe=et({expm1_:function(e){var t=Re(e,"x","expm1");return ht.runKernelFunc(function(r,n){var s=r.expm1(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.exp())}}})}}),UTe=et({floor_:function(e){var t=Re(e,"x","floor");return ht.runKernelFunc(function(r){return r.floor(t)},{$x:t},function(r){return{$x:function(){return $a(r)}}})}}),$Te=et({log_:function(e){var t=Re(e,"x","log"),r=[t];return ht.runKernelFunc(function(n,s){var i=n.log(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return n.div(i.toFloat())}}},"Log",{},r)}}),VTe=et({log1p_:function(e){var t=Re(e,"x","log1p");return ht.runKernelFunc(function(r,n){var s=r.log1p(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.add(1))}}})}}),qTe=et({logSigmoid_:function(e){var t=Re(e,"x","logSigmoid");return ht.runKernelFunc(function(r,n){var s=r.softplus(t.neg()).neg();return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.neg().sigmoid())}}})}}),c2=et({neg_:function(e){var t=Re(e,"x","neg"),r=[t];return ht.runKernelFunc(function(n){return n.neg(t)},{x:t},function(n){return{x:function(){return n.neg()}}},"Neg",{},r)}}),zTe=et({reciprocal_:function(e){var t=Re(e,"x","reciprocal");return ht.runKernelFunc(function(r,n){var s=r.reciprocal(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.square().neg())}}})}}),HTe=et({round_:function(e){var t=Re(e,"x","round");return ht.runKernelFunc(function(r){return r.round(t)},{$x:t},function(r){return{$x:function(){return $a(r)}}})}}),LG=et({rsqrt_:function(e){var t=Re(e,"x","rsqrt"),r=[t];return ht.runKernelFunc(function(n,s){var i=n.rsqrt(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return n.div(i.pow(1.5).mul(2)).neg()}}},"Rsqrt",{},r)}}),BG=et({sigmoid_:function(e){var t=Re(e,"x","sigmoid");return ht.runKernelFunc(function(r,n){var s=r.sigmoid(t);return n([s]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return r.mul(s.mul(Nr(1).sub(s)))}}},"Sigmoid")}}),WTe=et({sign_:function(e){var t=Re(e,"x","sign");return ht.runKernelFunc(function(r){return r.sign(t)},{$x:t},function(r){return{$x:function(){return $a(r)}}})}}),GTe=et({isNaN_:function(e){var t=Re(e,"x","isNaN");return ht.runKernelFunc(function(r){return r.isNaN(t)},{$x:t},function(r){return{$x:function(){return $a(r)}}})}}),YTe=et({isInf_:function(e){var t=Re(e,"x","isInf");return ht.runKernelFunc(function(r){return r.isInf(t)},{$x:t},function(r){return{$x:function(){return $a(r)}}})}}),KTe=et({isFinite_:function(e){var t=Re(e,"x","isFinite");return ht.runKernelFunc(function(r){return r.isFinite(t)},{$x:t},function(r){return{$x:function(){return $a(r)}}})}}),XTe=et({sin_:function(e){var t=Re(e,"x","sin"),r=[t];return ht.runKernelFunc(function(n,s){var i=n.sin(t);return s([t]),i},{x:t},function(n,s){var i=s[0];return{x:function(){return i.toFloat().cos().mul(n)}}},"Sin",{},r)}}),QTe=et({sinh_:function(e){var t=Re(e,"x","sinh");return ht.runKernelFunc(function(r,n){var s=r.sinh(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return s.toFloat().cosh().mulStrict(r)}}})}}),JTe=et({softplus_:function(e){var t=Re(e,"x","softplus");return ht.runKernelFunc(function(r,n){var s=r.softplus(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.mul(s.sigmoid())}}})}}),ZTe=et({sqrt_:function(e){var t=Re(e,"x","sqrt");return ht.runKernelFunc(function(r,n){var s=r.sqrt(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.toFloat().sqrt().mul(2))}}})}}),e4e=et({step_:function(e,t){t===void 0&&(t=0);var r=Re(e,"x","step");return ht.runKernelFunc(function(n){return n.step(r,t)},{$x:r},function(n){return{$x:function(){return $a(n)}}})}}),t4e=et({tan_:function(e){var t=Re(e,"x","tan");return ht.runKernelFunc(function(r,n){var s=r.tan(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return r.div(s.cos().square())}}})}}),r4e=et({tanh_:function(e){var t=Re(e,"x","tanh");return ht.runKernelFunc(function(r,n){var s=r.tanh(t);return n([s]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return Nr(1).sub(s.square()).mulStrict(r)}}},"Tanh",{},null,[!0])}});function UG(e,t,r,n,s,i){var o,l,c=Re(e,"x","batchNorm"),d=Re(t,"mean","batchNorm"),u=Re(r,"variance","batchNorm");return s!=null&&(o=Re(s,"scale","batchNorm")),n!=null&&(l=Re(n,"offset","batchNorm")),He(c.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),He(d.rank===2||d.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+d.rank+"."}),He(u.rank===2||u.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+u.rank+"."}),o!=null&&He(o.rank===2||o.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+o.rank+"."}),l!=null&&He(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+l.rank+"."}),p1(c,d,u,l,o,i)}function $G(e,t,r,n,s,i){var o,l,c=Re(e,"x","batchNorm"),d=Re(t,"mean","batchNorm"),u=Re(r,"variance","batchNorm");return s!=null&&(o=Re(s,"scale","batchNorm")),n!=null&&(l=Re(n,"offset","batchNorm")),He(c.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."}),He(d.rank===3||d.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+d.rank+"."}),He(u.rank===3||u.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+u.rank+"."}),o!=null&&He(o.rank===3||o.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+o.rank+"."}),l!=null&&He(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+l.rank+"."}),p1(c,d,u,l,o,i)}function VG(e,t,r,n,s,i){var o,l,c=Re(e,"x","batchNorm"),d=Re(t,"mean","batchNorm"),u=Re(r,"variance","batchNorm");return s!=null&&(o=Re(s,"scale","batchNorm")),n!=null&&(l=Re(n,"offset","batchNorm")),He(c.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."}),He(d.rank===4||d.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+d.rank+"."}),He(u.rank===4||u.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+u.rank+"."}),o!=null&&He(o.rank===4||o.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+o.rank+"."}),l!=null&&He(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+l.rank+"."}),p1(c,d,u,l,o,i)}function p1(e,t,r,n,s,i){i==null&&(i=.001);var o,l,c,d=Re(e,"x","batchNorm"),u=Re(t,"mean","batchNorm"),h=Re(r,"variance","batchNorm");s!=null&&(o=Re(s,"scale","batchNorm")),n!=null&&(l=Re(n,"offset","batchNorm")),He(u.rank===h.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),He(l==null||u.rank===l.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),He(o==null||u.rank===o.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),c=d.rank===0||d.rank===1?d.as4D(1,1,1,d.size):d.rank===2?d.as4D(1,1,d.shape[0],d.shape[1]):d.rank===3?d.as4D(1,d.shape[0],d.shape[1],d.shape[2]):d;var m=[d,u,h,o];return ht.runKernelFunc(function(p,v){var g=p.batchNormalization(c,sN(u),sN(h),i,sN(o),sN(l));return v([d,u,h,o]),g},{x:d,mean:u,variance:h,scale:o,offset:l},function(p,v){var g=v,b=g[0],y=g[1],C=g[2],w=g[3],k=w??Nr(1),S=fi(y.shape,c.shape),D=[];if(y.rank===1){for(var E=0;E<c.shape.length-1;++E)D.push(c.shape[E]);D.push(1)}var T=b.sub(y),A=p.mul(k),L=LG(C.add(Nr(i))),P=L.mul(L).mul(L).mul(Nr(-.5));return{x:function(){return y.rank===1?p.mul(u0(L.as4D(1,1,1,y.shape[0]),D)).mul(k).reshape(b.shape):p.mul(L).mul(k).reshape(b.shape)},mean:function(){var O=L.mul(Nr(-1)).mul(A);return y.rank===1&&(O=O.sum(S)),O.reshape(y.shape)},variance:function(){var O=P.mul(T).mul(A);return y.rank===1&&(O=O.sum(S)),O.reshape(y.shape)},scale:function(){var O=T.mul(L),Z=p.mul(O);return y.rank===1&&(Z=Z.sum(S)),Z.reshape(y.shape)},offset:function(){var O=p;return y.rank===1&&(O=O.sum(S)),O.reshape(y.shape)}}},"BatchNormalization",{varianceEpsilon:i},m).reshape(d.shape)}function sN(e){return e==null?null:e.rank===0?e.as1D():e.rank===1?e:e.rank===2?e.as4D(1,1,e.shape[0],e.shape[1]):e.rank===3?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function RS(){aG("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var a4e=et({batchNormalization2d_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),UG(e,t,r,i,s,n)}}),n4e=et({batchNormalization3d_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),$G(e,t,r,i,s,n)}}),s4e=et({batchNormalization4d_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),VG(e,t,r,i,s,n)}}),i4e=et({batchNormalization_:function(e,t,r,n,s,i){return n===void 0&&(n=.001),RS(),p1(e,t,r,i,s,n)}}),qG=et({batchNorm_:p1}),o4e=et({batchNorm2d_:UG}),l4e=et({batchNorm3d_:$G}),c4e=et({batchNorm4d_:VG}),FS=et({logicalAnd_:function(e,t){var r=Re(e,"a","logicalAnd","bool"),n=Re(t,"b","logicalAnd","bool");return Ma(r.shape,n.shape),ht.runKernelFunc(function(s){return s.logicalAnd(r,n)},{a:r,b:n},null,"LogicalAnd")}}),d4e=et({logicalNot_:function(e){var t=Re(e,"x","logicalNot","bool");return ht.runKernelFunc(function(r){return r.logicalNot(t)},{$x:t})}}),zG=et({logicalOr_:function(e,t){var r=Re(e,"a","logicalOr","bool"),n=Re(t,"b","logicalOr","bool");return Ma(r.shape,n.shape),ht.runKernelFunc(function(s){return s.logicalOr(r,n)},{$a:r,$b:n})}}),u4e=et({logicalXor_:function(e,t){var r=Re(e,"a","logicalXor","bool"),n=Re(t,"b","logicalXor","bool");return Ma(r.shape,n.shape),zG(e,t).logicalAnd(FS(e,t).logicalNot())}}),Dx=et({where_:function(e,t,r){var n=Re(t,"a","where"),s=Re(r,"b","where"),i=Re(e,"condition","where","bool");return un(n.shape,s.shape,"Error in where: "),i.rank===1?He(i.shape[0]===n.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):un(i.shape,s.shape,"Error in where: "),ht.runKernelFunc(function(o,l){var c=o.select(i,n,s);return l([i]),c},{$condition:i,$a:n,$b:s},function(o,l){var c=l[0];return{$condition:function(){return $a(c).toFloat()},$a:function(){return o.mul(c.cast(o.dtype))},$b:function(){return o.mul(c.logicalNot().cast(o.dtype))}}})}}),HG=function(e){return Pr(this,void 0,void 0,function(){var t,r,n;return Or(this,function(s){switch(s.label){case 0:return[4,(t=Re(e,"condition","whereAsync","bool")).data()];case 1:return r=s.sent(),n=S4(t.shape,r),e!==t&&t.dispose(),[2,n]}})})},Ta=et({add_:function(e,t){var r,n=Re(e,"a","add"),s=Re(t,"b","add");r=hs(n,s),n=r[0],s=r[1];var i=Ma(n.shape,s.shape);return ht.runKernelFunc(function(o){return o.add(n,s)},{a:n,b:s},function(o){return{a:function(){var l=o,c=fi(n.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(n.shape)},b:function(){var l=o,c=fi(s.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(s.shape)}}},"Add")}}),h4e=et({addN_:function(e){He(Array.isArray(e),function(){return"The argument passed to tf.addN() must be a list of tensors"}),He(e.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length});var t=e.map(function(s,i){return Re(s,"tensors"+i,"addN")}),r=t[0];t.forEach(function(s){if(s.dtype!==r.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(function(s){if(!Ei(s.shape,r.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var n=t;return ht.runKernelFunc(function(s){return s.addN(t)},n,function(s){var i={};return t.forEach(function(o,l){i[l]=function(){return s.clone()}}),i},"AddN")}}),f4e=et({addStrict_:function(e,t){var r=Re(e,"a","addStrict"),n=Re(t,"b","addStrict");return un(r.shape,n.shape,"Error in addStrict: "),r.add(n)}}),m4e=et({atan2_:function(e,t){var r,n=Re(e,"a","atan2"),s=Re(t,"b","atan2");r=hs(n,s),n=r[0],s=r[1];var i=Ma(n.shape,s.shape);return ht.runKernelFunc(function(o,l){var c=o.atan2(n,s);return l([n,s]),c},{$a:n,$b:s},function(o,l){var c=l[0],d=l[1];return{$a:function(){var u=Ta(c.square(),d.square()),h=o.mul(d.div(u)),m=fi(c.shape,i);return m.length>0&&(h=h.sum(m)),h.reshape(c.shape)},$b:function(){var u=Ta(c.square(),d.square()),h=c2(o.mul(c.div(u))),m=fi(d.shape,i);return m.length>0&&(h=h.sum(m)),h.reshape(d.shape)}}})}}),Cd=et({div_:function(e,t){var r,n=Re(e,"a","div"),s=Re(t,"b","div");if(r=hs(n,s),n=r[0],s=r[1],n.dtype==="int32"&&s.dtype==="int32")return WG(n,s);var i=Ma(n.shape,s.shape);return ht.runKernelFunc(function(o,l){var c=o.realDivide(n,s);return l([n,s]),c},{a:n,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.div(d.toFloat()),h=fi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=fi(d.shape,i);h.length>0&&(u=u.sum(h).reshape(d.shape));var m=d.square();return u.div(m.toFloat()).neg()}}},"Div")}}),p4e=et({divNoNan_:function(e,t){var r,n=Re(e,"a","div"),s=Re(t,"b","div");n=(r=hs(n,s))[0],s=r[1];var i=Cd(n,s),o=$a(i),l=s.equal(o);return Dx(l,o,i)}}),x4e=et({divStrict_:function(e,t){var r=Re(e,"a","div"),n=Re(t,"b","div");return un(r.shape,n.shape,"Error in divideStrict: "),r.div(n)}}),WG=et({floorDiv_:function(e,t){var r,n=Re(e,"a","floorDiv"),s=Re(t,"b","floorDiv");r=hs(n,s),n=r[0],s=r[1];var i=Ma(n.shape,s.shape);return ht.runKernelFunc(function(o,l){var c=o.floorDiv(n,s);return l([n,s]),c},{a:n,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.div(d.toFloat()),h=fi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=fi(d.shape,i);h.length>0&&(u=u.sum(h).reshape(d.shape));var m=d.square();return u.div(m.toFloat()).neg()}}},"FloorDiv")}}),D4=et({maximum_:function(e,t){var r,n=Re(e,"a","maximum"),s=Re(t,"b","maximum");return r=hs(n,s),n=r[0],s=r[1],n.dtype==="bool"&&(n=n.toInt(),s=s.toInt()),Ma(n.shape,s.shape),ht.runKernelFunc(function(i,o){var l=i.maximum(n,s);return o([n,s]),l},{a:n,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return i.mul(l.greaterEqual(c).toFloat())},b:function(){return i.mul(l.less(c).toFloat())}}},"Maximum")}}),v4e=et({maximumStrict_:function(e,t){var r=Re(e,"a","maximumStrict"),n=Re(t,"b","maximumStrict");return un(r.shape,n.shape,"Error in maximumStrict: "),r.maximum(n)}}),GG=et({minimum_:function(e,t){var r,n=Re(e,"a","minimum"),s=Re(t,"b","minimum");return r=hs(n,s),n=r[0],s=r[1],n.dtype==="bool"&&(n=n.toInt(),s=s.toInt()),Ma(n.shape,s.shape),ht.runKernelFunc(function(i,o){var l=i.minimum(n,s);return o([n,s]),l},{a:n,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return i.mul(l.lessEqual(c).toFloat())},b:function(){return i.mul(l.greater(c).toFloat())}}},"Minimum")}}),g4e=et({minimumStrict_:function(e,t){var r=Re(e,"a","minimumStrict"),n=Re(t,"b","minimumStrict");return un(r.shape,n.shape,"Error in minimumStrict: "),r.minimum(n)}}),b4e=et({mod_:function(e,t){var r,n=Re(e,"a","mod"),s=Re(t,"b","mod");r=hs(n,s),n=r[0],s=r[1];var i=Ma(n.shape,s.shape);return ht.runKernelFunc(function(o,l){var c=o.mod(n,s);return l([n,s]),c},{$a:n,$b:s},function(o,l){var c=l[0],d=l[1];return{$a:function(){var u=fi(c.shape,i);return u.length>0?o.sum(u).reshape(c.shape):o},$b:function(){var u=o.mul(c.div(d).floor().neg()),h=fi(d.shape,i);return h.length>0?u.sum(h).reshape(d.shape):u}}})}}),y4e=et({modStrict_:function(e,t){var r=Re(e,"a","modStrict"),n=Re(t,"b","modStrict");return un(r.shape,n.shape,"Error in modStrict: "),r.mod(n)}}),_o=et({mul_:function(e,t){var r,n=Re(e,"a","mul"),s=Re(t,"b","mul");r=hs(n,s),n=r[0],s=r[1];var i=Ma(n.shape,s.shape);return ht.runKernelFunc(function(o,l){var c=o.multiply(n,s);return l([n,s]),c},{a:n,b:s},function(o,l){var c=l[0],d=l[1];return{a:function(){var u=o.mul(d.toFloat()),h=fi(c.shape,i);return h.length>0?u.sum(h).reshape(c.shape):u},b:function(){var u=o.mul(c.toFloat()),h=fi(d.shape,i);return h.length>0?u.sum(h).reshape(d.shape):u}}},"Mul")}}),j4e=et({mulStrict_:function(e,t){var r=Re(e,"a","mul"),n=Re(t,"b","mul");return un(r.shape,n.shape,"Error in multiplyStrict: "),r.mul(n)}}),d2=et({pow_:function(e,t){var r,n=Re(e,"base","pow"),s=Re(t,"exp","pow");r=hs(n,s),n=r[0],s=r[1];var i=Ma(n.shape,s.shape),o=[n,s];return ht.runKernelFunc(function(l,c){var d=l.pow(n,s);return c([n,s,d]),d},{a:n,b:s},function(l,c){var d=c[0],u=c[1],h=c[2];return{a:function(){var m=u.toFloat(),p=l.mul(m.mul(d.pow(m.sub(Nr(1))))),v=fi(d.shape,i);return v.length>0&&(p=p.sum(v)),p.reshape(d.shape)},b:function(){var m=d.greater(0),p=d.log().where(m,$a(d)),v=l.mul(h.mul(p)),g=fi(u.shape,i);return g.length>0&&(v=v.sum(g)),v.reshape(u.shape)}}},"Pow",{},o,[!0])}}),N4e=et({powStrict_:function(e,t){return un(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),w4e=et({squaredDifferenceStrict_:function(e,t){var r=Re(e,"a","squaredDifferenceStrict"),n=Re(t,"b","squaredDifferenceStrict");return un(r.shape,n.shape,"Error in squaredDifferenceStrict: "),r.squaredDifference(n)}}),mi=et({sub_:function(e,t){var r,n=Re(e,"a","sub"),s=Re(t,"b","sub");r=hs(n,s),n=r[0],s=r[1];var i=Ma(n.shape,s.shape);return ht.runKernelFunc(function(o){return o.subtract(n,s)},{a:n,b:s},function(o){return{a:function(){var l=o,c=fi(n.shape,i);return c.length>0&&(l=l.sum(c)),l.reshape(n.shape)},b:function(){var l=o,c=fi(s.shape,i);return c.length>0&&(l=l.sum(c)),l.neg().reshape(s.shape)}}},"Sub")}}),S4e=et({subStrict_:function(e,t){var r=Re(e,"a","subStrict"),n=Re(t,"b","subStrict");return un(r.shape,n.shape,"Error in subStrict: "),r.sub(n)}}),YG=et({equal_:function(e,t){var r,n=Re(e,"a","equal"),s=Re(t,"b","equal");return r=hs(n,s),n=r[0],s=r[1],Ma(n.shape,s.shape),ht.runKernelFunc(function(i){return i.equal(n,s)},{$a:n,$b:s})}}),C4e=et({equalStrict_:function(e,t){var r=Re(e,"a","equalStrict"),n=Re(t,"b","equalStrict");return un(r.shape,n.shape,"Error in equalStrict: "),r.equal(n)}}),k4e=et({greater_:function(e,t){var r,n=Re(e,"a","greater"),s=Re(t,"b","greater");return r=hs(n,s),n=r[0],s=r[1],Ma(n.shape,s.shape),ht.runKernelFunc(function(i){return i.greater(n,s)},{a:n,b:s},null,"Greater")}}),KG=et({greaterEqual_:function(e,t){var r,n=Re(e,"a","greaterEqual"),s=Re(t,"b","greaterEqual");return r=hs(n,s),n=r[0],s=r[1],Ma(n.shape,s.shape),ht.runKernelFunc(function(i,o){var l=i.greaterEqual(n,s);return o([n,s]),l},{a:n,b:s},function(i,o){var l=o[0],c=o[1];return{a:function(){return $a(l)},b:function(){return $a(c)}}},"GreaterEqual")}}),_4e=et({greaterEqualStrict_:function(e,t){var r=Re(e,"a","greaterEqualStrict"),n=Re(t,"b","greaterEqualStrict");return un(r.shape,n.shape,"Error in greaterEqualStrict: "),r.greaterEqual(n)}}),E4e=et({greaterStrict_:function(e,t){var r=Re(e,"a","greaterStrict"),n=Re(t,"b","greaterStrict");return un(r.shape,n.shape,"Error in greaterStrict: "),r.greater(n)}}),D4e=et({less_:function(e,t){var r,n=Re(e,"a","less"),s=Re(t,"b","less");return r=hs(n,s),n=r[0],s=r[1],Ma(n.shape,s.shape),ht.runKernelFunc(function(i){return i.less(n,s)},{a:n,b:s},null,"Less")}}),A4e=et({lessEqual_:function(e,t){var r,n=Re(e,"a","lessEqual"),s=Re(t,"b","lessEqual");return r=hs(n,s),n=r[0],s=r[1],Ma(n.shape,s.shape),ht.runKernelFunc(function(i,o){var l=i.lessEqual(n,s);return o([n,s]),l},{a:n,b:s},null,"LessEqual")}}),T4e=et({lessEqualStrict_:function(e,t){var r=Re(e,"a","lessEqualStrict"),n=Re(t,"b","lessEqualStrict");return un(r.shape,n.shape,"Error in lessEqualStrict: "),r.lessEqual(n)}}),I4e=et({lessStrict_:function(e,t){var r=Re(e,"a","lessStrict"),n=Re(t,"b","lessStrict");return un(r.shape,n.shape,"Error in lessStrict: "),r.less(n)}}),P4e=et({notEqual_:function(e,t){var r,n=Re(e,"a","notEqual"),s=Re(t,"b","notEqual");return r=hs(n,s),n=r[0],s=r[1],Ma(n.shape,s.shape),ht.runKernelFunc(function(i){return i.notEqual(n,s)},{a:n,b:s},null,"NotEqual")}}),O4e=et({notEqualStrict_:function(e,t){var r=Re(e,"a","notEqualStrict"),n=Re(t,"b","notEqualStrict");return un(r.shape,n.shape,"Error in notEqualStrict: "),r.notEqual(n)}});function bB(e,t){for(var r=[],n=e;n<t;++n)r.push(n);return r}function yB(e){for(var t=[],r=0;r<e.length;++r)for(var n=0;n<e[r].length;++n)t.push(e[r][n]);return t}var A4=et({gather_:function(e,t,r){r===void 0&&(r=0);var n=Re(e,"x","gather"),s=Re(t,"indices","gather","int32");r=xi(r,n.shape)[0];var i=function(o,l,c){for(var d=o.shape[c],u=[],h=1,m=1,p=0;p<c;p++)u.push(o.shape[p]),h*=o.shape[p];for(p=0;p<l.rank;p++)u.push(l.shape[p]);for(p=c+1;p<o.rank;p++)u.push(o.shape[p]),m*=o.shape[p];return{batchSize:h,sliceSize:m,dimSize:d,outputShape:u}}(n,s,r);return ht.runKernelFunc(function(o,l){var c=o.gather(n,s.flatten(),r);return l([s]),c},{x:n,indices:s},function(o,l){var c=l[0];return{x:function(){var d=n.shape,u=c.size,h=d.slice(0,r),m=h.length,p=d.slice(r,d.length).slice(1),v=p.length,g=bB(0,m),b=bB(m+1,m+1+v),y=yB([h,[u],p]),C=o.reshape(y),w=c.reshape([u]),k=yB([[m],g,b]),S=C.transpose(k),D=XG(S,w,n.shape[r]),E=x4(k);return D=D.transpose(E)},indices:function(){return c}}},"Gather",{axis:r}).reshape(i.outputShape)}}),XG=et({unsortedSegmentSum_:function(e,t,r){var n=Re(e,"x","unsortedSegmentSum"),s=Re(t,"segmentIds","unsortedSegmentSum","int32");return He(Vs(r),function(){return"numSegments must be of dtype int"}),ht.runKernelFunc(function(i,o){var l=i.unsortedSegmentSum(n,s,r);return o([s]),l},{$x:n},function(i,o){var l=o[0];return{$x:function(){return function(c,d){for(var u=D4(d,$a(d)),h=A4(c,u),m=KG(d,Nr(0,"int32")),p=h.rank-m.rank,v=0;v<p;++v)m=Lc(m,v+1);m=FS(m,hg(h.shape,"bool"));var g=$a(h);return Dx(m,h,g)}(i,l)}}})}}),M4e=function(e,t,r){return Pr(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h,m,p,v,g;return Or(this,function(b){switch(b.label){case 0:for(n=Re(e,"tensor","boolMask"),s=Re(t,"mask","boolMask","bool"),i=r??0,o=s.rank,l=n.shape,He(o>0,function(){return"mask cannot be scalar"}),un(l.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,d=i;d<i+o;d++)c*=l[d];return u=l.slice(0,i).concat([c],l.slice(i+o)),h=n.reshape(u),m=s.reshape([-1]),[4,HG(m)];case 1:return p=b.sent(),v=p.squeeze([1]),g=A4(h,v,i),e!==n&&n.dispose(),t!==s&&s.dispose(),v.dispose(),h.dispose(),m.dispose(),p.dispose(),[2,g]}})})};function QG(e,t,r,n,s,i,o){i===void 0&&(i="NHWC"),He(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var l=e,c=t,d=!1;t.rank===3&&(d=!0,c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),l=[1,e[0],e[1],e[2]]),He(l.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+l.length+"."}),He(c.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank}),He(r.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+r.rank});var u=i==="NHWC"?l[3]:l[1],h=i==="NHWC"?c.shape[3]:c.shape[1];He(u===r.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+u+") must match input depth for filter "+r.shape[2]+"."}),He(h===r.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+h+") must match output depth for filter "+r.shape[3]+"."}),o!=null&&He(Vs(s),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+s+"."});var m=j4(i),p=Wx(l,r.shape,n,1,s,o,!1,m),v=ht.runKernelFunc(function(g,b){var y=g.conv2dDerInput(c,r,p);return b([r,c]),y},{dy4D:c,filter:r},function(g,b){var y=b[0],C=b[1];return{dy4D:function(){return Zc(g,y,n,s,i,1,o)},filter:function(){return T4(g,C,y.shape,n,s,i,o)}}});return d?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function BE(e){var t=function(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}(e),r=t[0],n=t[1],s=t[2];return r===1&&n===1&&s===1}function JG(e,t,r,n,s){He(e.length===t.rank,function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"});var i=e,o=t,l=!1;t.rank===4&&(l=!0,o=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),i=[1,e[0],e[1],e[2],e[3]]);var c=i[4],d=o.shape[4];He(i.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+i.length+"."}),He(o.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+o.rank}),He(r.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+r.rank}),He(c===r.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+r.shape[3]+"."}),He(d===r.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+d+") must match output depth for filter "+r.shape[4]+"."});var u=o2(i,r.shape,n,1,s),h=ht.runKernelFunc(function(m){return m.conv3dDerInput(o,r,u)},{dy5D:o});return l?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}var R4e=et({conv1d_:function(e,t,r,n,s,i,o){s===void 0&&(s="NWC"),i===void 0&&(i=1);var l=Re(e,"x","conv1d"),c=Re(t,"filter","conv1d"),d=l,u=!1;l.rank===2&&(u=!0,d=l.as3D(1,l.shape[0],l.shape[1])),He(d.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+d.rank+"."}),He(c.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."}),o!=null&&He(Vs(n),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+n+"."}),He(d.shape[2]===c.shape[1],function(){return"Error in conv1d: depth of input ("+d.shape[2]+") must match input depth for filter "+c.shape[1]+"."}),He(vl(r,i),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+r+" and dilation '"+i+"'"}),He(s==="NWC",function(){return"Error in conv1d: got dataFormat of "+s+" but only NWC is currently supported."});var h=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),m=d.as4D(d.shape[0],1,d.shape[1],d.shape[2]),p=Zc(m,h,[1,r],n,"NHWC",[1,i],o);return u?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),Zc=et({conv2d_:function(e,t,r,n,s,i,o){s===void 0&&(s="NHWC"),i===void 0&&(i=[1,1]);var l=Re(e,"x","conv2d"),c=Re(t,"filter","conv2d"),d=l,u=!1;l.rank===3&&(u=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),He(d.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+d.rank+"."}),He(c.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."}),o!=null&&He(Vs(n),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+n+"."});var h=s==="NHWC"?d.shape[3]:d.shape[1];He(h===c.shape[2],function(){return"Error in conv2d: depth of input ("+h+") must match input depth for filter "+c.shape[2]+"."}),He(vl(r,i),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"});var m=j4(s),p=Wx(d.shape,c.shape,r,i,n,o,!1,m),v=[c,d],g=ht.runKernelFunc(function(b,y){var C=b.conv2d(d,c,p);return y([c,d]),C},{x:d,filter:c},function(b,y){var C=y,w=C[0],k=C[1];return He(U0(i),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"}),{x:function(){return ZG(k.shape,b,w,r,n,s)},filter:function(){return T4(k,b,w.shape,r,n,s)}}},"Conv2D",p,v);return u?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),F4e=et({conv3d_:function(e,t,r,n,s,i){s===void 0&&(s="NDHWC"),i===void 0&&(i=[1,1,1]);var o=Re(e,"x","conv3d"),l=Re(t,"filter","conv3d"),c=o,d=!1;o.rank===4&&(d=!0,c=o.as5D(1,o.shape[0],o.shape[1],o.shape[2],o.shape[3])),He(c.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."}),He(l.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+l.rank+"."}),He(c.shape[4]===l.shape[3],function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+l.shape[3]+"."}),He(function(m,p){return BE(m)||BE(p)}(r,i),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),He(s==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+s+" but only NDHWC is currently supported."});var u=o2(c.shape,l.shape,r,i,n),h=ht.runKernelFunc(function(m,p){var v=m.conv3d(c,l,u);return p([c,l]),v},{x:c,$filter:l},function(m,p){He(BE(i),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+i+"'"});var v=p[0],g=p[1];return{x:function(){return JG(v.shape,m,g,r,n)},$filter:function(){return function(b,y,C,w,k){var S=b;b.rank===4&&(S=b.as5D(1,b.shape[0],b.shape[1],b.shape[2],b.shape[3]));var D=y;D.rank===4&&(D=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3])),He(S.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+S.shape+"."}),He(D.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+D.shape+"."}),He(C.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+C+"."}),He(S.shape[4]===C[3],function(){return"Error in conv3dDerFilter: depth of input "+S.shape[4]+") must match input depth in filter ("+C[3]+"."}),He(D.shape[4]===C[4],function(){return"Error in conv3dDerFilter: depth of dy ("+D.shape[4]+") must match output depth for filter ("+C[4]+")."});var E=o2(S.shape,C,w,1,k);return ht.runKernelFunc(function(T){return T.conv3dDerFilter(S,D,E)},{x5D:S,dy5D:D})}(v,m,g.shape,r,n)}}});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),T4=et({conv2dDerFilter_:function(e,t,r,n,s,i,o){i===void 0&&(i="NHWC");var l=e;e.rank===3&&(l=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var c=t;c.rank===3&&(c=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),He(l.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+l.shape+"."}),He(c.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."}),He(r.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+r+"."});var d=i==="NHWC"?l.shape[3]:l.shape[1],u=i==="NHWC"?c.shape[3]:c.shape[1];He(d===r[2],function(){return"Error in conv2dDerFilter: depth of input "+d+") must match input depth in filter ("+r[2]+"."}),He(u===r[3],function(){return"Error in conv2dDerFilter: depth of dy ("+u+") must match output depth for filter ("+r[3]+")."}),o!=null&&He(Vs(s),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+s+"."});var h=j4(i),m=Wx(l.shape,r,n,1,s,o,!1,h);return ht.runKernelFunc(function(p){return p.conv2dDerFilter(l,c,m)},{x4D:l,dy4D:c})}}),ZG=et({conv2dDerInput_:QG}),LS=et({depthwiseConv2d_:function(e,t,r,n,s,i,o){i===void 0&&(i=[1,1]);var l=Re(e,"x","depthwiseConv2d"),c=Re(t,"filter","depthwiseConv2d"),d=l,u=!1;l.rank===3&&(u=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),He(d.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+d.rank+"."}),He(c.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."}),He(d.shape[3]===c.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+d.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."}),i==null&&(i=[1,1]),He(vl(r,i),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}),o!=null&&He(Vs(n),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+n+"."});var h=Wx(d.shape,c.shape,r,i,n,o,!0),m=[d,c],p=ht.runKernelFunc(function(v,g){var b=v.depthwiseConv2D(d,c,h);return g([d,c]),b},{x:d,filter:c},function(v,g){He(U0(i),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+i+"'"});var b=g[0],y=g[1];return{x:function(){return eY(b.shape,v,y,h)},filter:function(){return tY(b,v,y.shape,h)}}},"DepthwiseConv2dNative",h,m);return u?p.as3D(p.shape[1],p.shape[2],p.shape[3]):p}}),eY=et({depthwiseConv2dDerInput_:function(e,t,r,n){var s=t,i=!1;t.rank===3&&(i=!0,s=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=ht.runKernelFunc(function(l){return l.depthwiseConv2DDerInput(s,r,n)},{dy4D:s});return i?o.as3D(o.shape[1],o.shape[2],o.shape[3]):o}}),tY=et({depthwiseConv2dDerFilter_:function(e,t,r,n){var s=e;e.rank===3&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var i=t;return i.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),ht.runKernelFunc(function(o){return o.depthwiseConv2DDerFilter(s,i,n)},{x4D:s,dy4D:i})}}),I4=et({separableConv2d_:function(e,t,r,n,s,i,o){i===void 0&&(i=[1,1]),o===void 0&&(o="NHWC");var l=Re(e,"x","separableConv2d"),c=Re(t,"depthwiseFilter","separableConv2d"),d=Re(r,"pointwiseFilter","separableConv2d"),u=l,h=!1;if(l.rank===3&&(h=!0,u=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");He(u.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+u.rank+"."}),He(c.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."}),He(d.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."}),He(d.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+d.shape[0]+"."}),He(d.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+d.shape[1]+"."});var m=c.shape[2],p=c.shape[3];He(d.shape[2]===m*p,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+m*p+", but got "+d.shape[2]+"."});var v=LS(u,c,n,s,o,i),g=Zc(v,d,1,"valid",o);return h?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),L4e=et({conv2dTranspose_:function(e,t,r,n,s,i){return QG(r,Re(e,"x","conv2dTranspose"),Re(t,"filter","conv2dTranspose"),n,s,"NHWC",i)}}),B4e=et({conv3dTranspose_:function(e,t,r,n,s){return JG(r,Re(e,"x","conv3dTranspose"),Re(t,"filter","conv3dTranspose"),n,s)}}),BS=et({matMul_:function(e,t,r,n){var s;r===void 0&&(r=!1),n===void 0&&(n=!1);var i=Re(e,"a","matMul"),o=Re(t,"b","matMul");s=hs(i,o),i=s[0],o=s[1];var l=r?i.shape[i.rank-2]:i.shape[i.rank-1],c=n?o.shape[o.rank-1]:o.shape[o.rank-2],d=r?i.shape[i.rank-1]:i.shape[i.rank-2],u=n?o.shape[o.rank-2]:o.shape[o.rank-1],h=i.shape.slice(0,-2),m=o.shape.slice(0,-2),p=Fr(h),v=Fr(m);He(i.rank>=2&&o.rank>=2&&i.rank===o.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+i.rank+" and "+o.rank+"."}),He(Ei(h,m),function(){return"Error in matMul: outer dimensions ("+h+") and ("+m+") of Tensors with shapes "+i.shape+" and "+o.shape+" must match."}),He(l===c,function(){return"Error in matMul: inner shapes ("+l+") and ("+c+") of Tensors with shapes "+i.shape+" and "+o.shape+" and transposeA="+r+" and transposeB="+n+" must match."});var g=i.shape.slice(0,-2).concat([d,u]),b=r?i.as3D(p,l,d):i.as3D(p,d,l),y=n?o.as3D(v,u,c):o.as3D(v,c,u),C={transposeA:r,transposeB:n};return ht.runKernelFunc(function(w,k){var S=w.batchMatMul(b,y,r,n);return k([b,y]),S},{a:b,b:y},function(w,k){var S=k,D=S[0],E=S[1];return r||n?!r&&n?{a:function(){return w.matMul(E,!1,!1)},b:function(){return w.matMul(D,!0,!1)}}:r&&!n?{a:function(){return E.matMul(w,!1,!0)},b:function(){return D.matMul(w,!1,!1)}}:{a:function(){return E.matMul(w,!0,!0)},b:function(){return w.matMul(D,!0,!0)}}:{a:function(){return w.matMul(E,!1,!0)},b:function(){return D.matMul(w,!0,!1)}}},"BatchMatMul",C).reshape(g)}}),U4e=et({dot_:function(e,t){var r=Re(e,"t1","dot"),n=Re(t,"t2","dot");He(!(r.rank!==1&&r.rank!==2||n.rank!==1&&n.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+r.rank+" and "+n.rank+"."});var s=r.rank===1?r.size:r.shape[1],i=n.rank===1?n.size:n.shape[0];return He(s===i,function(){return"Error in dot: inner dimensions of inputs must match, but got "+s+" and "+i+"."}),r.rank===1&&n.rank===1?r.as2D(1,-1).matMul(n.as2D(-1,1)).asScalar():r.rank===1&&n.rank===2?r.as2D(1,-1).matMul(n.as2D(n.shape[0],n.shape[1])).as1D():r.rank===2&&n.rank===1?r.matMul(n.as2D(-1,1)).as1D():r.matMul(n.as2D(n.shape[0],n.shape[1]))}}),$4e=et({outerProduct_:function(e,t){var r=Re(e,"v1","outerProduct"),n=Re(t,"v2","outerProduct");return He(r.rank===1&&n.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+r.rank+" and "+n.rank+"."}),r.as2D(-1,1).matMul(n.as2D(1,-1))}}),x1=et({reverse_:function(e,t){var r=Re(e,"x","reverse");if(r.rank===0)return r.clone();var n=xi(t,r.shape);return ht.runKernelFunc(function(s){return s.reverse(r,n)},{$x:r},function(s){return{$x:function(){return s.reverse(n)}}}).reshapeAs(r)}}),V4e=et({reverse1d_:function(e){var t=Re(e,"x","reverse");return He(t.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."}),x1(t,0)}}),q4e=et({reverse2d_:function(e,t){var r=Re(e,"x","reverse");return He(r.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+r.rank+"."}),x1(r,t)}}),z4e=et({reverse3d_:function(e,t){var r=Re(e,"x","reverse");return He(r.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+r.rank+"."}),x1(r,t)}}),H4e=et({reverse4d_:function(e,t){var r=Re(e,"x","reverse");return He(r.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+r.rank+"."}),x1(r,t)}});function rY(e,t,r,n,s,i){var o=Re(e,"x","maxPool"),l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),He(l.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+l.rank+"."}),He(vl(r,n),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+n+"'"}),i!=null&&He(Vs(s),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var d=Ay(l.shape,t,r,n,s,i);if(d.filterWidth===1&&d.filterHeight===1&&Ei(d.inShape,d.outShape))return o.clone();var u=[l],h=ht.runKernelFunc(function(m,p){var v=m.maxPool(l,d);return p([l,v]),v},{x:l},function(m,p){var v=p[0],g=p[1];return{x:function(){return function(b,y,C,w,k,S,D,E){var T=Re(b,"dy","maxPoolBackprop"),A=Re(y,"input","maxPoolBackprop"),L=Re(C,"output","maxPoolBackprop");He(A.rank===T.rank,function(){return"Rank of input ("+A.rank+") does not match rank of dy ("+T.rank+")"}),He(vl(k,S),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+k+" and dilations '"+S+"'"}),He(T.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+T.rank+"."}),He(A.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+A.rank+"."});var P=Ay(A.shape,w,k,S,D,E);return ht.runKernelFunc(function(O){return O.maxPoolBackprop(T,A,L,P)},{$dy:T,$input:A})}(m,v,g,t,r,n,s)}}},"MaxPool",d,u);return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}function aY(e,t,r,n,s,i){var o=Re(e,"x","avgPool","float32");He(vl(r,n),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+n+"'"});var l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),He(l.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+l.rank+"."}),i!=null&&He(Vs(s),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+s+"."});var d=Ay(l.shape,t,r,n,s,i);if(d.filterWidth===1&&d.filterHeight===1&&Ei(d.inShape,d.outShape))return o.clone();var u=ht.runKernelFunc(function(h){return h.avgPool(l,d)},{x:l},function(h){return{x:function(){return function(m,p,v,g,b,y){var C=Re(m,"dy","avgPoolBackprop"),w=Re(p,"input","avgPoolBackprop");He(w.rank===C.rank,function(){return"Rank of input ("+w.rank+") does not match rank of dy ("+C.rank+")"}),He(vl(g,b),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+g+" and dilations '"+b+"'"});var k=w,S=C,D=!1;w.rank===3&&(D=!0,k=w.as4D(1,w.shape[0],w.shape[1],w.shape[2]),S=C.as4D(1,C.shape[0],C.shape[1],C.shape[2])),He(S.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+S.rank+"."}),He(k.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+k.rank+"."});var E=Ay(k.shape,v,g,b,y),T=ht.runKernelFunc(function(A){return A.avgPoolBackprop(S,k,E)},{dy4D:S,input4D:k});return D?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}(h,l,t,r,n,s)}}},"AvgPool",d);return u=u.cast(o.dtype),c?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}var Ni=et({maxPool_:function(e,t,r,n,s){return rY(e,t,r,1,n,s)}}),v1=et({avgPool_:function(e,t,r,n,s){return aY(e,t,r,1,n,s)}}),W4e=et({pool_:function(e,t,r,n,s,i){s==null&&(s=[1,1]),i==null&&(i=1),n===0&&(n="valid");var o=Re(e,"x","maxPool"),l=o,c=!1;o.rank===3&&(c=!0,l=o.as4D(1,o.shape[0],o.shape[1],o.shape[2])),He(vl(i,s),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+s+"'"});var d,u=Ay(l.shape,t,i,s,n),h=[u.dilationHeight,u.dilationWidth];d=n==="same"?function(k,S){var D=k.map(function(A,L){return A+(A-1)*(S[L]-1)}).map(function(A){return A-1}),E=D.map(function(A){return Math.floor(A/2)}),T=D.map(function(A,L){return A-E[L]});return D.map(function(A,L){return[E[L],T[L]]})}([u.filterHeight,u.filterWidth],h):[[0,0],[0,0]];var m=h[0]===1&&h[1]===1,p=function(k,S,D){var E=D.map(function(z){return z[0]}),T=D.map(function(z){return z[1]}),A=k.concat(E,T),L=S.map(function(z,K){return(z-A[K]%z)%z}),P=T.map(function(z,K){return z+L[K]}),O=S.map(function(z,K){return[E[K],P[K]]}),Z=S.map(function(z,K){return[0,L[K]]});return[O,Z]}([u.inHeight,u.inWidth],h,d),v=p[0],g=p[1],b=m?n:"valid",y=m?l:cG(l,h,v),C=(r==="avg"?function(){return aY(y,t,i,1,b)}:function(){return rY(y,t,i,1,b)})(),w=m?C:iG(C,h,g);return c?w.as3D(w.shape[1],w.shape[2],w.shape[3]):w}}),G4e=et({maxPool3d_:function(e,t,r,n,s,i,o){i===void 0&&(i="NDHWC");var l=Re(e,"x","maxPool3d"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),o==null&&(o=[1,1,1]),He(c.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."}),He(i==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),He(vl(r,o),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),s!=null&&He(Vs(n),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+n+"."});var u=i2(c.shape,t,r,o,n,s,i),h=ht.runKernelFunc(function(m,p){var v=m.maxPool3d(c,u);return p([c,v]),v},{x:c},function(m,p){var v=p[0],g=p[1];return{x:function(){return function(b,y,C,w,k,S,D,E){var T=Re(b,"dy","maxPool3dBackprop"),A=Re(y,"input","maxPool3dBackprop"),L=Re(C,"output","maxPool3dBackprop"),P=T,O=A,Z=L,z=!1;A.rank===4&&(z=!0,P=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3]),O=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3]),Z=L.as5D(1,L.shape[0],L.shape[1],L.shape[2],L.shape[3])),He(P.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+P.rank+"."}),He(O.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+O.rank+"."}),He(Z.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+Z.rank+"."}),S==null&&(S=[1,1,1]),He(vl(k,S),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+k+" and dilations '"+S+"'"}),E!=null&&He(Vs(D),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+D+"."});var K=i2(O.shape,w,k,S,D,E),B=ht.runKernelFunc(function(Q){return Q.maxPool3dBackprop(P,O,Z,K)},{dy5D:P,input5D:O});return z?B.as4D(B.shape[1],B.shape[2],B.shape[3],B.shape[4]):B}(m,v,g,t,r,o,n,s)}}});return d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),Y4e=et({avgPool3d_:function(e,t,r,n,s,i,o){i===void 0&&(i="NDHWC");var l=Re(e,"x","avgPool3d","float32"),c=l,d=!1;l.rank===4&&(d=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),o==null&&(o=[1,1,1]),He(c.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."}),He(i==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+i}),He(vl(r,o),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+o+"'"}),s!=null&&He(Vs(n),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+n+"."});var u=i2(c.shape,t,r,o,n,s,i),h=ht.runKernelFunc(function(m){return m.avgPool3d(c,u)},{x:c},function(m){return{x:function(){return function(p,v,g,b,y,C,w){var k=Re(p,"dy","avgPool3dBackprop"),S=Re(v,"input","avgPool3dBackprop"),D=k,E=S,T=!1;S.rank===4&&(T=!0,D=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),E=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3])),He(D.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+D.rank+"."}),He(E.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+E.rank+"."}),y==null&&(y=[1,1,1]),He(vl(b,y),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+y+"'"}),w!=null&&He(Vs(C),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+w+" but got pad "+C+"."});var A=i2(E.shape,g,b,y,C,w),L=ht.runKernelFunc(function(P){return P.avgPool3dBackprop(D,E,A)},{dy5D:D,input5D:E});return T?L.as4D(L.shape[1],L.shape[2],L.shape[3],L.shape[4]):L}(m,c,t,r,o,n,s)}}});return h=h.cast(c.dtype),d?h.as4D(h.shape[1],h.shape[2],h.shape[3],h.shape[4]):h}}),Gu=et({slice_:function(e,t,r){var n,s,i=Re(e,"x","slice");if(i.rank===0)throw new Error("Slicing scalar is not possible");(n=typeof t=="number"?[t].concat(new Array(i.rank-1).fill(0)):t.length<i.rank?t.concat(new Array(i.rank-t.length).fill(0)):t.slice()).forEach(function(c){He(c!==-1,function(){return"slice() does not support negative begin indexing."})}),s=(s=r==null?new Array(i.rank).fill(-1):typeof r=="number"?[r].concat(new Array(i.rank-1).fill(-1)):r.length<i.rank?r.concat(new Array(i.rank-r.length).fill(-1)):r).map(function(c,d){return c>=0?c:(He(c===-1,function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+d+"."}),i.shape[d]-n[d])}),N3e(i,n,s);var o=i.shape,l={begin:n,size:s};return ht.runKernelFunc(function(c){return c.slice(i,n,s)},{x:i},function(c){for(var d=[],u=0;u<c.rank;u++)d.push([n[u],o[u]-n[u]-s[u]]);return{x:function(){return c.pad(d)}}},"Slice",l)}}),K4e=et({slice1d_:function(e,t,r){var n=Re(e,"x","slice1d");return He(n.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+n.rank+" tensor"}),Gu(n,[t],[r])}}),X4e=et({slice2d_:function(e,t,r){var n=Re(e,"x","slice2d");return He(n.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+n.rank+" tensor"}),Gu(n,t,r)}}),nY=et({slice3d_:function(e,t,r){var n=Re(e,"x","slice3d");return He(n.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+n.rank+" tensor"}),Gu(n,t,r)}}),Q4e=et({slice4d_:function(e,t,r){var n=Re(e,"x","slice4d");return He(n.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+n.rank+" tensor"}),Gu(n,t,r)}});function sY(e,t,r,n,s){return t.rank<r.rank&&(t=t.reshape(xl(t.shape,n))),e.rank<r.rank&&(e=e.reshape(xl(e.shape,n))),{x:function(){var i=e.mul(r.equal(t).cast(e.dtype));return s==null?i:i.transpose(s)}}}var J4e=et({all_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Re(e,"x","all","bool"),s=xi(t,n.shape),i=s,o=rh(i,n.rank);o!=null&&(n=n.transpose(o),i=ah(i.length,n.rank));var l=ht.runKernelFunc(function(d){return d.all(n,i)},{$x:n});if(r){var c=xl(l.shape,s);return l.reshape(c)}return l}}),Z4e=et({any_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Re(e,"x","any","bool"),s=xi(t,n.shape),i=s,o=rh(i,n.rank);o!=null&&(n=n.transpose(o),i=ah(i.length,n.rank));var l=ht.runKernelFunc(function(d){return d.any(n,i)},{$x:n});if(r){var c=xl(l.shape,s);return l.reshape(c)}return l}}),eIe=et({argMax_:function(e,t){t===void 0&&(t=0);var r=Re(e,"x","argMax");t==null&&(t=0);var n=xi(t,r.shape),s=rh(n,r.rank);s!=null&&(r=r.transpose(s),n=ah(n.length,r.rank));var i={axis:n[0]},o=[r];return ht.runKernelFunc(function(l,c){var d=l.argMax(r,n[0]);return c([r]),d},{x:r},function(l,c){var d=c[0];return{x:function(){return $a(d)}}},"ArgMax",i,o)}}),tIe=et({argMin_:function(e,t){t===void 0&&(t=0);var r=Re(e,"x","argMin");t==null&&(t=0);var n=xi(t,r.shape),s=rh(n,r.rank);return s!=null&&(r=r.transpose(s),n=ah(n.length,r.rank)),ht.runKernelFunc(function(i,o){var l=i.argMin(r,n[0]);return o([r]),l},{$x:r},function(i,o){var l=o[0];return{$x:function(){return $a(l)}}})}}),rIe=et({logSumExp_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Re(e,"x","logSumExp"),s=xi(t,n.shape),i=n.max(s,!0),o=n.sub(i).exp().sum(s).log(),l=i.reshape(o.shape).add(o);if(r){var c=xl(l.shape,s);return l.reshape(c)}return l}}),US=et({max_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Re(e,"x","max"),s=n,i=xi(t,n.shape),o=i,l=rh(o,n.rank);l!=null&&(n=n.transpose(l),o=ah(o.length,n.rank));var c=[n],d=ht.runKernelFunc(function(h,m){var p=h.max(n,o);return m([s,p]),p},{x:n},function(h,m){return sY(h,m[1],m[0],i,l)},"Max",{axes:o},c,[!0]);if(r){var u=xl(d.shape,i);d=d.reshape(u)}return d}}),aIe=et({mean_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Re(e,"x","mean"),s=xi(t,n.shape),i=Fr(xo(n.shape,s)[1]);return MS(function(o){var l=Nr(i);return{value:(l.dtype===o.dtype?o:o.cast(l.dtype)).div(l).sum(t,r),gradFunc:function(c){var d=o.shape.slice();return s.forEach(function(u){d[u]=1}),c.reshape(d).mul(hg(o.shape,"float32")).div(i)}}})(n)}}),nIe=et({min_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Re(e,"x","min"),s=n,i=xi(t,n.shape),o=i,l=rh(o,n.rank);l!=null&&(n=n.transpose(l),o=ah(o.length,n.rank));var c=[n],d=ht.runKernelFunc(function(h,m){var p=h.min(n,o);return m([s,p]),p},{x:n},function(h,m){return sY(h,m[1],m[0],i,l)},"Min",{axes:o},c,[!0]);if(r){var u=xl(d.shape,i);d=d.reshape(u)}return d}}),sIe=et({moments_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=xi(t,(e=Re(e,"x","moments")).shape),s=e.mean(n,r),i=s.shape;r||(i=xl(s.shape,n));var o=e.toFloat().sub(s.reshape(i)).square();return{mean:s,variance:o.mean(n,r)}}}),iY=et({sum_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Re(e,"x","sum");n.dtype==="bool"&&(n=n.toInt());var s=xi(t,n.shape);return MS(function(i){var o=rh(s,i.rank),l=s,c=i;o!=null&&(c=i.transpose(o),l=ah(l.length,i.rank));var d=function(p){var v=i.shape.slice();return s.forEach(function(g){v[g]=1}),p.reshape(v).mul(hg(i.shape,"float32"))},u={axes:l},h=ht.runKernelFunc(function(p){return p.sum(c,l)},{x:c},function(p){return{x:function(){return d(p)}}},"Sum",u);if(r){var m=xl(h.shape,s);h=h.reshape(m)}return{value:h,gradFunc:d}})(n)}}),iIe=et({prod_:function(e,t,r){t===void 0&&(t=null),r===void 0&&(r=!1);var n=Re(e,"x","prod");n.dtype==="bool"&&(n=n.toInt());var s=xi(t,n.shape),i=rh(s,n.rank),o=s,l=n;i!=null&&(l=n.transpose(i),o=ah(o.length,n.rank));var c=ht.runKernelFunc(function(u){return u.prod(l,o)},{permutedX:l});if(r){var d=xl(c.shape,s);c=c.reshape(d)}return c}}),oY=et({elu_:function(e){var t=Re(e,"x","elu");return ht.runKernelFunc(function(r,n){var s=r.elu(t);return n([s]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){return ht.runKernelFunc(function(i){return i.eluDer(r,s)},{dy:r,y:s})}}})}}),oIe=et({leakyRelu_:function(e,t){t===void 0&&(t=.2);var r=Re(e,"x","leakyRelu");return D4(Nr(t).mul(r),r)}}),lY=et({prelu_:function(e,t){var r=Re(e,"x","prelu"),n=Re(t,"alpha","prelu");return ht.runKernelFunc(function(s,i){var o=s.prelu(r,n);return i([r,n]),o},{x:r,alpha:n},function(s,i){var o=i[0],l=i[1],c=o.greater(0);return{x:function(){return Dx(c,s,s.mul(l))},alpha:function(){var d=Dx(c,$a(s),s.mul(o)),u=fi(l.shape,s.shape);return u.length>0&&(d=d.sum(u)),d.reshape(l.shape)}}},"Prelu")}}),us=et({relu_:function(e){var t=Re(e,"x","relu");return t.dtype==="bool"?t.toInt():ht.runKernelFunc(function(r,n){var s=r.relu(t);return n([t]),s},{x:t},function(r,n){var s=n[0];return{x:function(){return r.mulStrict(s.step().toFloat())}}},"Relu")}}),cY=et({relu6_:function(e){var t=Re(e,"x","relu6");return t.dtype==="bool"?t.toInt():ht.runKernelFunc(function(r,n){var s=r.relu6(t);return n([t]),s},{x:t},function(r,n){var s=n[0],i=s.lessEqual(6).mul(s.step());return{x:function(){return r.mulStrict(i.toFloat())}}},"Relu6")}}),lIe=et({selu_:function(e){var t=Re(e,"x","selu");return ht.runKernelFunc(function(r,n){var s=r.selu(t);return n([t]),s},{$x:t},function(r,n){var s=n[0];return{$x:function(){var i=s.greater(Nr(0)),o=Nr(k4),l=Nr(_4),c=r.mul(l),d=r.mul(o).mul(s.toFloat().exp());return Dx(i,c,d)}}})}}),qm=et({transpose_:function(e,t){var r=Re(e,"x","transpose");if(t==null&&(t=r.shape.map(function(s,i){return i}).reverse()),He(r.rank===t.length,function(){return"Error in transpose: rank of input "+r.rank+" must match length of perm "+t+"."}),t.forEach(function(s){He(s>=0&&s<r.rank,function(){return"All entries in 'perm' must be between 0 and "+(r.rank-1)+" but got "+t})}),r.rank<=1)return r.clone();var n={perm:t};return ht.runKernelFunc(function(s){return s.transpose(r,t)},{x:r},function(s){var i=x4(t);return{x:function(){return s.transpose(i)}}},"Transpose",n)}}),cIe=et({localResponseNormalization_:function(e,t,r,n,s){t===void 0&&(t=5),r===void 0&&(r=1),n===void 0&&(n=1),s===void 0&&(s=.5);var i=Re(e,"x","localResponseNormalization");He(i.rank===4||i.rank===3,function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+i.rank+"."}),He(Vs(t),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."});var o=i,l=!1;i.rank===3&&(l=!0,o=i.as4D(1,i.shape[0],i.shape[1],i.shape[2]));var c=ht.runKernelFunc(function(d,u){var h=d.localResponseNormalization4D(o,t,r,n,s);return u([o,h]),h},{x4D:o},function(d,u){var h=u[0],m=u[1];return{x4D:function(){return ht.runKernelFunc(function(p){return p.LRNGrad(d,h,m,t,r,n,s)},{})}}});return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),dY=et({norm_:function(e,t,r,n){t===void 0&&(t="euclidean"),r===void 0&&(r=null),n===void 0&&(n=!1);var s=function l(c,d,u){if(u===void 0&&(u=null),c.rank===0)return c.abs();if(c.rank!==1&&u===null)return l(c.reshape([-1]),d,u);if(c.rank===1||typeof u=="number"||Array.isArray(u)&&u.length===1){if(d===1)return c.abs().sum(u);if(d===1/0)return c.abs().max(u);if(d===-1/0)return c.abs().min(u);if(d==="euclidean"||d===2)return c.abs().pow(Nr(2,"int32")).sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}if(Array.isArray(u)&&u.length===2){if(d===1)return c.abs().sum(u[0]).max(u[1]-1);if(d===1/0)return c.abs().sum(u[1]).max(u[0]);if(d===-1/0)return c.abs().sum(u[1]).min(u[0]);if(d==="fro"||d==="euclidean")return c.square().sum(u).sqrt();throw new Error("Error in norm: invalid ord value: "+d)}throw new Error("Error in norm: invalid axis: "+u)}(e=Re(e,"x","norm"),t,r),i=s.shape;if(n){var o=xi(r,e.shape);i=xl(s.shape,o)}return s.reshape(i)}}),dIe=et({basicLSTMCell_:function(e,t,r,n,s,i){var o=Re(e,"forgetBias","basicLSTMCell"),l=Re(t,"lstmKernel","basicLSTMCell"),c=Re(r,"lstmBias","basicLSTMCell"),d=Re(n,"data","basicLSTMCell"),u=Re(s,"c","basicLSTMCell"),h=Re(i,"h","basicLSTMCell"),m=d.concat(h,1).matMul(l).add(c),p=m.shape[0],v=m.shape[1]/4,g=[p,v],b=m.slice([0,0],g),y=m.slice([0,v],g),C=m.slice([0,2*v],g),w=m.slice([0,3*v],g),k=b.sigmoid().mulStrict(y.tanh()).addStrict(u.mulStrict(o.add(C).sigmoid())),S=k.tanh().mulStrict(w.sigmoid());return[k,S]}}),uIe=et({multiRNNCell_:function(e,t,r,n){for(var s=Re(t,"data","multiRNNCell"),i=e2(r,"c","multiRNNCell"),o=e2(n,"h","multiRNNCell"),l=s,c=[],d=0;d<e.length;d++){var u=e[d](l,i[d],o[d]);c.push(u[0]),c.push(u[1]),l=u[1]}var h=[],m=[];for(d=0;d<c.length;d+=2)h.push(c[d]),m.push(c[d+1]);return[h,m]}}),hIe=et({movingAverage_:function(e,t,r,n,s){s===void 0&&(s=!0);var i=Re(e,"v","movingAverage"),o=Re(t,"x","movingAverage"),l=Re(r,"decay","movingAverage");c5e(i,o),He(Ei(i.shape,o.shape),function(){return"Shape mismatch in v and x"});var c=Nr(1),d=c.sub(l),u=o.sub(i).mul(d);if(s){He(n!=null,function(){return"When using zeroDebias: true, step is required."});var h=Re(n,"step","movingAverage");u=u.div(c.sub(d2(l,h)))}return i.add(u)}}),fIe=et({stridedSlice_:function(e,t,r,n,s,i,o,l,c){if(s===void 0&&(s=0),i===void 0&&(i=0),o===void 0&&(o=0),l===void 0&&(l=0),c===void 0&&(c=0),n==null&&(n=new Array(t.length)),o!==0)throw new Error("ellipsis mask is not yet supported");var d=Re(e,"x","stridedSlice"),u=Z8(l),h=d.shape.slice();u.forEach(function(b){t[b]=0,r[b]=1,h.splice(b,0,1)}),d=d.reshape(h);for(var m=0;m<d.rank;m++)t[m]=w3e(s,t,n,d.shape,m),r[m]=S3e(i,r,n,d.shape,m),n[m]=n[m]||1;var p=Z8(c);p.forEach(function(b){r[b]=t[b]+1,n[b]=1});var v=y4(t,r,n),g=v.filter(function(b,y){return p.indexOf(y)===-1});return n.every(function(b){return b===1})?Gu(d,t,v).reshape(g):ht.runKernelFunc(function(b){return b.stridedSlice(d,t,r,n)},{$x:d}).reshape(g)}}),mIe=et({topk_:function(e,t,r){t===void 0&&(t=1),r===void 0&&(r=!0);var n=Re(e,"x","topk");if(n.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var s=n.shape[n.shape.length-1];if(t>s)throw new Error("'k' passed to topk() must be <= the last dimension ("+s+") but got "+t);var i=ht.runKernelFunc(function(o){return o.topk(n,t,r)},{$x:n});return{values:i[0],indices:i[1]}}}),pIe=et({scatterND_:function(e,t,r){var n=Re(e,"indices","scatterND","int32"),s=Re(t,"updates","scatterND");return j3e(s,n,r),ht.runKernelFunc(function(i){return i.scatterND(n,s,r)},{indices:n,updates:s},null,"ScatterNd",{shape:r})}}),P4=et({fft_:function(e){He(e.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],r=e.size/t,n=e.as2D(r,t);return ht.runKernelFunc(function(s){return s.fft(n)},{input:e}).reshape(e.shape)}}),u2=et({ifft_:function(e){He(e.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."});var t=e.shape[e.shape.length-1],r=e.size/t,n=e.as2D(r,t);return ht.runKernelFunc(function(s){return s.ifft(n)},{input:e}).reshape(e.shape)}}),O4=et({rfft_:function(e,t){He(e.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+e.dtype});var r,n=e.shape[e.shape.length-1],s=e.size/n;if(t!=null&&t<n){var i=e.shape.map(function(y){return 0}),o=e.shape.map(function(y){return y});o[e.shape.length-1]=t,r=e.slice(i,o),n=t}else if(t!=null&&t>n){var l=e.shape.map(function(y){return y});l[e.shape.length-1]=t-n,r=e.concat(Ln(l),e.shape.length-1),n=t}else r=e;var c=r.zerosLike(),d=zi(r,c).as2D(s,n),u=P4(d),h=Math.floor(n/2)+1,m=Uc(u),p=Du(u),v=m.split([h,n-h],m.shape.length-1),g=p.split([h,n-h],p.shape.length-1),b=r.shape.slice();return b[r.shape.length-1]=h,zi(v[0],g[0]).reshape(b)}}),uY=et({irfft_:function(e){var t=e.shape[e.shape.length-1],r=e.size/t;if(t<=2){var n=e.as2D(r,t),s=u2(n);return Uc(s)}var i=[r,2*(t-1)],o=Uc(e).as2D(r,t),l=Du(e).as2D(r,t),c=o.slice([0,1],[r,t-2]).reverse(1),d=l.slice([0,1],[r,t-2]).reverse(1).mul(Nr(-1)),u=o.concat(c,1),h=l.concat(d,1);return n=zi(u,h).as2D(i[0],i[1]),s=u2(n),Uc(s)}}),xIe=Object.freeze({fft:P4,ifft:u2,rfft:O4,irfft:uY}),vIe=et({sparseToDense_:function(e,t,r,n){n===void 0&&(n=0);var s=Re(e,"sparseIndices","sparseToDense","int32"),i=Re(t,"sparseValues","sparseToDense"),o=Re(n,"defaultValue","sparseToDense",i.dtype);return function(l,c,d,u){if(l.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+l.dtype+".");if(l.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+l.shape+".");var h=l.rank>0?l.shape[0]:1,m=l.rank>1?l.shape[1]:1;if(d.length!==m)throw new Error("outputShape has incorrect number of elements:, "+d.length+", should be: "+m+".");var p=c.size;if(c.rank!==0&&(c.rank!==1||p!==h))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+h+"]");if(c.dtype!==u.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(s,i,r,o),ht.runKernelFunc(function(l){return l.sparseToDense(s,i,r,o)},{$sparseIndices:s,$sparseValues:i,$defaultValue:o})}}),gIe=et({gatherND_:function(e,t){var r=Re(t,"indices","gatherND","int32"),n=Re(e,"x","gatherND");return ht.runKernelFunc(function(s){return s.gatherND(n,r)},{x:n,indices:r},null,"GatherNd")}}),bIe=et({diag_:function(e){var t=Re(e,"x","diag").flatten(),r=e.shape.concat(e.shape);return ht.runKernelFunc(function(n){return n.diag(t)},{$x:t}).reshape(r)}}),yIe=et({dropout_:function(e,t,r,n){var s=Re(e,"x","dropout");if(He(s.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+s.dtype+" tensor instead."}),He(t>=0&&t<1,function(){return"rate must be a float in the range [0, 1), but got "+t+"."}),t===0)return e instanceof os?s.clone():s;var i=function(c,d){if(d==null)return c.shape.slice();if(Ei(c.shape,d))return d;if(c.shape.length===d.length){for(var u=[],h=0;h<c.shape.length;h++)d[h]==null&&c.shape[h]!=null?u.push(c.shape[h]):u.push(d[h]);return u}return d}(s,r),o=1-t,l=lG(i,0,1,"float32",n).add(o).floor().div(o);return s.mul(l)}});function hY(e,t,r){for(var n=1-e%2,s=new Float32Array(e),i=0;i<e;++i){var o=2*Math.PI*i/(e+n-1);s[i]=t-r*Math.cos(o)}return ti(s,"float32")}var M4=et({hannWindow_:function(e){return hY(e,.5,.5)}}),fY=et({hammingWindow_:function(e){return hY(e,.54,.46)}}),R4=et({frame_:function(e,t,r,n,s){n===void 0&&(n=!1),s===void 0&&(s=0);for(var i=0,o=[];i+t<=e.size;)o.push(Gu(e,i,t)),i+=r;if(n)for(;i<e.size;){var l=i+t-e.size,c=di([Gu(e,i,t-l),Vu([l],s)]);o.push(c),i+=r}return o.length===0?Im([],[0,t]):di(o).as2D(o.length,t)}}),mY=et({stft_:function(e,t,r,n,s){var i;s===void 0&&(s=M4),n==null&&(i=t,n=Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2)))));for(var o=R4(e,t,r),l=_o(o,s(t)),c=[],d=0;d<o.shape[0];d++)c.push(O4(l.slice([d,0],[1,t]),n));return di(c)}}),jIe=Object.freeze({hannWindow:M4,hammingWindow:fY,frame:R4,stft:mY}),So,NIe=function(e,t,r){return r===void 0&&(r=1),Pr(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h,m,p,v,g,b;return Or(this,function(y){switch(y.label){case 0:return n=Re(e,"predictions","inTopK"),s=Re(t,"targets","inTopK"),He(n.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+n.rank}),He(n.rank-1===s.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+n.rank+" and targets rank "+s.rank}),un(n.shape.slice(0,n.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),i=n.shape[n.shape.length-1],He(r>0&&r<=i,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+i+"), but got "+r}),[4,n.data()];case 1:return o=y.sent(),[4,s.data()];case 2:for(l=y.sent(),c=[o.length/i,i],u=c[1],h=_y("bool",d=c[0]),m=0;m<d;m++){for(p=m*u,v=o.subarray(p,p+u),g=[],b=0;b<v.length;b++)g.push({value:v[b],index:b});for(g.sort(function(C,w){return w.value-C.value}),h[m]=0,b=0;b<r;b++)if(g[b].index===l[m]){h[m]=1;break}}return e!==n&&n.dispose(),t!==s&&s.dispose(),[2,Ki(h,s.shape,"bool")]}})})};(function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(So||(So={}));var wIe=et({absoluteDifference_:function(e,t,r,n){n===void 0&&(n=So.SUM_BY_NONZERO_WEIGHTS);var s=Re(e,"labels","absoluteDifference"),i=Re(t,"predictions","absoluteDifference"),o=null;r!=null&&(o=Re(r,"weights","absoluteDifference")),un(s.shape,i.shape,"Error in absoluteDifference: ");var l=s.sub(i).abs();return Nf(l,o,n)}}),Nf=et({computeWeightedLoss_:function(e,t,r){r===void 0&&(r=So.SUM_BY_NONZERO_WEIGHTS);var n=Re(e,"losses","computeWeightedLoss"),s=null;t!=null&&(s=Re(t,"weights","computeWeightedLoss"));var i=s==null?n:n.mul(s);if(r===So.NONE)return i;if(r===So.SUM)return i.sum();if(r===So.MEAN){if(s==null)return i.mean();var o=n.size/s.size,l=i.sum().div(s.sum());return o>1?l.div(Nr(o)):l}if(r===So.SUM_BY_NONZERO_WEIGHTS){if(s==null)return i.sum().div(Nr(n.size));var c=s.mul(hg(n.shape)).notEqual(Nr(0)).sum().toFloat();return i.sum().div(c)}throw Error("Unknown reduction: "+r)}}),SIe=et({cosineDistance_:function(e,t,r,n,s){s===void 0&&(s=So.SUM_BY_NONZERO_WEIGHTS);var i=Re(e,"labels","cosineDistance"),o=Re(t,"predictions","cosineDistance"),l=null;n!=null&&(l=Re(n,"weights","cosineDistance")),un(i.shape,o.shape,"Error in cosineDistance: ");var c=Nr(1).sub(i.mul(o).sum(r,!0));return Nf(c,l,s)}}),CIe=et({hingeLoss_:function(e,t,r,n){n===void 0&&(n=So.SUM_BY_NONZERO_WEIGHTS);var s=Re(e,"labels","hingeLoss"),i=Re(t,"predictions","hingeLoss"),o=null;r!=null&&(o=Re(r,"weights","hingeLoss")),un(s.shape,i.shape,"Error in hingeLoss: ");var l=Nr(1);s=Nr(2).mul(s).sub(l);var c=l.sub(s.mul(i)).relu();return Nf(c,o,n)}}),kIe=et({huberLoss_:function(e,t,r,n,s){n===void 0&&(n=1),s===void 0&&(s=So.SUM_BY_NONZERO_WEIGHTS);var i=Re(e,"labels","huberLoss"),o=Re(t,"predictions","huberLoss"),l=null;r!=null&&(l=Re(r,"weights","huberLoss")),un(i.shape,o.shape,"Error in huberLoss: ");var c=Nr(n),d=o.sub(i).abs(),u=GG(d,c),h=d.sub(u),m=Nr(.5).mul(u.square()).add(c.mul(h));return Nf(m,l,s)}}),_Ie=et({logLoss_:function(e,t,r,n,s){n===void 0&&(n=1e-7),s===void 0&&(s=So.SUM_BY_NONZERO_WEIGHTS);var i=Re(e,"labels","logLoss"),o=Re(t,"predictions","logLoss"),l=null;r!=null&&(l=Re(r,"weights","logLoss")),un(i.shape,o.shape,"Error in logLoss: ");var c=Nr(1),d=Nr(n),u=i.mul(o.add(d).log()).neg().sub(c.sub(i).mul(c.sub(o).add(d).log()));return Nf(u,l,s)}}),EIe=et({meanSquaredError_:function(e,t,r,n){n===void 0&&(n=So.SUM_BY_NONZERO_WEIGHTS);var s=Re(e,"labels","meanSquaredError"),i=Re(t,"predictions","meanSquaredError"),o=null;r!=null&&(o=Re(r,"weights","meanSquaredError")),un(s.shape,i.shape,"Error in meanSquaredError: ");var l=s.squaredDifference(i);return Nf(l,o,n)}}),DIe=et({sigmoidCrossEntropy_:function(e,t,r,n,s){n===void 0&&(n=0),s===void 0&&(s=So.SUM_BY_NONZERO_WEIGHTS);var i=Re(e,"multiClassLabels","sigmoidCrossEntropy"),o=Re(t,"logits","sigmoidCrossEntropy"),l=null;if(r!=null&&(l=Re(r,"weights","sigmoidCrossEntropy")),un(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),n>0){var c=Nr(n),d=Nr(1),u=Nr(.5);i=i.mul(d.sub(c)).add(u.mul(c))}var h=function(m,p){var v=Re(m,"labels","sigmoidCrossEntropyWithLogits"),g=Re(p,"logits","sigmoidCrossEntropyWithLogits");un(v.shape,g.shape,"Error in sigmoidCrossEntropyWithLogits: ");var b=g.relu(),y=g.mul(v),C=g.abs().neg().exp().log1p();return b.sub(y).add(C)}(i,o);return Nf(h,l,s)}}),AIe=et({softmaxCrossEntropy_:function(e,t,r,n,s){n===void 0&&(n=0),s===void 0&&(s=So.SUM_BY_NONZERO_WEIGHTS);var i=Re(e,"onehotLabels","softmaxCrossEntropy"),o=Re(t,"logits","softmaxCrossEntropy"),l=null;if(r!=null&&(l=Re(r,"weights","softmaxCrossEntropy")),un(i.shape,o.shape,"Error in softmaxCrossEntropy: "),n>0){var c=Nr(n),d=Nr(1),u=Nr(i.shape[1]);i=i.mul(d.sub(c)).add(c.div(u))}var h=function(m,p,v){if(v===void 0&&(v=-1),v===-1&&(v=p.rank-1),v!==p.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+p.rank+" and dim was "+v);return MS(function(g,b,y){var C=b.logSumExp([v],!0),w=b.toFloat().sub(C);return y([g,w]),{value:w.mul(g).neg().sum([v]),gradFunc:function(k,S){var D=S[0],E=S[1],T=xl(k.shape,[v]);return[k.reshape(T).mul(D.toFloat().sub(E.exp())),k.reshape(T).mul(E.exp().sub(D.toFloat()))]}}})(m,p)}(i,o);return Nf(h,l,s)}}),TIe=Object.freeze({get Reduction(){return So},absoluteDifference:wIe,computeWeightedLoss:Nf,cosineDistance:SIe,hingeLoss:CIe,huberLoss:kIe,logLoss:_Ie,meanSquaredError:EIe,sigmoidCrossEntropy:DIe,softmaxCrossEntropy:AIe});function jB(e,t){return t===void 0&&(t=!1),ht.tidy(function(){if(e.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var r=e.shape[0],n=e.shape[1],s=oG(r),i=e.clone(),o=Im([[1]],[1,1]),l=o.clone(),c=r>=n?n:r,d=function(h){var m,p=i,v=l,g=s;m=ht.tidy(function(){var b=i.slice([h,h],[r-h,1]),y=b.norm(),C=i.slice([h,h],[1,1]),w=Im([[-1]]).where(C.greater(0),Im([[1]])),k=C.sub(w.mul(y)),S=b.div(k);l=S.shape[0]===1?o.clone():o.concat(S.slice([1,0],[S.shape[0]-1,S.shape[1]]),0);var D=w.matMul(k).div(y).neg(),E=i.slice([h,0],[r-h,n]),T=D.mul(l);if(h===0)i=E.sub(T.matMul(l.transpose().matMul(E)));else{var A=E.sub(T.matMul(l.transpose().matMul(E)));i=i.slice([0,0],[h,n]).concat(A,0)}var L=s.slice([0,h],[r,s.shape[1]-h]);if(h===0)s=L.sub(L.matMul(l).matMul(T.transpose()));else{var P=L.sub(L.matMul(l).matMul(T.transpose()));s=s.slice([0,0],[r,h]).concat(P,1)}return[l,i,s]}),l=m[0],i=m[1],s=m[2],fl([p,v,g])},u=0;u<c;++u)d(u);return!t&&r>n&&(s=s.slice([0,0],[r,n]),i=i.slice([0,0],[n,n])),[s,i]})}var IIe=et({bandPart_:function(e,t,r){if(t%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+t+".");if(r%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+r+".");var n=Re(e,"a","bandPart");if(n.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+n.rank+".");var s=n.shape,i=n.shape.slice(-2),o=i[0],l=i[1];if(!(t<=o))throw new Error("bandPart(): numLower ("+t+") must not be greater than the number of rows ("+o+").");if(!(r<=l))throw new Error("bandPart(): numUpper ("+r+") must not be greater than the number of columns ("+l+").");t<0&&(t=o),r<0&&(r=l);var c=t2(0,o,1,"int32").reshape([-1,1]),d=t2(0,l,1,"int32"),u=mi(c,d),h=FS(u.lessEqual(Nr(+t,"int32")),u.greaterEqual(Nr(-r,"int32"))),m=Ln([o,l],n.dtype);return rc(ui(n.reshape([-1,o,l])).map(function(p){return Dx(h,p,m)})).reshape(s)}}),PIe=et({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,He(e!=null&&e.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var r=e[0].shape[0],n=function(c){He(e[c].shape[0]===r,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[c].shape[0]+" vs. "+r+")"})},s=1;s<e.length;++s)n(s)}else t=!0,e=g4(e,e.shape[0],0).map(function(c){return dG(c,[0])});He(e.length<=e[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."});var i=[],o=e,l=function(c){i.push(ht.tidy(function(){var d=o[c];if(c>0)for(var u=0;u<c;++u){var h=iY(i[u].mulStrict(d)).mul(i[u]);d=d.sub(h)}return d.div(dY(d,"euclidean"))}))};for(s=0;s<e.length;++s)l(s);return t?rc(i,0):i}}),OIe=et({qr_:function(e,t){if(t===void 0&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(e.rank===2)return jB(e,t);var r=e.shape.slice(0,e.shape.length-2).reduce(function(o,l){return o*l}),n=ui(e.reshape([r,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),s=[],i=[];return n.forEach(function(o){var l=jB(o,t),c=l[0],d=l[1];s.push(c),i.push(d)}),[rc(s,0).reshape(e.shape),rc(i,0).reshape(e.shape)]}}),MIe=Object.freeze({bandPart:IIe,gramSchmidt:PIe,qr:OIe});function $S(e,t,r,n,s,i){n==null&&(n=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);var o=e.shape[0];return r=Math.min(r,o),He(0<=n&&n<=1,function(){return"iouThreshold must be in [0, 1], but was '"+n+"'"}),He(e.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"}),He(e.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]}),He(t.rank===1,function(){return"scores must be a 1D tensor"}),He(t.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]}),He(0<=i&&i<=1,function(){return"softNmsSigma must be in [0, 1], but was '"+i+"'"}),{maxOutputSize:r,iouThreshold:n,scoreThreshold:s,softNmsSigma:i}}var RIe=et({resizeBilinear_:function(e,t,r){r===void 0&&(r=!1);var n=Re(e,"images","resizeBilinear");He(n.rank===3||n.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+n.rank+"."}),He(t.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."});var s=n,i=!1;n.rank===3&&(i=!0,s=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=t[0],l=t[1],c=ht.runKernelFunc(function(d,u){return u([s]),d.resizeBilinear(s,o,l,r)},{x:s},function(d,u){return{x:function(){return ht.runKernelFunc(function(h){return h.resizeBilinearBackprop(d,u[0],r)},{})}}},"ResizeBilinear",{alignCorners:r,newHeight:o,newWidth:l});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),FIe=et({resizeNearestNeighbor_:function(e,t,r){r===void 0&&(r=!1);var n=Re(e,"images","resizeNearestNeighbor");He(n.rank===3||n.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+n.rank+"."}),He(t.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."}),He(n.dtype==="float32"||n.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var s=n,i=!1;n.rank===3&&(i=!0,s=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=t[0],l=t[1],c=ht.runKernelFunc(function(d,u){return u([s]),d.resizeNearestNeighbor(s,o,l,r)},{batchImages:s},function(d,u){return{batchImages:function(){return ht.runKernelFunc(function(h){return h.resizeNearestNeighborBackprop(d,u[0],r)},{})}}});return i?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),LIe=et({nonMaxSuppression_:function(e,t,r,n,s){n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY);var i=Re(e,"boxes","nonMaxSuppression"),o=Re(t,"scores","nonMaxSuppression"),l=$S(i,o,r,n,s);r=l.maxOutputSize,n=l.iouThreshold,s=l.scoreThreshold;var c={maxOutputSize:r,iouThreshold:n,scoreThreshold:s};return ht.runKernelFunc(function(d){return d.nonMaxSuppression(i,o,r,n,s)},{boxes:i,scores:o},null,"NonMaxSuppressionV3",c)}}),BIe=function(e,t,r,n,s){return n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),Pr(this,void 0,void 0,function(){var i,o,l,c,d,u,h;return Or(this,function(m){switch(m.label){case 0:return i=Re(e,"boxes","nonMaxSuppressionAsync"),o=Re(t,"scores","nonMaxSuppressionAsync"),l=$S(i,o,r,n,s),r=l.maxOutputSize,n=l.iouThreshold,s=l.scoreThreshold,[4,Promise.all([i.data(),o.data()])];case 1:return c=m.sent(),d=c[0],u=c[1],h=N4(d,u,r,n,s),i!==e&&i.dispose(),o!==t&&o.dispose(),[2,h]}})})},UIe=et({nonMaxSuppressionWithScore_:function(e,t,r,n,s,i){n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),i===void 0&&(i=0);var o=Re(e,"boxes","nonMaxSuppression"),l=Re(t,"scores","nonMaxSuppression"),c=$S(o,l,r,n,s,i),d={maxOutputSize:r=c.maxOutputSize,iouThreshold:n=c.iouThreshold,scoreThreshold:s=c.scoreThreshold,softNmsSigma:i=c.softNmsSigma},u=ht.runKernel("NonMaxSuppressionV5",{boxes:o,scores:l},d);return{selectedIndices:u[0],selectedScores:u[1]}}}),$Ie=function(e,t,r,n,s,i){return n===void 0&&(n=.5),s===void 0&&(s=Number.NEGATIVE_INFINITY),i===void 0&&(i=0),Pr(this,void 0,void 0,function(){var o,l,c,d,u,h,m;return Or(this,function(p){switch(p.label){case 0:return o=Re(e,"boxes","nonMaxSuppressionAsync"),l=Re(t,"scores","nonMaxSuppressionAsync"),c=$S(o,l,r,n,s,i),r=c.maxOutputSize,n=c.iouThreshold,s=c.scoreThreshold,i=c.softNmsSigma,[4,Promise.all([o.data(),l.data()])];case 1:return d=p.sent(),u=d[0],h=d[1],m=w4(u,h,r,n,s,i),o!==e&&o.dispose(),l!==t&&l.dispose(),[2,m]}})})},VIe=et({cropAndResize_:function(e,t,r,n,s,i){var o=Re(e,"image","cropAndResize"),l=Re(t,"boxes","cropAndResize","float32"),c=Re(r,"boxInd","cropAndResize","int32");s=s||"bilinear",i=i||0;var d=l.shape[0];return He(o.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+o.rank+"."}),He(l.rank===2&&l.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+d+",4] but had shape "+l.shape+"."}),He(c.rank===1&&c.shape[0]===d,function(){return"Error in cropAndResize: boxInd must be have size ["+d+"] but had shape "+l.shape+"."}),He(n.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+n.length+"."}),He(n[0]>=1&&n[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+n}),He(s==="bilinear"||s==="nearest",function(){return"method must be bilinear or nearest, but was "+s}),ht.runKernelFunc(function(u,h){return u.cropAndResize(o,l,c,n,s,i)},{images:o,boxes:l,boxInd:c},null,"CropAndResize",{method:s,extrapolationValue:i,cropSize:n})}}),F4=Object.freeze({resizeBilinear:RIe,resizeNearestNeighbor:FIe,nonMaxSuppression:LIe,nonMaxSuppressionAsync:BIe,nonMaxSuppressionWithScore:UIe,nonMaxSuppressionWithScoreAsync:$Ie,cropAndResize:VIe}),L4=function(e,t){return!(e>0)||t==="linear"},B4=function(e,t,r){if(r==null||r==="linear")return e;if(r==="relu")return e.mul(t.step());throw new Error("Gradient for activation "+r+" has not been implemented yet.")},U4=function(e,t){var r=t,n=fi(e.shape,t.shape);return n.length>0&&(r=r.sum(n)),r.reshape(e.shape)},$4=function(e,t,r){if(t==="linear")return e;if(t==="relu")return us(e);if(t==="elu")return oY(e);if(t==="relu6")return cY(e);if(t==="prelu")return lY(e,r);throw new Error("Unknown fused activation "+t+".")},qIe=et({fusedMatMul_:function(e){var t,r=e.a,n=e.b,s=e.transposeA,i=s!==void 0&&s,o=e.transposeB,l=o!==void 0&&o,c=e.bias,d=e.activation,u=d===void 0?"linear":d,h=e.preluActivationWeights;if(L4(ht.state.gradientDepth,u)===!1){var m=BS(r,n,i,l);return c!=null&&(m=Ta(m,c)),$4(m,u,h)}var p=Re(r,"a","fused matMul"),v=Re(n,"b","fused matMul");t=hs(p,v),p=t[0],v=t[1];var g=i?p.shape[p.rank-2]:p.shape[p.rank-1],b=l?v.shape[v.rank-1]:v.shape[v.rank-2],y=i?p.shape[p.rank-1]:p.shape[p.rank-2],C=l?v.shape[v.rank-2]:v.shape[v.rank-1],w=p.shape.slice(0,-2),k=v.shape.slice(0,-2),S=Fr(w),D=Fr(k);He(p.rank>=2&&v.rank>=2&&p.rank===v.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+p.rank+" and "+v.rank+"."}),He(Ei(w,k),function(){return"Error in fused matMul: outer dimensions ("+w+") and ("+k+") of Tensors with shapes "+p.shape+" and "+v.shape+" must match."}),He(g===b,function(){return"Error in fused matMul: inner shapes ("+g+") and ("+b+") of Tensors with shapes "+p.shape+" and "+v.shape+" and transposeA="+i+" and transposeB="+l+" must match."});var E,T,A=p.shape.slice(0,-2).concat([y,C]),L=i?p.as3D(S,g,y):p.as3D(S,y,g),P=l?v.as3D(D,C,b):v.as3D(D,b,C);c!=null&&Ma(A,(E=hs(E=Re(c,"bias","fused matMul"),p)[0]).shape),h!=null&&(T=Re(h,"prelu weights","fused matMul"));var O={a:L,b:P};c!=null&&(O.bias=E),h!=null&&(O.preluActivationWeights=T);var Z=[L,P];return ht.runKernelFunc(function(z,K){var B=z.fusedBatchMatMul({a:L,b:P,transposeA:i,transposeB:l,bias:E,activation:u,preluActivationWeights:T});return K([L,P,B]),B},O,function(z,K){var B=K[0],Q=K[1],U=K[2],J=B4(z,U,u),Y={};return c!=null&&(Y={bias:function(){return U4(E,J)}}),Object.assign(i||l?!i&&l?{a:function(){return J.matMul(Q,!1,!1)},b:function(){return J.matMul(B,!0,!1)}}:i&&!l?{a:function(){return Q.matMul(J,!1,!0)},b:function(){return B.matMul(J,!1,!1)}}:{a:function(){return Q.matMul(J,!0,!0)},b:function(){return J.matMul(B,!0,!0)}}:{a:function(){return J.matMul(Q,!1,!0)},b:function(){return B.matMul(J,!0,!1)}},Y)},"_FusedMatMul",{transposeA:i,transposeB:l,activation:u},Z,[!0]).reshape(A)}}),zIe=et({fusedConv2d_:function(e){var t=e.x,r=e.filter,n=e.strides,s=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,l=e.dilations,c=l===void 0?[1,1]:l,d=e.dimRoundingMode,u=e.bias,h=e.activation,m=h===void 0?"linear":h,p=e.preluActivationWeights;if(m=m||"linear",L4(ht.state.gradientDepth,m)===!1){var v=Zc(t,r,n,s,o,c,d);return u!=null&&(v=Ta(v,u)),$4(v,m,p)}var g=Re(t,"x","conv2d"),b=Re(r,"filter","conv2d"),y=g,C=!1;g.rank===3&&(C=!0,y=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),He(y.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."}),He(b.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+b.rank+"."}),d!=null&&He(Vs(s),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+d+" but got pad "+s+"."}),He(y.shape[3]===b.shape[2],function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+b.shape[2]+"."}),He(vl(n,c),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+c+"'"}),He(o==="NHWC",function(){return"Error in conv2d: got dataFormat of "+o+" but only NHWC is currently supported."});var w,k,S=Wx(y.shape,b.shape,n,c,s,d);u!=null&&(w=hs(w=Re(u,"bias","fused conv2d"),g)[0],Ma(S.outShape,w.shape)),p!=null&&(k=Re(p,"prelu weights","fused conv2d"));var D={x:y,filter:b};u!=null&&(D.bias=w),p!=null&&(D.preluActivationWeights=k);var E=[b,y],T=ht.runKernelFunc(function(A,L){var P=A.fusedConv2d({input:y,filter:b,convInfo:S,bias:w,activation:m,preluActivationWeights:k});return L([b,y,P]),P},D,function(A,L){var P=L,O=P[0],Z=P[1],z=P[2],K=B4(A,z,m);He(U0(c),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"});var B={};return u!=null&&(B={bias:function(){return U4(w,K)}}),Object.assign({x:function(){return ZG(Z.shape,K,O,n,s)},filter:function(){return T4(Z,K,O.shape,n,s)}},B)},"FusedConv2D",{convInfo:S,activation:m},E,[!0]);return C?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),HIe=et({fusedDepthwiseConv2d_:function(e){var t=e.x,r=e.filter,n=e.strides,s=e.pad,i=e.dataFormat,o=i===void 0?"NHWC":i,l=e.dilations,c=l===void 0?[1,1]:l,d=e.dimRoundingMode,u=e.bias,h=e.activation,m=h===void 0?"linear":h,p=e.preluActivationWeights;if(L4(ht.state.gradientDepth,m)===!1){var v=LS(t,r,n,s,o,c,d);return u!=null&&(v=Ta(v,u)),$4(v,m,p)}var g=Re(t,"x","depthwiseConv2d"),b=Re(r,"filter","depthwiseConv2d"),y=g,C=!1;g.rank===3&&(C=!0,y=g.as4D(1,g.shape[0],g.shape[1],g.shape[2])),He(y.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+y.rank+"."}),He(b.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+b.rank+"."}),He(y.shape[3]===b.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+y.shape[3]+") must match the inChannels dimension in filter "+b.shape[2]+"."}),c==null&&(c=[1,1]),He(vl(n,c),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+c+"'"}),d!=null&&He(Vs(s),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+d+" but got pad "+s+"."});var w,k,S=Wx(y.shape,b.shape,n,c,s,d,!0);u!=null&&(w=hs(w=Re(u,"bias","fused conv2d"),g)[0],Ma(S.outShape,w.shape)),p!=null&&(k=Re(p,"prelu weights","fused depthwiseConv2d"));var D={x:y,filter:b};u!=null&&(D.bias=w),p!=null&&(D.preluActivationWeights=k);var E=[b,y],T=ht.runKernelFunc(function(A,L){var P=A.fusedDepthwiseConv2D({input:y,filter:b,convInfo:S,bias:w,activation:m,preluActivationWeights:k});return L([b,y,P]),P},D,function(A,L){He(U0(c),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"});var P=L[0],O=L[1],Z=L[2],z=B4(A,Z,m),K={};return u!=null&&(K={bias:function(){return U4(w,z)}}),Object.assign({x:function(){return eY(O.shape,z,P,S)},filter:function(){return tY(O,z,P.shape,S)}},K)},"FusedDepthwiseConv2D",{convInfo:S,activation:m},E,[!0]);return C?T.as3D(T.shape[1],T.shape[2],T.shape[3]):T}}),WIe=Object.freeze({matMul:qIe,conv2d:zIe,depthwiseConv2d:HIe}),GIe=Object.freeze({image:F4,linalg:MIe,losses:TIe,spectral:xIe,fused:WIe,signal:jIe,square:_Te,squaredDifference:FG,conv1d:R4e,conv2d:Zc,conv3d:F4e,depthwiseConv2d:LS,separableConv2d:I4,conv2dTranspose:L4e,conv3dTranspose:B4e,op:et,batchNormalization2d:a4e,batchNormalization3d:n4e,batchNormalization4d:s4e,batchNormalization:i4e,batchNorm:qG,batchNorm2d:o4e,batchNorm3d:l4e,batchNorm4d:c4e,booleanMaskAsync:M4e,complex:zi,real:Uc,imag:Du,concat:di,concat1d:W5e,concat2d:G5e,concat3d:Y5e,concat4d:K5e,split:g4,matMul:BS,dot:U4e,outerProduct:$4e,reverse:x1,reverse1d:V4e,reverse2d:q4e,reverse3d:z4e,reverse4d:H4e,maxPool:Ni,avgPool:v1,pool:W4e,maxPool3d:G4e,avgPool3d:Y4e,slice:Gu,slice1d:K4e,slice2d:X4e,slice3d:nY,slice4d:Q4e,abs:ETe,acos:DTe,acosh:ATe,asin:TTe,asinh:ITe,atan:PTe,atanh:OTe,ceil:MTe,clipByValue:E4,cos:RTe,cosh:FTe,erf:LTe,exp:Q5,expm1:BTe,floor:UTe,log:$Te,log1p:VTe,logSigmoid:qTe,neg:c2,reciprocal:zTe,round:HTe,rsqrt:LG,sigmoid:BG,sign:WTe,isNaN:GTe,isInf:YTe,isFinite:KTe,sin:XTe,sinh:QTe,softplus:JTe,sqrt:ZTe,step:e4e,tan:t4e,tanh:r4e,all:J4e,any:Z4e,argMax:eIe,argMin:tIe,logSumExp:rIe,max:US,mean:aIe,min:nIe,moments:sIe,sum:iY,prod:iIe,equal:YG,equalStrict:C4e,greater:k4e,greaterEqual:KG,greaterEqualStrict:_4e,greaterStrict:E4e,less:D4e,lessEqual:A4e,lessEqualStrict:T4e,lessStrict:I4e,notEqual:P4e,notEqualStrict:O4e,add:Ta,addN:h4e,addStrict:f4e,atan2:m4e,div:Cd,divNoNan:p4e,divStrict:x4e,floorDiv:WG,maximum:D4,maximumStrict:v4e,minimum:GG,minimumStrict:g4e,mod:b4e,modStrict:y4e,mul:_o,mulStrict:j4e,pow:d2,powStrict:N4e,squaredDifferenceStrict:w4e,sub:mi,subStrict:S4e,elu:oY,leakyRelu:oIe,prelu:lY,relu:us,relu6:cY,selu:lIe,logicalAnd:FS,logicalNot:d4e,logicalOr:zG,logicalXor:u4e,where:Dx,whereAsync:HG,buffer:fa,print:n3e,batchToSpaceND:iG,broadcastTo:s3e,cast:i3e,clone:o3e,cumsum:l3e,depthToSpace:c3e,expandDims:Lc,eye:oG,multinomial:d3e,oneHot:G5,pad:Hx,pad1d:u3e,pad2d:h3e,pad3d:f3e,pad4d:m3e,rand:p3e,randomNormal:x3e,randomGamma:v3e,randomUniform:lG,reshape:Ad,spaceToBatchND:cG,squeeze:dG,stack:rc,tile:u0,truncatedNormal:g3e,unstack:ui,setdiff1dAsync:b3e,fill:Vu,linspace:H5e,ones:hg,range:t2,scalar:Nr,tensor:Ki,tensor1d:ti,tensor2d:Im,tensor3d:v4,tensor4d:ol,tensor5d:V5e,tensor6d:q5e,variable:z5e,zeros:Ln,onesLike:sG,zerosLike:$a,transpose:qm,softmax:jf,logSoftmax:k3e,localResponseNormalization:cIe,norm:dY,gather:A4,unsortedSegmentSum:XG,basicLSTMCell:dIe,multiRNNCell:uIe,movingAverage:hIe,stridedSlice:fIe,topk:mIe,scatterND:pIe,fft:P4,ifft:u2,rfft:O4,irfft:uY,sparseToDense:vIe,gatherND:gIe,diag:bIe,dropout:yIe,hannWindow:M4,hammingWindow:fY,frame:R4,stft:mY,inTopKAsync:NIe});function nr(e,t){Array.isArray(e)||(e=[e]),e.forEach(function(r){r!=null&&He(r.dtype!=="complex64",function(){return t+" does not support complex64 tensors."})})}function UE(e,t,r,n){if(r==="linear")return e.linear(t);if(r==="relu")return e.relu(t);if(r==="elu")return e.elu(t);if(r==="relu6")return e.relu6(t);if(r==="prelu")return e.prelu(t,n);throw new Error("Activation "+r+" has not been implemented for the CPU backend.")}var YIe=function(e){function t(){var r=e.call(this)||this;return r.blockSize=48,r.firstUse=!0,r.data=new vG(r,ht),r}return Ud(t,e),t.prototype.write=function(r,n,s){this.firstUse&&(this.firstUse=!1,zt().get("IS_NODE")&&Zw(`
============================
Hi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var i={};return this.data.set(i,{values:r,dtype:s}),i},t.prototype.move=function(r,n,s,i){this.data.set(r,{values:n,dtype:i})},t.prototype.numDataIds=function(){return this.data.numDataIds()},t.prototype.read=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(n){return[2,this.readSync(r)]})})},t.prototype.readSync=function(r){var n=this.data.get(r),s=n.dtype,i=n.complexTensors;return s==="complex64"?X5(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(r).values},t.prototype.bufferSync=function(r){var n=this.readSync(r.dataId),s=n;if(r.dtype==="string")try{s=n.map(function(i){return Xw(i)})}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return fa(r.shape,r.dtype,s)},t.prototype.makeOutput=function(r,n,s){var i=this.write(r,n,s);return ht.makeTensorFromDataId(i,n,s,this)},t.prototype.disposeData=function(r){if(this.data.has(r)){var n=this.data.get(r).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.data.delete(r)}},t.prototype.time=function(r){return Pr(this,void 0,void 0,function(){var n;return Or(this,function(s){return n=ku(),r(),[2,{kernelMs:ku()-n}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(r,n){var s=this.makeOutput(null,r.shape,"complex64");return this.data.get(s.dataId).complexTensors={real:ht.keep(r.clone()),imag:ht.keep(n.clone())},s},t.prototype.real=function(r){return this.data.get(r.dataId).complexTensors.real.clone()},t.prototype.imag=function(r){return this.data.get(r.dataId).complexTensors.imag.clone()},t.prototype.slice=function(r,n,s){if(nr(r,"slice"),pG(r.shape,n,s)){var i=xG(n,r.strides),o=Fr(s);return Ki(this.readSync(r.dataId).subarray(i,i+o),s,r.dtype)}for(var l=fa(s,r.dtype),c=this.bufferSync(r),d=0;d<l.size;++d){var u=l.indexToLoc(d).map(function(h,m){return h+n[m]});l.values[d]=c.get.apply(c,u)}return l.toTensor()},t.prototype.stridedSlice=function(r,n,s,i){nr(r,"stridedSlice");var o=y4(n,s,i);if(o.some(function(p){return p===0}))return Ki([],o);for(var l=fa(o,r.dtype),c=this.bufferSync(r),d=0;d<l.size;d++){for(var u=l.indexToLoc(d),h=new Array(u.length),m=0;m<h.length;m++)h[m]=u[m]*i[m]+n[m];l.set.apply(l,[c.get.apply(c,h)].concat(u))}return l.toTensor()},t.prototype.diag=function(r){for(var n=this.readSync(r.dataId),s=fa([r.size,r.size],r.dtype),i=s.values,o=0;o<n.length;o++)i[o*r.size+o]=n[o];return s.toTensor()},t.prototype.unstack=function(r,n){for(var s=r.shape[n],i=new Array(r.rank-1),o=0,l=0;l<r.rank;l++)l!==n&&(i[o++]=r.shape[l]);var c=new Array(r.rank).fill(0),d=r.shape.slice();d[n]=1;var u=new Array(s);for(l=0;l<u.length;l++)c[n]=l,u[l]=this.slice(r,c,d).reshape(i);return u},t.prototype.reverse=function(r,n){nr(r,"reverse");for(var s=fa(r.shape,r.dtype),i=this.bufferSync(r),o=function(c){var d=s.indexToLoc(c),u=d.slice();n.forEach(function(h){return u[h]=r.shape[h]-1-u[h]}),s.set.apply(s,[i.get.apply(i,u)].concat(d))},l=0;l<s.size;l++)o(l);return s.toTensor()},t.prototype.concat=function(r,n){var s=this;if(r[0].dtype==="complex64"){var i=r.map(function(p){return Uc(p)}),o=r.map(function(p){return Du(p)});return zi(this.concat(i,n),this.concat(o,n))}var l=r.map(function(p){var v=Fr(p.shape.slice(n));return p.as2D(-1,v)}),c=B0(l.map(function(p){return p.shape}),1),d=fa(c,r[0].dtype).values;if(l[0].shape[0]===1){var u=0;l.forEach(function(p){d.set(s.readSync(p.dataId),u),u+=p.size})}else{var h=0;l.forEach(function(p){for(var v=s.readSync(p.dataId),g=0,b=0;b<p.shape[0];++b)for(var y=b*c[1]+h,C=0;C<p.shape[1];++C)d[y+C]=v[g++];h+=p.shape[1]})}var m=B0(r.map(function(p){return p.shape}),n);return Ki(d,m,r[0].dtype)},t.prototype.neg=function(r){return nr(r,"neg"),this.multiply(Nr(-1),r)},t.prototype.add=function(r,n){return r.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),n.cast("complex64"),function(s,i,o,l){return{real:s+o,imag:i+l}}):this.broadcastedBinaryOp(r,n,Wi(r.dtype,n.dtype),function(s,i){return s+i})},t.prototype.addN=function(r){var n=this;nr(r,"addN");for(var s=r.map(function(u){return n.readSync(u.dataId)}),i=fa(r[0].shape,r[0].dtype),o=i.values,l=0;l<r.length;l++)for(var c=s[l],d=0;d<o.length;d++)o[d]+=c[d];return i.toTensor()},t.prototype.softmax=function(r,n){var s=xi([n],r.shape),i=this.max(r,s),o=xl(i.shape,s),l=this.subtract(r,i.reshape(o)),c=this.exp(l),d=this.sum(c,s).reshape(o);return this.realDivide(c,d)},t.prototype.subtract=function(r,n){return r.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),n.cast("complex64"),function(s,i,o,l){return{real:s-o,imag:i-l}}):this.broadcastedBinaryOp(r,n,Wi(r.dtype,n.dtype),function(s,i){return s-i})},t.prototype.pow=function(r,n){return nr([r,n],"pow"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.pow(s,i)})},t.prototype.batchMatMul=function(r,n,s,i){nr([r,n],"matMul");for(var o=s?r.shape[1]:r.shape[2],l=s?r.shape[2]:r.shape[1],c=i?n.shape[1]:n.shape[2],d=r.shape[0],u=this.readSync(r.dataId),h=this.readSync(n.dataId),m=s?[r.strides[0],1,r.strides[1]]:[r.strides[0],r.strides[1],1],p=m[0],v=m[1],g=m[2],b=i?[1,n.strides[1],n.strides[0]]:[n.strides[1],1,n.strides[0]],y=b[0],C=b[1],w=b[2],k=l*c,S=fa([d,l,c],r.dtype),D=S.values,E=this.blockSize,T=0;T<d;T++)for(var A=0;A<l;A+=E)for(var L=0;L<c;L+=E)for(var P=0;P<o;P+=E)for(var O=Math.min(A+E,l),Z=Math.min(L+E,c),z=Math.min(P+E,o),K=A;K<O;K++)for(var B=L;B<Z;B++){for(var Q=0,U=P;U<z;U++)Q+=u[T*p+K*v+U*g]*h[U*y+B*C+T*w];D[T*k+(K*c+B)]+=Q}return S.toTensor()},t.prototype.fusedBatchMatMul=function(r){var n=r.a,s=r.b,i=r.transposeA,o=r.transposeB,l=r.bias,c=r.activation,d=r.preluActivationWeights,u=this.batchMatMul(n,s,i,o);return l&&(u=this.add(u,l)),c&&(u=UE(this,u,c,d)),u},t.prototype.multiply=function(r,n){return r.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(r.cast("complex64"),n.cast("complex64"),function(s,i,o,l){return{real:s*o-i*l,imag:s*l+i*o}}):this.broadcastedBinaryOp(r,n,Wi(r.dtype,n.dtype),function(s,i){return s*i})},t.prototype.realDivide=function(r,n){return nr([r,n],"realDivide"),this.broadcastedBinaryOp(r,n,"float32",function(s,i){return s/i})},t.prototype.floorDiv=function(r,n){return nr([r,n],"floorDiv"),this.broadcastedBinaryOp(r,n,"int32",function(s,i){return Math.floor(s/i)})},t.prototype.sum=function(r,n){nr(r,"sum"),Ul("sum",n,r.rank);for(var s=xo(r.shape,n),i=s[0],o=s[1],l=Ln(i,Wi(r.dtype,"int32")),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=0,v=0;v<c;++v)p+=u[m+v];d[h]=p}return l},t.prototype.prod=function(r,n){nr(r,"sum");for(var s=xo(r.shape,n),i=s[0],o=s[1],l=Ln(i,Wi(r.dtype,"int32")),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=1,v=0;v<c;++v)p*=u[m+v];d[h]=p}return l},t.prototype.unsortedSegmentSum=function(r,n,s){nr(r,"unsortedSegmentSum");for(var i=[],o=r.rank-n.rank,l=0;l<o;++l)n=n.expandDims(l+1);for(l=0;l<s;++l){var c=Nr(l,"int32"),d=YG(c,n).asType("float32").mul(r).sum(0);i.push(d)}return rc(i)},t.prototype.argMin=function(r,n){nr(r,"argMin");var s=[n];Ul("argMin",s,r.rank);for(var i=xo(r.shape,s),o=i[0],l=i[1],c=Ln(o,"int32"),d=Fr(l),u=this.readSync(c.dataId),h=this.readSync(r.dataId),m=0;m<u.length;++m){for(var p=m*d,v=h[p],g=0,b=0;b<d;++b){var y=h[p+b];y<v&&(v=y,g=b)}u[m]=g}return c},t.prototype.argMax=function(r,n){nr(r,"argMax");var s=[n];Ul("argMax",s,r.rank);for(var i=xo(r.shape,s),o=i[0],l=i[1],c=Ln(o,"int32"),d=Fr(l),u=this.readSync(c.dataId),h=this.readSync(r.dataId),m=0;m<u.length;++m){for(var p=m*d,v=h[p],g=0,b=0;b<d;++b){var y=h[p+b];y>v&&(v=y,g=b)}u[m]=g}return c},t.prototype.cumsum=function(r,n,s,i){if(nr(r,"cumsum"),n!==r.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(r.rank-1)+" but got axis="+n);for(var o=Wi(r.dtype,"int32"),l=Ln(r.shape,o),c=this.readSync(l.dataId),d=this.readSync(r.dataId),u=r.shape[r.rank-1],h=i?function(b,y){return b+u-y-1}:function(b,y){return b+y},m=0;m<d.length;m+=u)for(var p=0;p<u;p++){var v=h(m,p);if(p===0)c[v]=s?0:d[v];else{var g=h(m,p-1);c[v]=s?d[g]+c[g]:d[v]+c[g]}}return l},t.prototype.equal=function(r,n){return nr([r,n],"equal"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s===i?1:0})},t.prototype.notEqual=function(r,n){return nr([r,n],"notEqual"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s!==i?1:0})},t.prototype.less=function(r,n){return nr([r,n],"less"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s<i?1:0})},t.prototype.lessEqual=function(r,n){return nr([r,n],"lessEqual"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s<=i?1:0})},t.prototype.greater=function(r,n){return nr([r,n],"greater"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s>i?1:0})},t.prototype.greaterEqual=function(r,n){return nr([r,n],"greaterEqual"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s>=i?1:0})},t.prototype.logicalNot=function(r){nr(r,"logicalNot");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)s[i]=n[i]?0:1;return this.makeOutput(s,r.shape,"bool")},t.prototype.logicalAnd=function(r,n){return nr([r,n],"logicalAnd"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s&&i})},t.prototype.logicalOr=function(r,n){return nr([r,n],"logicalOr"),this.broadcastedBinaryOp(r,n,"bool",function(s,i){return s||i})},t.prototype.select=function(r,n,s){nr([r,n,s],"select");for(var i=this.readSync(r.dataId),o=this.readSync(n.dataId),l=this.readSync(s.dataId),c=Ln(n.shape,Wi(n.dtype,s.dtype)),d=this.readSync(c.dataId),u=0,h=r.rank===0||r.rank>1||n.rank===1?1:Fr(n.shape.slice(1)),m=0;m<i.length;m++)for(var p=0;p<h;p++)i[m]===1?d[u++]=o[m]:d[u++]=l[m];return c},t.prototype.where=function(r){nr([r],"where");var n=this.readSync(r.dataId);return S4(r.shape,n)},t.prototype.topk=function(r,n,s){return nr(r,"topk"),CG(this.readSync(r.dataId),r.shape,r.dtype,n)},t.prototype.min=function(r,n){nr(r,"min"),Ul("min",n,r.rank);for(var s=xo(r.shape,n),i=s[0],o=s[1],l=Ln(i,r.dtype),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];g<p&&(p=g)}d[h]=p}return l},t.prototype.minimum=function(r,n){return nr([r,n],"minimum"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.min(s,i)})},t.prototype.mod=function(r,n){return nr([r,n],"mod"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){var o=s%i;return s<0&&i<0||s>=0&&i>=0?o:(o+i)%i})},t.prototype.max=function(r,n){nr(r,"max"),Ul("max",n,r.rank);for(var s=xo(r.shape,n),i=s[0],o=s[1],l=Ln(i,r.dtype),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];g>p&&(p=g)}d[h]=p}return l},t.prototype.maximum=function(r,n){return nr([r,n],"maximum"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.max(s,i)})},t.prototype.all=function(r,n){nr(r,"all"),Ul("all",n,r.rank);for(var s=xo(r.shape,n),i=s[0],o=s[1],l=Ln(i,r.dtype),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];p=p&&g}d[h]=p}return l},t.prototype.any=function(r,n){nr(r,"any"),Ul("any",n,r.rank);for(var s=xo(r.shape,n),i=s[0],o=s[1],l=Ln(i,r.dtype),c=Fr(o),d=this.readSync(l.dataId),u=this.readSync(r.dataId),h=0;h<d.length;++h){for(var m=h*c,p=u[m],v=0;v<c;++v){var g=u[m+v];p=p||g}d[h]=p}return l},t.prototype.squaredDifference=function(r,n){return nr([r,n],"squaredDifference"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){var o=s-i;return o*o})},t.prototype.ceil=function(r){nr(r,"ceil");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.ceil(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.floor=function(r){nr(r,"floor");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.floor(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.sign=function(r){nr(r,"x");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)n[i]<0?s[i]=-1:n[i]>0?s[i]=1:s[i]=0;return this.makeOutput(s,r.shape,"float32")},t.prototype.isNaN=function(r){nr(r,"x");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)Number.isNaN(n[i])&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.isInf=function(r){nr(r,"x");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)Math.abs(n[i])===1/0&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.isFinite=function(r){nr(r,"x");for(var n=this.readSync(r.dataId),s=new Uint8Array(n.length),i=0;i<n.length;++i)Number.isFinite(n[i])&&(s[i]=1);return this.makeOutput(s,r.shape,"bool")},t.prototype.round=function(r){nr(r,"round");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=Math.floor(n[i]);n[i]-o<.5?s[i]=Math.floor(n[i]):n[i]-o>.5?s[i]=Math.ceil(n[i]):s[i]=o%2==0?o:o+1}return this.makeOutput(s,r.shape,"float32")},t.prototype.exp=function(r){nr(r,"exp");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.exp(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.expm1=function(r){nr(r,"expm1");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=Math.expm1(n[i]);return this.makeOutput(s,r.shape,"float32")},t.prototype.log=function(r){nr(r,"log");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=Math.log(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.log1p=function(r){nr(r,"log1p");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=Math.log1p(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.sqrt=function(r){nr(r,"sqrt");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=Math.sqrt(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.rsqrt=function(r){nr(r,"rsqrt");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];s[i]=1/Math.sqrt(o)}return this.makeOutput(s,r.shape,"float32")},t.prototype.reciprocal=function(r){nr(r,"reciprocal");for(var n=this.readSync(r.dataId),s=new Float32Array(n.length),i=0;i<n.length;++i)s[i]=1/n[i];return this.makeOutput(s,r.shape,"float32")},t.prototype.linear=function(r){return r},t.prototype.relu=function(r){nr(r,"relu");for(var n=Ln(r.shape,r.dtype),s=this.readSync(n.dataId),i=this.readSync(r.dataId),o=0;o<i.length;++o)s[o]=Math.max(0,i[o]);return n},t.prototype.relu6=function(r){nr(r,"relu");for(var n=Ln(r.shape,r.dtype),s=this.readSync(n.dataId),i=this.readSync(r.dataId),o=0;o<i.length;++o)s[o]=Math.min(Math.max(0,i[o]),6);return n},t.prototype.prelu=function(r,n){return nr([r,n],"prelu"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return s<0?i*s:s})},t.prototype.elu=function(r){nr(r,"elu");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i){var o=s[i];n[i]=o>=0?o:Math.exp(o)-1}return this.makeOutput(n,r.shape,"float32")},t.prototype.eluDer=function(r,n){nr([r,n],"eluDer");for(var s=new Float32Array(n.size),i=this.readSync(n.dataId),o=this.readSync(r.dataId),l=0;l<i.length;++l){var c=i[l];s[l]=c>=1?o[l]:o[l]*(c+1)}return this.makeOutput(s,n.shape,"float32")},t.prototype.selu=function(r){nr(r,"selu");for(var n=k4,s=_4,i=new Float32Array(r.size),o=this.readSync(r.dataId),l=0;l<o.length;++l){var c=o[l];i[l]=c>=0?s*c:n*(Math.exp(c)-1)}return this.makeOutput(i,r.shape,"float32")},t.prototype.clip=function(r,n,s){nr(r,"clip");for(var i=new Float32Array(r.size),o=this.readSync(r.dataId),l=0;l<o.length;++l){var c=o[l];i[l]=c>s?s:c<n?n:c}return this.makeOutput(i,r.shape,"float32")},t.prototype.abs=function(r){for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.abs(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.complexAbs=function(r){for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<r.size;++i){var o=s[2*i],l=s[2*i+1];n[i]=Math.hypot(o,l)}return this.makeOutput(n,r.shape,"float32")},t.prototype.int=function(r){nr(r,"int");for(var n=new Int32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=s[i];return this.makeOutput(n,r.shape,"int32")},t.prototype.sigmoid=function(r){nr(r,"sigmoid");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=1/(1+Math.exp(-s[i]));return this.makeOutput(n,r.shape,"float32")},t.prototype.softplus=function(r){nr(r,"softplus");for(var n=Math.log(11920928955078125e-23)+2,s=new Float32Array(r.size),i=this.readSync(r.dataId),o=0;o<i.length;++o){var l=i[o]>-n,c=i[o]<n,d=Math.exp(i[o]),u=void 0;u=c?d:l?i[o]:Math.log(1+d),s[o]=u}return this.makeOutput(s,r.shape,"float32")},t.prototype.sin=function(r){nr(r,"sin");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.sin(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.cos=function(r){nr(r,"cos");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.cos(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.tan=function(r){nr(r,"tan");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.tan(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.asin=function(r){nr(r,"asin");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.asin(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.acos=function(r){nr(r,"acos");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.acos(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.atan=function(r){nr(r,"atan");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.atan(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.atan2=function(r,n){return nr([r,n],"atan2"),this.broadcastedBinaryOp(r,n,r.dtype,function(s,i){return Math.atan2(s,i)})},t.prototype.sinh=function(r){nr(r,"sinh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.sinh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.cosh=function(r){nr(r,"cosh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.cosh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.tanh=function(r){nr(r,"tanh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=KDe(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.asinh=function(r){nr(r,"asinh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.asinh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.acosh=function(r){nr(r,"acosh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.acosh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.atanh=function(r){nr(r,"atanh");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i)n[i]=Math.atanh(s[i]);return this.makeOutput(n,r.shape,"float32")},t.prototype.erf=function(r){nr(r,"erf");for(var n=new Float32Array(r.size),s=this.readSync(r.dataId),i=0;i<s.length;++i){var o=Math.sign(s[i]),l=Math.abs(s[i]),c=1/(1+.3275911*l);n[i]=o*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-l*l))}return this.makeOutput(n,r.shape,"float32")},t.prototype.step=function(r,n){n===void 0&&(n=0),nr(r,"step");for(var s=new Float32Array(r.size),i=this.readSync(r.dataId),o=0;o<i.length;++o){var l=i[o];isNaN(l)?s[o]=NaN:s[o]=l>0?1:n}return this.makeOutput(s,r.shape,"float32")},t.prototype.fusedConv2d=function(r){var n=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights,d=this.conv2d(n,s,i);return o&&(d=this.add(d,o)),l&&(d=UE(this,d,l,c)),d},t.prototype.conv2d=function(r,n,s){nr([r,n],"conv2d");for(var i=s.filterHeight,o=s.filterWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.padInfo.left,u=s.padInfo.top,h=s.dataFormat==="channelsLast",m=fa(s.outShape,r.dtype),p=r.strides[0],v=h?r.strides[1]:r.strides[2],g=h?r.strides[2]:1,b=h?1:r.strides[1],y=m.strides[0],C=h?m.strides[1]:m.strides[2],w=h?m.strides[2]:1,k=h?1:m.strides[1],S=this.readSync(r.dataId),D=this.readSync(n.dataId),E=m.values,T=0;T<s.batchSize;++T)for(var A=T*p,L=T*y,P=0;P<s.outHeight;++P)for(var O=L+P*C,Z=P*s.strideHeight-u,z=0;z<i;z++){var K=Z+z*l;if(!(K<0||K>=s.inHeight))for(var B=z*n.strides[0],Q=A+K*v,U=0;U<s.outWidth;++U)for(var J=O+U*w,Y=U*s.strideWidth-d,oe=0;oe<o;oe++){var M=Y+oe*c;if(!(M<0||M>=s.inWidth))for(var V=Q+M*g,H=B+oe*n.strides[1],ee=0;ee<s.inChannels;++ee){for(var re=S[V+ee*b],ae=0;ae<s.outChannels;++ae)E[J+ae*k]+=re*D[H+ae];H+=s.outChannels}}}return m.toTensor()},t.prototype.conv3d=function(r,n,s){for(var i=s.filterDepth,o=s.filterHeight,l=s.filterWidth,c=s.dilationDepth,d=s.dilationHeight,u=s.dilationWidth,h=s.padInfo.front,m=s.padInfo.left,p=s.padInfo.top,v=fa(s.outShape,r.dtype),g=this.readSync(r.dataId),b=this.readSync(n.dataId),y=v.values,C=0;C<s.batchSize;++C)for(var w=C*r.strides[0],k=C*v.strides[0],S=0;S<s.outDepth;++S)for(var D=k+S*v.strides[1],E=S*s.strideDepth-h,T=0;T<i;T++){var A=E+T*c;if(!(A<0||A>=s.inDepth))for(var L=T*n.strides[0],P=w+A*r.strides[1],O=0;O<s.outHeight;++O)for(var Z=D+O*v.strides[2],z=O*s.strideHeight-p,K=0;K<o;K++){var B=z+K*d;if(!(B<0||B>=s.inHeight))for(var Q=L+K*n.strides[1],U=P+B*r.strides[2],J=0;J<s.outWidth;++J)for(var Y=Z+J*s.outChannels,oe=J*s.strideWidth-m,M=0;M<l;M++){var V=oe+M*u;if(!(V<0||V>=s.inWidth))for(var H=Q+M*n.strides[2],ee=U+V*s.inChannels,re=H,ae=0;ae<s.inChannels;++ae){for(var ne=g[ee+ae],ie=0;ie<s.outChannels;++ie)y[Y+ie]+=ne*b[re+ie];re+=s.outChannels}}}}return v.toTensor()},t.prototype.conv2dDerInput=function(r,n,s){nr([r,n],"conv2dDerInput");for(var i=fa(s.inShape,"float32"),o=i.values,l=this.readSync(r.dataId),c=this.readSync(n.dataId),d=n.strides,u=d[0],h=d[1],m=d[2],p=s.batchSize,v=s.filterHeight,g=s.filterWidth,b=s.inChannels,y=s.inHeight,C=s.inWidth,w=s.outChannels,k=s.outHeight,S=s.outWidth,D=s.strideHeight,E=s.strideWidth,T=s.dataFormat,A=v-1-s.padInfo.top,L=g-1-s.padInfo.left,P=T==="channelsLast",O=i.strides[0],Z=P?i.strides[1]:i.strides[2],z=P?i.strides[2]:1,K=P?1:i.strides[1],B=r.strides[0],Q=P?r.strides[1]:r.strides[2],U=P?r.strides[2]:1,J=P?1:r.strides[1],Y=0;Y<p;++Y)for(var oe=0;oe<b;++oe)for(var M=0;M<y;++M)for(var V=M-A,H=Math.max(0,Math.ceil(V/D)),ee=Math.min(k,(v+V)/D),re=0;re<C;++re){for(var ae=re-L,ne=Math.max(0,Math.ceil(ae/E)),ie=Math.min(S,(g+ae)/E),G=0,de=H;de<ee;++de)for(var X=de*D-V,le=ne;le<ie;++le)for(var Se=B*Y+Q*de+U*le,ue=u*(v-1-X)+h*(g-1-(le*E-ae))+m*oe,se=0;se<w;++se)G+=l[Se+J*se]*c[ue+se];o[O*Y+Z*M+z*re+K*oe]=G}return i.toTensor()},t.prototype.conv3dDerInput=function(r,n,s){for(var i=fa(s.inShape,"float32"),o=i.values,l=i.strides,c=l[0],d=l[1],u=l[2],h=l[3],m=this.readSync(r.dataId),p=r.strides,v=p[0],g=p[1],b=p[2],y=p[3],C=this.readSync(n.dataId),w=n.strides,k=w[0],S=w[1],D=w[2],E=w[3],T=s.batchSize,A=s.filterDepth,L=s.filterHeight,P=s.filterWidth,O=s.inChannels,Z=s.inDepth,z=s.inHeight,K=s.inWidth,B=s.outChannels,Q=s.outDepth,U=s.outHeight,J=s.outWidth,Y=s.strideDepth,oe=s.strideHeight,M=s.strideWidth,V=A-1-s.padInfo.front,H=L-1-s.padInfo.top,ee=P-1-s.padInfo.left,re=0;re<T;++re)for(var ae=0;ae<O;++ae)for(var ne=0;ne<Z;++ne)for(var ie=ne-V,G=Math.max(0,Math.ceil(ie/Y)),de=Math.min(Q,(A+ie)/Y),X=0;X<z;++X)for(var le=X-H,Se=Math.max(0,Math.ceil(le/oe)),ue=Math.min(U,(L+le)/oe),se=0;se<K;++se){for(var ye=se-ee,Ne=Math.max(0,Math.ceil(ye/M)),Ue=Math.min(J,(P+ye)/M),Qe=0,ot=G;ot<de;++ot)for(var xt=ot*Y-ie,Le=Se;Le<ue;++Le)for(var dt=Le*oe-le,Tt=Ne;Tt<Ue;++Tt)for(var At=v*re+g*ot+b*Le+y*Tt,Vt=k*(A-1-xt)+S*(L-1-dt)+D*(P-1-(Tt*M-ye))+E*ae,xe=0;xe<B;++xe)Qe+=m[At+xe]*C[Vt+xe];o[c*re+d*ne+u*X+h*se+ae]=Qe}return i.toTensor()},t.prototype.conv2dDerFilter=function(r,n,s){nr([r,n],"conv2dDerFilter");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=s.dataFormat==="channelsLast",u=fa(s.filterShape,"float32"),h=s.padInfo.left,m=s.padInfo.top,p=this.bufferSync(r),v=this.bufferSync(n),g=0;g<l;++g)for(var b=Math.max(0,Math.ceil((m-g)/i)),y=Math.min(s.outHeight,(s.inHeight+m-g)/i),C=0;C<c;++C)for(var w=Math.max(0,Math.ceil((h-C)/o)),k=Math.min(s.outWidth,(s.inWidth+h-C)/o),S=0;S<s.inChannels;++S)for(var D=0;D<s.outChannels;++D){for(var E=0,T=0;T<s.batchSize;++T)for(var A=b;A<y;++A)for(var L=g+A*i-m,P=w;P<k;++P){var O=C+P*o-h;E+=d?p.get(T,L,O,S)*v.get(T,A,P,D):p.get(T,S,L,O)*v.get(T,D,A,P)}u.set(E,g,C,S,D)}return u.toTensor()},t.prototype.conv3dDerFilter=function(r,n,s){for(var i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.filterDepth,d=s.filterHeight,u=s.filterWidth,h=fa(s.filterShape,"float32"),m=h.values,p=h.strides,v=p[0],g=p[1],b=p[2],y=p[3],C=this.readSync(n.dataId),w=n.strides,k=w[0],S=w[1],D=w[2],E=w[3],T=this.readSync(r.dataId),A=r.strides,L=A[0],P=A[1],O=A[2],Z=A[3],z=s.padInfo.front,K=s.padInfo.left,B=s.padInfo.top,Q=0;Q<c;++Q)for(var U=Math.max(0,Math.ceil((z-Q)/i)),J=Math.min(s.outDepth,(s.inDepth+z-Q)/i),Y=Q*v,oe=0;oe<d;++oe)for(var M=Math.max(0,Math.ceil((B-oe)/o)),V=Math.min(s.outHeight,(s.inHeight+B-oe)/o),H=oe*g+Y,ee=0;ee<u;++ee)for(var re=Math.max(0,Math.ceil((K-ee)/l)),ae=Math.min(s.outWidth,(s.inWidth+K-ee)/l),ne=ee*b+H,ie=0;ie<s.inChannels;++ie)for(var G=ie*y+ne,de=0;de<s.outChannels;++de){for(var X=0,le=0;le<s.batchSize;++le)for(var Se=le*L,ue=le*k,se=U;se<J;++se)for(var ye=(Q+se*i-z)*P+Se,Ne=se*S+ue,Ue=M;Ue<V;++Ue)for(var Qe=(oe+Ue*o-B)*O+ye,ot=Ue*D+Ne,xt=re;xt<ae;++xt){var Le=xt*E+ot;X+=T[(ee+xt*l-K)*Z+Qe+ie]*C[Le+de]}m[G+de]=X}return h.toTensor()},t.prototype.fusedDepthwiseConv2D=function(r){var n=r.input,s=r.filter,i=r.convInfo,o=r.bias,l=r.activation,c=r.preluActivationWeights,d=this.depthwiseConv2D(n,s,i);return o&&(d=this.add(d,o)),l&&(d=UE(this,d,l,c)),d},t.prototype.depthwiseConv2D=function(r,n,s){nr([r,n],"depthwiseConv2D");for(var i=s.filterHeight,o=s.filterWidth,l=s.dilationHeight,c=s.dilationWidth,d=s.padInfo.left,u=s.padInfo.top,h=s.outChannels/s.inChannels,m=fa(s.outShape,r.dtype),p=this.readSync(r.dataId),v=this.readSync(n.dataId),g=m.values,b=0;b<s.batchSize;++b)for(var y=b*r.strides[0],C=b*m.strides[0],w=0;w<s.outHeight;++w)for(var k=C+w*m.strides[1],S=w*s.strideHeight-d,D=0;D<i;++D){var E=S+D*l;if(!(E<0||E>=s.inHeight))for(var T=D*n.strides[0],A=y+E*r.strides[1],L=0;L<s.outWidth;++L)for(var P=k+L*m.strides[2],O=L*s.strideWidth-u,Z=0;Z<o;++Z){var z=O+Z*c;if(!(z<0||z>=s.inWidth))for(var K=T+Z*n.strides[1],B=A+z*s.inChannels,Q=P,U=K,J=0;J<s.inChannels;++J){for(var Y=p[B+J],oe=0;oe<h;++oe)g[Q+oe]+=Y*v[U+oe];Q+=h,U+=h}}}return m.toTensor()},t.prototype.depthwiseConv2DDerInput=function(r,n,s){nr([r,n],"depthwiseConv2DDerInput");for(var i=fa(s.inShape,"float32"),o=i.values,l=i.strides,c=l[0],d=l[1],u=l[2],h=this.readSync(r.dataId),m=r.strides,p=m[0],v=m[1],g=m[2],b=this.readSync(n.dataId),y=n.strides,C=y[0],w=y[1],k=y[2],S=s.batchSize,D=s.filterHeight,E=s.filterWidth,T=s.inChannels,A=s.inHeight,L=s.inWidth,P=s.outChannels,O=s.outHeight,Z=s.outWidth,z=s.strideHeight,K=s.strideWidth,B=D-1-s.padInfo.top,Q=E-1-s.padInfo.left,U=P/T,J=0;J<S;++J)for(var Y=0;Y<T;++Y)for(var oe=0;oe<A;++oe)for(var M=oe-B,V=Math.max(0,Math.ceil(M/z)),H=Math.min(O,(D+M)/z),ee=0;ee<L;++ee){for(var re=ee-Q,ae=Math.max(0,Math.ceil(re/K)),ne=Math.min(Z,(E+re)/K),ie=0,G=V;G<H;++G)for(var de=G*z-M,X=ae;X<ne;++X)for(var le=p*J+v*G+g*X,Se=C*(D-1-de)+w*(E-1-(X*K-re))+k*Y,ue=0;ue<U;++ue)ie+=h[le+(Y*U+ue)]*b[Se+ue];o[c*J+d*oe+u*ee+Y]=ie}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(r,n,s){nr([r,n],"depthwiseConv2DDerFilter");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=fa(s.filterShape,"float32"),u=s.padInfo.left,h=s.padInfo.top,m=s.outChannels/s.inChannels,p=this.bufferSync(r),v=this.bufferSync(n),g=0;g<l;++g)for(var b=Math.max(0,Math.ceil((h-g)/i)),y=Math.min(s.outHeight,(s.inHeight+h-g)/i),C=0;C<c;++C)for(var w=Math.max(0,Math.ceil((u-C)/o)),k=Math.min(s.outWidth,(s.inWidth+u-C)/o),S=0;S<s.outChannels;++S){for(var D=Math.trunc(S/m),E=S%m,T=0,A=0;A<s.batchSize;++A)for(var L=b;L<y;++L)for(var P=g+L*i-h,O=w;O<k;++O){var Z=C+O*o-u;T+=p.get(A,P,Z,D)*v.get(A,L,O,S)}d.set(T,g,C,D,E)}return d.toTensor()},t.prototype.tile=function(r,n){return nr(r,"tile"),SG(this.bufferSync(r),n)},t.prototype.pad=function(r,n,s){nr(r,"pad");var i=n.map(function(m,p){return m[0]+r.shape[p]+m[1]}),o=n.map(function(m){return m[0]}),l=this.bufferSync(r),c=fa(i,r.dtype);s!==0&&c.values.fill(s);for(var d=0;d<r.size;d++){var u=l.indexToLoc(d),h=u.map(function(m,p){return m+o[p]});c.set.apply(c,[l.get.apply(l,u)].concat(h))}return c.toTensor()},t.prototype.transpose=function(r,n){nr(r,"transpose");for(var s=new Array(r.rank),i=0;i<s.length;i++)s[i]=r.shape[n[i]];var o=this.readSync(r.dataId),l=fa(s,r.dtype),c=this.bufferSync(r);for(i=0;i<r.size;++i){for(var d=c.indexToLoc(i),u=new Array(d.length),h=0;h<u.length;h++)u[h]=d[n[h]];var m=l.locToIndex(u);l.values[m]=o[i]}return l.toTensor()},t.prototype.gather=function(r,n,s){nr([r,n],"gather");var i=r.shape.slice(),o=this.readSync(n.dataId);i[s]=o.length;for(var l=fa(i,r.dtype),c=this.bufferSync(r),d=0;d<l.size;++d){var u=l.indexToLoc(d),h=u.slice();h[s]=o[u[s]];var m=c.locToIndex(h);l.values[d]=c.values[m]}return l.toTensor()},t.prototype.batchToSpaceND=function(r,n,s){nr([r],"batchToSpaceND");var i=n.reduce(function(h,m){return h*m}),o=r2(r.shape,n,i),l=a2(o.length,n.length),c=n2(r.shape,n,i),d=uG(s,n.length),u=hG(c,s,n.length);return r.reshape(o).transpose(l).reshape(c).slice(d,u)},t.prototype.spaceToBatchND=function(r,n,s){nr([r],"spaceToBatchND");var i=n.reduce(function(m,p){return m*p}),o=[[0,0]];o.push.apply(o,s);for(var l=1+n.length;l<r.shape.length;++l)o.push([0,0]);var c=r.pad(o),d=r2(c.shape,n,i,!1),u=a2(d.length,n.length,!1),h=n2(c.shape,n,i,!1);return c.reshape(d).transpose(u).reshape(h)},t.prototype.pool=function(r,n,s){nr(r,"pool");for(var i=n.strideHeight,o=n.strideWidth,l=n.dilationHeight,c=n.dilationWidth,d=n.effectiveFilterHeight,u=n.effectiveFilterWidth,h=n.padInfo.top,m=n.padInfo.left,p=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=this.readSync(r.dataId),g=fa(n.outShape,r.dtype),b=g.values,y=n.outShape[1]*n.outShape[2]*n.outShape[3],C=n.outShape[2]*n.outShape[3],w=n.outShape[3],k=0;k<n.batchSize;++k)for(var S=k*y,D=k*r.strides[0],E=0;E<n.inChannels;++E)for(var T=0;T<n.outHeight;++T)for(var A=T*i-h,L=Math.max(0,A),P=Math.min(n.inHeight,d+A),O=S+T*C,Z=0;Z<n.outWidth;++Z){for(var z=Z*o-m,K=Math.max(0,z),B=Math.min(n.inWidth,u+z),Q=p,U=0,J=0,Y=L;Y<P;Y+=l){for(var oe=D+Y*r.strides[1],M=K;M<B;M+=c){var V=v[oe+M*r.strides[2]+E];s==="max"&&V>Q?Q=V:s==="avg"&&(U+=V,J++)}if(isNaN(Q))break}b[O+Z*w+E]=s==="avg"?U/J:Q}return g.toTensor()},t.prototype.maxPool=function(r,n){return this.pool(r,n,"max")},t.prototype.maxPoolPositions=function(r,n){for(var s=fa(n.outShape,"int32"),i=n.strideHeight,o=n.strideWidth,l=n.dilationHeight,c=n.dilationWidth,d=n.effectiveFilterHeight,u=n.effectiveFilterWidth,h=n.padInfo.top,m=n.padInfo.left,p=this.bufferSync(r),v=0;v<n.batchSize;++v)for(var g=0;g<n.inChannels;++g)for(var b=0;b<n.outHeight;++b){for(var y=b*i-h,C=y;C<0;)C+=l;for(var w=Math.min(n.inHeight,d+y),k=0;k<n.outWidth;++k){for(var S=k*o-m,D=S;D<0;)D+=c;for(var E=Math.min(n.inWidth,u+S),T=Number.NEGATIVE_INFINITY,A=-1,L=C;L<w;L+=l)for(var P=L-y,O=D;O<E;O+=c){var Z=O-S,z=p.get(v,L,O,g);z>T&&(T=z,A=P*u+Z)}s.set(A,v,b,k,g)}}return s.toTensor()},t.prototype.maxPoolBackprop=function(r,n,s,i){nr([n,s],"maxPoolBackprop");for(var o=this.maxPoolPositions(n,i),l=i.strideHeight,c=i.strideWidth,d=i.dilationHeight,u=i.dilationWidth,h=i.effectiveFilterHeight,m=i.effectiveFilterWidth,p=m-1-i.padInfo.left,v=h-1-i.padInfo.top,g=fa(n.shape,"float32"),b=this.bufferSync(o),y=this.bufferSync(r),C=0;C<i.batchSize;++C)for(var w=0;w<i.inChannels;++w)for(var k=0;k<i.inHeight;++k)for(var S=0;S<i.inWidth;++S){for(var D=k-v,E=S-p,T=0,A=0;A<h;A+=d){var L=(D+A)/l;if(!(L<0||L>=i.outHeight||Math.floor(L)!==L))for(var P=0;P<m;P+=u){var O=(E+P)/c;if(!(O<0||O>=i.outWidth||Math.floor(O)!==O)){var Z=h*m-1-b.get(C,L,O,w)===A*m+P?1:0;Z!==0&&(T+=y.get(C,L,O,w)*Z)}}}g.set(T,C,k,S,w)}return g.toTensor()},t.prototype.avgPoolBackprop=function(r,n,s){nr([r,n],"avgPoolBackprop");for(var i=s.strideHeight,o=s.strideWidth,l=s.filterHeight,c=s.filterWidth,d=s.dilationHeight,u=s.dilationWidth,h=s.effectiveFilterHeight,m=s.effectiveFilterWidth,p=m-1-s.padInfo.left,v=h-1-s.padInfo.top,g=fa(n.shape,"float32"),b=1/(l*c),y=this.bufferSync(r),C=0;C<s.batchSize;++C)for(var w=0;w<s.inChannels;++w)for(var k=0;k<s.inHeight;++k)for(var S=0;S<s.inWidth;++S){for(var D=k-v,E=S-p,T=0,A=0;A<h;A+=d){var L=(D+A)/i;if(!(L<0||L>=s.outHeight||Math.floor(L)!==L))for(var P=0;P<m;P+=u){var O=(E+P)/o;O<0||O>=s.outWidth||Math.floor(O)!==O||(T+=y.get(C,L,O,w))}}g.set(T*b,C,k,S,w)}return g.toTensor()},t.prototype.pool3d=function(r,n,s){nr(r,"pool3d");for(var i=n.strideDepth,o=n.strideHeight,l=n.strideWidth,c=n.dilationDepth,d=n.dilationHeight,u=n.dilationWidth,h=n.effectiveFilterDepth,m=n.effectiveFilterHeight,p=n.effectiveFilterWidth,v=n.padInfo.front,g=n.padInfo.top,b=n.padInfo.left,y=s==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,C=this.readSync(r.dataId),w=fa(n.outShape,r.dtype),k=w.values,S=n.outShape[1]*n.outShape[2]*n.outShape[3]*n.outShape[4],D=n.outShape[2]*n.outShape[3]*n.outShape[4],E=n.outShape[3]*n.outShape[4],T=n.outShape[4],A=0;A<n.batchSize;++A)for(var L=A*S,P=A*r.strides[0],O=0;O<n.inChannels;++O)for(var Z=0;Z<n.outDepth;++Z){for(var z=Z*i-v,K=z;K<0;)K+=c;for(var B=Math.min(n.inDepth,h+z),Q=L+Z*D,U=0;U<n.outHeight;++U){for(var J=U*o-g,Y=J;Y<0;)Y+=d;for(var oe=Math.min(n.inHeight,m+J),M=Q+U*E,V=0;V<n.outWidth;++V){for(var H=V*l-b,ee=H;ee<0;)ee+=u;for(var re=Math.min(n.inWidth,p+H),ae=M+V*T,ne=y,ie=0,G=0,de=K;de<B;de+=c){for(var X=P+de*r.strides[1],le=Y;le<oe;le+=d){for(var Se=X+le*r.strides[2],ue=ee;ue<re;ue+=u){var se=C[Se+ue*r.strides[3]+O];if(s==="max"&&se>ne?ne=se:s==="avg"&&(ie+=se,G++),isNaN(ne))break}if(isNaN(ne))break}if(isNaN(ne))break}k[ae+O]=s==="avg"?ie/G:ne}}}return w.toTensor()},t.prototype.avgPool3d=function(r,n){return nr(r,"avgPool3d"),this.pool3d(r,n,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(r,n,s){nr([r,n],"avgPool3dBackprop");for(var i=s.strideDepth,o=s.strideHeight,l=s.strideWidth,c=s.filterDepth,d=s.filterHeight,u=s.filterWidth,h=s.dilationDepth,m=s.dilationHeight,p=s.dilationWidth,v=s.effectiveFilterDepth,g=s.effectiveFilterHeight,b=s.effectiveFilterWidth,y=v-1-s.padInfo.front,C=b-1-s.padInfo.left,w=g-1-s.padInfo.top,k=fa(n.shape,"float32"),S=1/(c*d*u),D=this.bufferSync(r),E=0;E<s.batchSize;++E)for(var T=0;T<s.inChannels;++T)for(var A=0;A<s.inDepth;++A)for(var L=0;L<s.inHeight;++L)for(var P=0;P<s.inWidth;++P){for(var O=A-y,Z=L-w,z=P-C,K=0,B=0;B<v;B+=h){var Q=(O+B)/i;if(!(Q<0||Q>=s.outDepth||Math.floor(Q)!==Q))for(var U=0;U<g;U+=m){var J=(Z+U)/o;if(!(J<0||J>=s.outHeight||Math.floor(J)!==J))for(var Y=0;Y<b;Y+=p){var oe=(z+Y)/l;oe<0||oe>=s.outWidth||Math.floor(oe)!==oe||(K+=D.get(E,Q,J,oe,T))}}}k.set(K*S,E,A,L,P,T)}return k.toTensor()},t.prototype.maxPool3d=function(r,n){return nr(r,"maxPool3d"),this.pool3d(r,n,"max").toFloat()},t.prototype.maxPool3dPositions=function(r,n){for(var s=fa(n.outShape,"int32"),i=n.strideDepth,o=n.strideHeight,l=n.strideWidth,c=n.dilationDepth,d=n.dilationHeight,u=n.dilationWidth,h=n.effectiveFilterDepth,m=n.effectiveFilterHeight,p=n.effectiveFilterWidth,v=n.padInfo.front,g=n.padInfo.top,b=n.padInfo.left,y=this.bufferSync(r),C=0;C<n.batchSize;++C)for(var w=0;w<n.inChannels;++w)for(var k=0;k<n.outDepth;++k){for(var S=k*i-v,D=S;D<0;)D+=c;for(var E=Math.min(n.inDepth,h+S),T=0;T<n.outHeight;++T){for(var A=T*o-g,L=A;L<0;)L+=d;for(var P=Math.min(n.inHeight,m+A),O=0;O<n.outWidth;++O){for(var Z=O*l-b,z=Z;z<0;)z+=u;for(var K=Math.min(n.inWidth,p+Z),B=Number.NEGATIVE_INFINITY,Q=-1,U=D;U<E;U+=c)for(var J=U-S,Y=L;Y<P;Y+=d)for(var oe=Y-A,M=z;M<K;M+=u){var V=M-Z,H=y.get(C,U,Y,M,w);H>=B&&(B=H,Q=J*m*p+oe*m+V)}s.set(Q,C,k,T,O,w)}}}return s.toTensor()},t.prototype.maxPool3dBackprop=function(r,n,s,i){nr([n,s],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(n,i),l=i.strideDepth,c=i.strideHeight,d=i.strideWidth,u=i.dilationDepth,h=i.dilationHeight,m=i.dilationWidth,p=i.effectiveFilterDepth,v=i.effectiveFilterHeight,g=i.effectiveFilterWidth,b=p-1-i.padInfo.front,y=g-1-i.padInfo.left,C=v-1-i.padInfo.top,w=fa(n.shape,"float32"),k=this.bufferSync(o),S=this.bufferSync(r),D=0;D<i.batchSize;++D)for(var E=0;E<i.inChannels;++E)for(var T=0;T<i.inDepth;++T)for(var A=0;A<i.inHeight;++A)for(var L=0;L<i.inWidth;++L){for(var P=T-b,O=A-C,Z=L-y,z=0,K=0;K<p;K+=u){var B=(P+K)/l;if(!(B<0||B>=i.outDepth||Math.floor(B)!==B))for(var Q=0;Q<v;Q+=h){var U=(O+Q)/c;if(!(U<0||U>=i.outHeight||Math.floor(U)!==U))for(var J=0;J<g;J+=m){var Y=(Z+J)/d;if(!(Y<0||Y>=i.outWidth||Math.floor(Y)!==Y)){var oe=p*v*g-1-k.get(D,B,U,Y,E)===K*v*g+Q*g+J?1:0;oe!==0&&(z+=S.get(D,B,U,Y,E)*oe)}}}}w.set(z,D,T,A,L,E)}return w.toTensor()},t.prototype.cast=function(r,n){return yG(r,n,this)},t.prototype.reshape=function(r,n){return K5(r,n)},t.prototype.avgPool=function(r,n){return nr(r,"avgPool"),this.pool(r,n,"avg").toFloat()},t.prototype.resizeBilinear=function(r,n,s,i){nr(r,"resizeBilinear");for(var o=r.shape,l=o[0],c=o[1],d=o[2],u=o[3],h=this.readSync(r.dataId),m=new Float32Array(Fr([l,n,s,u])),p=[i&&n>1?c-1:c,i&&s>1?d-1:d],v=[i&&n>1?n-1:n,i&&s>1?s-1:s],g=0,b=p[0]/v[0],y=p[1]/v[1],C=0;C<l;C++)for(var w=0;w<n;w++)for(var k=b*w,S=Math.floor(k),D=k-S,E=Math.min(c-1,Math.ceil(k)),T=C*r.strides[0]+S*r.strides[1],A=C*r.strides[0]+E*r.strides[1],L=0;L<s;L++)for(var P=y*L,O=Math.floor(P),Z=P-O,z=Math.min(d-1,Math.ceil(P)),K=T+O*r.strides[2],B=A+O*r.strides[2],Q=T+z*r.strides[2],U=A+z*r.strides[2],J=0;J<u;J++){var Y=h[K+J],oe=h[B+J],M=Y+(h[Q+J]-Y)*Z,V=M+(oe+(h[U+J]-oe)*Z-M)*D;m[g++]=V}return Ki(m,[l,n,s,u])},t.prototype.resizeBilinearBackprop=function(r,n,s){nr([r,n],"resizeBilinearBackprop");for(var i=n.shape,o=i[0],l=i[1],c=i[2],d=i[3],u=r.shape,h=u[1],m=u[2],p=new Float32Array(o*l*c*d),v=[s&&h>1?l-1:l,s&&m>1?c-1:c],g=[s&&h>1?h-1:h,s&&m>1?m-1:m],b=v[0]/g[0],y=v[1]/g[1],C=this.readSync(r.dataId),w=0,k=0;k<o;k++)for(var S=k*n.strides[0],D=0;D<h;D++)for(var E=D*b,T=Math.floor(E),A=Math.min(Math.ceil(E),l-1),L=S+T*n.strides[1],P=S+A*n.strides[1],O=E-T,Z=1-O,z=0;z<m;z++)for(var K=z*y,B=Math.floor(K),Q=Math.min(Math.ceil(K),c-1),U=K-B,J=1-U,Y=L+B*n.strides[2],oe=L+Q*n.strides[2],M=P+B*n.strides[2],V=P+Q*n.strides[2],H=Z*J,ee=Z*U,re=O*J,ae=O*U,ne=0;ne<d;ne++){var ie=C[w++];p[Y+ne]+=ie*H,p[oe+ne]+=ie*ee,p[M+ne]+=ie*re,p[V+ne]+=ie*ae}return ol(p,[o,c,l,d],n.dtype)},t.prototype.resizeNearestNeighbor=function(r,n,s,i){nr(r,"resizeNearestNeighbor");for(var o=r.shape,l=o[0],c=o[1],d=o[2],u=o[3],h=this.readSync(r.dataId),m=new Float32Array(l*n*s*u),p=[i&&n>1?c-1:c,i&&s>1?d-1:d],v=[i&&n>1?n-1:n,i&&s>1?s-1:s],g=p[0]/v[0],b=p[1]/v[1],y=0,C=0;C<l;C++)for(var w=C*r.strides[0],k=0;k<n;k++)for(var S=g*k,D=w+Math.min(c-1,i?Math.round(S):Math.floor(S))*r.strides[1],E=0;E<s;E++)for(var T=b*E,A=D+Math.min(d-1,i?Math.round(T):Math.floor(T))*r.strides[2],L=0;L<u;L++){var P=h[A+L];m[y++]=P}return Ki(m,[l,n,s,u],r.dtype)},t.prototype.resizeNearestNeighborBackprop=function(r,n,s){nr([r,n],"resizeNearestNeighborBackprop");for(var i=n.shape,o=i[0],l=i[1],c=i[2],d=i[3],u=r.shape,h=u[1],m=u[2],p=new Float32Array(o*l*c*d),v=this.readSync(r.dataId),g=[s&&h>1?l-1:l,s&&m>1?c-1:c],b=[s&&h>1?h-1:h,s&&m>1?m-1:m],y=g[0]/b[0],C=g[1]/b[1],w=1/y,k=1/C,S=2*Math.ceil(w)+2,D=2*Math.ceil(k)+2,E=0;E<o;E++)for(var T=E*n.strides[0],A=0;A<l;A++)for(var L=T+A*n.strides[1],P=Math.floor(A*w),O=Math.floor(P-S/2),Z=0;Z<c;Z++)for(var z=L+Z*n.strides[2],K=Math.floor(Z*k),B=Math.floor(K-D/2),Q=0;Q<d;Q++){for(var U=0,J=0;J<S;J++){var Y=J+O;if(!(Y<0||Y>=h)){var oe=T+Y*r.strides[1],M=Y*y;if(A===Math.min(l-1,s?Math.round(M):Math.floor(M)))for(var V=0;V<D;V++){var H=V+B;if(!(H<0||H>=m)){var ee=oe+H*r.strides[2],re=H*C;Z===Math.min(c-1,s?Math.round(re):Math.floor(re))&&(U+=v[ee+Q])}}}}p[z+Q]=U}return ol(p,n.shape,n.dtype)},t.prototype.batchNormalization=function(r,n,s,i,o,l){nr([r,n,s,o,l],"batchNorm");for(var c=this.readSync(r.dataId),d=this.readSync(n.dataId),u=this.readSync(s.dataId),h=o?this.readSync(o.dataId):new Float32Array([1]),m=l?this.readSync(l.dataId):new Float32Array([0]),p=new Float32Array(c.length),v=m.length,g=h.length,b=u.length,y=d.length,C=0,w=0,k=0,S=0,D=0;D<c.length;++D)p[D]=m[C++]+(c[D]-d[w++])*h[k++]/Math.sqrt(u[S++]+i),C>=v&&(C=0),w>=y&&(w=0),k>=g&&(k=0),S>=b&&(S=0);return ol(p,r.shape)},t.prototype.localResponseNormalization4D=function(r,n,s,i,o){nr(r,"localResponseNormalization4D");var l=r.shape[3],c=l-1,d=this.readSync(r.dataId),u=r.size,h=new Float32Array(u);function m(b){for(var y=b%l,C=b-y+Math.max(0,y-n),w=b-y+Math.min(y+n,c),k=0;C<=w;C++){var S=d[C];k+=S*S}return k}for(var p=0;p<u;p++){var v=m(p),g=d[p]*Math.pow(s+i*v,-o);h[p]=g}return ol(h,r.shape)},t.prototype.LRNGrad=function(r,n,s,i,o,l,c){nr(r,"LRNGrad");for(var d=r.shape[3],u=this.readSync(r.dataId),h=this.readSync(n.dataId),m=this.readSync(s.dataId),p=new Float32Array(r.size),v=r.size,g=0;g<v;g++){for(var b=g%d,y=g-b+Math.max(0,b-i),C=g-b+Math.min(d,b+i+1),w=0,k=y;k<C;k++)w+=Math.pow(h[k],2);for(w=l*w+o,k=y;k<C;k++){var S=-2*l*c*h[k]*m[g]/w;g===k&&(S+=Math.pow(w,-c)),S*=u[g],p[k]+=S}}return ol(p,r.shape)},t.prototype.multinomial=function(r,n,s,i){nr(r,"multinomial");for(var o=n?r:jf(r),l=o.shape[0],c=o.shape[1],d=Ln([l,s],"int32"),u=this.readSync(d.dataId),h=this.readSync(o.dataId),m=0;m<l;++m){var p=m*c,v=new Float32Array(c-1);v[0]=h[p];for(var g=1;g<v.length;++g)v[g]=v[g-1]+h[p+g];for(var b=OS(i.toString()),y=m*s,C=0;C<s;++C){var w=b();u[y+C]=v.length;for(var k=0;k<v.length;k++)if(w<v[k]){u[y+C]=k;break}}}return d},t.prototype.oneHot=function(r,n,s,i){nr(r,"oneHot");var o=new Float32Array(r.size*n);o.fill(i);for(var l=this.readSync(r.dataId),c=0;c<r.size;++c)l[c]>=0&&l[c]<n&&(o[c*n+l[c]]=s);return Im(o,[r.size,n],"int32")},t.prototype.nonMaxSuppression=function(r,n,s,i,o){return nr(r,"nonMaxSuppression"),N4(this.readSync(r.dataId),this.readSync(n.dataId),s,i,o)},t.prototype.fft=function(r){return this.fftBatch(r,!1)},t.prototype.ifft=function(r){return this.fftBatch(r,!0)},t.prototype.fftBatch=function(r,n){for(var s=r.shape[0],i=r.shape[1],o=fa(r.shape,"float32"),l=fa(r.shape,"float32"),c=Uc(r).as2D(s,i),d=Du(r).as2D(s,i),u=0;u<s;u++)for(var h=c.slice([u,0],[1,i]),m=d.slice([u,0],[1,i]),p=zi(h,m),v=this.readSync(this.fftImpl(p,n).dataId),g=0;g<i;g++){var b=eB(v,g);o.values[u*i+g]=b.real,l.values[u*i+g]=b.imag}return zi(o.toTensor(),l.toTensor()).as2D(s,i)},t.prototype.fftImpl=function(r,n){var s=r.as1D(),i=s.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(s,i,n).as2D(r.shape[0],r.shape[1]);return n&&(o=zi(Uc(o).div(Nr(i)),Du(o).div(Nr(i)))),o}var l=this.readSync(r.dataId),c=function(d){for(var u=new Float32Array(d.length/2),h=new Float32Array(d.length/2),m=0;m<d.length;m+=2)u[m/2]=d[m],h[m/2]=d[m+1];return{real:u,imag:h}}(this.fourierTransformByMatmul(l,i,n));return zi(c.real,c.imag).as2D(r.shape[0],r.shape[1])},t.prototype.isExponentOf2=function(r){return(r&r-1)==0},t.prototype.fftRadix2=function(r,n,s){if(n===1)return r;var i=this.readSync(r.dataId),o=n/2,l=function(y){for(var C=Math.ceil(y.length/4),w=new Float32Array(C),k=new Float32Array(C),S=0;S<y.length;S+=4)w[Math.floor(S/4)]=y[S],k[Math.floor(S/4)]=y[S+1];return{real:w,imag:k}}(i),c=zi(l.real,l.imag).as1D(),d=function(y){for(var C=Math.floor(y.length/4),w=new Float32Array(C),k=new Float32Array(C),S=2;S<y.length;S+=4)w[Math.floor(S/4)]=y[S],k[Math.floor(S/4)]=y[S+1];return{real:w,imag:k}}(i),u=zi(d.real,d.imag).as1D();c=this.fftRadix2(c,o,s),u=this.fftRadix2(u,o,s);var h=function(y,C){for(var w=new Float32Array(y/2),k=new Float32Array(y/2),S=0;S<Math.ceil(y/2);S++){var D=(C?2:-2)*Math.PI*(S/y);w[S]=Math.cos(D),k[S]=Math.sin(D)}return{real:w,imag:k}}(n,s),m=zi(h.real,h.imag).mul(u),p=c.add(m),v=c.sub(m),g=Uc(p).concat(Uc(v)),b=Du(p).concat(Du(v));return zi(g,b).as1D()},t.prototype.fourierTransformByMatmul=function(r,n,s){for(var i=new Float32Array(2*n),o=0;o<n;o++){for(var l=0,c=0,d=0;d<n;d++){var u=E3e(o*d,n,s),h=eB(r,d);l+=h.real*u.real-h.imag*u.imag,c+=h.real*u.imag+h.imag*u.real}s&&(l/=n,c/=n),_3e(i,l,c,o)}return i},t.prototype.depthToSpace=function(r,n,s){He(s==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+s}),He(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});for(var i=r.shape[0],o=r.shape[1],l=r.shape[2],c=r.shape[3],d=o*n,u=l*n,h=c/(n*n),m=this.readSync(r.dataId),p=new Float32Array(i*d*u*h),v=0,g=0;g<i;++g)for(var b=0;b<d;++b)for(var y=Math.floor(b/n),C=b%n,w=0;w<u;++w)for(var k=Math.floor(w/n),S=(C*n+w%n)*h,D=0;D<h;++D){var E=D+S+c*(k+l*(y+o*g));p[v++]=m[E]}return ol(p,[i,d,u,h])},t.prototype.broadcastedBinaryOp=function(r,n,s,i){var o=Ma(r.shape,n.shape),l=fa(o,s),c=this.readSync(r.dataId),d=this.readSync(n.dataId),u=km(r.shape,o),h=km(n.shape,o),m=l.values;if(u.length+h.length===0)for(var p=0;p<m.length;++p)m[p]=i(c[p%c.length],d[p%d.length]);else{var v=this.bufferSync(r),g=this.bufferSync(n),b=function(y){var C=l.indexToLoc(y),w=C.slice(-r.rank);u.forEach(function(E){return w[E]=0});var k=v.locToIndex(w),S=C.slice(-n.rank);h.forEach(function(E){return S[E]=0});var D=g.locToIndex(S);m[y]=i(c[k],d[D])};for(p=0;p<m.length;++p)b(p)}return l.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(r,n,s){var i=Ma(r.shape,n.shape),o=fa(i,"float32"),l=fa(i,"float32"),c=this.readSync(r.dataId),d=this.readSync(n.dataId),u=km(r.shape,i),h=km(n.shape,i),m=o.values,p=l.values;if(u.length+h.length===0)for(var v=0;v<m.length;v++){var g=v%c.length,b=v%d.length,y=s(c[2*g],c[2*g+1],d[2*b],d[2*b+1]);m[v]=y.real,p[v]=y.imag}else{var C=this.bufferSync(this.data.get(r.dataId).complexTensors.real),w=this.bufferSync(this.data.get(n.dataId).complexTensors.real),k=function(S){var D=o.indexToLoc(S),E=D.slice(-r.rank);u.forEach(function(O){return E[O]=0});var T=C.locToIndex(E),A=D.slice(-n.rank);h.forEach(function(O){return A[O]=0});var L=w.locToIndex(A),P=s(c[2*T],c[2*T+1],d[2*L],d[2*L+1]);m[S]=P.real,p[S]=P.imag};for(v=0;v<m.length;v++)k(v)}return this.complex(o.toTensor(),l.toTensor())},t.prototype.split=function(r,n,s){return wG(r,n,s)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(r,n,s,i,o,l){for(var c=r.shape,d=c[0],u=c[1],h=c[2],m=c[3],p=n.shape[0],v=i[0],g=i[1],b=fa([p,v,g,m],"float32"),y=this.readSync(n.dataId),C=this.readSync(s.dataId),w=this.readSync(r.dataId),k=r.strides,S=b.strides,D=0;D<p;D++){var E=4*D,T=y[E],A=y[E+1],L=y[E+2],P=y[E+3],O=C[D];if(!(O>=d))for(var Z=v>1?(L-T)*(u-1)/(v-1):0,z=g>1?(P-A)*(h-1)/(g-1):0,K=0;K<v;K++){var B=v>1?T*(u-1)+K*Z:.5*(T+L)*(u-1);if(B<0||B>u-1)for(var Q=0;Q<g;Q++)for(var U=0;U<m;U++){var J=U+Q*S[2]+K*S[1]+D*S[0];b.values[J]=l}else if(o==="bilinear"){var Y=Math.floor(B),oe=Math.ceil(B),M=B-Y;for(Q=0;Q<g;Q++)if((de=g>1?A*(h-1)+Q*z:.5*(A+P)*(h-1))<0||de>h-1)for(U=0;U<m;U++)J=U+Q*S[2]+K*S[1]+D*S[0],b.values[J]=l;else{var V=Math.floor(de),H=Math.ceil(de),ee=de-V;for(U=0;U<m;U++){var re=w[J=U+V*k[2]+Y*k[1]+O*k[0]],ae=w[J=U+H*k[2]+Y*k[1]+O*k[0]],ne=w[J=U+V*k[2]+oe*k[1]+O*k[0]],ie=re+(ae-re)*ee,G=ne+(w[J=U+H*k[2]+oe*k[1]+O*k[0]]-ne)*ee;J=U+Q*S[2]+K*S[1]+D*S[0],b.values[J]=ie+(G-ie)*M}}}else for(Q=0;Q<g;++Q){var de;if((de=g>1?A*(h-1)+Q*z:.5*(A+P)*(h-1))<0||de>h-1)for(U=0;U<m;U++)J=U+Q*S[2]+K*S[1]+D*S[0],b.values[J]=l;else{var X=Math.round(de),le=Math.round(B);for(U=0;U<m;U++){var Se=U+X*k[2]+le*k[1]+O*k[0],ue=U+Q*S[2]+K*S[1]+D*S[0];b.values[ue]=w[Se]}}}}}return b.toTensor()},t.prototype.sparseToDense=function(r,n,s,i){var o=s2(0,r,s),l=o.sliceRank,c=o.numUpdates,d=o.sliceSize,u=o.strides,h=o.outputSize;return this.scatter(r,n,s,h,d,c,l,u,i,!1)},t.prototype.gatherND=function(r,n){var s=n.shape,i=s[s.length-1],o=fG(r,n),l=o[0],c=o[1],d=o[2],u=o[3];if(c===0)return Ki([],l,r.dtype);for(var h=new Ey([c,d],r.dtype),m=this.readSync(n.dataId),p=this.readSync(r.dataId),v=0;v<c;v++){for(var g=[],b=0,y=0;y<i;y++){var C=m[v*i+y];b+=C*u[y],g.push(C)}if(b<0||b>=r.size/d)throw new Error("Invalid indices: "+g+" does not index into "+r.shape);for(var w=0;w<d;w++)h.values[v*d+w]=p[b*d+w]}return h.toTensor().reshape(l)},t.prototype.scatterND=function(r,n,s){var i=s2(0,r,s),o=i.sliceRank,l=i.numUpdates,c=i.sliceSize,d=i.strides,u=i.outputSize,h=Nr(0);return this.scatter(r,n,s,u,c,l,o,d,h,!0)},t.prototype.fill=function(r,n,s){var i=Kw(s=s||u1(n),Fr(r));return i.fill(n),ht.makeTensor(i,r,s,this)},t.prototype.onesLike=function(r){if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(r.shape,1,r.dtype)},t.prototype.zerosLike=function(r){var n=Kw(r.dtype,Fr(r.shape));return this.makeOutput(n,r.shape,r.dtype)},t.prototype.linspace=function(r,n,s){return jG(r,n,s)},t.prototype.scatter=function(r,n,s,i,o,l,c,d,u,h){var m=[i/o,o],p=this.readSync(r.dataId),v=this.readSync(n.dataId);if(i===0)return Ki([],s,n.dtype);var g=new Ey(m,n.dtype);g.values.fill(this.readSync(u.dataId)[0]);for(var b=0;b<l;b++){for(var y=[],C=0,w=0;w<c;w++){var k=p[b*c+w];y.push(k),C+=k*d[w]}if(C<0||C>=i/o)throw new Error("Invalid indices: "+y+" does not index into "+s);for(var S=0;S<o;S++)h?g.values[C*o+S]+=v[b*o+S]:g.values[C*o+S]=n.rank===0?v[0]:v[b*o+S]}return g.toTensor().reshape(s)},t}(gG);ht.registerBackend("cpu",function(){return new YIe},1);for(var $E=0,NB=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=e.attrs,s=t,i=s.boxes,o=s.scores,l=n,c=l.maxOutputSize,d=l.iouThreshold,u=l.scoreThreshold,h=l.softNmsSigma,m=r;nr(i,"NonMaxSuppressionWithScore");var p=w4(m.data.get(i.dataId).values,m.data.get(o.dataId).values,c,d,u,h);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t.x,s=r;nr(n,"square");for(var i=s.data.get(n.dataId).values,o=new Float32Array(i.length),l=0;l<i.length;++l){var c=i[l];o[l]=c*c}return{dataId:s.write(o,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}},{kernelName:Ty,backendName:"cpu",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t,s=n.a,i=n.b,o=r;nr([s,i],Ty);var l=o.data.get(s.dataId).values,c=o.data.get(i.dataId).values,d=function(m,p,v,g,b,y){var C=Ma(m,p),w=C.length,k=$u(C),S=_y(b,Fr(C)),D=m.length,E=p.length,T=$u(m),A=$u(p),L=km(m,C),P=km(p,C);if(L.length+P.length===0)for(var O=0;O<S.length;++O)S[O]=y(v[O%v.length],g[O%g.length]);else{var Z=function(z){var K=n5e(z,w,k),B=K.slice(-D);L.forEach(function(Y){return B[Y]=0});var Q=H8(B,D,T),U=K.slice(-E);P.forEach(function(Y){return U[Y]=0});var J=H8(U,E,A);S[z]=y(v[Q],g[J])};for(O=0;O<S.length;++O)Z(O)}return[S,C]}(s.shape,i.shape,l,c,s.dtype,function(m,p){var v=m-p;return v*v}),u=d[0],h=d[1];return{dataId:o.write(u,h,s.dtype),shape:h,dtype:s.dtype}}}];$E<NB.length;$E++)WW(NB[$E]);var Rv,KIe=function(e){this.variableNames=["A"];var t=wo(),r=e[0],n=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+n+".0, "+r+`.0);

        vec4 values = `+t.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},XIe=function(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var t=wo(),r=e[0],n=e[1];this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+n+".0, "+r+`.0);
            vec4 values = `+t.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+t.output+` = result;
      }
    `};for(var VE=0,wB=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=e.attrs,s=t.pixels,i=n.numChannels,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,c=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],d=c[0],u=c[1],h=[u,d],m=[u,d,i];(l||o)&&(Rv==null&&(Rv=document.createElement("canvas").getContext("2d")),Rv.canvas.width=d,Rv.canvas.height=u,Rv.drawImage(s,0,0,d,u),s=Rv.canvas);var p=r.makeTensorInfo(h,"int32");r.texData.get(p.dataId).usage=Yl.PIXELS,r.gpgpu.uploadPixelDataToTexture(r.getTexture(p.dataId),s);var v=zt().getBool("WEBGL_PACK")?new XIe(m):new KIe(m),g=r.runWebGLProgram(v,[p],"int32");return r.disposeData(p.dataId),g}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=e.attrs;Zw("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var s=t,i=s.boxes,o=s.scores,l=n,c=l.maxOutputSize,d=l.iouThreshold,u=l.scoreThreshold,h=l.softNmsSigma,m=r,p=w4(m.readSync(i.dataId),m.readSync(o.dataId),c,d,u,h);return[p.selectedIndices,p.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t.x,s=r,i=new Na(n.shape,"return x * x;");return s.runWebGLProgram(i,[n],n.dtype)}},{kernelName:Ty,backendName:"webgl",kernelFunc:function(e){var t=e.inputs,r=e.backend,n=t,s=n.a,i=n.b,o=r,l=zt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new Mh("return (a - b) * (a - b);",s.shape,i.shape):new bs("return (a - b) * (a - b);",s.shape,i.shape);return o.compileAndRun(l,[s,i])}}];VE<wB.length;VE++)WW(wB[VE]);for(var qE=0,SB=[{kernelName:"Square",gradFunc:function(e,t){var r=t[0];return{x:function(){return e.mul(r.toFloat().mul(2))}}}},{kernelName:Ty,gradFunc:function(e,t){var r=t[0],n=t[1],s=Nr(2);return{a:function(){return _o(e,_o(s,mi(r,n)))},b:function(){return _o(e,_o(s,mi(n,r)))}}}}];qE<SB.length;qE++)GDe(SB[qE]);var QIe=function(){function e(){}return e.prototype.fetch=function(t,r){return fetch(t,r)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+r);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)},e.prototype.decode=function(t,r){return new TextDecoder(r).decode(t)},e}();zt().get("IS_BROWSER")&&zt().setPlatform("browser",new QIe);var zE,JIe=function(){return require("node-fetch")},ZIe=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(t,r){return zt().global.fetch!=null?zt().global.fetch(t,r):(zE==null&&(zE=JIe()),zE(t,r))},e.prototype.now=function(){var t=process.hrtime();return 1e3*t[0]+t[1]/1e6},e.prototype.encode=function(t,r){if(r!=="utf-8"&&r!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+r);return this.textEncoder.encode(t)},e.prototype.decode=function(t,r){return t.length===0?"":new this.util.TextDecoder(r).decode(t)},e}();zt().get("IS_NODE")&&zt().setPlatform("node",new ZIe);var J5={float32:4,int32:4,uint16:2,uint8:1,bool:1},h2=4;function pY(e,t){for(var r={},n=0,s=function(l){var c=l.name,d=l.dtype,u=l.shape,h=Fr(u),m=void 0;if("quantization"in l){var p=l.quantization;if(p.dtype!=="uint8"&&p.dtype!=="uint16")throw new Error("Weight "+l.name+" has unknown quantization dtype "+p.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var v=J5[p.dtype],g=e.slice(n,n+h*v),b=p.dtype==="uint8"?new Uint8Array(g):new Uint16Array(g);if(d==="float32")m=Float32Array.from(b,function(D){return D*p.scale+p.min});else{if(d!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+d);m=Int32Array.from(b,function(D){return Math.round(D*p.scale+p.min)})}n+=h*v}else if(d==="string"){var y=Fr(l.shape);m=[];for(var C=0;C<y;C++){var w=new Uint32Array(e.slice(n,n+h2))[0];n+=h2;var k=new Uint8Array(e.slice(n,n+w));m.push(k),n+=w}}else{var S=J5[d];if(g=e.slice(n,n+h*S),d==="float32")m=new Float32Array(g);else if(d==="int32")m=new Int32Array(g);else{if(d!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+d);m=new Uint8Array(g)}n+=h*S}r[c]=Ki(m,u,d)},i=0,o=t;i<o.length;i++)s(o[i]);return r}function ePe(e){if(e===null)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,r=[];e.forEach(function(i){if(t+=i.byteLength,r.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+i.constructor.name)});var n=new Uint8Array(t),s=0;return r.forEach(function(i){n.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),n.buffer}var Z5=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function CB(e){return Z5?Buffer.byteLength(e):new Blob([e]).size}function V4(e){var t=0;e.forEach(function(s){t+=s.byteLength});var r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(new Uint8Array(s),n),n+=s.byteLength}),r.buffer}function kB(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function g1(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:e.modelTopology==null?0:CB(JSON.stringify(e.modelTopology)),weightSpecsBytes:e.weightSpecs==null?0:CB(JSON.stringify(e.weightSpecs)),weightDataBytes:e.weightData==null?0:e.weightData.byteLength}}var Kl=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,r){return e.getHandlers(t,"load",r)},e.getHandlers=function(t,r,n){var s=[];return(r==="load"?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach(function(i){var o=i(t,n);o!==null&&s.push(o)}),s},e}(),f0="://",Pm=function(){function e(){this.managers={}}return e.getInstance=function(){return e.instance==null&&(e.instance=new e),e.instance},e.registerManager=function(t,r){He(t!=null,function(){return"scheme must not be undefined or null."}),t.endsWith(f0)&&(t=t.slice(0,t.indexOf(f0))),He(t.length>0,function(){return"scheme must not be an empty string."});var n=e.getInstance();He(n.managers[t]==null,function(){return"A model store manager is already registered for scheme '"+t+"'."}),n.managers[t]=r},e.getManager=function(t){var r=this.getInstance().managers[t];if(r==null)throw new Error("Cannot find model manager for scheme '"+t+"'");return r},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function TN(e){if(e.indexOf(f0)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Pm.getSchemes().join(","));return{scheme:e.split(f0)[0],path:e.split(f0)[1]}}function _B(e,t,r){return r===void 0&&(r=!1),Pr(this,void 0,void 0,function(){var n,s,i,o,l,c,d,u,h;return Or(this,function(m){switch(m.label){case 0:return He(e!==t,function(){return"Old path and new path are the same: '"+e+"'"}),He((n=Kl.getLoadHandlers(e)).length>0,function(){return"Copying failed because no load handler is found for source URL "+e+"."}),He(n.length<2,function(){return"Copying failed because more than one ("+n.length+") load handlers for source URL "+e+"."}),s=n[0],He((i=Kl.getSaveHandlers(t)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+t+"."}),He(i.length<2,function(){return"Copying failed because more than one ("+n.length+") save handlers for destination URL "+t+"."}),o=i[0],l=TN(e).scheme,c=TN(e).path,d=l===TN(e).scheme,[4,s.load()];case 1:return u=m.sent(),r&&d?[4,Pm.getManager(l).removeModel(c)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[4,o.save(u)];case 4:return h=m.sent(),!r||d?[3,6]:[4,Pm.getManager(l).removeModel(c)];case 5:m.sent(),m.label=6;case 6:return[2,h.modelArtifactsInfo]}})})}var ex="models_store",_m="model_info_store";function xY(){if(!zt().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window||self,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function e3(e){var t=e.result;t.createObjectStore(ex,{keyPath:"modelPath"}),t.createObjectStore(_m,{keyPath:"modelPath"})}var m0=function(){function e(t){if(this.indexedDB=xY(),t==null||!t)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=t}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,t)]})})},e.prototype.load=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(t){return[2,this.databaseAction(this.modelPath)]})})},e.prototype.databaseAction=function(t,r){var n=this;return new Promise(function(s,i){var o=n.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return e3(o)},o.onsuccess=function(){var l=o.result;if(r==null){var c=l.transaction(ex,"readonly"),d=c.objectStore(ex).get(n.modelPath);d.onsuccess=function(){if(d.result==null)return l.close(),i(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));s(d.result.modelArtifacts)},d.onerror=function(g){return l.close(),i(d.error)},c.oncomplete=function(){return l.close()}}else{var u,h=g1(r),m=l.transaction(_m,"readwrite"),p=m.objectStore(_m),v=p.put({modelPath:n.modelPath,modelArtifactsInfo:h});v.onsuccess=function(){var g=(u=l.transaction(ex,"readwrite")).objectStore(ex).put({modelPath:n.modelPath,modelArtifacts:r,modelArtifactsInfo:h});g.onsuccess=function(){return s({modelArtifactsInfo:h})},g.onerror=function(b){var y=(p=m.objectStore(_m)).delete(n.modelPath);y.onsuccess=function(){return l.close(),i(g.error)},y.onerror=function(C){return l.close(),i(g.error)}}},v.onerror=function(g){return l.close(),i(v.error)},m.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}}},o.onerror=function(l){return i(o.error)}})},e.URL_SCHEME="indexeddb://",e}(),EB=function(e){return zt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(m0.URL_SCHEME)?(t=e.slice(m0.URL_SCHEME.length),new m0(t)):null;var t};Kl.registerSaveRouter(EB),Kl.registerLoadRouter(EB);var tPe=function(){function e(){this.indexedDB=xY()}return e.prototype.listModels=function(){return Pr(this,void 0,void 0,function(){var t=this;return Or(this,function(r){return[2,new Promise(function(n,s){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return e3(i)},i.onsuccess=function(){var o=i.result,l=o.transaction(_m,"readonly"),c=l.objectStore(_m).getAll();c.onsuccess=function(){for(var d={},u=0,h=c.result;u<h.length;u++){var m=h[u];d[m.modelPath]=m.modelArtifactsInfo}n(d)},c.onerror=function(d){return o.close(),s(c.error)},l.oncomplete=function(){return o.close()}},i.onerror=function(o){return s(i.error)}})]})})},e.prototype.removeModel=function(t){return Pr(this,void 0,void 0,function(){var r=this;return Or(this,function(n){var s;return t=(s=t).startsWith(m0.URL_SCHEME)?s.slice(m0.URL_SCHEME.length):s,[2,new Promise(function(i,o){var l=r.indexedDB.open("tensorflowjs",1);l.onupgradeneeded=function(){return e3(l)},l.onsuccess=function(){var c,d=l.result,u=d.transaction(_m,"readwrite"),h=u.objectStore(_m),m=h.get(t);m.onsuccess=function(){if(m.result==null)return d.close(),o(new Error("Cannot find model with path '"+t+"' in IndexedDB."));var p=h.delete(t),v=function(){var g=(c=d.transaction(ex,"readwrite")).objectStore(ex).delete(t);g.onsuccess=function(){return i(m.result.modelArtifactsInfo)},g.onerror=function(b){return o(m.error)}};p.onsuccess=v,p.onerror=function(g){return v(),d.close(),o(m.error)}},m.onerror=function(p){return d.close(),o(m.error)},u.oncomplete=function(){c==null?d.close():c.oncomplete=function(){return d.close()}}},l.onerror=function(c){return o(l.error)}})]})})},e}();if(zt().getBool("IS_BROWSER"))try{Pm.registerManager(m0.URL_SCHEME,new tPe)}catch{}var Lh="/",Wv="tensorflowjs_models",vY="info",rPe="model_topology",aPe="weight_specs",nPe="weight_data",sPe="model_metadata";function gY(e){return{info:[Wv,e,vY].join(Lh),topology:[Wv,e,rPe].join(Lh),weightSpecs:[Wv,e,aPe].join(Lh),weightData:[Wv,e,nPe].join(Lh),modelMetadata:[Wv,e,sPe].join(Lh)}}function iPe(e){var t=e.split(Lh);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(Lh)}var p0=function(){function e(t){if(!zt().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,t==null||!t)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=t,this.keys=gY(this.modelPath)}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){var r,n,s;return Or(this,function(i){if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");r=JSON.stringify(t.modelTopology),n=JSON.stringify(t.weightSpecs),s=g1(t);try{return this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,r),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,function(o){if(Z5)return Buffer.from(o).toString("base64");for(var l=new Uint8Array(o),c="",d=0,u=l.length;d<u;d++)c+=String.fromCharCode(l[d]);return btoa(c)}(t.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata})),[2,{modelArtifactsInfo:s}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+s.modelTopologyBytes+", weightSpecsBytes="+s.weightSpecsBytes+", weightDataBytes="+s.weightDataBytes+".")}return[2]})})},e.prototype.load=function(){return Pr(this,void 0,void 0,function(){var t,r,n,s,i,o,l;return Or(this,function(c){if((t=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(t.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(r={},(n=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(r.modelTopology=n,(s=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(r.weightSpecs=s,(i=this.LS.getItem(this.keys.modelMetadata))!=null&&(o=JSON.parse(i),r.format=o.format,r.generatedBy=o.generatedBy,r.convertedBy=o.convertedBy,r.userDefinedMetadata=o.userDefinedMetadata),(l=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return r.weightData=function(d){if(Z5){var u=Buffer.from(d,"base64");return u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)}for(var h=atob(d),m=new Uint8Array(h.length),p=0;p<h.length;++p)m.set([h.charCodeAt(p)],p);return m.buffer}(l),[2,r]})})},e.URL_SCHEME="localstorage://",e}(),DB=function(e){return zt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(p0.URL_SCHEME)?(t=e.slice(p0.URL_SCHEME.length),new p0(t)):null;var t};Kl.registerSaveRouter(DB),Kl.registerLoadRouter(DB);var oPe=function(){function e(){He(zt().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),He(typeof window>"u"||window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return e.prototype.listModels=function(){return Pr(this,void 0,void 0,function(){var t,r,n,s,i,o;return Or(this,function(l){for(t={},r=Wv+Lh,n=Lh+vY,s=0;s<this.LS.length;++s)(i=this.LS.key(s)).startsWith(r)&&i.endsWith(n)&&(o=iPe(i),t[o]=JSON.parse(this.LS.getItem(i)));return[2,t]})})},e.prototype.removeModel=function(t){return Pr(this,void 0,void 0,function(){var r,n;return Or(this,function(s){var i;if(t=(i=t).startsWith(p0.URL_SCHEME)?i.slice(p0.URL_SCHEME.length):i,r=gY(t),this.LS.getItem(r.info)==null)throw new Error("Cannot find model at path '"+t+"'");return n=JSON.parse(this.LS.getItem(r.info)),this.LS.removeItem(r.info),this.LS.removeItem(r.topology),this.LS.removeItem(r.weightSpecs),this.LS.removeItem(r.weightData),[2,n]})})},e}();if(zt().getBool("IS_BROWSER"))try{Pm.registerManager(p0.URL_SCHEME,new oPe)}catch{}var lPe="model",cPe=".json",dPe=".weights.bin";function AB(e){return new Promise(function(t){return setTimeout(t)}).then(e)}var HE=function(){function e(t){if(!zt().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),t!=null&&t.length!==0||(t=lPe),this.modelTopologyFileName=t+cPe,this.weightDataFileName=t+dPe}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){var r,n,s,i,o,l;return Or(this,function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(r=window.URL.createObjectURL(new Blob([t.weightData],{type:"application/octet-stream"})),!(t.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:t.weightSpecs}],s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),(o=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,AB(function(){return o.dispatchEvent(new MouseEvent("click"))})];case 2:return c.sent(),t.weightData==null?[3,4]:((l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,l.href=r,[4,AB(function(){return l.dispatchEvent(new MouseEvent("click"))})]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:g1(t)}]}})})},e.URL_SCHEME="downloads://",e}(),uPe=function(){function e(t){if(t==null||t.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+t);this.files=t}return e.prototype.load=function(){return Pr(this,void 0,void 0,function(){var t,r,n=this;return Or(this,function(s){return t=this.files[0],r=this.files.slice(1),[2,new Promise(function(i,o){var l=new FileReader;l.onload=function(c){var d=JSON.parse(c.target.result),u=d.modelTopology;if(u!=null){r.length===0&&i({modelTopology:u});var h=d.weightsManifest;if(h!=null){var m;try{m=n.checkManifestAndWeightFiles(h,r)}catch(b){return void o(b)}var p=[],v=[],g=[];h.forEach(function(b){b.paths.forEach(function(y){v.push(y),g.push(null)}),p.push.apply(p,b.weights)}),h.forEach(function(b){b.paths.forEach(function(y){var C=new FileReader;C.onload=function(w){var k=w.target.result,S=v.indexOf(y);g[S]=k,g.indexOf(null)===-1&&i({modelTopology:u,weightSpecs:p,weightData:V4(g),format:d.format,generatedBy:d.generatedBy,convertedBy:d.convertedBy,userDefinedMetadata:d.userDefinedMetadata})},C.onerror=function(w){return o("Failed to weights data from file of path '"+y+"'.")},C.readAsArrayBuffer(m[y])})})}else o(new Error("weightManifest field is missing from file "+t.name))}else o(new Error("modelTopology field is missing from file "+t.name))},l.onerror=function(c){return o("Failed to read model topology and weights manifest JSON from file '"+t.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},l.readAsText(t)})]})})},e.prototype.checkManifestAndWeightFiles=function(t,r){for(var n=[],s=r.map(function(c){return kB(c.name)}),i={},o=0,l=t;o<l.length;o++)l[o].paths.forEach(function(c){var d=kB(c);if(n.indexOf(d)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+d+"'");if(n.push(d),s.indexOf(d)===-1)throw new Error("Weight file with basename '"+d+"' is not provided.");i[c]=r[s.indexOf(d)]});if(n.length!==r.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+r.length+").");return i},e}();function TB(e,t,r,n){(function(i){He(i!=null&&Array.isArray(i)&&i.length>0,function(){return"promises must be a none empty array"})})(e),function(i,o){He(i>=0&&i<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+i}),He(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+o}),He(o>=i,function(){return"startFraction must be no more than endFraction, but got startFraction "+i+" and endFraction "+o})}(r=r??0,n=n??1);var s=0;return Promise.all(e.map(function(i){return i.then(function(o){var l=r+ ++s/e.length*(n-r);return t(l),o}),i}))}function bY(e,t){return Pr(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u;return Or(this,function(h){switch(h.label){case 0:return t==null&&(t={}),r=t.fetchFunc==null?zt().platform.fetch:t.fetchFunc,n=e.map(function(m){return r(m,t.requestInit,{isBinary:!0})}),s=0,i=.5,t.onProgress!=null?[3,2]:[4,Promise.all(n)];case 1:return o=h.sent(),[3,4];case 2:return[4,TB(n,t.onProgress,s,i)];case 3:o=h.sent(),h.label=4;case 4:return l=o.map(function(m){return m.arrayBuffer()}),c=.5,d=1,t.onProgress!=null?[3,6]:[4,Promise.all(l)];case 5:return u=h.sent(),[3,8];case 6:return[4,TB(l,t.onProgress,c,d)];case 7:u=h.sent(),h.label=8;case 8:return[2,u]}})})}function IB(e){var t=this;return function(r,n,s){return n===void 0&&(n=""),Pr(t,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v;return Or(this,function(g){switch(g.label){case 0:if(i=r.map(function(){return!1}),o={},l=s!=null?s.map(function(){return!1}):[],c=[],r.forEach(function(b,y){var C=0;b.weights.forEach(function(w){var k="quantization"in w?w.quantization.dtype:w.dtype,S=J5[k]*Fr(w.shape),D=function(){i[y]=!0,o[y]==null&&(o[y]=[]),o[y].push({manifestEntry:w,groupOffset:C,sizeBytes:S})};s!=null?s.forEach(function(E,T){E===w.name&&(D(),l[T]=!0)}):D(),c.push(w.name),C+=S})}),!l.every(function(b){return b}))throw d=s.filter(function(b,y){return!l[y]}),new Error("Could not find weights in manifest with names: "+d.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return u=i.reduce(function(b,y,C){return y&&b.push(C),b},[]),h=[],u.forEach(function(b){r[b].paths.forEach(function(y){var C=n+(n.endsWith("/")?"":"/")+y;h.push(C)})}),[4,e(h)];case 1:return m=g.sent(),p={},v=0,u.forEach(function(b){for(var y=r[b].paths.length,C=0,w=0;w<y;w++)C+=m[v+w].byteLength;for(var k=new ArrayBuffer(C),S=new Uint8Array(k),D=0,E=0;E<y;E++){var T=new Uint8Array(m[v+E]);S.set(T,D),D+=T.byteLength}o[b].forEach(function(A){var L=pY(k.slice(A.groupOffset,A.groupOffset+A.sizeBytes),[A.manifestEntry]);for(var P in L)p[P]=L[P]}),v+=y}),[2,p]}})})}}Kl.registerSaveRouter(function(e){return zt().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(HE.URL_SCHEME)?function(t){return t===void 0&&(t="model"),new HE(t)}(e.slice(HE.URL_SCHEME.length)):null});var yY=function(){function e(t,r){if(this.DEFAULT_METHOD="POST",r==null&&(r={}),this.weightPathPrefix=r.weightPathPrefix,this.onProgress=r.onProgress,r.fetchFunc!=null?(He(typeof r.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=r.fetchFunc):this.fetch=zt().platform.fetch,He(t!=null&&t.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(t)&&He(t.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+t.length+")."}),this.path=t,r.requestInit!=null&&r.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=r.requestInit||{}}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){var r,n,s,i;return Or(this,function(o){switch(o.label){case 0:if(t.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(r=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:t.weightSpecs}],s={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,userDefinedMetadata:t.userDefinedMetadata,weightsManifest:n},r.body.append("model.json",new Blob([JSON.stringify(s)],{type:"application/json"}),"model.json"),t.weightData!=null&&r.body.append("model.weights.bin",new Blob([t.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,r)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:g1(t),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}})})},e.prototype.load=function(){return Pr(this,void 0,void 0,function(){var t,r,n,s,i,o,l,c,d,u,h,m;return Or(this,function(p){switch(p.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(t=p.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+t.status+". Please verify this URL points to the model JSON of the model to load.");p.label=2;case 2:return p.trys.push([2,4,,5]),[4,t.json()];case 3:return r=p.sent(),[3,5];case 4:throw p.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(s=r.modelTopology,i=r.weightsManifest,o=r.generatedBy,l=r.convertedBy,c=r.format,d=r.userDefinedMetadata,s==null&&i==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return i==null?[3,7]:[4,this.loadWeights(i)];case 6:m=p.sent(),u=m[0],h=m[1],p.label=7;case 7:return[2,{modelTopology:s,weightSpecs:u,weightData:h,userDefinedMetadata:d,generatedBy:o,convertedBy:l,format:c}]}})})},e.prototype.loadWeights=function(t){return Pr(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h,m;return Or(this,function(p){switch(p.label){case 0:for(r=Array.isArray(this.path)?this.path[1]:this.path,n=function(v){var g=v.lastIndexOf("/"),b=v.lastIndexOf("?"),y=v.substring(0,g),C=b>g?v.substring(b):"";return[y+"/",C]}(r),s=n[0],i=n[1],o=this.weightPathPrefix||s,l=[],c=0,d=t;c<d.length;c++)u=d[c],l.push.apply(l,u.weights);return h=[],t.forEach(function(v){v.paths.forEach(function(g){h.push(o+g+i)})}),[4,bY(h,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return m=p.sent(),[2,[l,V4(m)]]}})})},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function t3(e){return e.match(yY.URL_SCHEME_REGEX)!=null}var PB=function(e,t){return typeof fetch>"u"?null:(Array.isArray(e)?e.every(function(r){return t3(r)}):t3(e))?r3(e,{onProgress:t}):null};function r3(e,t){return new yY(e,t)}Kl.registerSaveRouter(PB),Kl.registerLoadRouter(PB);var WE=function(){function e(t){this.modelArtifacts=t}return e.prototype.load=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(t){return[2,this.modelArtifacts]})})},e}(),hPe=function(){function e(t){this.saveHandler=t}return e.prototype.save=function(t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return[2,this.saveHandler(t)]})})},e}(),jY=Object.freeze({browserFiles:function(e){return new uPe(e)},browserHTTPRequest:function(e,t){return r3(e,t)},concatenateArrayBuffers:V4,decodeWeights:pY,encodeWeights:function(e,t){return Pr(this,void 0,void 0,function(){var r,n,s,i,o,l=this;return Or(this,function(c){switch(c.label){case 0:for(r=[],n=[],s=Array.isArray(e)?e.map(function(d){return d.name}):Object.keys(e),i=function(d){var u=s[d],h=Array.isArray(e)?e[d].tensor:e[u];if(h.dtype!=="float32"&&h.dtype!=="int32"&&h.dtype!=="bool"&&h.dtype!=="string")throw new Error("Unsupported dtype in weight '"+u+"': "+h.dtype);var m={name:u,shape:h.shape,dtype:h.dtype};if(h.dtype==="string"){var p=new Promise(function(v){return Pr(l,void 0,void 0,function(){var g,b,y,C,w,k,S;return Or(this,function(D){switch(D.label){case 0:return[4,h.bytes()];case 1:for(g=D.sent(),b=g.reduce(function(E,T){return E+T.length},0)+h2*g.length,y=new Uint8Array(b),C=0,w=0;w<g.length;w++)k=g[w],S=new Uint8Array(new Uint32Array([k.length]).buffer),y.set(S,C),C+=h2,y.set(k,C),C+=k.length;return v(y),[2]}})})});n.push(p)}else n.push(h.data());t!=null&&(m.group=t),r.push(m)},o=0;o<s.length;++o)i(o);return[4,Promise.all(n)];case 1:return[2,{data:ePe(c.sent()),specs:r}]}})})},fromMemory:function(e,t,r,n){return arguments.length===1?e.modelTopology!=null||e.weightSpecs!=null?new WE(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new WE({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new WE({modelTopology:e,weightSpecs:t,weightData:r,trainingConfig:n}))},getLoadHandlers:function(e,t){return Kl.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:g1,getSaveHandlers:function(e){return Kl.getSaveHandlers(e)},http:r3,isHTTPScheme:t3,loadWeights:function(e,t,r,n){return t===void 0&&(t=""),Pr(this,void 0,void 0,function(){return Or(this,function(s){return[2,IB(function(i){return bY(i,{requestInit:n})})(e,t,r)]})})},registerLoadRouter:function(e){return Kl.registerLoadRouter(e)},registerSaveRouter:function(e){return Kl.registerSaveRouter(e)},weightsLoaderFactory:IB,withSaveHandler:function(e){return new hPe(e)},copyModel:function(e,t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return[2,_B(e,t,!1)]})})},listModels:function(){return Pr(this,void 0,void 0,function(){var e,t,r,n,s,i,o;return Or(this,function(l){switch(l.label){case 0:e=Pm.getSchemes(),t={},r=0,n=e,l.label=1;case 1:return r<n.length?(s=n[r],[4,Pm.getManager(s).listModels()]):[3,4];case 2:for(o in i=l.sent())t[s+f0+o]=i[o];l.label=3;case 3:return r++,[3,1];case 4:return[2,t]}})})},moveModel:function(e,t){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return[2,_B(e,t,!0)]})})},removeModel:function(e){return Pr(this,void 0,void 0,function(){var t;return Or(this,function(r){return t=TN(e),[2,Pm.getManager(t.scheme).removeModel(t.path)]})})}}),Fv;et({confusionMatrix_:function(e,t,r){var n=Re(e,"labels","confusionMatrix"),s=Re(t,"predictions","confusionMatrix");He(r==null||r>0&&Number.isInteger(r),function(){return"If provided, numClasses must be a positive integer, but got "+r}),He(n.rank===1,function(){return"Expected the rank of labels to be 1, but got "+n.rank}),He(s.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+s.rank}),He(n.shape[0]===s.shape[0],function(){return"Mismatch in the number of examples: "+n.shape[0]+" vs. "+s.shape[0]+". Labels and predictions should have the same number of elements."}),He(r>0&&Number.isInteger(r),function(){return"numClasses is required to be a positive integer, but got "+r});var i=G5(n.asType("int32"),r),o=G5(s.asType("int32"),r);return i.transpose().matMul(o).asType("int32")}});var fPe=et({fromPixels_:function(e,t){if(t===void 0&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r=!1,n=!1,s=!1,i=!1,o=!1;if(e.data instanceof Uint8Array)r=!0;else if(typeof ImageData<"u"&&e instanceof ImageData)n=!0;else if(typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement)i=!0;else{if(e.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);o=!0}if(s&&s&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(HW("FromPixels",ht.backendName)!=null)return ht.runKernel("FromPixels",{pixels:e},{numChannels:t});var l,c,d=s?[e.videoWidth,e.videoHeight]:[e.width,e.height],u=d[0],h=d[1];if(o?l=e.getContext("2d").getImageData(0,0,u,h).data:n||r?l=e.data:(i||s)&&(Fv==null&&(Fv=document.createElement("canvas").getContext("2d")),Fv.canvas.width=u,Fv.canvas.height=h,Fv.drawImage(e,0,0,u,h),l=Fv.getImageData(0,0,u,h).data),t===4)c=new Int32Array(l);else{var m=u*h;c=new Int32Array(m*t);for(var p=0;p<m;p++)for(var v=0;v<t;++v)c[p*t+v]=l[4*p+v]}return v4(c,[h,u,t],"int32")}}),q4=Object.freeze({toPixels:function(e,t){return Pr(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,w,k,S,D,E,T;return Or(this,function(A){switch(A.label){case 0:if(r=Re(e,"img","toPixels"),e instanceof os||(r=r.toInt()),r.rank!==2&&r.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+r.rank+".");if(n=r.shape.slice(0,2),s=n[0],i=n[1],(o=r.rank===2?1:r.shape[2])>4||o===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+o);return[4,r.data()];case 1:return l=A.sent(),c=r.min(),d=r.max(),[4,Promise.all([c.data(),d.data()])];case 2:if(u=A.sent(),h=u[0],m=u[1],p=h[0],v=m[0],c.dispose(),d.dispose(),r.dtype==="float32"){if(p<0||v>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+v+"].")}else{if(r.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+r.dtype+". Please use float32 or int32 tensors.");if(p<0||v>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+v+"].")}for(g=r.dtype==="float32"?255:1,b=new Uint8ClampedArray(i*s*4),y=0;y<s*i;++y)C=void 0,w=void 0,k=void 0,S=void 0,o===1?(C=l[y]*g,w=l[y]*g,k=l[y]*g,S=255):o===3?(C=l[3*y]*g,w=l[3*y+1]*g,k=l[3*y+2]*g,S=255):o===4&&(C=l[4*y]*g,w=l[4*y+1]*g,k=l[4*y+2]*g,S=l[4*y+3]*g),b[(D=4*y)+0]=Math.round(C),b[D+1]=Math.round(w),b[D+2]=Math.round(k),b[D+3]=Math.round(S);return t!=null&&(t.width=i,t.height=s,E=t.getContext("2d"),T=new ImageData(b,i,s),E.putImageData(T,0,0)),r!==e&&r.dispose(),[2,b]}})})},fromPixels:fPe}),mPe=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(t,r){return new t(r)},e}(),pPe=function(){function e(){this.classNameMap={}}return e.getMap=function(){return e.instance==null&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function Gx(e){He(e.className!=null,function(){return"Class being registered does not have the static className property defined."}),He(typeof e.className=="string",function(){return"className is required to be a string, but got type "+typeof e.className}),He(e.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),pPe.register(e)}var Yx=function(e){function t(){return e!==null&&e.apply(this,arguments)||this}return Ud(t,e),t.prototype.minimize=function(r,n,s){n===void 0&&(n=!1);var i=this.computeGradients(r,s),o=i.value,l=i.grads;if(s!=null){var c=s.map(function(d){return{name:d.name,tensor:l[d.name]}});this.applyGradients(c)}else this.applyGradients(l);return fl(l),n?o:(o.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(r,n){return C3e(r,n)},t.prototype.dispose=function(){this.iterations_!=null&&fl(this.iterations_)},t.prototype.saveIterations=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:Nr(this.iterations_,"int32")}]})})},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(n){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},t.prototype.extractIterations=function(r){return Pr(this,void 0,void 0,function(){var n;return Or(this,function(s){switch(s.label){case 0:return n=this,[4,r[0].tensor.data()];case 1:return n.iterations_=s.sent()[0],[2,r.slice(1)]}})})},t}(mPe);Object.defineProperty(Yx,Symbol.hasInstance,{value:function(e){return e.minimize!=null&&e.computeGradients!=null&&e.applyGradients!=null}});var xPe=function(e){function t(r,n,s){s===void 0&&(s=null);var i=e.call(this)||this;return i.learningRate=r,i.rho=n,i.epsilon=s,i.accumulatedGrads=[],i.accumulatedUpdates=[],s==null&&(i.epsilon=ht.backend.epsilon()),i}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ht.registeredVariables[s];n.accumulatedGrads[i]==null&&(n.accumulatedGrads[i]={originalName:s+"/accum_grad",variable:_r(function(){return $a(o).variable(!1)})}),n.accumulatedUpdates[i]==null&&(n.accumulatedUpdates[i]={originalName:s+"/accum_var",variable:_r(function(){return $a(o).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=n.accumulatedGrads[i].variable,d=n.accumulatedUpdates[i].variable;_r(function(){var u=c.mul(n.rho).add(l.square().mul(1-n.rho)),h=d.add(n.epsilon).sqrt().div(c.add(n.epsilon).sqrt()).mul(l),m=d.mul(n.rho).add(h.square().mul(1-n.rho));c.assign(u),d.assign(m);var p=h.mul(-n.learningRate).add(o);o.assign(p)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedUpdates!=null&&(fl(this.accumulatedGrads.map(function(r){return r.variable})),fl(this.accumulatedUpdates.map(function(r){return r.variable})))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){var r;return Or(this,function(n){switch(n.label){case 0:return r=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){var n;return Or(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),n=r.length/2,this.accumulatedGrads=r.slice(0,n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedUpdates=r.slice(n,2*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(r,n){return new r(n.learningRate,n.rho,n.epsilon)},t.className="Adadelta",t}(Yx);Gx(xPe);var vPe=function(e){function t(r,n){n===void 0&&(n=.1);var s=e.call(this)||this;return s.learningRate=r,s.initialAccumulatorValue=n,s.accumulatedGrads=[],s}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ht.registeredVariables[s];n.accumulatedGrads[i]==null&&(n.accumulatedGrads[i]={originalName:s+"/accumulator",variable:_r(function(){return Vu(o.shape,n.initialAccumulatorValue).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=n.accumulatedGrads[i].variable;_r(function(){var d=c.add(l.square());c.assign(d);var u=l.div(d.add(ht.backend.epsilon()).sqrt()).mul(-n.learningRate).add(o);o.assign(u)})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedGrads!=null&&fl(this.accumulatedGrads.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulatedGrads.map(function(n){return{name:n.originalName,tensor:n.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(r)];case 1:return r=n.sent(),this.accumulatedGrads=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(r,n){return new r(n.learningRate,n.initialAccumulatorValue)},t.className="Adagrad",t}(Yx);Gx(vPe);var gPe=function(e){function t(r,n,s,i){i===void 0&&(i=null);var o=e.call(this)||this;return o.learningRate=r,o.beta1=n,o.beta2=s,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],_r(function(){o.accBeta1=Nr(n).variable(),o.accBeta2=Nr(s).variable()}),i==null&&(o.epsilon=ht.backend.epsilon()),o}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this,s=Array.isArray(r)?r.map(function(i){return i.name}):Object.keys(r);_r(function(){var i=mi(1,n.accBeta1),o=mi(1,n.accBeta2);s.forEach(function(l,c){var d=ht.registeredVariables[l];n.accumulatedFirstMoment[c]==null&&(n.accumulatedFirstMoment[c]={originalName:l+"/m",variable:_r(function(){return $a(d).variable(!1)})}),n.accumulatedSecondMoment[c]==null&&(n.accumulatedSecondMoment[c]={originalName:l+"/v",variable:_r(function(){return $a(d).variable(!1)})});var u=Array.isArray(r)?r[c].tensor:r[l];if(u!=null){var h=n.accumulatedFirstMoment[c].variable,m=n.accumulatedSecondMoment[c].variable,p=h.mul(n.beta1).add(u.mul(1-n.beta1)),v=m.mul(n.beta2).add(u.square().mul(1-n.beta2)),g=p.div(i),b=v.div(o);h.assign(p),m.assign(v);var y=g.div(b.sqrt().add(n.epsilon)).mul(-n.learningRate).add(d);d.assign(y)}}),n.accBeta1.assign(n.accBeta1.mul(n.beta1)),n.accBeta2.assign(n.accBeta2.mul(n.beta2))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&fl(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedSecondMoment!=null&&fl(this.accumulatedSecondMoment.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){var r;return Or(this,function(n){switch(n.label){case 0:return r=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){var n,s=this;return Or(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(r)];case 1:return r=i.sent(),_r(function(){s.accBeta1.assign(d2(s.beta1,s.iterations_+1)),s.accBeta2.assign(d2(s.beta2,s.iterations_+1))}),n=r.length/2,this.accumulatedFirstMoment=r.slice(0,n).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedSecondMoment=r.slice(n,2*n).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon)},t.className="Adam",t}(Yx);Gx(gPe);var bPe=function(e){function t(r,n,s,i,o){i===void 0&&(i=null),o===void 0&&(o=0);var l=e.call(this)||this;return l.learningRate=r,l.beta1=n,l.beta2=s,l.epsilon=i,l.decay=o,l.accumulatedFirstMoment=[],l.accumulatedWeightedInfNorm=[],_r(function(){l.iteration=Nr(0).variable(),l.accBeta1=Nr(n).variable()}),i==null&&(l.epsilon=ht.backend.epsilon()),l}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this,s=Array.isArray(r)?r.map(function(i){return i.name}):Object.keys(r);_r(function(){var i=mi(1,n.accBeta1),o=Cd(-n.learningRate,n.iteration.mul(n.decay).add(1));s.forEach(function(l,c){var d=ht.registeredVariables[l];n.accumulatedFirstMoment[c]==null&&(n.accumulatedFirstMoment[c]={originalName:l+"/m",variable:$a(d).variable(!1)}),n.accumulatedWeightedInfNorm[c]==null&&(n.accumulatedWeightedInfNorm[c]={originalName:l+"/v",variable:$a(d).variable(!1)});var u=Array.isArray(r)?r[c].tensor:r[l];if(u!=null){var h=n.accumulatedFirstMoment[c].variable,m=n.accumulatedWeightedInfNorm[c].variable,p=h.mul(n.beta1).add(u.mul(1-n.beta1)),v=m.mul(n.beta2),g=u.abs(),b=v.maximum(g);h.assign(p),m.assign(b);var y=o.div(i).mul(p.div(b.add(n.epsilon))).add(d);d.assign(y)}}),n.iteration.assign(n.iteration.add(1)),n.accBeta1.assign(n.accBeta1.mul(n.beta1))}),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&fl(this.accumulatedFirstMoment.map(function(r){return r.variable})),this.accumulatedWeightedInfNorm!=null&&fl(this.accumulatedWeightedInfNorm.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){throw new Error("getWeights() is not implemented for Adamax yet.")})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(n){throw new Error("setWeights() is not implemented for Adamax yet.")})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(r,n){return new r(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)},t.className="Adamax",t}(Yx);Gx(bPe);var NY=function(e){function t(r){var n=e.call(this)||this;return n.learningRate=r,n.setLearningRate(r),n}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=Array.isArray(r)?r[i].tensor:r[s];if(o!=null){var l=ht.registeredVariables[s];_r(function(){var c=n.c.mul(o).add(l);l.assign(c)})}}),this.incrementIterations()},t.prototype.setLearningRate=function(r){this.learningRate=r,this.c!=null&&this.c.dispose(),this.c=B5e(Nr(-r))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()]]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(r)];case 1:if((r=n.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(r,n){return new r(n.learningRate)},t.className="SGD",t}(Yx);Gx(NY);var yPe=function(e){function t(r,n,s){s===void 0&&(s=!1);var i=e.call(this,r)||this;return i.learningRate=r,i.momentum=n,i.useNesterov=s,i.accumulations=[],i.m=Nr(i.momentum),i}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ht.registeredVariables[s];n.accumulations[i]==null&&(n.accumulations[i]={originalName:s+"/momentum",variable:_r(function(){return $a(o).variable(!1)})});var l=n.accumulations[i].variable,c=Array.isArray(r)?r[i].tensor:r[s];c!=null&&_r(function(){var d,u=n.m.mul(l).add(c);d=n.useNesterov?n.c.mul(c.add(u.mul(n.m))).add(o):n.c.mul(u).add(o),l.assign(u),o.assign(d)})}),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&fl(this.accumulations.map(function(r){return r.variable}))},t.prototype.setMomentum=function(r){this.momentum=r},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){return Or(this,function(r){switch(r.label){case 0:return[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(this.accumulations.map(function(n){return{name:n.originalName,tensor:n.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){return Or(this,function(n){switch(n.label){case 0:return[4,this.extractIterations(r)];case 1:return r=n.sent(),this.accumulations=r.map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(r,n){return new r(n.learningRate,n.momentum,n.useNesterov)},t.className="Momentum",t}(NY);Gx(yPe);var jPe=function(e){function t(r,n,s,i,o){n===void 0&&(n=.9),s===void 0&&(s=0),i===void 0&&(i=null),o===void 0&&(o=!1);var l=e.call(this)||this;if(l.learningRate=r,l.decay=n,l.momentum=s,l.epsilon=i,l.accumulatedMeanSquares=[],l.accumulatedMoments=[],l.accumulatedMeanGrads=[],l.centered=o,i==null&&(l.epsilon=ht.backend.epsilon()),r==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return l}return Ud(t,e),t.prototype.applyGradients=function(r){var n=this;(Array.isArray(r)?r.map(function(s){return s.name}):Object.keys(r)).forEach(function(s,i){var o=ht.registeredVariables[s];n.accumulatedMeanSquares[i]==null&&(n.accumulatedMeanSquares[i]={originalName:s+"/rms",variable:_r(function(){return $a(o).variable(!1)})}),n.accumulatedMoments[i]==null&&(n.accumulatedMoments[i]={originalName:s+"/momentum",variable:_r(function(){return $a(o).variable(!1)})}),n.accumulatedMeanGrads[i]==null&&n.centered&&(n.accumulatedMeanGrads[i]={originalName:s+"/mg",variable:_r(function(){return $a(o).variable(!1)})});var l=Array.isArray(r)?r[i].tensor:r[s];if(l!=null){var c=n.accumulatedMeanSquares[i].variable,d=n.accumulatedMoments[i].variable;_r(function(){var u=c.mul(n.decay).add(l.square().mul(1-n.decay));if(n.centered){var h=n.accumulatedMeanGrads[i].variable,m=h.mul(n.decay).add(l.mul(1-n.decay)),p=d.mul(n.momentum).add(l.mul(n.learningRate).div(u.sub(m.square().add(n.epsilon)).sqrt()));c.assign(u),h.assign(m),d.assign(p);var v=o.sub(p);o.assign(v)}else{var g=c.mul(n.decay).add(l.square().mul(1-n.decay));p=d.mul(n.momentum).add(l.mul(n.learningRate).div(g.add(n.epsilon).sqrt())),c.assign(g),d.assign(p),v=o.sub(p),o.assign(v)}})}}),this.incrementIterations()},t.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&fl(this.accumulatedMeanSquares.map(function(r){return r.variable})),this.accumulatedMeanGrads!=null&&this.centered&&fl(this.accumulatedMeanGrads.map(function(r){return r.variable})),this.accumulatedMoments!=null&&fl(this.accumulatedMoments.map(function(r){return r.variable}))},t.prototype.getWeights=function(){return Pr(this,void 0,void 0,function(){var r;return Or(this,function(n){switch(n.label){case 0:return r=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&r.push.apply(r,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(r.map(function(s){return{name:s.originalName,tensor:s.variable}}))]}})})},t.prototype.setWeights=function(r){return Pr(this,void 0,void 0,function(){var n;return Or(this,function(s){switch(s.label){case 0:return[4,this.extractIterations(r)];case 1:return r=s.sent(),n=this.centered?r.length/3:r.length/2,this.accumulatedMeanSquares=r.slice(0,n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.accumulatedMoments=r.slice(n,2*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=r.slice(2*n,3*n).map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}})),[2]}})})},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(r,n){return new r(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)},t.className="RMSProp",t}(Yx);Gx(jPe);os.prototype.squaredDifference=function(e){return FG(this,e)},Bt=GIe;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var a3=function(e,t){return a3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},a3(e,t)};function ha(e,t){a3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var yo=function(){return yo=Object.assign||function(t){for(var r,n=1,s=arguments.length;n<s;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},yo.apply(this,arguments)};function Br(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):s(u.value).then(l,c)}d((n=n.apply(e,[])).next())})}function Ur(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(d){return function(u){return c([d,u])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(u){d=[6,u],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function Yb(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,s++)n[s]=i[o];return n}var x0=function(){function e(t,r){if(!fx(t)||!fx(r))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:t,height:r}));this._width=t,this._height=r}return Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),e.prototype.reverse=function(){return new e(1/this.width,1/this.height)},e}();function VS(e,t){return e instanceof os&&e.shape.length===t}function NPe(e){return VS(e,2)}function qS(e){return VS(e,3)}function Om(e){return VS(e,4)}function wPe(e){return e%1!==0}function OB(e){return e%2===0}function SPe(e,t){t===void 0&&(t=2);var r=Math.pow(10,t);return Math.floor(e*r)/r}function MB(e){return e&&e.width&&e.height}function CPe(e,t){var r=e.width,n=e.height,s=t/Math.max(n,r);return new x0(Math.round(r*s),Math.round(n*s))}function z4(e){return e.reduce(function(t,r){return t.add(r)},new an(0,0)).div(new an(e.length,e.length))}function Iy(e,t,r){return Array(e).fill(0).map(function(n,s){return t+s*r})}function fx(e){return!!e&&e!==1/0&&e!==-1/0&&!isNaN(e)||e===0}function RB(e){return fx(e)&&0<=e&&e<=1}var an=function(){function e(t,r){this._x=t,this._y=r}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.add=function(t){return new e(this.x+t.x,this.y+t.y)},e.prototype.sub=function(t){return new e(this.x-t.x,this.y-t.y)},e.prototype.mul=function(t){return new e(this.x*t.x,this.y*t.y)},e.prototype.div=function(t){return new e(this.x/t.x,this.y/t.y)},e.prototype.abs=function(){return new e(Math.abs(this.x),Math.abs(this.y))},e.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},e.prototype.floor=function(){return new e(Math.floor(this.x),Math.floor(this.y))},e}(),zm=function(){function e(t,r){r===void 0&&(r=!0);var n=t||{},s=[n.left,n.top,n.right,n.bottom].every(fx),i=[n.x,n.y,n.width,n.height].every(fx);if(!i&&!s)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(n));var o=i?[n.x,n.y,n.width,n.height]:[n.left,n.top,n.right-n.left,n.bottom-n.top],l=o[0],c=o[1],d=o[2],u=o[3];e.assertIsValidBox({x:l,y:c,width:d,height:u},"Box.constructor",r),this._x=l,this._y=c,this._width=d,this._height=u}return e.isRect=function(t){return!!t&&[t.x,t.y,t.width,t.height].every(fx)},e.assertIsValidBox=function(t,r,n){if(n===void 0&&(n=!1),!e.isRect(t))throw new Error(r+" - invalid box: "+JSON.stringify(t)+", expected object with properties x, y, width, height");if(!n&&(t.width<0||t.height<0))throw new Error(r+" - width ("+t.width+") and height ("+t.height+") must be positive numbers")},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topLeft",{get:function(){return new an(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRight",{get:function(){return new an(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomLeft",{get:function(){return new an(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRight",{get:function(){return new an(this.right,this.bottom)},enumerable:!0,configurable:!0}),e.prototype.round=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.round(o)}),r=t[0],n=t[1],s=t[2],i=t[3];return new e({x:r,y:n,width:s,height:i})},e.prototype.floor=function(){var t=[this.x,this.y,this.width,this.height].map(function(o){return Math.floor(o)}),r=t[0],n=t[1],s=t[2],i=t[3];return new e({x:r,y:n,width:s,height:i})},e.prototype.toSquare=function(){var t=this,r=t.x,n=t.y,s=t.width,i=t.height,o=Math.abs(s-i);return s<i&&(r-=o/2,s+=o),i<s&&(n-=o/2,i+=o),new e({x:r,y:n,width:s,height:i})},e.prototype.rescale=function(t){var r=MB(t)?t.width:t,n=MB(t)?t.height:t;return new e({x:this.x*r,y:this.y*n,width:this.width*r,height:this.height*n})},e.prototype.pad=function(t,r){var n=[this.x-t/2,this.y-r/2,this.width+t,this.height+r],s=n[0],i=n[1],o=n[2],l=n[3];return new e({x:s,y:i,width:o,height:l})},e.prototype.clipAtImageBorders=function(t,r){var n=this,s=n.x,i=n.y,o=n.right,l=n.bottom,c=Math.max(s,0),d=Math.max(i,0),u=o-c,h=l-d,m=Math.min(u,t-c),p=Math.min(h,r-d);return new e({x:c,y:d,width:m,height:p}).floor()},e.prototype.shift=function(t,r){var n=this,s=n.width,i=n.height,o=this.x+t,l=this.y+r;return new e({x:o,y:l,width:s,height:i})},e.prototype.padAtBorders=function(t,r){var n=this.width+1,s=this.height+1,i=1,o=1,l=n,c=s,d=this.left,u=this.top,h=this.right,m=this.bottom;return h>r&&(l=-h+r+n,h=r),m>t&&(c=-m+t+s,m=t),d<1&&(c=2-d,d=1),u<1&&(c=2-u,u=1),{dy:o,edy:c,dx:i,edx:l,y:u,ey:m,x:d,ex:h,w:n,h:s}},e.prototype.calibrate=function(t){return new e({left:this.left+t.left*this.width,top:this.top+t.top*this.height,right:this.right+t.right*this.width,bottom:this.bottom+t.bottom*this.height}).toSquare().round()},e}(),zS=function(e){ha(t,e);function t(r,n,s,i,o){return o===void 0&&(o=!1),e.call(this,{left:r,top:n,right:s,bottom:i},o)||this}return t}(zm),wY=function(){function e(t,r,n,s,i){this._imageDims=new x0(i.width,i.height),this._score=t,this._classScore=r,this._className=n,this._box=new zm(s).rescale(this._imageDims)}return Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativeBox",{get:function(){return new zm(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,r){return new e(this.score,this.classScore,this.className,this.relativeBox,{width:t,height:r})},e}(),nh=function(e){ha(t,e);function t(r,n,s){return e.call(this,r,r,"",n,s)||this}return t.prototype.forSize=function(r,n){var s=e.prototype.forSize.call(this,r,n),i=s.score,o=s.relativeBox,l=s.imageDims;return new t(i,o,l)},t}(wY);function kPe(e,t,r){r===void 0&&(r=!0);var n=Math.max(0,Math.min(e.right,t.right)-Math.max(e.left,t.left)),s=Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),i=n*s;return r?i/(e.area+t.area-i):i/Math.min(e.area,t.area)}function _Pe(e){var t=e.map(function(l){return l.x}),r=e.map(function(l){return l.y}),n=t.reduce(function(l,c){return c<l?c:l},1/0),s=r.reduce(function(l,c){return c<l?c:l},1/0),i=t.reduce(function(l,c){return l<c?c:l},0),o=r.reduce(function(l,c){return l<c?c:l},0);return new zS(n,s,i,o)}function Py(e,t,r,n){n===void 0&&(n=!0);for(var s=t.map(function(l,c){return{score:l,boxIndex:c}}).sort(function(l,c){return l.score-c.score}).map(function(l){return l.boxIndex}),i=[],o=function(){var l=s.pop();i.push(l);for(var c=s,d=[],u=0;u<c.length;u++){var h=c[u],m=e[l],p=e[h];d.push(kPe(m,p,n))}s=s.filter(function(v,g){return d[g]<=r})};s.length>0;)o();return i}function b1(e,t){return _r(function(){var r=t[0],n=t[1],s=t[2],i=Vu(Yb(e.shape.slice(0,3),[1]),r),o=Vu(Yb(e.shape.slice(0,3),[1]),n),l=Vu(Yb(e.shape.slice(0,3),[1]),s),c=di([i,o,l],3);return mi(e,c)})}function EPe(e,t){return t===void 0&&(t=!1),_r(function(){var r=e.shape.slice(1),n=r[0],s=r[1];if(n===s)return e;var i=Math.abs(n-s),o=Math.round(i*(t?.5:1)),l=n>s?2:1,c=function(p){var v=e.shape.slice();return v[l]=p,Vu(v,0)},d=c(o),u=i-d.shape[l],h=t&&u?c(u):null,m=[h,e,d].filter(function(p){return!!p}).map(function(p){return p.toFloat()});return di(m,l)})}function GE(e){return 1/(1+Math.exp(-e))}var H4=function(e){ha(t,e);function t(r,n,s,i,o){return o===void 0&&(o=!1),e.call(this,{x:r,y:n,width:s,height:i},o)||this}return t}(zm),DPe=.5,APe=.43,TPe=.45,f2=function(){function e(t,r,n){n===void 0&&(n=new an(0,0));var s=r.width,i=r.height;this._imgDims=new x0(s,i),this._shift=n,this._positions=t.map(function(o){return o.mul(new an(s,i)).add(n)})}return Object.defineProperty(e.prototype,"shift",{get:function(){return new an(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"relativePositions",{get:function(){var t=this;return this._positions.map(function(r){return r.sub(t._shift).div(new an(t.imageWidth,t.imageHeight))})},enumerable:!0,configurable:!0}),e.prototype.forSize=function(t,r){return new this.constructor(this.relativePositions,{width:t,height:r})},e.prototype.shiftBy=function(t,r){return new this.constructor(this.relativePositions,this._imgDims,new an(t,r))},e.prototype.shiftByPoint=function(t){return this.shiftBy(t.x,t.y)},e.prototype.align=function(t,r){if(r===void 0&&(r={}),t){var n=t instanceof nh?t.box.floor():new zm(t);return this.shiftBy(n.x,n.y).align(null,r)}var s=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},r),i=s.useDlibAlignment,o=s.minBoxPadding;return i?this.alignDlib():this.alignMinBbox(o)},e.prototype.alignDlib=function(){var t=this.getRefPointsForAlignment(),r=t[0],n=t[1],s=t[2],i=function(h){return s.sub(h).magnitude()},o=(i(r)+i(n))/2,l=Math.floor(o/TPe),c=z4(t),d=Math.floor(Math.max(0,c.x-DPe*l)),u=Math.floor(Math.max(0,c.y-APe*l));return new H4(d,u,Math.min(l,this.imageWidth+d),Math.min(l,this.imageHeight+u))},e.prototype.alignMinBbox=function(t){var r=_Pe(this.positions);return r.pad(r.width*t,r.height*t)},e.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},e}(),IPe=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getRefPointsForAlignment=function(){var r=this.positions;return[r[0],r[1],z4([r[3],r[4]])]},t}(f2),PPe=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getJawOutline=function(){return this.positions.slice(0,17)},t.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},t.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},t.prototype.getNose=function(){return this.positions.slice(27,36)},t.prototype.getLeftEye=function(){return this.positions.slice(36,42)},t.prototype.getRightEye=function(){return this.positions.slice(42,48)},t.prototype.getMouth=function(){return this.positions.slice(48,68)},t.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(z4)},t}(f2),FB=function(){function e(t,r){this._label=t,this._distance=r}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){return t===void 0&&(t=!0),""+this.label+(t?" ("+SPe(this.distance)+")":"")},e}(),LB=function(e){ha(t,e);function t(r,n){var s=e.call(this,r)||this;return s._label=n,s}return t.assertIsValidLabeledBox=function(r,n){if(zm.assertIsValidBox(r,n),!fx(r.label))throw new Error(n+" - expected property label ("+r.label+") to be a number")},Object.defineProperty(t.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),t}(zm),e0=function(){function e(t,r){if(typeof t!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(r)||r.some(function(n){return!(n instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=t,this._descriptors=r}return Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(t){return Array.from(t)})}},e.fromJSON=function(t){var r=t.descriptors.map(function(n){return new Float32Array(n)});return new e(t.label,r)},e}();(function(e){ha(t,e);function t(r,n,s,i){var o=e.call(this,r,n)||this;return o._score=s,o._classScore=i,o}return t.assertIsValidPredictedBox=function(r,n){if(LB.assertIsValidLabeledBox(r,n),!RB(r.score)||!RB(r.classScore))throw new Error(n+" - expected properties score ("+r.score+") and ("+r.classScore+") to be a number between [0, 1]")},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),t})(LB);function OPe(e){return e.detection instanceof nh}function W4(e,t){var r={detection:t};return Object.assign({},e,r)}function SY(){var e=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},t=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:e,readFile:t}}function CY(e){var t="";if(!e)try{e=require("fs")}catch(n){t=n.toString()}var r=e?function(n){return new Promise(function(s,i){e.readFile(n,function(o,l){return o?i(o):s(l)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+t)};return{readFile:r}}function kY(){var e=global.Canvas||global.HTMLCanvasElement,t=global.Image||global.HTMLImageElement,r=function(){if(e)return new e;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},n=function(){if(t)return new t;throw new Error("createImageElement - missing Image implementation for nodejs environment")},s=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},i=CY();return yo({Canvas:e||function(){function o(){}return o}(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||function(){function o(){}return o}(),Image:t||function(){function o(){}return o}(),ImageData:global.ImageData||function(){function o(){}return o}(),Video:global.HTMLVideoElement||function(){function o(){}return o}(),createCanvasElement:r,createImageElement:n,fetch:s},i)}function _Y(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function EY(){return typeof global=="object"&&typeof require=="function"&&typeof module<"u"&&typeof process<"u"&&!!process.version}var li;function MPe(){if(!li)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return li}function n3(e){li=e}function G4(){_Y()&&n3(SY()),EY()&&n3(kY())}function RPe(e){if(li||G4(),!li)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var t=e.Canvas,r=t===void 0?li.Canvas:t,n=e.Image,s=n===void 0?li.Image:n;li.Canvas=r,li.Image=s,li.createCanvasElement=e.createCanvasElement||function(){return new r},li.createImageElement=e.createImageElement||function(){return new s},li.ImageData=e.ImageData||li.ImageData,li.Video=e.Video||li.Video,li.fetch=e.fetch||li.fetch,li.readFile=e.readFile||li.readFile}var Ao={getEnv:MPe,setEnv:n3,initialize:G4,createBrowserEnv:SY,createFileSystem:CY,createNodejsEnv:kY,monkeyPatch:RPe,isBrowser:_Y,isNodejs:EY};G4();function DY(e){return!Ao.isNodejs()&&typeof e=="string"?document.getElementById(e):e}function Ax(e){var t=Ao.getEnv(),r=t.Canvas,n=t.CanvasRenderingContext2D;if(e instanceof n)return e;var s=DY(e);if(!(s instanceof r))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var i=s.getContext("2d");if(!i)throw new Error("resolveContext2d - canvas 2d context is null");return i}var BB;(function(e){e.TOP_LEFT="TOP_LEFT",e.TOP_RIGHT="TOP_RIGHT",e.BOTTOM_LEFT="BOTTOM_LEFT",e.BOTTOM_RIGHT="BOTTOM_RIGHT"})(BB||(BB={}));function AY(e){var t=Ao.getEnv(),r=t.Image,n=t.Video;return e instanceof r&&e.complete||e instanceof n&&e.readyState>=3}function FPe(e){return new Promise(function(t,r){if(e instanceof Ao.getEnv().Canvas||AY(e))return t();function n(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",n),i.currentTarget.removeEventListener("error",s),t(i))}function s(i){i.currentTarget&&(i.currentTarget.removeEventListener("load",n),i.currentTarget.removeEventListener("error",s),r(i))}e.addEventListener("load",n),e.addEventListener("error",s)})}function TY(e){var t=Ao.getEnv(),r=t.Image,n=t.Video;return e instanceof r?new x0(e.naturalWidth,e.naturalHeight):e instanceof n?new x0(e.videoWidth,e.videoHeight):new x0(e.width,e.height)}function HS(e){var t=e.width,r=e.height,n=Ao.getEnv().createCanvasElement,s=n();return s.width=t,s.height=r,s}function Y4(e,t){var r=Ao.getEnv().ImageData;if(!(e instanceof r)&&!AY(e))throw new Error("createCanvasFromMedia - media has not finished loading yet");var n=TY(e),s=n.width,i=n.height,o=HS({width:s,height:i});return e instanceof r?Ax(o).putImageData(e,0,0):Ax(o).drawImage(e,0,0,s,i),o}function LPe(e,t){return Br(this,void 0,void 0,function(){var r,n,s,i,o,l;return Ur(this,function(c){switch(c.label){case 0:return r=Ao.getEnv().createCanvasElement(),n=e.shape.slice(Om(e)?1:0),s=n[0],i=n[1],o=n[2],l=_r(function(){return e.as3D(s,i,o).toInt()}),[4,q4.toPixels(l,r)];case 1:return c.sent(),l.dispose(),[2,r]}})})}function UB(e){var t=Ao.getEnv(),r=t.Image,n=t.Canvas,s=t.Video;return e instanceof r||e instanceof n||e instanceof s}function BPe(e,t,r){r===void 0&&(r=!1);var n=Ao.getEnv(),s=n.Image,i=n.Canvas;if(!(e instanceof s||e instanceof i))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var o=TY(e),l=t/Math.max(o.height,o.width),c=l*o.width,d=l*o.height,u=HS({width:t,height:t}),h=e instanceof i?e:Y4(e),m=Math.abs(c-d)/2,p=r&&c<d?m:0,v=r&&d<c?m:0;return Ax(u).drawImage(h,p,v,c,d),u}var m2=function(){function e(t,r){var n=this;if(r===void 0&&(r=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(t))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+t);this._treatAsBatchInput=r,this._batchSize=t.length,t.forEach(function(s,i){if(qS(s)){n._imageTensors[i]=s,n._inputDimensions[i]=s.shape;return}if(Om(s)){var o=s.shape[0];if(o!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+o+" passed, but not supported in input array");n._imageTensors[i]=s,n._inputDimensions[i]=s.shape.slice(1);return}var l=s instanceof Ao.getEnv().Canvas?s:Y4(s);n._canvases[i]=l,n._inputDimensions[i]=[l.height,l.width,3]})}return Object.defineProperty(e.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reshapedInputDimensions",{get:function(){var t=this;return Iy(this.batchSize,0,1).map(function(r,n){return t.getReshapedInputDimensions(n)})},enumerable:!0,configurable:!0}),e.prototype.getInput=function(t){return this.canvases[t]||this.imageTensors[t]},e.prototype.getInputDimensions=function(t){return this._inputDimensions[t]},e.prototype.getInputHeight=function(t){return this._inputDimensions[t][0]},e.prototype.getInputWidth=function(t){return this._inputDimensions[t][1]},e.prototype.getReshapedInputDimensions=function(t){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var r=this.getInputWidth(t),n=this.getInputHeight(t);return CPe({width:r,height:n},this.inputSize)},e.prototype.toBatchTensor=function(t,r){var n=this;return r===void 0&&(r=!0),this._inputSize=t,_r(function(){var s=Iy(n.batchSize,0,1).map(function(o){var l=n.getInput(o);if(l instanceof os){var c=Om(l)?l:l.expandDims();return c=EPe(c,r),(c.shape[1]!==t||c.shape[2]!==t)&&(c=F4.resizeBilinear(c,[t,t])),c.as3D(t,t,3)}if(l instanceof Ao.getEnv().Canvas)return q4.fromPixels(BPe(l,t,r));throw new Error("toBatchTensor - at batchIdx "+o+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+l)}),i=rc(s.map(function(o){return o.toFloat()})).as4D(n.batchSize,t,t,3);return i})},e}();function Di(e){return Br(this,void 0,void 0,function(){var t,r,n;return Ur(this,function(s){switch(s.label){case 0:if(e instanceof m2)return[2,e];if(t=Array.isArray(e)?e:[e],!t.length)throw new Error("toNetInput - empty array passed as input");return r=function(i){return Array.isArray(e)?" at input index "+i+":":""},n=t.map(DY),n.forEach(function(i,o){if(!UB(i)&&!qS(i)&&!Om(i))throw typeof t[o]=="string"?new Error("toNetInput -"+r(o)+" string passed, but could not resolve HTMLElement for element id "+t[o]):new Error("toNetInput -"+r(o)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(Om(i)){var l=i.shape[0];if(l!==1)throw new Error("toNetInput -"+r(o)+" tf.Tensor4D with batchSize "+l+" passed, but not supported in input array")}}),[4,Promise.all(n.map(function(i){return UB(i)&&FPe(i)}))];case 1:return s.sent(),[2,new m2(n,Array.isArray(e))]}})})}function K4(e,t){return Br(this,void 0,void 0,function(){var r,n,s,i,o,l,c;return Ur(this,function(d){switch(d.label){case 0:return r=Ao.getEnv().Canvas,n=e,e instanceof r?[3,5]:[4,Di(e)];case 1:if(s=d.sent(),s.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return i=s.getInput(0),i instanceof r?(o=i,[3,4]):[3,2];case 2:return[4,LPe(i)];case 3:o=d.sent(),d.label=4;case 4:n=o,d.label=5;case 5:return l=Ax(n),c=t.map(function(u){return u instanceof nh?u.forSize(n.width,n.height).box.floor():u}).map(function(u){return u.clipAtImageBorders(n.width,n.height)}),[2,c.map(function(u){var h=u.x,m=u.y,p=u.width,v=u.height,g=HS({width:p,height:v});return Ax(g).putImageData(l.getImageData(h,m,p,v),0,0),g})]}})})}function X4(e,t){return Br(this,void 0,void 0,function(){return Ur(this,function(r){if(!qS(e)&&!Om(e))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(Om(e)&&e.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,_r(function(){var n=e.shape.slice(Om(e)?1:0),s=n[0],i=n[1],o=n[2],l=t.map(function(d){return d instanceof nh?d.forSize(i,s).box:d}).map(function(d){return d.clipAtImageBorders(i,s)}),c=l.map(function(d){var u=d.x,h=d.y,m=d.width,p=d.height;return nY(e.as3D(s,i,o),[h,u,0],[p,m,o])});return c})]})})}function UPe(e,t){return Br(this,void 0,void 0,function(){var r,n;return Ur(this,function(s){switch(s.label){case 0:return r=Ao.getEnv().fetch,[4,r(e,t)];case 1:if(n=s.sent(),!(n.status<400))throw new Error("failed to fetch: ("+n.status+") "+n.statusText+", from url: "+n.url);return[2,n]}})})}function $Pe(e){return Br(this,void 0,void 0,function(){return Ur(this,function(t){switch(t.label){case 0:return[4,UPe(e)];case 1:return[2,t.sent().json()]}})})}function IY(e,t){var r=t+"-weights_manifest.json";if(!e)return{modelBaseUri:"",manifestUri:r};if(e==="/")return{modelBaseUri:"/",manifestUri:"/"+r};var n=e.startsWith("http://")?"http://":e.startsWith("https://")?"https://":"";e=e.replace(n,"");var s=e.split("/").filter(function(l){return l}),i=e.endsWith(".json")?s[s.length-1]:r,o=n+(e.endsWith(".json")?s.slice(0,s.length-1):s).join("/");return o=e.startsWith("/")?"/"+o:o,{modelBaseUri:o,manifestUri:o==="/"?"/"+i:o+"/"+i}}function VPe(e,t){return Br(this,void 0,void 0,function(){var r,n,s,i;return Ur(this,function(o){switch(o.label){case 0:return r=IY(e,t),n=r.manifestUri,s=r.modelBaseUri,[4,$Pe(n)];case 1:return i=o.sent(),[2,jY.loadWeights(i,s)]}})})}var wf=function(){function e(t){this._name=t,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(e.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),e.prototype.getParamFromPath=function(t){var r=this.traversePropertyPath(t),n=r.obj,s=r.objProp;return n[s]},e.prototype.reassignParamFromPath=function(t,r){var n=this.traversePropertyPath(t),s=n.obj,i=n.objProp;s[i].dispose(),s[i]=r},e.prototype.getParamList=function(){var t=this;return this._paramMappings.map(function(r){var n=r.paramPath;return{path:n,tensor:t.getParamFromPath(n)}})},e.prototype.getTrainableParams=function(){return this.getParamList().filter(function(t){return t.tensor instanceof L0})},e.prototype.getFrozenParams=function(){return this.getParamList().filter(function(t){return!(t.tensor instanceof L0)})},e.prototype.variable=function(){var t=this;this.getFrozenParams().forEach(function(r){var n=r.path,s=r.tensor;t.reassignParamFromPath(n,s.variable())})},e.prototype.freeze=function(){var t=this;this.getTrainableParams().forEach(function(r){var n=r.path,s=r.tensor,i=Ki(s.dataSync());s.dispose(),t.reassignParamFromPath(n,i)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.getParamList().forEach(function(r){if(t&&r.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+r.path);r.tensor.dispose()}),this._params=void 0},e.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(t){var r=t.tensor;return Array.from(r.dataSync())}).reduce(function(t,r){return t.concat(r)}))},e.prototype.load=function(t){return Br(this,void 0,void 0,function(){return Ur(this,function(r){switch(r.label){case 0:return t instanceof Float32Array?(this.extractWeights(t),[2]):[4,this.loadFromUri(t)];case 1:return r.sent(),[2]}})})},e.prototype.loadFromUri=function(t){return Br(this,void 0,void 0,function(){var r;return Ur(this,function(n){switch(n.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,VPe(t,this.getDefaultModelName())];case 1:return r=n.sent(),this.loadFromWeightMap(r),[2]}})})},e.prototype.loadFromDisk=function(t){return Br(this,void 0,void 0,function(){var r,n,s,i,o,l,c,d,u,h;return Ur(this,function(m){switch(m.label){case 0:if(t&&typeof t!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return r=Ao.getEnv().readFile,n=IY(t,this.getDefaultModelName()),s=n.manifestUri,i=n.modelBaseUri,o=function(p){return Promise.all(p.map(function(v){return r(v).then(function(g){return g.buffer})}))},l=jY.weightsLoaderFactory(o),u=(d=JSON).parse,[4,r(s)];case 1:return c=u.apply(d,[m.sent().toString()]),[4,l(c,i)];case 2:return h=m.sent(),this.loadFromWeightMap(h),[2]}})})},e.prototype.loadFromWeightMap=function(t){var r=this.extractParamsFromWeigthMap(t),n=r.paramMappings,s=r.params;this._paramMappings=n,this._params=s},e.prototype.extractWeights=function(t){var r=this.extractParams(t),n=r.paramMappings,s=r.params;this._paramMappings=n,this._params=s},e.prototype.traversePropertyPath=function(t){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var r=t.split("/").reduce(function(i,o){if(!i.nextObj.hasOwnProperty(o))throw new Error("traversePropertyPath - object does not have property "+o+", for path "+t);return{obj:i.nextObj,objProp:o,nextObj:i.nextObj[o]}},{nextObj:this.params}),n=r.obj,s=r.objProp;if(!n||!s||!(n[s]instanceof os))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+t);return{obj:n,objProp:s}},e}();function Xl(e,t,r){return _r(function(){var n=I4(e,t.depthwise_filter,t.pointwise_filter,r,"same");return n=Ta(n,t.bias),n})}function YE(e,t,r){return r===void 0&&(r=!1),_r(function(){var n=us(r?Ta(Zc(e,t.conv0.filters,[2,2],"same"),t.conv0.bias):Xl(e,t.conv0,[2,2])),s=Xl(n,t.conv1,[1,1]),i=us(Ta(n,s)),o=Xl(i,t.conv2,[1,1]);return us(Ta(n,Ta(s,o)))})}function iN(e,t,r,n){return r===void 0&&(r=!1),n===void 0&&(n=!0),_r(function(){var s=us(r?Ta(Zc(e,t.conv0.filters,n?[2,2]:[1,1],"same"),t.conv0.bias):Xl(e,t.conv0,n?[2,2]:[1,1])),i=Xl(s,t.conv1,[1,1]),o=us(Ta(s,i)),l=Xl(o,t.conv2,[1,1]),c=us(Ta(s,Ta(i,l))),d=Xl(c,t.conv3,[1,1]);return us(Ta(s,Ta(i,Ta(l,d))))})}function Pd(e,t,r,n){return r===void 0&&(r="same"),n===void 0&&(n=!1),_r(function(){var s=Ta(Zc(e,t.filters,[1,1],r),t.bias);return n?us(s):s})}function Sf(e,t){Object.keys(e).forEach(function(r){t.some(function(n){return n.originalPath===r})||e[r].dispose()})}function WS(e,t){return function(r,n,s,i){var o=ol(e(r*n*s*s),[s,s,r,n]),l=ti(e(n));return t.push({paramPath:i+"/filters"},{paramPath:i+"/bias"}),{filters:o,bias:l}}}function Q4(e,t){return function(r,n,s){var i=Im(e(r*n),[r,n]),o=ti(e(n));return t.push({paramPath:s+"/weights"},{paramPath:s+"/bias"}),{weights:i,bias:o}}}var PY=function(){function e(t,r,n){this.depthwise_filter=t,this.pointwise_filter=r,this.bias=n}return e}();function J4(e,t){return function(r,n,s){var i=ol(e(9*r),[3,3,r,1]),o=ol(e(r*n),[1,1,r,n]),l=ti(e(n));return t.push({paramPath:s+"/depthwise_filter"},{paramPath:s+"/pointwise_filter"},{paramPath:s+"/bias"}),new PY(i,o,l)}}function Z4(e){return function(t){var r=e(t+"/depthwise_filter",4),n=e(t+"/pointwise_filter",4),s=e(t+"/bias",1);return new PY(r,n,s)}}function np(e,t){return function(r,n,s){var i=e[r];if(!VS(i,n))throw new Error("expected weightMap["+r+"] to be a Tensor"+n+"D, instead have "+i);return t.push({originalPath:r,paramPath:s||r}),i}}function Cf(e){var t=e;function r(s){var i=t.slice(0,s);return t=t.slice(s),i}function n(){return t}return{extractWeights:r,getRemainingWeights:n}}function OY(e,t){var r=WS(e,t),n=J4(e,t);function s(o,l,c,d){d===void 0&&(d=!1);var u=d?r(o,l,3,c+"/conv0"):n(o,l,c+"/conv0"),h=n(l,l,c+"/conv1"),m=n(l,l,c+"/conv2");return{conv0:u,conv1:h,conv2:m}}function i(o,l,c,d){d===void 0&&(d=!1);var u=s(o,l,c,d),h=u.conv0,m=u.conv1,p=u.conv2,v=n(l,l,c+"/conv3");return{conv0:h,conv1:m,conv2:p,conv3:v}}return{extractDenseBlock3Params:s,extractDenseBlock4Params:i}}function qPe(e){var t=[],r=Cf(e),n=r.extractWeights,s=r.getRemainingWeights,i=OY(n,t).extractDenseBlock4Params,o=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2"),d=i(128,256,"dense3");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:o,dense1:l,dense2:c,dense3:d}}}function MY(e){return function(t){var r=e(t+"/filters",4),n=e(t+"/bias",1);return{filters:r,bias:n}}}function RY(e,t){var r=np(e,t),n=MY(r),s=Z4(r);function i(l,c){c===void 0&&(c=!1);var d=c?n(l+"/conv0"):s(l+"/conv0"),u=s(l+"/conv1"),h=s(l+"/conv2");return{conv0:d,conv1:u,conv2:h}}function o(l,c){c===void 0&&(c=!1);var d=c?n(l+"/conv0"):s(l+"/conv0"),u=s(l+"/conv1"),h=s(l+"/conv2"),m=s(l+"/conv3");return{conv0:d,conv1:u,conv2:h,conv3:m}}return{extractDenseBlock3Params:i,extractDenseBlock4Params:o}}function zPe(e){var t=[],r=RY(e,t).extractDenseBlock4Params,n={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2"),dense3:r("dense3")};return Sf(e,t),{params:n,paramMappings:t}}var FY=function(e){ha(t,e);function t(){return e.call(this,"FaceFeatureExtractor")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("FaceFeatureExtractor - load model before inference");return _r(function(){var s=r.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=b1(s,i).div(Nr(255)),l=iN(o,n.dense0,!0);return l=iN(l,n.dense1),l=iN(l,n.dense2),l=iN(l,n.dense3),l=v1(l,[7,7],[2,2],"valid"),l})},t.prototype.forward=function(r){return Br(this,void 0,void 0,function(){var n;return Ur(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},t.prototype.extractParamsFromWeigthMap=function(r){return zPe(r)},t.prototype.extractParams=function(r){return qPe(r)},t}(wf);function Ou(e,t){return _r(function(){return Ta(BS(e,t.weights),t.bias)})}function HPe(e,t,r){var n=[],s=Cf(e),i=s.extractWeights,o=s.getRemainingWeights,l=Q4(i,n),c=l(t,r,"fc");if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:n,params:{fc:c}}}function WPe(e){var t=[],r=np(e,t);function n(i){var o=r(i+"/weights",2),l=r(i+"/bias",1);return{weights:o,bias:l}}var s={fc:n("fc")};return Sf(e,t),{params:s,paramMappings:t}}function LY(e){var t={},r={};return Object.keys(e).forEach(function(n){var s=n.startsWith("fc")?r:t;s[n]=e[n]}),{featureExtractorMap:t,classifierMap:r}}var BY=function(e){ha(t,e);function t(r,n){var s=e.call(this,r)||this;return s._faceFeatureExtractor=n,s}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(r){var n=this,s=this.params;if(!s)throw new Error(this._name+" - load model before inference");return _r(function(){var i=r instanceof m2?n.faceFeatureExtractor.forwardInput(r):r;return Ou(i.as2D(i.shape[0],-1),s.fc)})},t.prototype.dispose=function(r){r===void 0&&(r=!0),this.faceFeatureExtractor.dispose(r),e.prototype.dispose.call(this,r)},t.prototype.loadClassifierParams=function(r){var n=this.extractClassifierParams(r),s=n.params,i=n.paramMappings;this._params=s,this._paramMappings=i},t.prototype.extractClassifierParams=function(r){return HPe(r,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},t.prototype.extractParamsFromWeigthMap=function(r){var n=LY(r),s=n.featureExtractorMap,i=n.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(s),WPe(i)},t.prototype.extractParams=function(r){var n=this.getClassifierChannelsIn(),s=this.getClassifierChannelsOut(),i=s*n+s,o=r.slice(0,r.length-i),l=r.slice(r.length-i);return this.faceFeatureExtractor.extractWeights(o),this.extractClassifierParams(l)},t}(wf),$B=["neutral","happy","sad","angry","fearful","disgusted","surprised"],GPe=function(){function e(t){var r=this;if(t.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+t.length);$B.forEach(function(n,s){r[n]=t[s]})}return e.prototype.asSortedArray=function(){var t=this;return $B.map(function(r){return{expression:r,probability:t[r]}}).sort(function(r,n){return n.probability-r.probability})},e}(),YPe=function(e){ha(t,e);function t(r){return r===void 0&&(r=new FY),e.call(this,"FaceExpressionNet",r)||this}return t.prototype.forwardInput=function(r){var n=this;return _r(function(){return jf(n.runNet(r))})},t.prototype.forward=function(r){return Br(this,void 0,void 0,function(){var n;return Ur(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.predictExpressions=function(r){return Br(this,void 0,void 0,function(){var n,s,i,o,l=this;return Ur(this,function(c){switch(c.label){case 0:return[4,Di(r)];case 1:return n=c.sent(),[4,this.forwardInput(n)];case 2:return s=c.sent(),[4,Promise.all(ui(s).map(function(d){return Br(l,void 0,void 0,function(){var u;return Ur(this,function(h){switch(h.label){case 0:return[4,d.data()];case 1:return u=h.sent(),d.dispose(),[2,u]}})})}))];case 3:return i=c.sent(),s.dispose(),o=i.map(function(d){return new GPe(d)}),[2,n.isBatchInput?o:o[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_expression_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t.prototype.getClassifierChannelsOut=function(){return 7},t}(BY);function UY(e,t){var r={expressions:t};return Object.assign({},e,r)}function KPe(e){return OPe(e)&&e.landmarks instanceof f2&&e.unshiftedLandmarks instanceof f2&&e.alignedRect instanceof nh}function eI(e,t){var r=e.detection.box,n=t.shiftBy(r.x,r.y),s=n.align(),i=e.detection.imageDims,o=new nh(e.detection.score,s.rescale(i.reverse()),i),l={landmarks:n,unshiftedLandmarks:t,alignedRect:o};return Object.assign({},e,l)}function XPe(e,t){var r=WS(e,t),n=J4(e,t);function s(o,l,c){var d=n(o,l,c+"/separable_conv0"),u=n(l,l,c+"/separable_conv1"),h=r(o,l,1,c+"/expansion_conv");return{separable_conv0:d,separable_conv1:u,expansion_conv:h}}function i(o,l){var c=n(o,o,l+"/separable_conv0"),d=n(o,o,l+"/separable_conv1"),u=n(o,o,l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:u}}return{extractConvParams:r,extractSeparableConvParams:n,extractReductionBlockParams:s,extractMainBlockParams:i}}function QPe(e,t){var r=[],n=Cf(e),s=n.extractWeights,i=n.getRemainingWeights,o=XPe(s,r),l=o.extractConvParams,c=o.extractSeparableConvParams,d=o.extractReductionBlockParams,u=o.extractMainBlockParams,h=l(3,32,3,"entry_flow/conv_in"),m=d(32,64,"entry_flow/reduction_block_0"),p=d(64,128,"entry_flow/reduction_block_1"),v={conv_in:h,reduction_block_0:m,reduction_block_1:p},g={};Iy(t,0,1).forEach(function(w){g["main_block_"+w]=u(128,"middle_flow/main_block_"+w)});var b=d(128,256,"exit_flow/reduction_block"),y=c(256,512,"exit_flow/separable_conv"),C={reduction_block:b,separable_conv:y};if(i().length!==0)throw new Error("weights remaing after extract: "+i().length);return{paramMappings:r,params:{entry_flow:v,middle_flow:g,exit_flow:C}}}function JPe(e,t){var r=np(e,t),n=MY(r),s=Z4(r);function i(l){var c=s(l+"/separable_conv0"),d=s(l+"/separable_conv1"),u=n(l+"/expansion_conv");return{separable_conv0:c,separable_conv1:d,expansion_conv:u}}function o(l){var c=s(l+"/separable_conv0"),d=s(l+"/separable_conv1"),u=s(l+"/separable_conv2");return{separable_conv0:c,separable_conv1:d,separable_conv2:u}}return{extractConvParams:n,extractSeparableConvParams:s,extractReductionBlockParams:i,extractMainBlockParams:o}}function ZPe(e,t){var r=[],n=JPe(e,r),s=n.extractConvParams,i=n.extractSeparableConvParams,o=n.extractReductionBlockParams,l=n.extractMainBlockParams,c=s("entry_flow/conv_in"),d=o("entry_flow/reduction_block_0"),u=o("entry_flow/reduction_block_1"),h={conv_in:c,reduction_block_0:d,reduction_block_1:u},m={};Iy(t,0,1).forEach(function(b){m["main_block_"+b]=l("middle_flow/main_block_"+b)});var p=o("exit_flow/reduction_block"),v=i("exit_flow/separable_conv"),g={reduction_block:p,separable_conv:v};return Sf(e,r),{params:{entry_flow:h,middle_flow:m,exit_flow:g},paramMappings:r}}function $Y(e,t,r){return Ta(Zc(e,t.filters,r,"same"),t.bias)}function KE(e,t,r){r===void 0&&(r=!0);var n=r?us(e):e;return n=Xl(n,t.separable_conv0,[1,1]),n=Xl(us(n),t.separable_conv1,[1,1]),n=Ni(n,[3,3],[2,2],"same"),n=Ta(n,$Y(e,t.expansion_conv,[2,2])),n}function eOe(e,t){var r=Xl(us(e),t.separable_conv0,[1,1]);return r=Xl(us(r),t.separable_conv1,[1,1]),r=Xl(us(r),t.separable_conv2,[1,1]),r=Ta(r,e),r}var tOe=function(e){ha(t,e);function t(r){var n=e.call(this,"TinyXception")||this;return n._numMainBlocks=r,n}return t.prototype.forwardInput=function(r){var n=this,s=this.params;if(!s)throw new Error("TinyXception - load model before inference");return _r(function(){var i=r.toBatchTensor(112,!0),o=[122.782,117.001,104.298],l=b1(i,o).div(Nr(256)),c=us($Y(l,s.entry_flow.conv_in,[2,2]));return c=KE(c,s.entry_flow.reduction_block_0,!1),c=KE(c,s.entry_flow.reduction_block_1),Iy(n._numMainBlocks,0,1).forEach(function(d){c=eOe(c,s.middle_flow["main_block_"+d])}),c=KE(c,s.exit_flow.reduction_block),c=us(Xl(c,s.exit_flow.separable_conv,[1,1])),c})},t.prototype.forward=function(r){return Br(this,void 0,void 0,function(){var n;return Ur(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"tiny_xception_model"},t.prototype.extractParamsFromWeigthMap=function(r){return ZPe(r,this._numMainBlocks)},t.prototype.extractParams=function(r){return QPe(r,this._numMainBlocks)},t}(wf);function rOe(e){var t=[],r=Cf(e),n=r.extractWeights,s=r.getRemainingWeights,i=Q4(n,t),o=i(512,1,"fc/age"),l=i(512,2,"fc/gender");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{fc:{age:o,gender:l}}}}function aOe(e){var t=[],r=np(e,t);function n(i){var o=r(i+"/weights",2),l=r(i+"/bias",1);return{weights:o,bias:l}}var s={fc:{age:n("fc/age"),gender:n("fc/gender")}};return Sf(e,t),{params:s,paramMappings:t}}var p2;(function(e){e.FEMALE="female",e.MALE="male"})(p2||(p2={}));var nOe=function(e){ha(t,e);function t(r){r===void 0&&(r=new tOe(2));var n=e.call(this,"AgeGenderNet")||this;return n._faceFeatureExtractor=r,n}return Object.defineProperty(t.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),t.prototype.runNet=function(r){var n=this,s=this.params;if(!s)throw new Error(this._name+" - load model before inference");return _r(function(){var i=r instanceof m2?n.faceFeatureExtractor.forwardInput(r):r,o=v1(i,[7,7],[2,2],"valid").as2D(i.shape[0],-1),l=Ou(o,s.fc.age).as1D(),c=Ou(o,s.fc.gender);return{age:l,gender:c}})},t.prototype.forwardInput=function(r){var n=this;return _r(function(){var s=n.runNet(r),i=s.age,o=s.gender;return{age:i,gender:jf(o)}})},t.prototype.forward=function(r){return Br(this,void 0,void 0,function(){var n;return Ur(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.predictAgeAndGender=function(r){return Br(this,void 0,void 0,function(){var n,s,i,o,l,c,d=this;return Ur(this,function(u){switch(u.label){case 0:return[4,Di(r)];case 1:return n=u.sent(),[4,this.forwardInput(n)];case 2:return s=u.sent(),i=ui(s.age),o=ui(s.gender),l=i.map(function(h,m){return{ageTensor:h,genderTensor:o[m]}}),[4,Promise.all(l.map(function(h){var m=h.ageTensor,p=h.genderTensor;return Br(d,void 0,void 0,function(){var v,g,b,y,C;return Ur(this,function(w){switch(w.label){case 0:return[4,m.data()];case 1:return v=w.sent()[0],[4,p.data()];case 2:return g=w.sent()[0],b=g>.5,y=b?p2.MALE:p2.FEMALE,C=b?g:1-g,m.dispose(),p.dispose(),[2,{age:v,gender:y,genderProbability:C}]}})})}))];case 3:return c=u.sent(),s.age.dispose(),s.gender.dispose(),[2,n.isBatchInput?c:c[0]]}})})},t.prototype.getDefaultModelName=function(){return"age_gender_model"},t.prototype.dispose=function(r){r===void 0&&(r=!0),this.faceFeatureExtractor.dispose(r),e.prototype.dispose.call(this,r)},t.prototype.loadClassifierParams=function(r){var n=this.extractClassifierParams(r),s=n.params,i=n.paramMappings;this._params=s,this._paramMappings=i},t.prototype.extractClassifierParams=function(r){return rOe(r)},t.prototype.extractParamsFromWeigthMap=function(r){var n=LY(r),s=n.featureExtractorMap,i=n.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(s),aOe(i)},t.prototype.extractParams=function(r){var n=1539,s=r.slice(0,r.length-n),i=r.slice(r.length-n);return this.faceFeatureExtractor.extractWeights(s),this.extractClassifierParams(i)},t}(wf),VY=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.postProcess=function(r,n,s){var i=s.map(function(l){var c=l.width,d=l.height,u=n/Math.max(d,c);return{width:c*u,height:d*u}}),o=i.length;return _r(function(){var l=function(m,p){return rc([Vu([68],m),Vu([68],p)],1).as2D(1,136).as1D()},c=function(m,p){var v=i[m],g=v.width,b=v.height;return p(g,b)?Math.abs(g-b)/2:0},d=function(m){return c(m,function(p,v){return p<v})},u=function(m){return c(m,function(p,v){return v<p})},h=r.mul(Vu([o,136],n)).sub(rc(Array.from(Array(o),function(m,p){return l(d(p),u(p))}))).div(rc(Array.from(Array(o),function(m,p){return l(i[p].width,i[p].height)})));return h})},t.prototype.forwardInput=function(r){var n=this;return _r(function(){var s=n.runNet(r);return n.postProcess(s,r.inputSize,r.inputDimensions.map(function(i){var o=i[0],l=i[1];return{height:o,width:l}}))})},t.prototype.forward=function(r){return Br(this,void 0,void 0,function(){var n;return Ur(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.detectLandmarks=function(r){return Br(this,void 0,void 0,function(){var n,s,i,o=this;return Ur(this,function(l){switch(l.label){case 0:return[4,Di(r)];case 1:return n=l.sent(),s=_r(function(){return ui(o.forwardInput(n))}),[4,Promise.all(s.map(function(c,d){return Br(o,void 0,void 0,function(){var u,h,m,p,v;return Ur(this,function(g){switch(g.label){case 0:return m=(h=Array).from,[4,c.data()];case 1:return u=m.apply(h,[g.sent()]),p=u.filter(function(b,y){return OB(y)}),v=u.filter(function(b,y){return!OB(y)}),[2,new PPe(Array(68).fill(0).map(function(b,y){return new an(p[y],v[y])}),{height:n.getInputHeight(d),width:n.getInputWidth(d)})]}})})}))];case 2:return i=l.sent(),s.forEach(function(c){return c.dispose()}),[2,n.isBatchInput?i:i[0]]}})})},t.prototype.getClassifierChannelsOut=function(){return 136},t}(BY),qY=function(e){ha(t,e);function t(r){return r===void 0&&(r=new FY),e.call(this,"FaceLandmark68Net",r)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},t.prototype.getClassifierChannelsIn=function(){return 256},t}(VY);function sOe(e){var t=[],r=RY(e,t).extractDenseBlock3Params,n={dense0:r("dense0",!0),dense1:r("dense1"),dense2:r("dense2")};return Sf(e,t),{params:n,paramMappings:t}}function iOe(e){var t=[],r=Cf(e),n=r.extractWeights,s=r.getRemainingWeights,i=OY(n,t).extractDenseBlock3Params,o=i(3,32,"dense0",!0),l=i(32,64,"dense1"),c=i(64,128,"dense2");if(s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{paramMappings:t,params:{dense0:o,dense1:l,dense2:c}}}var oOe=function(e){ha(t,e);function t(){return e.call(this,"TinyFaceFeatureExtractor")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("TinyFaceFeatureExtractor - load model before inference");return _r(function(){var s=r.toBatchTensor(112,!0),i=[122.782,117.001,104.298],o=b1(s,i).div(Nr(255)),l=YE(o,n.dense0,!0);return l=YE(l,n.dense1),l=YE(l,n.dense2),l=v1(l,[14,14],[2,2],"valid"),l})},t.prototype.forward=function(r){return Br(this,void 0,void 0,function(){var n;return Ur(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},t.prototype.extractParamsFromWeigthMap=function(r){return sOe(r)},t.prototype.extractParams=function(r){return iOe(r)},t}(wf),lOe=function(e){ha(t,e);function t(r){return r===void 0&&(r=new oOe),e.call(this,"FaceLandmark68TinyNet",r)||this}return t.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},t.prototype.getClassifierChannelsIn=function(){return 128},t}(VY);(function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(qY);function cOe(e,t){return Ta(_o(e,t.weights),t.biases)}function tI(e,t,r,n,s){s===void 0&&(s="same");var i=t.conv,o=i.filters,l=i.bias,c=Zc(e,o,r,s);return c=Ta(c,l),c=cOe(c,t.scale),n?us(c):c}function dOe(e,t){return tI(e,t,[1,1],!0)}function zY(e,t){return tI(e,t,[1,1],!1)}function HY(e,t){return tI(e,t,[2,2],!0,"valid")}function uOe(e,t){function r(l,c,d){var u=e(l),h=u.length/(c*d*d);if(wPe(h))throw new Error("depth has to be an integer: "+h+", weights.length: "+u.length+", numFilters: "+c+", filterSize: "+d);return _r(function(){return qm(ol(u,[c,h,d,d]),[2,3,1,0])})}function n(l,c,d,u){var h=r(l,c,d),m=ti(e(c));return t.push({paramPath:u+"/filters"},{paramPath:u+"/bias"}),{filters:h,bias:m}}function s(l,c){var d=ti(e(l)),u=ti(e(l));return t.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:d,biases:u}}function i(l,c,d,u){var h=n(l,c,d,u+"/conv"),m=s(c,u+"/scale");return{conv:h,scale:m}}function o(l,c,d,u,h){h===void 0&&(h=!1);var m=i((h?.5:1)*l,c,d,u+"/conv1"),p=i(l,c,d,u+"/conv2");return{conv1:m,conv2:p}}return{extractConvLayerParams:i,extractResidualLayerParams:o}}function hOe(e){var t=Cf(e),r=t.extractWeights,n=t.getRemainingWeights,s=[],i=uOe(r,s),o=i.extractConvLayerParams,l=i.extractResidualLayerParams,c=o(4704,32,7,"conv32_down"),d=l(9216,32,3,"conv32_1"),u=l(9216,32,3,"conv32_2"),h=l(9216,32,3,"conv32_3"),m=l(36864,64,3,"conv64_down",!0),p=l(36864,64,3,"conv64_1"),v=l(36864,64,3,"conv64_2"),g=l(36864,64,3,"conv64_3"),b=l(147456,128,3,"conv128_down",!0),y=l(147456,128,3,"conv128_1"),C=l(147456,128,3,"conv128_2"),w=l(589824,256,3,"conv256_down",!0),k=l(589824,256,3,"conv256_1"),S=l(589824,256,3,"conv256_2"),D=l(589824,256,3,"conv256_down_out"),E=_r(function(){return qm(Im(r(256*128),[128,256]),[1,0])});if(s.push({paramPath:"fc"}),n().length!==0)throw new Error("weights remaing after extract: "+n().length);var T={conv32_down:c,conv32_1:d,conv32_2:u,conv32_3:h,conv64_down:m,conv64_1:p,conv64_2:v,conv64_3:g,conv128_down:b,conv128_1:y,conv128_2:C,conv256_down:w,conv256_1:k,conv256_2:S,conv256_down_out:D,fc:E};return{params:T,paramMappings:s}}function fOe(e,t){var r=np(e,t);function n(o){var l=r(o+"/scale/weights",1),c=r(o+"/scale/biases",1);return{weights:l,biases:c}}function s(o){var l=r(o+"/conv/filters",4),c=r(o+"/conv/bias",1),d=n(o);return{conv:{filters:l,bias:c},scale:d}}function i(o){return{conv1:s(o+"/conv1"),conv2:s(o+"/conv2")}}return{extractConvLayerParams:s,extractResidualLayerParams:i}}function mOe(e){var t=[],r=fOe(e,t),n=r.extractConvLayerParams,s=r.extractResidualLayerParams,i=n("conv32_down"),o=s("conv32_1"),l=s("conv32_2"),c=s("conv32_3"),d=s("conv64_down"),u=s("conv64_1"),h=s("conv64_2"),m=s("conv64_3"),p=s("conv128_down"),v=s("conv128_1"),g=s("conv128_2"),b=s("conv256_down"),y=s("conv256_1"),C=s("conv256_2"),w=s("conv256_down_out"),k=e.fc;if(t.push({originalPath:"fc",paramPath:"fc"}),!NPe(k))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+k);var S={conv32_down:i,conv32_1:o,conv32_2:l,conv32_3:c,conv64_down:d,conv64_1:u,conv64_2:h,conv64_3:m,conv128_down:p,conv128_1:v,conv128_2:g,conv256_down:b,conv256_1:y,conv256_2:C,conv256_down_out:w,fc:k};return Sf(e,t),{params:S,paramMappings:t}}function gu(e,t){var r=dOe(e,t.conv1);return r=zY(r,t.conv2),r=Ta(r,e),r=us(r),r}function oN(e,t){var r=HY(e,t.conv1);r=zY(r,t.conv2);var n=v1(e,2,2,"valid"),s=Ln(n.shape),i=n.shape[3]!==r.shape[3],o=n.shape[1]!==r.shape[1]||n.shape[2]!==r.shape[2];if(o){var l=Yb(r.shape);l[1]=1;var c=Ln(l);r=di([r,c],1);var d=Yb(r.shape);d[2]=1;var u=Ln(d);r=di([r,u],2)}return n=i?di([n,s],3):n,r=Ta(n,r),r=us(r),r}var pOe=function(e){ha(t,e);function t(){return e.call(this,"FaceRecognitionNet")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("FaceRecognitionNet - load model before inference");return _r(function(){var s=r.toBatchTensor(150,!0).toFloat(),i=[122.782,117.001,104.298],o=b1(s,i).div(Nr(256)),l=HY(o,n.conv32_down);l=Ni(l,3,2,"valid"),l=gu(l,n.conv32_1),l=gu(l,n.conv32_2),l=gu(l,n.conv32_3),l=oN(l,n.conv64_down),l=gu(l,n.conv64_1),l=gu(l,n.conv64_2),l=gu(l,n.conv64_3),l=oN(l,n.conv128_down),l=gu(l,n.conv128_1),l=gu(l,n.conv128_2),l=oN(l,n.conv256_down),l=gu(l,n.conv256_1),l=gu(l,n.conv256_2),l=oN(l,n.conv256_down_out);var c=l.mean([1,2]),d=BS(c,n.fc);return d})},t.prototype.forward=function(r){return Br(this,void 0,void 0,function(){var n;return Ur(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.computeFaceDescriptor=function(r){return Br(this,void 0,void 0,function(){var n,s,i,o=this;return Ur(this,function(l){switch(l.label){case 0:return[4,Di(r)];case 1:return n=l.sent(),s=_r(function(){return ui(o.forwardInput(n))}),[4,Promise.all(s.map(function(c){return c.data()}))];case 2:return i=l.sent(),s.forEach(function(c){return c.dispose()}),[2,n.isBatchInput?i:i[0]]}})})},t.prototype.getDefaultModelName=function(){return"face_recognition_model"},t.prototype.extractParamsFromWeigthMap=function(r){return mOe(r)},t.prototype.extractParams=function(r){return hOe(r)},t}(wf);function WY(e,t){var r={descriptor:t};return Object.assign({},e,r)}function GY(e,t){var r={age:t};return Object.assign({},e,r)}function YY(e,t,r){var n={gender:t,genderProbability:r};return Object.assign({},e,n)}var KY=function(){function e(t){var r=t===void 0?{}:t,n=r.minFaceSize,s=r.scaleFactor,i=r.maxNumScales,o=r.scoreThresholds,l=r.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=n||20,this._scaleFactor=s||.709,this._maxNumScales=i||10,this._scoreThresholds=o||[.6,.7,.7],this._scaleSteps=l,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(e.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),e}();function xOe(e,t){function r(c,d){var u=ol(e(9*c),[3,3,c,1]),h=ti(e(c)),m=ti(e(c)),p=ti(e(c)),v=ti(e(c));return t.push({paramPath:d+"/filters"},{paramPath:d+"/batch_norm_scale"},{paramPath:d+"/batch_norm_offset"},{paramPath:d+"/batch_norm_mean"},{paramPath:d+"/batch_norm_variance"}),{filters:u,batch_norm_scale:h,batch_norm_offset:m,batch_norm_mean:p,batch_norm_variance:v}}function n(c,d,u,h,m){var p=ol(e(c*d*u*u),[u,u,c,d]),v=ti(e(d));return t.push({paramPath:h+"/filters"},{paramPath:h+"/"+(m?"batch_norm_offset":"bias")}),{filters:p,bias:v}}function s(c,d,u,h){var m=n(c,d,u,h,!0),p=m.filters,v=m.bias;return{filters:p,batch_norm_offset:v}}function i(c,d,u){var h=r(c,u+"/depthwise_conv"),m=s(c,d,1,u+"/pointwise_conv");return{depthwise_conv:h,pointwise_conv:m}}function o(){var c=s(3,32,3,"mobilenetv1/conv_0"),d=i(32,64,"mobilenetv1/conv_1"),u=i(64,128,"mobilenetv1/conv_2"),h=i(128,128,"mobilenetv1/conv_3"),m=i(128,256,"mobilenetv1/conv_4"),p=i(256,256,"mobilenetv1/conv_5"),v=i(256,512,"mobilenetv1/conv_6"),g=i(512,512,"mobilenetv1/conv_7"),b=i(512,512,"mobilenetv1/conv_8"),y=i(512,512,"mobilenetv1/conv_9"),C=i(512,512,"mobilenetv1/conv_10"),w=i(512,512,"mobilenetv1/conv_11"),k=i(512,1024,"mobilenetv1/conv_12"),S=i(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:d,conv_2:u,conv_3:h,conv_4:m,conv_5:p,conv_6:v,conv_7:g,conv_8:b,conv_9:y,conv_10:C,conv_11:w,conv_12:k,conv_13:S}}function l(){var c=s(1024,256,1,"prediction_layer/conv_0"),d=s(256,512,3,"prediction_layer/conv_1"),u=s(512,128,1,"prediction_layer/conv_2"),h=s(128,256,3,"prediction_layer/conv_3"),m=s(256,128,1,"prediction_layer/conv_4"),p=s(128,256,3,"prediction_layer/conv_5"),v=s(256,64,1,"prediction_layer/conv_6"),g=s(64,128,3,"prediction_layer/conv_7"),b=n(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),y=n(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),C=n(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),w=n(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),k=n(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),S=n(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),D=n(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),E=n(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),T=n(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),A=n(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),L=n(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),P=n(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),O={box_encoding_predictor:b,class_predictor:y},Z={box_encoding_predictor:C,class_predictor:w},z={box_encoding_predictor:k,class_predictor:S},K={box_encoding_predictor:D,class_predictor:E},B={box_encoding_predictor:T,class_predictor:A},Q={box_encoding_predictor:L,class_predictor:P};return{conv_0:c,conv_1:d,conv_2:u,conv_3:h,conv_4:m,conv_5:p,conv_6:v,conv_7:g,box_predictor_0:O,box_predictor_1:Z,box_predictor_2:z,box_predictor_3:K,box_predictor_4:B,box_predictor_5:Q}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:l}}function vOe(e){var t=[],r=Cf(e),n=r.extractWeights,s=r.getRemainingWeights,i=xOe(n,t),o=i.extractMobilenetV1Params,l=i.extractPredictionLayerParams,c=o(),d=l(),u=v4(n(5118*4),[1,5118,4]),h={extra_dim:u};if(t.push({paramPath:"output_layer/extra_dim"}),s().length!==0)throw new Error("weights remaing after extract: "+s().length);return{params:{mobilenetv1:c,prediction_layer:d,output_layer:h},paramMappings:t}}function gOe(e,t){var r=np(e,t);function n(d,u,h){var m=r(d+"/Conv2d_"+u+"_pointwise/weights",4,h+"/filters"),p=r(d+"/Conv2d_"+u+"_pointwise/convolution_bn_offset",1,h+"/batch_norm_offset");return{filters:m,batch_norm_offset:p}}function s(d){var u="mobilenetv1/conv_"+d,h="MobilenetV1/Conv2d_"+d+"_depthwise",m=u+"/depthwise_conv",p=u+"/pointwise_conv",v=r(h+"/depthwise_weights",4,m+"/filters"),g=r(h+"/BatchNorm/gamma",1,m+"/batch_norm_scale"),b=r(h+"/BatchNorm/beta",1,m+"/batch_norm_offset"),y=r(h+"/BatchNorm/moving_mean",1,m+"/batch_norm_mean"),C=r(h+"/BatchNorm/moving_variance",1,m+"/batch_norm_variance");return{depthwise_conv:{filters:v,batch_norm_scale:g,batch_norm_offset:b,batch_norm_mean:y,batch_norm_variance:C},pointwise_conv:n("MobilenetV1",d,p)}}function i(){return{conv_0:n("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:s(1),conv_2:s(2),conv_3:s(3),conv_4:s(4),conv_5:s(5),conv_6:s(6),conv_7:s(7),conv_8:s(8),conv_9:s(9),conv_10:s(10),conv_11:s(11),conv_12:s(12),conv_13:s(13)}}function o(d,u){var h=r(d+"/weights",4,u+"/filters"),m=r(d+"/biases",1,u+"/bias");return{filters:h,bias:m}}function l(d){var u=o("Prediction/BoxPredictor_"+d+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+d+"/box_encoding_predictor"),h=o("Prediction/BoxPredictor_"+d+"/ClassPredictor","prediction_layer/box_predictor_"+d+"/class_predictor");return{box_encoding_predictor:u,class_predictor:h}}function c(){return{conv_0:n("Prediction",0,"prediction_layer/conv_0"),conv_1:n("Prediction",1,"prediction_layer/conv_1"),conv_2:n("Prediction",2,"prediction_layer/conv_2"),conv_3:n("Prediction",3,"prediction_layer/conv_3"),conv_4:n("Prediction",4,"prediction_layer/conv_4"),conv_5:n("Prediction",5,"prediction_layer/conv_5"),conv_6:n("Prediction",6,"prediction_layer/conv_6"),conv_7:n("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:l(0),box_predictor_1:l(1),box_predictor_2:l(2),box_predictor_3:l(3),box_predictor_4:l(4),box_predictor_5:l(5)}}return{extractMobilenetV1Params:i,extractPredictionLayerParams:c}}function bOe(e){var t=[],r=gOe(e,t),n=r.extractMobilenetV1Params,s=r.extractPredictionLayerParams,i=e["Output/extra_dim"];if(t.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!qS(i))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+i);var o={mobilenetv1:n(),prediction_layer:s(),output_layer:{extra_dim:i}};return Sf(e,t),{params:o,paramMappings:t}}function Nu(e,t,r){return _r(function(){var n=Zc(e,t.filters,r,"same");return n=Ta(n,t.batch_norm_offset),E4(n,0,6)})}var yOe=.0010000000474974513;function jOe(e,t,r){return _r(function(){var n=LS(e,t.filters,r,"same");return n=qG(n,t.batch_norm_mean,t.batch_norm_variance,t.batch_norm_offset,t.batch_norm_scale,yOe),E4(n,0,6)})}function NOe(e){return[2,4,6,12].some(function(t){return t===e})?[2,2]:[1,1]}function wOe(e,t){return _r(function(){var r=null,n=Nu(e,t.conv_0,[2,2]),s=[t.conv_1,t.conv_2,t.conv_3,t.conv_4,t.conv_5,t.conv_6,t.conv_7,t.conv_8,t.conv_9,t.conv_10,t.conv_11,t.conv_12,t.conv_13];if(s.forEach(function(i,o){var l=o+1,c=NOe(l);n=jOe(n,i.depthwise_conv,c),n=Nu(n,i.pointwise_conv,[1,1]),l===11&&(r=n)}),r===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:n,conv11:r}})}function SOe(e,t,r,n,s){var i=e.shape[0],o=Math.min(r,i),l=t.map(function(u,h){return{score:u,boxIndex:h}}).filter(function(u){return u.score>s}).sort(function(u,h){return h.score-u.score}),c=function(u){return u<=n?1:0},d=[];return l.forEach(function(u){if(!(d.length>=o)){for(var h=u.score,m=d.length-1;m>=0;--m){var p=COe(e,u.boxIndex,d[m]);if(p!==0&&(u.score*=c(p),u.score<=s))break}h===u.score&&d.push(u.boxIndex)}}),d}function COe(e,t,r){var n=e.arraySync(),s=Math.min(n[t][0],n[t][2]),i=Math.min(n[t][1],n[t][3]),o=Math.max(n[t][0],n[t][2]),l=Math.max(n[t][1],n[t][3]),c=Math.min(n[r][0],n[r][2]),d=Math.min(n[r][1],n[r][3]),u=Math.max(n[r][0],n[r][2]),h=Math.max(n[r][1],n[r][3]),m=(o-s)*(l-i),p=(u-c)*(h-d);if(m<=0||p<=0)return 0;var v=Math.max(s,c),g=Math.max(i,d),b=Math.min(o,u),y=Math.min(l,h),C=Math.max(b-v,0)*Math.max(y-g,0);return C/(m+p-C)}function kOe(e){var t=ui(qm(e,[1,0])),r=[mi(t[2],t[0]),mi(t[3],t[1])],n=[Ta(t[0],Cd(r[0],Nr(2))),Ta(t[1],Cd(r[1],Nr(2)))];return{sizes:r,centers:n}}function _Oe(e,t){var r=kOe(e),n=r.sizes,s=r.centers,i=ui(qm(t,[1,0])),o=Cd(_o(Q5(Cd(i[2],Nr(5))),n[0]),Nr(2)),l=Ta(_o(Cd(i[0],Nr(10)),n[0]),s[0]),c=Cd(_o(Q5(Cd(i[3],Nr(5))),n[1]),Nr(2)),d=Ta(_o(Cd(i[1],Nr(10)),n[1]),s[1]);return qm(rc([mi(l,o),mi(d,c),Ta(l,o),Ta(d,c)]),[1,0])}function EOe(e,t,r){return _r(function(){var n=e.shape[0],s=_Oe(Ad(u0(r.extra_dim,[n,1,1]),[-1,4]),Ad(e,[-1,4]));s=Ad(s,[n,s.shape[0]/n,4]);var i=BG(Gu(t,[0,0,1],[-1,-1,-1])),o=Gu(i,[0,0,0],[-1,-1,1]);o=Ad(o,[n,o.shape[1]]);var l=ui(s),c=ui(o);return{boxes:l,scores:c}})}function Lv(e,t){return _r(function(){var r=e.shape[0],n=Ad(Pd(e,t.box_encoding_predictor),[r,-1,1,4]),s=Ad(Pd(e,t.class_predictor),[r,-1,3]);return{boxPredictionEncoding:n,classPrediction:s}})}function DOe(e,t,r){return _r(function(){var n=Nu(e,r.conv_0,[1,1]),s=Nu(n,r.conv_1,[2,2]),i=Nu(s,r.conv_2,[1,1]),o=Nu(i,r.conv_3,[2,2]),l=Nu(o,r.conv_4,[1,1]),c=Nu(l,r.conv_5,[2,2]),d=Nu(c,r.conv_6,[1,1]),u=Nu(d,r.conv_7,[2,2]),h=Lv(t,r.box_predictor_0),m=Lv(e,r.box_predictor_1),p=Lv(s,r.box_predictor_2),v=Lv(o,r.box_predictor_3),g=Lv(c,r.box_predictor_4),b=Lv(u,r.box_predictor_5),y=di([h.boxPredictionEncoding,m.boxPredictionEncoding,p.boxPredictionEncoding,v.boxPredictionEncoding,g.boxPredictionEncoding,b.boxPredictionEncoding],1),C=di([h.classPrediction,m.classPrediction,p.classPrediction,v.classPrediction,g.classPrediction,b.classPrediction],1);return{boxPredictions:y,classPredictions:C}})}var y1=function(){function e(t){var r=t===void 0?{}:t,n=r.minConfidence,s=r.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=n||.5,this._maxResults=s||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(e.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),e}(),XY=function(e){ha(t,e);function t(){return e.call(this,"SsdMobilenetv1")||this}return t.prototype.forwardInput=function(r){var n=this.params;if(!n)throw new Error("SsdMobilenetv1 - load model before inference");return _r(function(){var s=r.toBatchTensor(512,!1).toFloat(),i=mi(_o(s,Nr(.007843137718737125)),Nr(1)),o=wOe(i,n.mobilenetv1),l=DOe(o.out,o.conv11,n.prediction_layer),c=l.boxPredictions,d=l.classPredictions;return EOe(c,d,n.output_layer)})},t.prototype.forward=function(r){return Br(this,void 0,void 0,function(){var n;return Ur(this,function(s){switch(s.label){case 0:return n=this.forwardInput,[4,Di(r)];case 1:return[2,n.apply(this,[s.sent()])]}})})},t.prototype.locateFaces=function(r,n){return n===void 0&&(n={}),Br(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,w,k,S,D,E,T;return Ur(this,function(A){switch(A.label){case 0:return s=new y1(n),i=s.maxResults,o=s.minConfidence,[4,Di(r)];case 1:for(l=A.sent(),c=this.forwardInput(l),d=c.boxes,u=c.scores,h=d[0],m=u[0],p=1;p<d.length;p++)d[p].dispose(),u[p].dispose();return b=(g=Array).from,[4,m.data()];case 2:return v=b.apply(g,[A.sent()]),y=.5,C=SOe(h,v,i,y,o),w=l.getReshapedInputDimensions(0),k=l.inputSize,S=k/w.width,D=k/w.height,E=h.arraySync(),T=C.map(function(L){var P=[Math.max(0,E[L][0]),Math.min(1,E[L][2])].map(function(Q){return Q*D}),O=P[0],Z=P[1],z=[Math.max(0,E[L][1]),Math.min(1,E[L][3])].map(function(Q){return Q*S}),K=z[0],B=z[1];return new nh(v[L],new H4(K,O,B-K,Z-O),{height:l.getInputHeight(0),width:l.getInputWidth(0)})}),h.dispose(),m.dispose(),[2,T]}})})},t.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},t.prototype.extractParamsFromWeigthMap=function(r){return bOe(r)},t.prototype.extractParams=function(r){return vOe(r)},t}(wf);(function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(XY);var AOe=.4,TOe=[new an(.738768,.874946),new an(2.42204,2.65704),new an(4.30971,7.04493),new an(10.246,4.59428),new an(12.6868,11.8741)],IOe=[new an(1.603231,2.094468),new an(6.041143,7.080126),new an(2.882459,3.518061),new an(4.266906,5.178857),new an(9.041765,10.66308)],POe=[117.001,114.697,97.404],OOe="tiny_yolov2_model",MOe="tiny_yolov2_separable_conv_model",lN=function(e){return typeof e=="number"};function ROe(e){if(!e)throw new Error("invalid config: "+e);if(typeof e.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+e.withSeparableConvs);if(!lN(e.iouThreshold)||e.iouThreshold<0||e.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+e.iouThreshold);if(!Array.isArray(e.classes)||!e.classes.length||!e.classes.every(function(t){return typeof t=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(e.classes));if(!Array.isArray(e.anchors)||!e.anchors.length||!e.anchors.map(function(t){return t||{}}).every(function(t){return lN(t.x)&&lN(t.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(e.anchors));if(e.meanRgb&&(!Array.isArray(e.meanRgb)||e.meanRgb.length!==3||!e.meanRgb.every(lN)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(e.meanRgb))}function rI(e){return _r(function(){var t=_o(e,Nr(.10000000149011612));return Ta(us(mi(e,t)),t)})}function xm(e,t){return _r(function(){var r=Hx(e,[[0,0],[1,1],[1,1],[0,0]]);return r=Zc(r,t.conv.filters,[1,1],"valid"),r=mi(r,t.bn.sub),r=_o(r,t.bn.truediv),r=Ta(r,t.conv.bias),rI(r)})}function vm(e,t){return _r(function(){var r=Hx(e,[[0,0],[1,1],[1,1],[0,0]]);return r=I4(r,t.depthwise_filter,t.pointwise_filter,[1,1],"valid"),r=Ta(r,t.bias),rI(r)})}function FOe(e,t){var r=WS(e,t);function n(o,l){var c=ti(e(o)),d=ti(e(o));return t.push({paramPath:l+"/sub"},{paramPath:l+"/truediv"}),{sub:c,truediv:d}}function s(o,l,c){var d=r(o,l,3,c+"/conv"),u=n(l,c+"/bn");return{conv:d,bn:u}}var i=J4(e,t);return{extractConvParams:r,extractConvWithBatchNormParams:s,extractSeparableConvParams:i}}function LOe(e,t,r,n){var s=Cf(e),i=s.extractWeights,o=s.getRemainingWeights,l=[],c=FOe(i,l),d=c.extractConvParams,u=c.extractConvWithBatchNormParams,h=c.extractSeparableConvParams,m;if(t.withSeparableConvs){var p=n[0],v=n[1],g=n[2],b=n[3],y=n[4],C=n[5],w=n[6],k=n[7],S=n[8],D=t.isFirstLayerConv2d?d(p,v,3,"conv0"):h(p,v,"conv0"),E=h(v,g,"conv1"),T=h(g,b,"conv2"),A=h(b,y,"conv3"),L=h(y,C,"conv4"),P=h(C,w,"conv5"),O=k?h(w,k,"conv6"):void 0,Z=S?h(k,S,"conv7"):void 0,z=d(S||k||w,5*r,1,"conv8");m={conv0:D,conv1:E,conv2:T,conv3:A,conv4:L,conv5:P,conv6:O,conv7:Z,conv8:z}}else{var p=n[0],v=n[1],g=n[2],b=n[3],y=n[4],C=n[5],w=n[6],k=n[7],S=n[8],D=u(p,v,"conv0"),E=u(v,g,"conv1"),T=u(g,b,"conv2"),A=u(b,y,"conv3"),L=u(y,C,"conv4"),P=u(C,w,"conv5"),O=u(w,k,"conv6"),Z=u(k,S,"conv7"),z=d(S,5*r,1,"conv8");m={conv0:D,conv1:E,conv2:T,conv3:A,conv4:L,conv5:P,conv6:O,conv7:Z,conv8:z}}if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{params:m,paramMappings:l}}function BOe(e,t){var r=np(e,t);function n(l){var c=r(l+"/sub",1),d=r(l+"/truediv",1);return{sub:c,truediv:d}}function s(l){var c=r(l+"/filters",4),d=r(l+"/bias",1);return{filters:c,bias:d}}function i(l){var c=s(l+"/conv"),d=n(l+"/bn");return{conv:c,bn:d}}var o=Z4(r);return{extractConvParams:s,extractConvWithBatchNormParams:i,extractSeparableConvParams:o}}function UOe(e,t){var r=[],n=BOe(e,r),s=n.extractConvParams,i=n.extractConvWithBatchNormParams,o=n.extractSeparableConvParams,l;if(t.withSeparableConvs){var c=t.filterSizes&&t.filterSizes.length||9;l={conv0:t.isFirstLayerConv2d?s("conv0"):o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:c>7?o("conv6"):void 0,conv7:c>8?o("conv7"):void 0,conv8:s("conv8")}}else l={conv0:i("conv0"),conv1:i("conv1"),conv2:i("conv2"),conv3:i("conv3"),conv4:i("conv4"),conv5:i("conv5"),conv6:i("conv6"),conv7:i("conv7"),conv8:s("conv8")};return Sf(e,r),{params:l,paramMappings:r}}var VB;(function(e){e[e.XS=224]="XS",e[e.SM=320]="SM",e[e.MD=416]="MD",e[e.LG=608]="LG"})(VB||(VB={}));var aI=function(){function e(t){var r=t===void 0?{}:t,n=r.inputSize,s=r.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=n||416,this._scoreThreshold=s||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(e.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),e}(),QY=function(e){ha(t,e);function t(r){var n=e.call(this,"TinyYolov2")||this;return ROe(r),n._config=r,n}return Object.defineProperty(t.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),t.prototype.runTinyYolov2=function(r,n){var s=xm(r,n.conv0);return s=Ni(s,[2,2],[2,2],"same"),s=xm(s,n.conv1),s=Ni(s,[2,2],[2,2],"same"),s=xm(s,n.conv2),s=Ni(s,[2,2],[2,2],"same"),s=xm(s,n.conv3),s=Ni(s,[2,2],[2,2],"same"),s=xm(s,n.conv4),s=Ni(s,[2,2],[2,2],"same"),s=xm(s,n.conv5),s=Ni(s,[2,2],[1,1],"same"),s=xm(s,n.conv6),s=xm(s,n.conv7),Pd(s,n.conv8,"valid",!1)},t.prototype.runMobilenet=function(r,n){var s=this.config.isFirstLayerConv2d?rI(Pd(r,n.conv0,"valid",!1)):vm(r,n.conv0);return s=Ni(s,[2,2],[2,2],"same"),s=vm(s,n.conv1),s=Ni(s,[2,2],[2,2],"same"),s=vm(s,n.conv2),s=Ni(s,[2,2],[2,2],"same"),s=vm(s,n.conv3),s=Ni(s,[2,2],[2,2],"same"),s=vm(s,n.conv4),s=Ni(s,[2,2],[2,2],"same"),s=vm(s,n.conv5),s=Ni(s,[2,2],[1,1],"same"),s=n.conv6?vm(s,n.conv6):s,s=n.conv7?vm(s,n.conv7):s,Pd(s,n.conv8,"valid",!1)},t.prototype.forwardInput=function(r,n){var s=this,i=this.params;if(!i)throw new Error("TinyYolov2 - load model before inference");return _r(function(){var o=r.toBatchTensor(n,!1).toFloat();return o=s.config.meanRgb?b1(o,s.config.meanRgb):o,o=o.div(Nr(256)),s.config.withSeparableConvs?s.runMobilenet(o,i):s.runTinyYolov2(o,i)})},t.prototype.forward=function(r,n){return Br(this,void 0,void 0,function(){var s;return Ur(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Di(r)];case 1:return[4,s.apply(this,[i.sent(),n])];case 2:return[2,i.sent()]}})})},t.prototype.detect=function(r,n){return n===void 0&&(n={}),Br(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,m,p,v,g,b,y,C=this;return Ur(this,function(w){switch(w.label){case 0:return s=new aI(n),i=s.inputSize,o=s.scoreThreshold,[4,Di(r)];case 1:return l=w.sent(),[4,this.forwardInput(l,i)];case 2:return c=w.sent(),d=_r(function(){return ui(c)[0].expandDims()}),u={width:l.getInputWidth(0),height:l.getInputHeight(0)},[4,this.extractBoxes(d,l.getReshapedInputDimensions(0),o)];case 3:return h=w.sent(),c.dispose(),d.dispose(),m=h.map(function(k){return k.box}),p=h.map(function(k){return k.score}),v=h.map(function(k){return k.classScore}),g=h.map(function(k){return C.config.classes[k.label]}),b=Py(m.map(function(k){return k.rescale(i)}),p,this.config.iouThreshold,!0),y=b.map(function(k){return new wY(p[k],v[k],g[k],m[k],u)}),[2,y]}})})},t.prototype.getDefaultModelName=function(){return""},t.prototype.extractParamsFromWeigthMap=function(r){return UOe(r,this.config)},t.prototype.extractParams=function(r){var n=this.config.filterSizes||t.DEFAULT_FILTER_SIZES,s=n?n.length:void 0;if(s!==7&&s!==8&&s!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+s+" filterSizes in config");return LOe(r,this.config,this.boxEncodingSize,n)},t.prototype.extractBoxes=function(r,n,s){return Br(this,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v,g,b,y,C,w,k,S,D,E,T,A,L,P,O,Z,z,K,B,Q,U=this;return Ur(this,function(J){switch(J.label){case 0:return i=n.width,o=n.height,l=Math.max(i,o),c=l/i,d=l/o,u=r.shape[1],h=this.config.anchors.length,m=_r(function(){var Y=r.reshape([u,u,h,U.boxEncodingSize]),oe=Y.slice([0,0,0,0],[u,u,h,4]),M=Y.slice([0,0,0,4],[u,u,h,1]),V=U.withClassScores?jf(Y.slice([0,0,0,5],[u,u,h,U.config.classes.length]),3):Nr(0);return[oe,M,V]}),p=m[0],v=m[1],g=m[2],b=[],[4,v.array()];case 1:return y=J.sent(),[4,p.array()];case 2:C=J.sent(),w=0,J.label=3;case 3:if(!(w<u))return[3,12];k=0,J.label=4;case 4:if(!(k<u))return[3,11];S=0,J.label=5;case 5:return S<h?(D=GE(y[w][k][S][0]),!s||D>s?(E=(k+GE(C[w][k][S][0]))/u*c,T=(w+GE(C[w][k][S][1]))/u*d,A=Math.exp(C[w][k][S][2])*this.config.anchors[S].x/u*c,L=Math.exp(C[w][k][S][3])*this.config.anchors[S].y/u*d,P=E-A/2,O=T-L/2,Z={row:w,col:k,anchor:S},this.withClassScores?[4,this.extractPredictedClass(g,Z)]:[3,7]):[3,9]):[3,10];case 6:return Q=J.sent(),[3,8];case 7:Q={classScore:1,label:0},J.label=8;case 8:z=Q,K=z.classScore,B=z.label,b.push(yo({box:new zS(P,O,P+A,O+L),score:D,classScore:D*K,label:B},Z)),J.label=9;case 9:return S++,[3,5];case 10:return k++,[3,4];case 11:return w++,[3,3];case 12:return p.dispose(),v.dispose(),g.dispose(),[2,b]}})})},t.prototype.extractPredictedClass=function(r,n){return Br(this,void 0,void 0,function(){var s,i,o,l;return Ur(this,function(c){switch(c.label){case 0:return s=n.row,i=n.col,o=n.anchor,[4,r.array()];case 1:return l=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(d,u){return l[s][i][o][u]}).map(function(d,u){return{classScore:d,label:u}}).reduce(function(d,u){return d.classScore>u.classScore?d:u})]}})})},t.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],t}(wf),$Oe=function(e){ha(t,e);function t(r){r===void 0&&(r=!0);var n=this,s=Object.assign({},{withSeparableConvs:r,iouThreshold:AOe,classes:["face"]},r?{anchors:IOe,meanRgb:POe}:{anchors:TOe,withClassScores:!0});return n=e.call(this,s)||this,n}return Object.defineProperty(t.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(r,n){return Br(this,void 0,void 0,function(){var s;return Ur(this,function(i){switch(i.label){case 0:return[4,this.detect(r,n)];case 1:return s=i.sent(),[2,s.map(function(o){return new nh(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return this.withSeparableConvs?MOe:OOe},t.prototype.extractParamsFromWeigthMap=function(r){return e.prototype.extractParamsFromWeigthMap.call(this,r)},t}(QY),nI=function(e){ha(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._name="TinyFaceDetectorOptions",r}return t}(aI),j1=function(){function e(){}return e.prototype.then=function(t){return Br(this,void 0,void 0,function(){var r;return Ur(this,function(n){switch(n.label){case 0:return r=t,[4,this.run()];case 1:return[2,r.apply(void 0,[n.sent()])]}})})},e.prototype.run=function(){return Br(this,void 0,void 0,function(){return Ur(this,function(t){throw new Error("ComposableTask - run is not implemented")})})},e}();function GS(e,t,r,n,s){return s===void 0&&(s=function(i){var o=i.alignedRect;return o}),Br(this,void 0,void 0,function(){var i,o,l,c,d;return Ur(this,function(u){switch(u.label){case 0:return i=e.map(function(h){return KPe(h)?s(h):h.detection}),l=n,l?[3,5]:t instanceof os?[4,X4(t,i)]:[3,2];case 1:return c=u.sent(),[3,4];case 2:return[4,K4(t,i)];case 3:c=u.sent(),u.label=4;case 4:l=c,u.label=5;case 5:return o=l,[4,r(o)];case 6:return d=u.sent(),o.forEach(function(h){return h instanceof os&&h.dispose()}),[2,d]}})})}function sI(e,t,r,n,s){return Br(this,void 0,void 0,function(){var i=this;return Ur(this,function(o){return[2,GS([e],t,function(l){return Br(i,void 0,void 0,function(){return Ur(this,function(c){return[2,r(l[0])]})})},n,s)]})})}function VOe(e){return _r(function(){return rc(ui(e,3).reverse(),3)})}var cN=2,x2=12;function qOe(e,t){var r=WS(e,t),n=Q4(e,t);function s(d,u){var h=ti(e(d));return t.push({paramPath:u}),h}function i(d,u,h){h===void 0&&(h=!1);var m=r(d[0],d[1],3,u+"/conv1"),p=s(d[1],u+"/prelu1_alpha"),v=r(d[1],d[2],3,u+"/conv2"),g=s(d[2],u+"/prelu2_alpha"),b=r(d[2],d[3],h?2:3,u+"/conv3"),y=s(d[3],u+"/prelu3_alpha");return{conv1:m,prelu1_alpha:p,conv2:v,prelu2_alpha:g,conv3:b,prelu3_alpha:y}}function o(){var d=i([3,10,16,32],"pnet"),u=r(32,2,1,"pnet/conv4_1"),h=r(32,4,1,"pnet/conv4_2");return yo(yo({},d),{conv4_1:u,conv4_2:h})}function l(){var d=i([3,28,48,64],"rnet",!0),u=n(576,128,"rnet/fc1"),h=s(128,"rnet/prelu4_alpha"),m=n(128,2,"rnet/fc2_1"),p=n(128,4,"rnet/fc2_2");return yo(yo({},d),{fc1:u,prelu4_alpha:h,fc2_1:m,fc2_2:p})}function c(){var d=i([3,32,64,64],"onet"),u=r(64,128,2,"onet/conv4"),h=s(128,"onet/prelu4_alpha"),m=n(1152,256,"onet/fc1"),p=s(256,"onet/prelu5_alpha"),v=n(256,2,"onet/fc2_1"),g=n(256,4,"onet/fc2_2"),b=n(256,10,"onet/fc2_3");return yo(yo({},d),{conv4:u,prelu4_alpha:h,fc1:m,prelu5_alpha:p,fc2_1:v,fc2_2:g,fc2_3:b})}return{extractPNetParams:o,extractRNetParams:l,extractONetParams:c}}function zOe(e){var t=Cf(e),r=t.extractWeights,n=t.getRemainingWeights,s=[],i=qOe(r,s),o=i.extractPNetParams,l=i.extractRNetParams,c=i.extractONetParams,d=o(),u=l(),h=c();if(n().length!==0)throw new Error("weights remaing after extract: "+n().length);return{params:{pnet:d,rnet:u,onet:h},paramMappings:s}}function HOe(e,t){var r=np(e,t);function n(u){var h=r(u+"/weights",4,u+"/filters"),m=r(u+"/bias",1);return{filters:h,bias:m}}function s(u){var h=r(u+"/weights",2),m=r(u+"/bias",1);return{weights:h,bias:m}}function i(u){return r(u,1)}function o(u){var h=n(u+"/conv1"),m=i(u+"/prelu1_alpha"),p=n(u+"/conv2"),v=i(u+"/prelu2_alpha"),g=n(u+"/conv3"),b=i(u+"/prelu3_alpha");return{conv1:h,prelu1_alpha:m,conv2:p,prelu2_alpha:v,conv3:g,prelu3_alpha:b}}function l(){var u=o("pnet"),h=n("pnet/conv4_1"),m=n("pnet/conv4_2");return yo(yo({},u),{conv4_1:h,conv4_2:m})}function c(){var u=o("rnet"),h=s("rnet/fc1"),m=i("rnet/prelu4_alpha"),p=s("rnet/fc2_1"),v=s("rnet/fc2_2");return yo(yo({},u),{fc1:h,prelu4_alpha:m,fc2_1:p,fc2_2:v})}function d(){var u=o("onet"),h=n("onet/conv4"),m=i("onet/prelu4_alpha"),p=s("onet/fc1"),v=i("onet/prelu5_alpha"),g=s("onet/fc2_1"),b=s("onet/fc2_2"),y=s("onet/fc2_3");return yo(yo({},u),{conv4:h,prelu4_alpha:m,fc1:p,prelu5_alpha:v,fc2_1:g,fc2_2:b,fc2_3:y})}return{extractPNetParams:l,extractRNetParams:c,extractONetParams:d}}function WOe(e){var t=[],r=HOe(e,t),n=r.extractPNetParams,s=r.extractRNetParams,i=r.extractONetParams,o=n(),l=s(),c=i();return Sf(e,t),{params:{pnet:o,rnet:l,onet:c},paramMappings:t}}function s3(e,t){var r=t[0],n=t[1];return{height:Math.floor(r*e),width:Math.floor(n*e)}}function GOe(e,t,r){for(var n=r[0],s=r[1],i=x2/e,o=[],l=Math.min(n,s)*i,c=0;l>=12;)o.push(i*Math.pow(t,c)),l=l*t,c+=1;return o}var iI=function(e){ha(t,e);function t(r,n,s,i){return e.call(this,{left:r,top:n,right:s,bottom:i},!0)||this}return t}(zm);function JY(e){return _r(function(){return _o(mi(e,Nr(127.5)),Nr(.0078125))})}function v0(e,t){return _r(function(){return Ta(us(e),_o(t,c2(us(c2(e)))))})}function oI(e,t,r){return r===void 0&&(r=!1),_r(function(){var n=Pd(e,t.conv1,"valid");return n=v0(n,t.prelu1_alpha),n=Ni(n,r?[2,2]:[3,3],[2,2],"same"),n=Pd(n,t.conv2,"valid"),n=v0(n,t.prelu2_alpha),n=r?n:Ni(n,[3,3],[2,2],"valid"),n=Pd(n,t.conv3,"valid"),n=v0(n,t.prelu3_alpha),n})}function YOe(e,t){return _r(function(){var r=oI(e,t,!0),n=Pd(r,t.conv4_1,"valid"),s=Lc(US(n,3),3),i=jf(mi(n,s),3),o=Pd(r,t.conv4_2,"valid");return{prob:i,regions:o}})}function KOe(e,t){return _r(function(){var r=s3(t,e.shape.slice(1)),n=r.height,s=r.width,i=F4.resizeBilinear(e,[n,s]),o=JY(i);return qm(o,[0,2,1,3])})}function XOe(e,t,r,n){for(var s=[],i=e.arraySync(),o=0;o<e.shape[0];o++)for(var l=0;l<e.shape[1];l++)i[o][l]>=n&&s.push(new an(l,o));var c=s.map(function(d){var u=new zS(Math.round((d.y*cN+1)/r),Math.round((d.x*cN+1)/r),Math.round((d.y*cN+x2)/r),Math.round((d.x*cN+x2)/r)),h=i[d.y][d.x],m=t.arraySync(),p=new iI(m[d.y][d.x][0],m[d.y][d.x][1],m[d.y][d.x][2],m[d.y][d.x][3]);return{cell:u,score:h,region:p}});return c}function QOe(e,t,r,n,s){s.stage1=[];var i=t.map(function(m){return _r(function(){var p={scale:m},v=KOe(e,m),g=Date.now(),b=YOe(v,n),y=b.prob,C=b.regions;p.pnet=Date.now()-g;var w=ui(ui(y,3)[1])[0],k=ui(C)[0];return{scoresTensor:w,regionsTensor:k,scale:m,statsForScale:p}})}),o=i.map(function(m){var p=m.scoresTensor,v=m.regionsTensor,g=m.scale,b=m.statsForScale,y=XOe(p,v,g,r);if(p.dispose(),v.dispose(),!y.length)return s.stage1.push(b),[];var C=Date.now(),w=Py(y.map(function(k){return k.cell}),y.map(function(k){return k.score}),.5);return b.nms=Date.now()-C,b.numBoxes=w.length,s.stage1.push(b),w.map(function(k){return y[k]})}),l=o.reduce(function(m,p){return m.concat(p)},[]),c=[],d=[];if(l.length>0){var u=Date.now(),h=Py(l.map(function(m){return m.cell}),l.map(function(m){return m.score}),.7);s.stage1_nms=Date.now()-u,d=h.map(function(m){return l[m].score}),c=h.map(function(m){return l[m]}).map(function(m){var p=m.cell,v=m.region;return new zS(p.left+v.left*p.width,p.top+v.top*p.height,p.right+v.right*p.width,p.bottom+v.bottom*p.height).toSquare().round()})}return{boxes:c,scores:d}}function ZY(e,t,r){var n=r.width,s=r.height;return Br(this,void 0,void 0,function(){var i,o,l,c=this;return Ur(this,function(d){switch(d.label){case 0:return i=Ax(e),[4,Promise.all(t.map(function(u){return Br(c,void 0,void 0,function(){var h,m,p,v,g,b,y,C;return Ur(this,function(w){return h=u.padAtBorders(e.height,e.width),m=h.y,p=h.ey,v=h.x,g=h.ex,b=v-1,y=m-1,C=i.getImageData(b,y,g-b,p-y),[2,Ao.isNodejs()?Y4(C):createImageBitmap(C)]})})}))];case 1:return o=d.sent(),l=[],o.forEach(function(u){var h=HS({width:n,height:s}),m=Ax(h);m.drawImage(u,0,0,n,s);for(var p=m.getImageData(0,0,n,s).data,v=[],g=0;g<p.length;g+=4)v.push(p[g+2]),v.push(p[g+1]),v.push(p[g]);l.push(v)}),[2,l.map(function(u){var h=_r(function(){var m=qm(ol(u,[1,n,s,3]),[0,2,1,3]).toFloat();return JY(m)});return h})]}})})}function JOe(e,t){return _r(function(){var r=oI(e,t),n=Ad(r,[r.shape[0],t.fc1.weights.shape[0]]),s=Ou(n,t.fc1),i=v0(s,t.prelu4_alpha),o=Ou(i,t.fc2_1),l=Lc(US(o,1),1),c=jf(mi(o,l),1),d=Ou(i,t.fc2_2),u=ui(c,1)[1];return{scores:u,regions:d}})}function ZOe(e,t,r,n,s){return Br(this,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v,g,b,y,C;return Ur(this,function(w){switch(w.label){case 0:return i=Date.now(),[4,ZY(e,t,{width:24,height:24})];case 1:return o=w.sent(),s.stage2_extractImagePatches=Date.now()-i,i=Date.now(),l=o.map(function(k){var S=JOe(k,n);return k.dispose(),S}),s.stage2_rnet=Date.now()-i,c=l.length>1?di(l.map(function(k){return k.scores})):l[0].scores,h=(u=Array).from,[4,c.data()];case 2:return d=h.apply(u,[w.sent()]),c.dispose(),m=d.map(function(k,S){return{score:k,idx:S}}).filter(function(k){return k.score>r}).map(function(k){var S=k.idx;return S}),p=m.map(function(k){return t[k]}),v=m.map(function(k){return d[k]}),g=[],b=[],p.length>0&&(i=Date.now(),y=Py(p,v,.7),s.stage2_nms=Date.now()-i,C=y.map(function(k){var S=l[m[k]].regions.arraySync();return new iI(S[0][0],S[0][1],S[0][2],S[0][3])}),b=y.map(function(k){return v[k]}),g=y.map(function(k,S){return p[k].calibrate(C[S])})),l.forEach(function(k){k.regions.dispose(),k.scores.dispose()}),[2,{boxes:g,scores:b}]}})})}function eMe(e,t){return _r(function(){var r=oI(e,t);r=Ni(r,[2,2],[2,2],"same"),r=Pd(r,t.conv4,"valid"),r=v0(r,t.prelu4_alpha);var n=Ad(r,[r.shape[0],t.fc1.weights.shape[0]]),s=Ou(n,t.fc1),i=v0(s,t.prelu5_alpha),o=Ou(i,t.fc2_1),l=Lc(US(o,1),1),c=jf(mi(o,l),1),d=Ou(i,t.fc2_2),u=Ou(i,t.fc2_3),h=ui(c,1)[1];return{scores:h,regions:d,points:u}})}function tMe(e,t,r,n,s){return Br(this,void 0,void 0,function(){var i,o,l,c,d,u,h,m,p,v,g,b,y,C,w;return Ur(this,function(k){switch(k.label){case 0:return i=Date.now(),[4,ZY(e,t,{width:48,height:48})];case 1:return o=k.sent(),s.stage3_extractImagePatches=Date.now()-i,i=Date.now(),l=o.map(function(S){var D=eMe(S,n);return S.dispose(),D}),s.stage3_onet=Date.now()-i,c=l.length>1?di(l.map(function(S){return S.scores})):l[0].scores,h=(u=Array).from,[4,c.data()];case 2:return d=h.apply(u,[k.sent()]),c.dispose(),m=d.map(function(S,D){return{score:S,idx:D}}).filter(function(S){return S.score>r}).map(function(S){var D=S.idx;return D}),p=m.map(function(S){var D=l[S].regions.arraySync();return new iI(D[0][0],D[0][1],D[0][2],D[0][3])}),v=m.map(function(S,D){return t[S].calibrate(p[D])}),g=m.map(function(S){return d[S]}),b=[],y=[],C=[],v.length>0&&(i=Date.now(),w=Py(v,g,.7,!1),s.stage3_nms=Date.now()-i,b=w.map(function(S){return v[S]}),y=w.map(function(S){return g[S]}),C=w.map(function(S,D){return Array(5).fill(0).map(function(E,T){var A=l[S].points.arraySync();return new an(A[0][T]*(b[D].width+1)+b[D].left,A[0][T+5]*(b[D].height+1)+b[D].top)})})),l.forEach(function(S){S.regions.dispose(),S.scores.dispose(),S.points.dispose()}),[2,{boxes:b,scores:y,points:C}]}})})}var rMe=function(e){ha(t,e);function t(){return e.call(this,"Mtcnn")||this}return t.prototype.load=function(r){return Br(this,void 0,void 0,function(){return Ur(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.load.call(this,r)]})})},t.prototype.loadFromDisk=function(r){return Br(this,void 0,void 0,function(){return Ur(this,function(n){return console.warn("mtcnn is deprecated and will be removed soon"),[2,e.prototype.loadFromDisk.call(this,r)]})})},t.prototype.forwardInput=function(r,n){return n===void 0&&(n={}),Br(this,void 0,void 0,function(){var s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,w,k,S,D,E,T;return Ur(this,function(A){switch(A.label){case 0:if(s=this.params,!s)throw new Error("Mtcnn - load model before inference");if(i=r.canvases[0],!i)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return o={},l=Date.now(),c=_r(function(){return VOe(Lc(q4.fromPixels(i)).toFloat())}),d=function(L){return c.dispose(),o.total=Date.now()-l,L},u=c.shape.slice(1),h=u[0],m=u[1],p=new KY(n),v=p.minFaceSize,g=p.scaleFactor,b=p.maxNumScales,y=p.scoreThresholds,C=p.scaleSteps,w=(C||GOe(v,g,[h,m])).filter(function(L){var P=s3(L,[h,m]);return Math.min(P.width,P.height)>x2}).slice(0,b),o.scales=w,o.pyramid=w.map(function(L){return s3(L,[h,m])}),k=Date.now(),[4,QOe(c,w,y[0],s.pnet,o)];case 1:return S=A.sent(),o.total_stage1=Date.now()-k,S.boxes.length?(o.stage2_numInputBoxes=S.boxes.length,k=Date.now(),[4,ZOe(i,S.boxes,y[1],s.rnet,o)]):[2,d({results:[],stats:o})];case 2:return D=A.sent(),o.total_stage2=Date.now()-k,D.boxes.length?(o.stage3_numInputBoxes=D.boxes.length,k=Date.now(),[4,tMe(i,D.boxes,y[2],s.onet,o)]):[2,d({results:[],stats:o})];case 3:return E=A.sent(),o.total_stage3=Date.now()-k,T=E.boxes.map(function(L,P){return eI(W4({},new nh(E.scores[P],new H4(L.left/m,L.top/h,L.width/m,L.height/h),{height:h,width:m})),new IPe(E.points[P].map(function(O){return O.sub(new an(L.left,L.top)).div(new an(L.width,L.height))}),{width:L.width,height:L.height}))}),[2,d({results:T,stats:o})]}})})},t.prototype.forward=function(r,n){return n===void 0&&(n={}),Br(this,void 0,void 0,function(){var s;return Ur(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Di(r)];case 1:return[4,s.apply(this,[i.sent(),n])];case 2:return[2,i.sent().results]}})})},t.prototype.forwardWithStats=function(r,n){return n===void 0&&(n={}),Br(this,void 0,void 0,function(){var s;return Ur(this,function(i){switch(i.label){case 0:return s=this.forwardInput,[4,Di(r)];case 1:return[2,s.apply(this,[i.sent(),n])]}})})},t.prototype.getDefaultModelName=function(){return"mtcnn_model"},t.prototype.extractParamsFromWeigthMap=function(r){return WOe(r)},t.prototype.extractParams=function(r){return zOe(r)},t}(wf),aMe=.4,nMe=[new an(1.603231,2.094468),new an(6.041143,7.080126),new an(2.882459,3.518061),new an(4.266906,5.178857),new an(9.041765,10.66308)],sMe=[117.001,114.697,97.404],iMe=function(e){ha(t,e);function t(){var r=this,n={withSeparableConvs:!0,iouThreshold:aMe,classes:["face"],anchors:nMe,meanRgb:sMe,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return r=e.call(this,n)||this,r}return Object.defineProperty(t.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),t.prototype.locateFaces=function(r,n){return Br(this,void 0,void 0,function(){var s;return Ur(this,function(i){switch(i.label){case 0:return[4,this.detect(r,n)];case 1:return s=i.sent(),[2,s.map(function(o){return new nh(o.score,o.relativeBox,{width:o.imageWidth,height:o.imageHeight})})]}})})},t.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},t.prototype.extractParamsFromWeigthMap=function(r){return e.prototype.extractParamsFromWeigthMap.call(this,r)},t}(QY),Kn={ssdMobilenetv1:new XY,tinyFaceDetector:new iMe,tinyYolov2:new $Oe,mtcnn:new rMe,faceLandmark68Net:new qY,faceLandmark68TinyNet:new lOe,faceRecognitionNet:new pOe,faceExpressionNet:new YPe,ageGenderNet:new nOe},eK=function(e){ha(t,e);function t(r,n,s){var i=e.call(this)||this;return i.parentTask=r,i.input=n,i.extractedFaces=s,i}return t}(j1),lI=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Br(this,void 0,void 0,function(){var r,n,s=this;return Ur(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return r=i.sent(),[4,GS(r,this.input,function(o){return Br(s,void 0,void 0,function(){return Ur(this,function(l){switch(l.label){case 0:return[4,Promise.all(o.map(function(c){return Kn.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return n=i.sent(),[2,r.map(function(o,l){return UY(o,n[l])})]}})})},t.prototype.withAgeAndGender=function(){return new hI(this,this.input)},t}(eK),cI=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Br(this,void 0,void 0,function(){var r,n;return Ur(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),r?[4,sI(r,this.input,function(i){return Kn.faceExpressionNet.predictExpressions(i)},this.extractedFaces)]:[2];case 2:return n=s.sent(),[2,UY(r,n)]}})})},t.prototype.withAgeAndGender=function(){return new fI(this,this.input)},t}(eK),dI=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new mI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new xI(this,this.input)},t}(lI),uI=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withAgeAndGender=function(){return new pI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new vI(this,this.input)},t}(cI),tK=function(e){ha(t,e);function t(r,n,s){var i=e.call(this)||this;return i.parentTask=r,i.input=n,i.extractedFaces=s,i}return t}(j1),hI=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Br(this,void 0,void 0,function(){var r,n,s=this;return Ur(this,function(i){switch(i.label){case 0:return[4,this.parentTask];case 1:return r=i.sent(),[4,GS(r,this.input,function(o){return Br(s,void 0,void 0,function(){return Ur(this,function(l){switch(l.label){case 0:return[4,Promise.all(o.map(function(c){return Kn.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return n=i.sent(),[2,r.map(function(o,l){var c=n[l],d=c.age,u=c.gender,h=c.genderProbability;return GY(YY(o,u,h),d)})]}})})},t.prototype.withFaceExpressions=function(){return new lI(this,this.input)},t}(tK),fI=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Br(this,void 0,void 0,function(){var r,n,s,i,o;return Ur(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return r=l.sent(),r?[4,sI(r,this.input,function(c){return Kn.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return n=l.sent(),s=n.age,i=n.gender,o=n.genderProbability,[2,GY(YY(r,i,o),s)]}})})},t.prototype.withFaceExpressions=function(){return new cI(this,this.input)},t}(tK),mI=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new dI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new xI(this,this.input)},t}(hI),pI=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.withFaceExpressions=function(){return new uI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new vI(this,this.input)},t}(fI),rK=function(e){ha(t,e);function t(r,n){var s=e.call(this)||this;return s.parentTask=r,s.input=n,s}return t}(j1),xI=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Br(this,void 0,void 0,function(){var r,n;return Ur(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),[4,GS(r,this.input,function(i){return Promise.all(i.map(function(o){return Kn.faceRecognitionNet.computeFaceDescriptor(o)}))},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return n=s.sent(),[2,n.map(function(i,o){return WY(r[o],i)})]}})})},t.prototype.withFaceExpressions=function(){return new dI(this,this.input)},t.prototype.withAgeAndGender=function(){return new mI(this,this.input)},t}(rK),vI=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Br(this,void 0,void 0,function(){var r,n;return Ur(this,function(s){switch(s.label){case 0:return[4,this.parentTask];case 1:return r=s.sent(),r?[4,sI(r,this.input,function(i){return Kn.faceRecognitionNet.computeFaceDescriptor(i)},null,function(i){return i.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return n=s.sent(),[2,WY(r,n)]}})})},t.prototype.withFaceExpressions=function(){return new uI(this,this.input)},t.prototype.withAgeAndGender=function(){return new pI(this,this.input)},t}(rK),aK=function(e){ha(t,e);function t(r,n,s){var i=e.call(this)||this;return i.parentTask=r,i.input=n,i.useTinyLandmarkNet=s,i}return Object.defineProperty(t.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?Kn.faceLandmark68TinyNet:Kn.faceLandmark68Net},enumerable:!0,configurable:!0}),t}(j1),oMe=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Br(this,void 0,void 0,function(){var r,n,s,i,o,l=this;return Ur(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return r=c.sent(),n=r.map(function(d){return d.detection}),this.input instanceof os?[4,X4(this.input,n)]:[3,3];case 2:return i=c.sent(),[3,5];case 3:return[4,K4(this.input,n)];case 4:i=c.sent(),c.label=5;case 5:return s=i,[4,Promise.all(s.map(function(d){return l.landmarkNet.detectLandmarks(d)}))];case 6:return o=c.sent(),s.forEach(function(d){return d instanceof os&&d.dispose()}),[2,r.map(function(d,u){return eI(d,o[u])})]}})})},t.prototype.withFaceExpressions=function(){return new dI(this,this.input)},t.prototype.withAgeAndGender=function(){return new mI(this,this.input)},t.prototype.withFaceDescriptors=function(){return new xI(this,this.input)},t}(aK),lMe=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Br(this,void 0,void 0,function(){var r,n,s,i,o;return Ur(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return r=l.sent(),r?(n=r.detection,this.input instanceof os?[4,X4(this.input,[n])]:[3,3]):[2];case 2:return i=l.sent(),[3,5];case 3:return[4,K4(this.input,[n])];case 4:i=l.sent(),l.label=5;case 5:return s=i,[4,this.landmarkNet.detectLandmarks(s[0])];case 6:return o=l.sent(),s.forEach(function(c){return c instanceof os&&c.dispose()}),[2,eI(r,o)]}})})},t.prototype.withFaceExpressions=function(){return new uI(this,this.input)},t.prototype.withAgeAndGender=function(){return new pI(this,this.input)},t.prototype.withFaceDescriptor=function(){return new vI(this,this.input)},t}(aK),nK=function(e){ha(t,e);function t(r,n){n===void 0&&(n=new y1);var s=e.call(this)||this;return s.input=r,s.options=n,s}return t}(j1),sK=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Br(this,void 0,void 0,function(){var r,n,s,i;return Ur(this,function(o){switch(o.label){case 0:return r=this,n=r.input,s=r.options,s instanceof KY?[4,Kn.mtcnn.forward(n,s)]:[3,2];case 1:return[2,o.sent().map(function(l){return l.detection})];case 2:if(i=s instanceof nI?function(l){return Kn.tinyFaceDetector.locateFaces(l,s)}:s instanceof y1?function(l){return Kn.ssdMobilenetv1.locateFaces(l,s)}:s instanceof aI?function(l){return Kn.tinyYolov2.locateFaces(l,s)}:null,!i)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,i(n)]}})})},t.prototype.runAndExtendWithFaceDetections=function(){var r=this;return new Promise(function(n){return Br(r,void 0,void 0,function(){var s;return Ur(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return s=i.sent(),[2,n(s.map(function(o){return W4({},o)}))]}})})})},t.prototype.withFaceLandmarks=function(r){return r===void 0&&(r=!1),new oMe(this.runAndExtendWithFaceDetections(),this.input,r)},t.prototype.withFaceExpressions=function(){return new lI(this.runAndExtendWithFaceDetections(),this.input)},t.prototype.withAgeAndGender=function(){return new hI(this.runAndExtendWithFaceDetections(),this.input)},t}(nK),cMe=function(e){ha(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.run=function(){return Br(this,void 0,void 0,function(){var r,n;return Ur(this,function(s){switch(s.label){case 0:return[4,new sK(this.input,this.options)];case 1:return r=s.sent(),n=r[0],r.forEach(function(i){i.score>n.score&&(n=i)}),[2,n]}})})},t.prototype.runAndExtendWithFaceDetection=function(){var r=this;return new Promise(function(n){return Br(r,void 0,void 0,function(){var s;return Ur(this,function(i){switch(i.label){case 0:return[4,this.run()];case 1:return s=i.sent(),[2,n(s?W4({},s):void 0)]}})})})},t.prototype.withFaceLandmarks=function(r){return r===void 0&&(r=!1),new lMe(this.runAndExtendWithFaceDetection(),this.input,r)},t.prototype.withFaceExpressions=function(){return new cI(this.runAndExtendWithFaceDetection(),this.input)},t.prototype.withAgeAndGender=function(){return new fI(this.runAndExtendWithFaceDetection(),this.input)},t}(nK);function dMe(e,t){return t===void 0&&(t=new y1),new cMe(e,t)}function uMe(e,t){return t===void 0&&(t=new y1),new sK(e,t)}function hMe(e,t){if(e.length!==t.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var r=Array.from(e),n=Array.from(t);return Math.sqrt(r.map(function(s,i){return s-n[i]}).reduce(function(s,i){return s+Math.pow(i,2)},0))}var iK=function(){function e(t,r){r===void 0&&(r=.6),this._distanceThreshold=r;var n=Array.isArray(t)?t:[t];if(!n.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var s=1,i=function(){return"person "+s++};this._labeledDescriptors=n.map(function(o){if(o instanceof e0)return o;if(o instanceof Float32Array)return new e0(i(),[o]);if(o.descriptor&&o.descriptor instanceof Float32Array)return new e0(i(),[o.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(e.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),e.prototype.computeMeanDistance=function(t,r){return r.map(function(n){return hMe(n,t)}).reduce(function(n,s){return n+s},0)/(r.length||1)},e.prototype.matchDescriptor=function(t){var r=this;return this.labeledDescriptors.map(function(n){var s=n.descriptors,i=n.label;return new FB(i,r.computeMeanDistance(t,s))}).reduce(function(n,s){return n.distance<s.distance?n:s})},e.prototype.findBestMatch=function(t){var r=this.matchDescriptor(t);return r.distance<this.distanceThreshold?r:new FB("unknown",r.distance)},e.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(t){return t.toJSON()})}},e.fromJSON=function(t){var r=t.labeledDescriptors.map(function(n){return e0.fromJSON(n)});return new e(r,t.distanceThreshold)},e}();const fMe=()=>{const e=N.useRef(),[t,r]=N.useState(""),[n,s]=N.useState(""),[i,o]=N.useState(""),[l,c]=N.useState(null),[d,u]=N.useState(!1),[h,m]=N.useState(!1),[p,v]=N.useState(!1),[g,b]=N.useState(null),[y,C]=N.useState(!1),[w,k]=N.useState(0);N.useEffect(()=>{O()},[]);const S=async()=>{try{console.log("Starting camera...");const U={video:{width:{ideal:640},height:{ideal:480},facingMode:"user"}},J=await navigator.mediaDevices.getUserMedia(U);e.current&&(e.current.srcObject=J,e.current.onloadedmetadata=()=>{C(!0),console.log("Camera ready")})}catch(U){console.error("Camera access error:",U),alert("Camera access denied or not available")}},D={local:"/weights",cdn:{primary:"https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights",backup:"https://cdn.jsdelivr.net/npm/@vladmandic/face-api@latest/model"}},E=async(U,J,Y)=>{const oe=[{name:"Local Weights",url:D.local},{name:"Primary CDN",url:D.cdn.primary},{name:"Backup CDN",url:D.cdn.backup}];for(const M of oe)try{return console.log(`🔄 Loading ${J} from ${M.name}...`),await U.loadFromUri(M.url),console.log(`✅ ${J} loaded successfully from ${M.name}`),Y&&Y(),{success:!0,source:M.name}}catch(V){console.warn(`❌ Failed to load ${J} from ${M.name}:`,V.message),M.name==="Local Weights"&&console.log(`🌐 Falling back to CDN for ${J}...`)}throw new Error(`Failed to load ${J} from all sources (local weights + CDN)`)},T=async()=>{try{console.log("🚀 Loading face-api models (Local Weights + CDN fallback)..."),k(5);const U=[{net:Kn.tinyFaceDetector,name:"Tiny Face Detector",progress:30},{net:Kn.faceLandmark68Net,name:"Face Landmark 68",progress:65},{net:Kn.faceRecognitionNet,name:"Face Recognition",progress:95}];for(const J of U)await E(J.net,J.name,()=>k(J.progress)),await new Promise(Y=>setTimeout(Y,100));k(100),console.log("🎉 All models loaded successfully!"),u(!0),S()}catch(U){console.error("💥 Critical: All model loading attempts failed:",U),k(0),A(U)}},A=U=>{const J=`
Face recognition models failed to load:
${U.message}

This might be due to:
- Corrupted local weight files
- Network connectivity issues
- Missing model files

Would you like to:
1. Try again (Recommended)
2. Continue without face recognition
3. Use CDN only
  `;confirm(J+`

Click OK to try again, Cancel to continue without face recognition`)?setTimeout(()=>T(),1e3):(console.log("📱 Continuing without face recognition..."),u(!1),startBasicCamera())},L=async()=>{try{console.log("🌐 Loading models from CDN only..."),k(10);const U=D.cdn.primary;await Kn.tinyFaceDetector.loadFromUri(U),k(40),await Kn.faceLandmark68Net.loadFromUri(U),k(70),await Kn.faceRecognitionNet.loadFromUri(U),k(100),console.log("✅ All models loaded from CDN"),u(!0),S()}catch(U){console.error("CDN loading also failed:",U),alert("Unable to load face recognition models. Please check your internet connection.")}},P=async()=>{const U=["/weights/tiny_face_detector_model-weights_manifest.json","/weights/tiny_face_detector_model-shard1","/weights/face_landmark_68_model-weights_manifest.json","/weights/face_landmark_68_model-shard1","/weights/face_recognition_model-weights_manifest.json","/weights/face_recognition_model-shard1","/weights/face_recognition_model-shard2"];console.log("🔍 Checking weight file integrity...");for(const J of U)try{const Y=await fetch(J,{method:"HEAD"}),oe=Y.headers.get("content-length");if(console.log(`${Y.ok?"✅":"❌"} ${J}: ${oe?oe+" bytes":"Size unknown"}`),!Y.ok)return console.warn(`⚠️ Missing or inaccessible: ${J}`),!1}catch(Y){return console.error(`❌ Error checking ${J}:`,Y),!1}return console.log("✅ All weight files validated successfully"),!0},O=async()=>{console.log("🎯 Starting comprehensive model loading..."),await P()?(console.log("✅ Local weights validated, using hybrid approach"),await T()):(console.log("⚠️ Local weights invalid, using CDN only"),await L())},Z=async()=>{if(!t.trim()){alert("Please enter Employee ID");return}try{v(!0),console.log("Fetching employee by ID...");const U=await fetch(`/api/attendance/employee/${t.trim()}`);if(!U.ok){if(U.status===404){alert("Employee not found with this ID"),o(""),s("");return}throw new Error(`HTTP error! status: ${U.status}`)}const J=await U.json();o(J.name),s(J.name),alert(`Employee found: ${J.name}`)}catch(U){console.error("Error fetching employee:",U),alert("Error fetching employee details. Please try again."),o(""),s("")}finally{v(!1)}},z=async U=>{try{m(!0),console.log("Checking for duplicate faces...");const Y=await(await fetch("/api/attendance/employees")).json();if(Y.length===0)return b({isDuplicate:!1,message:"No existing employees to compare with."}),!1;const oe=Y.map(H=>{const ee=H.descriptor.map(ae=>parseFloat(ae)),re=new Float32Array(ee);return new e0(H._id,[re])}),V=new iK(oe,.5).findBestMatch(new Float32Array(U));if(console.log("Duplicate check result:",V.label,"Distance:",V.distance),V.label!=="unknown"){const H=Y.find(re=>re._id===V.label),ee=(100-V.distance*100).toFixed(1);return b({isDuplicate:!0,employeeName:H.name,similarity:ee,message:`⚠️ Face matches existing employee: ${H.name} (${ee}% similarity)`}),!0}else return b({isDuplicate:!1,message:`✅ No duplicate found. Face is unique (closest match: ${(100-V.distance*100).toFixed(1)}% similarity)`}),!1}catch(J){return console.error("Error checking duplicates:",J),b({isDuplicate:!1,message:"⚠️ Could not check for duplicates. Proceeding anyway."}),!1}finally{m(!1)}},K=async()=>{if(!d){alert("Models are still loading, please wait...");return}if(!y||!e.current){alert("Camera not ready");return}try{console.log("Capturing face...");const U=await dMe(e.current,new nI).withFaceLandmarks().withFaceDescriptor();if(U){const J=Array.from(U.descriptor);c(J),console.log("Face captured successfully. Checking for duplicates...");const Y=await z(J);alert(Y?"⚠️ Warning: This face appears to match an existing employee. Please check the details below.":"Face captured successfully! No duplicate found. You can now register.")}else alert("No face detected. Please make sure your face is clearly visible and try again."),b(null)}catch(U){console.error("Face detection error:",U),alert("Error detecting face. Please try again."),b(null)}},B=async()=>{if(!t.trim()){alert("Please enter Employee ID");return}if(!n.trim()){alert("Please fetch employee name using Employee ID");return}if(!l){alert("Please capture face first");return}if(!(g&&g.isDuplicate&&!window.confirm(`⚠️ WARNING: This face matches existing employee "${g.employeeName}" with ${g.similarity}% similarity.

Are you sure you want to register this person as a new employee?

Click OK to proceed anyway, or Cancel to stop.`)))try{console.log("Registering employee...");const U=document.createElement("canvas");U.width=e.current.videoWidth,U.height=e.current.videoHeight,U.getContext("2d").drawImage(e.current,0,0);const Y=U.toDataURL("image/png"),oe=await fetch("/api/attendance/employee/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({employeeId:t.trim(),name:n.trim(),descriptor:l})});if(!oe.ok){const H=await oe.json();throw new Error(H.error||"Registration failed")}const M=await oe.json();alert(`✅ Employee "${n.trim()}" registered successfully!`);const V=e.current.srcObject;V&&(V.getTracks().forEach(ee=>ee.stop()),e.current.srcObject=null),r(""),s(""),o(""),c(null),b(null),C(!1)}catch(U){console.error("Registration error:",U),alert(`Registration failed: ${U.message}`)}},Q=async()=>{try{e.current&&e.current.srcObject&&e.current.srcObject.getTracks().forEach(Y=>Y.stop()),c(null),b(null),C(!1),await S()}catch(U){console.error("Error restarting camera:",U),alert("Error restarting camera")}};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Employee Face Registration"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"HRMS"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Employee Face Registration"})]})})]})}),a.jsx("div",{children:a.jsx("div",{className:"card ",children:a.jsxs("div",{className:"card-body ",children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-lg-6",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsx("h2",{className:"h3 fw-semibold text-dark",children:"Camera Feed"})}),!d&&a.jsxs("div",{className:"mb-4",children:[a.jsx("div",{className:"progress",children:a.jsx("div",{className:"progress-bar bg-primary progress-bar-animated progress-bar-striped",style:{width:`${w}%`}})}),a.jsxs("p",{className:"text-center text-muted small mt-2",children:["Loading models... ",w,"%"]})]}),a.jsx("div",{className:"position-relative mb-4",children:a.jsxs("div",{className:"card border-3 border-secondary rounded-3 overflow-hidden shadow",children:[a.jsx("video",{ref:e,autoPlay:!0,muted:!0,className:"w-100 h-100"}),!y&&d&&a.jsx("div",{className:"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center bg-light",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border text-primary mb-2",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"text-muted mb-0",children:"Starting camera..."})]})})]})}),a.jsxs("div",{className:"d-flex gap-2 justify-content-center flex-wrap",children:[a.jsx("button",{onClick:K,disabled:!d||!y||h,className:`btn btn-lg fw-semibold px-4 ${d&&y&&!h?"btn-primary shadow":"btn-secondary"}`,children:d?y?h?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Checking..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-camera-fill me-2"}),"Capture & Check"]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Camera Starting..."]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Loading Models..."]})}),a.jsxs("button",{onClick:Q,className:"btn btn-outline-info btn-lg fw-semibold px-4",children:[a.jsx("i",{className:"bi bi-arrow-clockwise me-2"}),"Restart Camera"]})]})]}),a.jsxs("div",{className:"col-lg-6",children:[a.jsx("div",{className:"text-center mb-4",children:a.jsx("h2",{className:"h3 fw-semibold text-dark",children:"Employee Details"})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"form-label fw-semibold text-dark",children:"Employee ID"}),a.jsxs("div",{className:"input-group input-group-sm",children:[a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Enter Employee ID",value:t,onChange:U=>r(U.target.value)}),a.jsx("button",{onClick:Z,disabled:p||!t.trim(),className:`btn ${!p&&t.trim()?"btn-success":"btn-secondary"} fw-semibold`,type:"button",children:p?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Fetching..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-search me-2"}),"Fetch"]})})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"form-label fw-semibold text-dark",children:"Employee Name"}),a.jsx("input",{type:"text",className:"form-control form-control-lg bg-light",value:n,readOnly:!0,placeholder:"Name will be fetched automatically"})]}),a.jsx("div",{className:"mb-4",children:a.jsx("button",{onClick:B,disabled:!t.trim()||!n.trim()||!l||h,className:`btn btn-lg w-100 fw-bold py-3 ${t.trim()&&n.trim()&&l&&!h?g&&g.isDuplicate?"btn-danger":"btn-success":"btn-secondary"} shadow`,children:g&&g.isDuplicate?a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Register Anyway ⚠️"]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"bi bi-person-plus me-2"}),"Register Employee"]})})}),a.jsxs("div",{className:"mb-4",children:[!d&&a.jsxs("div",{className:"alert alert-info d-flex align-items-center mb-2",role:"alert",children:[a.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),a.jsx("span",{children:"Loading face recognition models..."})]}),d&&!y&&a.jsxs("div",{className:"alert alert-warning d-flex align-items-center mb-2",role:"alert",children:[a.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),a.jsx("span",{children:"Starting camera..."})]}),l&&!g&&a.jsxs("div",{className:"alert alert-warning mb-2",role:"alert",children:[a.jsx("div",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Checking for duplicates..."]}),l&&g&&!g.isDuplicate&&a.jsxs("div",{className:"alert alert-success mb-2",role:"alert",children:[a.jsx("i",{className:"bi bi-check-circle-fill me-2"}),"Face verified unique, ready to register"]}),l&&g&&g.isDuplicate&&a.jsxs("div",{className:"alert alert-warning mb-2",role:"alert",children:[a.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"Potential duplicate detected"]})]})]})]}),g&&a.jsx("div",{className:"mt-4",children:a.jsxs("div",{className:`alert ${g.isDuplicate?"alert-warning border-warning":"alert-success border-success"} border-3`,children:[a.jsxs("h5",{className:`alert-heading fw-bold ${g.isDuplicate?"text-warning":"text-success"}`,children:[a.jsx("i",{className:`bi ${g.isDuplicate?"bi-exclamation-triangle":"bi-check-circle"} me-2`}),"Duplicate Check Result"]}),a.jsx("p",{className:"mb-2 fw-semibold",children:g.message}),g.isDuplicate&&a.jsxs("p",{className:"mb-0 small",children:[a.jsx("i",{className:"bi bi-info-circle me-1"}),"Proceeding will register this person as a separate employee, which may cause recognition issues."]})]})})]})})})]})},mMe=()=>{const e=N.useRef(),t=N.useRef(),[r,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState(!1),[c,d]=N.useState(!1),[u,h]=N.useState(!1),[m,p]=N.useState(null),[v,g]=N.useState(null),[b,y]=N.useState(!1),[C,w]=N.useState(!1),k=N.useRef(),S=N.useRef(),D=N.useRef(!1),[E,T]=N.useState(0);N.useEffect(()=>(O().then(()=>{z(),B()}),()=>{A()}),[]),N.useEffect(()=>(u&&o&&s&&m!=="completed"&&!C&&Y(),()=>{k.current&&clearInterval(k.current)}),[u,o,s,m,C]);const A=()=>{k.current&&(clearInterval(k.current),k.current=null),S.current&&(S.current.getTracks().forEach(oe=>oe.stop()),S.current=null)},L={local:"/facemodels",cdn:{primary:"https://raw.githubusercontent.com/justadudewhohacks/face-api.js/master/weights",backup:"https://cdn.jsdelivr.net/npm/@vladmandic/face-api@latest/model"}},P=async(oe,M,V)=>{const H=[{name:"Local FaceModels",url:`${L.local}/${V}`},{name:"Primary CDN",url:L.cdn.primary},{name:"Backup CDN",url:L.cdn.backup}];for(const ee of H)try{return await oe.loadFromUri(ee.url),{success:!0,source:ee.name}}catch(re){console.warn(`❌ Failed to load ${M} from ${ee.name}:`,re.message)}throw new Error(`Failed to load ${M} from all sources`)},O=async()=>{try{T&&T(10);const oe=[{net:Kn.tinyFaceDetector,name:"Tiny Face Detector",path:"tiny_face_detector"},{net:Kn.faceLandmark68Net,name:"Face Landmark 68",path:"face_landmark_68"},{net:Kn.faceRecognitionNet,name:"Face Recognition",path:"face_recognition"}];for(let M=0;M<oe.length;M++){const V=oe[M];await P(V.net,V.name,V.path),T&&T(30+M*20)}T&&T(100),l(!0)}catch(oe){console.error("❌ Error loading models:",oe);const M=`
Failed to load face recognition models: ${oe.message}

This could be due to:
- Corrupted local model files
- Network connectivity issues
- Missing model files

Would you like to try CDN-only mode?
    `;confirm(M)?await Z():(alert("Face recognition will be disabled. You can still use basic camera features."),l&&l(!1))}},Z=async()=>{try{T&&T(10);const oe=L.cdn.primary;await Kn.tinyFaceDetector.loadFromUri(oe),T&&T(40),await Kn.faceLandmark68Net.loadFromUri(oe),T&&T(70),await Kn.faceRecognitionNet.loadFromUri(oe),T&&T(100),l(!0)}catch(oe){console.error("❌ CDN loading also failed:",oe),alert("Unable to load face recognition models. Please check your internet connection and try again."),T&&T(0)}},z=async()=>{try{const oe=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:640},height:{ideal:480}}});S.current=oe,e.current&&(e.current.srcObject=oe,e.current.addEventListener("loadedmetadata",()=>{t.current&&(t.current.width=e.current.videoWidth,t.current.height=e.current.videoHeight,h(!0),w(!1))}))}catch(oe){console.error("Camera access error:",oe),alert("Camera access denied or not available")}},K=()=>{k.current&&(clearInterval(k.current),k.current=null),S.current&&(S.current.getTracks().forEach(oe=>{oe.stop()}),S.current=null),e.current&&(e.current.srcObject=null),t.current&&t.current.getContext("2d").clearRect(0,0,t.current.width,t.current.height),h(!1),w(!0),y(!1),D.current=!1},B=async()=>{try{d(!0);const oe=await Oe.get("/api/attendance/employees");if(oe.data.length===0){d(!1);return}const M=oe.data.map(V=>{const H=V.descriptor.map(re=>parseFloat(re)),ee=new Float32Array(H);return new e0(V._id,[ee])});i(new iK(M,.6)),n(oe.data),d(!1)}catch(oe){console.error("Error loading employees:",oe),alert("Error loading registered employees"),d(!1)}},Q=async(oe,M,V)=>{if(!(D.current||b))try{y(!0),D.current=!0;const H=await Oe.post("/api/attendance/auto",{employeeId:oe});g({...H.data.attendance,confidence:V,type:H.data.type,workingSummary:H.data.workingSummary,employeeName:M}),H.data.type==="IN"?(alert(`🟢 Welcome ${M}!
IN time recorded`),p("in"),setTimeout(()=>{D.current=!1,y(!1)},1e4)):H.data.type==="OUT"?(alert(`🔴 SEE YOU TOMM${M}!
OUT time recorded`),p("completed"),setTimeout(()=>{K()},3e3)):H.data.type==="COMPLETED"&&(alert(`👋 Hello ${M}!
Your attendance is already complete for today.
${H.data.workingSummary}`),p("completed"),setTimeout(()=>{K()},3e3))}catch(H){console.error("Auto attendance error:",H),H.response&&H.response.data?alert(`❌ Error: ${H.response.data.error}`):alert(`❌ Failed to mark attendance for ${M}. Please try again.`),setTimeout(()=>{D.current=!1,y(!1)},8080)}},U=(oe,M)=>{const V=M.getContext("2d");V.clearRect(0,0,M.width,M.height),oe&&oe.length>0&&oe.forEach(H=>{const{box:ee,label:re,distance:ae,employeeId:ne}=H;if(re!=="unknown"&&!D.current&&!b&&m!=="completed"){const Ne=(100-ae*100).toFixed(1);Ne>60&&Q(ne,re,Ne)}const ie=.4,G=ee.width*(1-ie),de=ee.height*(1-ie),X=ee.x+(ee.width-G)/2,le=ee.y+(ee.height-de)/2;V.strokeStyle=re==="unknown"?"#ff0000":"#00ff00",V.lineWidth=2,V.strokeRect(X,le,G,de);const Se=re==="unknown"?"Unknown":re;`${(100-ae*100).toFixed(1)}`;const se=`${Se} ${b?" (Capturing...)":""}`;V.font="14px Arial",V.fillStyle=re==="unknown"?"#ff0000":b?"#ff8c00":"#00ff00";const ye=V.measureText(se).width+10;V.fillRect(X,le-25,ye,25),V.fillStyle="#ffffff",V.fillText(se,X+5,le-8)})},J=async()=>{if(!(!e.current||!t.current||!o||!s||C))try{const M=(await uMe(e.current,new nI).withFaceLandmarks().withFaceDescriptors()).map(V=>{const H=s.findBestMatch(V.descriptor),ee=H.label!=="unknown"?r.find(re=>re._id===H.label):null;return{box:V.detection.box,label:ee?ee.name:"unknown",employeeId:H.label!=="unknown"?H.label:null,distance:H.distance}});U(M,t.current)}catch(oe){console.error("Real-time detection error:",oe)}},Y=()=>{k.current&&clearInterval(k.current),k.current=setInterval(J,1e3)};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Attendance Taking"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"HRMS"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Attendance Taking"})]})})]})}),a.jsx("div",{style:{margin:"20px 0",position:"relative",display:"inline-block"},children:C?a.jsx("div",{style:{width:"400px",height:"300px",border:"2px solid #6c757d",borderRadius:"8px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:m==="completed"?"#d4edda":"#f8f9fa",color:m==="completed"?"#155724":"#495057",fontSize:"16px",fontWeight:"bold",textAlign:"center",padding:"20px",boxSizing:"border-box"},children:m==="completed"&&a.jsxs(a.Fragment,{children:[a.jsx("div",{children:"✅ Attendance Completed!"}),a.jsx("div",{style:{fontSize:"14px",marginTop:"10px"},children:"📹 Camera Stopped"}),v&&v.workingSummary&&a.jsxs("div",{style:{fontSize:"14px",fontWeight:"normal",marginTop:"10px",lineHeight:"1.4"},children:["👤 ",v.employeeName,a.jsx("br",{}),"⏰ ",v.workingSummary]})]})}):a.jsxs(a.Fragment,{children:[a.jsx("video",{ref:e,autoPlay:!0,muted:!0,className:"w-100 h-100",style:{border:"2px solid #ccc",borderRadius:"8px"}}),a.jsx("canvas",{ref:t,width:"400",height:"300",style:{position:"absolute",top:0,left:0,pointerEvents:"none",borderRadius:"8px"}})]})}),v&&a.jsxs("div",{style:{margin:"20px 0",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"6px",border:"1px solid #dee2e6"},children:[a.jsx("h4",{style:{margin:"0 0 10px 0",color:"#495057"},children:"Last Attendance Record"}),a.jsxs("div",{style:{textAlign:"left",fontSize:"14px",color:"#6c757d"},children:[a.jsx("strong",{children:"Employee:"})," ",v.employeeName,a.jsx("br",{}),a.jsx("strong",{children:"Type:"})," ",v.type==="IN"?"🟢 Check IN":v.type==="OUT"?"🔴 Check OUT":"✅ Already Complete",a.jsx("br",{}),v.inTime&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"IN Time:"})," ",new Date(v.inTime).toLocaleString(),a.jsx("br",{})]}),v.outTime&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"OUT Time:"})," ",new Date(v.outTime).toLocaleString(),a.jsx("br",{})]}),v.workingSummary&&a.jsxs(a.Fragment,{children:[a.jsx("strong",{children:"Working Hours:"})," ",v.workingSummary,a.jsx("br",{})]})]})]}),a.jsx("div",{style:{margin:"20px 0"},children:C?a.jsx("div",{children:a.jsx("button",{onClick:()=>window.location.reload(),className:"btn btn-secondary",children:"New Session"})}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:B,disabled:c,className:"btn btn-primary me-2",children:c?"Loading...":" Refresh Employee List"}),a.jsx("button",{onClick:K,className:"btn btn-danger",children:"Stop Camera"})]})}),a.jsx("div",{style:{marginTop:"20px",fontSize:"14px",color:"#666"},children:C?a.jsx("div",{children:m==="completed"&&a.jsx("p",{style:{color:"#28a745",fontSize:"16px",fontWeight:"bold"},children:"🎉 Daily attendance completed successfully! Camera stopped for privacy."})}):a.jsxs(a.Fragment,{children:[!o&&a.jsx("p",{children:"🔄 Loading face recognition models..."}),o&&c&&a.jsx("p",{children:"🔄 Loading registered employees..."}),o&&!u&&a.jsx("p",{children:"📹 Starting camera..."}),o&&!c&&r.length===0&&a.jsx("p",{style:{color:"orange"},children:"⚠️ No employees registered. Please register employees first."})]})})]})},pMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(new Date().toISOString().split("T")[0]),[s,i]=N.useState(!1),[o,l]=N.useState("date");N.useEffect(()=>{d()},[]);const c=async(y=null)=>{i(!0);try{let C="/api/attendance/records";y&&(C+=`?date=${y}`);const w=await Oe.get(C);let k=[];Array.isArray(w.data)&&(k=w.data),t(k),console.log("URL:",C),console.log("Fetched attendance data:",k)}catch(C){console.error("Error fetching attendance:",C),alert("Error fetching attendance records"),t([])}i(!1)},d=async()=>{i(!0);try{const y=await Oe.get("/api/attendance/today");let C=[];y.data&&y.data.employees&&Array.isArray(y.data.employees)&&(C=y.data.employees.map(w=>({...w,date:y.data.date,dateObject:y.data.dateObject}))),t(C),console.log("Today's attendance data:",C),l("today")}catch(y){console.error("Error fetching today's attendance:",y),alert("Error fetching today's attendance"),t([])}i(!1)},u=async y=>{i(!0);try{const C=await Oe.get(`/api/attendance/date/${y}`);let w=[];C.data&&C.data.employees&&Array.isArray(C.data.employees)&&(w=C.data.employees.map(k=>({...k,date:C.data.date,dateObject:C.data.dateObject}))),t(w),console.log(`Attendance data for ${y}:`,w)}catch(C){console.error("Error fetching attendance by date:",C),C.response&&C.response.status===404?alert(`No attendance records found for ${y}`):alert("Error fetching attendance records"),t([])}i(!1)},h=y=>{y.preventDefault(),u(y.target.value),l("date")},m=()=>{c(),l("all")},p=y=>y?new Date(y).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"-",v=y=>new Date(y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),g=y=>{if(!y||y===0)return"-";const C=Math.floor(y),w=Math.round(y%1*60);return C===0?`${w}m`:w===0?`${C}h`:`${C}h ${w}m`},b=()=>{const y=e.reduce((C,w)=>C+(w.workingHours||0),0);return g(y)};return a.jsxs("div",{className:"content",children:[a.jsx("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:" Employee Attendance Dashboard"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"HRMS"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" Employee Attendance Dashboard"})]})})]})}),a.jsxs("div",{className:"d-flex align-items-center mb-3 gap-3",children:[a.jsxs("div",{className:"form-group form-group-sm",children:[a.jsx("label",{className:"form-label me-1",children:" Select Date:"}),a.jsx("input",{type:"date",className:"form-control-sm",value:r,onChange:y=>{n(y.target.value),h(y)}})]}),a.jsxs("div",{children:[a.jsx("button",{onClick:d,disabled:s,className:"btn btn-sm btn-outline-primary me-2",children:"Today"}),a.jsx("button",{onClick:m,disabled:s,className:"btn btn-sm btn-outline-secondary",children:"All Records"})]})]}),s?a.jsx("div",{children:a.jsx("p",{children:" Loading attendance records..."})}):a.jsx("div",{children:e.length===0?a.jsx("div",{children:a.jsx("p",{children:"No attendance records found for the selected criteria."})}):a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Employee Name"}),a.jsx("th",{children:"Employee ID"}),o==="all"&&a.jsx("th",{children:"Date"}),a.jsx("th",{children:"IN Time"}),a.jsx("th",{children:"OUT Time"}),a.jsx("th",{children:"Working Hours"}),a.jsx("th",{children:"Status"})]})}),a.jsx("tbody",{children:e.map((y,C)=>a.jsxs("tr",{children:[a.jsx("td",{children:`${y.firstName||""} ${y.lastName||""}`.trim()||"Unknown Employee"}),a.jsx("td",{children:y.employeeId||"N/A"}),o==="all"&&a.jsx("td",{children:v(y.date)}),a.jsx("td",{children:y.inTime?a.jsx("span",{children:p(y.inTime)}):a.jsx("span",{children:"-"})}),a.jsx("td",{children:y.outTime?a.jsx("span",{children:p(y.outTime)}):a.jsx("span",{children:"Still Working"})}),a.jsx("td",{children:a.jsx("span",{children:g(y.workingHours)})}),a.jsx("td",{children:y.status})]},`${y.employeeObjectId}-${y.date}-${C}`))})]})})})})}),e.length>0&&a.jsxs("div",{className:"card",children:[a.jsx("h4",{className:"card-header",children:"📈 Summary Statistics"}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-3",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-body",children:[e.length,a.jsx("div",{className:"statistic-label",children:"Total Records"})]})," "]})}),a.jsx("div",{className:"col-xl-3",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[e.filter(y=>y.status==="IN"&&!y.outTime).length,a.jsx("div",{className:"statistic-label",children:"Currently Working"})]})})}),a.jsxs("div",{className:"col-xl-3",children:[a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[e.filter(y=>y.outTime).length,a.jsx("div",{className:"statistic-label",children:"Completed Shifts"})]})})," "]}),a.jsx("div",{className:"col-xl-3",children:o!=="all"&&a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[b(),a.jsx("div",{className:"statistic-label",children:"Total Hours"})]})})})]})})]})]})},xMe=()=>{const[e,t]=N.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState({}),[s,i]=N.useState([]),[o,l]=N.useState(null),[c,d]=N.useState(!1),[u,h]=N.useState(!1),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear"),v=/^\d{0,6}$/;N.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Oe.get("/api/billingcategory",{params:{companyId:m,financialYear:p}});i(E.data)}catch(E){console.error("Failed to fetch categories",E)}},b=(E,T)=>{switch(E){case"categoryName":if(!T)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!T)return`${E} is required`;if(!v.test(T))return"Max 6 digits allowed";break}return""},y=E=>{const{name:T,value:A}=E.target;let L=A,P="";switch(T){case"categoryName":L=A,L.length>100&&(L=L.slice(0,100),P="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":L=A.replace(/[^0-9]/g,""),L.length>6&&(L=L.slice(0,6),P="Maximum 6 digits allowed");break}const O=b(T,L),Z=P||O;t(z=>({...z,[T]:L})),n(z=>({...z,[T]:Z}))},C=()=>!b("categoryName",e.categoryName)&&!b("rangeStart",e.rangeStart)&&!b("rangeEnd",e.rangeEnd),w=async E=>{E.preventDefault();const T={};if(Object.keys(e).forEach(A=>{T[A]=b(A,e[A])}),n(T),!Object.values(T).some(A=>A))try{o?(await Oe.put(`/api/billingcategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/billingcategory",e),alert("Category saved successfully!")),g(),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""}),l(null),D(),window.location.reload()}catch(A){console.error(A),alert("Failed to save category.")}},k=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id),S()},S=()=>d(!0),D=()=>d(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Billing Category"})}),a.jsx("div",{className:"d-flex gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:S,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Customer Invoice Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(E=>a.jsxs("tr",{children:[a.jsx("td",{children:E.categoryName}),a.jsx("td",{children:E.rangeStart}),a.jsx("td",{children:E.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>k(E),children:"Edit"})})]},E._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Billing Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{D(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:w,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:E,value:e[E],onChange:y,className:"form-control"})]},E))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!C(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})};function vMe(){const[e,t]=N.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState([]),[s,i]=N.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const o=y=>{const{name:C,value:w}=y.target;if(C==="rangeFrom"||C==="rangeTo"){const k=w.replace(/\D/g,"");if(k.length<=6){const S=parseInt(k);k.length===6&&S>=1e5&&S<=999999?t(D=>({...D,[C]:k})):k.length<6&&t(D=>({...D,[C]:k}))}}else t(k=>({...k,[C]:w}))},l=async y=>{y.preventDefault();try{if(s){const C=await Oe.put(`/api/customer-categories/${s}`,e);alert("Customer Category Updated!"),n(w=>w.map(k=>k._id===s?C.data:k)),i(null)}else{const C=await Oe.post("/api/customer-categories",e);alert("Customer Category Added!"),n([...r,C.data])}t({categoryName:"",rangeFrom:"",rangeTo:""}),b(),window.location.reload()}catch(C){console.error(C),alert("Error adding/updating category")}},c=async()=>{try{const y=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear"),w=await Oe.get("/api/customer-categories",{params:{companyId:y,financialYear:C}});n(w.data)}catch(y){console.error(y)}};N.useEffect(()=>{c()},[]);const d=y=>{t({categoryName:y.categoryName,rangeFrom:y.rangeFrom,rangeTo:y.rangeTo}),i(y._id)},[u,h]=N.useState(!1),m=()=>h(!0),p=()=>h(!1),[v,g]=N.useState(!1),b=()=>g(!1);return a.jsx("div",{className:"",children:a.jsx("div",{children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Customer Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{m()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Customer Category"]})})})]}),a.jsxs("div",{children:[u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit Customer Category":"Add Customer Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),p(),t({categoryName:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:l,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Category Name"}),a.jsx("input",{type:"text",name:"categoryName",placeholder:"e.g., Premium",value:e.categoryName,onChange:o,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Range From"}),a.jsx("input",{type:"text",name:"rangeFrom",placeholder:"e.g., 100000",min:"100000",max:"999999",value:e.rangeFrom,onChange:o,required:!0,pattern:"\\d{6}",className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2 ",children:[a.jsx("label",{children:"Range To"}),a.jsx("input",{type:"text",name:"rangeTo",max:e.rangeFrom?e.rangeFrom+9999:1999,placeholder:"e.g., 199999",value:e.rangeTo,onChange:o,required:!0,className:"form-control"})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body",children:[" ",a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[r.map(y=>a.jsxs("tr",{children:[a.jsx("td",{children:y.categoryName}),a.jsx("td",{children:y.rangeFrom}),a.jsx("td",{children:y.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{d(y),m()},children:"Edit"})})]},y._id)),r.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"text-center",children:"No categories found."})})]})]})})]})})]})]})})})}const gMe=()=>{const[e,t]=N.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState({}),[s,i]=N.useState([]),[o,l]=N.useState(null),[c,d]=N.useState(!1),[u,h]=N.useState(!1);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const m=/^\d{0,6}$/;N.useEffect(()=>{p()},[]);const p=async()=>{try{const S=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear"),E=await Oe.get("/api/goodsissuecategory",{params:{companyId:S,financialYear:D}});i(E.data)}catch(S){console.error("Failed to fetch categories",S)}},v=(S,D)=>{switch(S){case"categoryName":if(!D)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!D)return`${S} is required`;if(!m.test(D))return"Max 6 digits allowed";break}return""},g=S=>{const{name:D,value:E}=S.target;let T=E,A="";switch(D){case"categoryName":T=E,T.length>100&&(T=T.slice(0,100),A="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":T=E.replace(/[^0-9]/g,""),T.length>6&&(T=T.slice(0,6),A="Maximum 6 digits allowed");break}const L=v(D,T),P=A||L;t(O=>({...O,[D]:T})),n(O=>({...O,[D]:P}))},b=()=>!v("categoryName",e.categoryName)&&!v("rangeStart",e.rangeStart)&&!v("rangeEnd",e.rangeEnd),y=async S=>{S.preventDefault();const D={};if(Object.keys(e).forEach(E=>{D[E]=v(E,e[E])}),n(D),!Object.values(D).some(E=>E))try{o?(await Oe.put(`/api/goodsissuecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsissuecategory",e),alert("Category saved successfully!")),p(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(E){console.error(E),alert("Failed to save category.")}},C=S=>{t({categoryName:S.categoryName,prefix:S.prefix,rangeStart:S.rangeStart,rangeEnd:S.rangeEnd}),l(S._id),w()},w=()=>d(!0),k=()=>d(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Goods Issue Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:w,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Issue Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(S=>a.jsxs("tr",{children:[a.jsx("td",{children:S.categoryName}),a.jsx("td",{children:S.rangeStart}),a.jsx("td",{children:S.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>C(S),children:"Edit"})})]},S._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Issue Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:y,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(S=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:S==="categoryName"?"Category Name":S==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:S,value:e[S],onChange:g,className:"form-control"})]},S))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!b(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})},bMe=()=>{const[e,t]=N.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState({}),[s,i]=N.useState([]),[o,l]=N.useState(null),[c,d]=N.useState(!1),[u,h]=N.useState(!1);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const m=/^\d{0,6}$/;N.useEffect(()=>{p()},[]);const p=async()=>{try{const S=localStorage.getItem("selectedCompanyId"),D=localStorage.getItem("financialYear"),E=await Oe.get("/api/goodsreceiptcategory",{params:{companyId:S,financialYear:D}});i(E.data)}catch(S){console.error("Failed to fetch categories",S)}},v=(S,D)=>{switch(S){case"categoryName":if(!D)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!D)return`${S} is required`;if(!m.test(D))return"Max 6 digits allowed";break}return""},g=S=>{const{name:D,value:E}=S.target;let T=E,A="";switch(D){case"categoryName":T=E,T.length>100&&(T=T.slice(0,100),A="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":T=E.replace(/[^0-9]/g,""),T.length>6&&(T=T.slice(0,6),A="Maximum 6 digits allowed");break}const L=v(D,T),P=A||L;t(O=>({...O,[D]:T})),n(O=>({...O,[D]:P}))},b=()=>!v("categoryName",e.categoryName)&&!v("rangeStart",e.rangeStart)&&!v("rangeEnd",e.rangeEnd),y=async S=>{S.preventDefault();const D={};if(Object.keys(e).forEach(E=>{D[E]=v(E,e[E])}),n(D),!Object.values(D).some(E=>E))try{o?(await Oe.put(`/api/goodsreceiptcategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsreceiptcategory",e),alert("Category saved successfully!")),p(),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(E){console.error(E),alert("Failed to save category.")}},C=S=>{t({categoryName:S.categoryName,prefix:S.prefix,rangeStart:S.rangeStart,rangeEnd:S.rangeEnd}),l(S._id),w()},w=()=>d(!0),k=()=>d(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Goods Receipt Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:w,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Receipt Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(S=>a.jsxs("tr",{children:[a.jsx("td",{children:S.categoryName}),a.jsx("td",{children:S.rangeStart}),a.jsx("td",{children:S.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>C(S),children:"Edit"})})]},S._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Receipt Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:y,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(S=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:S==="categoryName"?"Category Name":S==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:S,value:e[S],onChange:g,className:"form-control "})]},S))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!b(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})},yMe=()=>{const[e,t]=N.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState(localStorage.getItem("selectedCompanyId")),[s,i]=N.useState(localStorage.getItem("financialYear")),[o,l]=N.useState({}),[c,d]=N.useState([]),[u,h]=N.useState(null),[m,p]=N.useState(!1),[v,g]=N.useState(!1),b=/^\d{0,6}$/;N.useEffect(()=>{y()},[]);const y=async()=>{try{const A=await Oe.get("/api/invoicecategory",{params:{companyId:r,financialYear:s}});d(A.data)}catch(A){console.error("Failed to fetch categories",A)}},C=(A,L)=>{switch(A){case"categoryName":if(!L)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!L)return`${A} is required`;if(!b.test(L))return"Max 6 digits allowed";break}return""},w=A=>{const{name:L,value:P}=A.target;let O=P,Z="";switch(L){case"categoryName":O=P,O.length>100&&(O=O.slice(0,100),Z="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":O=P.replace(/[^0-9]/g,""),O.length>6&&(O=O.slice(0,6),Z="Maximum 6 digits allowed");break}const z=C(L,O),K=Z||z;t(B=>({...B,[L]:O})),l(B=>({...B,[L]:K}))},k=()=>!C("categoryName",e.categoryName)&&!C("rangeStart",e.rangeStart)&&!C("rangeEnd",e.rangeEnd),S=async A=>{A.preventDefault();const L={};if(Object.keys(e).forEach(P=>{L[P]=C(P,e[P])}),l(L),!Object.values(L).some(P=>P))try{u?(await Oe.put(`/api/invoicecategory/${u}`,e),alert("Category updated successfully!")):(await Oe.post("/api/invoicecategory",e),alert("Category saved successfully!")),y(),t({categoryName:"",rangeStart:"",rangeEnd:""}),h(null),T(),window.location.reload()}catch(P){console.error(P),alert("Failed to save category.")}},D=A=>{t({categoryName:A.categoryName,rangeStart:A.rangeStart,rangeEnd:A.rangeEnd}),h(A._id),E()},E=()=>p(!0),T=()=>p(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Invoice Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:E,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add vendor Invoice Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:c.map(A=>a.jsxs("tr",{children:[a.jsx("td",{children:A.categoryName}),a.jsx("td",{children:A.rangeStart}),a.jsx("td",{children:A.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>D(A),children:"Edit"})})]},A._id))})]})})})}),m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[u?"Edit":"Create"," Invoice Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{T(),h(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:S,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(A=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:A==="categoryName"?"Category Name":A==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:A,value:e[A],onChange:w,className:"form-control "})]},A))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!k(),children:u?"Update Category":"Add Category"})]})})]})})})]})]})})},qB=()=>{const[e,t]=N.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState({}),[s,i]=N.useState([]),[o,l]=N.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=/^\d{0,6}$/;N.useEffect(()=>{d()},[]);const d=async()=>{try{const E=localStorage.getItem("selectedCompanyId"),T=localStorage.getItem("financialYear"),A=await Oe.get("/api/category",{params:{companyId:E,financialYear:T}});i(A.data)}catch(E){console.error("Failed to fetch categories",E)}},u=(E,T)=>{switch(E){case"categoryName":if(!T)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!T)return`${E} is required`;if(!c.test(T))return"Max 6 digits allowed";break}return""},h=E=>{const{name:T,value:A}=E.target;let L=A,P="";switch(T){case"categoryName":L=A,L.length>100&&(L=L.slice(0,100),P="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":L=A.replace(/[^0-9]/g,""),L.length>6&&(L=L.slice(0,6),P="Maximum 6 digits allowed");break}const O=u(T,L),Z=P||O;t(z=>({...z,[T]:L})),n(z=>({...z,[T]:Z}))},m=()=>!u("categoryName",e.categoryName)&&!u("rangeStart",e.rangeStart)&&!u("rangeEnd",e.rangeEnd),[p,v]=N.useState({});N.useEffect(()=>{const E=async()=>{const T={};for(const A of s)try{const L=await Oe.post("/api/material/generate-id",{categoryId:A._id});T[A._id]=L.data.nextNumber}catch(L){console.error("Error generating ID for category:",A._id,L)}v(T)};s.length&&E()},[s]);const g=async E=>{E.preventDefault();const T={};if(Object.keys(e).forEach(A=>{T[A]=u(A,e[A])}),n(T),!Object.values(T).some(A=>A))try{o?(await Oe.put(`/api/category/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/category",e),alert("Category saved successfully!")),d(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),k(),window.location.reload()}catch(A){console.error(A),alert("Failed to save category.")}},b=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id)},[y,C]=N.useState(!1),w=()=>C(!0),k=()=>C(!1),[S,D]=N.useState(!1);return a.jsx("div",{className:"",children:a.jsx("div",{children:a.jsx("div",{className:"content",children:a.jsxs("div",{children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Material Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{w()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Material Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.length>0&&s?.map(E=>a.jsxs("tr",{children:[a.jsx("td",{children:E.categoryName}),a.jsx("td",{children:E.rangeStart}),a.jsx("td",{children:E.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{b(E),w()},children:"Edit"})})]},E._id))})]})})})}),y&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Material Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{k(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:g,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:E,value:e[E],onChange:h,className:"form-control"})]},E))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!m(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})})})};function jMe(){const[e,t]=N.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState({});localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=()=>{let k={};const S=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?S.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?S.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be ≥ Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{(k.target.name==="rangeFrom"||k.target.name==="rangeTo")&&(k.target.value=k.target.value.replace(/[^0-9]/g,"")),t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/po-categories/${s}`,e),alert("PO Category updated!")):(await Oe.post("/api/po-categories",e),alert("PO Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving PO Category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=await Oe.get("/api/po-categories",{params:{companyId:k,financialYear:S}});n(D.data)},m=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};N.useEffect(()=>{h()},[]);const[v,g]=N.useState(!1),b=()=>g(!0),y=()=>g(!1),[C,w]=N.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"PO Categories"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("button",{type:"button",onClick:b,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add PO Category"]})})})]}),a.jsx("h2",{}),v&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," PO Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:u,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,placeholder:"Category Name",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.categoryName})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{d(k),k.target.value=k.target.value.replace(/[^0-9]/g,"")},maxLength:6,placeholder:"Range From (6 digits)",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.rangeFrom})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeTo",type:"text",value:e.rangeTo,onChange:d,maxLength:6,placeholder:"Range To (6 digits)",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.rangeTo})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"RangeFrom"}),a.jsx("th",{children:"RangeTo"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+1}),a.jsx("td",{children:k.categoryName}),a.jsx("td",{children:k.rangeFrom}),a.jsx("td",{children:k.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{m(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const NMe=()=>{const[e,t]=N.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState({}),[s,i]=N.useState([]),[o,l]=N.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const c=/^\d{0,6}$/;N.useEffect(()=>{d()},[]);const d=async()=>{try{const w=localStorage.getItem("selectedCompanyId"),k=localStorage.getItem("financialYear"),S=await Oe.get("/api/purchasecategory",{params:{companyId:w,financialYear:k}});i(S.data)}catch(w){console.error("Failed to fetch categories",w)}},u=(w,k)=>{switch(w){case"categoryName":if(!k)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!k)return`${w} is required`;if(!c.test(k))return"Max 6 digits allowed";break}return""},h=w=>{const{name:k,value:S}=w.target;let D=S,E="";switch(k){case"categoryName":D=S,D.length>100&&(D=D.slice(0,100),E="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":D=S.replace(/[^0-9]/g,""),D.length>6&&(D=D.slice(0,6),E="Maximum 6 digits allowed");break}const T=u(k,D),A=E||T;t(L=>({...L,[k]:D})),n(L=>({...L,[k]:A}))},m=()=>!u("categoryName",e.categoryName)&&!u("rangeStart",e.rangeStart)&&!u("rangeEnd",e.rangeEnd),p=async w=>{w.preventDefault();const k={};if(Object.keys(e).forEach(S=>{k[S]=u(S,e[S])}),n(k),!Object.values(k).some(S=>S))try{o?(await Oe.put(`/api/purchasecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/purchasecategory",e),alert("Category saved successfully!")),d(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),window.location.reload()}catch(S){console.error(S),alert("Failed to save category.")}},v=w=>{t({categoryName:w.categoryName,prefix:w.prefix,rangeStart:w.rangeStart,rangeEnd:w.rangeEnd}),l(w._id)},[g,b]=N.useState(!1),y=()=>b(!0),C=()=>b(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Purchase Indent Categories"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{y()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Purchase Request Category"]})})})]}),g&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Purchase Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{C(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:p,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(w=>a.jsxs("div",{className:" col-xl-3 mb-3",children:[a.jsx("label",{className:"form-label",children:w==="categoryName"?"Category Name":w==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:w,value:e[w],onChange:h,className:"form-control "})]},w))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!m(),children:o?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(w=>a.jsxs("tr",{children:[a.jsx("td",{children:w.categoryName}),a.jsx("td",{children:w.rangeStart}),a.jsx("td",{children:w.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{v(w),y()},children:"Edit"})})]},w._id))})]})})})]})})};function wMe(){const[e,t]=N.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState([]),[s,i]=N.useState(null),o=localStorage.getItem("selectedCompanyId"),l=localStorage.getItem("financialYear"),c=w=>{const{name:k,value:S}=w.target;t(D=>({...D,[k]:S}))},d=async w=>{w.preventDefault();try{s?await Oe.put(`/api/rfq-categories/${s}`,e):await Oe.post("/api/rfq-categories",e),t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),u(),C(),window.location.reload()}catch(k){console.error("Error submitting category:",k)}},u=async()=>{try{const w=await Oe.get("/api/rfq-categories",{params:{companyId:o,financialYear:l}});n(w.data)}catch(w){console.error("Error fetching categories:",w)}},h=w=>{t({categoryName:w.categoryName,rangeFrom:w.rangeFrom,rangeTo:w.rangeTo}),i(w._id)};N.useEffect(()=>{u()},[]);const[m,p]=N.useState(!1),v=()=>p(!0),g=()=>p(!1),[b,y]=N.useState(!1),C=()=>y(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"RFQ Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{v()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"isax isax-add-circle5 me-1"}),"RFQ Category"]})})})]}),a.jsx("h2",{}),m&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:["  ",s?"Edit RFQ Category":"Add RFQ Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),g(),t({categoryName:"",prefix:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:d,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{htmlFor:"categoryName",children:"Category Name"}),a.jsx("input",{name:"categoryName",placeholder:"Category Name",value:e.categoryName,onChange:c,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{htmlFor:"rangeFrom",children:"Range From"}),a.jsx("input",{name:"rangeFrom",placeholder:"Range From",value:e.rangeFrom,onChange:w=>{w.target.value=w.target.value.replace(/[^0-9]/g,""),c(w)},required:!0,type:"text",maxLength:6,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{htmlFor:"rangeTo",children:"Range To"}),a.jsx("input",{name:"rangeTo",placeholder:"Range To",value:e.rangeTo,onChange:w=>{w.target.value=w.target.value.replace(/[^0-9]/g,""),c(w)},required:!0,type:"text",maxLength:6,className:"form-control"})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((w,k)=>a.jsxs("tr",{children:[a.jsx("td",{children:k+1}),a.jsx("td",{children:w.categoryName}),a.jsx("td",{children:w.rangeFrom}),a.jsx("td",{children:w.rangeTo}),a.jsx("td",{children:a.jsx("button",{onClick:()=>{h(w),v()},className:"btn btn-sm btn-primary",children:"Edit"})})]},w._id))})]})})})})]})}function zB(){const[e,t]=N.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState({}),c=localStorage.getItem("selectedCompanyId");localStorage.getItem("financialYear");const d=()=>{let S={};const D=/^\d{6}$/;return S.categoryName=e.categoryName?"":"Required",S.rangeFrom=e.rangeFrom?D.test(e.rangeFrom)?"":"Must be 6 digits":"Required",S.rangeTo=e.rangeTo?D.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be ≥ Range From":"Must be 6 digits":"Required",l(S),Object.values(S).every(E=>E==="")},u=S=>{t({...e,[S.target.name]:S.target.value})},h=async S=>{if(S.preventDefault(),!!d())try{s?(await Oe.put(`/api/sale-contract-categories/${s}`,e),alert("Contract category updated successfully!")):(await Oe.post("/api/sale-contract-categories",e),alert("Contract category added successfully!")),m(),v(),C(),window.location.reload()}catch{alert("Error saving contract category. Please try again.")}},m=async()=>{try{const S=await Oe.get("/api/sale-contract-categories",{params:{companyId:c}});n(S.data)}catch(S){console.error("Error fetching contract categories:",S)}},p=S=>{t(S),i(S._id),l({})},v=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};N.useEffect(()=>{m()},[]);const[g,b]=N.useState(!1),y=()=>b(!0),C=()=>b(!1),[w,k]=N.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-2",children:[a.jsx("div",{className:"my-auto mb-2",children:a.jsx("h2",{className:"mb-1",children:"Sales Contract Categories"})}),a.jsx("div",{children:a.jsxs("a",{onClick:()=>{y()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"fas fa-plus me-1"}),"New Contract Category"]})})]}),g&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"contractCategoryModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h4",{className:"modal-title",id:"contractCategoryModalLabel",children:[a.jsx("i",{className:"fas fa-file-contract me-2"}),s?"Edit":"Create"," Contract Category"]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>{C(),v()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:h,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Category Name ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:u,className:"form-control",placeholder:"Enter category name (e.g., Standard Contracts)"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range From ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:S=>{S.target.value=S.target.value.replace(/\D/g,""),u(S)},className:"form-control",maxLength:6,placeholder:"Enter start range (6 digits)",min:"100000",max:"999999"})]}),a.jsxs("div",{className:"col-xl-3 mb-3",children:[a.jsxs("label",{className:"form-label",children:["Range To ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{name:"rangeTo",type:"text",className:"form-control ",value:e.rangeTo,onChange:S=>{S.target.value=S.target.value.replace(/\D/g,""),u(S)},placeholder:"Enter end range (6 digits)",min:"100000",maxLength:6,max:"999999"})]})]}),a.jsx("div",{className:"d-flex gap-2 justify-content-start",children:a.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",children:s?"Update Category":"Add Category"})})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:D+1}),a.jsx("td",{children:a.jsx("div",{className:"d-flex align-items-center",children:a.jsx("span",{className:"fw-medium",children:S.categoryName})})}),a.jsx("td",{children:S.rangeFrom?.toLocaleString()}),a.jsx("td",{children:S.rangeTo?.toLocaleString()}),a.jsx("td",{children:a.jsx("div",{className:"d-flex gap-1",children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{p(S),y()},title:"Edit Category",children:"Edit"})})})]},S._id))})]})})})})]})}function SMe(){const[e,t]=N.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState({}),c=()=>{let k={};const S=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?S.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?S.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be ≥ Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/sale-quotation-categories/${s}`,e),alert("Category updated!")):(await Oe.post("/api/sale-quotation-categories",e),alert("Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=await Oe.get("/api/sale-quotation-categories",{params:{companyId:k,financialYear:S}});n(D.data)},m=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};N.useEffect(()=>{h()},[]);const[v,g]=N.useState(!1),b=()=>g(!0),y=()=>g(!1),[C,w]=N.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Sales Quotation Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{b()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"New Quotation Category"]})})})]}),v&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," Quotation Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:u,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,className:"form-control",placeholder:"Category Name"}),a.jsx("div",{style:{color:"red"},children:o.categoryName})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,className:"form-control",placeholder:"Range From (6 digits)"}),a.jsx("div",{style:{color:"red"},children:o.rangeFrom})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("input",{name:"rangeTo",type:"text",className:"form-control",value:e.rangeTo,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range To (6 digits)"}),a.jsx("div",{style:{color:"red"},children:o.rangeTo})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"RangeFrom"}),a.jsx("th",{children:"RangeTo"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+1}),a.jsx("td",{children:k.categoryName}),a.jsx("td",{children:k.rangeFrom}),a.jsx("td",{children:k.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{m(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const CMe=()=>{const[e,t]=N.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState({}),[s,i]=N.useState([]),[o,l]=N.useState(null),c=/^[A-Za-z ]{0,100}$/,d=/^\d{0,6}$/;N.useEffect(()=>{u()},[]);const u=async()=>{try{const D=localStorage.getItem("selectedCompanyId"),E=localStorage.getItem("financialYear"),T=await Oe.get("/api/salecategory",{params:{companyId:D,financialYear:E}});i(T.data)}catch(D){console.error("Failed to fetch categories",D)}},h=(D,E)=>{switch(D){case"categoryName":if(!E)return"Category name is required";if(!c.test(E))return"Only alphabets (max 100 characters)";break;case"rangeStart":case"rangeEnd":if(!E)return`${D} is required`;if(!d.test(E))return"Max 6 digits allowed";break}return""},m=D=>{const{name:E,value:T}=D.target;let A=T,L="";switch(E){case"categoryName":A=T,A.length>100&&(A=A.slice(0,100),L="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":A=T.replace(/[^0-9]/g,""),A.length>6&&(A=A.slice(0,6),L="Maximum 6 digits allowed");break}const P=h(E,A),O=L||P;t(Z=>({...Z,[E]:A})),n(Z=>({...Z,[E]:O}))},p=()=>!h("categoryName",e.categoryName)&&!h("rangeStart",e.rangeStart)&&!h("rangeEnd",e.rangeEnd),v=async D=>{D.preventDefault();const E={};if(Object.keys(e).forEach(T=>{E[T]=h(T,e[T])}),n(E),!Object.values(E).some(T=>T))try{o?(await Oe.put(`/api/salecategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/salecategory",e),alert("Category saved successfully!")),u(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),window.location.reload()}catch(T){console.error(T),alert("Failed to save category.")}},g=D=>{t({categoryName:D.categoryName,rangeStart:D.rangeStart,rangeEnd:D.rangeEnd}),l(D._id)},[b,y]=N.useState(!1),C=()=>y(!0),w=()=>y(!1),[k,S]=N.useState(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Sales Indent Categories"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{C()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Sales Enquiry Category"]})})})]}),b&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",o?"Edit":"Create"," Sales Indent Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{w(),l(null),t({categoryName:"",prefix:"",rangeStart:"",rangeEnd:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:v,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(D=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:D==="categoryName"?"Category Name":D==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:D,value:e[D],onChange:m,className:"form-control "})]},D))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!p(),children:o?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(D=>a.jsxs("tr",{children:[a.jsx("td",{children:D.categoryName}),a.jsx("td",{children:D.rangeStart}),a.jsx("td",{children:D.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{g(D),C()},children:"Edit"})})]},D._id))})]})})})]})})};function kMe(){const[e,t]=N.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState({}),c=()=>{let k={};const S=/^\d{6}$/;return k.categoryName=e.categoryName?"":"Required",k.rangeFrom=e.rangeFrom?S.test(e.rangeFrom)?"":"Must be 6 digits":"Required",k.rangeTo=e.rangeTo?S.test(e.rangeTo)?+e.rangeTo>=+e.rangeFrom?"":"Must be ≥ Range From":"Must be 6 digits":"Required",l(k),Object.values(k).every(D=>D==="")},d=k=>{t({...e,[k.target.name]:k.target.value})},u=async k=>{if(k.preventDefault(),!!c())try{s?(await Oe.put(`/api/sales-order-categories/${s}`,e),alert("Sales Order Category updated!")):(await Oe.post("/api/sales-order-categories",e),alert("Sales Order Category added!")),h(),p(),window.location.reload()}catch{alert("Error saving category")}},h=async()=>{const k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear"),D=await Oe.get("/api/sales-order-categories",{params:{companyId:k,financialYear:S}});n(D.data)},m=k=>{t(k),i(k._id),l({})},p=()=>{t({categoryName:"",rangeFrom:"",rangeTo:""}),i(null),l({})};N.useEffect(()=>{h()},[]);const[v,g]=N.useState(!1),b=()=>g(!0),y=()=>g(!1),[C,w]=N.useState(!1);return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Sales Order Category  "})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{b()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Sales Order Category"]})})})]}),v&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:[" ",s?"Edit":"Create"," Sales Order Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{y(),p()},"aria-label":"Close"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("h2",{}),a.jsxs("form",{onSubmit:u,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3",children:[a.jsx("input",{name:"categoryName",value:e.categoryName,onChange:d,placeholder:"Category Name",className:"form-control"}),a.jsx("div",{style:{color:"red"},children:o.categoryName})]}),a.jsx("div",{className:"col-xl-3",children:a.jsx("input",{name:"rangeFrom",type:"text",value:e.rangeFrom,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range From (6 digits)",className:"form-control"})}),a.jsx("div",{className:"col-xl-3",children:a.jsx("input",{name:"rangeTo",type:"text",className:"form-control",value:e.rangeTo,onChange:k=>{k.target.value=k.target.value.replace(/[^0-9]/g,""),d(k)},maxLength:6,placeholder:"Range To (6 digits)"})})]}),a.jsx("button",{className:"btn btn-sm btn-primary mt-2 mb-2",type:"submit",children:s?"Update Category":"Add Category"})]})]})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"RangeFrom"}),a.jsx("th",{children:"RangeTo"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:S+1}),a.jsx("td",{children:k.categoryName}),a.jsx("td",{children:k.rangeFrom}),a.jsx("td",{children:k.rangeTo}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>{m(k),b()},children:"Edit"})})]},k._id))})]})})})})]})}const _Me=()=>{const[e,t]=N.useState({categoryName:"",rangeStart:"",rangeEnd:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState({}),[s,i]=N.useState([]),[o,l]=N.useState(null),[c,d]=N.useState(!1),[u,h]=N.useState(!1),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear"),v=/^\d{0,6}$/;N.useEffect(()=>{g()},[]);const g=async()=>{try{const E=await Oe.get("/api/goodsTransferCategory",{params:{companyId:m,financialYear:p}});i(E.data)}catch(E){console.error("Failed to fetch categories",E)}},b=(E,T)=>{switch(E){case"categoryName":if(!T)return"Category name is required";break;case"rangeStart":case"rangeEnd":if(!T)return`${E} is required`;if(!v.test(T))return"Max 6 digits allowed";break}return""},y=E=>{const{name:T,value:A}=E.target;let L=A,P="";switch(T){case"categoryName":L=A,L.length>100&&(L=L.slice(0,100),P="Maximum 100 characters allowed");break;case"rangeStart":case"rangeEnd":L=A.replace(/[^0-9]/g,""),L.length>6&&(L=L.slice(0,6),P="Maximum 6 digits allowed");break}const O=b(T,L),Z=P||O;t(z=>({...z,[T]:L})),n(z=>({...z,[T]:Z}))},C=()=>!b("categoryName",e.categoryName)&&!b("rangeStart",e.rangeStart)&&!b("rangeEnd",e.rangeEnd),w=async E=>{E.preventDefault();const T={};if(Object.keys(e).forEach(A=>{T[A]=b(A,e[A])}),n(T),!Object.values(T).some(A=>A))try{o?(await Oe.put(`/api/goodsTransferCategory/${o}`,e),alert("Category updated successfully!")):(await Oe.post("/api/goodsTransferCategory",e),alert("Category saved successfully!")),g(),t({categoryName:"",rangeStart:"",rangeEnd:""}),l(null),D(),window.location.reload()}catch(A){console.error(A),alert("Failed to save category.")}},k=E=>{t({categoryName:E.categoryName,rangeStart:E.rangeStart,rangeEnd:E.rangeEnd}),l(E._id),S()},S=()=>d(!0),D=()=>d(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Goods Transfer Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:S,className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Goods Transfer Category"]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Start"}),a.jsx("th",{children:"End"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:s.map(E=>a.jsxs("tr",{children:[a.jsx("td",{children:E.categoryName}),a.jsx("td",{children:E.rangeStart}),a.jsx("td",{children:E.rangeEnd}),a.jsx("td",{children:a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>k(E),children:"Edit"})})]},E._id))})]})})})}),c&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",children:[o?"Edit":"Create"," Goods Transfer Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{D(),l(null),t({categoryName:"",rangeStart:"",rangeEnd:""})}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:w,children:[a.jsx("div",{className:"row",children:["categoryName","rangeStart","rangeEnd"].map(E=>a.jsxs("div",{className:"mb-3 col-xl-3",children:[a.jsx("label",{className:"form-label",children:E==="categoryName"?"Category Name":E==="rangeStart"?"Range Start":"Range End"}),a.jsx("input",{type:"text",name:E,value:e[E],onChange:y,className:"form-control"}),r[E]&&a.jsx("div",{className:"invalid-feedback",children:r[E]})]},E))}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",disabled:!C(),children:o?"Update Category":"Add Category"})]})})]})})})]})]})})};function EMe(){const[e,t]=N.useState({categoryName:"",rangeFrom:"",rangeTo:"",companyId:localStorage.getItem("selectedCompanyId"),financialYear:localStorage.getItem("financialYear")}),[r,n]=N.useState([]),[s,i]=N.useState(null);localStorage.getItem("selectedCompanyId"),localStorage.getItem("financialYear");const o=b=>{const{name:y,value:C}=b.target;if(y==="rangeFrom"||y==="rangeTo"){const w=C.replace(/\D/g,"");if(w.length<=6){const k=parseInt(w);w.length===6&&k>=1e5&&k<=999999?t(S=>({...S,[y]:w})):w.length<6&&t(S=>({...S,[y]:w}))}}else t(w=>({...w,[y]:C}))},l=async b=>{b.preventDefault();try{if(s){const y=await Oe.put(`/api/vendor-categories/${s}`,e);alert("Vendor Category Updated!"),n(C=>C.map(w=>w._id===s?y.data:w)),i(null)}else{const y=await Oe.post("/api/vendor-categories",e);alert("Vendor Category Added!"),n([...r,y.data])}t({categoryName:"",rangeFrom:"",rangeTo:""}),window.location.reload()}catch(y){console.error(y),alert("Error adding/updating category")}},c=async()=>{try{const b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear"),C=await Oe.get("/api/vendor-categories",{params:{companyId:b,financialYear:y}});n(C.data)}catch(b){console.error(b)}};N.useEffect(()=>{c()},[]);const d=b=>{t({categoryName:b.categoryName,rangeFrom:b.rangeFrom,rangeTo:b.rangeTo}),i(b._id)},[u,h]=N.useState(!1),m=()=>h(!0),p=()=>h(!1),[v,g]=N.useState(!1);return a.jsx("div",{className:"",children:a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-flex d-block align-items-center justify-content-between flex-wrap gap-3 mb-2",children:[a.jsx("div",{children:a.jsx("h6",{children:"Vendor Category"})}),a.jsx("div",{className:"d-flex my-xl-auto right-content align-items-center flex-wrap gap-2",children:a.jsx("div",{children:a.jsxs("a",{onClick:()=>{m()},className:"btn btn-primary d-flex align-items-center",children:[a.jsx("i",{className:"ti ti-plus me-1"}),"Add Vendor Category"]})})})]}),a.jsxs("div",{children:[u&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal-backdrop fade show"}),a.jsx("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1","aria-labelledby":"myLargeModalLabel","aria-modal":"true",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h4",{className:"modal-title",id:"myLargeModalLabel",children:["  ",s?"Edit Vendor Category":"Add Vendor Category"]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(null),p(),t({categoryName:"",prefix:"",rangeFrom:"",rangeTo:""})},"aria-label":"Close"})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:l,children:[a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Category Name"}),a.jsx("input",{type:"text",name:"categoryName",placeholder:"e.g., Hardware",value:e.categoryName,onChange:o,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Range From"}),a.jsx("input",{type:"text",name:"rangeFrom",placeholder:"e.g., 100000",value:e.rangeFrom,onChange:o,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-xl-3 mb-2",children:[a.jsx("label",{children:"Range To"}),a.jsx("input",{type:"text",name:"rangeTo",placeholder:"e.g., 999999",value:e.rangeTo,onChange:o,required:!0,className:"form-control"})]})]}),a.jsx("button",{type:"submit",className:"btn btn-sm btn-primary",children:s?"Update Category":"Add Category"})]})})]})})})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Category Name"}),a.jsx("th",{children:"Range From"}),a.jsx("th",{children:"Range To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map(b=>a.jsxs("tr",{children:[a.jsx("td",{children:b.categoryName}),a.jsx("td",{children:b.rangeFrom}),a.jsx("td",{children:b.rangeTo}),a.jsx("td",{children:a.jsx("button",{onClick:()=>{d(b),m()},className:"btn btn-sm btn-primary",children:"Edit"})})]},b._id))})]})})})})]})]})})}function DMe(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState(""),[c,d]=N.useState({category:"",location:"",docnumber:"",dateFrom:"",dateTo:""}),[u,h]=N.useState(!1),[m,p]=N.useState(null),[v,g]=N.useState([]),[b,y]=N.useState([]),C=localStorage.getItem("selectedCompanyId"),w=localStorage.getItem("financialYear");N.useEffect(()=>{k(),S()},[]),N.useEffect(()=>{D()},[e,c]);const k=async()=>{try{i(!0);const z=await Oe.get("/api/goodsTransfer",{params:{companyId:C,financialYear:w}});t(z.data),l("")}catch(z){l("Failed to fetch goods transfers"),console.error("Error fetching transfers:",z)}finally{i(!1)}},S=async()=>{try{const z=await Oe.get("/api/goodsTransferCategory",{params:{companyId:C}});g(z.data);const K=await Oe.get("/api/locations",{params:{companyId:C,financialYear:w}});y(K.data)}catch(z){console.error("Error fetching dropdown data:",z)}},D=()=>{let z=[...e];c.category&&(z=z.filter(K=>K.category.toLowerCase().includes(c.category.toLowerCase()))),c.location&&(z=z.filter(K=>K.location.toLowerCase().includes(c.location.toLowerCase()))),c.docnumber&&(z=z.filter(K=>K.docnumber.toLowerCase().includes(c.docnumber.toLowerCase()))),c.dateFrom&&(z=z.filter(K=>new Date(K.docDate)>=new Date(c.dateFrom))),c.dateTo&&(z=z.filter(K=>new Date(K.docDate)<=new Date(c.dateTo))),n(z)},E=(z,K)=>{d(B=>({...B,[z]:K}))},T=()=>{d({category:"",location:"",docnumber:"",dateFrom:"",dateTo:""})},A=z=>{p(z),h(!0)},L=z=>{const K=window.open("","_blank","width=800,height=600"),B=P(z);K.document.write(B),K.document.close(),K.onload=()=>{K.print()}},P=z=>{const K=new Date().toLocaleString(),B=Z(z.items);return`
      <!DOCTYPE html>
      <html>
        <head>
          <title>Goods Transfer - ${z.docnumber}</title>
          <style>
            body {
              font-family: Arial, sans-serif;
              margin: 20px;
              color: #333;
            }
            .header {
              text-align: center;
              border-bottom: 2px solid #333;
              padding-bottom: 20px;
              margin-bottom: 20px;
            }
            .company-name {
              font-size: 24px;
              font-weight: bold;
              margin-bottom: 5px;
            }
            .document-title {
              font-size: 20px;
              font-weight: bold;
              color: #666;
            }
            .info-section {
              display: flex;
              justify-content: space-between;
              margin-bottom: 20px;
            }
            .info-box {
              width: 48%;
            }
            .info-box h4 {
              background-color: #f8f9fa;
              padding: 8px;
              margin: 0 0 10px 0;
              border-left: 4px solid #007bff;
            }
            .info-table {
              width: 100%;
              border-collapse: collapse;
            }
            .info-table td {
              padding: 5px;
              border-bottom: 1px solid #eee;
            }
            .info-table td:first-child {
              font-weight: bold;
              width: 40%;
            }
            .items-table {
              width: 100%;
              border-collapse: collapse;
              margin-top: 20px;
            }
            .items-table th,
            .items-table td {
              border: 1px solid #333;
              padding: 8px;
              text-align: left;
            }
            .items-table th {
              background-color: #f8f9fa;
              font-weight: bold;
            }
            .items-table tr:nth-child(even) {
              background-color: #f9f9f9;
            }
            .total-row {
              background-color: #e9ecef !important;
              font-weight: bold;
            }
            .footer {
              margin-top: 30px;
              border-top: 1px solid #333;
              padding-top: 20px;
            }
            .signature-section {
              display: flex;
              justify-content: space-between;
              margin-top: 40px;
            }
            .signature-box {
              width: 200px;
              text-align: center;
            }
            .signature-line {
              border-top: 1px solid #333;
              margin-top: 50px;
              padding-top: 5px;
            }
            @media print {
              body { margin: 0; }
              .no-print { display: none; }
            }
          </style>
        </head>
        <body>
          <div class="header">
            <div class="company-name">Your Company Name</div>
            <div class="document-title">GOODS TRANSFER DOCUMENT</div>
          </div>

          <div class="info-section">
            <div class="info-box">
              <h4>Document Information</h4>
              <table class="info-table">
                <tr>
                  <td>Document No:</td>
                  <td><strong>${z.docnumber}</strong></td>
                </tr>
                <tr>
                  <td>Category:</td>
                  <td>${z.category}</td>
                </tr>
                <tr>
                  <td>Description:</td>
                  <td>${z.catdesc||"N/A"}</td>
                </tr>
                <tr>
                  <td>Location:</td>
                  <td>${z.location}</td>
                </tr>
              </table>
            </div>
            
            <div class="info-box">
              <h4>Dates & Reference</h4>
              <table class="info-table">
                <tr>
                  <td>Document Date:</td>
                  <td>${O(z.docDate)}</td>
                </tr>
                <tr>
                  <td>Posting Date:</td>
                  <td>${O(z.postDate)}</td>
                </tr>
                <tr>
                  <td>Reference:</td>
                  <td>${z.reference||"N/A"}</td>
                </tr>
                <tr>
                  <td>Print Date:</td>
                  <td>${K}</td>
                </tr>
              </table>
            </div>
          </div>

          <h4>Items Details</h4>
          <table class="items-table">
            <thead>
              <tr>
                <th style="width: 5%">#</th>
                <th style="width: 15%">Material ID</th>
                <th style="width: 25%">Description</th>
                <th style="width: 8%">Qty</th>
                <th style="width: 8%">UOM</th>
                <th style="width: 10%">Price</th>
                <th style="width: 10%">Total</th>
                <th style="width: 10%">Del Date</th>
                <th style="width: 9%">Lot No</th>
              </tr>
            </thead>
            <tbody>
              ${z.items?z.items.map((Q,U)=>`
                <tr>
                  <td>${U+1}</td>
                  <td>${Q.materialId||"N/A"}</td>
                  <td>${Q.description||"N/A"}</td>
                  <td>${Q.quantity||"0"}</td>
                  <td>${Q.baseUnit||"N/A"}</td>
                  <td>₹${Q.price||"0.00"}</td>
                  <td>₹${(parseFloat(Q.quantity||0)*parseFloat(Q.price||0)).toFixed(2)}</td>
                  <td>${O(Q.deliveryDate)}</td>
                  <td>${Q.lotNo||"N/A"}</td>
                </tr>
              `).join(""):'<tr><td colspan="9" style="text-align: center;">No items found</td></tr>'}
              <tr class="total-row">
                <td colspan="6" style="text-align: right;"><strong>GRAND TOTAL:</strong></td>
                <td><strong>₹${B}</strong></td>
                <td colspan="2"></td>
              </tr>
            </tbody>
          </table>

          <div class="footer">
            <div class="signature-section">
              <div class="signature-box">
                <div class="signature-line">Prepared By</div>
              </div>
              <div class="signature-box">
                <div class="signature-line">Checked By</div>
              </div>
              <div class="signature-box">
                <div class="signature-line">Approved By</div>
              </div>
            </div>
            
            <div style="margin-top: 30px; text-align: center; font-size: 12px; color: #666;">
              <p>This is a computer generated document. No signature required.</p>
              <p>Generated on: ${K} | User: ${localStorage.getItem("userLogin")||"System"}</p>
            </div>
          </div>
        </body>
      </html>
    `},O=z=>z?new Date(z).toLocaleDateString("en-IN"):"N/A",Z=z=>!z||z.length===0?0:z.reduce((K,B)=>K+parseFloat(B.quantity||0)*parseFloat(B.price||0),0).toFixed(2);return s?a.jsx("div",{className:"container p-3",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2",children:"Loading goods transfers..."})]})}):a.jsxs("div",{className:"container-fluid p-3",children:[a.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:a.jsxs("h4",{children:[a.jsx("i",{className:"fas fa-truck me-2"}),"Goods Transfer List"]})}),o&&a.jsxs("div",{className:"alert alert-danger",role:"alert",children:[a.jsx("i",{className:"fas fa-exclamation-triangle me-2"}),o]}),a.jsx("div",{className:"card mb-3",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row g-3",children:[a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"Category"})}),a.jsx("div",{className:"col-7",children:a.jsxs("select",{className:"form-select form-select-sm",value:c.category,onChange:z=>E("category",z.target.value),children:[a.jsx("option",{value:"",children:"All Categories"}),v.map((z,K)=>a.jsx("option",{value:z.categoryName,children:z.categoryName},K))]})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"Location"})}),a.jsx("div",{className:"col-7",children:a.jsxs("select",{className:"form-select form-select-sm",value:c.location,onChange:z=>E("location",z.target.value),children:[a.jsx("option",{value:"",children:"All Locations"}),b.map((z,K)=>a.jsx("option",{value:z.name||z.locationName,children:z.name||z.locationName},K))]})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"Doc No"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search...",value:c.docnumber,onChange:z=>E("docnumber",z.target.value)})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"From"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:c.dateFrom,onChange:z=>E("dateFrom",z.target.value)})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:"To"})}),a.jsx("div",{className:"col-7",children:a.jsx("input",{type:"date",className:"form-control form-control-sm",value:c.dateTo,onChange:z=>E("dateTo",z.target.value)})})]})}),a.jsx("div",{className:"col-md-2",children:a.jsxs("div",{className:"row g-1 align-items-center",children:[a.jsx("div",{className:"col-5",children:a.jsx("label",{className:"form-label mb-0",children:" "})}),a.jsx("div",{className:"col-7",children:a.jsxs("button",{className:"btn btn-outline-secondary btn-sm w-100",onClick:T,children:[a.jsx("i",{className:"fas fa-times me-1"}),"Clear"]})})]})})]})})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:r.length===0?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("i",{className:"fas fa-inbox fa-3x text-muted mb-3"}),a.jsx("h5",{children:"No goods transfers found"}),a.jsx("p",{className:"text-muted",children:"Try adjusting your filters or create a new goods transfer."})]}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Document No"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Location"}),a.jsx("th",{children:"Document Date"}),a.jsx("th",{children:"Posting Date"}),a.jsx("th",{children:"Reference"}),a.jsx("th",{children:"Items Count"}),a.jsx("th",{children:"Total Value"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:r.map((z,K)=>a.jsxs("tr",{children:[a.jsx("td",{children:K+1}),a.jsx("td",{children:z.docnumber}),a.jsx("td",{children:z.category}),a.jsx("td",{children:z.location}),a.jsx("td",{children:O(z.docDate)}),a.jsx("td",{children:O(z.postDate)}),a.jsx("td",{children:z.reference}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:z.items?z.items.length:0})}),a.jsx("td",{children:a.jsxs("strong",{children:["₹",Z(z.items)]})}),a.jsx("td",{children:a.jsxs("div",{className:"btn-group",role:"group",children:[a.jsx("button",{className:"btn btn-sm btn-primary",onClick:()=>A(z),title:"View Details",children:a.jsx("i",{className:"fas fa-eye"})}),a.jsx("button",{className:"btn btn-sm btn-success",onClick:()=>L(z),title:"Print Document",children:a.jsx("i",{className:"fas fa-print"})})]})})]},z._id||K))})]})})})}),u&&m&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsxs("h5",{className:"modal-title",children:[a.jsx("i",{className:"fas fa-file-alt me-2"}),"Goods Transfer Details - ",m.docnumber]}),a.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>h(!1)})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h6",{className:"mb-0",children:"Document Information"})}),a.jsx("div",{className:"card-body",children:a.jsx("table",{className:"table table-sm",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("th",{width:"40%",children:"Document No:"}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:m.docnumber})})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Category:"}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:m.category})})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Description:"}),a.jsx("td",{children:m.catdesc})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Location:"}),a.jsx("td",{children:m.location})]})]})})})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h6",{className:"mb-0",children:"Dates & Reference"})}),a.jsx("div",{className:"card-body",children:a.jsx("table",{className:"table table-sm",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("th",{width:"40%",children:"Document Date:"}),a.jsx("td",{children:O(m.docDate)})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Posting Date:"}),a.jsx("td",{children:O(m.postDate)})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Reference:"}),a.jsx("td",{children:m.reference})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Created Date:"}),a.jsx("td",{children:O(m.date)})]})]})})})]})})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h6",{className:"mb-0",children:"Items Details"}),a.jsxs("button",{className:"btn btn-sm btn-outline-success",onClick:()=>L(m),children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print"]})]}),a.jsx("div",{className:"card-body",children:m.items&&m.items.length>0?a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-sm table-striped",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Material ID"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Quantity"}),a.jsx("th",{children:"UOM"}),a.jsx("th",{children:"Price"}),a.jsx("th",{children:"Total"}),a.jsx("th",{children:"Delivery Date"}),a.jsx("th",{children:"Lot No"}),a.jsx("th",{children:"Text"})]})}),a.jsx("tbody",{children:m.items.map((z,K)=>a.jsxs("tr",{children:[a.jsx("td",{children:K+1}),a.jsx("td",{children:a.jsx("code",{children:z.materialId})}),a.jsx("td",{children:z.description}),a.jsx("td",{children:z.quantity}),a.jsx("td",{children:z.baseUnit}),a.jsxs("td",{children:["₹",z.price]}),a.jsx("td",{children:a.jsxs("strong",{children:["₹",(parseFloat(z.quantity||0)*parseFloat(z.price||0)).toFixed(2)]})}),a.jsx("td",{children:O(z.deliveryDate)}),a.jsx("td",{children:z.lotNo}),a.jsx("td",{children:z.text})]},K))}),a.jsx("tfoot",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{colSpan:"6",className:"text-end",children:"Grand Total:"}),a.jsxs("th",{children:["₹",Z(m.items)]}),a.jsx("th",{colSpan:"3"})]})})]})}):a.jsxs("div",{className:"text-center py-3",children:[a.jsx("i",{className:"fas fa-box-open fa-2x text-muted mb-2"}),a.jsx("p",{className:"text-muted",children:"No items found for this transfer"})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsxs("button",{type:"button",className:"btn btn-success",onClick:()=>L(m),children:[a.jsx("i",{className:"fas fa-print me-1"}),"Print Document"]}),a.jsxs("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:[a.jsx("i",{className:"fas fa-times me-1"}),"Close"]})]})]})})})]})}const AMe=()=>{const[e,t]=N.useState({contacts:[],loading:!1,totalCount:0,currentPage:1,pageSize:10,searchTerm:"",sortBy:"name",sortOrder:"asc"}),[r,n]=N.useState(!1),[s,i]=N.useState(!1),[o,l]=N.useState(!1),[c,d]=N.useState([]),[u,h]=N.useState(null),[m,p]=N.useState(null),[v,g]=N.useState(null),[b,y]=N.useState(null),[C,w]=N.useState(!1),k="/api",S=512*1024,D=async(re,ae={})=>{try{const ne=await fetch(`${k}${re}`,{headers:{"Content-Type":"application/json",...ae.headers},...ae});if(!ne.ok)throw new Error(`API call failed: ${ne.statusText}`);return await ne.json()}catch(ne){throw console.error("API Error:",ne),ne}},E=async re=>{const ae=new FormData;ae.append("avatar",re);try{const ne=await fetch(`${k}/contacts/upload/avatar`,{method:"POST",body:ae});if(!ne.ok)throw new Error("Upload failed");return await ne.json()}catch(ne){throw console.error("Upload Error:",ne),ne}};N.useEffect(()=>{T()},[e.currentPage,e.pageSize,e.searchTerm,e.sortBy,e.sortOrder]);const T=async()=>{t(re=>({...re,loading:!0}));try{const re={page:e.currentPage,limit:e.pageSize,search:e.searchTerm,sortBy:e.sortBy,sortOrder:e.sortOrder},ae=new URLSearchParams(re).toString(),ne=await D(`/contacts?${ae}`);t(ie=>({...ie,contacts:ne.data.contacts,totalCount:ne.data.totalCount,loading:!1}))}catch(re){console.error("Error fetching contacts:",re),t(ae=>({...ae,loading:!1}))}},A=re=>{const ae=re.target.files[0];if(!ae)return;if(ae.size>S){alert("Image size must be less than 512KB"),re.target.value="";return}if(!ae.type.startsWith("image/")){alert("Please select a valid image file"),re.target.value="";return}g(ae);const ne=new FileReader;ne.onload=ie=>{y(ie.target.result)},ne.readAsDataURL(ae)},L=()=>{g(null),y(null);const re=document.querySelector('input[type="file"]');re&&(re.value="")},P=re=>{t(ae=>({...ae,searchTerm:re,currentPage:1}))},O=re=>{t(ae=>({...ae,sortBy:re,sortOrder:ae.sortBy===re&&ae.sortOrder==="asc"?"desc":"asc"}))},Z=re=>{h(re),y(re.avatar),i(!0)},z=re=>{p(re),l(!0)},K=async()=>{try{await D("/contacts",{method:"DELETE",body:JSON.stringify({ids:[m]})}),T(),l(!1),p(null)}catch(re){console.error("Error deleting contact:",re)}},B=async re=>{try{w(!0);let ae=null;v&&(ae=(await E(v)).data.url);const ne={...re,avatar:ae};await D("/contacts",{method:"POST",body:JSON.stringify(ne)}),T(),n(!1),L()}catch(ae){console.error("Error creating contact:",ae)}finally{w(!1)}},Q=async re=>{try{w(!0);let ae=u.avatar;v&&(ae=(await E(v)).data.url);const ne={...re,avatar:ae};await D(`/contacts/${u._id}`,{method:"PUT",body:JSON.stringify(ne)}),T(),i(!1),h(null),L()}catch(ae){console.error("Error updating contact:",ae)}finally{w(!1)}},U=re=>a.jsxs("span",{className:"rating",children:[[1,2,3,4,5].map(ae=>a.jsx("i",{className:`ti ti-star-filled ${ae<=re?"text-warning":""}`},ae)),a.jsxs("span",{className:"ms-1",children:[re,".0"]})]}),J=re=>a.jsx("div",{className:"d-flex gap-1 flex-wrap",children:re.map((ae,ne)=>a.jsx("span",{className:"badge badge-soft-primary",children:ae},ne))}),Y=re=>e.sortBy!==re?a.jsx("i",{className:"ti ti-selector"}):e.sortOrder==="asc"?a.jsx("i",{className:"ti ti-chevron-up"}):a.jsx("i",{className:"ti ti-chevron-down"}),oe=()=>a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Profile Image (Max 512KB)"}),a.jsxs("div",{className:"d-flex align-items-center gap-3",children:[a.jsx("div",{className:"avatar avatar-lg",children:b?a.jsx("img",{src:b,alt:"Preview",className:"rounded-circle",style:{width:"60px",height:"60px",objectFit:"cover"}}):a.jsx("div",{className:"avatar-initial rounded-circle bg-secondary d-flex align-items-center justify-content-center",children:a.jsx("i",{className:"ti ti-user fs-3"})})}),a.jsxs("div",{className:"flex-grow-1",children:[a.jsx("input",{type:"file",className:"form-control",accept:"image/*",onChange:A}),a.jsx("small",{className:"text-muted",children:"JPG, PNG, GIF (Max 512KB)"}),b&&a.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger mt-1",onClick:L,children:"Remove Image"})]})]})]}),M=()=>e.loading?a.jsx("div",{className:"text-center py-4",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"",children:a.jsxs("table",{className:"table table-sm",id:"contactslist",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{className:"no-sort"}),a.jsxs("th",{onClick:()=>O("name"),style:{cursor:"pointer"},children:["Name ",Y("name")]}),a.jsxs("th",{onClick:()=>O("phone"),style:{cursor:"pointer"},children:["Phone ",Y("phone")]}),a.jsx("th",{children:"Tags"}),a.jsxs("th",{onClick:()=>O("location"),style:{cursor:"pointer"},children:["Location ",Y("location")]}),a.jsxs("th",{className:"pe-3",onClick:()=>O("rating"),style:{cursor:"pointer"},children:["Rating ",Y("rating")]}),a.jsx("th",{children:"Contact"}),a.jsxs("th",{onClick:()=>O("status"),style:{cursor:"pointer"},children:["Status ",Y("status")]}),a.jsx("th",{className:"text-end no-sort",children:"Action"})]})}),a.jsx("tbody",{children:e.contacts.map(re=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("span",{className:"avatar avatar-sm rounded-circle",children:re.avatar?a.jsx("img",{src:`${re.avatar}`,className:"flex-shrink-0 rounded-circle",alt:re.name,style:{width:"40px",height:"40px",objectFit:"cover"}}):a.jsx("div",{className:"avatar-initial rounded-circle bg-primary",children:re.name.charAt(0).toUpperCase()})})}),a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("h6",{className:"mb-0",children:re.name}),a.jsx("small",{className:"text-muted",children:re.email})]})}),a.jsx("td",{children:re.phone}),a.jsx("td",{children:J(re.tags)}),a.jsx("td",{children:re.location}),a.jsx("td",{children:U(re.rating)}),a.jsx("td",{children:re.email}),a.jsx("td",{children:a.jsx("span",{className:`badge ${re.status==="active"?"badge-soft-success":"badge-soft-danger"}`,children:re.status})}),a.jsx("td",{className:"text-end",children:a.jsxs("div",{className:"dropdown",children:[a.jsx("button",{className:"btn btn-outline-light btn-sm","data-bs-toggle":"dropdown",children:a.jsx("i",{className:"ti ti-dots-vertical"})}),a.jsxs("div",{className:"dropdown-menu",children:[a.jsxs("a",{className:"dropdown-item",href:"javascript:void(0);",onClick:()=>Z(re),children:[a.jsx("i",{className:"ti ti-edit me-1"}),"Edit"]}),a.jsxs("a",{className:"dropdown-item text-danger",href:"javascript:void(0);",onClick:()=>z(re._id),children:[a.jsx("i",{className:"ti ti-trash me-1"}),"Delete"]})]})]})})]},re._id))})]})}),V=()=>r?a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",onClick:re=>re.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Add Contact"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{n(!1),L()}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:re=>{re.preventDefault();const ae=new FormData(re.target),ne={name:ae.get("name"),phone:ae.get("phone"),email:ae.get("email"),location:ae.get("location"),rating:parseInt(ae.get("rating"))||3,status:ae.get("status")||"active",tags:ae.get("tags")?ae.get("tags").split(",").map(ie=>ie.trim()):[]};B(ne)},children:[oe(),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Name"}),a.jsx("input",{type:"text",name:"name",className:"form-control",required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Phone"}),a.jsx("input",{type:"tel",name:"phone",className:"form-control",required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Email"}),a.jsx("input",{type:"email",name:"email",className:"form-control",required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsx("input",{type:"text",name:"location",className:"form-control",required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Rating"}),a.jsx("select",{name:"rating",className:"form-control",children:[1,2,3,4,5].map(re=>a.jsxs("option",{value:re,selected:re===3,children:[re," Star"]},re))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{name:"status",className:"form-control",children:[a.jsx("option",{value:"active",selected:!0,children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Tags"}),a.jsx("input",{type:"text",name:"tags",className:"form-control",placeholder:"VIP, Client"})]})})]}),a.jsxs("div",{className:"text-end",children:[a.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{n(!1),L()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:C,children:C?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Adding..."]}):"Add Contact"})]})]})})]})})}):null,H=()=>!s||!u?null:a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",onClick:re=>re.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Edit Contact"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),h(null),L()}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("form",{onSubmit:re=>{re.preventDefault();const ae=new FormData(re.target),ne={name:ae.get("name"),phone:ae.get("phone"),email:ae.get("email"),location:ae.get("location"),rating:parseInt(ae.get("rating"))||3,status:ae.get("status")||"active",tags:ae.get("tags")?ae.get("tags").split(",").map(ie=>ie.trim()):[]};Q(ne)},children:[oe(),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Name"}),a.jsx("input",{type:"text",name:"name",className:"form-control",defaultValue:u.name,required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Phone"}),a.jsx("input",{type:"tel",name:"phone",className:"form-control",defaultValue:u.phone,required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Email"}),a.jsx("input",{type:"email",name:"email",className:"form-control",defaultValue:u.email,required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsx("input",{type:"text",name:"location",className:"form-control",defaultValue:u.location,required:!0})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Rating"}),a.jsx("select",{name:"rating",className:"form-control",defaultValue:u.rating,children:[1,2,3,4,5].map(re=>a.jsxs("option",{value:re,children:[re," Star"]},re))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{name:"status",className:"form-control",defaultValue:u.status,children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"inactive",children:"Inactive"})]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Tags"}),a.jsx("input",{type:"text",name:"tags",className:"form-control",defaultValue:u.tags.join(", "),placeholder:"VIP, Client"})]})})]}),a.jsxs("div",{className:"text-end",children:[a.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{i(!1),h(null),L()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",disabled:C,children:C?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"spinner-border spinner-border-sm me-2"}),"Updating..."]}):"Update Contact"})]})]})})]})})}),ee=()=>{if(!o)return null;const re=e.contacts.find(ae=>ae._id===m);return a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",onClick:ae=>ae.stopPropagation(),children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Confirm Delete"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{l(!1),p(null)}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"mb-3",children:a.jsx("i",{className:"ti ti-alert-triangle text-warning",style:{fontSize:"48px"}})}),a.jsx("h6",{children:"Are you sure you want to delete this contact?"}),re&&a.jsxs("p",{className:"text-muted",children:[a.jsx("strong",{children:re.name}),a.jsx("br",{}),re.email]}),a.jsx("p",{className:"text-danger small",children:"This action cannot be undone."})]})}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{l(!1),p(null)},children:"Cancel"}),a.jsx("button",{type:"button",className:"btn btn-danger",onClick:K,children:"Delete Contact"})]})]})})})};return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"content pb-0",children:[a.jsx("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:a.jsxs("div",{children:[a.jsx("h4",{className:"mb-1",children:"Contacts"}),a.jsx("nav",{"aria-label":"breadcrumb",children:a.jsxs("ol",{className:"breadcrumb mb-0 p-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:"Home"})}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Contacts"})]})})]})}),a.jsxs("div",{className:"card border-0 rounded-0",children:[a.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[a.jsxs("div",{className:"input-icon input-icon-start position-relative",children:[a.jsx("span",{className:"input-icon-addon text-dark",children:a.jsx("i",{className:"ti ti-search"})}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search",value:e.searchTerm,onChange:re=>P(re.target.value)})]}),a.jsxs("button",{className:"btn btn-primary",onClick:()=>n(!0),children:[a.jsx("i",{className:"ti ti-square-rounded-plus-filled me-1"}),"Add Contacts"]})]}),a.jsxs("div",{className:"card-body",children:[M(),a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"datatable-length",children:["Showing ",(e.currentPage-1)*e.pageSize+1," to ",Math.min(e.currentPage*e.pageSize,e.totalCount)," of ",e.totalCount," entries"]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"datatable-paginate text-end",children:[a.jsx("button",{className:"btn btn-outline-primary btn-sm me-2",disabled:e.currentPage===1,onClick:()=>t(re=>({...re,currentPage:re.currentPage-1})),children:"Previous"}),a.jsxs("span",{className:"me-2",children:["Page ",e.currentPage]}),a.jsx("button",{className:"btn btn-outline-primary btn-sm",disabled:e.currentPage*e.pageSize>=e.totalCount,onClick:()=>t(re=>({...re,currentPage:re.currentPage+1})),children:"Next"})]})})]})]})]}),V(),H(),ee()]})})},TMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState(""),[u,h]=N.useState(""),[m,p]=N.useState(!1),[v,g]=N.useState(""),b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear"),[C,w]=N.useState({companyName:"",contactPersonName:"",email:"",phoneNumber:"",leadSource:"Website",leadStatus:"New",industry:"Technology",companySize:"1-10",annualRevenue:"",leadScore:50,assignedSalesRep:"",notes:"",expectedDealValue:"",expectedCloseDate:"",campaignId:""}),k=async()=>{try{p(!0);const U=await fetch(`/api/leads?companyId=${b}&financialYear=${y}`);if(!U.ok)throw new Error("Failed to fetch leads");const J=await U.json();console.log("Fetched leads:",J),t(J||[])}catch(U){g(U.message)}finally{p(!1)}},S=async()=>{try{const U=await fetch(`/api/campaigns?companyId=${b}&financialYear=${y}`);if(!U.ok)throw new Error("Failed to fetch campaigns");const J=await U.json();n(J||[])}catch(U){console.error("Failed to fetch campaigns:",U)}},D=async U=>{try{const J=await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...U,companyId:b,financialYear:y})});if(!J.ok){const oe=await J.json();throw new Error(oe.message||"Failed to create lead")}const Y=await J.json();t([...e,Y]),A(),i(!1)}catch(J){g(J.message)}},E=async(U,J)=>{try{const Y=await fetch(`/api/leads/${U}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({...J,companyId:b,financialYear:y})});if(!Y.ok){const M=await Y.json();throw new Error(M.message||"Failed to update lead")}const oe=await Y.json();t(e.map(M=>M._id===U?oe:M)),A(),i(!1),l(null)}catch(Y){g(Y.message)}},T=async U=>{if(window.confirm("Are you sure you want to delete this lead?"))try{if(!(await fetch(`/api/leads/${U}`,{method:"DELETE"})).ok)throw new Error("Failed to delete lead");t(e.filter(Y=>Y._id!==U))}catch(J){g(J.message)}},A=()=>{w({companyName:"",contactPersonName:"",email:"",phoneNumber:"",leadSource:"Website",leadStatus:"New",industry:"Technology",companySize:"1-10",annualRevenue:"",leadScore:50,assignedSalesRep:"",notes:"",expectedDealValue:"",expectedCloseDate:"",campaignId:""})},L=async U=>{U.preventDefault(),o?await E(o._id,C):await D(C)},P=U=>{w({companyName:U.companyName,contactPersonName:U.contactPersonName,email:U.email,phoneNumber:U.phoneNumber,leadSource:U.leadSource,leadStatus:U.leadStatus,industry:U.industry,companySize:U.companySize,annualRevenue:U.annualRevenue||"",leadScore:U.leadScore,assignedSalesRep:U.assignedSalesRep||"",notes:U.notes||"",expectedDealValue:U.expectedDealValue||"",expectedCloseDate:U.expectedCloseDate?U.expectedCloseDate.split("T")[0]:"",campaignId:U.campaignId?._id||U.campaignId||""}),l(U),i(!0)},O=U=>{const{name:J,value:Y}=U.target;w(oe=>({...oe,[J]:Y}))},Z=Array.isArray(e)?e.filter(U=>{const J=U.companyName?.toLowerCase().includes(c.toLowerCase())||U.contactPersonName?.toLowerCase().includes(c.toLowerCase())||U.email?.toLowerCase().includes(c.toLowerCase()),Y=u===""||U.leadStatus===u;return J&&Y}):[];N.useEffect(()=>{k(),S()},[]);const z=["Website","Social Media","Referral","Cold Call","Advertisement","Email Campaign","Google Ads","Event","Other"],K=["New","Contacted","Qualified","Proposal","Negotiation","Closed Won","Closed Lost"],B=["Technology","Healthcare","Finance","Manufacturing","Retail","Education","Other"],Q=["1-10","11-50","51-200","201-1000","1000+"];return a.jsxs("div",{className:"container-fluid py-4",children:[v&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:v}),s&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{children:o?"Edit Lead":"Add New Lead"}),a.jsx("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>{i(!1),l(null),A()},children:"×"})]}),a.jsxs("form",{onSubmit:L,className:"modal-body",children:[a.jsxs("div",{className:"row g-2",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Company Name*"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",name:"companyName",className:"form-control form-control-sm",value:C.companyName,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Contact Person*"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",name:"contactPersonName",className:"form-control form-control-sm",value:C.contactPersonName,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Email*"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("input",{type:"email",name:"email",className:"form-control form-control-sm",value:C.email,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Phone Number*"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"tel",name:"phoneNumber",className:"form-control form-control-sm",value:C.phoneNumber,onChange:O,required:!0})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Campaign"})}),a.jsx("div",{className:"col-xl-6",children:a.jsxs("select",{name:"campaignId",className:"form-control form-control-sm",value:C.campaignId,onChange:O,children:[a.jsx("option",{value:"",children:"Select Campaign"}),r.map(U=>a.jsx("option",{value:U._id,children:U.campaignName},U._id))]})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Lead Source"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"leadSource",className:"form-control form-control-sm",value:C.leadSource,onChange:O,children:z.map(U=>a.jsx("option",{value:U,children:U},U))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Lead Status"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"leadStatus",className:"form-control form-control-sm",value:C.leadStatus,onChange:O,children:K.map(U=>a.jsx("option",{value:U,children:U},U))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Industry"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"industry",className:"form-control form-control-sm",value:C.industry,onChange:O,children:B.map(U=>a.jsx("option",{value:U,children:U},U))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Company Size"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("select",{name:"companySize",className:"form-control form-control-sm",value:C.companySize,onChange:O,children:Q.map(U=>a.jsx("option",{value:U,children:U},U))})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Annual Revenue"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",name:"annualRevenue",className:"form-control form-control-sm",value:C.annualRevenue,onChange:O,min:"0"})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Lead Score (1-100)"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",name:"leadScore",className:"form-control form-control-sm",value:C.leadScore,onChange:O,min:"1",max:"100"})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Assigned Sales Rep"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"text",name:"assignedSalesRep",className:"form-control form-control-sm",value:C.assignedSalesRep,onChange:O})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Expected Deal Value"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"number",name:"expectedDealValue",className:"form-control form-control-sm",value:C.expectedDealValue,onChange:O,min:"0"})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-6",children:a.jsx("label",{className:"form-label",children:"Expected Close Date"})}),a.jsx("div",{className:"col-xl-6",children:a.jsx("input",{type:"date",name:"expectedCloseDate",className:"form-control form-control-sm",value:C.expectedCloseDate,onChange:O})})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsx("div",{className:"col-xl-3",children:a.jsx("label",{className:"form-label",children:"Notes"})}),a.jsx("div",{className:"col-xl-9",children:a.jsx("textarea",{name:"notes",className:"form-control form-control-sm",value:C.notes,onChange:O,rows:"3"})})]})})]}),a.jsx("div",{className:"row mt-3",children:a.jsxs("div",{className:"col-auto",children:[a.jsx("button",{type:"button",className:"btn btn-secondary me-2",onClick:()=>{i(!1),l(null),A()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Lead":"Create Lead"})]})})]})]})})}),a.jsxs("div",{className:"card mt-3",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-user-plus me-2"}),"Leads Management"]}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"Search leads...",value:c,onChange:U=>d(U.target.value),className:"form-control form-control-sm",style:{width:"200px"}}),a.jsxs("select",{value:u,onChange:U=>h(U.target.value),className:"form-select form-select-sm",style:{width:"150px"},children:[a.jsx("option",{value:"",children:"All Statuses"}),K.map(U=>a.jsx("option",{value:U,children:U},U))]}),a.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{A(),l(null),i(!0)},children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add New Lead"]})]})]}),a.jsx("div",{className:"card-body",children:m?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Company"}),a.jsx("th",{children:"Contact Person"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Campaign"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Source"}),a.jsx("th",{children:"Industry"}),a.jsx("th",{children:"Score"}),a.jsx("th",{children:"Expected Value"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:Z.length>0?Z.map(U=>a.jsxs("tr",{children:[a.jsx("td",{children:U.companyName}),a.jsx("td",{children:U.contactPersonName}),a.jsx("td",{children:a.jsx("a",{href:`mailto:${U.email}`,className:"text-decoration-none",children:U.email})}),a.jsx("td",{children:U.phoneNumber&&a.jsx("a",{href:`tel:${U.phoneNumber}`,className:"text-decoration-none",children:U.phoneNumber})}),a.jsx("td",{children:U.campaignId?.campaignName&&a.jsx("span",{className:"badge bg-info",children:U.campaignId.campaignName})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${IMe(U.leadStatus)}`,children:U.leadStatus})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-secondary",children:U.leadSource})}),a.jsx("td",{children:U.industry}),a.jsx("td",{children:a.jsxs("span",{className:`badge bg-${PMe(U.leadScore)}`,children:[U.leadScore,"/100"]})}),a.jsx("td",{children:U.expectedDealValue?`$${Number(U.expectedDealValue).toLocaleString()}`:"N/A"}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-1",onClick:()=>P(U),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>T(U._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},U._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"11",className:"text-center",children:e.length===0?"No leads available":"No leads match your search criteria"})})})]})})})]})]})},IMe=e=>{switch(e){case"New":return"primary";case"Contacted":return"info";case"Qualified":return"success";case"Proposal":return"warning";case"Negotiation":return"secondary";case"Closed Won":return"success";case"Closed Lost":return"danger";default:return"secondary"}},PMe=e=>e>=80?"success":e>=60?"warning":e>=40?"info":"secondary",gm="/api";function OMe(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,d]=N.useState(null),[u,h]=N.useState([]),[m,p]=N.useState(""),[v,g]=N.useState(""),[b,y]=N.useState(""),[C,w]=N.useState(!1),[k,S]=N.useState(""),[D,E]=N.useState("basic"),[T,A]=N.useState({leadId:"",title:"",description:"",proposalValue:"",currency:"USD",validityPeriod:30,status:"Draft",priority:"Medium",businessObjective:"",proposedSolution:"",timeline:"",paymentTerms:"",deliveryTerms:"",warrantyTerms:"",projectDuration:"",teamComposition:"",riskAssessment:"",companyCredentials:"",technicalRequirements:"",proposedTechnology:"",internalNotes:""}),L=le=>{const Se=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Proposal - ${le.proposalNumber}</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        margin: 0;
                        padding: 20px;
                        color: #333;
                    }
                    .header {
                        text-align: center;
                        border-bottom: 3px solid #333;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    .header h1 {
                        margin: 0;
                        color: #2c3e50;
                        font-size: 28px;
                    }
                    .header h2 {
                        margin: 5px 0;
                        color: #34495e;
                        font-size: 20px;
                    }
                    .section {
                        margin-bottom: 25px;
                    }
                    .section h3 {
                        color: #2c3e50;
                        border-bottom: 2px solid #bdc3c7;
                        padding-bottom: 10px;
                        margin-bottom: 15px;
                        font-size: 18px;
                    }
                    .info-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 20px;
                        margin-bottom: 20px;
                    }
                    .info-item {
                        margin-bottom: 10px;
                    }
                    .info-item strong {
                        color: #2c3e50;
                    }
                    .description {
                        background-color: #f8f9fa;
                        padding: 15px;
                        border-left: 4px solid #3498db;
                        margin: 15px 0;
                    }
                    .value-highlight {
                        background-color: #e8f6f3;
                        padding: 15px;
                        border-radius: 5px;
                        text-align: center;
                        margin: 20px 0;
                    }
                    .value-highlight .amount {
                        font-size: 24px;
                        font-weight: bold;
                        color: #27ae60;
                    }
                    .footer {
                        margin-top: 40px;
                        text-align: center;
                        border-top: 2px solid #bdc3c7;
                        padding-top: 20px;
                        color: #7f8c8d;
                    }
                    .terms-section {
                        background-color: #f8f9fa;
                        padding: 20px;
                        border-radius: 5px;
                        margin: 20px 0;
                    }
                    @media print {
                        body { margin: 0; }
                        .section { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>BUSINESS PROPOSAL</h1>
                    <h2>${le.proposalNumber}</h2>
                    <p>Date: ${Se}</p>
                </div>

                <div class="section">
                    <h3>Client Information</h3>
                    <div class="info-grid">
                        <div>
                            <div class="info-item"><strong>Company:</strong> ${le.leadId?.companyName||"N/A"}</div>
                            <div class="info-item"><strong>Contact Person:</strong> ${le.leadId?.contactPersonName||"N/A"}</div>
                        </div>
                        <div>
                            <div class="info-item"><strong>Email:</strong> ${le.leadId?.email||"N/A"}</div>
                            <div class="info-item"><strong>Phone:</strong> ${le.leadId?.phoneNumber||"N/A"}</div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h3>Proposal Overview</h3>
                    <div class="info-item"><strong>Title:</strong> ${le.title}</div>
                    <div class="description">
                        <strong>Description:</strong><br>
                        ${le.description}
                    </div>
                    
                    <div class="value-highlight">
                        <div class="amount">${le.currency} ${le.proposalValue?.toLocaleString()}</div>
                        <div>Total Proposal Value</div>
                    </div>
                    
                    <div class="info-grid">
                        <div class="info-item"><strong>Priority:</strong> ${le.priority}</div>
                        <div class="info-item"><strong>Validity:</strong> ${le.validityPeriod} days</div>
                    </div>
                </div>

                ${le.businessObjective?`
                    <div class="section">
                        <h3>Business Objective</h3>
                        <p>${le.businessObjective}</p>
                    </div>
                `:""}

                ${le.proposedSolution?`
                    <div class="section">
                        <h3>Proposed Solution</h3>
                        <p>${le.proposedSolution}</p>
                    </div>
                `:""}

                ${le.timeline||le.projectDuration?`
                    <div class="section">
                        <h3>Project Timeline</h3>
                        ${le.timeline?`<p>${le.timeline}</p>`:""}
                        ${le.projectDuration?`<div class="info-item"><strong>Duration:</strong> ${le.projectDuration} days</div>`:""}
                    </div>
                `:""}

                ${le.teamComposition?`
                    <div class="section">
                        <h3>Team Composition</h3>
                        <p>${le.teamComposition}</p>
                    </div>
                `:""}

                ${le.technicalRequirements?`
                    <div class="section">
                        <h3>Technical Requirements</h3>
                        <p>${le.technicalRequirements}</p>
                    </div>
                `:""}

                ${le.proposedTechnology?`
                    <div class="section">
                        <h3>Proposed Technology</h3>
                        <p>${le.proposedTechnology}</p>
                    </div>
                `:""}

                ${le.paymentTerms||le.deliveryTerms||le.warrantyTerms?`
                    <div class="terms-section">
                        <h3>Commercial Terms</h3>
                        ${le.paymentTerms?`
                            <div class="info-item">
                                <strong>Payment Terms:</strong><br>
                                ${le.paymentTerms}
                            </div>
                        `:""}
                        ${le.deliveryTerms?`
                            <div class="info-item">
                                <strong>Delivery Terms:</strong><br>
                                ${le.deliveryTerms}
                            </div>
                        `:""}
                        ${le.warrantyTerms?`
                            <div class="info-item">
                                <strong>Warranty Terms:</strong><br>
                                ${le.warrantyTerms}
                            </div>
                        `:""}
                    </div>
                `:""}

                ${le.riskAssessment?`
                    <div class="section">
                        <h3>Risk Assessment</h3>
                        <p>${le.riskAssessment}</p>
                    </div>
                `:""}

                ${le.companyCredentials?`
                    <div class="section">
                        <h3>Company Credentials</h3>
                        <p>${le.companyCredentials}</p>
                    </div>
                `:""}

                <div class="footer">
                    <p><strong>Valid until:</strong> ${le.expiryDate?new Date(le.expiryDate).toLocaleDateString():`${le.validityPeriod} days from submission`}</p>
                    <br>
                    <p>Thank you for considering our proposal.</p>
                    <p><strong>Prepared by:</strong> ${le.createdBy||""}</p>
                </div>
            </body>
            </html>
        `},P=le=>{const Se=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),ue=le.map(se=>`
            <div class="proposal-item">
                <h3>${se.proposalNumber} - ${se.title}</h3>
                <div class="info-grid">
                    <div>
                        <div class="info-item"><strong>Company:</strong> ${se.leadId?.companyName||"N/A"}</div>
                        <div class="info-item"><strong>Contact:</strong> ${se.leadId?.contactPersonName||"N/A"}</div>
                        <div class="info-item"><strong>Value:</strong> ${se.currency} ${se.proposalValue?.toLocaleString()}</div>
                    </div>
                    <div>
                        <div class="info-item"><strong>Status:</strong> ${se.status}</div>
                        <div class="info-item"><strong>Priority:</strong> ${se.priority}</div>
                        <div class="info-item"><strong>Created:</strong> ${new Date(se.createdAt).toLocaleDateString()}</div>
                    </div>
                </div>
                <div class="description">
                    <strong>Description:</strong> ${se.description}
                </div>
            </div>
        `).join("");return`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Proposals Summary Report</title>
                <style>
                    body {
                        font-family: Arial, sans-serif;
                        line-height: 1.6;
                        margin: 0;
                        padding: 20px;
                        color: #333;
                    }
                    .header {
                        text-align: center;
                        border-bottom: 3px solid #333;
                        margin-bottom: 30px;
                        padding-bottom: 20px;
                    }
                    .header h1 {
                        margin: 0;
                        color: #2c3e50;
                        font-size: 28px;
                    }
                    .proposal-item {
                        margin-bottom: 30px;
                        padding: 20px;
                        border: 1px solid #bdc3c7;
                        border-radius: 5px;
                        page-break-inside: avoid;
                    }
                    .proposal-item h3 {
                        color: #2c3e50;
                        margin-top: 0;
                        border-bottom: 1px solid #bdc3c7;
                        padding-bottom: 10px;
                    }
                    .info-grid {
                        display: grid;
                        grid-template-columns: 1fr 1fr;
                        gap: 20px;
                        margin-bottom: 15px;
                    }
                    .info-item {
                        margin-bottom: 8px;
                    }
                    .info-item strong {
                        color: #2c3e50;
                    }
                    .description {
                        background-color: #f8f9fa;
                        padding: 10px;
                        border-left: 4px solid #3498db;
                        margin-top: 10px;
                    }
                    @media print {
                        body { margin: 0; }
                        .proposal-item { page-break-inside: avoid; }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>PROPOSALS SUMMARY REPORT</h1>
                    <p>Generated on: ${Se}</p>
                    <p>Total Proposals: ${le.length}</p>
                </div>
                ${ue}
                <div style="text-align: center; margin-top: 30px; border-top: 2px solid #bdc3c7; padding-top: 20px;">
                    <p><strong>Report generated by:</strong> sreevatsa-B-R</p>
                </div>
            </body>
            </html>
        `},O=async le=>{try{const Se=await fetch(`${gm}/proposals/${le._id}`);if(!Se.ok)throw new Error("Failed to fetch proposal details");const ue=await Se.json(),se=L(ue),ye=window.open("","_blank");ye.document.write(se),ye.document.close(),ye.onload=()=>{ye.focus(),ye.print(),ye.close()}}catch(Se){S("Failed to print proposal: "+Se.message)}},Z=()=>{if(u.length===0){alert("Please select proposals to print");return}const le=e.filter(se=>u.includes(se._id)),Se=P(le),ue=window.open("","_blank");ue.document.write(Se),ue.document.close(),ue.onload=()=>{ue.focus(),ue.print(),ue.close()}},z=le=>{h(Se=>Se.includes(le)?Se.filter(ue=>ue!==le):[...Se,le])},K=()=>{u.length===ae.length?h([]):h(ae.map(le=>le._id))},B=async()=>{try{w(!0);const le=await fetch(`${gm}/proposals`);if(!le.ok)throw new Error("Failed to fetch proposals");const Se=await le.json();t(Se.proposals||Se)}catch(le){S(le.message)}finally{w(!1)}},Q=async()=>{try{const le=await fetch(`${gm}/leads?status=Qualified`);if(!le.ok)throw new Error("Failed to fetch leads");const Se=await le.json();n(Se.leads||Se)}catch(le){console.error("Error fetching leads:",le)}},U=async le=>{try{console.log("Sending proposal data:",le);const Se=await fetch(`${gm}/proposals`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(le)});if(console.log("Response status:",Se.status),!Se.ok){const se=await Se.json();throw console.error("Error response:",se),new Error(se.message||"Failed to create proposal")}const ue=await Se.json();console.log("Created proposal:",ue),t([...e,ue]),M(),i(!1)}catch(Se){console.error("Create proposal error:",Se),S(Se.message)}},J=async(le,Se)=>{try{const ue=await fetch(`${gm}/proposals/${le}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(Se)});if(!ue.ok){const ye=await ue.json();throw new Error(ye.message||"Failed to update proposal")}const se=await ue.json();t(e.map(ye=>ye._id===le?se:ye)),M(),i(!1),l(null)}catch(ue){S(ue.message)}},Y=async le=>{try{const Se=await fetch(`${gm}/proposals/${le}/submit`,{method:"PUT"});if(!Se.ok){const se=await Se.json();throw new Error(se.message||"Failed to submit proposal")}const ue=await Se.json();t(e.map(se=>se._id===le?ue:se))}catch(Se){S(Se.message)}},oe=async le=>{if(window.confirm("Are you sure you want to delete this proposal?"))try{if(!(await fetch(`${gm}/proposals/${le}`,{method:"DELETE"})).ok)throw new Error("Failed to delete proposal");t(e.filter(ue=>ue._id!==le))}catch(Se){S(Se.message)}},M=()=>{A({leadId:"",title:"",description:"",proposalValue:"",currency:"USD",validityPeriod:30,status:"Draft",priority:"Medium",businessObjective:"",proposedSolution:"",timeline:"",paymentTerms:"",deliveryTerms:"",warrantyTerms:"",projectDuration:"",teamComposition:"",riskAssessment:"",companyCredentials:"",technicalRequirements:"",proposedTechnology:"",internalNotes:""}),E("basic")},V=async le=>{le.preventDefault(),o?await J(o._id,T):await U(T)},H=le=>{A({leadId:le.leadId?._id||"",title:le.title||"",description:le.description||"",proposalValue:le.proposalValue||"",currency:le.currency||"USD",validityPeriod:le.validityPeriod||30,status:le.status||"Draft",priority:le.priority||"Medium",businessObjective:le.businessObjective||"",proposedSolution:le.proposedSolution||"",timeline:le.timeline||"",paymentTerms:le.paymentTerms||"",deliveryTerms:le.deliveryTerms||"",warrantyTerms:le.warrantyTerms||"",projectDuration:le.projectDuration||"",teamComposition:le.teamComposition||"",riskAssessment:le.riskAssessment||"",companyCredentials:le.companyCredentials||"",technicalRequirements:le.technicalRequirements||"",proposedTechnology:le.proposedTechnology||"",internalNotes:le.internalNotes||""}),l(le),i(!0)},ee=async le=>{try{const Se=await fetch(`${gm}/proposals/${le._id}`);if(!Se.ok)throw new Error("Failed to fetch proposal details");const ue=await Se.json();d(ue)}catch(Se){S(Se.message)}},re=le=>{const{name:Se,value:ue}=le.target;A(se=>({...se,[Se]:ue}))},ae=Array.isArray(e)?e.filter(le=>{const Se=le.proposalNumber?.toLowerCase().includes(m.toLowerCase())||le.title?.toLowerCase().includes(m.toLowerCase())||le.leadId?.companyName?.toLowerCase().includes(m.toLowerCase()),ue=v===""||le.status===v,se=b===""||le.priority===b;return Se&&ue&&se}):[];N.useEffect(()=>{B(),Q()},[]);const ne=["Draft","Submitted","Under Review","Approved","Rejected","Expired","Withdrawn"],ie=["Low","Medium","High","Critical"],G=["USD","EUR","INR","GBP","CAD","AUD"],de=le=>{switch(le){case"Draft":return"secondary";case"Submitted":return"primary";case"Under Review":return"warning";case"Approved":return"success";case"Rejected":return"danger";case"Expired":return"dark";case"Withdrawn":return"secondary";default:return"secondary"}},X=le=>{switch(le){case"Low":return"success";case"Medium":return"warning";case"High":return"danger";case"Critical":return"dark";default:return"secondary"}};return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Proposals"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Proposals"})]})})]}),a.jsx("div",{children:a.jsxs("div",{className:"d-flex gap-2",children:[u.length>0&&a.jsxs("button",{className:"btn btn-info",onClick:Z,children:[a.jsx("i",{className:"fas fa-print"})," Print Selected (",u.length,")"]}),a.jsx("button",{className:"btn btn-primary",onClick:()=>{M(),l(null),i(!0)},children:"Create New Proposal"})]})})]}),a.jsx("div",{className:"card mb-3",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row g-3",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",placeholder:"Search proposals...",value:m,onChange:le=>p(le.target.value),className:"form-control"})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{value:v,onChange:le=>g(le.target.value),className:"form-select",children:[a.jsx("option",{value:"",children:"All Statuses"}),ne.map(le=>a.jsx("option",{value:le,children:le},le))]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{value:b,onChange:le=>y(le.target.value),className:"form-select",children:[a.jsx("option",{value:"",children:"All Priorities"}),ie.map(le=>a.jsx("option",{value:le,children:le},le))]})}),a.jsx("div",{className:"col-md-2",children:a.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>{p(""),g(""),y("")},children:"Clear Filters"})})]})})}),s&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h2",{className:"modal-title",children:o?"Edit Proposal":"Create New Proposal"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>{i(!1),l(null),M()}})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("ul",{className:"nav nav-tabs mb-3",children:[a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="basic"?"active":""}`,onClick:()=>E("basic"),children:"Basic Info"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="business"?"active":""}`,onClick:()=>E("business"),children:"Business Details"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="technical"?"active":""}`,onClick:()=>E("technical"),children:"Technical"})}),a.jsx("li",{className:"nav-item",children:a.jsx("button",{className:`nav-link ${D==="commercial"?"active":""}`,onClick:()=>E("commercial"),children:"Commercial"})})]}),a.jsxs("form",{onSubmit:V,children:[D==="basic"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Select Lead *"}),a.jsxs("select",{name:"leadId",className:"form-select",value:T.leadId,onChange:re,required:!0,disabled:o,children:[a.jsx("option",{value:"",children:"Select a qualified lead..."}),r.map(le=>a.jsxs("option",{value:le._id,children:[le.companyName," - ",le.contactPersonName]},le._id))]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Proposal Title *"}),a.jsx("input",{type:"text",name:"title",className:"form-control",value:T.title,onChange:re,required:!0,placeholder:"Enter proposal title"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Description *"}),a.jsx("textarea",{name:"description",className:"form-control",value:T.description,onChange:re,required:!0,rows:"4",placeholder:"Enter proposal description"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Proposal Value *"}),a.jsx("input",{type:"number",name:"proposalValue",className:"form-control",value:T.proposalValue,onChange:re,required:!0,min:"0",step:"0.01"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Currency"}),a.jsx("select",{name:"currency",className:"form-select",value:T.currency,onChange:re,children:G.map(le=>a.jsx("option",{value:le,children:le},le))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Validity Period (Days)"}),a.jsx("input",{type:"number",name:"validityPeriod",className:"form-control",value:T.validityPeriod,onChange:re,min:"1",max:"365"})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{name:"status",className:"form-select",value:T.status,onChange:re,children:ne.map(le=>a.jsx("option",{value:le,children:le},le))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{name:"priority",className:"form-select",value:T.priority,onChange:re,children:ie.map(le=>a.jsx("option",{value:le,children:le},le))})]}),a.jsxs("div",{className:"col-md-4",children:[a.jsx("label",{className:"form-label",children:"Created By"}),a.jsx("input",{type:"text",name:"createdBy",className:"form-control",value:T.createdBy,onChange:re})]})]}),D==="business"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Business Objective"}),a.jsx("textarea",{name:"businessObjective",className:"form-control",value:T.businessObjective,onChange:re,rows:"3",placeholder:"Describe the business objective"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Proposed Solution"}),a.jsx("textarea",{name:"proposedSolution",className:"form-control",value:T.proposedSolution,onChange:re,rows:"4",placeholder:"Describe the proposed solution"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Project Timeline"}),a.jsx("textarea",{name:"timeline",className:"form-control",value:T.timeline,onChange:re,rows:"3",placeholder:"Project timeline and milestones"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Project Duration (Days)"}),a.jsx("input",{type:"number",name:"projectDuration",className:"form-control",value:T.projectDuration,onChange:re,min:"1"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Team Composition"}),a.jsx("textarea",{name:"teamComposition",className:"form-control",value:T.teamComposition,onChange:re,rows:"3",placeholder:"Describe the project team composition"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Risk Assessment"}),a.jsx("textarea",{name:"riskAssessment",className:"form-control",value:T.riskAssessment,onChange:re,rows:"3",placeholder:"Risk assessment and mitigation strategies"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Company Credentials"}),a.jsx("textarea",{name:"companyCredentials",className:"form-control",value:T.companyCredentials,onChange:re,rows:"4",placeholder:"Company credentials and past experience"})]})]}),D==="technical"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Technical Requirements"}),a.jsx("textarea",{name:"technicalRequirements",className:"form-control",value:T.technicalRequirements,onChange:re,rows:"5",placeholder:"Detailed technical requirements"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Proposed Technology"}),a.jsx("textarea",{name:"proposedTechnology",className:"form-control",value:T.proposedTechnology,onChange:re,rows:"4",placeholder:"Technology stack and tools to be used"})]})]}),D==="commercial"&&a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Payment Terms"}),a.jsx("textarea",{name:"paymentTerms",className:"form-control",value:T.paymentTerms,onChange:re,rows:"3",placeholder:"Payment terms and conditions"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Delivery Terms"}),a.jsx("textarea",{name:"deliveryTerms",className:"form-control",value:T.deliveryTerms,onChange:re,rows:"3",placeholder:"Delivery terms and conditions"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Warranty Terms"}),a.jsx("textarea",{name:"warrantyTerms",className:"form-control",value:T.warrantyTerms,onChange:re,rows:"3",placeholder:"Warranty and support terms"})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("label",{className:"form-label",children:"Internal Notes"}),a.jsx("textarea",{name:"internalNotes",className:"form-control",value:T.internalNotes,onChange:re,rows:"3",placeholder:"Internal notes (not visible to client)"})]})]}),a.jsx("div",{className:"row mt-4",children:a.jsxs("div",{className:"col-12 d-flex justify-content-end gap-2",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>{i(!1),l(null),M()},children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:o?"Update Proposal":"Create Proposal"})]})})]})]})]})})}),c&&a.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h2",{className:"modal-title",children:["Proposal Details - ",c.proposalNumber]}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(null)})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Company:"})," ",c.leadId?.companyName]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Contact:"})," ",c.leadId?.contactPersonName]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Title:"})," ",c.title]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Value:"})," ",c.currency," ",c.proposalValue?.toLocaleString()]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Status:"}),a.jsx("span",{className:`badge bg-${de(c.status)} ms-2`,children:c.status})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("strong",{children:"Priority:"}),a.jsx("span",{className:`badge bg-${X(c.priority)} ms-2`,children:c.priority})]}),a.jsxs("div",{className:"col-12",children:[a.jsx("strong",{children:"Description:"}),a.jsx("p",{children:c.description})]}),c.businessObjective&&a.jsxs("div",{className:"col-12",children:[a.jsx("strong",{children:"Business Objective:"}),a.jsx("p",{children:c.businessObjective})]}),c.proposedSolution&&a.jsxs("div",{className:"col-12",children:[a.jsx("strong",{children:"Proposed Solution:"}),a.jsx("p",{children:c.proposedSolution})]})]})}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(null),children:"Close"})})]})})}),a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Proposals"})}),a.jsx("div",{className:"card-body p-0",children:a.jsx("div",{children:a.jsxs("table",{className:"table table-sm table-bordered mb-2 mt-2",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:a.jsx("input",{type:"checkbox",checked:u.length===ae.length&&ae.length>0,onChange:K})}),a.jsx("th",{children:"Proposal #"}),a.jsx("th",{children:"Company"}),a.jsx("th",{children:"Title"}),a.jsx("th",{children:"Value"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Created"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:ae.length>0?ae.map(le=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("input",{type:"checkbox",checked:u.includes(le._id),onChange:()=>z(le._id)})}),a.jsx("td",{children:a.jsx("strong",{children:le.proposalNumber})}),a.jsx("td",{children:le.leadId?.companyName||"N/A"}),a.jsx("td",{children:le.title}),a.jsxs("td",{children:[le.currency," ",le.proposalValue?.toLocaleString()]}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${de(le.status)}`,children:le.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${X(le.priority)}`,children:le.priority})}),a.jsx("td",{children:new Date(le.createdAt).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("div",{className:"btn-group btn-group-sm",children:[a.jsx("button",{className:"btn btn-outline-primary",onClick:()=>ee(le),title:"View Details",children:a.jsx("i",{className:"fas fa-eye"})}),a.jsx("button",{className:"btn btn-outline-info",onClick:()=>O(le),title:"Print",children:a.jsx("i",{className:"fas fa-print"})}),a.jsx("button",{className:"btn btn-outline-warning",onClick:()=>H(le),title:"Edit",children:a.jsx("i",{className:"fas fa-edit"})}),le.status==="Draft"&&a.jsx("button",{className:"btn btn-outline-success",onClick:()=>Y(le._id),title:"Submit",children:a.jsx("i",{className:"fas fa-paper-plane"})}),a.jsx("button",{className:"btn btn-outline-danger",onClick:()=>oe(le._id),title:"Delete",children:a.jsx("i",{className:"fas fa-trash"})})]})})]},le._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center py-4",children:e.length===0?"No proposals available":"No proposals match your search criteria"})})})]})})})]})]})}const MMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(""),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,h]=N.useState({name:"",description:""}),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");N.useEffect(()=>{v()},[]);const v=async()=>{n(!0);try{const k=await(await fetch(`/api/crm/sources?companyId=${m}&financialYear=${p}`)).json();t(k),i("")}catch{i("Failed to load sources")}finally{n(!1)}},g=()=>{d(null),h({name:"",description:""}),l(!0)},b=w=>{d(w),h({name:w.name,description:w.description}),l(!0)},y=async w=>{w.preventDefault();try{const k=c?`/api/crm/sources/${c._id}`:"/api/crm/sources";(await fetch(k,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:m,financialYear:p})})).ok?(await v(),l(!1),i("")):i("Failed to save source")}catch{i("Failed to save source")}},C=async w=>{if(window.confirm("Are you sure you want to delete this source?"))try{(await fetch(`/api/crm/sources/${w}`,{method:"DELETE"})).ok?(await v(),i("")):i("Failed to delete source")}catch{i("Failed to delete source")}};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h4",{className:"card-title mb-0",children:"Sources Management"}),a.jsxs("button",{className:"btn btn-primary",onClick:g,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Source"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(w=>a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:w.name}),a.jsx("td",{children:w.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${w.isActive?"bg-success":"bg-secondary"}`,children:w.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(w.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>b(w),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>C(w._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},w._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Source":"Add Source"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:y,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Source Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.name,onChange:w=>h({...u,name:w.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:w=>h({...u,description:w.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},RMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(""),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,h]=N.useState({reason:"",category:"",description:""}),m=["Price","Competition","Timeline","Budget","Feature","Service","Other"],p=localStorage.getItem("selectedCompanyId"),v=localStorage.getItem("financialYear");N.useEffect(()=>{g()},[]);const g=async()=>{n(!0);try{const D=await(await fetch(`/api/crm/lost-reasons?companyId=${p}&financialYear=${v}`)).json();t(D),i("")}catch{i("Failed to load lost reasons")}finally{n(!1)}},b=()=>{d(null),h({reason:"",category:"",description:""}),l(!0)},y=S=>{d(S),h({reason:S.reason,category:S.category,description:S.description}),l(!0)},C=async S=>{S.preventDefault();try{const D=c?`/api/crm/lost-reasons/${c._id}`:"/api/crm/lost-reasons";(await fetch(D,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:p,financialYear:v})})).ok?(await g(),l(!1),i("")):i("Failed to save lost reason")}catch{i("Failed to save lost reason")}},w=async S=>{if(window.confirm("Are you sure you want to delete this lost reason?"))try{(await fetch(`/api/crm/lost-reasons/${S}`,{method:"DELETE"})).ok?(await g(),i("")):i("Failed to delete lost reason")}catch{i("Failed to delete lost reason")}},k=S=>({Price:"bg-danger",Competition:"bg-warning",Timeline:"bg-info",Budget:"bg-danger",Feature:"bg-primary",Service:"bg-secondary",Other:"bg-dark"})[S]||"bg-secondary";return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h4",{className:"card-title mb-0",children:"Lost Reasons Management"}),a.jsxs("button",{className:"btn btn-primary",onClick:b,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Lost Reason"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Reason"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(S=>a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:S.reason}),a.jsx("td",{children:a.jsx("span",{className:`badge ${k(S.category)}`,children:S.category})}),a.jsx("td",{children:S.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${S.isActive?"bg-success":"bg-secondary"}`,children:S.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(S.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>y(S),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>w(S._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},S._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Lost Reason":"Add Lost Reason"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Lost Reason"}),a.jsx("input",{type:"text",className:"form-control",value:u.reason,onChange:S=>h({...u,reason:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:u.category,onChange:S=>h({...u,category:S.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),m.map(S=>a.jsx("option",{value:S,children:S},S))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:S=>h({...u,description:S.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},FMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(""),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,h]=N.useState({stageName:"",description:"",probability:0,color:"#007bff"}),m=localStorage.getItem("selectedCompanyId"),p=localStorage.getItem("financialYear");N.useEffect(()=>{v()},[]);const v=async()=>{n(!0);try{const S=await(await fetch(`/api/crm/contact-stages?companyId=${m}&financialYear=${p}`)).json();t(S.sort((D,E)=>D.order-E.order)),i("")}catch{i("Failed to load contact stages")}finally{n(!1)}},g=()=>{d(null),h({stageName:"",description:"",probability:0,color:"#007bff"}),l(!0)},b=k=>{d(k),h({stageName:k.stageName,description:k.description,probability:k.probability,color:k.color}),l(!0)},y=async k=>{k.preventDefault();try{const S=c?`/api/crm/contact-stages/${c._id}`:"/api/crm/contact-stages";(await fetch(S,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:m,financialYear:p,order:c?c.order:e.length+1})})).ok?(await v(),l(!1),i("")):i("Failed to save contact stage")}catch{i("Failed to save contact stage")}},C=async k=>{if(window.confirm("Are you sure you want to delete this contact stage?"))try{(await fetch(`/api/crm/contact-stages/${k}`,{method:"DELETE"})).ok?(await v(),i("")):i("Failed to delete contact stage")}catch{i("Failed to delete contact stage")}},w=async(k,S)=>{try{(await fetch(`/api/crm/contact-stages/${k}/move`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({direction:S})})).ok?await v():i("Failed to reorder contact stage")}catch{i("Failed to reorder contact stage")}};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsx("h4",{className:"card-title mb-0",children:"Contact Stages Management"}),a.jsxs("button",{className:"btn btn-primary",onClick:g,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Contact Stage"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Order"}),a.jsx("th",{children:"Stage Name"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Probability %"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map((k,S)=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("span",{className:"me-2",children:k.order}),a.jsxs("div",{className:"btn-group-vertical btn-group-sm",children:[a.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>w(k._id,"up"),disabled:S===0,children:a.jsx("i",{className:"fas fa-chevron-up"})}),a.jsx("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>w(k._id,"down"),disabled:S===e.length-1,children:a.jsx("i",{className:"fas fa-chevron-down"})})]})]})}),a.jsx("td",{children:a.jsx("span",{className:"badge text-white",style:{backgroundColor:k.color},children:k.stageName})}),a.jsx("td",{children:k.description}),a.jsxs("td",{children:[k.probability,"%"]}),a.jsx("td",{children:a.jsx("span",{className:`badge ${k.isActive?"bg-success":"bg-secondary"}`,children:k.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(k.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>b(k),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>C(k._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},k._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Contact Stage":"Add Contact Stage"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:y,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Stage Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.stageName,onChange:k=>h({...u,stageName:k.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:k=>h({...u,description:k.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Probability (%)"}),a.jsx("input",{type:"number",className:"form-control",min:"0",max:"100",value:u.probability,onChange:k=>h({...u,probability:Number(k.target.value)}),required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Color"}),a.jsx("input",{type:"color",className:"form-control form-control-color",value:u.color,onChange:k=>h({...u,color:k.target.value})})]})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},LMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(""),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,h]=N.useState({industryName:"",category:"",description:""}),m=["Technology","Healthcare","Finance","Manufacturing","Retail","Education","Real Estate","Transportation","Energy","Media","Hospitality","Construction","Agriculture","Other"],p=localStorage.getItem("selectedCompanyId"),v=localStorage.getItem("financialYear");N.useEffect(()=>{g()},[]);const g=async()=>{n(!0);try{const D=await(await fetch(`/api/crm/industries?companyId=${p}&financialYear=${v}`)).json();t(D),i("")}catch{i("Failed to load industries")}finally{n(!1)}},b=()=>{d(null),h({industryName:"",category:"",description:""}),l(!0)},y=S=>{d(S),h({industryName:S.industryName,category:S.category,description:S.description}),l(!0)},C=async S=>{S.preventDefault();try{const D=c?`/api/crm/industries/${c._id}`:"/api/crm/industries";(await fetch(D,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:p,financialYear:v})})).ok?(await g(),l(!1),i("")):i("Failed to save industry")}catch{i("Failed to save industry")}},w=async S=>{if(window.confirm("Are you sure you want to delete this industry?"))try{(await fetch(`/api/crm/industries/${S}`,{method:"DELETE"})).ok?(await g(),i("")):i("Failed to delete industry")}catch{i("Failed to delete industry")}},k=S=>({Technology:"bg-primary",Healthcare:"bg-success",Finance:"bg-warning",Manufacturing:"bg-info",Retail:"bg-secondary",Education:"bg-primary","Real Estate":"bg-success",Transportation:"bg-info",Energy:"bg-warning",Media:"bg-secondary",Hospitality:"bg-primary",Construction:"bg-info",Agriculture:"bg-success",Other:"bg-dark"})[S]||"bg-secondary";return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-building me-2"}),"Industry Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:b,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Industry"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Industry Name"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(S=>a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:S.industryName}),a.jsx("td",{children:a.jsx("span",{className:`badge ${k(S.category)}`,children:S.category})}),a.jsx("td",{children:S.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${S.isActive?"bg-success":"bg-secondary"}`,children:S.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(S.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>y(S),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>w(S._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},S._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Industry":"Add Industry"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:C,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Industry Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.industryName,onChange:S=>h({...u,industryName:S.target.value}),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:u.category,onChange:S=>h({...u,category:S.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Category"}),m.map(S=>a.jsx("option",{value:S,children:S},S))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:S=>h({...u,description:S.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},BMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(""),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,h]=N.useState({callType:"",purpose:"",outcome:"",description:""}),m=["Inbound","Outbound","Missed","Voicemail"],p=["Sales","Support","Follow-up","Demo","Meeting","Consultation","Other"],v=["Successful","No Answer","Busy","Follow-up Required","Completed","Cancelled","Rescheduled"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");N.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const L=await(await fetch(`/api/crm/calls?companyId=${g}&financialYear=${b}`)).json();t(L),i("")}catch{i("Failed to load calls")}finally{n(!1)}},C=()=>{d(null),h({callType:"",purpose:"",outcome:"",description:""}),l(!0)},w=A=>{d(A),h({callType:A.callType,purpose:A.purpose,outcome:A.outcome,description:A.description}),l(!0)},k=async A=>{A.preventDefault();try{const L=c?`/api/crm/calls/${c._id}`:"/api/crm/calls";(await fetch(L,{method:c?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...u,companyId:g,financialYear:b})})).ok?(await y(),l(!1),i("")):i("Failed to save call")}catch{i("Failed to save call")}},S=async A=>{if(window.confirm("Are you sure you want to delete this call setting?"))try{(await fetch(`/api/crm/calls/${A}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete call")}catch{i("Failed to delete call")}},D=A=>{switch(A){case"Inbound":return"fas fa-phone-alt text-success";case"Outbound":return"fas fa-phone text-primary";case"Missed":return"fas fa-phone-slash text-danger";case"Voicemail":return"fas fa-voicemail text-warning";default:return"fas fa-phone"}},E=A=>{switch(A){case"Successful":case"Completed":return"bg-success";case"Follow-up Required":case"Rescheduled":return"bg-warning";case"No Answer":case"Busy":case"Cancelled":return"bg-danger";default:return"bg-secondary"}},T=A=>{switch(A){case"Sales":return"bg-success";case"Support":return"bg-info";case"Follow-up":return"bg-warning";case"Demo":return"bg-primary";case"Meeting":return"bg-secondary";default:return"bg-dark"}};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-phone me-2"}),"Call Settings Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:C,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Call Setting"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Call Type"}),a.jsx("th",{children:"Purpose"}),a.jsx("th",{children:"Outcome"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Created Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(A=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{className:"d-flex align-items-center",children:[a.jsx("i",{className:D(A.callType)}),a.jsx("span",{className:"ms-2",children:A.callType})]})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${T(A.purpose)}`,children:A.purpose})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${E(A.outcome)}`,children:A.outcome})}),a.jsx("td",{children:A.description}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A.isActive?"bg-success":"bg-secondary"}`,children:A.isActive?"Active":"Inactive"})}),a.jsx("td",{children:new Date(A.createdAt).toLocaleDateString()}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>w(A),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(A._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},A._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Call Setting":"Add Call Setting"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:k,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Call Type"}),a.jsxs("select",{className:"form-select",value:u.callType,onChange:A=>h({...u,callType:A.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Call Type"}),m.map(A=>a.jsx("option",{value:A,children:A},A))]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Purpose"}),a.jsxs("select",{className:"form-select",value:u.purpose,onChange:A=>h({...u,purpose:A.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Purpose"}),p.map(A=>a.jsx("option",{value:A,children:A},A))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Outcome"}),a.jsxs("select",{className:"form-select",value:u.outcome,onChange:A=>h({...u,outcome:A.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Outcome"}),v.map(A=>a.jsx("option",{value:A,children:A},A))]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.description,onChange:A=>h({...u,description:A.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},UMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState(""),[c,d]=N.useState(!1),[u,h]=N.useState(null),[m,p]=N.useState({milestoneName:"",description:"",projectId:"",dueDate:"",status:"Pending",priority:"Medium",deliverables:"",budget:"",completionPercentage:0}),v=["Pending","In Progress","Completed","Delayed","Cancelled"],g=["Low","Medium","High","Critical"],b=localStorage.getItem("selectedCompanyId"),y=localStorage.getItem("financialYear");N.useEffect(()=>{C(),w()},[]);const C=async()=>{i(!0);try{const O=await(await fetch(`/api/milestones?companyId=${b}&financialYear=${y}`)).json();t(O),l("")}catch{l("Failed to load milestones")}finally{i(!1)}},w=async()=>{try{const O=await(await fetch(`/api/projects?companyId=${b}&financialYear=${y}`)).json();n(O)}catch{console.error("Failed to load projects")}},k=()=>{h(null),p({milestoneName:"",description:"",projectId:"",dueDate:"",status:"Pending",priority:"Medium",deliverables:"",budget:"",completionPercentage:0}),d(!0)},S=P=>{h(P),p({milestoneName:P.milestoneName,description:P.description,projectId:P.projectId._id||P.projectId,dueDate:P.dueDate?P.dueDate.split("T")[0]:"",status:P.status,priority:P.priority,deliverables:P.deliverables.join(`
`),budget:P.budget,completionPercentage:P.completionPercentage}),d(!0)},D=async P=>{P.preventDefault();try{const O=u?`/api/milestones/${u._id}`:"/api/milestones",Z=u?"PUT":"POST",z={...m,deliverables:m.deliverables.split(`
`).filter(B=>B.trim()),companyId:b,financialYear:y};(await fetch(O,{method:Z,headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).ok?(await C(),d(!1),l("")):l("Failed to save milestone")}catch{l("Failed to save milestone")}},E=async P=>{if(window.confirm("Are you sure you want to delete this milestone?"))try{(await fetch(`/api/milestones/${P}`,{method:"DELETE"})).ok?(await C(),l("")):l("Failed to delete milestone")}catch{l("Failed to delete milestone")}},T=P=>({Pending:"bg-secondary","In Progress":"bg-primary",Completed:"bg-success",Delayed:"bg-warning",Cancelled:"bg-danger"})[P]||"bg-secondary",A=P=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[P]||"bg-secondary",L=P=>P?new Date(P)<new Date:!1;return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-flag-checkered me-2"}),"Milestones Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:k,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Milestone"]})]}),a.jsxs("div",{className:"card-body",children:[o&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:o}),s?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Milestone Name"}),a.jsx("th",{children:"Project"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Progress"}),a.jsx("th",{children:"Due Date"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Deliverables"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(P=>a.jsxs("tr",{className:L(P.dueDate)&&P.status!=="Completed"?"table-danger":"",children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:P.milestoneName}),P.description&&a.jsxs("div",{className:"text-muted small",children:[P.description.substring(0,50),"..."]})]})}),a.jsx("td",{children:P.projectId?.projectName||"No Project"}),a.jsx("td",{children:a.jsx("span",{className:`badge ${T(P.status)}`,children:P.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A(P.priority)}`,children:P.priority})}),a.jsx("td",{children:a.jsx("div",{className:"progress",style:{height:"20px",width:"100px"},children:a.jsxs("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${P.completionPercentage}%`},children:[P.completionPercentage,"%"]})})}),a.jsx("td",{children:P.dueDate?a.jsxs("div",{children:[new Date(P.dueDate).toLocaleDateString(),L(P.dueDate)&&P.status!=="Completed"&&a.jsxs("div",{className:"text-danger small",children:[a.jsx("i",{className:"fas fa-exclamation-triangle"})," Overdue"]})]}):"N/A"}),a.jsx("td",{children:P.budget?`$${Number(P.budget).toLocaleString()}`:"N/A"}),a.jsx("td",{children:a.jsxs("span",{className:"badge bg-info",children:[P.deliverables?.length||0," items"]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>S(P),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>E(P._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},P._id))})]})})]})]})})}),c&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:u?"Edit Milestone":"Add Milestone"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(!1)})]}),a.jsxs("form",{onSubmit:D,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Milestone Name"}),a.jsx("input",{type:"text",className:"form-control",value:m.milestoneName,onChange:P=>p({...m,milestoneName:P.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project"}),a.jsxs("select",{className:"form-select",value:m.projectId,onChange:P=>p({...m,projectId:P.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Project"}),r.map(P=>a.jsx("option",{value:P._id,children:P.projectName},P._id))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:m.description,onChange:P=>p({...m,description:P.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:m.status,onChange:P=>p({...m,status:P.target.value}),required:!0,children:v.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:m.priority,onChange:P=>p({...m,priority:P.target.value}),required:!0,children:g.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Due Date"}),a.jsx("input",{type:"date",className:"form-control",value:m.dueDate,onChange:P=>p({...m,dueDate:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Budget ($)"}),a.jsx("input",{type:"number",className:"form-control",value:m.budget,onChange:P=>p({...m,budget:P.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Completion Percentage"}),a.jsx("input",{type:"range",className:"form-range",min:"0",max:"100",value:m.completionPercentage,onChange:P=>p({...m,completionPercentage:P.target.value})}),a.jsxs("div",{className:"text-center",children:[m.completionPercentage,"%"]})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Deliverables (one per line)"}),a.jsx("textarea",{className:"form-control",rows:"4",value:m.deliverables,onChange:P=>p({...m,deliverables:P.target.value}),placeholder:`Design mockups
Database schema
API documentation`})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Create"})]})]})]})})})]})},$Me=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState(""),[c,d]=N.useState(!1),[u,h]=N.useState(null),[m,p]=N.useState({taskName:"",description:"",projectId:"",assignedTo:"",status:"To Do",priority:"Medium",dueDate:"",estimatedHours:"",actualHours:"",category:""}),v=["To Do","In Progress","Review","Testing","Done","Blocked"],g=["Low","Medium","High","Critical"],b=["Development","Testing","Design","Documentation","Bug Fix","Research","Other"],y=localStorage.getItem("selectedCompanyId"),C=localStorage.getItem("financialYear");N.useEffect(()=>{w(),k()},[]);const w=async()=>{i(!0);try{const Z=await(await fetch(`/api/tasks?companyId=${y}&financialYear=${C}`)).json();t(Z),l("")}catch{l("Failed to load tasks")}finally{i(!1)}},k=async()=>{try{const Z=await(await fetch(`/api/projects?companyId=${y}&financialYear=${C}`)).json();n(Z)}catch{console.error("Failed to load projects")}},S=()=>{h(null),p({taskName:"",description:"",projectId:"",assignedTo:"",status:"To Do",priority:"Medium",dueDate:"",estimatedHours:"",actualHours:"",category:""}),d(!0)},D=O=>{h(O),p({taskName:O.taskName,description:O.description,projectId:O.projectId._id||O.projectId,assignedTo:O.assignedTo,status:O.status,priority:O.priority,dueDate:O.dueDate?O.dueDate.split("T")[0]:"",estimatedHours:O.estimatedHours,actualHours:O.actualHours,category:O.category}),d(!0)},E=async O=>{O.preventDefault();try{const Z=u?`/api/tasks/${u._id}`:"/api/tasks";(await fetch(Z,{method:u?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...m,companyId:y,financialYear:C})})).ok?(await w(),d(!1),l("")):l("Failed to save task")}catch{l("Failed to save task")}},T=async O=>{if(window.confirm("Are you sure you want to delete this task?"))try{(await fetch(`/api/tasks/${O}`,{method:"DELETE"})).ok?(await w(),l("")):l("Failed to delete task")}catch{l("Failed to delete task")}},A=O=>({"To Do":"bg-secondary","In Progress":"bg-primary",Review:"bg-warning",Testing:"bg-info",Done:"bg-success",Blocked:"bg-danger"})[O]||"bg-secondary",L=O=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[O]||"bg-secondary",P=O=>O?new Date(O)<new Date:!1;return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-tasks me-2"}),"Tasks Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:S,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Task"]})]}),a.jsxs("div",{className:"card-body",children:[o&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:o}),s?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Task Name"}),a.jsx("th",{children:"Project"}),a.jsx("th",{children:"Assigned To"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Category"}),a.jsx("th",{children:"Due Date"}),a.jsx("th",{children:"Hours"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(O=>a.jsxs("tr",{className:P(O.dueDate)&&O.status!=="Done"?"table-danger":"",children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:O.taskName}),O.description&&a.jsxs("div",{className:"text-muted small",children:[O.description.substring(0,50),"..."]})]})}),a.jsx("td",{children:O.projectId?.projectName||"No Project"}),a.jsx("td",{children:O.assignedTo}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A(O.status)}`,children:O.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${L(O.priority)}`,children:O.priority})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:O.category})}),a.jsx("td",{children:O.dueDate?a.jsxs("div",{children:[new Date(O.dueDate).toLocaleDateString(),P(O.dueDate)&&O.status!=="Done"&&a.jsxs("div",{className:"text-danger small",children:[a.jsx("i",{className:"fas fa-exclamation-triangle"})," Overdue"]})]}):"N/A"}),a.jsx("td",{children:a.jsxs("div",{className:"small",children:[a.jsxs("div",{children:["Est: ",O.estimatedHours||0,"h"]}),a.jsxs("div",{children:["Act: ",O.actualHours||0,"h"]})]})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>D(O),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>T(O._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},O._id))})]})})]})]})})}),c&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:u?"Edit Task":"Add Task"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>d(!1)})]}),a.jsxs("form",{onSubmit:E,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Task Name"}),a.jsx("input",{type:"text",className:"form-control",value:m.taskName,onChange:O=>p({...m,taskName:O.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project"}),a.jsxs("select",{className:"form-select",value:m.projectId,onChange:O=>p({...m,projectId:O.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Project"}),r.map(O=>a.jsx("option",{value:O._id,children:O.projectName},O._id))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:m.description,onChange:O=>p({...m,description:O.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:m.status,onChange:O=>p({...m,status:O.target.value}),required:!0,children:v.map(O=>a.jsx("option",{value:O,children:O},O))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:m.priority,onChange:O=>p({...m,priority:O.target.value}),required:!0,children:g.map(O=>a.jsx("option",{value:O,children:O},O))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:m.category,onChange:O=>p({...m,category:O.target.value}),children:[a.jsx("option",{value:"",children:"Select Category"}),b.map(O=>a.jsx("option",{value:O,children:O},O))]})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Assigned To"}),a.jsx("input",{type:"text",className:"form-control",value:m.assignedTo,onChange:O=>p({...m,assignedTo:O.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Due Date"}),a.jsx("input",{type:"date",className:"form-control",value:m.dueDate,onChange:O=>p({...m,dueDate:O.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Estimated Hours"}),a.jsx("input",{type:"number",className:"form-control",value:m.estimatedHours,onChange:O=>p({...m,estimatedHours:O.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Actual Hours"}),a.jsx("input",{type:"number",className:"form-control",value:m.actualHours,onChange:O=>p({...m,actualHours:O.target.value})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>d(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:u?"Update":"Create"})]})]})]})})})]})},VMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState([]),[o,l]=N.useState(!1),[c,d]=N.useState(""),[u,h]=N.useState(!1),[m,p]=N.useState(null),[v,g]=N.useState(!1),[b,y]=N.useState(0),[C,w]=N.useState({projectId:"",taskId:"",description:"",startTime:"",endTime:"",hours:"",date:new Date().toISOString().split("T")[0],billable:!0}),k=localStorage.getItem("selectedCompanyId"),S=localStorage.getItem("financialYear");N.useEffect(()=>{D(),E(),T()},[]),N.useEffect(()=>{let U=null;return v?U=setInterval(()=>{y(J=>J+1)},1e3):!v&&b!==0&&clearInterval(U),()=>clearInterval(U)},[v,b]);const D=async()=>{l(!0);try{const J=await(await fetch(`/api/time-entries?companyId=${k}&financialYear=${S}`)).json();t(J),d("")}catch{d("Failed to load time entries")}finally{l(!1)}},E=async()=>{try{const J=await(await fetch(`/api/projects?companyId=${k}&financialYear=${S}`)).json();n(J)}catch{console.error("Failed to load projects")}},T=async()=>{try{const J=await(await fetch(`/api/tasks?companyId=${k}&financialYear=${S}`)).json();i(J)}catch{console.error("Failed to load tasks")}},A=()=>{g(!0),y(0);const U=new Date;w({...C,startTime:U.toTimeString().slice(0,5),date:U.toISOString().split("T")[0]})},L=()=>{g(!1);const U=new Date,J=(b/3600).toFixed(2);w({...C,endTime:U.toTimeString().slice(0,5),hours:J}),h(!0)},P=U=>{const J=Math.floor(U/3600),Y=Math.floor(U%3600/60),oe=U%60;return`${J.toString().padStart(2,"0")}:${Y.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}`},O=()=>{p(null),w({projectId:"",taskId:"",description:"",startTime:"",endTime:"",hours:"",date:new Date().toISOString().split("T")[0],billable:!0}),h(!0)},Z=U=>{p(U),w({projectId:U.projectId._id||U.projectId,taskId:U.taskId?._id||U.taskId||"",description:U.description,startTime:U.startTime,endTime:U.endTime,hours:U.hours,date:U.date?U.date.split("T")[0]:"",billable:U.billable}),h(!0)},z=async U=>{U.preventDefault();try{const J=m?`/api/time-entries/${m._id}`:"/api/time-entries";(await fetch(J,{method:m?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...C,companyId:k,financialYear:S})})).ok?(await D(),h(!1),d(""),y(0)):d("Failed to save time entry")}catch{d("Failed to save time entry")}},K=async U=>{if(window.confirm("Are you sure you want to delete this time entry?"))try{(await fetch(`/api/time-entries/${U}`,{method:"DELETE"})).ok?(await D(),d("")):d("Failed to delete time entry")}catch{d("Failed to delete time entry")}},B=()=>e.reduce((U,J)=>U+parseFloat(J.hours||0),0).toFixed(2),Q=()=>e.filter(U=>U.billable).reduce((U,J)=>U+parseFloat(J.hours||0),0).toFixed(2);return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-12",children:a.jsx("div",{className:"card",children:a.jsxs("div",{className:"card-body text-center",children:[a.jsx("h3",{className:"display-4 mb-3",children:P(b)}),a.jsxs("div",{className:"btn-group",children:[v?a.jsxs("button",{className:"btn btn-danger btn-lg",onClick:L,children:[a.jsx("i",{className:"fas fa-stop me-2"}),"Stop Timer"]}):a.jsxs("button",{className:"btn btn-success btn-lg",onClick:A,children:[a.jsx("i",{className:"fas fa-play me-2"}),"Start Timer"]}),a.jsxs("button",{className:"btn btn-secondary btn-lg",onClick:()=>{y(0),g(!1)},children:[a.jsx("i",{className:"fas fa-redo me-2"}),"Reset"]})]})]})})})}),a.jsxs("div",{className:"row mb-4",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("div",{className:"card bg-primary text-white",children:a.jsxs("div",{className:"card-body",children:[a.jsx("h5",{className:"card-title",children:"Total Hours"}),a.jsxs("h3",{children:[B(),"h"]})]})})}),a.jsx("div",{className:"col-md-4",children:a.jsx("div",{className:"card bg-success text-white",children:a.jsxs("div",{className:"card-body",children:[a.jsx("h5",{className:"card-title",children:"Billable Hours"}),a.jsxs("h3",{children:[Q(),"h"]})]})})}),a.jsx("div",{className:"col-md-4",children:a.jsx("div",{className:"card bg-info text-white",children:a.jsxs("div",{className:"card-body",children:[a.jsx("h5",{className:"card-title",children:"Entries"}),a.jsx("h3",{children:e.length})]})})})]}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-clock me-2"}),"Time Tracking"]}),a.jsxs("button",{className:"btn btn-primary",onClick:O,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Entry"]})]}),a.jsxs("div",{className:"card-body",children:[c&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:c}),o?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Project"}),a.jsx("th",{children:"Task"}),a.jsx("th",{children:"Description"}),a.jsx("th",{children:"Start Time"}),a.jsx("th",{children:"End Time"}),a.jsx("th",{children:"Hours"}),a.jsx("th",{children:"Billable"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(U=>a.jsxs("tr",{children:[a.jsx("td",{children:new Date(U.date).toLocaleDateString()}),a.jsx("td",{children:U.projectId?.projectName||"No Project"}),a.jsx("td",{children:U.taskId?.taskName||"No Task"}),a.jsx("td",{children:U.description}),a.jsx("td",{children:U.startTime}),a.jsx("td",{children:U.endTime}),a.jsxs("td",{className:"fw-bold",children:[U.hours,"h"]}),a.jsx("td",{children:a.jsx("span",{className:`badge ${U.billable?"bg-success":"bg-secondary"}`,children:U.billable?"Billable":"Non-billable"})}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>Z(U),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>K(U._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},U._id))})]})})]})]})})}),u&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:m?"Edit Time Entry":"Add Time Entry"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>h(!1)})]}),a.jsxs("form",{onSubmit:z,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project"}),a.jsxs("select",{className:"form-select",value:C.projectId,onChange:U=>w({...C,projectId:U.target.value}),required:!0,children:[a.jsx("option",{value:"",children:"Select Project"}),r.map(U=>a.jsx("option",{value:U._id,children:U.projectName},U._id))]})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Task (Optional)"}),a.jsxs("select",{className:"form-select",value:C.taskId,onChange:U=>w({...C,taskId:U.target.value}),children:[a.jsx("option",{value:"",children:"Select Task"}),s.filter(U=>U.projectId._id===C.projectId).map(U=>a.jsx("option",{value:U._id,children:U.taskName},U._id))]})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:C.description,onChange:U=>w({...C,description:U.target.value}),required:!0})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Date"}),a.jsx("input",{type:"date",className:"form-control",value:C.date,onChange:U=>w({...C,date:U.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Start Time"}),a.jsx("input",{type:"time",className:"form-control",value:C.startTime,onChange:U=>w({...C,startTime:U.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"End Time"}),a.jsx("input",{type:"time",className:"form-control",value:C.endTime,onChange:U=>w({...C,endTime:U.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Hours"}),a.jsx("input",{type:"number",step:"0.25",className:"form-control",value:C.hours,onChange:U=>w({...C,hours:U.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsx("div",{className:"mb-3",children:a.jsxs("div",{className:"form-check mt-4",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",checked:C.billable,onChange:U=>w({...C,billable:U.target.checked})}),a.jsx("label",{className:"form-check-label",children:"Billable"})]})})})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:m?"Update":"Create"})]})]})]})})})]})},qMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(""),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,h]=N.useState({projectName:"",description:"",clientName:"",startDate:"",endDate:"",budget:"",status:"Planning",priority:"Medium",projectManager:"",teamMembers:"",technologies:"",category:""}),m=["Planning","In Progress","Testing","Completed","On Hold","Cancelled"],p=["Low","Medium","High","Critical"],v=["Web Development","Mobile App","Desktop App","API Development","Data Analysis","Other"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");N.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const L=await(await fetch(`/api/projects?companyId=${g}&financialYear=${b}`)).json();t(L),i("")}catch{i("Failed to load projects")}finally{n(!1)}},C=()=>{d(null),h({projectName:"",description:"",clientName:"",startDate:"",endDate:"",budget:"",status:"Planning",priority:"Medium",projectManager:"",teamMembers:"",technologies:"",category:""}),l(!0)},w=A=>{d(A),h({projectName:A.projectName,description:A.description,clientName:A.clientName,startDate:A.startDate?A.startDate.split("T")[0]:"",endDate:A.endDate?A.endDate.split("T")[0]:"",budget:A.budget,status:A.status,priority:A.priority,projectManager:A.projectManager,teamMembers:A.teamMembers.join(", "),technologies:A.technologies.join(", "),category:A.category}),l(!0)},k=async A=>{A.preventDefault();try{const L=c?`/api/projects/${c._id}`:"/api/projects",P=c?"PUT":"POST",O={...u,teamMembers:u.teamMembers.split(",").map(z=>z.trim()).filter(z=>z),technologies:u.technologies.split(",").map(z=>z.trim()).filter(z=>z),companyId:g,financialYear:b};(await fetch(L,{method:P,headers:{"Content-Type":"application/json"},body:JSON.stringify(O)})).ok?(await y(),l(!1),i("")):i("Failed to save project")}catch{i("Failed to save project")}},S=async A=>{if(window.confirm("Are you sure you want to delete this project?"))try{(await fetch(`/api/projects/${A}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete project")}catch{i("Failed to delete project")}},D=A=>({Planning:"bg-info","In Progress":"bg-primary",Testing:"bg-warning",Completed:"bg-success","On Hold":"bg-secondary",Cancelled:"bg-danger"})[A]||"bg-secondary",E=A=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[A]||"bg-secondary",T=(A,L)=>{if(!A||!L)return 0;const P=new Date(A),O=new Date(L),Z=new Date;if(Z<P)return 0;if(Z>O)return 100;const z=O-P,K=Z-P;return Math.round(K/z*100)};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-project-diagram me-2"}),"Projects Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:C,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Project"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Project Name"}),a.jsx("th",{children:"Client"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Progress"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Start Date"}),a.jsx("th",{children:"End Date"}),a.jsx("th",{children:"Project Manager"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(A=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:A.projectName}),A.category&&a.jsx("div",{className:"text-muted small",children:A.category})]})}),a.jsx("td",{children:A.clientName}),a.jsx("td",{children:a.jsx("span",{className:`badge ${D(A.status)}`,children:A.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${E(A.priority)}`,children:A.priority})}),a.jsx("td",{children:a.jsx("div",{className:"progress",style:{height:"20px"},children:a.jsxs("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${T(A.startDate,A.endDate)}%`},children:[T(A.startDate,A.endDate),"%"]})})}),a.jsx("td",{children:A.budget?`$${Number(A.budget).toLocaleString()}`:"N/A"}),a.jsx("td",{children:A.startDate?new Date(A.startDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:A.endDate?new Date(A.endDate).toLocaleDateString():"N/A"}),a.jsx("td",{children:A.projectManager}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>w(A),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(A._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},A._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Project":"Add Project"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:k,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.projectName,onChange:A=>h({...u,projectName:A.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Client Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.clientName,onChange:A=>h({...u,clientName:A.target.value}),required:!0})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:A=>h({...u,description:A.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:u.status,onChange:A=>h({...u,status:A.target.value}),required:!0,children:m.map(A=>a.jsx("option",{value:A,children:A},A))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:u.priority,onChange:A=>h({...u,priority:A.target.value}),required:!0,children:p.map(A=>a.jsx("option",{value:A,children:A},A))})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Category"}),a.jsxs("select",{className:"form-select",value:u.category,onChange:A=>h({...u,category:A.target.value}),children:[a.jsx("option",{value:"",children:"Select Category"}),v.map(A=>a.jsx("option",{value:A,children:A},A))]})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Start Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.startDate,onChange:A=>h({...u,startDate:A.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"End Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.endDate,onChange:A=>h({...u,endDate:A.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Budget ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.budget,onChange:A=>h({...u,budget:A.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Project Manager"}),a.jsx("input",{type:"text",className:"form-control",value:u.projectManager,onChange:A=>h({...u,projectManager:A.target.value})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Team Members (comma-separated)"}),a.jsx("input",{type:"text",className:"form-control",value:u.teamMembers,onChange:A=>h({...u,teamMembers:A.target.value}),placeholder:"John Doe, Jane Smith, Bob Johnson"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Technologies (comma-separated)"}),a.jsx("input",{type:"text",className:"form-control",value:u.technologies,onChange:A=>h({...u,technologies:A.target.value}),placeholder:"React, Node.js, MongoDB"})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},zMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(""),[o,l]=N.useState(!1),[c,d]=N.useState(null),[u,h]=N.useState({campaignName:"",description:"",campaignType:"Email",status:"Draft",startDate:"",endDate:"",budget:"",targetAudience:"",channels:"",objectives:"",expectedROI:"",actualROI:"",leads:0,conversions:0,clickThroughRate:0,openRate:0,assignedTo:"",priority:"Medium"}),m=["Email","Social Media","Google Ads","Facebook Ads","Content Marketing","Print","TV/Radio","Event","Influencer","SEO","Other"],p=["Draft","Scheduled","Active","Paused","Completed","Cancelled"],v=["Low","Medium","High","Critical"],g=localStorage.getItem("selectedCompanyId"),b=localStorage.getItem("financialYear");N.useEffect(()=>{y()},[]);const y=async()=>{n(!0);try{const O=await(await fetch(`/api/campaigns?companyId=${g}&financialYear=${b}`)).json();t(O),i("")}catch{i("Failed to load campaigns")}finally{n(!1)}},C=()=>{d(null),h({campaignName:"",description:"",campaignType:"Email",status:"Draft",startDate:"",endDate:"",budget:"",targetAudience:"",channels:"",objectives:"",expectedROI:"",actualROI:"",leads:0,conversions:0,clickThroughRate:0,openRate:0,assignedTo:"",priority:"Medium"}),l(!0)},w=P=>{d(P),h({campaignName:P.campaignName,description:P.description,campaignType:P.campaignType,status:P.status,startDate:P.startDate?P.startDate.split("T")[0]:"",endDate:P.endDate?P.endDate.split("T")[0]:"",budget:P.budget,targetAudience:P.targetAudience,channels:P.channels.join(", "),objectives:P.objectives.join(`
`),expectedROI:P.expectedROI,actualROI:P.actualROI,leads:P.leads,conversions:P.conversions,clickThroughRate:P.clickThroughRate,openRate:P.openRate,assignedTo:P.assignedTo,priority:P.priority}),l(!0)},k=async P=>{P.preventDefault();try{const O=c?`/api/campaigns/${c._id}`:"/api/campaigns",Z=c?"PUT":"POST",z={...u,channels:u.channels.split(",").map(B=>B.trim()).filter(B=>B),objectives:u.objectives.split(`
`).map(B=>B.trim()).filter(B=>B),companyId:g,financialYear:b};(await fetch(O,{method:Z,headers:{"Content-Type":"application/json"},body:JSON.stringify(z)})).ok?(await y(),l(!1),i("")):i("Failed to save campaign")}catch{i("Failed to save campaign")}},S=async P=>{if(window.confirm("Are you sure you want to delete this campaign?"))try{(await fetch(`/api/campaigns/${P}`,{method:"DELETE"})).ok?(await y(),i("")):i("Failed to delete campaign")}catch{i("Failed to delete campaign")}},D=P=>({Draft:"bg-secondary",Scheduled:"bg-info",Active:"bg-success",Paused:"bg-warning",Completed:"bg-primary",Cancelled:"bg-danger"})[P]||"bg-secondary",E=P=>({Low:"bg-success",Medium:"bg-warning",High:"bg-danger",Critical:"bg-dark"})[P]||"bg-secondary",T=(P,O)=>!P||!O||O===0?0:((P-O)/O*100).toFixed(2),A=(P,O)=>!P||!O||O===0?0:(P/O*100).toFixed(2),L=(P,O)=>{const Z=new Date,z=new Date(P),K=new Date(O);return Z>=z&&Z<=K};return a.jsxs("div",{className:"container-fluid py-4",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-bullhorn me-2"}),"Campaign Management"]}),a.jsxs("button",{className:"btn btn-primary",onClick:C,children:[a.jsx("i",{className:"fas fa-plus me-2"}),"Add Campaign"]})]}),a.jsxs("div",{className:"card-body",children:[s&&a.jsx("div",{className:"alert alert-danger",role:"alert",children:s}),r?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Campaign Name"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Priority"}),a.jsx("th",{children:"Period"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Leads"}),a.jsx("th",{children:"Conversions"}),a.jsx("th",{children:"ROI"}),a.jsx("th",{children:"Assigned To"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:e.map(P=>a.jsxs("tr",{className:L(P.startDate,P.endDate)&&P.status==="Active"?"table-success":"",children:[a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("strong",{children:P.campaignName}),P.description&&a.jsxs("div",{className:"text-muted small",children:[P.description.substring(0,50),"..."]})]})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:P.campaignType})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${D(P.status)}`,children:P.status})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${E(P.priority)}`,children:P.priority})}),a.jsx("td",{children:a.jsxs("div",{className:"small",children:[a.jsxs("div",{children:["Start: ",P.startDate?new Date(P.startDate).toLocaleDateString():"N/A"]}),a.jsxs("div",{children:["End: ",P.endDate?new Date(P.endDate).toLocaleDateString():"N/A"]})]})}),a.jsx("td",{children:P.budget?`$${Number(P.budget).toLocaleString()}`:"N/A"}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:P.leads||0})}),a.jsx("td",{children:a.jsxs("div",{children:[a.jsx("span",{className:"badge bg-success",children:P.conversions||0}),a.jsxs("div",{className:"small text-muted",children:[A(P.conversions,P.leads),"% rate"]})]})}),a.jsx("td",{children:a.jsxs("div",{children:[a.jsxs("div",{className:"fw-bold",children:[T(P.actualROI,P.budget),"%"]}),a.jsxs("div",{className:"small text-muted",children:["$",P.actualROI?Number(P.actualROI).toLocaleString():0]})]})}),a.jsx("td",{children:P.assignedTo}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-outline-primary me-2",onClick:()=>w(P),children:a.jsx("i",{className:"fas fa-edit"})}),a.jsx("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>S(P._id),children:a.jsx("i",{className:"fas fa-trash"})})]})]},P._id))})]})})]})]})})}),o&&a.jsx("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Campaign":"Add Campaign"}),a.jsx("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),a.jsxs("form",{onSubmit:k,children:[a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-8",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Campaign Name"}),a.jsx("input",{type:"text",className:"form-control",value:u.campaignName,onChange:P=>h({...u,campaignName:P.target.value}),required:!0})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Campaign Type"}),a.jsx("select",{className:"form-select",value:u.campaignType,onChange:P=>h({...u,campaignType:P.target.value}),required:!0,children:m.map(P=>a.jsx("option",{value:P,children:P},P))})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Description"}),a.jsx("textarea",{className:"form-control",rows:"3",value:u.description,onChange:P=>h({...u,description:P.target.value})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsx("select",{className:"form-select",value:u.status,onChange:P=>h({...u,status:P.target.value}),required:!0,children:p.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Priority"}),a.jsx("select",{className:"form-select",value:u.priority,onChange:P=>h({...u,priority:P.target.value}),required:!0,children:v.map(P=>a.jsx("option",{value:P,children:P},P))})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Start Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.startDate,onChange:P=>h({...u,startDate:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"End Date"}),a.jsx("input",{type:"date",className:"form-control",value:u.endDate,onChange:P=>h({...u,endDate:P.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Budget ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.budget,onChange:P=>h({...u,budget:P.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Expected ROI ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.expectedROI,onChange:P=>h({...u,expectedROI:P.target.value})})]})}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Actual ROI ($)"}),a.jsx("input",{type:"number",className:"form-control",value:u.actualROI,onChange:P=>h({...u,actualROI:P.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Leads Generated"}),a.jsx("input",{type:"number",className:"form-control",value:u.leads,onChange:P=>h({...u,leads:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Conversions"}),a.jsx("input",{type:"number",className:"form-control",value:u.conversions,onChange:P=>h({...u,conversions:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Click Through Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:u.clickThroughRate,onChange:P=>h({...u,clickThroughRate:P.target.value})})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Open Rate (%)"}),a.jsx("input",{type:"number",step:"0.01",className:"form-control",value:u.openRate,onChange:P=>h({...u,openRate:P.target.value})})]})})]}),a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Target Audience"}),a.jsx("input",{type:"text",className:"form-control",value:u.targetAudience,onChange:P=>h({...u,targetAudience:P.target.value}),placeholder:"Demographics, interests, location, etc."})]})}),a.jsx("div",{className:"col-md-6",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Assigned To"}),a.jsx("input",{type:"text",className:"form-control",value:u.assignedTo,onChange:P=>h({...u,assignedTo:P.target.value})})]})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Channels (comma-separated)"}),a.jsx("input",{type:"text",className:"form-control",value:u.channels,onChange:P=>h({...u,channels:P.target.value}),placeholder:"Email, Facebook, Google Ads, Instagram"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Objectives (one per line)"}),a.jsx("textarea",{className:"form-control",rows:"4",value:u.objectives,onChange:P=>h({...u,objectives:P.target.value}),placeholder:`Increase brand awareness
Generate 100 leads
Achieve 5% conversion rate`})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),children:"Cancel"}),a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Create"})]})]})]})})})]})},HMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState({totalCampaigns:0,activeCampaigns:0,totalLeads:0,totalConversions:0,averageConversionRate:0,totalBudget:0,totalROI:0,topPerformingCampaign:null}),[o,l]=N.useState(!1),c=localStorage.getItem("selectedCompanyId"),d=localStorage.getItem("financialYear");N.useEffect(()=>{u()},[]);const u=async()=>{l(!0);try{const g=await(await fetch(`/api/campaigns?companyId=${c}&financialYear=${d}`)).json();t(g);const y=await(await fetch(`/api/leads?companyId=${c}&financialYear=${d}`)).json();n(y),h(g,y)}catch(v){console.error("Failed to load analytics data:",v)}finally{l(!1)}},h=(v,g)=>{const b=v.length,y=v.filter(T=>T.status==="Active").length,C=g.length,w=g.filter(T=>T.leadStatus==="Closed Won").length,k=C>0?(w/C*100).toFixed(2):0,S=v.reduce((T,A)=>T+(A.budget||0),0),D=v.reduce((T,A)=>T+(A.actualROI||0),0),E=v.reduce((T,A)=>{const L=A.leads>0?A.conversions/A.leads:0,P=T&&T.leads>0?T.conversions/T.leads:0;return L>P?A:T},null);i({totalCampaigns:b,activeCampaigns:y,totalLeads:C,totalConversions:w,averageConversionRate:k,totalBudget:S,totalROI:D,topPerformingCampaign:E})},m=v=>({Draft:"secondary",Scheduled:"info",Active:"success",Paused:"warning",Completed:"primary",Cancelled:"danger"})[v]||"secondary",p=(v,g)=>!v||!g||g===0?0:((v-g)/g*100).toFixed(2);return a.jsx("div",{className:"container-fluid py-4",children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("h4",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-chart-bar me-2"}),"Campaign Analytics"]})}),a.jsx("div",{className:"card-body",children:o?a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"spinner-border",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-primary text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Total Campaigns"}),a.jsx("h3",{className:"mb-0",children:s.totalCampaigns}),a.jsxs("small",{children:[s.activeCampaigns," Active"]})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-bullhorn fa-2x"})})]})})})}),a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-success text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Total Leads"}),a.jsx("h3",{className:"mb-0",children:s.totalLeads}),a.jsxs("small",{children:[s.totalConversions," Conversions"]})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-user-plus fa-2x"})})]})})})}),a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-warning text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Conversion Rate"}),a.jsxs("h3",{className:"mb-0",children:[s.averageConversionRate,"%"]}),a.jsx("small",{children:"Average across all campaigns"})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-percentage fa-2x"})})]})})})}),a.jsx("div",{className:"col-xl-3 col-md-6",children:a.jsx("div",{className:"card bg-info text-white",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"d-flex justify-content-between",children:[a.jsxs("div",{children:[a.jsx("h6",{className:"card-title",children:"Total ROI"}),a.jsxs("h3",{className:"mb-0",children:["$",s.totalROI.toLocaleString()]}),a.jsxs("small",{children:["Budget: $",s.totalBudget.toLocaleString()]})]}),a.jsx("div",{className:"align-self-center",children:a.jsx("i",{className:"fas fa-dollar-sign fa-2x"})})]})})})})]}),s.topPerformingCampaign&&a.jsx("div",{className:"row mb-4",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card border-success",children:[a.jsx("div",{className:"card-header bg-success text-white",children:a.jsxs("h5",{className:"card-title mb-0",children:[a.jsx("i",{className:"fas fa-trophy me-2"}),"Top Performing Campaign"]})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("strong",{children:"Campaign:"}),a.jsx("br",{}),s.topPerformingCampaign.campaignName]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("strong",{children:"Type:"}),a.jsx("br",{}),s.topPerformingCampaign.campaignType]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("strong",{children:"Leads:"}),a.jsx("br",{}),s.topPerformingCampaign.leads||0]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("strong",{children:"Conversions:"}),a.jsx("br",{}),s.topPerformingCampaign.conversions||0]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("strong",{children:"Conversion Rate:"}),a.jsx("br",{}),s.topPerformingCampaign.leads>0?(s.topPerformingCampaign.conversions/s.topPerformingCampaign.leads*100).toFixed(2):0,"%"]})]})})]})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsx("h5",{className:"card-title mb-0",children:"Campaign Performance Details"})}),a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-striped table-hover",children:[a.jsx("thead",{className:"table-dark",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Campaign Name"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Budget"}),a.jsx("th",{children:"Leads"}),a.jsx("th",{children:"Conversions"}),a.jsx("th",{children:"Conversion Rate"}),a.jsx("th",{children:"ROI"}),a.jsx("th",{children:"ROI %"})]})}),a.jsx("tbody",{children:e.map(v=>{const g=v.leads>0?(v.conversions/v.leads*100).toFixed(2):0;return a.jsxs("tr",{children:[a.jsx("td",{className:"fw-bold",children:v.campaignName}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-info",children:v.campaignType})}),a.jsx("td",{children:a.jsx("span",{className:`badge bg-${m(v.status)}`,children:v.status})}),a.jsxs("td",{children:["$",(v.budget||0).toLocaleString()]}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:v.leads||0})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-success",children:v.conversions||0})}),a.jsx("td",{children:a.jsxs("span",{className:`badge ${g>=10?"bg-success":g>=5?"bg-warning":"bg-secondary"}`,children:[g,"%"]})}),a.jsxs("td",{children:["$",(v.actualROI||0).toLocaleString()]}),a.jsx("td",{children:a.jsxs("span",{className:`badge ${p(v.actualROI,v.budget)>0?"bg-success":"bg-danger"}`,children:[p(v.actualROI,v.budget),"%"]})})]},v._id)})})]})})})]})})})]})})]})})})})};function WMe(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!0),o=localStorage.getItem("selectedCompanyId")||"",l=localStorage.getItem("financialYear")||"",[c,d]=N.useState(""),[u,h]=N.useState(""),[m,p]=N.useState(""),[v,g]=N.useState(""),[b,y]=N.useState("");N.useEffect(()=>{const K=e.filter(B=>{const Q=B.deliveryNumber?.toLowerCase().includes(c.toLowerCase())||B.soNumber?.toLowerCase().includes(c.toLowerCase())||B.customerName?.toLowerCase().includes(c.toLowerCase())||B.category?.toLowerCase().includes(c.toLowerCase())||B.deliveryLocation?.toLowerCase().includes(c.toLowerCase())||B.vehicleNumber?.toLowerCase().includes(c.toLowerCase())||B.driverName?.toLowerCase().includes(c.toLowerCase()),U=new Date(B.createdAt),J=u?new Date(u):null,Y=m?new Date(m):null,oe=(!J||U>=J)&&(!Y||U<=Y),M=!v||B.deliveryStatus===v,V=!b||B.deliveryType===b;return Q&&oe&&M&&V});n(K)},[c,u,m,v,b,e]);const[C,w]=N.useState(1),[k]=N.useState(10);N.useEffect(()=>{S()},[]);const S=()=>{i(!0),Oe.get("/api/del/salesdeliveries",{params:{companyId:o,financialYear:l}}).then(K=>{const B=K.data.sort((Q,U)=>new Date(U.createdAt)-new Date(Q.createdAt));t(B),n(B),i(!1)}).catch(K=>{console.error("Error fetching deliveries:",K),alert("Failed to fetch deliveries"),i(!1)})},D=C*k,E=D-k,T=r.slice(E,D),A=Math.ceil(r.length/k),L=K=>w(K),P=K=>`badge ${{Pending:"bg-warning","In Transit":"bg-info",Delivered:"bg-success",Cancelled:"bg-danger"}[K]||"bg-secondary"}`,O=K=>K==="Full"?"badge bg-success":"badge bg-warning",Z=K=>{const B=K.items.map((J,Y)=>`
      <tr>
        <td>${Y+1}</td>
        <td>${J.materialId}</td>
        <td>${J.description}</td>
        <td>${J.orderedQuantity}</td>
        <td>${J.deliveredQuantity}</td>
        <td>${J.pendingQuantity}</td>
        <td>${J.baseUnit}</td>
        <td>${J.price}</td>
        <td>${J.deliveryDate}</td>
        <td>${J.actualDeliveryDate}</td>
        <td>${J.note||""}</td>
      </tr>
    `).join(""),Q=`
      <html>
      <head>
        <title>Sales Delivery - ${K.deliveryNumber}</title>
        <style>
          body { font-family: Arial; padding: 20px; }
          table { width: 100%; border-collapse: collapse; margin-top: 10px; }
          th, td { border: 1px solid black; padding: 8px; text-align: left; font-size: 12px; }
          th { background-color: #f0f0f0; }
          .header-info { display: flex; justify-content: space-between; margin-bottom: 20px; }
          .status-badge { padding: 4px 8px; border-radius: 4px; color: white; font-weight: bold; }
          .status-delivered { background-color: #28a745; }
          .status-pending { background-color: #ffc107; color: black; }
          .status-transit { background-color: #17a2b8; }
          .status-cancelled { background-color: #dc3545; }
        </style>
      </head>
      <body>
        <div class="header-info">
          <div>
            <h2>Sales Delivery Details</h2>
            <p><strong>Delivery Number:</strong> ${K.deliveryNumber}</p>
            <p><strong>SO Reference:</strong> ${K.soNumber}</p>
            <p><strong>Customer:</strong> ${K.customerName}</p>
            <p><strong>Category:</strong> ${K.category}</p>
          </div>
          <div>
            <p><strong>Delivery Date:</strong> ${K.deliveryDate}</p>
            <p><strong>Actual Delivery:</strong> ${K.actualDeliveryDate}</p>
            <p><strong>Status:</strong> <span class="status-badge status-${K.deliveryStatus.toLowerCase()}">${K.deliveryStatus}</span></p>
            <p><strong>Type:</strong> ${K.deliveryType}</p>
          </div>
        </div>

        <div style="margin-bottom: 20px;">
          <h3>Delivery Information</h3>
          <p><strong>Delivery Location:</strong> ${K.deliveryLocation}</p>
          <p><strong>Delivery Address:</strong> ${K.deliveryAddress}</p>
          <p><strong>Contact Person:</strong> ${K.contactPerson}</p>
          <p><strong>Sales Group:</strong> ${K.salesGroup}</p>
        </div>

        <div style="margin-bottom: 20px;">
          <h3>Transport Details</h3>
          <p><strong>Transport Details:</strong> ${K.transportDetails||"N/A"}</p>
          <p><strong>Vehicle Number:</strong> ${K.vehicleNumber||"N/A"}</p>
          <p><strong>Driver Name:</strong> ${K.driverName||"N/A"}</p>
          <p><strong>Driver Phone:</strong> ${K.driverPhone||"N/A"}</p>
        </div>

        <h3>Item Details</h3>
        <table>
          <thead>
            <tr>
              <th>#</th>
              <th>Material ID</th>
              <th>Description</th>
              <th>Ordered Qty</th>
              <th>Delivered Qty</th>
              <th>Pending Qty</th>
              <th>Unit</th>
              <th>Price</th>
              <th>Delivery Date</th>
              <th>Actual Delivery</th>
              <th>Note</th>
            </tr>
          </thead>
          <tbody>
            ${B}
          </tbody>
        </table>

        <div style="margin-top: 20px;">
          <h3>Summary</h3>
          <p><strong>Total Delivered Amount:</strong> ₹${K.total}</p>
          <p><strong>Remarks:</strong> ${K.remarks||"None"}</p>
        </div>
      </body>
      </html>
    `,U=window.open("","","width=800,height=600");U.document.write(Q),U.document.close(),U.print()},z=async(K,B)=>{try{await Oe.patch(`/api/del/salesdeliveries/${K}/status`,{deliveryStatus:B,actualDeliveryDate:B==="Delivered"?new Date().toISOString().substring(0,10):void 0}),S(),alert(`Delivery status updated to ${B}`)}catch(Q){console.error("Error updating status:",Q),alert("Failed to update delivery status")}};return a.jsxs("div",{className:"content",children:[a.jsxs("div",{className:"d-md-flex d-block align-items-center justify-content-between page-breadcrumb mb-4",children:[a.jsxs("div",{className:"my-auto",children:[a.jsx("h2",{className:"mb-1",children:"Sales Delivery Display"}),a.jsx("nav",{children:a.jsxs("ol",{className:"breadcrumb mb-0",children:[a.jsx("li",{className:"breadcrumb-item",children:a.jsx("a",{href:"/dashboard",children:a.jsx("i",{className:"ti ti-smart-home"})})}),a.jsx("li",{className:"breadcrumb-item",children:"Sales"}),a.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"Deliveries"})]})})]}),a.jsx("div",{className:"d-flex",children:a.jsxs("button",{className:"btn btn-primary",onClick:S,children:[a.jsx("i",{className:"fas fa-sync me-1"}),"Refresh"]})})]}),a.jsx("div",{className:"card mb-4",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row g-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search delivery number, SO, customer...",value:c,onChange:K=>{d(K.target.value),w(1)}})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"From Date"}),a.jsx("input",{type:"date",className:"form-control",value:u,onChange:K=>{h(K.target.value),w(1)}})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"To Date"}),a.jsx("input",{type:"date",className:"form-control",value:m,onChange:K=>{p(K.target.value),w(1)}})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{className:"form-select",value:v,onChange:K=>{g(K.target.value),w(1)},children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"In Transit",children:"In Transit"}),a.jsx("option",{value:"Delivered",children:"Delivered"}),a.jsx("option",{value:"Cancelled",children:"Cancelled"})]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Type"}),a.jsxs("select",{className:"form-select",value:b,onChange:K=>{y(K.target.value),w(1)},children:[a.jsx("option",{value:"",children:"All Types"}),a.jsx("option",{value:"Full",children:"Full"}),a.jsx("option",{value:"Partial",children:"Partial"})]})]}),a.jsxs("div",{className:"col-md-1",children:[a.jsx("label",{className:"form-label",children:" "}),a.jsx("button",{className:"btn btn-secondary w-100",onClick:()=>{d(""),h(""),p(""),g(""),y(""),w(1)},children:"Reset"})]})]})})}),s?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})}),a.jsx("p",{className:"mt-2 text-muted",children:"Loading deliveries..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsx("div",{className:"",children:a.jsxs("table",{className:"table table-sm table-bordered",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Delivery Number"}),a.jsx("th",{children:"SO Reference"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Delivery Location"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Type"}),a.jsx("th",{children:"Total Amount"}),a.jsx("th",{children:"Vehicle"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:T.length>0?T.map(K=>a.jsxs("tr",{children:[a.jsx("td",{children:a.jsx("strong",{children:K.deliveryNumber})}),a.jsx("td",{children:a.jsx("span",{className:"badge bg-primary",children:K.soNumber})}),a.jsx("td",{children:new Date(K.deliveryDate).toLocaleDateString()}),a.jsx("td",{children:K.customerName}),a.jsx("td",{children:K.deliveryLocation}),a.jsx("td",{children:a.jsx("span",{className:P(K.deliveryStatus),children:K.deliveryStatus})}),a.jsx("td",{children:a.jsx("span",{className:O(K.deliveryType),children:K.deliveryType})}),a.jsxs("td",{children:["₹",K.total]}),a.jsx("td",{children:K.vehicleNumber||"N/A"}),a.jsx("td",{children:a.jsxs("div",{className:"btn-group",role:"group",children:[a.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>Z(K),title:"Print Delivery",children:a.jsx("i",{className:"fas fa-print"})}),K.deliveryStatus!=="Delivered"&&K.deliveryStatus!=="Cancelled"&&a.jsxs("div",{className:"btn-group",role:"group",children:[a.jsx("button",{type:"button",className:"btn btn-success btn-sm dropdown-toggle","data-bs-toggle":"dropdown",title:"Update Status",children:a.jsx("i",{className:"fas fa-edit"})}),a.jsxs("ul",{className:"dropdown-menu",children:[K.deliveryStatus!=="In Transit"&&a.jsx("li",{children:a.jsxs("a",{className:"dropdown-item",href:"#",onClick:B=>{B.preventDefault(),z(K._id,"In Transit")},children:[a.jsx("i",{className:"fas fa-truck me-2"}),"Mark In Transit"]})}),a.jsx("li",{children:a.jsxs("a",{className:"dropdown-item",href:"#",onClick:B=>{B.preventDefault(),z(K._id,"Delivered")},children:[a.jsx("i",{className:"fas fa-check me-2"}),"Mark Delivered"]})}),a.jsx("li",{children:a.jsxs("a",{className:"dropdown-item text-danger",href:"#",onClick:B=>{B.preventDefault(),confirm("Are you sure you want to cancel this delivery?")&&z(K._id,"Cancelled")},children:[a.jsx("i",{className:"fas fa-times me-2"}),"Cancel"]})})]})]})]})})]},K._id)):a.jsx("tr",{children:a.jsxs("td",{colSpan:"10",className:"text-center py-4",children:[a.jsx("i",{className:"fas fa-truck fa-2x text-muted mb-2"}),a.jsx("p",{className:"text-muted mb-0",children:"No sales deliveries found"}),(c||u||m||v||b)&&a.jsx("small",{className:"text-muted",children:"Try adjusting your filters"})]})})})]})})})}),A>1&&a.jsx("nav",{"aria-label":"Sales Deliveries pagination",className:"mt-3",children:a.jsxs("ul",{className:"pagination justify-content-end",children:[a.jsx("li",{className:`page-item ${C===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>L(C-1),disabled:C===1,children:a.jsx("i",{className:"fas fa-chevron-left"})})}),(()=>{const B=[],Q=[];B.push(1);for(let Y=Math.max(2,C-2);Y<=Math.min(A-1,C+2);Y++)B.push(Y);A>1&&B.push(A);const U=[...new Set(B)].sort((Y,oe)=>Y-oe);let J;for(let Y of U)J&&(Y-J===2?Q.push(J+1):Y-J!==1&&Q.push("...")),Q.push(Y),J=Y;return Q.map((Y,oe)=>Y==="..."?a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},`ellipsis-${oe}`):a.jsx("li",{className:`page-item ${C===Y?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>L(Y),children:Y})},Y))})(),a.jsx("li",{className:`page-item ${C===A?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>L(C+1),disabled:C===A,children:a.jsx("i",{className:"fas fa-chevron-right"})})})]})})]})]})}const GMe=()=>{const[e,t]=N.useState({}),[r,n]=N.useState(!1),[s,i]=N.useState([]),[o,l]=N.useState([]),[c,d]=N.useState(null),[u,h]=N.useState(null),[m,p]=N.useState({currentPage:1,itemsPerPage:5,totalPages:1}),[v,g]=N.useState({companyId:"",firstName:"",lastName:"",email:"",phone:"",role:[],department:"",qualification:"",otherQualification:"",experience:"",dob:"",joinDate:"",address:"",gender:"",employmentType:"Full-Time",status:"Active",salary:"",employeeId:"",password:"",profilePhoto:""}),[b,y]=N.useState(null),[C,w]=N.useState(null),[k,S]=N.useState([]),[D,E]=N.useState(0);N.useEffect(()=>{P(),A(),T()},[]);const T=async()=>{try{const ne=await Oe.get("/api/departments");S(ne.data)}catch(ne){console.error("Error fetching departments:",ne)}},A=async()=>{try{const ne=await Oe.get("/api/roles");if(Array.isArray(ne.data))i(ne.data);else{console.error("Unexpected roles format:",ne.data);const ie=L();i(ie.map(G=>({_id:G,roleName:G})))}}catch(ne){const ie=L();i(ie.map(G=>({_id:G,roleName:G}))),console.error("Error fetching roles:",ne)}},L=()=>{const ne=new Set;return o.forEach(ie=>{Array.isArray(ie.role)&&ie.role.forEach(G=>{G&&ne.add(G)})}),Array.from(ne).sort()},P=async()=>{try{const ne=localStorage.getItem("selectedCompanyId"),ie=localStorage.getItem("financialYear"),G=await Oe.get("/api/faculties",{params:{companyId:ne,financialYear:ie}});l(G.data);const de=G.data.reduce((X,le)=>{if(le.employeeId){const Se=le.employeeId.match(/FAC-(\d+)$/);if(Se){const ue=parseInt(Se[1],10);return ue>X?ue:X}}return X},0);E(de)}catch(ne){console.error("Error fetching faculties:",ne)}},[O,Z]=N.useState({isChecking:!1,exists:!1,message:""}),z=async ne=>{if(!(!ne||!/\S+@\S+\.\S+/.test(ne))){Z(ie=>({...ie,isChecking:!0}));try{const G=(await Oe.get(`/api/Faculty/check-email-exists?email=${ne}`)).data.exists;Z({isChecking:!1,exists:G,message:G?"This email is already registered":"Email is available"})}catch(ie){console.error("Error checking email:",ie),Z({isChecking:!1,exists:!1,message:"Unable to verify email"})}}},K=N.useRef(null),B=ne=>{const ie=ne.target.files[0];if(ie){y(ie);const G=new FileReader;G.onloadend=()=>{w(G.result)},G.readAsDataURL(ie)}},Q=ne=>{const{name:ie,type:G,value:de,options:X}=ne.target;let le=de,Se="";if(ie==="phone"){let se=de.replace(/\D/g,"");se.startsWith("91")&&(se=se.slice(2)),/^\d{0,10}$/.test(se)?(se.length>10&&(se=se.slice(0,10)),g(ye=>({...ye,[ie]:se})),se.length===0?Se="Phone number is required.":se.length===1&&!/^[6-9]$/.test(se)?Se="Phone number must start with 6, 7, 8, or 9.":se.length<10?Se="Phone number must be exactly 10 digits.":se.length===10&&!/^[6-9]\d{9}$/.test(se)&&(Se="Invalid phone number format. It must start with 6, 7, 8, or 9."),se.length===10&&!Se&&(Se=""),t(ye=>({...ye,[ie]:Se}))):t(ye=>({...ye,[ie]:"Only numbers are allowed."}));return}(ie==="firstName"||ie==="lastName")&&(/^[A-Za-z\s]*$/.test(de)||(Se="Only alphabets are allowed.")),ie==="email"&&de&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de)&&(Se="Enter a valid email."),t(se=>({...se,[ie]:Se})),G==="select-multiple"&&(le=Array.from(X).filter(se=>se.selected).map(se=>se.value));let ue={...v,[ie]:le};if(g(ue),ie==="email"&&(K.current&&clearTimeout(K.current),K.current=setTimeout(()=>{z(le)},500)),ie==="firstName"&&de&&!c){const se=D+1,ye=`FAC-${String(se).padStart(3,"0")}`;g(Ne=>({...Ne,employeeId:ye}))}},[U,J]=N.useState({searchQuery:"",roleName:""}),Y=ne=>{const{name:ie,value:G}=ne.target;J(de=>({...de,[ie]:G}))},oe=()=>o.filter(ne=>{if(U.roleName&&!ne.role.includes(U.roleName))return!1;if(U.searchQuery){const ie=U.searchQuery.toLowerCase();return ne.firstName?.toLowerCase().includes(ie)||ne.lastName?.toLowerCase().includes(ie)||ne.email?.toLowerCase().includes(ie)||ne.employeeId?.toLowerCase().includes(ie)||ne.department?.toLowerCase().includes(ie)}return!0}),M=async ne=>{ne.preventDefault();const ie=Object.values(e).some(Ne=>Ne),G=new Date(v.dob),de=new Date(v.joinDate);let X=de.getFullYear()-G.getFullYear();const le=de.getMonth()-G.getMonth(),Se=de.getDate()-G.getDate();if((le<0||le===0&&Se<0)&&X--,X<19){alert("Faculty must be at least 19 years old on the joining date.");return}if(ie){alert("Please fix the validation errors before submitting.");return}let ue=v.phone;ue.startsWith("+91")||(ue="+91"+ue);const se=localStorage.getItem("selectedCompanyId");localStorage.getItem("financialYear");const ye={companyId:se,firstName:v.firstName,lastName:v.lastName,email:v.email,phone:ue,department:v.department,qualification:v.qualification,otherQualification:v.otherQualification,experience:v.experience,dob:v.dob,joinDate:v.joinDate,address:v.address,gender:v.gender,employmentType:v.employmentType,status:v.status,salary:v.salary,employeeId:v.employeeId,role:v.role};v.password&&v.password.trim()!==""&&(ye.password=v.password),console.log("submitData",ye);try{let Ne;c?Ne=await Oe.put(`/api/faculties/${c}`,ye,{headers:{"Content-Type":"application/json"}}):Ne=await Oe.post("/api/faculties",ye,{headers:{"Content-Type":"application/json"}}),alert(Ne.data.message||"Faculty saved successfully!"),V(),P()}catch(Ne){alert(Ne.response?.data?.message||"An error occurred while saving faculty.")}},V=()=>{g({firstName:"",lastName:"",email:"",phone:"",role:[],department:"",qualification:"",otherQualification:"",experience:"",dob:"",joinDate:"",address:"",gender:"",employmentType:"Full-Time",status:"Active",salary:"",employeeId:"",password:"",profilePhoto:""}),y(null),w(null),Z({}),d(null)},H=ne=>{console.log("Editing faculty:",ne);const ie={...ne,password:""};if(g(ie),d(ne._id),ne.profilePhoto){const de=`/${ne.profilePhoto.startsWith("/")?ne.profilePhoto.substring(1):ne.profilePhoto}`;w(de)}else w(null)},ee=async ne=>{if(window.confirm("Are you sure you want to delete this faculty?"))try{await Oe.delete(`/api/faculties/${ne}`),alert("Faculty deleted successfully"),P()}catch(ie){alert(ie.response?.data?.message||"Error deleting faculty")}},re=()=>{const ne=oe(),ie=Math.max(1,Math.ceil(ne.length/m.itemsPerPage));m.totalPages!==ie&&p(X=>({...X,totalPages:ie}));const G=(m.currentPage-1)*m.itemsPerPage,de=G+m.itemsPerPage;return ne.slice(G,de)},ae=ne=>{ne<1||ne>m.totalPages||p(ie=>({...ie,currentPage:ne}))};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"container",children:a.jsx("div",{className:"d-flex justify-content-between align-items-center",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"",children:a.jsx("h3",{children:"Staff Management"})})})})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"card-body",children:[a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-4",children:a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, email, employee ID...",name:"searchQuery",value:U.searchQuery,onChange:Y})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("select",{className:"form-select",name:"roleName",value:U.roleName,onChange:Y,children:[a.jsx("option",{value:"",children:"All Roles"}),L().map(ne=>a.jsx("option",{value:ne,children:ne},ne))]})}),a.jsx("div",{className:"col-md-2",children:a.jsx("button",{className:"btn btn-primary",type:"button","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",onClick:V,children:"Add Staff"})})]}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-hover table-center mb-0 table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Email"}),a.jsx("th",{children:"Phone"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Experience"}),a.jsx("th",{children:"Join Date"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:re().length>0?re().map(ne=>a.jsxs("tr",{children:[a.jsx("td",{children:ne.employeeId}),a.jsxs("td",{children:[ne.firstName," ",ne.lastName]}),a.jsx("td",{children:ne.email}),a.jsx("td",{children:ne.phone}),a.jsx("td",{children:ne.department}),a.jsxs("td",{children:[ne.experience," years"]}),a.jsx("td",{children:ne.joinDate}),a.jsx("td",{children:a.jsxs("div",{className:"hstack gap-2 fs-15",children:[a.jsx("button",{className:"btn btn-icon btn-sm btn-soft-warning rounded-pill","data-bs-toggle":"modal","data-bs-target":"#viewModal",onClick:()=>h(ne),children:a.jsx("i",{className:"feather-eye"})}),a.jsx("button",{onClick:()=>H(ne),className:"btn btn-icon btn-sm btn-soft-info rounded-pill","data-bs-toggle":"offcanvas","data-bs-target":"#offcanvasRight","aria-controls":"offcanvasRight",children:a.jsx("i",{className:"feather-edit"})}),a.jsx("button",{onClick:()=>ee(ne._id),className:"btn btn-icon btn-sm btn-soft-danger rounded-pill",children:a.jsx("i",{className:"feather-trash"})})]})})]},ne._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"8",className:"text-center",children:"No faculties found matching your criteria"})})})]})}),a.jsx("div",{className:"d-flex justify-content-left mt-3",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination",children:[a.jsx("li",{className:`page-item ${m.currentPage===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ae(m.currentPage-1),children:a.jsx("i",{className:"fas fa-angle-double-left"})})}),[...Array(m.totalPages)].map((ne,ie)=>{const G=ie+1;return G===1||G===m.totalPages||G>=m.currentPage-1&&G<=m.currentPage+1?a.jsx("li",{className:`page-item ${m.currentPage===G?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ae(G),children:G})},ie):null}),a.jsx("li",{className:`page-item ${m.currentPage===m.totalPages?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>ae(m.currentPage+1),children:a.jsx("i",{className:"fas fa-angle-double-right"})})})]})})})]}),a.jsxs("div",{className:"offcanvas offcanvas-end",tabIndex:"-1",id:"offcanvasRight","aria-labelledby":"offcanvasRightLabel",children:[a.jsxs("div",{className:"offcanvas-header",children:[a.jsx("h5",{className:"modal-title",children:c?"Edit Staff":"Add Staff"}),a.jsx("button",{className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"offcanvas","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsx("div",{className:"offcanvas-body",children:a.jsxs("form",{onSubmit:M,children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{children:"Profile Photo"}),a.jsxs("div",{className:"d-flex align-items-center gap-2",children:[a.jsx("input",{type:"file",name:"profilePhoto",accept:"image/*",onChange:B,className:"form-control",style:{maxWidth:"300px"}}),C&&a.jsx("button",{type:"button",className:"btn btn-sm btn-danger",onClick:()=>{y(null),w(null),g(ne=>({...ne,profilePhoto:""}))},children:"Remove"})]}),C&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:C,alt:"Profile Preview",style:{maxWidth:"100px",maxHeight:"100px",objectFit:"cover"},className:"rounded"})})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"First Name"}),a.jsx("input",{type:"text",className:"form-control",name:"firstName",placeholder:"First Name",value:v.firstName,onChange:Q,required:!0}),e.firstName&&a.jsx("p",{style:{color:"red"},children:e.firstName})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Last Name"}),a.jsx("input",{type:"text",className:"form-control",name:"lastName",placeholder:"Last Name",value:v.lastName,onChange:Q,required:!0}),e.lastName&&a.jsx("p",{style:{color:"red"},children:e.lastName})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Email"}),a.jsx("input",{type:"email",name:"email",className:"form-control",value:v.email,onChange:Q,placeholder:"Email",required:!0}),O.isChecking&&a.jsx("small",{className:"text-muted",children:"Checking email..."}),O.message&&!O.isChecking&&a.jsx("small",{className:O.exists?"text-danger":"text-success",children:O.message}),e.email&&a.jsx("p",{style:{color:"red"},children:e.email})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Phone Number"}),a.jsx("input",{type:"text",name:"phone",placeholder:"Phone",className:"form-control",value:v.phone,onChange:Q,required:!0}),e.phone&&a.jsx("p",{style:{color:"red"},children:e.phone})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Department"}),a.jsxs("select",{name:"department",value:v.department,onChange:Q,required:!0,className:"form-select",children:[a.jsx("option",{value:"",children:"--Select--"}),k.length>0?k.map(ne=>a.jsx("option",{value:ne.departmentName,children:ne.departmentName},ne._id)):a.jsx("option",{disabled:!0,children:"Loading departments..."})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Employee ID"}),a.jsx("input",{type:"text",name:"employeeId",placeholder:"Employee ID",value:v.employeeId,onChange:Q,readOnly:!0,className:"form-control"}),a.jsx("small",{className:"text-muted",children:"Auto-generated"})]})]}),s.length>0?s.map((ne,ie)=>{const G=ne.roleName;return G?.toLowerCase()==="student"?null:a.jsxs("div",{className:"form-check",style:{display:"flex",gap:"5px",alignItems:"center",marginTop:"9px"},children:[a.jsx("input",{type:"checkbox",className:"form-check-input",id:`role-${ie}`,value:ne.roleName,checked:v.role.includes(ne.roleName),onChange:de=>{const X=de.target.checked;g(le=>{let Se;return X?(Se=[...le.role],Se.includes(G)||Se.push(G)):Se=le.role.filter(ue=>ue!==G),{...le,role:Se}})}}),a.jsx("label",{className:"form-check-label mt-1",htmlFor:`role-${ie}`,children:ne.roleName})]},ne._id||ie)}):a.jsx("p",{children:"No roles found."}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("label",{className:"col-form-label",children:["Qualification ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsxs("select",{name:"qualification",className:"form-control",value:v.qualification,onChange:Q,required:!0,children:[a.jsx("option",{value:"",children:"Select Qualification"}),a.jsx("option",{value:"BE",children:"BE"}),a.jsx("option",{value:"BTech",children:"BTech"}),a.jsx("option",{value:"MCA",children:"MCA"}),a.jsx("option",{value:"ME",children:"ME"}),a.jsx("option",{value:"MTech",children:"MTech"}),a.jsx("option",{value:"Diploma",children:"Diploma"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),v.qualification==="Other"&&a.jsxs("div",{className:"col-md-6",children:[a.jsxs("label",{className:"col-form-label",children:["Other Qualification ",a.jsx("span",{className:"text-danger",children:"*"})]}),a.jsx("input",{type:"text",name:"otherQualification",className:"form-control",value:v.otherQualification||"",onChange:Q,required:!0})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Experience (Years)"}),a.jsx("input",{type:"number",name:"experience",placeholder:"Experience in years",value:v.experience,onChange:ne=>{const ie=ne.target.value;(ie===""||/^\d{1,2}$/.test(ie)&&Number(ie)>0&&Number(ie)<=50)&&Q(ne)},min:"1",max:"50",required:!0,className:"form-control"})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Date of Birth"}),a.jsx("input",{type:"date",name:"dob",value:v.dob,onChange:Q,required:!0,className:"form-control"})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Joining Date"}),a.jsx("input",{type:"date",className:"form-control",name:"joinDate",value:v.joinDate,onChange:Q,required:!0})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Gender"}),a.jsxs("select",{name:"gender",value:v.gender,onChange:Q,required:!0,className:"form-select",children:[a.jsx("option",{value:"",children:"Select Gender"}),a.jsx("option",{value:"Male",children:"Male"}),a.jsx("option",{value:"Female",children:"Female"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Address"}),a.jsx("input",{type:"text",className:"form-control",name:"address",placeholder:"Address",value:v.address,onChange:Q,required:!0})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{htmlFor:"employmentType",className:"form-label",children:"Employment Type"}),a.jsxs("select",{id:"employmentType",name:"employmentType",value:v.employmentType,onChange:Q,required:!0,className:"form-select",children:[a.jsx("option",{value:"Full-Time",children:"Full-Time"}),a.jsx("option",{value:"Part-Time",children:"Part-Time"})]})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{htmlFor:"status",className:"form-label",children:"Status"}),a.jsxs("select",{id:"status",name:"status",value:v.status,onChange:Q,required:!0,className:"form-select",children:[a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"col-form-label",children:"Salary"}),a.jsx("input",{type:"text",className:"form-control",name:"salary",placeholder:"Salary per month",value:v.salary,onChange:Q,required:!0})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsxs("label",{className:"col-form-label",children:["Password ",c?"(Leave blank to keep current)":""]}),a.jsx("input",{type:"password",name:"password",placeholder:c?"Leave blank to keep current":"Password",value:v.password,onChange:Q,required:!c,className:"form-control"})]})]}),a.jsxs("div",{className:"row mt-4",children:[a.jsx("div",{className:"col-6",children:a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Submit"})}),a.jsx("div",{className:"col-6 text-end",children:a.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"offcanvas",children:"Cancel"})})]})]})})]})]})})})]})})}),a.jsx("div",{className:"modal fade",id:"viewModal",role:"dialog",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",children:"Faculty Details"}),a.jsx("button",{className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsx("div",{className:"modal-body",children:u?a.jsx("table",{className:"table table-bordered",children:a.jsxs("tbody",{children:[a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("td",{children:u.employeeId})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Name"}),a.jsxs("td",{children:[u.firstName," ",u.lastName]})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Email"}),a.jsx("td",{children:u.email})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Phone"}),a.jsx("td",{children:u.phone})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Department"}),a.jsx("td",{children:u.department})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Qualification"}),a.jsx("td",{children:u.qualification})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Experience"}),a.jsxs("td",{children:[u.experience," years"]})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Role"}),a.jsx("td",{children:Array.isArray(u.role)?u.role.join(", "):u.role})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Employment Type"}),a.jsx("td",{children:u.employmentType})]}),a.jsxs("tr",{children:[a.jsx("th",{children:"Status"}),a.jsx("td",{children:a.jsx("span",{className:`badge ${u.status==="Active"?"bg-success":"bg-danger"}`,children:u.status})})]})]})}):a.jsx("h6",{children:"No faculty selected"})})]})})}),a.jsx("style",{jsx:!0,children:`
        .checkbox-group {
          display: flex;
          gap: 10px;
          padding: 10px;
          flex-wrap: wrap;
          max-height: 150px;
          overflow-y: auto;
          border: 1px solid #ced4da;
          border-radius: 0.25rem;
          padding: 0.5rem;
        }
        .form-check {
          margin: 5px 0;
        }
        .form-select[multiple] option {
          padding: 8px 12px;
          margin: 2px 0;
        }
        .form-select[multiple] option:checked {
          background-color: #0d6efd;
          color: white;
        }
        .badge {
          font-size: 0.75em;
          padding: 0.25em 0.5em;
        }
      `})]})},YMe=()=>{const[e,t]=N.useState({departmentName:""}),[r,n]=N.useState([]),[s,i]=N.useState(null),[o,l]=N.useState(1),c=5;N.useEffect(()=>{d()},[]);const d=async()=>{try{const w=await Oe.get("/api/departments");n(w.data)}catch(w){console.error("Error fetching departments:",w)}},u=w=>{const{name:k,value:S}=w.target;t(D=>({...D,[k]:S}))},h=async w=>{w.preventDefault();try{s?await Oe.put(`/api/departments/${s}`,e):await Oe.post("/api/departments",e),t({departmentName:""}),i(null),d()}catch(k){console.error(k)}},m=w=>{t({departmentName:w.departmentName}),i(w._id)},p=async w=>{if(window.confirm("Are you sure you want to delete this department?"))try{await Oe.delete(`/api/departments/${w}`),d()}catch(k){console.error(k)}},v=o*c,g=v-c,b=r.slice(g,v),y=Math.ceil(r.length/c),C=w=>l(w);return a.jsxs("div",{className:"container mt-4",children:[a.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[a.jsx("h3",{className:"text-primary",children:"Department Master"}),a.jsx("button",{className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":"#department-modal",onClick:()=>{t({departmentName:""}),i(null)},children:"+ Add Department"})]}),a.jsx("div",{className:"card shadow",children:a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:r.length>0?a.jsxs("table",{className:"table table-bordered table-striped align-middle",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Department ID"}),a.jsx("th",{children:"Department Name"}),a.jsx("th",{children:"Actions"})]})}),a.jsx("tbody",{children:b.map(w=>a.jsxs("tr",{children:[a.jsx("td",{children:w.dep_id||w._id.slice(-5)}),a.jsx("td",{children:w.departmentName}),a.jsxs("td",{children:[a.jsxs("button",{className:"btn btn-sm btn-outline-primary me-2","data-bs-toggle":"modal","data-bs-target":"#department-modal",onClick:()=>m(w),children:[a.jsx("i",{className:"bi bi-pencil-square"})," Edit"]}),a.jsxs("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>p(w._id),children:[a.jsx("i",{className:"bi bi-trash"})," Delete"]})]})]},w._id))})]}):a.jsx("p",{className:"text-muted",children:"No departments added yet."})}),y>1&&a.jsx("nav",{className:"mt-4",children:a.jsxs("ul",{className:"pagination justify-content-left",children:[a.jsx("li",{className:`page-item ${o===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>C(o-1),children:"«"})}),Array.from({length:y},(w,k)=>a.jsx("li",{className:`page-item ${o===k+1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>C(k+1),children:k+1})},k)),a.jsx("li",{className:`page-item ${o===y?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>C(o+1),children:"»"})})]})})]})}),a.jsx("div",{className:"modal fade",id:"department-modal",tabIndex:"-1","aria-labelledby":"departmentModalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered modal-sm",children:a.jsx("div",{className:"modal-content",children:a.jsxs("form",{onSubmit:h,children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h5",{className:"modal-title",id:"departmentModalLabel",children:s?"Edit Department":"Add Department"}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:()=>{t({departmentName:""}),i(null)}})]}),a.jsx("div",{className:"modal-body",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Department Name"}),a.jsx("input",{type:"text",name:"departmentName",className:"form-control",value:e.departmentName,onChange:u,placeholder:"Enter department name",required:!0})]})}),a.jsx("div",{className:"modal-footer",children:a.jsx("button",{type:"submit",className:"btn btn-primary w-100","data-bs-dismiss":"modal",children:s?"Update":"Save"})})]})})})})]})},KMe=()=>{const[e,t]=N.useState([]),[r,n]=N.useState(""),[s,i]=N.useState(""),[o,l]=N.useState([]),[c,d]=N.useState(!1),[u,h]=N.useState(null),m=N.useRef();N.useEffect(()=>{p(),v()},[]);const p=()=>{Oe.get("/api/departments").then(S=>t(S.data)).catch(S=>console.error("Error fetching departments",S))},v=()=>{Oe.get("/api/designations").then(S=>l(S.data)).catch(S=>console.error("Error fetching designations",S))},g=()=>{d(!1),n(""),i(""),new window.bootstrap.Modal(m.current).show()},b=()=>{window.bootstrap.Modal.getInstance(m.current).hide()},y=S=>{S.preventDefault();const D={designName:r,departmentId:s};(c?Oe.put(`/api/designations/${u}`,D):Oe.post("/api/designations",D)).then(()=>{v(),b(),k()}).catch(T=>console.error("Error saving designation",T))},C=S=>{d(!0),h(S._id),n(S.designName),i(S.departmentId?._id||""),new window.bootstrap.Modal(m.current).show()},w=S=>{window.confirm("Are you sure you want to delete this designation?")&&Oe.delete(`/api/designations/${S}`).then(()=>v()).catch(D=>console.error("Error deleting designation",D))},k=()=>{n(""),i(""),d(!1),h(null)};return a.jsxs("div",{className:"container mt-3",children:[a.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[a.jsx("h4",{className:"mb-4 text-primary",children:"Material Master"}),a.jsx("div",{className:"mb-3",children:a.jsx("button",{className:"btn btn-primary",onClick:g,children:"Add Designation"})})]}),a.jsxs("div",{className:"card p-4",children:[a.jsx("h5",{className:"card-title mb-3",children:"All Designations"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-hover",children:[a.jsx("thead",{className:"table-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"#"}),a.jsx("th",{children:"Designation"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Actions"})]})}),a.jsxs("tbody",{children:[o.map((S,D)=>a.jsxs("tr",{children:[a.jsx("td",{children:D+1}),a.jsx("td",{children:S.designName}),a.jsx("td",{children:S.departmentId?.departmentName||"N/A"}),a.jsxs("td",{children:[a.jsx("button",{className:"btn btn-sm btn-primary me-2",onClick:()=>C(S),children:"Edit"}),a.jsx("button",{className:"btn btn-sm btn-danger",onClick:()=>w(S._id),children:"Delete"})]})]},S._id)),o.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"4",className:"text-center text-muted",children:"No designations found"})})]})]})})]}),a.jsx("div",{className:"modal fade",ref:m,tabIndex:"-1","aria-labelledby":"designationModalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",children:a.jsx("div",{className:"modal-content",children:a.jsxs("form",{onSubmit:y,children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("h5",{className:"modal-title",id:"designationModalLabel",children:[c?"Edit":"Add"," Designation"]}),a.jsx("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:k})]}),a.jsxs("div",{className:"modal-body",children:[a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Designation Name"}),a.jsx("input",{type:"text",className:"form-control",value:r,onChange:S=>n(S.target.value),required:!0})]}),a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Department"}),a.jsxs("select",{className:"form-select",value:s,onChange:S=>i(S.target.value),required:!0,children:[a.jsx("option",{value:"",children:"-- Select Department --"}),e.map(S=>a.jsx("option",{value:S._id,children:S.departmentName},S._id))]})]})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{type:"submit",className:"btn btn-primary",children:c?"Update":"Add"}),a.jsx("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",onClick:k,children:"Cancel"})]})]})})})})]})},XMe=()=>{const[e,t]=N.useState({employeeId:"",name:"",leaveType:"",fromDate:"",toDate:"",reason:""}),[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState(!1);N.useEffect(()=>{const m=localStorage.getItem("user");if(m)try{const p=JSON.parse(m);console.log("User data from localStorage:",p),t(v=>({...v,employeeId:p.employeeId||"",name:p.username}))}catch(p){console.error("Error parsing user from localStorage:",p)}},[]);const c=async m=>await(await fetch("/api/leave",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)})).json(),d=async m=>await(await fetch(`/api/leave?employeeId=${m}`)).json(),u=m=>{t({...e,[m.target.name]:m.target.value})},h=async()=>{if(!e.leaveType||!e.fromDate||!e.toDate||!e.reason){alert("Please fill in all required fields");return}if(new Date(e.fromDate)>new Date(e.toDate)){alert("From date cannot be later than to date");return}try{const m=await c(e);m.success&&(alert(m.message),n(p=>[...p,m.data]),t(p=>({...p,leaveType:"",fromDate:"",toDate:"",reason:""})),i(!1))}catch(m){alert("Failed to submit leave request"),console.error("Submission error:",m)}};return N.useEffect(()=>{const m=localStorage.getItem("user");if(m)try{const p=JSON.parse(m);console.log("User data from localStorage:",p),p.employeeId&&d(p.employeeId).then(v=>n(v)).catch(v=>console.error("Error fetching leave requests:",v))}catch(p){console.error("Error parsing user from localStorage:",p)}},[]),N.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[s]),a.jsxs("div",{className:"d-flex justify-content-between align-items-center",style:{backgroundColor:"#f8f9fa"},children:[a.jsxs("div",{className:"content container-fluid",style:{padding:"20px",margin:"0 auto"},children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"row align-items-center",style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("div",{className:"col",children:a.jsx("h3",{className:"page-title",style:{color:"#333",fontSize:"24px",margin:0},children:"Employee Leave Request"})}),a.jsx("div",{className:"col-auto text-end",children:a.jsxs("button",{className:"btn btn-primary",onClick:()=>i(!0),children:[a.jsx("span",{style:{marginRight:"5px"},children:"+"})," Apply for Leave"]})})]})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"card",style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:a.jsxs("div",{className:"card-body",style:{padding:"20px"},children:[a.jsx("h4",{className:"card-title",style:{marginBottom:"20px",color:"#333"},children:"My Leave Requests"}),a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered",style:{width:"100%",borderCollapse:"collapse"},children:[a.jsx("thead",{children:a.jsxs("tr",{style:{backgroundColor:"#f8f9fa"},children:[a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Leave Type"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"From Date"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"To Date"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Reason"}),a.jsx("th",{style:{padding:"12px",border:"1px solid #dee2e6",fontWeight:"600"},children:"Status"})]})}),a.jsx("tbody",{children:r.length>0?r.map((m,p)=>a.jsxs("tr",{children:[a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:m.leaveType}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:new Date(m.fromDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:new Date(m.toDate).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:m.reason}),a.jsx("td",{style:{padding:"12px",border:"1px solid #dee2e6"},children:a.jsx("span",{className:`badge ${m.status==="Approved"?"bg-success":m.status==="Rejected"?"bg-danger":"bg-warning"}`,style:{padding:"4px 8px",borderRadius:"4px",fontSize:"12px",fontWeight:"bold",color:"white",backgroundColor:m.status==="Approved"?"#28a745":m.status==="Rejected"?"#dc3545":"#ffc107"},children:m.status})})]},p)):a.jsx("tr",{children:a.jsx("td",{colSpan:"5",style:{padding:"20px",textAlign:"center",color:"#666",border:"1px solid #dee2e6"},children:"No leave requests found"})})})]})})]})})})})]}),s&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"modal fade show",style:{display:"block",zIndex:1050,position:"fixed",top:0,left:0,width:"100%",height:"100%",outline:0,overflow:"auto"},onClick:m=>{m.target===m.currentTarget&&i(!1)},children:a.jsx("div",{className:"modal-dialog modal-dialog-centered",onClick:m=>m.stopPropagation(),style:{margin:"1.75rem auto",maxWidth:"500px",pointerEvents:"all"},children:a.jsxs("div",{className:"modal-content",style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[a.jsxs("div",{className:"modal-header",style:{borderBottom:"1px solid #e9ecef",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsx("h5",{className:"modal-title",style:{margin:0,fontSize:"18px",fontWeight:"600"},children:"Apply for Leave"}),a.jsx("button",{type:"button",className:"close",onClick:()=>i(!1),style:{cursor:"pointer",background:"none",border:"none",fontSize:"24px",padding:0,lineHeight:1},children:a.jsx("span",{children:"×"})})]}),a.jsx("div",{className:"modal-body",style:{padding:"1rem"},children:a.jsxs("div",{children:[a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Employee ID"}),a.jsx("input",{type:"text",name:"employeeId",value:e.employeeId,className:"form-control",readOnly:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Name"}),a.jsx("input",{type:"text",name:"name",value:e.name,className:"form-control",readOnly:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",backgroundColor:"#f8f9fa"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"3rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Leave Type"}),a.jsxs("select",{name:"leaveType",value:e.leaveType,onChange:u,required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"},children:[a.jsx("option",{value:"",children:"Select Leave Type"}),a.jsx("option",{value:"Sick Leave",children:"Sick Leave"}),a.jsx("option",{value:"Casual Leave",children:"Casual Leave"}),a.jsx("option",{value:"Annual Leave",children:"Annual Leave"}),a.jsx("option",{value:"Emergency Leave",children:"Emergency Leave"})]})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"From Date"}),a.jsx("input",{type:"date",name:"fromDate",value:e.fromDate,onChange:u,className:"form-control",required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"To Date"}),a.jsx("input",{type:"date",name:"toDate",value:e.toDate,onChange:u,className:"form-control",required:!0,style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px"}})]}),a.jsxs("div",{className:"form-group mb-3",style:{marginBottom:"1rem"},children:[a.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"500"},children:"Reason"}),a.jsx("textarea",{name:"reason",value:e.reason,onChange:u,className:"form-control",rows:"4",required:!0,placeholder:"Please provide the reason for your leave request...",style:{width:"100%",padding:"8px 12px",border:"1px solid #ced4da",borderRadius:"4px",resize:"vertical"}})]}),a.jsxs("div",{className:"submit-section",style:{marginTop:"20px"},children:[a.jsx("button",{type:"button",className:"btn btn-secondary",onClick:()=>i(!1),style:{width:"100%",marginBottom:"10px",backgroundColor:"#6c757d",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",cursor:"pointer"},children:"Cancel"}),a.jsx("button",{onClick:h,className:"btn btn-danger",disabled:o,style:{width:"100%",backgroundColor:o?"#ccc":"#dc3545",color:"#fff",padding:"10px",borderRadius:"5px",border:"none",cursor:o?"not-allowed":"pointer"},children:o?"Submitting...":"Submit Request"})]})]})})]})})}),a.jsx("div",{className:"modal-backdrop fade show",style:{position:"fixed",top:0,left:0,zIndex:1040,width:"100vw",height:"100vh",backgroundColor:"#000",opacity:.5},onClick:()=>i(!1)})]})]})},oK=6048e5,QMe=864e5,YS=6e4,KS=36e5,JMe=1e3,HB=Symbol.for("constructDateFrom");function yn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&HB in e?e[HB](t):e instanceof Date?new e.constructor(t):new Date(t)}function $r(e,t){return yn(t||e,e)}function Od(e,t,r){const n=$r(e,r?.in);return isNaN(t)?yn(r?.in||e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Rd(e,t,r){const n=$r(e,r?.in);if(isNaN(t))return yn(e,NaN);if(!t)return n;const s=n.getDate(),i=yn(e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const o=i.getDate();return s>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),s),n)}function lK(e,t,r){return yn(e,+$r(e)+t)}function ZMe(e,t,r){return lK(e,t*KS)}let eRe={};function Kx(){return eRe}function lf(e,t){const r=Kx(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=$r(e,t?.in),i=s.getDay(),o=(i<n?7:0)+i-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function $0(e,t){return lf(e,{...t,weekStartsOn:1})}function cK(e,t){const r=$r(e,t?.in),n=r.getFullYear(),s=yn(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const i=$0(s),o=yn(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=$0(o);return r.getTime()>=i.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function v2(e){const t=$r(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function kf(e,...t){const r=yn.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function Tx(e,t){const r=$r(e,t?.in);return r.setHours(0,0,0,0),r}function V0(e,t,r){const[n,s]=kf(r?.in,e,t),i=Tx(n),o=Tx(s),l=+i-v2(i),c=+o-v2(o);return Math.round((l-c)/QMe)}function tRe(e,t){const r=cK(e,t),n=yn(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),$0(n)}function i3(e,t,r){const n=$r(e,r?.in);return n.setTime(n.getTime()+t*YS),n}function gI(e,t,r){return Rd(e,t*3,r)}function rRe(e,t,r){return lK(e,t*1e3)}function g2(e,t,r){return Od(e,t*7,r)}function Kh(e,t,r){return Rd(e,t*12,r)}function WB(e,t){let r,n=t?.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=yn.bind(null,s));const i=$r(s,n);(!r||r<i||isNaN(+i))&&(r=i)}),yn(n,r||NaN)}function GB(e,t){let r,n=t?.in;return e.forEach(s=>{!n&&typeof s=="object"&&(n=yn.bind(null,s));const i=$r(s,n);(!r||r>i||isNaN(+i))&&(r=i)}),yn(n,r||NaN)}function aRe(e,t,r){const[n,s]=kf(r?.in,e,t);return+Tx(n)==+Tx(s)}function Xh(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function b2(e){return!(!Xh(e)&&typeof e!="number"||isNaN(+$r(e)))}function y2(e,t,r){const[n,s]=kf(r?.in,e,t),i=n.getFullYear()-s.getFullYear(),o=n.getMonth()-s.getMonth();return i*12+o}function mx(e,t){const r=$r(e,t?.in);return Math.trunc(r.getMonth()/3)+1}function j2(e,t,r){const[n,s]=kf(r?.in,e,t),i=n.getFullYear()-s.getFullYear(),o=mx(n)-mx(s);return i*4+o}function N2(e,t,r){const[n,s]=kf(r?.in,e,t);return n.getFullYear()-s.getFullYear()}function nRe(e,t,r){const[n,s]=kf(r?.in,e,t),i=YB(n,s),o=Math.abs(V0(n,s));n.setDate(n.getDate()-i*o);const l=+(YB(n,s)===-i),c=i*(o-l);return c===0?0:c}function YB(e,t){const r=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return r<0?-1:r>0?1:r}function dK(e,t){const r=$r(e,t?.in);return r.setHours(23,59,59,999),r}function uK(e,t){const r=$r(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function o3(e,t){const r=$r(e,t?.in),n=r.getMonth(),s=n-n%3;return r.setMonth(s,1),r.setHours(0,0,0,0),r}function hK(e,t){const r=$r(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function fK(e,t){const r=$r(e,t?.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}function XS(e,t){const r=$r(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function sRe(e,t){const r=Kx(),n=r.weekStartsOn??r.locale?.options?.weekStartsOn??0,s=$r(e,t?.in),i=s.getDay(),o=(i<n?-7:0)+6-(i-n);return s.setDate(s.getDate()+o),s.setHours(23,59,59,999),s}const iRe={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},oRe=(e,t,r)=>{let n;const s=iRe[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function XE(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const lRe={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},cRe={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dRe={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},uRe={date:XE({formats:lRe,defaultWidth:"full"}),time:XE({formats:cRe,defaultWidth:"full"}),dateTime:XE({formats:dRe,defaultWidth:"full"})},hRe={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},fRe=(e,t,r,n)=>hRe[e];function Nb(e){return(t,r)=>{const n=r?.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r?.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r?.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return s[i]}}const mRe={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},pRe={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xRe={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},vRe={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},gRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},bRe={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},yRe=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},jRe={ordinalNumber:yRe,era:Nb({values:mRe,defaultWidth:"wide"}),quarter:Nb({values:pRe,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Nb({values:xRe,defaultWidth:"wide"}),day:Nb({values:vRe,defaultWidth:"wide"}),dayPeriod:Nb({values:gRe,defaultWidth:"wide",formattingValues:bRe,defaultFormattingWidth:"wide"})};function wb(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(s);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?wRe(l,h=>h.test(o)):NRe(l,h=>h.test(o));let d;d=e.valueCallback?e.valueCallback(c):c,d=r.valueCallback?r.valueCallback(d):d;const u=t.slice(o.length);return{value:d,rest:u}}}function NRe(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function wRe(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function SRe(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const CRe=/^(\d+)(th|st|nd|rd)?/i,kRe=/\d+/i,_Re={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ERe={any:[/^b/i,/^(a|c)/i]},DRe={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ARe={any:[/1/i,/2/i,/3/i,/4/i]},TRe={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},IRe={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},PRe={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ORe={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},MRe={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},RRe={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},FRe={ordinalNumber:SRe({matchPattern:CRe,parsePattern:kRe,valueCallback:e=>parseInt(e,10)}),era:wb({matchPatterns:_Re,defaultMatchWidth:"wide",parsePatterns:ERe,defaultParseWidth:"any"}),quarter:wb({matchPatterns:DRe,defaultMatchWidth:"wide",parsePatterns:ARe,defaultParseWidth:"any",valueCallback:e=>e+1}),month:wb({matchPatterns:TRe,defaultMatchWidth:"wide",parsePatterns:IRe,defaultParseWidth:"any"}),day:wb({matchPatterns:PRe,defaultMatchWidth:"wide",parsePatterns:ORe,defaultParseWidth:"any"}),dayPeriod:wb({matchPatterns:MRe,defaultMatchWidth:"any",parsePatterns:RRe,defaultParseWidth:"any"})},mK={code:"en-US",formatDistance:oRe,formatLong:uRe,formatRelative:fRe,localize:jRe,match:FRe,options:{weekStartsOn:0,firstWeekContainsDate:1}};function LRe(e,t){const r=$r(e,t?.in);return V0(r,XS(r))+1}function bI(e,t){const r=$r(e,t?.in),n=+$0(r)-+tRe(r);return Math.round(n/oK)+1}function yI(e,t){const r=$r(e,t?.in),n=r.getFullYear(),s=Kx(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,o=yn(t?.in||e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=lf(o,t),c=yn(t?.in||e,0);c.setFullYear(n,0,i),c.setHours(0,0,0,0);const d=lf(c,t);return+r>=+l?n+1:+r>=+d?n:n-1}function BRe(e,t){const r=Kx(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,s=yI(e,t),i=yn(t?.in||e,0);return i.setFullYear(s,0,n),i.setHours(0,0,0,0),lf(i,t)}function pK(e,t){const r=$r(e,t?.in),n=+lf(r,t)-+BRe(r,t);return Math.round(n/oK)+1}function xn(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const bm={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return xn(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):xn(r+1,2)},d(e,t){return xn(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return xn(e.getHours()%12||12,t.length)},H(e,t){return xn(e.getHours(),t.length)},m(e,t){return xn(e.getMinutes(),t.length)},s(e,t){return xn(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return xn(s,t.length)}},Bv={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},KB={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return bm.y(e,t)},Y:function(e,t,r,n){const s=yI(e,n),i=s>0?s:1-s;if(t==="YY"){const o=i%100;return xn(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):xn(i,t.length)},R:function(e,t){const r=cK(e);return xn(r,t.length)},u:function(e,t){const r=e.getFullYear();return xn(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return xn(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return xn(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return bm.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return xn(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=pK(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):xn(s,t.length)},I:function(e,t,r){const n=bI(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):xn(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):bm.d(e,t)},D:function(e,t,r){const n=LRe(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):xn(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return xn(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),i=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return xn(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return xn(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=Bv.noon:n===0?s=Bv.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=Bv.evening:n>=12?s=Bv.afternoon:n>=4?s=Bv.morning:s=Bv.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return bm.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):bm.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):xn(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):xn(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):bm.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):bm.s(e,t)},S:function(e,t){return bm.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return QB(n);case"XXXX":case"XX":return Lp(n);case"XXXXX":case"XXX":default:return Lp(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return QB(n);case"xxxx":case"xx":return Lp(n);case"xxxxx":case"xxx":default:return Lp(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+XB(n,":");case"OOOO":default:return"GMT"+Lp(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+XB(n,":");case"zzzz":default:return"GMT"+Lp(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return xn(n,t.length)},T:function(e,t,r){return xn(+e,t.length)}};function XB(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),i=n%60;return i===0?r+String(s):r+String(s)+t+xn(i,2)}function QB(e,t){return e%60===0?(e>0?"-":"+")+xn(Math.abs(e)/60,2):Lp(e,t)}function Lp(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=xn(Math.trunc(n/60),2),i=xn(n%60,2);return r+s+t+i}const JB=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},xK=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},URe=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return JB(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",JB(n,t)).replace("{{time}}",xK(s,t))},l3={p:xK,P:URe},$Re=/^D+$/,VRe=/^Y+$/,qRe=["D","DD","YY","YYYY"];function zRe(e){return $Re.test(e)}function HRe(e){return VRe.test(e)}function WRe(e,t,r){const n=GRe(e,t,r);if(console.warn(n),qRe.includes(e))throw new RangeError(n)}function GRe(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const YRe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,KRe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,XRe=/^'([^]*?)'?$/,QRe=/''/g,JRe=/[a-zA-Z]/;function ZB(e,t,r){const n=Kx(),s=r?.locale??n.locale??mK,i=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=$r(e,r?.in);if(!b2(l))throw new RangeError("Invalid time value");let c=t.match(KRe).map(u=>{const h=u[0];if(h==="p"||h==="P"){const m=l3[h];return m(u,s.formatLong)}return u}).join("").match(YRe).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const h=u[0];if(h==="'")return{isToken:!1,value:ZRe(u)};if(KB[h])return{isToken:!0,value:u};if(h.match(JRe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:u}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return c.map(u=>{if(!u.isToken)return u.value;const h=u.value;(!r?.useAdditionalWeekYearTokens&&HRe(h)||!r?.useAdditionalDayOfYearTokens&&zRe(h))&&WRe(h,t,String(e));const m=KB[h[0]];return m(l,h,s.localize,d)}).join("")}function ZRe(e){const t=e.match(XRe);return t?t[1].replace(QRe,"'"):e}function e7(e,t){return $r(e,t?.in).getDate()}function eFe(e,t){return $r(e,t?.in).getDay()}function tFe(e,t){const r=$r(e,t?.in),n=r.getFullYear(),s=r.getMonth(),i=yn(r,0);return i.setFullYear(n,s+1,0),i.setHours(0,0,0,0),i.getDate()}function rFe(){return Object.assign({},Kx())}function Qh(e,t){return $r(e,t?.in).getHours()}function aFe(e,t){const r=$r(e,t?.in).getDay();return r===0?7:r}function Jh(e,t){return $r(e,t?.in).getMinutes()}function Co(e,t){return $r(e,t?.in).getMonth()}function Mm(e){return $r(e).getSeconds()}function c3(e){return+$r(e)}function Ea(e,t){return $r(e,t?.in).getFullYear()}function Hm(e,t){return+$r(e)>+$r(t)}function Ix(e,t){return+$r(e)<+$r(t)}function nFe(e,t){return+$r(e)==+$r(t)}function sFe(e,t){const r=iFe(t)?new t(0):yn(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function iFe(e){return typeof e=="function"&&e.prototype?.constructor===e}const oFe=10;class vK{subPriority=0;validate(t,r){return!0}}class lFe extends vK{constructor(t,r,n,s,i){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=s,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}}class cFe extends vK{priority=oFe;subPriority=-1;constructor(t,r){super(),this.context=t||(n=>yn(r,n))}set(t,r){return r.timestampIsSet?t:yn(t,sFe(t,this.context))}}class sn{run(t,r,n,s){const i=this.parse(t,r,n,s);return i?{setter:new lFe(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,n){return!0}}class dFe extends sn{priority=140;parse(t,r,n){switch(r){case"G":case"GG":case"GGG":return n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"});case"GGGGG":return n.era(t,{width:"narrow"});case"GGGG":default:return n.era(t,{width:"wide"})||n.era(t,{width:"abbreviated"})||n.era(t,{width:"narrow"})}}set(t,r,n){return r.era=n,t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]}const Bs={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Au={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Us(e,t){return e&&{value:t(e.value),rest:e.rest}}function ls(e,t){const r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Tu(e,t){const r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};const n=r[1]==="+"?1:-1,s=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,o=r[5]?parseInt(r[5],10):0;return{value:n*(s*KS+i*YS+o*JMe),rest:t.slice(r[0].length)}}function gK(e){return ls(Bs.anyDigitsSigned,e)}function Cs(e,t){switch(e){case 1:return ls(Bs.singleDigit,t);case 2:return ls(Bs.twoDigits,t);case 3:return ls(Bs.threeDigits,t);case 4:return ls(Bs.fourDigits,t);default:return ls(new RegExp("^\\d{1,"+e+"}"),t)}}function w2(e,t){switch(e){case 1:return ls(Bs.singleDigitSigned,t);case 2:return ls(Bs.twoDigitsSigned,t);case 3:return ls(Bs.threeDigitsSigned,t);case 4:return ls(Bs.fourDigitsSigned,t);default:return ls(new RegExp("^-?\\d{1,"+e+"}"),t)}}function jI(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function bK(e,t){const r=t>0,n=r?t:1-t;let s;if(n<=50)s=e||100;else{const i=n+50,o=Math.trunc(i/100)*100,l=e>=i%100;s=e+o-(l?100:0)}return r?s:1-s}function yK(e){return e%400===0||e%4===0&&e%100!==0}class uFe extends sn{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,r,n){const s=i=>({year:i,isTwoDigitYear:r==="yy"});switch(r){case"y":return Us(Cs(4,t),s);case"yo":return Us(n.ordinalNumber(t,{unit:"year"}),s);default:return Us(Cs(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n){const s=t.getFullYear();if(n.isTwoDigitYear){const o=bK(n.year,s);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}const i=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}}class hFe extends sn{priority=130;parse(t,r,n){const s=i=>({year:i,isTwoDigitYear:r==="YY"});switch(r){case"Y":return Us(Cs(4,t),s);case"Yo":return Us(n.ordinalNumber(t,{unit:"year"}),s);default:return Us(Cs(r.length,t),s)}}validate(t,r){return r.isTwoDigitYear||r.year>0}set(t,r,n,s){const i=yI(t,s);if(n.isTwoDigitYear){const l=bK(n.year,i);return t.setFullYear(l,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),lf(t,s)}const o=!("era"in r)||r.era===1?n.year:1-n.year;return t.setFullYear(o,0,s.firstWeekContainsDate),t.setHours(0,0,0,0),lf(t,s)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class fFe extends sn{priority=130;parse(t,r){return w2(r==="R"?4:r.length,t)}set(t,r,n){const s=yn(t,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),$0(s)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class mFe extends sn{priority=130;parse(t,r){return w2(r==="u"?4:r.length,t)}set(t,r,n){return t.setFullYear(n,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class pFe extends sn{priority=120;parse(t,r,n){switch(r){case"Q":case"QQ":return Cs(r.length,t);case"Qo":return n.ordinalNumber(t,{unit:"quarter"});case"QQQ":return n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(t,{width:"wide",context:"formatting"})||n.quarter(t,{width:"abbreviated",context:"formatting"})||n.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class xFe extends sn{priority=120;parse(t,r,n){switch(r){case"q":case"qq":return Cs(r.length,t);case"qo":return n.ordinalNumber(t,{unit:"quarter"});case"qqq":return n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(t,{width:"wide",context:"standalone"})||n.quarter(t,{width:"abbreviated",context:"standalone"})||n.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=1&&r<=4}set(t,r,n){return t.setMonth((n-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class vFe extends sn{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,r,n){const s=i=>i-1;switch(r){case"M":return Us(ls(Bs.month,t),s);case"MM":return Us(Cs(2,t),s);case"Mo":return Us(n.ordinalNumber(t,{unit:"month"}),s);case"MMM":return n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(t,{width:"wide",context:"formatting"})||n.month(t,{width:"abbreviated",context:"formatting"})||n.month(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}}class gFe extends sn{priority=110;parse(t,r,n){const s=i=>i-1;switch(r){case"L":return Us(ls(Bs.month,t),s);case"LL":return Us(Cs(2,t),s);case"Lo":return Us(n.ordinalNumber(t,{unit:"month"}),s);case"LLL":return n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(t,{width:"wide",context:"standalone"})||n.month(t,{width:"abbreviated",context:"standalone"})||n.month(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.setMonth(n,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function bFe(e,t,r){const n=$r(e,r?.in),s=pK(n,r)-t;return n.setDate(n.getDate()-s*7),$r(n,r?.in)}class yFe extends sn{priority=100;parse(t,r,n){switch(r){case"w":return ls(Bs.week,t);case"wo":return n.ordinalNumber(t,{unit:"week"});default:return Cs(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n,s){return lf(bFe(t,n,s),s)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function jFe(e,t,r){const n=$r(e,r?.in),s=bI(n,r)-t;return n.setDate(n.getDate()-s*7),n}class NFe extends sn{priority=100;parse(t,r,n){switch(r){case"I":return ls(Bs.week,t);case"Io":return n.ordinalNumber(t,{unit:"week"});default:return Cs(r.length,t)}}validate(t,r){return r>=1&&r<=53}set(t,r,n){return $0(jFe(t,n))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const wFe=[31,28,31,30,31,30,31,31,30,31,30,31],SFe=[31,29,31,30,31,30,31,31,30,31,30,31];class CFe extends sn{priority=90;subPriority=1;parse(t,r,n){switch(r){case"d":return ls(Bs.date,t);case"do":return n.ordinalNumber(t,{unit:"date"});default:return Cs(r.length,t)}}validate(t,r){const n=t.getFullYear(),s=yK(n),i=t.getMonth();return s?r>=1&&r<=SFe[i]:r>=1&&r<=wFe[i]}set(t,r,n){return t.setDate(n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class kFe extends sn{priority=90;subpriority=1;parse(t,r,n){switch(r){case"D":case"DD":return ls(Bs.dayOfYear,t);case"Do":return n.ordinalNumber(t,{unit:"date"});default:return Cs(r.length,t)}}validate(t,r){const n=t.getFullYear();return yK(n)?r>=1&&r<=366:r>=1&&r<=365}set(t,r,n){return t.setMonth(0,n),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function NI(e,t,r){const n=Kx(),s=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=$r(e,r?.in),o=i.getDay(),c=(t%7+7)%7,d=7-s,u=t<0||t>6?t-(o+d)%7:(c+d)%7-(o+d)%7;return Od(i,u,r)}class _Fe extends sn{priority=90;parse(t,r,n){switch(r){case"E":case"EE":case"EEE":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=NI(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]}class EFe extends sn{priority=90;parse(t,r,n,s){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"e":case"ee":return Us(Cs(r.length,t),i);case"eo":return Us(n.ordinalNumber(t,{unit:"day"}),i);case"eee":return n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeeee":return n.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=NI(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class DFe extends sn{priority=90;parse(t,r,n,s){const i=o=>{const l=Math.floor((o-1)/7)*7;return(o+s.weekStartsOn+6)%7+l};switch(r){case"c":case"cc":return Us(Cs(r.length,t),i);case"co":return Us(n.ordinalNumber(t,{unit:"day"}),i);case"ccc":return n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"ccccc":return n.day(t,{width:"narrow",context:"standalone"});case"cccccc":return n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(t,{width:"wide",context:"standalone"})||n.day(t,{width:"abbreviated",context:"standalone"})||n.day(t,{width:"short",context:"standalone"})||n.day(t,{width:"narrow",context:"standalone"})}}validate(t,r){return r>=0&&r<=6}set(t,r,n,s){return t=NI(t,n,s),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function AFe(e,t,r){const n=$r(e,r?.in),s=aFe(n,r),i=t-s;return Od(n,i,r)}class TFe extends sn{priority=90;parse(t,r,n){const s=i=>i===0?7:i;switch(r){case"i":case"ii":return Cs(r.length,t);case"io":return n.ordinalNumber(t,{unit:"day"});case"iii":return Us(n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiii":return Us(n.day(t,{width:"narrow",context:"formatting"}),s);case"iiiiii":return Us(n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s);case"iiii":default:return Us(n.day(t,{width:"wide",context:"formatting"})||n.day(t,{width:"abbreviated",context:"formatting"})||n.day(t,{width:"short",context:"formatting"})||n.day(t,{width:"narrow",context:"formatting"}),s)}}validate(t,r){return r>=1&&r<=7}set(t,r,n){return t=AFe(t,n),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class IFe extends sn{priority=80;parse(t,r,n){switch(r){case"a":case"aa":case"aaa":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jI(n),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]}class PFe extends sn{priority=80;parse(t,r,n){switch(r){case"b":case"bb":case"bbb":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jI(n),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]}class OFe extends sn{priority=80;parse(t,r,n){switch(r){case"B":case"BB":case"BBB":return n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(t,{width:"wide",context:"formatting"})||n.dayPeriod(t,{width:"abbreviated",context:"formatting"})||n.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,r,n){return t.setHours(jI(n),0,0,0),t}incompatibleTokens=["a","b","t","T"]}class MFe extends sn{priority=70;parse(t,r,n){switch(r){case"h":return ls(Bs.hour12h,t);case"ho":return n.ordinalNumber(t,{unit:"hour"});default:return Cs(r.length,t)}}validate(t,r){return r>=1&&r<=12}set(t,r,n){const s=t.getHours()>=12;return s&&n<12?t.setHours(n+12,0,0,0):!s&&n===12?t.setHours(0,0,0,0):t.setHours(n,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]}class RFe extends sn{priority=70;parse(t,r,n){switch(r){case"H":return ls(Bs.hour23h,t);case"Ho":return n.ordinalNumber(t,{unit:"hour"});default:return Cs(r.length,t)}}validate(t,r){return r>=0&&r<=23}set(t,r,n){return t.setHours(n,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]}class FFe extends sn{priority=70;parse(t,r,n){switch(r){case"K":return ls(Bs.hour11h,t);case"Ko":return n.ordinalNumber(t,{unit:"hour"});default:return Cs(r.length,t)}}validate(t,r){return r>=0&&r<=11}set(t,r,n){return t.getHours()>=12&&n<12?t.setHours(n+12,0,0,0):t.setHours(n,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]}class LFe extends sn{priority=70;parse(t,r,n){switch(r){case"k":return ls(Bs.hour24h,t);case"ko":return n.ordinalNumber(t,{unit:"hour"});default:return Cs(r.length,t)}}validate(t,r){return r>=1&&r<=24}set(t,r,n){const s=n<=24?n%24:n;return t.setHours(s,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]}class BFe extends sn{priority=60;parse(t,r,n){switch(r){case"m":return ls(Bs.minute,t);case"mo":return n.ordinalNumber(t,{unit:"minute"});default:return Cs(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setMinutes(n,0,0),t}incompatibleTokens=["t","T"]}class UFe extends sn{priority=50;parse(t,r,n){switch(r){case"s":return ls(Bs.second,t);case"so":return n.ordinalNumber(t,{unit:"second"});default:return Cs(r.length,t)}}validate(t,r){return r>=0&&r<=59}set(t,r,n){return t.setSeconds(n,0),t}incompatibleTokens=["t","T"]}class $Fe extends sn{priority=30;parse(t,r){const n=s=>Math.trunc(s*Math.pow(10,-r.length+3));return Us(Cs(r.length,t),n)}set(t,r,n){return t.setMilliseconds(n),t}incompatibleTokens=["t","T"]}class VFe extends sn{priority=10;parse(t,r){switch(r){case"X":return Tu(Au.basicOptionalMinutes,t);case"XX":return Tu(Au.basic,t);case"XXXX":return Tu(Au.basicOptionalSeconds,t);case"XXXXX":return Tu(Au.extendedOptionalSeconds,t);case"XXX":default:return Tu(Au.extended,t)}}set(t,r,n){return r.timestampIsSet?t:yn(t,t.getTime()-v2(t)-n)}incompatibleTokens=["t","T","x"]}class qFe extends sn{priority=10;parse(t,r){switch(r){case"x":return Tu(Au.basicOptionalMinutes,t);case"xx":return Tu(Au.basic,t);case"xxxx":return Tu(Au.basicOptionalSeconds,t);case"xxxxx":return Tu(Au.extendedOptionalSeconds,t);case"xxx":default:return Tu(Au.extended,t)}}set(t,r,n){return r.timestampIsSet?t:yn(t,t.getTime()-v2(t)-n)}incompatibleTokens=["t","T","X"]}class zFe extends sn{priority=40;parse(t){return gK(t)}set(t,r,n){return[yn(t,n*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class HFe extends sn{priority=20;parse(t){return gK(t)}set(t,r,n){return[yn(t,n),{timestampIsSet:!0}]}incompatibleTokens="*"}const WFe={G:new dFe,y:new uFe,Y:new hFe,R:new fFe,u:new mFe,Q:new pFe,q:new xFe,M:new vFe,L:new gFe,w:new yFe,I:new NFe,d:new CFe,D:new kFe,E:new _Fe,e:new EFe,c:new DFe,i:new TFe,a:new IFe,b:new PFe,B:new OFe,h:new MFe,H:new RFe,K:new FFe,k:new LFe,m:new BFe,s:new UFe,S:new $Fe,X:new VFe,x:new qFe,t:new zFe,T:new HFe},GFe=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,YFe=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,KFe=/^'([^]*?)'?$/,XFe=/''/g,QFe=/\S/,JFe=/[a-zA-Z]/;function ZFe(e,t,r,n){const s=()=>yn(n?.in||r,NaN),i=rFe(),o=n?.locale??i.locale??mK,l=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,c=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0;if(!t)return e?s():$r(r,n?.in);const d={firstWeekContainsDate:l,weekStartsOn:c,locale:o},u=[new cFe(n?.in,r)],h=t.match(YFe).map(b=>{const y=b[0];if(y in l3){const C=l3[y];return C(b,o.formatLong)}return b}).join("").match(GFe),m=[];for(let b of h){const y=b[0],C=WFe[y];if(C){const{incompatibleTokens:w}=C;if(Array.isArray(w)){const S=m.find(D=>w.includes(D.token)||D.token===y);if(S)throw new RangeError(`The format string mustn't contain \`${S.fullToken}\` and \`${b}\` at the same time`)}else if(C.incompatibleTokens==="*"&&m.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);m.push({token:y,fullToken:b});const k=C.run(e,b,o.match,d);if(!k)return s();u.push(k.setter),e=k.rest}else{if(y.match(JFe))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");if(b==="''"?b="'":y==="'"&&(b=eLe(b)),e.indexOf(b)===0)e=e.slice(b.length);else return s()}}if(e.length>0&&QFe.test(e))return s();const p=u.map(b=>b.priority).sort((b,y)=>y-b).filter((b,y,C)=>C.indexOf(b)===y).map(b=>u.filter(y=>y.priority===b).sort((y,C)=>C.subPriority-y.subPriority)).map(b=>b[0]);let v=$r(r,n?.in);if(isNaN(+v))return s();const g={};for(const b of p){if(!b.validate(v,d))return s();const y=b.set(v,g,d);Array.isArray(y)?(v=y[0],Object.assign(g,y[1])):v=y}return v}function eLe(e){return e.match(KFe)[1].replace(XFe,"'")}function tLe(e,t,r){const[n,s]=kf(r?.in,e,t);return n.getFullYear()===s.getFullYear()&&n.getMonth()===s.getMonth()}function rLe(e,t,r){const[n,s]=kf(r?.in,e,t);return+o3(n)==+o3(s)}function aLe(e,t,r){const[n,s]=kf(r?.in,e,t);return n.getFullYear()===s.getFullYear()}function Oy(e,t,r){const n=+$r(e,r?.in),[s,i]=[+$r(t.start,r?.in),+$r(t.end,r?.in)].sort((o,l)=>o-l);return n>=s&&n<=i}function nLe(e,t,r){return Od(e,-1,r)}function sLe(e,t){const r=()=>yn(t?.in,NaN),s=cLe(e);let i;if(s.date){const d=dLe(s.date,2);i=uLe(d.restDateString,d.year)}if(!i||isNaN(+i))return r();const o=+i;let l=0,c;if(s.time&&(l=hLe(s.time),isNaN(l)))return r();if(s.timezone){if(c=fLe(s.timezone),isNaN(c))return r()}else{const d=new Date(o+l),u=$r(0,t?.in);return u.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),u.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),u}return $r(o+l+c,t?.in)}const dN={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},iLe=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,oLe=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,lLe=/^([+-])(\d{2})(?::?(\d{2}))?$/;function cLe(e){const t={},r=e.split(dN.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],dN.timeZoneDelimiter.test(t.date)&&(t.date=e.split(dN.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=dN.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function dLe(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?s:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function uLe(e,t){if(t===null)return new Date(NaN);const r=e.match(iLe);if(!r)return new Date(NaN);const n=!!r[4],s=Sb(r[1]),i=Sb(r[2])-1,o=Sb(r[3]),l=Sb(r[4]),c=Sb(r[5])-1;if(n)return gLe(t,l,c)?mLe(t,l,c):new Date(NaN);{const d=new Date(0);return!xLe(t,i,o)||!vLe(t,s)?new Date(NaN):(d.setUTCFullYear(t,i,Math.max(s,o)),d)}}function Sb(e){return e?parseInt(e):1}function hLe(e){const t=e.match(oLe);if(!t)return NaN;const r=QE(t[1]),n=QE(t[2]),s=QE(t[3]);return bLe(r,n,s)?r*KS+n*YS+s*1e3:NaN}function QE(e){return e&&parseFloat(e.replace(",","."))||0}function fLe(e){if(e==="Z")return 0;const t=e.match(lLe);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return yLe(n,s)?r*(n*KS+s*YS):NaN}function mLe(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,i=(t-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+i),n}const pLe=[31,null,31,30,31,30,31,31,30,31,30,31];function jK(e){return e%400===0||e%4===0&&e%100!==0}function xLe(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(pLe[t]||(jK(e)?29:28))}function vLe(e,t){return t>=1&&t<=(jK(e)?366:365)}function gLe(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function bLe(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function yLe(e,t){return t>=0&&t<=59}function Rc(e,t,r){const n=$r(e,r?.in),s=n.getFullYear(),i=n.getDate(),o=yn(e,0);o.setFullYear(s,t,15),o.setHours(0,0,0,0);const l=tFe(o);return n.setMonth(t,Math.min(i,l)),n}function IN(e,t,r){const n=$r(e,r?.in);return n.setHours(t),n}function PN(e,t,r){const n=$r(e,r?.in);return n.setMinutes(t),n}function Gv(e,t,r){const n=$r(e,r?.in),s=Math.trunc(n.getMonth()/3)+1,i=t-s;return Rc(n,n.getMonth()+i*3)}function ON(e,t,r){const n=$r(e,r?.in);return n.setSeconds(t),n}function wu(e,t,r){const n=$r(e,r?.in);return isNaN(+n)?yn(e,NaN):(n.setFullYear(t),n)}function px(e,t,r){return Rd(e,-t,r)}function NK(e,t,r){return gI(e,-1,r)}function t7(e,t,r){return g2(e,-1,r)}function q0(e,t,r){return Kh(e,-t,r)}var jLe=typeof document<"u",NLe=function(){},S2=jLe?N.useLayoutEffect:NLe;const wLe={...VN},SLe=wLe.useInsertionEffect,CLe=SLe||(e=>e());function kLe(e){const t=N.useRef(()=>{});return CLe(()=>{t.current=e}),N.useCallback(function(){for(var r=arguments.length,n=new Array(r),s=0;s<r;s++)n[s]=arguments[s];return t.current==null?void 0:t.current(...n)},[])}var _Le=typeof document<"u",ELe=function(){},MN=_Le?N.useLayoutEffect:ELe;function C2(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!C2(e[n],t[n]))return!1;return!0}if(s=Object.keys(e),r=s.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,s[n]))return!1;for(n=r;n--!==0;){const i=s[n];if(!(i==="_owner"&&e.$$typeof)&&!C2(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function wK(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function r7(e,t){const r=wK(e);return Math.round(t*r)/r}function JE(e){const t=N.useRef(e);return MN(()=>{t.current=e}),t}function DLe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=e,[u,h]=N.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[m,p]=N.useState(n);C2(m,n)||p(n);const[v,g]=N.useState(null),[b,y]=N.useState(null),C=N.useCallback(U=>{U!==D.current&&(D.current=U,g(U))},[]),w=N.useCallback(U=>{U!==E.current&&(E.current=U,y(U))},[]),k=i||v,S=o||b,D=N.useRef(null),E=N.useRef(null),T=N.useRef(u),A=c!=null,L=JE(c),P=JE(s),O=JE(d),Z=N.useCallback(()=>{if(!D.current||!E.current)return;const U={placement:t,strategy:r,middleware:m};P.current&&(U.platform=P.current),Gke(D.current,E.current,U).then(J=>{const Y={...J,isPositioned:O.current!==!1};z.current&&!C2(T.current,Y)&&(T.current=Y,Ly.flushSync(()=>{h(Y)}))})},[m,t,r,P,O]);MN(()=>{d===!1&&T.current.isPositioned&&(T.current.isPositioned=!1,h(U=>({...U,isPositioned:!1})))},[d]);const z=N.useRef(!1);MN(()=>(z.current=!0,()=>{z.current=!1}),[]),MN(()=>{if(k&&(D.current=k),S&&(E.current=S),k&&S){if(L.current)return L.current(k,S,Z);Z()}},[k,S,Z,L,A]);const K=N.useMemo(()=>({reference:D,floating:E,setReference:C,setFloating:w}),[C,w]),B=N.useMemo(()=>({reference:k,floating:S}),[k,S]),Q=N.useMemo(()=>{const U={position:r,left:0,top:0};if(!B.floating)return U;const J=r7(B.floating,u.x),Y=r7(B.floating,u.y);return l?{...U,transform:"translate("+J+"px, "+Y+"px)",...wK(B.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:J,top:Y}},[r,l,B.floating,u.x,u.y]);return N.useMemo(()=>({...u,update:Z,refs:K,elements:B,floatingStyles:Q}),[u,Z,K,B,Q])}const ALe=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:s}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?x8({element:n.current,padding:s}).fn(r):{}:n?x8({element:n,padding:s}).fn(r):{}}}},TLe=(e,t)=>({...Hke(e),options:[e,t]}),ILe=(e,t)=>({...Wke(e),options:[e,t]}),PLe=(e,t)=>({...ALe(e),options:[e,t]}),OLe={...VN};let a7=!1,MLe=0;const n7=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+MLe++;function RLe(){const[e,t]=N.useState(()=>a7?n7():void 0);return S2(()=>{e==null&&t(n7())},[]),N.useEffect(()=>{a7=!0},[]),e}const FLe=OLe.useId,SK=FLe||RLe,LLe=N.forwardRef(function(t,r){const{context:{placement:n,elements:{floating:s},middlewareData:{arrow:i,shift:o}},width:l=14,height:c=7,tipRadius:d=0,strokeWidth:u=0,staticOffset:h,stroke:m,d:p,style:{transform:v,...g}={},...b}=t,y=SK(),[C,w]=N.useState(!1);if(S2(()=>{if(!s)return;Yc(s).direction==="rtl"&&w(!0)},[s]),!s)return null;const[k,S]=n.split("-"),D=k==="top"||k==="bottom";let E=h;(D&&o!=null&&o.x||!D&&o!=null&&o.y)&&(E=null);const T=u*2,A=T/2,L=l/2*(d/-8+1),P=c/2*d/4,O=!!p,Z=E&&S==="end"?"bottom":"top";let z=E&&S==="end"?"right":"left";E&&C&&(z=S==="end"?"left":"right");const K=i?.x!=null?E||i.x:"",B=i?.y!=null?E||i.y:"",Q=p||"M0,0"+(" H"+l)+(" L"+(l-L)+","+(c-P))+(" Q"+l/2+","+c+" "+L+","+(c-P))+" Z",U={top:O?"rotate(180deg)":"",left:O?"rotate(90deg)":"rotate(-90deg)",bottom:O?"":"rotate(180deg)",right:O?"rotate(-90deg)":"rotate(90deg)"}[k];return a.jsxs("svg",{...b,"aria-hidden":!0,ref:r,width:O?l:l+T,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[z]:K,[Z]:B,[k]:D||O?"100%":"calc(100% - "+T/2+"px)",transform:[U,v].filter(J=>!!J).join(" "),...g},children:[T>0&&a.jsx("path",{clipPath:"url(#"+y+")",fill:"none",stroke:m,strokeWidth:T+(p?0:1),d:Q}),a.jsx("path",{stroke:T&&!p?b.fill:"none",d:Q}),a.jsx("clipPath",{id:y,children:a.jsx("rect",{x:-A,y:A*(O?-1:1),width:l+T,height:l})})]})});function BLe(){const e=new Map;return{emit(t,r){var n;(n=e.get(t))==null||n.forEach(s=>s(r))},on(t,r){e.has(t)||e.set(t,new Set),e.get(t).add(r)},off(t,r){var n;(n=e.get(t))==null||n.delete(r)}}}const ULe=N.createContext(null),$Le=N.createContext(null),VLe=()=>{var e;return((e=N.useContext(ULe))==null?void 0:e.id)||null},qLe=()=>N.useContext($Le);function zLe(e){const{open:t=!1,onOpenChange:r,elements:n}=e,s=SK(),i=N.useRef({}),[o]=N.useState(()=>BLe()),l=VLe()!=null,[c,d]=N.useState(n.reference),u=kLe((p,v,g)=>{i.current.openEvent=p?v:void 0,o.emit("openchange",{open:p,event:v,reason:g,nested:l}),r?.(p,v,g)}),h=N.useMemo(()=>({setPositionReference:d}),[]),m=N.useMemo(()=>({reference:c||n.reference||null,floating:n.floating||null,domReference:n.reference}),[c,n.reference,n.floating]);return N.useMemo(()=>({dataRef:i,open:t,onOpenChange:u,elements:m,events:o,floatingId:s,refs:h}),[t,u,m,o,s,h])}function HLe(e){e===void 0&&(e={});const{nodeId:t}=e,r=zLe({...e,elements:{reference:null,floating:null,...e.elements}}),n=e.rootContext||r,s=n.elements,[i,o]=N.useState(null),[l,c]=N.useState(null),u=s?.domReference||i,h=N.useRef(null),m=qLe();S2(()=>{u&&(h.current=u)},[u]);const p=DLe({...e,elements:{...s,...l&&{reference:l}}}),v=N.useCallback(w=>{const k=Vo(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),getClientRects:()=>w.getClientRects(),contextElement:w}:w;c(k),p.refs.setReference(k)},[p.refs]),g=N.useCallback(w=>{(Vo(w)||w===null)&&(h.current=w,o(w)),(Vo(p.refs.reference.current)||p.refs.reference.current===null||w!==null&&!Vo(w))&&p.refs.setReference(w)},[p.refs]),b=N.useMemo(()=>({...p.refs,setReference:g,setPositionReference:v,domReference:h}),[p.refs,g,v]),y=N.useMemo(()=>({...p.elements,domReference:u}),[p.elements,u]),C=N.useMemo(()=>({...p,...n,refs:b,elements:y,nodeId:t}),[p,b,y,t,n]);return S2(()=>{n.dataRef.current.floatingContext=C;const w=m?.nodesRef.current.find(k=>k.id===t);w&&(w.context=C)}),N.useMemo(()=>({...p,context:C,refs:b,elements:y}),[p,b,y,C])}/*!
  react-datepicker v8.4.0
  https://github.com/Hacker0x01/react-datepicker
  Released under the MIT License.
*/var d3=function(t,r){return d3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},d3(t,r)};function Pi(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");d3(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ha=function(){return Ha=Object.assign||function(r){for(var n,s=1,i=arguments.length;s<i;s++){n=arguments[s];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])}return r},Ha.apply(this,arguments)};function Mu(e,t,r){if(r||arguments.length===2)for(var n=0,s=t.length,i;n<s;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}var WLe=function(e){var t=e.showTimeSelectOnly,r=t===void 0?!1:t,n=e.showTime,s=n===void 0?!1:n,i=e.className,o=e.children,l=r?"Choose Time":"Choose Date".concat(s?" and Time":"");return Gt.createElement("div",{className:i,role:"dialog","aria-label":l,"aria-modal":"true"},o)},GLe=function(e,t){var r=N.useRef(null),n=N.useRef(e);n.current=e;var s=N.useCallback(function(i){var o,l=i.composed&&i.composedPath&&i.composedPath().find(function(c){return c instanceof Node})||i.target;r.current&&!r.current.contains(l)&&(t&&l instanceof HTMLElement&&l.classList.contains(t)||(o=n.current)===null||o===void 0||o.call(n,i))},[t]);return N.useEffect(function(){return document.addEventListener("mousedown",s),function(){document.removeEventListener("mousedown",s)}},[s]),r},QS=function(e){var t=e.children,r=e.onClickOutside,n=e.className,s=e.containerRef,i=e.style,o=e.ignoreClass,l=GLe(r,o);return Gt.createElement("div",{className:n,style:i,ref:function(c){l.current=c,s&&(s.current=c)}},t)},Cr;(function(e){e.ArrowUp="ArrowUp",e.ArrowDown="ArrowDown",e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.PageUp="PageUp",e.PageDown="PageDown",e.Home="Home",e.End="End",e.Enter="Enter",e.Space=" ",e.Tab="Tab",e.Escape="Escape",e.Backspace="Backspace",e.X="x"})(Cr||(Cr={}));function CK(){var e=typeof window<"u"?window:globalThis;return e}var N1=12;function dn(e){if(e==null)return new Date;var t=typeof e=="string"?sLe(e):$r(e);return JS(t)?t:new Date}function ZE(e,t,r,n,s){s===void 0&&(s=dn());for(var i=z0(r)||z0(wI()),o=Array.isArray(t)?t:[t],l=0,c=o;l<c.length;l++){var d=c[l],u=ZFe(e,d,s,{locale:i});if(JS(u)&&(!n||e===Qn(u,d,r)))return u}return null}function JS(e,t){return b2(e)&&!Ix(e,new Date("1/1/1800"))}function Qn(e,t,r){if(r==="en")return ZB(e,t,{useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0});var n=r?z0(r):void 0;return r&&!n&&console.warn('A locale object was not found for the provided string ["'.concat(r,'"].')),n=n||z0(wI()),ZB(e,t,{locale:n,useAdditionalWeekYearTokens:!0,useAdditionalDayOfYearTokens:!0})}function Mc(e,t){var r=t.dateFormat,n=t.locale,s=Array.isArray(r)&&r.length>0?r[0]:r;return e&&Qn(e,s,n)||""}var kK=" - ";function YLe(e,t,r){if(!e)return"";var n=Mc(e,r),s=t?Mc(t,r):"";return"".concat(n).concat(kK).concat(s)}function KLe(e,t){if(!e?.length)return"";var r=e[0]?Mc(e[0],t):"";if(e.length===1)return r;if(e.length===2&&e[1]){var n=Mc(e[1],t);return"".concat(r,", ").concat(n)}var s=e.length-1;return"".concat(r," (+").concat(s,")")}function eD(e,t){var r=t.hour,n=r===void 0?0:r,s=t.minute,i=s===void 0?0:s,o=t.second,l=o===void 0?0:o;return IN(PN(ON(e,l),i),n)}function XLe(e){return bI(e)}function QLe(e,t){return Qn(e,"ddd",t)}function RN(e){return Tx(e)}function Rm(e,t,r){var n=z0(t||wI());return lf(e,{locale:n,weekStartsOn:r})}function Zh(e){return hK(e)}function Ob(e){return XS(e)}function s7(e){return o3(e)}function i7(){return Tx(dn())}function o7(e){return dK(e)}function JLe(e){return sRe(e)}function ZLe(e){return uK(e)}function _u(e,t){return e&&t?aLe(e,t):!e&&!t}function Uo(e,t){return e&&t?tLe(e,t):!e&&!t}function k2(e,t){return e&&t?rLe(e,t):!e&&!t}function za(e,t){return e&&t?aRe(e,t):!e&&!t}function tx(e,t){return e&&t?nFe(e,t):!e&&!t}function Mb(e,t,r){var n,s=Tx(t),i=dK(r);try{n=Oy(e,{start:s,end:i})}catch{n=!1}return n}function wI(){var e=CK();return e.__localeId__}function z0(e){if(typeof e=="string"){var t=CK();return t.__localeData__?t.__localeData__[e]:void 0}else return e}function e6e(e,t,r){return t(Qn(e,"EEEE",r))}function t6e(e,t){return Qn(e,"EEEEEE",t)}function r6e(e,t){return Qn(e,"EEE",t)}function SI(e,t){return Qn(Rc(dn(),e),"LLLL",t)}function _K(e,t){return Qn(Rc(dn(),e),"LLL",t)}function a6e(e,t){return Qn(Gv(dn(),e),"QQQ",t)}function Bc(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.excludeDateIntervals,l=r.includeDates,c=r.includeDateIntervals,d=r.filterDate;return w1(e,{minDate:n,maxDate:s})||i&&i.some(function(u){return u instanceof Date?za(e,u):za(e,u.date)})||o&&o.some(function(u){var h=u.start,m=u.end;return Oy(e,{start:h,end:m})})||l&&!l.some(function(u){return za(e,u)})||c&&!c.some(function(u){var h=u.start,m=u.end;return Oy(e,{start:h,end:m})})||d&&!d(dn(e))||!1}function CI(e,t){var r=t===void 0?{}:t,n=r.excludeDates,s=r.excludeDateIntervals;return s&&s.length>0?s.some(function(i){var o=i.start,l=i.end;return Oy(e,{start:o,end:l})}):n&&n.some(function(i){var o;return i instanceof Date?za(e,i):za(e,(o=i.date)!==null&&o!==void 0?o:new Date)})||!1}function EK(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate;return w1(e,{minDate:n?hK(n):void 0,maxDate:s?uK(s):void 0})||i?.some(function(c){return Uo(e,c instanceof Date?c:c.date)})||o&&!o.some(function(c){return Uo(e,c)})||l&&!l(dn(e))||!1}function uN(e,t,r,n){var s=Ea(e),i=Co(e),o=Ea(t),l=Co(t),c=Ea(n);return s===o&&s===c?i<=r&&r<=l:s<o?c===s&&i<=r||c===o&&l>=r||c<o&&c>s:!1}function n6e(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates;return w1(e,{minDate:n,maxDate:s})||i&&i.some(function(l){return Uo(l instanceof Date?l:l.date,e)})||o&&!o.some(function(l){return Uo(l,e)})||!1}function hN(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate;return w1(e,{minDate:n,maxDate:s})||i?.some(function(c){return k2(e,c instanceof Date?c:c.date)})||o&&!o.some(function(c){return k2(e,c)})||l&&!l(dn(e))||!1}function fN(e,t,r){if(!t||!r||!b2(t)||!b2(r))return!1;var n=Ea(t),s=Ea(r);return n<=e&&s>=e}function FN(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.maxDate,i=r.excludeDates,o=r.includeDates,l=r.filterDate,c=new Date(e,0,1);return w1(c,{minDate:n?XS(n):void 0,maxDate:s?fK(s):void 0})||i?.some(function(d){return _u(c,d instanceof Date?d:d.date)})||o&&!o.some(function(d){return _u(c,d)})||l&&!l(dn(c))||!1}function mN(e,t,r,n){var s=Ea(e),i=mx(e),o=Ea(t),l=mx(t),c=Ea(n);return s===o&&s===c?i<=r&&r<=l:s<o?c===s&&i<=r||c===o&&l>=r||c<o&&c>s:!1}function w1(e,t){var r,n=t===void 0?{}:t,s=n.minDate,i=n.maxDate;return(r=s&&V0(e,s)<0||i&&V0(e,i)>0)!==null&&r!==void 0?r:!1}function l7(e,t){return t.some(function(r){return Qh(r)===Qh(e)&&Jh(r)===Jh(e)&&Mm(r)===Mm(e)})}function c7(e,t){var r=t===void 0?{}:t,n=r.excludeTimes,s=r.includeTimes,i=r.filterTime;return n&&l7(e,n)||s&&!l7(e,s)||i&&!i(e)||!1}function d7(e,t){var r=t.minTime,n=t.maxTime;if(!r||!n)throw new Error("Both minTime and maxTime props required");var s=dn();s=IN(s,Qh(e)),s=PN(s,Jh(e)),s=ON(s,Mm(e));var i=dn();i=IN(i,Qh(r)),i=PN(i,Jh(r)),i=ON(i,Mm(r));var o=dn();o=IN(o,Qh(n)),o=PN(o,Jh(n)),o=ON(o,Mm(n));var l;try{l=!Oy(s,{start:i,end:o})}catch{l=!1}return l}function u7(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=px(e,1);return n&&y2(n,i)>0||s&&s.every(function(o){return y2(o,i)>0})||!1}function h7(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=Rd(e,1);return n&&y2(i,n)>0||s&&s.every(function(o){return y2(i,o)>0})||!1}function s6e(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=XS(e),o=NK(i);return n&&j2(n,o)>0||s&&s.every(function(l){return j2(l,o)>0})||!1}function i6e(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=fK(e),o=gI(i,1);return n&&j2(o,n)>0||s&&s.every(function(l){return j2(o,l)>0})||!1}function f7(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.includeDates,i=q0(e,1);return n&&N2(n,i)>0||s&&s.every(function(o){return N2(o,i)>0})||!1}function o6e(e,t){var r=t===void 0?{}:t,n=r.minDate,s=r.yearItemNumber,i=s===void 0?N1:s,o=Ob(q0(e,i)),l=Em(o,i).endPeriod,c=n&&Ea(n);return c&&c>l||!1}function m7(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.includeDates,i=Kh(e,1);return n&&N2(i,n)>0||s&&s.every(function(o){return N2(i,o)>0})||!1}function l6e(e,t){var r=t===void 0?{}:t,n=r.maxDate,s=r.yearItemNumber,i=s===void 0?N1:s,o=Kh(e,i),l=Em(o,i).startPeriod,c=n&&Ea(n);return c&&c<l||!1}function DK(e){var t=e.minDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return V0(s,t)>=0});return GB(n)}else return r?GB(r):t}function AK(e){var t=e.maxDate,r=e.includeDates;if(r&&t){var n=r.filter(function(s){return V0(s,t)<=0});return WB(n)}else return r?WB(r):t}function p7(e,t){var r;e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--highlighted");for(var n=new Map,s=0,i=e.length;s<i;s++){var o=e[s];if(Xh(o)){var l=Qn(o,"MM.dd.yyyy"),c=n.get(l)||[];c.includes(t)||(c.push(t),n.set(l,c))}else if(typeof o=="object"){var d=Object.keys(o),u=(r=d[0])!==null&&r!==void 0?r:"",h=o[u];if(typeof u=="string"&&Array.isArray(h))for(var m=0,p=h.length;m<p;m++){var v=h[m];if(v){var l=Qn(v,"MM.dd.yyyy"),c=n.get(l)||[];c.includes(u)||(c.push(u),n.set(l,c))}}}}return n}function c6e(e,t){return e.length!==t.length?!1:e.every(function(r,n){return r===t[n]})}function d6e(e,t){e===void 0&&(e=[]),t===void 0&&(t="react-datepicker__day--holidays");var r=new Map;return e.forEach(function(n){var s=n.date,i=n.holidayName;if(Xh(s)){var o=Qn(s,"MM.dd.yyyy"),l=r.get(o)||{className:"",holidayNames:[]};if(!("className"in l&&l.className===t&&c6e(l.holidayNames,[i]))){l.className=t;var c=l.holidayNames;l.holidayNames=c?Mu(Mu([],c,!0),[i],!1):[i],r.set(o,l)}}}),r}function u6e(e,t,r,n,s){for(var i=s.length,o=[],l=0;l<i;l++){var c=e,d=s[l];d&&(c=ZMe(c,Qh(d)),c=i3(c,Jh(d)),c=rRe(c,Mm(d)));var u=i3(e,(r+1)*n);Hm(c,t)&&Ix(c,u)&&d!=null&&o.push(d)}return o}function x7(e){return e<10?"0".concat(e):"".concat(e)}function Em(e,t){t===void 0&&(t=N1);var r=Math.ceil(Ea(e)/t)*t,n=r-(t-1);return{startPeriod:n,endPeriod:r}}function h6e(e){var t=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(e.getFullYear(),e.getMonth(),e.getDate(),24);return Math.round((+r-+t)/36e5)}function v7(e){var t=e.getSeconds(),r=e.getMilliseconds();return $r(e.getTime()-t*1e3-r)}function f6e(e,t){return v7(e).getTime()===v7(t).getTime()}function g7(e){if(!Xh(e))throw new Error("Invalid date");var t=new Date(e);return t.setHours(0,0,0,0),t}function b7(e,t){if(!Xh(e)||!Xh(t))throw new Error("Invalid date received");var r=g7(e),n=g7(t);return Ix(r,n)}function TK(e){return e.key===Cr.Space}var m6e=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.inputRef=Gt.createRef(),n.onTimeChange=function(s){var i,o;n.setState({time:s});var l=n.props.date,c=l instanceof Date&&!isNaN(+l),d=c?l:new Date;if(s?.includes(":")){var u=s.split(":"),h=u[0],m=u[1];d.setHours(Number(h)),d.setMinutes(Number(m))}(o=(i=n.props).onChange)===null||o===void 0||o.call(i,d)},n.renderTimeInput=function(){var s=n.state.time,i=n.props,o=i.date,l=i.timeString,c=i.customTimeInput;return c?N.cloneElement(c,{date:o,value:s,onChange:n.onTimeChange}):Gt.createElement("input",{type:"time",className:"react-datepicker-time__input",placeholder:"Time",name:"time-input",ref:n.inputRef,onClick:function(){var d;(d=n.inputRef.current)===null||d===void 0||d.focus()},required:!0,value:s,onChange:function(d){n.onTimeChange(d.target.value||l)}})},n.state={time:n.props.timeString},n}return t.getDerivedStateFromProps=function(r,n){return r.timeString!==n.time?{time:r.timeString}:null},t.prototype.render=function(){return Gt.createElement("div",{className:"react-datepicker__input-time-container"},Gt.createElement("div",{className:"react-datepicker-time__caption"},this.props.timeInputLabel),Gt.createElement("div",{className:"react-datepicker-time__input-container"},Gt.createElement("div",{className:"react-datepicker-time__input"},this.renderTimeInput())))},t}(N.Component),p6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.dayEl=N.createRef(),r.handleClick=function(n){!r.isDisabled()&&r.props.onClick&&r.props.onClick(n)},r.handleMouseEnter=function(n){!r.isDisabled()&&r.props.onMouseEnter&&r.props.onMouseEnter(n)},r.handleOnKeyDown=function(n){var s,i,o=n.key;o===Cr.Space&&(n.preventDefault(),n.key=Cr.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,n)},r.isSameDay=function(n){return za(r.props.day,n)},r.isKeyboardSelected=function(){var n;if(r.props.disabledKeyboardNavigation)return!1;var s=r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(o){return r.isSameDayOrWeek(o)}):r.isSameDayOrWeek(r.props.selected),i=r.props.preSelection&&r.isDisabled(r.props.preSelection);return!s&&r.isSameDayOrWeek(r.props.preSelection)&&!i},r.isDisabled=function(n){return n===void 0&&(n=r.props.day),Bc(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(){return CI(r.props.day,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.isStartOfWeek=function(){return za(r.props.day,Rm(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameWeek=function(n){return r.props.showWeekPicker&&za(n,Rm(r.props.day,r.props.locale,r.props.calendarStartDay))},r.isSameDayOrWeek=function(n){return r.isSameDay(n)||r.isSameWeek(n)},r.getHighLightedClass=function(){var n=r.props,s=n.day,i=n.highlightDates;if(!i)return!1;var o=Qn(s,"MM.dd.yyyy");return i.get(o)},r.getHolidaysClass=function(){var n,s=r.props,i=s.day,o=s.holidays;if(!o)return[void 0];var l=Qn(i,"MM.dd.yyyy");return o.has(l)?[(n=o.get(l))===null||n===void 0?void 0:n.className]:[void 0]},r.isInRange=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:Mb(s,i,o)},r.isInSelectingRange=function(){var n,s=r.props,i=s.day,o=s.selectsStart,l=s.selectsEnd,c=s.selectsRange,d=s.selectsDisabledDaysInRange,u=s.startDate,h=s.endDate,m=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return!(o||l||c)||!m||!d&&r.isDisabled()?!1:o&&h&&(Ix(m,h)||tx(m,h))?Mb(i,m,h):l&&u&&(Hm(m,u)||tx(m,u))||c&&u&&!h&&(Hm(m,u)||tx(m,u))?Mb(i,u,m):!1},r.isSelectingRangeStart=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.startDate,l=s.selectsStart,c=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return l?za(i,c):za(i,o)},r.isSelectingRangeEnd=function(){var n;if(!r.isInSelectingRange())return!1;var s=r.props,i=s.day,o=s.endDate,l=s.selectsEnd,c=s.selectsRange,d=(n=r.props.selectingDate)!==null&&n!==void 0?n:r.props.preSelection;return l||c?za(i,d):za(i,o)},r.isRangeStart=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:za(i,s)},r.isRangeEnd=function(){var n=r.props,s=n.day,i=n.startDate,o=n.endDate;return!i||!o?!1:za(o,s)},r.isWeekend=function(){var n=eFe(r.props.day);return n===0||n===6},r.isAfterMonth=function(){return r.props.month!==void 0&&(r.props.month+1)%12===Co(r.props.day)},r.isBeforeMonth=function(){return r.props.month!==void 0&&(Co(r.props.day)+1)%12===r.props.month},r.isCurrentDay=function(){return r.isSameDay(dn())},r.isSelected=function(){var n;return r.props.selectsMultiple?(n=r.props.selectedDates)===null||n===void 0?void 0:n.some(function(s){return r.isSameDayOrWeek(s)}):r.isSameDayOrWeek(r.props.selected)},r.getClassNames=function(n){var s=r.props.dayClassName?r.props.dayClassName(n):void 0;return pa("react-datepicker__day",s,"react-datepicker__day--"+QLe(r.props.day),{"react-datepicker__day--disabled":r.isDisabled(),"react-datepicker__day--excluded":r.isExcluded(),"react-datepicker__day--selected":r.isSelected(),"react-datepicker__day--keyboard-selected":r.isKeyboardSelected(),"react-datepicker__day--range-start":r.isRangeStart(),"react-datepicker__day--range-end":r.isRangeEnd(),"react-datepicker__day--in-range":r.isInRange(),"react-datepicker__day--in-selecting-range":r.isInSelectingRange(),"react-datepicker__day--selecting-range-start":r.isSelectingRangeStart(),"react-datepicker__day--selecting-range-end":r.isSelectingRangeEnd(),"react-datepicker__day--today":r.isCurrentDay(),"react-datepicker__day--weekend":r.isWeekend(),"react-datepicker__day--outside-month":r.isAfterMonth()||r.isBeforeMonth()},r.getHighLightedClass(),r.getHolidaysClass())},r.getAriaLabel=function(){var n=r.props,s=n.day,i=n.ariaLabelPrefixWhenEnabled,o=i===void 0?"Choose":i,l=n.ariaLabelPrefixWhenDisabled,c=l===void 0?"Not available":l,d=r.isDisabled()||r.isExcluded()?c:o;return"".concat(d," ").concat(Qn(s,"PPPP",r.props.locale))},r.getTitle=function(){var n=r.props,s=n.day,i=n.holidays,o=i===void 0?new Map:i,l=n.excludeDates,c=Qn(s,"MM.dd.yyyy"),d=[];return o.has(c)&&d.push.apply(d,o.get(c).holidayNames),r.isExcluded()&&d.push(l?.filter(function(u){return u instanceof Date?za(u,s):za(u?.date,s)}).map(function(u){if(!(u instanceof Date))return u?.message})),d.join(", ")},r.getTabIndex=function(){var n=r.props.selected,s=r.props.preSelection,i=!(r.props.showWeekPicker&&(r.props.showWeekNumber||!r.isStartOfWeek()))&&(r.isKeyboardSelected()||r.isSameDay(n)&&za(s,n))?0:-1;return i},r.handleFocusDay=function(){var n;r.shouldFocusDay()&&((n=r.dayEl.current)===null||n===void 0||n.focus({preventScroll:!0}))},r.renderDayContents=function(){return r.props.monthShowsDuplicateDaysEnd&&r.isAfterMonth()||r.props.monthShowsDuplicateDaysStart&&r.isBeforeMonth()?null:r.props.renderDayContents?r.props.renderDayContents(e7(r.props.day),r.props.day):e7(r.props.day)},r.render=function(){return Gt.createElement("div",{ref:r.dayEl,className:r.getClassNames(r.props.day),onKeyDown:r.handleOnKeyDown,onClick:r.handleClick,onMouseEnter:r.props.usePointerEvent?void 0:r.handleMouseEnter,onPointerEnter:r.props.usePointerEvent?r.handleMouseEnter:void 0,tabIndex:r.getTabIndex(),"aria-label":r.getAriaLabel(),role:"option",title:r.getTitle(),"aria-disabled":r.isDisabled(),"aria-current":r.isCurrentDay()?"date":void 0,"aria-selected":r.isSelected()||r.isInRange()},r.renderDayContents(),r.getTitle()!==""&&Gt.createElement("span",{className:"overlay"},r.getTitle()))},r}return t.prototype.componentDidMount=function(){this.handleFocusDay()},t.prototype.componentDidUpdate=function(){this.handleFocusDay()},t.prototype.shouldFocusDay=function(){var r=!1;return this.getTabIndex()===0&&this.isSameDay(this.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(r=!0),this.props.inline&&!this.props.shouldFocusDayInline&&(r=!1),this.isDayActiveElement()&&(r=!0),this.isDuplicateDay()&&(r=!1)),r},t.prototype.isDayActiveElement=function(){var r,n,s;return((n=(r=this.props.containerRef)===null||r===void 0?void 0:r.current)===null||n===void 0?void 0:n.contains(document.activeElement))&&((s=document.activeElement)===null||s===void 0?void 0:s.classList.contains("react-datepicker__day"))},t.prototype.isDuplicateDay=function(){return this.props.monthShowsDuplicateDaysEnd&&this.isAfterMonth()||this.props.monthShowsDuplicateDaysStart&&this.isBeforeMonth()},t}(N.Component),x6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.weekNumberEl=N.createRef(),r.handleClick=function(n){r.props.onClick&&r.props.onClick(n)},r.handleOnKeyDown=function(n){var s,i,o=n.key;o===Cr.Space&&(n.preventDefault(),n.key=Cr.Enter),(i=(s=r.props).handleOnKeyDown)===null||i===void 0||i.call(s,n)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!za(r.props.date,r.props.selected)&&za(r.props.date,r.props.preSelection)},r.getTabIndex=function(){return r.props.showWeekPicker&&r.props.showWeekNumber&&(r.isKeyboardSelected()||za(r.props.date,r.props.selected)&&za(r.props.preSelection,r.props.selected))?0:-1},r.handleFocusWeekNumber=function(n){var s=!1;r.getTabIndex()===0&&!n?.isInputFocused&&za(r.props.date,r.props.preSelection)&&((!document.activeElement||document.activeElement===document.body)&&(s=!0),r.props.inline&&!r.props.shouldFocusDayInline&&(s=!1),r.props.containerRef&&r.props.containerRef.current&&r.props.containerRef.current.contains(document.activeElement)&&document.activeElement&&document.activeElement.classList.contains("react-datepicker__week-number")&&(s=!0)),s&&r.weekNumberEl.current&&r.weekNumberEl.current.focus({preventScroll:!0})},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{ariaLabelPrefix:"week "}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.handleFocusWeekNumber()},t.prototype.componentDidUpdate=function(r){this.handleFocusWeekNumber(r)},t.prototype.render=function(){var r=this.props,n=r.weekNumber,s=r.isWeekDisabled,i=r.ariaLabelPrefix,o=i===void 0?t.defaultProps.ariaLabelPrefix:i,l=r.onClick,c={"react-datepicker__week-number":!0,"react-datepicker__week-number--clickable":!!l&&!s,"react-datepicker__week-number--selected":!!l&&za(this.props.date,this.props.selected)};return Gt.createElement("div",{ref:this.weekNumberEl,className:pa(c),"aria-label":"".concat(o," ").concat(this.props.weekNumber),onClick:this.handleClick,onKeyDown:this.handleOnKeyDown,tabIndex:this.getTabIndex()},n)},t}(N.Component),v6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isDisabled=function(n){return Bc(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.handleDayClick=function(n,s){r.props.onDayClick&&r.props.onDayClick(n,s)},r.handleDayMouseEnter=function(n){r.props.onDayMouseEnter&&r.props.onDayMouseEnter(n)},r.handleWeekClick=function(n,s,i){for(var o,l,c,d=new Date(n),u=0;u<7;u++){var h=new Date(n);h.setDate(h.getDate()+u);var m=!r.isDisabled(h);if(m){d=h;break}}typeof r.props.onWeekSelect=="function"&&r.props.onWeekSelect(d,s,i),r.props.showWeekPicker&&r.handleDayClick(d,i),((o=r.props.shouldCloseOnSelect)!==null&&o!==void 0?o:t.defaultProps.shouldCloseOnSelect)&&((c=(l=r.props).setOpen)===null||c===void 0||c.call(l,!1))},r.formatWeekNumber=function(n){return r.props.formatWeekNumber?r.props.formatWeekNumber(n):XLe(n)},r.isWeekDisabled=function(){for(var n=r.startOfWeek(),s=Od(n,6),i=new Date(n);i<=s;){if(!r.isDisabled(i))return!1;i=Od(i,1)}return!0},r.renderDays=function(){var n=r.startOfWeek(),s=[],i=r.formatWeekNumber(n);if(r.props.showWeekNumber){var o=r.props.onWeekSelect||r.props.showWeekPicker?r.handleWeekClick.bind(r,n,i):void 0;s.push(Gt.createElement(x6e,Ha({key:"W"},t.defaultProps,r.props,{weekNumber:i,isWeekDisabled:r.isWeekDisabled(),date:n,onClick:o})))}return s.concat([0,1,2,3,4,5,6].map(function(l){var c=Od(n,l);return Gt.createElement(p6e,Ha({},t.defaultProps,r.props,{ariaLabelPrefixWhenEnabled:r.props.chooseDayAriaLabelPrefix,ariaLabelPrefixWhenDisabled:r.props.disabledDayAriaLabelPrefix,key:c.valueOf(),day:c,onClick:r.handleDayClick.bind(r,c),onMouseEnter:r.handleDayMouseEnter.bind(r,c)}))}))},r.startOfWeek=function(){return Rm(r.props.day,r.props.locale,r.props.calendarStartDay)},r.isKeyboardSelected=function(){return!r.props.disabledKeyboardNavigation&&!za(r.startOfWeek(),r.props.selected)&&za(r.startOfWeek(),r.props.preSelection)},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{shouldCloseOnSelect:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r={"react-datepicker__week":!0,"react-datepicker__week--selected":za(this.startOfWeek(),this.props.selected),"react-datepicker__week--keyboard-selected":this.isKeyboardSelected()};return Gt.createElement("div",{className:pa(r)},this.renderDays())},t}(N.Component),Cb,g6e=6,g0={TWO_COLUMNS:"two_columns",THREE_COLUMNS:"three_columns",FOUR_COLUMNS:"four_columns"},tD=(Cb={},Cb[g0.TWO_COLUMNS]={grid:[[0,1],[2,3],[4,5],[6,7],[8,9],[10,11]],verticalNavigationOffset:2},Cb[g0.THREE_COLUMNS]={grid:[[0,1,2],[3,4,5],[6,7,8],[9,10,11]],verticalNavigationOffset:3},Cb[g0.FOUR_COLUMNS]={grid:[[0,1,2,3],[4,5,6,7],[8,9,10,11]],verticalNavigationOffset:4},Cb),pN=1;function y7(e,t){return e?g0.FOUR_COLUMNS:t?g0.TWO_COLUMNS:g0.THREE_COLUMNS}var b6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.MONTH_REFS=Mu([],Array(12),!0).map(function(){return N.createRef()}),r.QUARTER_REFS=Mu([],Array(4),!0).map(function(){return N.createRef()}),r.isDisabled=function(n){return Bc(n,{minDate:r.props.minDate,maxDate:r.props.maxDate,excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals,includeDateIntervals:r.props.includeDateIntervals,includeDates:r.props.includeDates,filterDate:r.props.filterDate})},r.isExcluded=function(n){return CI(n,{excludeDates:r.props.excludeDates,excludeDateIntervals:r.props.excludeDateIntervals})},r.handleDayClick=function(n,s){var i,o;(o=(i=r.props).onDayClick)===null||o===void 0||o.call(i,n,s,r.props.orderInDisplay)},r.handleDayMouseEnter=function(n){var s,i;(i=(s=r.props).onDayMouseEnter)===null||i===void 0||i.call(s,n)},r.handleMouseLeave=function(){var n,s;(s=(n=r.props).onMouseLeave)===null||s===void 0||s.call(n)},r.isRangeStartMonth=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Uo(Rc(i,n),o)},r.isRangeStartQuarter=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:k2(Gv(i,n),o)},r.isRangeEndMonth=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:Uo(Rc(i,n),l)},r.isRangeEndQuarter=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate;return!o||!l?!1:k2(Gv(i,n),l)},r.isInSelectingRangeMonth=function(n){var s,i=r.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,u=i.startDate,h=i.endDate,m=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||d)||!m?!1:l&&h?uN(m,h,n,o):c&&u||d&&u&&!h?uN(u,m,n,o):!1},r.isSelectingMonthRangeStart=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var i=r.props,o=i.day,l=i.startDate,c=i.selectsStart,d=Rc(o,n),u=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c?Uo(d,u):Uo(d,l)},r.isSelectingMonthRangeEnd=function(n){var s;if(!r.isInSelectingRangeMonth(n))return!1;var i=r.props,o=i.day,l=i.endDate,c=i.selectsEnd,d=i.selectsRange,u=Rc(o,n),h=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return c||d?Uo(u,h):Uo(u,l)},r.isInSelectingRangeQuarter=function(n){var s,i=r.props,o=i.day,l=i.selectsStart,c=i.selectsEnd,d=i.selectsRange,u=i.startDate,h=i.endDate,m=(s=r.props.selectingDate)!==null&&s!==void 0?s:r.props.preSelection;return!(l||c||d)||!m?!1:l&&h?mN(m,h,n,o):c&&u||d&&u&&!h?mN(u,m,n,o):!1},r.isWeekInMonth=function(n){var s=r.props.day,i=Od(n,6);return Uo(n,s)||Uo(i,s)},r.isCurrentMonth=function(n,s){return Ea(n)===Ea(dn())&&s===Co(dn())},r.isCurrentQuarter=function(n,s){return Ea(n)===Ea(dn())&&s===mx(dn())},r.isSelectedMonth=function(n,s,i){return Co(i)===s&&Ea(n)===Ea(i)},r.isSelectMonthInList=function(n,s,i){return i.some(function(o){return r.isSelectedMonth(n,s,o)})},r.isSelectedQuarter=function(n,s,i){return mx(n)===s&&Ea(n)===Ea(i)},r.isMonthSelected=function(){var n=r.props,s=n.day,i=n.selected,o=n.selectedDates,l=n.selectsMultiple,c=Co(s);return l?o?.some(function(d){return r.isSelectedMonth(s,c,d)}):!!i&&r.isSelectedMonth(s,c,i)},r.renderWeeks=function(){for(var n=[],s=r.props.fixedHeight,i=0,o=!1,l=Rm(Zh(r.props.day),r.props.locale,r.props.calendarStartDay),c=function(v){return r.props.showWeekPicker?Rm(v,r.props.locale,r.props.calendarStartDay):r.props.preSelection},d=function(v){return r.props.showWeekPicker?Rm(v,r.props.locale,r.props.calendarStartDay):r.props.selected},u=r.props.selected?d(r.props.selected):void 0,h=r.props.preSelection?c(r.props.preSelection):void 0;n.push(Gt.createElement(v6e,Ha({},r.props,{ariaLabelPrefix:r.props.weekAriaLabelPrefix,key:i,day:l,month:Co(r.props.day),onDayClick:r.handleDayClick,onDayMouseEnter:r.handleDayMouseEnter,selected:u,preSelection:h,showWeekNumber:r.props.showWeekNumbers}))),!o;){i++,l=g2(l,1);var m=s&&i>=g6e,p=!s&&!r.isWeekInMonth(l);if(m||p)if(r.props.peekNextMonth)o=!0;else break}return n},r.onMonthClick=function(n,s){var i=r.isMonthDisabledForLabelDate(s),o=i.isDisabled,l=i.labelDate;o||r.handleDayClick(Zh(l),n)},r.onMonthMouseEnter=function(n){var s=r.isMonthDisabledForLabelDate(n),i=s.isDisabled,o=s.labelDate;i||r.handleDayMouseEnter(Zh(o))},r.handleMonthNavigation=function(n,s){var i,o,l,c;(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=r.MONTH_REFS[n])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus()},r.handleKeyboardNavigation=function(n,s,i){var o,l=r.props,c=l.selected,d=l.preSelection,u=l.setPreSelection,h=l.minDate,m=l.maxDate,p=l.showFourColumnMonthYearPicker,v=l.showTwoColumnMonthYearPicker;if(d){var g=y7(p,v),b=r.getVerticalOffset(g),y=(o=tD[g])===null||o===void 0?void 0:o.grid,C=function(E,T,A){var L,P,O=T,Z=A;switch(E){case Cr.ArrowRight:O=Rd(T,pN),Z=A===11?0:A+pN;break;case Cr.ArrowLeft:O=px(T,pN),Z=A===0?11:A-pN;break;case Cr.ArrowUp:O=px(T,b),Z=!((L=y?.[0])===null||L===void 0)&&L.includes(A)?A+12-b:A-b;break;case Cr.ArrowDown:O=Rd(T,b),Z=!((P=y?.[y.length-1])===null||P===void 0)&&P.includes(A)?A-12+b:A+b;break}return{newCalculatedDate:O,newCalculatedMonth:Z}},w=function(E,T,A){for(var L=40,P=E,O=!1,Z=0,z=C(P,T,A),K=z.newCalculatedDate,B=z.newCalculatedMonth;!O;){if(Z>=L){K=T,B=A;break}if(h&&K<h){P=Cr.ArrowRight;var Q=C(P,K,B);K=Q.newCalculatedDate,B=Q.newCalculatedMonth}if(m&&K>m){P=Cr.ArrowLeft;var Q=C(P,K,B);K=Q.newCalculatedDate,B=Q.newCalculatedMonth}if(n6e(K,r.props)){var Q=C(P,K,B);K=Q.newCalculatedDate,B=Q.newCalculatedMonth}else O=!0;Z++}return{newCalculatedDate:K,newCalculatedMonth:B}};if(s===Cr.Enter){r.isMonthDisabled(i)||(r.onMonthClick(n,i),u?.(c));return}var k=w(s,d,i),S=k.newCalculatedDate,D=k.newCalculatedMonth;switch(s){case Cr.ArrowRight:case Cr.ArrowLeft:case Cr.ArrowUp:case Cr.ArrowDown:r.handleMonthNavigation(D,S);break}}},r.getVerticalOffset=function(n){var s,i;return(i=(s=tD[n])===null||s===void 0?void 0:s.verticalNavigationOffset)!==null&&i!==void 0?i:0},r.onMonthKeyDown=function(n,s){var i=r.props,o=i.disabledKeyboardNavigation,l=i.handleOnMonthKeyDown,c=n.key;c!==Cr.Tab&&n.preventDefault(),o||r.handleKeyboardNavigation(n,c,s),l&&l(n)},r.onQuarterClick=function(n,s){var i=Gv(r.props.day,s);hN(i,r.props)||r.handleDayClick(s7(i),n)},r.onQuarterMouseEnter=function(n){var s=Gv(r.props.day,n);hN(s,r.props)||r.handleDayMouseEnter(s7(s))},r.handleQuarterNavigation=function(n,s){var i,o,l,c;r.isDisabled(s)||r.isExcluded(s)||((o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,s),(c=(l=r.QUARTER_REFS[n-1])===null||l===void 0?void 0:l.current)===null||c===void 0||c.focus())},r.onQuarterKeyDown=function(n,s){var i,o,l=n.key;if(!r.props.disabledKeyboardNavigation)switch(l){case Cr.Enter:r.onQuarterClick(n,s),(o=(i=r.props).setPreSelection)===null||o===void 0||o.call(i,r.props.selected);break;case Cr.ArrowRight:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===4?1:s+1,gI(r.props.preSelection,1));break;case Cr.ArrowLeft:if(!r.props.preSelection)break;r.handleQuarterNavigation(s===1?4:s-1,NK(r.props.preSelection));break}},r.isMonthDisabledForLabelDate=function(n){var s,i=r.props,o=i.day,l=i.minDate,c=i.maxDate,d=i.excludeDates,u=i.includeDates,h=Rc(o,n);return{isDisabled:(s=(l||c||d||u)&&EK(h,r.props))!==null&&s!==void 0?s:!1,labelDate:h}},r.isMonthDisabled=function(n){var s=r.isMonthDisabledForLabelDate(n).isDisabled;return s},r.getMonthClassNames=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate,c=s.preSelection,d=s.monthClassName,u=d?d(Rc(i,n)):void 0,h=r.getSelection();return pa("react-datepicker__month-text","react-datepicker__month-".concat(n),u,{"react-datepicker__month-text--disabled":r.isMonthDisabled(n),"react-datepicker__month-text--selected":h?r.isSelectMonthInList(i,n,h):void 0,"react-datepicker__month-text--keyboard-selected":!r.props.disabledKeyboardNavigation&&c&&r.isSelectedMonth(i,n,c)&&!r.isMonthSelected()&&!r.isMonthDisabled(n),"react-datepicker__month-text--in-selecting-range":r.isInSelectingRangeMonth(n),"react-datepicker__month-text--in-range":o&&l?uN(o,l,n,i):void 0,"react-datepicker__month-text--range-start":r.isRangeStartMonth(n),"react-datepicker__month-text--range-end":r.isRangeEndMonth(n),"react-datepicker__month-text--selecting-range-start":r.isSelectingMonthRangeStart(n),"react-datepicker__month-text--selecting-range-end":r.isSelectingMonthRangeEnd(n),"react-datepicker__month-text--today":r.isCurrentMonth(i,n)})},r.getTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=Co(r.props.preSelection),i=r.isMonthDisabledForLabelDate(s).isDisabled,o=n===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getQuarterTabIndex=function(n){if(r.props.preSelection==null)return"-1";var s=mx(r.props.preSelection),i=hN(r.props.day,r.props),o=n===s&&!(i||r.props.disabledKeyboardNavigation)?"0":"-1";return o},r.getAriaLabel=function(n){var s=r.props,i=s.chooseDayAriaLabelPrefix,o=i===void 0?"Choose":i,l=s.disabledDayAriaLabelPrefix,c=l===void 0?"Not available":l,d=s.day,u=s.locale,h=Rc(d,n),m=r.isDisabled(h)||r.isExcluded(h)?c:o;return"".concat(m," ").concat(Qn(h,"MMMM yyyy",u))},r.getQuarterClassNames=function(n){var s=r.props,i=s.day,o=s.startDate,l=s.endDate,c=s.selected,d=s.minDate,u=s.maxDate,h=s.excludeDates,m=s.includeDates,p=s.filterDate,v=s.preSelection,g=s.disabledKeyboardNavigation,b=(d||u||h||m||p)&&hN(Gv(i,n),r.props);return pa("react-datepicker__quarter-text","react-datepicker__quarter-".concat(n),{"react-datepicker__quarter-text--disabled":b,"react-datepicker__quarter-text--selected":c?r.isSelectedQuarter(i,n,c):void 0,"react-datepicker__quarter-text--keyboard-selected":!g&&v&&r.isSelectedQuarter(i,n,v)&&!b,"react-datepicker__quarter-text--in-selecting-range":r.isInSelectingRangeQuarter(n),"react-datepicker__quarter-text--in-range":o&&l?mN(o,l,n,i):void 0,"react-datepicker__quarter-text--range-start":r.isRangeStartQuarter(n),"react-datepicker__quarter-text--range-end":r.isRangeEndQuarter(n),"react-datepicker__quarter-text--today":r.isCurrentQuarter(i,n)})},r.getMonthContent=function(n){var s=r.props,i=s.showFullMonthYearPicker,o=s.renderMonthContent,l=s.locale,c=s.day,d=_K(n,l),u=SI(n,l);return o?o(n,d,u,c):i?u:d},r.getQuarterContent=function(n){var s,i=r.props,o=i.renderQuarterContent,l=i.locale,c=a6e(n,l);return(s=o?.(n,c))!==null&&s!==void 0?s:c},r.renderMonths=function(){var n,s=r.props,i=s.showTwoColumnMonthYearPicker,o=s.showFourColumnMonthYearPicker,l=s.day,c=s.selected,d=(n=tD[y7(o,i)])===null||n===void 0?void 0:n.grid;return d?.map(function(u,h){return Gt.createElement("div",{className:"react-datepicker__month-wrapper",key:h},u.map(function(m,p){return Gt.createElement("div",{ref:r.MONTH_REFS[m],key:p,onClick:function(v){r.onMonthClick(v,m)},onKeyDown:function(v){TK(v)&&(v.preventDefault(),v.key=Cr.Enter),r.onMonthKeyDown(v,m)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onMonthMouseEnter(m)},onPointerEnter:r.props.usePointerEvent?function(){return r.onMonthMouseEnter(m)}:void 0,tabIndex:Number(r.getTabIndex(m)),className:r.getMonthClassNames(m),"aria-disabled":r.isMonthDisabled(m),role:"option","aria-label":r.getAriaLabel(m),"aria-current":r.isCurrentMonth(l,m)?"date":void 0,"aria-selected":c?r.isSelectedMonth(l,m,c):void 0},r.getMonthContent(m))}))})},r.renderQuarters=function(){var n=r.props,s=n.day,i=n.selected,o=[1,2,3,4];return Gt.createElement("div",{className:"react-datepicker__quarter-wrapper"},o.map(function(l,c){return Gt.createElement("div",{key:c,ref:r.QUARTER_REFS[c],role:"option",onClick:function(d){r.onQuarterClick(d,l)},onKeyDown:function(d){r.onQuarterKeyDown(d,l)},onMouseEnter:r.props.usePointerEvent?void 0:function(){return r.onQuarterMouseEnter(l)},onPointerEnter:r.props.usePointerEvent?function(){return r.onQuarterMouseEnter(l)}:void 0,className:r.getQuarterClassNames(l),"aria-selected":i?r.isSelectedQuarter(s,l,i):void 0,tabIndex:Number(r.getQuarterTabIndex(l)),"aria-current":r.isCurrentQuarter(s,l)?"date":void 0},r.getQuarterContent(l))}))},r.getClassNames=function(){var n=r.props,s=n.selectingDate,i=n.selectsStart,o=n.selectsEnd,l=n.showMonthYearPicker,c=n.showQuarterYearPicker,d=n.showWeekPicker;return pa("react-datepicker__month",{"react-datepicker__month--selecting-range":s&&(i||o)},{"react-datepicker__monthPicker":l},{"react-datepicker__quarterPicker":c},{"react-datepicker__weekPicker":d})},r}return t.prototype.getSelection=function(){var r=this.props,n=r.selected,s=r.selectedDates,i=r.selectsMultiple;if(i)return s;if(n)return[n]},t.prototype.render=function(){var r=this.props,n=r.showMonthYearPicker,s=r.showQuarterYearPicker,i=r.day,o=r.ariaLabelPrefix,l=o===void 0?"Month ":o,c=l?l.trim()+" ":"";return Gt.createElement("div",{className:this.getClassNames(),onMouseLeave:this.props.usePointerEvent?void 0:this.handleMouseLeave,onPointerLeave:this.props.usePointerEvent?this.handleMouseLeave:void 0,"aria-label":"".concat(c).concat(Qn(i,"MMMM, yyyy",this.props.locale)),role:"listbox"},n?this.renderMonths():s?this.renderQuarters():this.renderWeeks())},t}(N.Component),y6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.isSelectedMonth=function(n){return r.props.month===n},r.renderOptions=function(){return r.props.monthNames.map(function(n,s){return Gt.createElement("div",{className:r.isSelectedMonth(s)?"react-datepicker__month-option react-datepicker__month-option--selected_month":"react-datepicker__month-option",key:n,onClick:r.onChange.bind(r,s),"aria-selected":r.isSelectedMonth(s)?"true":void 0},r.isSelectedMonth(s)?Gt.createElement("span",{className:"react-datepicker__month-option--selected"},"✓"):"",n)})},r.onChange=function(n){return r.props.onChange(n)},r.handleClickOutside=function(){return r.props.onCancel()},r}return t.prototype.render=function(){return Gt.createElement(QS,{className:"react-datepicker__month-dropdown",onClickOutside:this.handleClickOutside},this.renderOptions())},t}(N.Component),j6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(n){return n.map(function(s,i){return Gt.createElement("option",{key:s,value:i},s)})},r.renderSelectMode=function(n){return Gt.createElement("select",{value:r.props.month,className:"react-datepicker__month-select",onChange:function(s){return r.onChange(parseInt(s.target.value))}},r.renderSelectOptions(n))},r.renderReadView=function(n,s){return Gt.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-read-view",onClick:r.toggleDropdown},Gt.createElement("span",{className:"react-datepicker__month-read-view--down-arrow"}),Gt.createElement("span",{className:"react-datepicker__month-read-view--selected-month"},s[r.props.month]))},r.renderDropdown=function(n){return Gt.createElement(y6e,Ha({key:"dropdown"},r.props,{monthNames:n,onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(n){var s=r.state.dropdownVisible,i=[r.renderReadView(!s,n)];return s&&i.unshift(r.renderDropdown(n)),i},r.onChange=function(n){r.toggleDropdown(),n!==r.props.month&&r.props.onChange(n)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r=this,n=[0,1,2,3,4,5,6,7,8,9,10,11].map(this.props.useShortMonthInDropdown?function(i){return _K(i,r.props.locale)}:function(i){return SI(i,r.props.locale)}),s;switch(this.props.dropdownMode){case"scroll":s=this.renderScrollMode(n);break;case"select":s=this.renderSelectMode(n);break}return Gt.createElement("div",{className:"react-datepicker__month-dropdown-container react-datepicker__month-dropdown-container--".concat(this.props.dropdownMode)},s)},t}(N.Component);function N6e(e,t){for(var r=[],n=Zh(e),s=Zh(t);!Hm(n,s);)r.push(dn(n)),n=Rd(n,1);return r}var w6e=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.renderOptions=function(){return n.state.monthYearsList.map(function(s){var i=c3(s),o=_u(n.props.date,s)&&Uo(n.props.date,s);return Gt.createElement("div",{className:o?"react-datepicker__month-year-option--selected_month-year":"react-datepicker__month-year-option",key:i,onClick:n.onChange.bind(n,i),"aria-selected":o?"true":void 0},o?Gt.createElement("span",{className:"react-datepicker__month-year-option--selected"},"✓"):"",Qn(s,n.props.dateFormat,n.props.locale))})},n.onChange=function(s){return n.props.onChange(s)},n.handleClickOutside=function(){n.props.onCancel()},n.state={monthYearsList:N6e(n.props.minDate,n.props.maxDate)},n}return t.prototype.render=function(){var r=pa({"react-datepicker__month-year-dropdown":!0,"react-datepicker__month-year-dropdown--scrollable":this.props.scrollableMonthYearDropdown});return Gt.createElement(QS,{className:r,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(N.Component),S6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=Zh(r.props.minDate),s=Zh(r.props.maxDate),i=[];!Hm(n,s);){var o=c3(n);i.push(Gt.createElement("option",{key:o,value:o},Qn(n,r.props.dateFormat,r.props.locale))),n=Rd(n,1)}return i},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return Gt.createElement("select",{value:c3(Zh(r.props.date)),className:"react-datepicker__month-year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){var s=Qn(r.props.date,r.props.dateFormat,r.props.locale);return Gt.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__month-year-read-view",onClick:r.toggleDropdown},Gt.createElement("span",{className:"react-datepicker__month-year-read-view--down-arrow"}),Gt.createElement("span",{className:"react-datepicker__month-year-read-view--selected-month-year"},s))},r.renderDropdown=function(){return Gt.createElement(w6e,Ha({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown();var s=dn(n);_u(r.props.date,s)&&Uo(r.props.date,s)||r.props.onChange(s)},r.toggleDropdown=function(){return r.setState({dropdownVisible:!r.state.dropdownVisible})},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return Gt.createElement("div",{className:"react-datepicker__month-year-dropdown-container react-datepicker__month-year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(N.Component),C6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={height:null},r.scrollToTheSelectedTime=function(){requestAnimationFrame(function(){var n,s,i;r.list&&(r.list.scrollTop=(i=r.centerLi&&t.calcCenterPosition(r.props.monthRef?r.props.monthRef.clientHeight-((s=(n=r.header)===null||n===void 0?void 0:n.clientHeight)!==null&&s!==void 0?s:0):r.list.clientHeight,r.centerLi))!==null&&i!==void 0?i:0)})},r.handleClick=function(n){var s,i;(r.props.minTime||r.props.maxTime)&&d7(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&c7(n,r.props)||(i=(s=r.props).onChange)===null||i===void 0||i.call(s,n)},r.isSelectedTime=function(n){return r.props.selected&&f6e(r.props.selected,n)},r.isDisabledTime=function(n){return(r.props.minTime||r.props.maxTime)&&d7(n,r.props)||(r.props.excludeTimes||r.props.includeTimes||r.props.filterTime)&&c7(n,r.props)},r.liClasses=function(n){var s,i=["react-datepicker__time-list-item",r.props.timeClassName?r.props.timeClassName(n):void 0];return r.isSelectedTime(n)&&i.push("react-datepicker__time-list-item--selected"),r.isDisabledTime(n)&&i.push("react-datepicker__time-list-item--disabled"),r.props.injectTimes&&(Qh(n)*3600+Jh(n)*60+Mm(n))%(((s=r.props.intervals)!==null&&s!==void 0?s:t.defaultProps.intervals)*60)!==0&&i.push("react-datepicker__time-list-item--injected"),i.join(" ")},r.handleOnKeyDown=function(n,s){var i,o;n.key===Cr.Space&&(n.preventDefault(),n.key=Cr.Enter),(n.key===Cr.ArrowUp||n.key===Cr.ArrowLeft)&&n.target instanceof HTMLElement&&n.target.previousSibling&&(n.preventDefault(),n.target.previousSibling instanceof HTMLElement&&n.target.previousSibling.focus()),(n.key===Cr.ArrowDown||n.key===Cr.ArrowRight)&&n.target instanceof HTMLElement&&n.target.nextSibling&&(n.preventDefault(),n.target.nextSibling instanceof HTMLElement&&n.target.nextSibling.focus()),n.key===Cr.Enter&&r.handleClick(s),(o=(i=r.props).handleOnKeyDown)===null||o===void 0||o.call(i,n)},r.renderTimes=function(){for(var n,s=[],i=typeof r.props.format=="string"?r.props.format:"p",o=(n=r.props.intervals)!==null&&n!==void 0?n:t.defaultProps.intervals,l=r.props.selected||r.props.openToDate||dn(),c=RN(l),d=r.props.injectTimes&&r.props.injectTimes.sort(function(b,y){return b.getTime()-y.getTime()}),u=60*h6e(l),h=u/o,m=0;m<h;m++){var p=i3(c,m*o);if(s.push(p),d){var v=u6e(c,p,m,o,d);s=s.concat(v)}}var g=s.reduce(function(b,y){return y.getTime()<=l.getTime()?y:b},s[0]);return s.map(function(b){return Gt.createElement("li",{key:b.valueOf(),onClick:r.handleClick.bind(r,b),className:r.liClasses(b),ref:function(y){b===g&&(r.centerLi=y)},onKeyDown:function(y){r.handleOnKeyDown(y,b)},tabIndex:b===g?0:-1,role:"option","aria-selected":r.isSelectedTime(b)?"true":void 0,"aria-disabled":r.isDisabledTime(b)?"true":void 0},Qn(b,i,r.props.locale))})},r.renderTimeCaption=function(){return r.props.showTimeCaption===!1?Gt.createElement(Gt.Fragment,null):Gt.createElement("div",{className:"react-datepicker__header react-datepicker__header--time ".concat(r.props.showTimeSelectOnly?"react-datepicker__header--time--only":""),ref:function(n){r.header=n}},Gt.createElement("div",{className:"react-datepicker-time__header"},r.props.timeCaption))},r}return Object.defineProperty(t,"defaultProps",{get:function(){return{intervals:30,todayButton:null,timeCaption:"Time",showTimeCaption:!0}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.scrollToTheSelectedTime(),this.observeDatePickerHeightChanges()},t.prototype.componentWillUnmount=function(){var r;(r=this.resizeObserver)===null||r===void 0||r.disconnect()},t.prototype.observeDatePickerHeightChanges=function(){var r=this,n=this.props.monthRef;this.updateContainerHeight(),n&&(this.resizeObserver=new ResizeObserver(function(){r.updateContainerHeight()}),this.resizeObserver.observe(n))},t.prototype.updateContainerHeight=function(){this.props.monthRef&&this.header&&this.setState({height:this.props.monthRef.clientHeight-this.header.clientHeight})},t.prototype.render=function(){var r=this,n,s=this.state.height;return Gt.createElement("div",{className:"react-datepicker__time-container ".concat(((n=this.props.todayButton)!==null&&n!==void 0?n:t.defaultProps.todayButton)?"react-datepicker__time-container--with-today-button":"")},this.renderTimeCaption(),Gt.createElement("div",{className:"react-datepicker__time"},Gt.createElement("div",{className:"react-datepicker__time-box"},Gt.createElement("ul",{className:"react-datepicker__time-list",ref:function(i){r.list=i},style:s?{height:s}:{},role:"listbox","aria-label":this.props.timeCaption},this.renderTimes()))))},t.calcCenterPosition=function(r,n){return n.offsetTop-(r/2-n.clientHeight/2)},t}(N.Component),j7=3,k6e=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.YEAR_REFS=Mu([],Array(n.props.yearItemNumber),!0).map(function(){return N.createRef()}),n.isDisabled=function(s){return Bc(s,{minDate:n.props.minDate,maxDate:n.props.maxDate,excludeDates:n.props.excludeDates,includeDates:n.props.includeDates,filterDate:n.props.filterDate})},n.isExcluded=function(s){return CI(s,{excludeDates:n.props.excludeDates})},n.selectingDate=function(){var s;return(s=n.props.selectingDate)!==null&&s!==void 0?s:n.props.preSelection},n.updateFocusOnPaginate=function(s){var i=function(){var o,l;(l=(o=n.YEAR_REFS[s])===null||o===void 0?void 0:o.current)===null||l===void 0||l.focus()};window.requestAnimationFrame(i)},n.handleYearClick=function(s,i){n.props.onDayClick&&n.props.onDayClick(s,i)},n.handleYearNavigation=function(s,i){var o,l,c,d,u=n.props,h=u.date,m=u.yearItemNumber;if(!(h===void 0||m===void 0)){var p=Em(h,m).startPeriod;n.isDisabled(i)||n.isExcluded(i)||((l=(o=n.props).setPreSelection)===null||l===void 0||l.call(o,i),s-p<0?n.updateFocusOnPaginate(m-(p-s)):s-p>=m?n.updateFocusOnPaginate(Math.abs(m-(s-p))):(d=(c=n.YEAR_REFS[s-p])===null||c===void 0?void 0:c.current)===null||d===void 0||d.focus())}},n.isSameDay=function(s,i){return za(s,i)},n.isCurrentYear=function(s){return s===Ea(dn())},n.isRangeStart=function(s){return n.props.startDate&&n.props.endDate&&_u(wu(dn(),s),n.props.startDate)},n.isRangeEnd=function(s){return n.props.startDate&&n.props.endDate&&_u(wu(dn(),s),n.props.endDate)},n.isInRange=function(s){return fN(s,n.props.startDate,n.props.endDate)},n.isInSelectingRange=function(s){var i=n.props,o=i.selectsStart,l=i.selectsEnd,c=i.selectsRange,d=i.startDate,u=i.endDate;return!(o||l||c)||!n.selectingDate()?!1:o&&u?fN(s,n.selectingDate(),u):l&&d||c&&d&&!u?fN(s,d,n.selectingDate()):!1},n.isSelectingRangeStart=function(s){var i;if(!n.isInSelectingRange(s))return!1;var o=n.props,l=o.startDate,c=o.selectsStart,d=wu(dn(),s);return c?_u(d,(i=n.selectingDate())!==null&&i!==void 0?i:null):_u(d,l??null)},n.isSelectingRangeEnd=function(s){var i;if(!n.isInSelectingRange(s))return!1;var o=n.props,l=o.endDate,c=o.selectsEnd,d=o.selectsRange,u=wu(dn(),s);return c||d?_u(u,(i=n.selectingDate())!==null&&i!==void 0?i:null):_u(u,l??null)},n.isKeyboardSelected=function(s){if(!(n.props.date===void 0||n.props.selected==null||n.props.preSelection==null)){var i=n.props,o=i.minDate,l=i.maxDate,c=i.excludeDates,d=i.includeDates,u=i.filterDate,h=Ob(wu(n.props.date,s)),m=(o||l||c||d||u)&&FN(s,n.props);return!n.props.disabledKeyboardNavigation&&!n.props.inline&&!za(h,Ob(n.props.selected))&&za(h,Ob(n.props.preSelection))&&!m}},n.isSelectedYear=function(s){var i=n.props,o=i.selectsMultiple,l=i.selected,c=i.selectedDates;return o?c?.some(function(d){return s===Ea(d)}):!!l&&s===Ea(l)},n.onYearClick=function(s,i){var o=n.props.date;o!==void 0&&n.handleYearClick(Ob(wu(o,i)),s)},n.onYearKeyDown=function(s,i){var o,l,c=s.key,d=n.props,u=d.date,h=d.yearItemNumber,m=d.handleOnKeyDown;if(c!==Cr.Tab&&s.preventDefault(),!n.props.disabledKeyboardNavigation)switch(c){case Cr.Enter:if(n.props.selected==null)break;n.onYearClick(s,i),(l=(o=n.props).setPreSelection)===null||l===void 0||l.call(o,n.props.selected);break;case Cr.ArrowRight:if(n.props.preSelection==null)break;n.handleYearNavigation(i+1,Kh(n.props.preSelection,1));break;case Cr.ArrowLeft:if(n.props.preSelection==null)break;n.handleYearNavigation(i-1,q0(n.props.preSelection,1));break;case Cr.ArrowUp:{if(u===void 0||h===void 0||n.props.preSelection==null)break;var p=Em(u,h).startPeriod,v=j7,g=i-v;if(g<p){var b=h%v;i>=p&&i<p+b?v=b:v+=b,g=i-v}n.handleYearNavigation(g,q0(n.props.preSelection,v));break}case Cr.ArrowDown:{if(u===void 0||h===void 0||n.props.preSelection==null)break;var y=Em(u,h).endPeriod,v=j7,g=i+v;if(g>y){var b=h%v;i<=y&&i>y-b?v=b:v+=b,g=i+v}n.handleYearNavigation(g,Kh(n.props.preSelection,v));break}}m&&m(s)},n.getYearClassNames=function(s){var i=n.props,o=i.date,l=i.minDate,c=i.maxDate,d=i.excludeDates,u=i.includeDates,h=i.filterDate,m=i.yearClassName;return pa("react-datepicker__year-text","react-datepicker__year-".concat(s),o?m?.(wu(o,s)):void 0,{"react-datepicker__year-text--selected":n.isSelectedYear(s),"react-datepicker__year-text--disabled":(l||c||d||u||h)&&FN(s,n.props),"react-datepicker__year-text--keyboard-selected":n.isKeyboardSelected(s),"react-datepicker__year-text--range-start":n.isRangeStart(s),"react-datepicker__year-text--range-end":n.isRangeEnd(s),"react-datepicker__year-text--in-range":n.isInRange(s),"react-datepicker__year-text--in-selecting-range":n.isInSelectingRange(s),"react-datepicker__year-text--selecting-range-start":n.isSelectingRangeStart(s),"react-datepicker__year-text--selecting-range-end":n.isSelectingRangeEnd(s),"react-datepicker__year-text--today":n.isCurrentYear(s)})},n.getYearTabIndex=function(s){if(n.props.disabledKeyboardNavigation||n.props.preSelection==null)return"-1";var i=Ea(n.props.preSelection),o=FN(s,n.props);return s===i&&!o?"0":"-1"},n.getYearContent=function(s){return n.props.renderYearContent?n.props.renderYearContent(s):s},n}return t.prototype.render=function(){var r=this,n=[],s=this.props,i=s.date,o=s.yearItemNumber,l=s.onYearMouseEnter,c=s.onYearMouseLeave;if(i===void 0)return null;for(var d=Em(i,o),u=d.startPeriod,h=d.endPeriod,m=function(g){n.push(Gt.createElement("div",{ref:p.YEAR_REFS[g-u],onClick:function(b){r.onYearClick(b,g)},onKeyDown:function(b){TK(b)&&(b.preventDefault(),b.key=Cr.Enter),r.onYearKeyDown(b,g)},tabIndex:Number(p.getYearTabIndex(g)),className:p.getYearClassNames(g),onMouseEnter:p.props.usePointerEvent?void 0:function(b){return l(b,g)},onPointerEnter:p.props.usePointerEvent?function(b){return l(b,g)}:void 0,onMouseLeave:p.props.usePointerEvent?void 0:function(b){return c(b,g)},onPointerLeave:p.props.usePointerEvent?function(b){return c(b,g)}:void 0,key:g,"aria-current":p.isCurrentYear(g)?"date":void 0},p.getYearContent(g)))},p=this,v=u;v<=h;v++)m(v);return Gt.createElement("div",{className:"react-datepicker__year"},Gt.createElement("div",{className:"react-datepicker__year-wrapper",onMouseLeave:this.props.usePointerEvent?void 0:this.props.clearSelectingDate,onPointerLeave:this.props.usePointerEvent?this.props.clearSelectingDate:void 0},n))},t}(N.Component);function _6e(e,t,r,n){for(var s=[],i=0;i<2*t+1;i++){var o=e+t-i,l=!0;r&&(l=Ea(r)<=o),n&&l&&(l=Ea(n)>=o),l&&s.push(o)}return s}var E6e=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;n.renderOptions=function(){var l=n.props.year,c=n.state.yearsList.map(function(h){return Gt.createElement("div",{className:l===h?"react-datepicker__year-option react-datepicker__year-option--selected_year":"react-datepicker__year-option",key:h,onClick:n.onChange.bind(n,h),"aria-selected":l===h?"true":void 0},l===h?Gt.createElement("span",{className:"react-datepicker__year-option--selected"},"✓"):"",h)}),d=n.props.minDate?Ea(n.props.minDate):null,u=n.props.maxDate?Ea(n.props.maxDate):null;return(!u||!n.state.yearsList.find(function(h){return h===u}))&&c.unshift(Gt.createElement("div",{className:"react-datepicker__year-option",key:"upcoming",onClick:n.incrementYears},Gt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-upcoming"}))),(!d||!n.state.yearsList.find(function(h){return h===d}))&&c.push(Gt.createElement("div",{className:"react-datepicker__year-option",key:"previous",onClick:n.decrementYears},Gt.createElement("a",{className:"react-datepicker__navigation react-datepicker__navigation--years react-datepicker__navigation--years-previous"}))),c},n.onChange=function(l){n.props.onChange(l)},n.handleClickOutside=function(){n.props.onCancel()},n.shiftYears=function(l){var c=n.state.yearsList.map(function(d){return d+l});n.setState({yearsList:c})},n.incrementYears=function(){return n.shiftYears(1)},n.decrementYears=function(){return n.shiftYears(-1)};var s=r.yearDropdownItemNumber,i=r.scrollableYearDropdown,o=s||(i?10:5);return n.state={yearsList:_6e(n.props.year,o,n.props.minDate,n.props.maxDate)},n.dropdownRef=N.createRef(),n}return t.prototype.componentDidMount=function(){var r=this.dropdownRef.current;if(r){var n=r.children?Array.from(r.children):null,s=n?n.find(function(i){return i.ariaSelected}):null;r.scrollTop=s&&s instanceof HTMLElement?s.offsetTop+(s.clientHeight-r.clientHeight)/2:(r.scrollHeight-r.clientHeight)/2}},t.prototype.render=function(){var r=pa({"react-datepicker__year-dropdown":!0,"react-datepicker__year-dropdown--scrollable":this.props.scrollableYearDropdown});return Gt.createElement(QS,{className:r,containerRef:this.dropdownRef,onClickOutside:this.handleClickOutside},this.renderOptions())},t}(N.Component),D6e=function(e){Pi(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.state={dropdownVisible:!1},r.renderSelectOptions=function(){for(var n=r.props.minDate?Ea(r.props.minDate):1900,s=r.props.maxDate?Ea(r.props.maxDate):2100,i=[],o=n;o<=s;o++)i.push(Gt.createElement("option",{key:o,value:o},o));return i},r.onSelectChange=function(n){r.onChange(parseInt(n.target.value))},r.renderSelectMode=function(){return Gt.createElement("select",{value:r.props.year,className:"react-datepicker__year-select",onChange:r.onSelectChange},r.renderSelectOptions())},r.renderReadView=function(n){return Gt.createElement("div",{key:"read",style:{visibility:n?"visible":"hidden"},className:"react-datepicker__year-read-view",onClick:function(s){return r.toggleDropdown(s)}},Gt.createElement("span",{className:"react-datepicker__year-read-view--down-arrow"}),Gt.createElement("span",{className:"react-datepicker__year-read-view--selected-year"},r.props.year))},r.renderDropdown=function(){return Gt.createElement(E6e,Ha({key:"dropdown"},r.props,{onChange:r.onChange,onCancel:r.toggleDropdown}))},r.renderScrollMode=function(){var n=r.state.dropdownVisible,s=[r.renderReadView(!n)];return n&&s.unshift(r.renderDropdown()),s},r.onChange=function(n){r.toggleDropdown(),n!==r.props.year&&r.props.onChange(n)},r.toggleDropdown=function(n){r.setState({dropdownVisible:!r.state.dropdownVisible},function(){r.props.adjustDateOnChange&&r.handleYearChange(r.props.date,n)})},r.handleYearChange=function(n,s){var i;(i=r.onSelect)===null||i===void 0||i.call(r,n,s),r.setOpen()},r.onSelect=function(n,s){var i,o;(o=(i=r.props).onSelect)===null||o===void 0||o.call(i,n,s)},r.setOpen=function(){var n,s;(s=(n=r.props).setOpen)===null||s===void 0||s.call(n,!0)},r}return t.prototype.render=function(){var r;switch(this.props.dropdownMode){case"scroll":r=this.renderScrollMode();break;case"select":r=this.renderSelectMode();break}return Gt.createElement("div",{className:"react-datepicker__year-dropdown-container react-datepicker__year-dropdown-container--".concat(this.props.dropdownMode)},r)},t}(N.Component),A6e=["react-datepicker__year-select","react-datepicker__month-select","react-datepicker__month-year-select"],T6e=function(e){var t=(e.className||"").split(/\s+/);return A6e.some(function(r){return t.indexOf(r)>=0})},I6e=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.monthContainer=void 0,n.handleClickOutside=function(s){n.props.onClickOutside(s)},n.setClickOutsideRef=function(){return n.containerRef.current},n.handleDropdownFocus=function(s){var i,o;T6e(s.target)&&((o=(i=n.props).onDropdownFocus)===null||o===void 0||o.call(i,s))},n.getDateInView=function(){var s=n.props,i=s.preSelection,o=s.selected,l=s.openToDate,c=DK(n.props),d=AK(n.props),u=dn(),h=l||o||i;return h||(c&&Ix(u,c)?c:d&&Hm(u,d)?d:u)},n.increaseMonth=function(){n.setState(function(s){var i=s.date;return{date:Rd(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.decreaseMonth=function(){n.setState(function(s){var i=s.date;return{date:px(i,1)}},function(){return n.handleMonthChange(n.state.date)})},n.handleDayClick=function(s,i,o){n.props.onSelect(s,i,o),n.props.setPreSelection&&n.props.setPreSelection(s)},n.handleDayMouseEnter=function(s){n.setState({selectingDate:s}),n.props.onDayMouseEnter&&n.props.onDayMouseEnter(s)},n.handleMonthMouseLeave=function(){n.setState({selectingDate:void 0}),n.props.onMonthMouseLeave&&n.props.onMonthMouseLeave()},n.handleYearMouseEnter=function(s,i){n.setState({selectingDate:wu(dn(),i)}),n.props.onYearMouseEnter&&n.props.onYearMouseEnter(s,i)},n.handleYearMouseLeave=function(s,i){n.props.onYearMouseLeave&&n.props.onYearMouseLeave(s,i)},n.handleYearChange=function(s){var i,o,l,c;(o=(i=n.props).onYearChange)===null||o===void 0||o.call(i,s),n.setState({isRenderAriaLiveMessage:!0}),n.props.adjustDateOnChange&&(n.props.onSelect(s),(c=(l=n.props).setOpen)===null||c===void 0||c.call(l,!0)),n.props.setPreSelection&&n.props.setPreSelection(s)},n.getEnabledPreSelectionDateForMonth=function(s){if(!Bc(s,n.props))return s;for(var i=Zh(s),o=ZLe(s),l=nRe(o,i),c=null,d=0;d<=l;d++){var u=Od(i,d);if(!Bc(u,n.props)){c=u;break}}return c},n.handleMonthChange=function(s){var i,o,l,c=(i=n.getEnabledPreSelectionDateForMonth(s))!==null&&i!==void 0?i:s;n.handleCustomMonthChange(c),n.props.adjustDateOnChange&&(n.props.onSelect(c),(l=(o=n.props).setOpen)===null||l===void 0||l.call(o,!0)),n.props.setPreSelection&&n.props.setPreSelection(c)},n.handleCustomMonthChange=function(s){var i,o;(o=(i=n.props).onMonthChange)===null||o===void 0||o.call(i,s),n.setState({isRenderAriaLiveMessage:!0})},n.handleMonthYearChange=function(s){n.handleYearChange(s),n.handleMonthChange(s)},n.changeYear=function(s){n.setState(function(i){var o=i.date;return{date:wu(o,Number(s))}},function(){return n.handleYearChange(n.state.date)})},n.changeMonth=function(s){n.setState(function(i){var o=i.date;return{date:Rc(o,Number(s))}},function(){return n.handleMonthChange(n.state.date)})},n.changeMonthYear=function(s){n.setState(function(i){var o=i.date;return{date:wu(Rc(o,Co(s)),Ea(s))}},function(){return n.handleMonthYearChange(n.state.date)})},n.header=function(s){s===void 0&&(s=n.state.date);var i=Rm(s,n.props.locale,n.props.calendarStartDay),o=[];return n.props.showWeekNumbers&&o.push(Gt.createElement("div",{key:"W",className:"react-datepicker__day-name"},n.props.weekLabel||"#")),o.concat([0,1,2,3,4,5,6].map(function(l){var c=Od(i,l),d=n.formatWeekday(c,n.props.locale),u=n.props.weekDayClassName?n.props.weekDayClassName(c):void 0;return Gt.createElement("div",{key:l,"aria-label":Qn(c,"EEEE",n.props.locale),className:pa("react-datepicker__day-name",u)},d)}))},n.formatWeekday=function(s,i){return n.props.formatWeekDay?e6e(s,n.props.formatWeekDay,i):n.props.useWeekdaysShort?r6e(s,i):t6e(s,i)},n.decreaseYear=function(){n.setState(function(s){var i,o=s.date;return{date:q0(o,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.clearSelectingDate=function(){n.setState({selectingDate:void 0})},n.renderPreviousButton=function(){var s,i,o;if(!n.props.renderCustomHeader){var l=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=n.props.showPreviousMonths?l-1:0,d=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:c,u=px(n.state.date,d),h;switch(!0){case n.props.showMonthYearPicker:h=f7(n.state.date,n.props);break;case n.props.showYearPicker:h=o6e(n.state.date,n.props);break;case n.props.showQuarterYearPicker:h=s6e(n.state.date,n.props);break;default:h=u7(u,n.props);break}if(!(!((o=n.props.forceShowMonthNavigation)!==null&&o!==void 0?o:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&h||n.props.showTimeSelectOnly)){var m=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--previous"],p=["react-datepicker__navigation","react-datepicker__navigation--previous"],v=n.decreaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(v=n.decreaseYear),h&&n.props.showDisabledMonthNavigation&&(p.push("react-datepicker__navigation--previous--disabled"),v=void 0);var g=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,b=n.props,y=b.previousMonthButtonLabel,C=y===void 0?t.defaultProps.previousMonthButtonLabel:y,w=b.previousYearButtonLabel,k=w===void 0?t.defaultProps.previousYearButtonLabel:w,S=n.props,D=S.previousMonthAriaLabel,E=D===void 0?typeof C=="string"?C:"Previous Month":D,T=S.previousYearAriaLabel,A=T===void 0?typeof k=="string"?k:"Previous Year":T;return Gt.createElement("button",{type:"button",className:p.join(" "),onClick:v,onKeyDown:n.props.handleOnKeyDown,"aria-label":g?A:E},Gt.createElement("span",{className:m.join(" ")},g?k:C))}}},n.increaseYear=function(){n.setState(function(s){var i,o=s.date;return{date:Kh(o,n.props.showYearPicker?(i=n.props.yearItemNumber)!==null&&i!==void 0?i:t.defaultProps.yearItemNumber:1)}},function(){return n.handleYearChange(n.state.date)})},n.renderNextButton=function(){var s;if(!n.props.renderCustomHeader){var i;switch(!0){case n.props.showMonthYearPicker:i=m7(n.state.date,n.props);break;case n.props.showYearPicker:i=l6e(n.state.date,n.props);break;case n.props.showQuarterYearPicker:i=i6e(n.state.date,n.props);break;default:i=h7(n.state.date,n.props);break}if(!(!((s=n.props.forceShowMonthNavigation)!==null&&s!==void 0?s:t.defaultProps.forceShowMonthNavigation)&&!n.props.showDisabledMonthNavigation&&i||n.props.showTimeSelectOnly)){var o=["react-datepicker__navigation","react-datepicker__navigation--next"],l=["react-datepicker__navigation-icon","react-datepicker__navigation-icon--next"];n.props.showTimeSelect&&o.push("react-datepicker__navigation--next--with-time"),n.props.todayButton&&o.push("react-datepicker__navigation--next--with-today-button");var c=n.increaseMonth;(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker)&&(c=n.increaseYear),i&&n.props.showDisabledMonthNavigation&&(o.push("react-datepicker__navigation--next--disabled"),c=void 0);var d=n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker,u=n.props,h=u.nextMonthButtonLabel,m=h===void 0?t.defaultProps.nextMonthButtonLabel:h,p=u.nextYearButtonLabel,v=p===void 0?t.defaultProps.nextYearButtonLabel:p,g=n.props,b=g.nextMonthAriaLabel,y=b===void 0?typeof m=="string"?m:"Next Month":b,C=g.nextYearAriaLabel,w=C===void 0?typeof v=="string"?v:"Next Year":C;return Gt.createElement("button",{type:"button",className:o.join(" "),onClick:c,onKeyDown:n.props.handleOnKeyDown,"aria-label":d?w:y},Gt.createElement("span",{className:l.join(" ")},d?v:m))}}},n.renderCurrentMonth=function(s){s===void 0&&(s=n.state.date);var i=["react-datepicker__current-month"];return n.props.showYearDropdown&&i.push("react-datepicker__current-month--hasYearDropdown"),n.props.showMonthDropdown&&i.push("react-datepicker__current-month--hasMonthDropdown"),n.props.showMonthYearDropdown&&i.push("react-datepicker__current-month--hasMonthYearDropdown"),Gt.createElement("h2",{className:i.join(" ")},Qn(s,n.props.dateFormat,n.props.locale))},n.renderYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showYearDropdown||s))return Gt.createElement(D6e,Ha({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeYear,year:Ea(n.state.date)}))},n.renderMonthDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthDropdown||s))return Gt.createElement(j6e,Ha({},t.defaultProps,n.props,{month:Co(n.state.date),onChange:n.changeMonth}))},n.renderMonthYearDropdown=function(s){if(s===void 0&&(s=!1),!(!n.props.showMonthYearDropdown||s))return Gt.createElement(S6e,Ha({},t.defaultProps,n.props,{date:n.state.date,onChange:n.changeMonthYear}))},n.handleTodayButtonClick=function(s){n.props.onSelect(i7(),s),n.props.setPreSelection&&n.props.setPreSelection(i7())},n.renderTodayButton=function(){if(!(!n.props.todayButton||n.props.showTimeSelectOnly))return Gt.createElement("div",{className:"react-datepicker__today-button",onClick:n.handleTodayButtonClick},n.props.todayButton)},n.renderDefaultHeader=function(s){var i=s.monthDate,o=s.i;return Gt.createElement("div",{className:"react-datepicker__header ".concat(n.props.showTimeSelect?"react-datepicker__header--has-time-select":"")},n.renderCurrentMonth(i),Gt.createElement("div",{className:"react-datepicker__header__dropdown react-datepicker__header__dropdown--".concat(n.props.dropdownMode),onFocus:n.handleDropdownFocus},n.renderMonthDropdown(o!==0),n.renderMonthYearDropdown(o!==0),n.renderYearDropdown(o!==0)),Gt.createElement("div",{className:"react-datepicker__day-names"},n.header(i)))},n.renderCustomHeader=function(s){var i,o,l=s.monthDate,c=s.i;if(n.props.showTimeSelect&&!n.state.monthContainer||n.props.showTimeSelectOnly)return null;var d=u7(n.state.date,n.props),u=h7(n.state.date,n.props),h=f7(n.state.date,n.props),m=m7(n.state.date,n.props),p=!n.props.showMonthYearPicker&&!n.props.showQuarterYearPicker&&!n.props.showYearPicker;return Gt.createElement("div",{className:"react-datepicker__header react-datepicker__header--custom",onFocus:n.props.onDropdownFocus},(o=(i=n.props).renderCustomHeader)===null||o===void 0?void 0:o.call(i,Ha(Ha({},n.state),{customHeaderCount:c,monthDate:l,changeMonth:n.changeMonth,changeYear:n.changeYear,decreaseMonth:n.decreaseMonth,increaseMonth:n.increaseMonth,decreaseYear:n.decreaseYear,increaseYear:n.increaseYear,prevMonthButtonDisabled:d,nextMonthButtonDisabled:u,prevYearButtonDisabled:h,nextYearButtonDisabled:m})),p&&Gt.createElement("div",{className:"react-datepicker__day-names"},n.header(l)))},n.renderYearHeader=function(s){var i=s.monthDate,o=n.props,l=o.showYearPicker,c=o.yearItemNumber,d=c===void 0?t.defaultProps.yearItemNumber:c,u=Em(i,d),h=u.startPeriod,m=u.endPeriod;return Gt.createElement("div",{className:"react-datepicker__header react-datepicker-year-header"},l?"".concat(h," - ").concat(m):Ea(i))},n.renderHeader=function(s){var i=s.monthDate,o=s.i,l=o===void 0?0:o,c={monthDate:i,i:l};switch(!0){case n.props.renderCustomHeader!==void 0:return n.renderCustomHeader(c);case(n.props.showMonthYearPicker||n.props.showQuarterYearPicker||n.props.showYearPicker):return n.renderYearHeader(c);default:return n.renderDefaultHeader(c)}},n.renderMonths=function(){var s,i;if(!(n.props.showTimeSelectOnly||n.props.showYearPicker)){for(var o=[],l=(s=n.props.monthsShown)!==null&&s!==void 0?s:t.defaultProps.monthsShown,c=n.props.showPreviousMonths?l-1:0,d=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Kh(n.state.date,c):px(n.state.date,c),u=(i=n.props.monthSelectedIn)!==null&&i!==void 0?i:c,h=0;h<l;++h){var m=h-u+c,p=n.props.showMonthYearPicker||n.props.showQuarterYearPicker?Kh(d,m):Rd(d,m),v="month-".concat(h),g=h<l-1,b=h>0;o.push(Gt.createElement("div",{key:v,ref:function(y){n.monthContainer=y??void 0},className:"react-datepicker__month-container"},n.renderHeader({monthDate:p,i:h}),Gt.createElement(b6e,Ha({},t.defaultProps,n.props,{containerRef:n.containerRef,ariaLabelPrefix:n.props.monthAriaLabelPrefix,day:p,onDayClick:n.handleDayClick,handleOnKeyDown:n.props.handleOnDayKeyDown,handleOnMonthKeyDown:n.props.handleOnKeyDown,onDayMouseEnter:n.handleDayMouseEnter,onMouseLeave:n.handleMonthMouseLeave,orderInDisplay:h,selectingDate:n.state.selectingDate,monthShowsDuplicateDaysEnd:g,monthShowsDuplicateDaysStart:b}))))}return o}},n.renderYears=function(){if(!n.props.showTimeSelectOnly&&n.props.showYearPicker)return Gt.createElement("div",{className:"react-datepicker__year--container"},n.renderHeader({monthDate:n.state.date}),Gt.createElement(k6e,Ha({},t.defaultProps,n.props,{selectingDate:n.state.selectingDate,date:n.state.date,onDayClick:n.handleDayClick,clearSelectingDate:n.clearSelectingDate,onYearMouseEnter:n.handleYearMouseEnter,onYearMouseLeave:n.handleYearMouseLeave})))},n.renderTimeSection=function(){if(n.props.showTimeSelect&&(n.state.monthContainer||n.props.showTimeSelectOnly))return Gt.createElement(C6e,Ha({},t.defaultProps,n.props,{onChange:n.props.onTimeChange,format:n.props.timeFormat,intervals:n.props.timeIntervals,monthRef:n.state.monthContainer}))},n.renderInputTimeSection=function(){var s=n.props.selected?new Date(n.props.selected):void 0,i=s&&JS(s)&&!!n.props.selected,o=i?"".concat(x7(s.getHours()),":").concat(x7(s.getMinutes())):"";if(n.props.showTimeInput)return Gt.createElement(m6e,Ha({},t.defaultProps,n.props,{date:s,timeString:o,onChange:n.props.onTimeChange}))},n.renderAriaLiveRegion=function(){var s,i=Em(n.state.date,(s=n.props.yearItemNumber)!==null&&s!==void 0?s:t.defaultProps.yearItemNumber),o=i.startPeriod,l=i.endPeriod,c;return n.props.showYearPicker?c="".concat(o," - ").concat(l):n.props.showMonthYearPicker||n.props.showQuarterYearPicker?c=Ea(n.state.date):c="".concat(SI(Co(n.state.date),n.props.locale)," ").concat(Ea(n.state.date)),Gt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},n.state.isRenderAriaLiveMessage&&c)},n.renderChildren=function(){if(n.props.children)return Gt.createElement("div",{className:"react-datepicker__children-container"},n.props.children)},n.containerRef=N.createRef(),n.state={date:n.getDateInView(),selectingDate:void 0,monthContainer:void 0,isRenderAriaLiveMessage:!1},n}return Object.defineProperty(t,"defaultProps",{get:function(){return{monthsShown:1,forceShowMonthNavigation:!1,timeCaption:"Time",previousYearButtonLabel:"Previous Year",nextYearButtonLabel:"Next Year",previousMonthButtonLabel:"Previous Month",nextMonthButtonLabel:"Next Month",yearItemNumber:N1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var r=this;this.props.showTimeSelect&&(this.assignMonthContainer=function(){r.setState({monthContainer:r.monthContainer})}())},t.prototype.componentDidUpdate=function(r){var n=this;if(this.props.preSelection&&(!za(this.props.preSelection,r.preSelection)||this.props.monthSelectedIn!==r.monthSelectedIn)){var s=!Uo(this.state.date,this.props.preSelection);this.setState({date:this.props.preSelection},function(){return s&&n.handleCustomMonthChange(n.state.date)})}else this.props.openToDate&&!za(this.props.openToDate,r.openToDate)&&this.setState({date:this.props.openToDate})},t.prototype.render=function(){var r=this.props.container||WLe;return Gt.createElement(QS,{onClickOutside:this.handleClickOutside,style:{display:"contents"},ignoreClass:this.props.outsideClickIgnoreClass},Gt.createElement("div",{style:{display:"contents"},ref:this.containerRef},Gt.createElement(r,{className:pa("react-datepicker",this.props.className,{"react-datepicker--time-only":this.props.showTimeSelectOnly}),showTime:this.props.showTimeSelect||this.props.showTimeInput,showTimeSelectOnly:this.props.showTimeSelectOnly},this.renderAriaLiveRegion(),this.renderPreviousButton(),this.renderNextButton(),this.renderMonths(),this.renderYears(),this.renderTodayButton(),this.renderTimeSection(),this.renderInputTimeSection(),this.renderChildren())))},t}(N.Component),P6e=function(e){var t=e.icon,r=e.className,n=r===void 0?"":r,s=e.onClick,i="react-datepicker__calendar-icon";if(typeof t=="string")return Gt.createElement("i",{className:"".concat(i," ").concat(t," ").concat(n),"aria-hidden":"true",onClick:s});if(Gt.isValidElement(t)){var o=t;return Gt.cloneElement(o,{className:"".concat(o.props.className||""," ").concat(i," ").concat(n),onClick:function(l){typeof o.props.onClick=="function"&&o.props.onClick(l),typeof s=="function"&&s(l)}})}return Gt.createElement("svg",{className:"".concat(i," ").concat(n),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",onClick:s},Gt.createElement("path",{d:"M96 32V64H48C21.5 64 0 85.5 0 112v48H448V112c0-26.5-21.5-48-48-48H352V32c0-17.7-14.3-32-32-32s-32 14.3-32 32V64H160V32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192H0V464c0 26.5 21.5 48 48 48H400c26.5 0 48-21.5 48-48V192z"}))},IK=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.portalRoot=null,n.el=document.createElement("div"),n}return t.prototype.componentDidMount=function(){this.portalRoot=(this.props.portalHost||document).getElementById(this.props.portalId),this.portalRoot||(this.portalRoot=document.createElement("div"),this.portalRoot.setAttribute("id",this.props.portalId),(this.props.portalHost||document.body).appendChild(this.portalRoot)),this.portalRoot.appendChild(this.el)},t.prototype.componentWillUnmount=function(){this.portalRoot&&this.portalRoot.removeChild(this.el)},t.prototype.render=function(){return LJ.createPortal(this.props.children,this.el)},t}(N.Component),O6e="[tabindex], a, button, input, select, textarea",M6e=function(e){return(e instanceof HTMLAnchorElement||!e.disabled)&&e.tabIndex!==-1},PK=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.getTabChildren=function(){var s;return Array.prototype.slice.call((s=n.tabLoopRef.current)===null||s===void 0?void 0:s.querySelectorAll(O6e),1,-1).filter(M6e)},n.handleFocusStart=function(){var s=n.getTabChildren();s&&s.length>1&&s[s.length-1].focus()},n.handleFocusEnd=function(){var s=n.getTabChildren();s&&s.length>1&&s[0].focus()},n.tabLoopRef=N.createRef(),n}return t.prototype.render=function(){var r;return((r=this.props.enableTabLoop)!==null&&r!==void 0?r:t.defaultProps.enableTabLoop)?Gt.createElement("div",{className:"react-datepicker__tab-loop",ref:this.tabLoopRef},Gt.createElement("div",{className:"react-datepicker__tab-loop__start",tabIndex:0,onFocus:this.handleFocusStart}),this.props.children,Gt.createElement("div",{className:"react-datepicker__tab-loop__end",tabIndex:0,onFocus:this.handleFocusEnd})):this.props.children},t.defaultProps={enableTabLoop:!0},t}(N.Component);function R6e(e){var t=function(r){var n,s=typeof r.hidePopper=="boolean"?r.hidePopper:!0,i=N.useRef(null),o=HLe(Ha({open:!s,whileElementsMounted:yW,placement:r.popperPlacement,middleware:Mu([ILe({padding:15}),TLe(10),PLe({element:i})],(n=r.popperModifiers)!==null&&n!==void 0?n:[],!0)},r.popperProps)),l=Ha(Ha({},r),{hidePopper:s,popperProps:Ha(Ha({},o),{arrowRef:i})});return Gt.createElement(e,Ha({},l))};return t}var F6e=function(e){Pi(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t,"defaultProps",{get:function(){return{hidePopper:!0}},enumerable:!1,configurable:!0}),t.prototype.render=function(){var r=this.props,n=r.className,s=r.wrapperClassName,i=r.hidePopper,o=i===void 0?t.defaultProps.hidePopper:i,l=r.popperComponent,c=r.targetComponent,d=r.enableTabLoop,u=r.popperOnKeyDown,h=r.portalId,m=r.portalHost,p=r.popperProps,v=r.showArrow,g=void 0;if(!o){var b=pa("react-datepicker-popper",n);g=Gt.createElement(PK,{enableTabLoop:d},Gt.createElement("div",{ref:p.refs.setFloating,style:p.floatingStyles,className:b,"data-placement":p.placement,onKeyDown:u},l,v&&Gt.createElement(LLe,{ref:p.arrowRef,context:p.context,fill:"currentColor",strokeWidth:1,height:8,width:16,style:{transform:"translateY(-1px)"},className:"react-datepicker__triangle"})))}this.props.popperContainer&&(g=N.createElement(this.props.popperContainer,{},g)),h&&!o&&(g=Gt.createElement(IK,{portalId:h,portalHost:m},g));var y=pa("react-datepicker-wrapper",s);return Gt.createElement(Gt.Fragment,null,Gt.createElement("div",{ref:p.refs.setReference,className:y},c),g)},t}(N.Component),L6e=R6e(F6e),N7="react-datepicker-ignore-onclickoutside";function B6e(e,t){return e&&t?Co(e)!==Co(t)||Ea(e)!==Ea(t):e!==t}var rD="Date input not valid.",w7=function(e){Pi(t,e);function t(r){var n=e.call(this,r)||this;return n.calendar=null,n.input=null,n.getPreSelection=function(){return n.props.openToDate?n.props.openToDate:n.props.selectsEnd&&n.props.startDate?n.props.startDate:n.props.selectsStart&&n.props.endDate?n.props.endDate:dn()},n.modifyHolidays=function(){var s;return(s=n.props.holidays)===null||s===void 0?void 0:s.reduce(function(i,o){var l=new Date(o.date);return JS(l)?Mu(Mu([],i,!0),[Ha(Ha({},o),{date:l})],!1):i},[])},n.calcInitialState=function(){var s,i=n.getPreSelection(),o=DK(n.props),l=AK(n.props),c=o&&Ix(i,RN(o))?o:l&&Hm(i,o7(l))?l:i;return{open:n.props.startOpen||!1,preventFocus:!1,inputValue:null,preSelection:(s=n.props.selectsRange?n.props.startDate:n.props.selected)!==null&&s!==void 0?s:c,highlightDates:p7(n.props.highlightDates),focused:!1,shouldFocusDayInline:!1,isRenderAriaLiveMessage:!1,wasHidden:!1}},n.resetHiddenStatus=function(){n.setState(Ha(Ha({},n.state),{wasHidden:!1}))},n.setHiddenStatus=function(){n.setState(Ha(Ha({},n.state),{wasHidden:!0}))},n.setHiddenStateOnVisibilityHidden=function(){document.visibilityState==="hidden"&&n.setHiddenStatus()},n.clearPreventFocusTimeout=function(){n.preventFocusTimeout&&clearTimeout(n.preventFocusTimeout)},n.setFocus=function(){var s,i;(i=(s=n.input)===null||s===void 0?void 0:s.focus)===null||i===void 0||i.call(s,{preventScroll:!0})},n.setBlur=function(){var s,i;(i=(s=n.input)===null||s===void 0?void 0:s.blur)===null||i===void 0||i.call(s),n.cancelFocusInput()},n.deferBlur=function(){requestAnimationFrame(function(){n.setBlur()})},n.setOpen=function(s,i){i===void 0&&(i=!1),n.setState({open:s,preSelection:s&&n.state.open?n.state.preSelection:n.calcInitialState().preSelection,lastPreSelectChange:aD},function(){s||n.setState(function(o){return{focused:i?o.focused:!1}},function(){!i&&n.deferBlur(),n.setState({inputValue:null})})})},n.inputOk=function(){return Xh(n.state.preSelection)},n.isCalendarOpen=function(){return n.props.open===void 0?n.state.open&&!n.props.disabled&&!n.props.readOnly:n.props.open},n.handleFocus=function(s){var i,o,l=n.state.wasHidden,c=l?n.state.open:!0;l&&n.resetHiddenStatus(),n.state.preventFocus||((o=(i=n.props).onFocus)===null||o===void 0||o.call(i,s),c&&!n.props.preventOpenOnFocus&&!n.props.readOnly&&n.setOpen(!0)),n.setState({focused:!0})},n.sendFocusBackToInput=function(){n.preventFocusTimeout&&n.clearPreventFocusTimeout(),n.setState({preventFocus:!0},function(){n.preventFocusTimeout=setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})})},n.cancelFocusInput=function(){clearTimeout(n.inputFocusTimeout),n.inputFocusTimeout=void 0},n.deferFocusInput=function(){n.cancelFocusInput(),n.inputFocusTimeout=setTimeout(function(){return n.setFocus()},1)},n.handleDropdownFocus=function(){n.cancelFocusInput()},n.handleBlur=function(s){var i,o;(!n.state.open||n.props.withPortal||n.props.showTimeInput)&&((o=(i=n.props).onBlur)===null||o===void 0||o.call(i,s)),n.state.open&&n.props.open===!1&&n.setOpen(!1),n.setState({focused:!1})},n.handleCalendarClickOutside=function(s){var i,o;n.props.inline||n.setOpen(!1),(o=(i=n.props).onClickOutside)===null||o===void 0||o.call(i,s),n.props.withPortal&&s.preventDefault()},n.handleChange=function(){for(var s,i,o,l,c,d=[],u=0;u<arguments.length;u++)d[u]=arguments[u];var h=d[0];if(!(n.props.onChangeRaw&&(n.props.onChangeRaw.apply(n,d),!h||typeof h.isDefaultPrevented!="function"||h.isDefaultPrevented()))){n.setState({inputValue:h?.target instanceof HTMLInputElement?h.target.value:null,lastPreSelectChange:U6e});var m=n.props,p=m.selectsRange,v=m.startDate,g=m.endDate,b=(s=n.props.dateFormat)!==null&&s!==void 0?s:t.defaultProps.dateFormat,y=(i=n.props.strictParsing)!==null&&i!==void 0?i:t.defaultProps.strictParsing,C=h?.target instanceof HTMLInputElement?h.target.value:"";if(p){var w=C.split(b.includes("-")?kK:"-",2).map(function(P){return P.trim()}),k=w[0],S=w[1],D=ZE(k??"",b,n.props.locale,y),E=ZE(S??"",b,n.props.locale,y),T=v?.getTime()!==D?.getTime(),A=g?.getTime()!==E?.getTime();if(!T&&!A||D&&Bc(D,n.props)||E&&Bc(E,n.props))return;(l=(o=n.props).onChange)===null||l===void 0||l.call(o,[D,E],h)}else{var L=ZE(C,b,n.props.locale,y,(c=n.props.selected)!==null&&c!==void 0?c:void 0);(L||!C)&&n.setSelected(L,h,!0)}}},n.handleSelect=function(s,i,o){if(!n.props.readOnly){if(n.props.shouldCloseOnSelect&&!n.props.showTimeSelect&&n.sendFocusBackToInput(),n.props.onChangeRaw&&n.props.onChangeRaw(i),n.setSelected(s,i,!1,o),n.props.showDateSelect&&n.setState({isRenderAriaLiveMessage:!0}),!n.props.shouldCloseOnSelect||n.props.showTimeSelect)n.setPreSelection(s);else if(!n.props.inline){n.props.selectsRange||n.setOpen(!1);var l=n.props,c=l.startDate,d=l.endDate;c&&!d&&(n.props.swapRange||!b7(s,c))&&n.setOpen(!1)}}},n.setSelected=function(s,i,o,l){var c,d,u=s;if(n.props.showYearPicker){if(u!==null&&FN(Ea(u),n.props))return}else if(n.props.showMonthYearPicker){if(u!==null&&EK(u,n.props))return}else if(u!==null&&Bc(u,n.props))return;var h=n.props,m=h.onChange,p=h.selectsRange,v=h.startDate,g=h.endDate,b=h.selectsMultiple,y=h.selectedDates,C=h.minTime,w=h.swapRange;if(!tx(n.props.selected,u)||n.props.allowSameDay||p||b)if(u!==null&&(n.props.selected&&(!o||!n.props.showTimeSelect&&!n.props.showTimeSelectOnly&&!n.props.showTimeInput)&&(u=eD(u,{hour:Qh(n.props.selected),minute:Jh(n.props.selected),second:Mm(n.props.selected)})),!o&&(n.props.showTimeSelect||n.props.showTimeSelectOnly)&&C&&(u=eD(u,{hour:C.getHours(),minute:C.getMinutes(),second:C.getSeconds()})),n.props.inline||n.setState({preSelection:u}),n.props.focusSelectedMonth||n.setState({monthSelectedIn:l})),p){var k=!v&&!g,S=v&&!g,D=v&&g;k?m?.([u,null],i):S&&(u===null?m?.([null,null],i):b7(u,v)?m?.(w?[u,v]:[u,null],i):m?.([v,u],i)),D&&m?.([u,null],i)}else if(b){if(u!==null)if(!y?.length)m?.([u],i);else{var E=y.some(function(A){return za(A,u)});if(E){var T=y.filter(function(A){return!za(A,u)});m?.(T,i)}else m?.(Mu(Mu([],y,!0),[u],!1),i)}}else m?.(u,i);o||((d=(c=n.props).onSelect)===null||d===void 0||d.call(c,u,i),n.setState({inputValue:null}))},n.setPreSelection=function(s){if(!n.props.readOnly){var i=Xh(n.props.minDate),o=Xh(n.props.maxDate),l=!0;if(s){var c=RN(s);if(i&&o)l=Mb(s,n.props.minDate,n.props.maxDate);else if(i){var d=RN(n.props.minDate);l=Hm(s,d)||tx(c,d)}else if(o){var u=o7(n.props.maxDate);l=Ix(s,u)||tx(c,u)}}l&&n.setState({preSelection:s})}},n.toggleCalendar=function(){n.setOpen(!n.state.open)},n.handleTimeChange=function(s){var i,o;if(!(n.props.selectsRange||n.props.selectsMultiple)){var l=n.props.selected?n.props.selected:n.getPreSelection(),c=n.props.selected?s:eD(l,{hour:Qh(s),minute:Jh(s)});n.setState({preSelection:c}),(o=(i=n.props).onChange)===null||o===void 0||o.call(i,c),n.props.shouldCloseOnSelect&&!n.props.showTimeInput&&(n.sendFocusBackToInput(),n.setOpen(!1)),n.props.showTimeInput&&n.setOpen(!0),(n.props.showTimeSelectOnly||n.props.showTimeSelect)&&n.setState({isRenderAriaLiveMessage:!0}),n.setState({inputValue:null})}},n.onInputClick=function(){var s,i;!n.props.disabled&&!n.props.readOnly&&n.setOpen(!0),(i=(s=n.props).onInputClick)===null||i===void 0||i.call(s)},n.onInputKeyDown=function(s){var i,o,l,c,d,u;(o=(i=n.props).onKeyDown)===null||o===void 0||o.call(i,s);var h=s.key;if(!n.state.open&&!n.props.inline&&!n.props.preventOpenOnFocus){(h===Cr.ArrowDown||h===Cr.ArrowUp||h===Cr.Enter)&&((l=n.onInputClick)===null||l===void 0||l.call(n));return}if(n.state.open){if(h===Cr.ArrowDown||h===Cr.ArrowUp){s.preventDefault();var m=n.props.showTimeSelectOnly?".react-datepicker__time-list-item[tabindex='0']":n.props.showWeekPicker&&n.props.showWeekNumbers?'.react-datepicker__week-number[tabindex="0"]':n.props.showFullMonthYearPicker||n.props.showMonthYearPicker?'.react-datepicker__month-text[tabindex="0"]':'.react-datepicker__day[tabindex="0"]',p=((c=n.calendar)===null||c===void 0?void 0:c.containerRef.current)instanceof Element&&n.calendar.containerRef.current.querySelector(m);p instanceof HTMLElement&&p.focus({preventScroll:!0});return}var v=dn(n.state.preSelection);h===Cr.Enter?(s.preventDefault(),s.target.blur(),n.inputOk()&&n.state.lastPreSelectChange===aD?(n.handleSelect(v,s),!n.props.shouldCloseOnSelect&&n.setPreSelection(v)):n.setOpen(!1)):h===Cr.Escape?(s.preventDefault(),s.target.blur(),n.sendFocusBackToInput(),n.setOpen(!1)):h===Cr.Tab&&n.setOpen(!1),n.inputOk()||(u=(d=n.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:rD})}},n.onPortalKeyDown=function(s){var i=s.key;i===Cr.Escape&&(s.preventDefault(),n.setState({preventFocus:!0},function(){n.setOpen(!1),setTimeout(function(){n.setFocus(),n.setState({preventFocus:!1})})}))},n.onDayKeyDown=function(s){var i,o,l,c,d,u,h=n.props,m=h.minDate,p=h.maxDate,v=h.disabledKeyboardNavigation,g=h.showWeekPicker,b=h.shouldCloseOnSelect,y=h.locale,C=h.calendarStartDay,w=h.adjustDateOnChange,k=h.inline;if((o=(i=n.props).onKeyDown)===null||o===void 0||o.call(i,s),!v){var S=s.key,D=s.shiftKey,E=dn(n.state.preSelection),T=function(K,B){var Q=B;switch(K){case Cr.ArrowRight:Q=g?g2(B,1):Od(B,1);break;case Cr.ArrowLeft:Q=g?t7(B):nLe(B);break;case Cr.ArrowUp:Q=t7(B);break;case Cr.ArrowDown:Q=g2(B,1);break;case Cr.PageUp:Q=D?q0(B,1):px(B,1);break;case Cr.PageDown:Q=D?Kh(B,1):Rd(B,1);break;case Cr.Home:Q=Rm(B,y,C);break;case Cr.End:Q=JLe(B);break}return Q},A=function(K,B){for(var Q=40,U=K,J=!1,Y=0,oe=T(K,B);!J;){if(Y>=Q){oe=B;break}m&&oe<m&&(U=Cr.ArrowRight,oe=Bc(m,n.props)?T(U,oe):m),p&&oe>p&&(U=Cr.ArrowLeft,oe=Bc(p,n.props)?T(U,oe):p),Bc(oe,n.props)?((U===Cr.PageUp||U===Cr.Home)&&(U=Cr.ArrowRight),(U===Cr.PageDown||U===Cr.End)&&(U=Cr.ArrowLeft),oe=T(U,oe)):J=!0,Y++}return oe};if(S===Cr.Enter){s.preventDefault(),n.handleSelect(E,s),!b&&n.setPreSelection(E);return}else if(S===Cr.Escape){s.preventDefault(),n.setOpen(!1),n.inputOk()||(c=(l=n.props).onInputError)===null||c===void 0||c.call(l,{code:1,msg:rD});return}var L=null;switch(S){case Cr.ArrowLeft:case Cr.ArrowRight:case Cr.ArrowUp:case Cr.ArrowDown:case Cr.PageUp:case Cr.PageDown:case Cr.Home:case Cr.End:L=A(S,E);break}if(!L){(u=(d=n.props).onInputError)===null||u===void 0||u.call(d,{code:1,msg:rD});return}if(s.preventDefault(),n.setState({lastPreSelectChange:aD}),w&&n.setSelected(L),n.setPreSelection(L),k){var P=Co(E),O=Co(L),Z=Ea(E),z=Ea(L);P!==O||Z!==z?n.setState({shouldFocusDayInline:!0}):n.setState({shouldFocusDayInline:!1})}}},n.onPopperKeyDown=function(s){var i=s.key;i===Cr.Escape&&(s.preventDefault(),n.sendFocusBackToInput(),n.setOpen(!1))},n.onClearClick=function(s){s&&s.preventDefault&&s.preventDefault(),n.sendFocusBackToInput();var i=n.props,o=i.selectsRange,l=i.onChange;l?.(o?[null,null]:null,s),n.setState({inputValue:null})},n.clear=function(){n.onClearClick()},n.onScroll=function(s){typeof n.props.closeOnScroll=="boolean"&&n.props.closeOnScroll?(s.target===document||s.target===document.documentElement||s.target===document.body)&&n.setOpen(!1):typeof n.props.closeOnScroll=="function"&&n.props.closeOnScroll(s)&&n.setOpen(!1)},n.renderCalendar=function(){var s,i;return!n.props.inline&&!n.isCalendarOpen()?null:Gt.createElement(I6e,Ha({showMonthYearDropdown:void 0,ref:function(o){n.calendar=o}},n.props,n.state,{setOpen:n.setOpen,dateFormat:(s=n.props.dateFormatCalendar)!==null&&s!==void 0?s:t.defaultProps.dateFormatCalendar,onSelect:n.handleSelect,onClickOutside:n.handleCalendarClickOutside,holidays:d6e(n.modifyHolidays()),outsideClickIgnoreClass:N7,onDropdownFocus:n.handleDropdownFocus,onTimeChange:n.handleTimeChange,className:n.props.calendarClassName,container:n.props.calendarContainer,handleOnKeyDown:n.props.onKeyDown,handleOnDayKeyDown:n.onDayKeyDown,setPreSelection:n.setPreSelection,dropdownMode:(i=n.props.dropdownMode)!==null&&i!==void 0?i:t.defaultProps.dropdownMode}),n.props.children)},n.renderAriaLiveRegion=function(){var s=n.props,i=s.dateFormat,o=i===void 0?t.defaultProps.dateFormat:i,l=s.locale,c=n.props.showTimeInput||n.props.showTimeSelect,d=c?"PPPPp":"PPPP",u;return n.props.selectsRange?u="Selected start date: ".concat(Mc(n.props.startDate,{dateFormat:d,locale:l}),". ").concat(n.props.endDate?"End date: "+Mc(n.props.endDate,{dateFormat:d,locale:l}):""):n.props.showTimeSelectOnly?u="Selected time: ".concat(Mc(n.props.selected,{dateFormat:o,locale:l})):n.props.showYearPicker?u="Selected year: ".concat(Mc(n.props.selected,{dateFormat:"yyyy",locale:l})):n.props.showMonthYearPicker?u="Selected month: ".concat(Mc(n.props.selected,{dateFormat:"MMMM yyyy",locale:l})):n.props.showQuarterYearPicker?u="Selected quarter: ".concat(Mc(n.props.selected,{dateFormat:"yyyy, QQQ",locale:l})):u="Selected date: ".concat(Mc(n.props.selected,{dateFormat:d,locale:l})),Gt.createElement("span",{role:"alert","aria-live":"polite",className:"react-datepicker__aria-live"},u)},n.renderDateInput=function(){var s,i,o,l=pa(n.props.className,(s={},s[N7]=n.state.open,s)),c=n.props.customInput||Gt.createElement("input",{type:"text"}),d=n.props.customInputRef||"ref",u=n.props,h=u.dateFormat,m=h===void 0?t.defaultProps.dateFormat:h,p=u.locale,v=typeof n.props.value=="string"?n.props.value:typeof n.state.inputValue=="string"?n.state.inputValue:n.props.selectsRange?YLe(n.props.startDate,n.props.endDate,{dateFormat:m,locale:p}):n.props.selectsMultiple?KLe((o=n.props.selectedDates)!==null&&o!==void 0?o:[],{dateFormat:m,locale:p}):Mc(n.props.selected,{dateFormat:m,locale:p});return N.cloneElement(c,(i={},i[d]=function(g){n.input=g},i.value=v,i.onBlur=n.handleBlur,i.onChange=n.handleChange,i.onClick=n.onInputClick,i.onFocus=n.handleFocus,i.onKeyDown=n.onInputKeyDown,i.id=n.props.id,i.name=n.props.name,i.form=n.props.form,i.autoFocus=n.props.autoFocus,i.placeholder=n.props.placeholderText,i.disabled=n.props.disabled,i.autoComplete=n.props.autoComplete,i.className=pa(c.props.className,l),i.title=n.props.title,i.readOnly=n.props.readOnly,i.required=n.props.required,i.tabIndex=n.props.tabIndex,i["aria-describedby"]=n.props.ariaDescribedBy,i["aria-invalid"]=n.props.ariaInvalid,i["aria-labelledby"]=n.props.ariaLabelledBy,i["aria-required"]=n.props.ariaRequired,i))},n.renderClearButton=function(){var s=n.props,i=s.isClearable,o=s.disabled,l=s.selected,c=s.startDate,d=s.endDate,u=s.clearButtonTitle,h=s.clearButtonClassName,m=h===void 0?"":h,p=s.ariaLabelClose,v=p===void 0?"Close":p,g=s.selectedDates,b=s.readOnly;return i&&!b&&(l!=null||c!=null||d!=null||g?.length)?Gt.createElement("button",{type:"button",className:pa("react-datepicker__close-icon",m,{"react-datepicker__close-icon--disabled":o}),disabled:o,"aria-label":v,onClick:n.onClearClick,title:u,tabIndex:-1}):null},n.state=n.calcInitialState(),n.preventFocusTimeout=void 0,n}return Object.defineProperty(t,"defaultProps",{get:function(){return{allowSameDay:!1,dateFormat:"MM/dd/yyyy",dateFormatCalendar:"LLLL yyyy",disabled:!1,disabledKeyboardNavigation:!1,dropdownMode:"scroll",preventOpenOnFocus:!1,monthsShown:1,readOnly:!1,withPortal:!1,selectsDisabledDaysInRange:!1,shouldCloseOnSelect:!0,showTimeSelect:!1,showTimeInput:!1,showPreviousMonths:!1,showMonthYearPicker:!1,showFullMonthYearPicker:!1,showTwoColumnMonthYearPicker:!1,showFourColumnMonthYearPicker:!1,showYearPicker:!1,showQuarterYearPicker:!1,showWeekPicker:!1,strictParsing:!1,swapRange:!1,timeIntervals:30,timeCaption:"Time",previousMonthAriaLabel:"Previous Month",previousMonthButtonLabel:"Previous Month",nextMonthAriaLabel:"Next Month",nextMonthButtonLabel:"Next Month",previousYearAriaLabel:"Previous Year",previousYearButtonLabel:"Previous Year",nextYearAriaLabel:"Next Year",nextYearButtonLabel:"Next Year",timeInputLabel:"Time",enableTabLoop:!0,yearItemNumber:N1,focusSelectedMonth:!1,showPopperArrow:!0,excludeScrollbar:!0,customTimeInput:null,calendarStartDay:void 0,toggleCalendarOnIconClick:!1,usePointerEvent:!1}},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){window.addEventListener("scroll",this.onScroll,!0),document.addEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.componentDidUpdate=function(r,n){var s,i,o,l;r.inline&&B6e(r.selected,this.props.selected)&&this.setPreSelection(this.props.selected),this.state.monthSelectedIn!==void 0&&r.monthsShown!==this.props.monthsShown&&this.setState({monthSelectedIn:0}),r.highlightDates!==this.props.highlightDates&&this.setState({highlightDates:p7(this.props.highlightDates)}),!n.focused&&!tx(r.selected,this.props.selected)&&this.setState({inputValue:null}),n.open!==this.state.open&&(n.open===!1&&this.state.open===!0&&((i=(s=this.props).onCalendarOpen)===null||i===void 0||i.call(s)),n.open===!0&&this.state.open===!1&&((l=(o=this.props).onCalendarClose)===null||l===void 0||l.call(o)))},t.prototype.componentWillUnmount=function(){this.clearPreventFocusTimeout(),window.removeEventListener("scroll",this.onScroll,!0),document.removeEventListener("visibilitychange",this.setHiddenStateOnVisibilityHidden)},t.prototype.renderInputContainer=function(){var r=this.props,n=r.showIcon,s=r.icon,i=r.calendarIconClassname,o=r.calendarIconClassName,l=r.toggleCalendarOnIconClick,c=this.state.open;return i&&console.warn("calendarIconClassname props is deprecated. should use calendarIconClassName props."),Gt.createElement("div",{className:"react-datepicker__input-container".concat(n?" react-datepicker__view-calendar-icon":"")},n&&Gt.createElement(P6e,Ha({icon:s,className:pa(o,!o&&i,c&&"react-datepicker-ignore-onclickoutside")},l?{onClick:this.toggleCalendar}:null)),this.state.isRenderAriaLiveMessage&&this.renderAriaLiveRegion(),this.renderDateInput(),this.renderClearButton())},t.prototype.render=function(){var r=this.renderCalendar();if(this.props.inline)return r;if(this.props.withPortal){var n=this.state.open?Gt.createElement(PK,{enableTabLoop:this.props.enableTabLoop},Gt.createElement("div",{className:"react-datepicker__portal",tabIndex:-1,onKeyDown:this.onPortalKeyDown},r)):null;return this.state.open&&this.props.portalId&&(n=Gt.createElement(IK,Ha({portalId:this.props.portalId},this.props),n)),Gt.createElement("div",null,this.renderInputContainer(),n)}return Gt.createElement(L6e,Ha({},this.props,{className:this.props.popperClassName,hidePopper:!this.isCalendarOpen(),targetComponent:this.renderInputContainer(),popperComponent:r,popperOnKeyDown:this.onPopperKeyDown,showArrow:this.props.showPopperArrow}))},t}(N.Component),U6e="input",aD="navigate";const $6e=()=>{const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(1),[o]=N.useState(5),[l,c]=N.useState(!0),[d,u]=N.useState(0),[h,m]=N.useState(""),[p,v]=N.useState(""),[g,b]=N.useState(null),[y,C]=N.useState(null);N.useEffect(()=>{w()},[]),N.useEffect(()=>{S()},[e,p,g,y,s,h]);const w=()=>{c(!0),Oe.get("/api/leave/all").then(A=>{const L=A.data.sort((P,O)=>new Date(O.createdAt)-new Date(P.createdAt));console.log("Sorted Data:",L),t(L),c(!1)}).catch(A=>{console.error("Error fetching leave requests:",A),c(!1)})},k=(A,L)=>{Oe.put(`/api/leave/${A}`,{status:L}).then(()=>{w()}).catch(P=>{console.error("Error updating leave status:",P)})},S=()=>{let A=[...e];if(p&&(A=A.filter(z=>z.status===p)),g&&y&&(A=A.filter(z=>{const K=new Date(z.requestedDate),B=new Date(K.getFullYear(),K.getMonth(),K.getDate()),Q=new Date(g.getFullYear(),g.getMonth(),g.getDate()),U=new Date(y.getFullYear(),y.getMonth(),y.getDate());return B>=Q&&B<=U})),h.trim()!==""){const z=h.toLowerCase();A=A.filter(K=>K.employeeId&&K.employeeId.toLowerCase().includes(z)||(K.name||K.employeeName)&&(K.name||K.employeeName).toLowerCase().includes(z)||K.leaveType&&K.leaveType.toLowerCase().includes(z)||K.reason&&K.reason.toLowerCase().includes(z))}const L=Math.ceil(A.length/o);u(L);const P=s*o,O=P-o,Z=A.slice(O,P);n(Z)},D=()=>{v(""),b(null),C(null),i(1),m("")},E=A=>{i(A)},T=A=>{if(!A)return"-";try{return new Date(A).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"}).replace(" ","/")}catch{return"-"}};return a.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("h3",{children:"Leave Request Management"})})})})})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row gx-3",children:[a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Status"}),a.jsxs("select",{className:"form-select",value:p,onChange:A=>v(A.target.value),children:[a.jsx("option",{value:"",children:"All Statuses"}),a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"}),a.jsx("option",{value:"Hold",children:"Hold"})]})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by employee ID, name, leave type, or reason...",value:h,onChange:A=>m(A.target.value)})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Request Date Range"}),a.jsxs("div",{className:"d-flex gap-2",children:[a.jsx(w7,{selected:g,onChange:A=>b(A),selectsStart:!0,startDate:g,endDate:y,placeholderText:"dd/mm/yyyy",className:"form-control me-2",dateFormat:"dd/MM/yyyy"}),a.jsx(w7,{selected:y,onChange:A=>C(A),selectsEnd:!0,startDate:g,endDate:y,minDate:g,placeholderText:"dd/mm/yyyy",className:"form-control",dateFormat:"dd/MM/yyyy"})]})]}),a.jsxs("div",{className:"col-5 d-flex justify-content-end mt-3",children:[a.jsx("button",{className:"btn btn-primary me-2",onClick:S,style:{width:"120px",height:"38px"},children:"Apply Filters"}),a.jsx("button",{className:"btn btn-secondary",onClick:D,style:{width:"120px",height:"38px"},children:"Reset Filters"})]})]})})}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"table-responsive",children:[l?a.jsx("div",{className:"text-center p-4",children:a.jsx("div",{className:"spinner-border text-primary",role:"status",children:a.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):a.jsxs("table",{className:"table table-bordered",children:[a.jsx("thead",{children:a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Leave Type"}),a.jsx("th",{children:"Requested Date"}),a.jsx("th",{children:"From Date"}),a.jsx("th",{children:"To Date"}),a.jsx("th",{children:"Reason"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:r.length>0?r.map(A=>a.jsxs("tr",{children:[a.jsx("td",{style:{textWrap:"wrap"},children:A.employeeId}),a.jsx("td",{style:{textWrap:"wrap"},children:A.name||A.employeeName}),a.jsx("td",{children:A.leaveType}),a.jsx("td",{children:A.requestedDate?T(A.requestedDate):"-"}),a.jsx("td",{children:T(A.fromDate)}),a.jsx("td",{children:T(A.toDate)}),a.jsx("td",{children:a.jsx("div",{className:"text-truncate",style:{maxWidth:"200px"},children:A.reason})}),a.jsx("td",{children:a.jsx("span",{className:`badge ${A.status==="Approved"?"bg-success":A.status==="Rejected"?"bg-danger":A.status==="Hold"?"bg-info":"bg-warning"}`,children:A.status})}),a.jsx("td",{children:a.jsxs("select",{className:"form-select form-select-sm",style:{minWidth:"120px"},value:A.status,onChange:L=>k(A._id,L.target.value),disabled:A.status==="Approved"||A.status==="Rejected",children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"}),a.jsx("option",{value:"Hold",children:"Hold"})]})})]},A._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"9",className:"text-center",children:"No leave requests found."})})})]}),d>0&&a.jsx("div",{className:"d-flex justify-content-left mt-4",children:a.jsx("nav",{children:a.jsxs("ul",{className:"pagination",children:[a.jsx("li",{className:`page-item ${s===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(s-1),disabled:s===1,children:a.jsx("i",{className:"fas fa-angle-double-left"})})}),a.jsx("li",{className:`page-item ${s===1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(1),children:"1"})}),s>3&&d>4&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),Array.from({length:d},(A,L)=>{const P=L+1;return P>1&&P<d&&Math.abs(P-s)<=1?a.jsx("li",{className:`page-item ${s===P?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(P),children:P})},P):null}),s<d-2&&d>4&&a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})}),d>1&&a.jsx("li",{className:`page-item ${s===d?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(d),children:d})}),a.jsx("li",{className:`page-item ${s===d?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>E(s+1),disabled:s===d,children:a.jsx("i",{className:"fas fa-angle-double-right"})})})]})})})]})})})]})})},V6e="modulepreload",q6e=function(e){return"/"+e},S7={},u3=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(d=>{if(d=q6e(d),d in S7)return;S7[d]=!0;const u=d.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${h}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":V6e,u||(m.as="script"),m.crossOrigin="",m.href=d,l&&m.setAttribute("nonce",l),document.head.appendChild(m),u)return new Promise((p,v)=>{m.addEventListener("load",p),m.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};var ko=Uint8Array,Ql=Uint16Array,kI=Int32Array,ZS=new ko([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),eC=new ko([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h3=new ko([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),OK=function(e,t){for(var r=new Ql(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var s=new kI(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},MK=OK(ZS,2),RK=MK.b,f3=MK.r;RK[28]=258,f3[258]=28;var FK=OK(eC,0),z6e=FK.b,C7=FK.r,m3=new Ql(32768);for(var $n=0;$n<32768;++$n){var ym=($n&43690)>>1|($n&21845)<<1;ym=(ym&52428)>>2|(ym&13107)<<2,ym=(ym&61680)>>4|(ym&3855)<<4,m3[$n]=((ym&65280)>>8|(ym&255)<<8)>>1}var qu=function(e,t,r){for(var n=e.length,s=0,i=new Ql(t);s<n;++s)e[s]&&++i[e[s]-1];var o=new Ql(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new Ql(1<<t);var c=15-t;for(s=0;s<n;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],h=o[e[s]-1]++<<u,m=h|(1<<u)-1;h<=m;++h)l[m3[h]>>c]=d}else for(l=new Ql(n),s=0;s<n;++s)e[s]&&(l[s]=m3[o[e[s]-1]++]>>15-e[s]);return l},Wm=new ko(288);for(var $n=0;$n<144;++$n)Wm[$n]=8;for(var $n=144;$n<256;++$n)Wm[$n]=9;for(var $n=256;$n<280;++$n)Wm[$n]=7;for(var $n=280;$n<288;++$n)Wm[$n]=8;var My=new ko(32);for(var $n=0;$n<32;++$n)My[$n]=5;var H6e=qu(Wm,9,0),W6e=qu(Wm,9,1),G6e=qu(My,5,0),Y6e=qu(My,5,1),nD=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Nd=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},sD=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},_I=function(e){return(e+7)/8|0},LK=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new ko(e.subarray(t,r))},K6e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Sd=function(e,t,r){var n=new Error(t||K6e[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Sd),!r)throw n;return n},X6e=function(e,t,r,n){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new ko(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new ko(s*3));var d=function(de){var X=r.length;if(de>X){var le=new ko(Math.max(X*2,de));le.set(r),r=le}},u=t.f||0,h=t.p||0,m=t.b||0,p=t.l,v=t.d,g=t.m,b=t.n,y=s*8;do{if(!p){u=Nd(e,h,1);var C=Nd(e,h+1,3);if(h+=3,C)if(C==1)p=W6e,v=Y6e,g=9,b=5;else if(C==2){var D=Nd(e,h,31)+257,E=Nd(e,h+10,15)+4,T=D+Nd(e,h+5,31)+1;h+=14;for(var A=new ko(T),L=new ko(19),P=0;P<E;++P)L[h3[P]]=Nd(e,h+P*3,7);h+=E*3;for(var O=nD(L),Z=(1<<O)-1,z=qu(L,O,1),P=0;P<T;){var K=z[Nd(e,h,Z)];h+=K&15;var w=K>>4;if(w<16)A[P++]=w;else{var B=0,Q=0;for(w==16?(Q=3+Nd(e,h,3),h+=2,B=A[P-1]):w==17?(Q=3+Nd(e,h,7),h+=3):w==18&&(Q=11+Nd(e,h,127),h+=7);Q--;)A[P++]=B}}var U=A.subarray(0,D),J=A.subarray(D);g=nD(U),b=nD(J),p=qu(U,g,1),v=qu(J,b,1)}else Sd(1);else{var w=_I(h)+4,k=e[w-4]|e[w-3]<<8,S=w+k;if(S>s){c&&Sd(0);break}l&&d(m+k),r.set(e.subarray(w,S),m),t.b=m+=k,t.p=h=S*8,t.f=u;continue}if(h>y){c&&Sd(0);break}}l&&d(m+131072);for(var Y=(1<<g)-1,oe=(1<<b)-1,M=h;;M=h){var B=p[sD(e,h)&Y],V=B>>4;if(h+=B&15,h>y){c&&Sd(0);break}if(B||Sd(2),V<256)r[m++]=V;else if(V==256){M=h,p=null;break}else{var H=V-254;if(V>264){var P=V-257,ee=ZS[P];H=Nd(e,h,(1<<ee)-1)+RK[P],h+=ee}var re=v[sD(e,h)&oe],ae=re>>4;re||Sd(3),h+=re&15;var J=z6e[ae];if(ae>3){var ee=eC[ae];J+=sD(e,h)&(1<<ee)-1,h+=ee}if(h>y){c&&Sd(0);break}l&&d(m+131072);var ne=m+H;if(m<J){var ie=i-J,G=Math.min(J,ne);for(ie+m<0&&Sd(3);m<G;++m)r[m]=n[ie+m]}for(;m<ne;++m)r[m]=r[m-J]}}t.l=p,t.p=M,t.b=m,t.f=u,p&&(u=1,t.m=g,t.d=v,t.n=b)}while(!u);return m!=r.length&&o?LK(r,0,m):r.subarray(0,m)},Oh=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},kb=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},iD=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var s=r.length,i=r.slice();if(!s)return{t:UK,l:0};if(s==1){var o=new ko(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,D){return S.f-D.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,h=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=s-1;)l=r[r[d].f<r[h].f?d++:h++],c=r[d!=u&&r[d].f<r[h].f?d++:h++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var m=i[0].s,n=1;n<s;++n)i[n].s>m&&(m=i[n].s);var p=new Ql(m+1),v=p3(r[u-1],p,0);if(v>t){var n=0,g=0,b=v-t,y=1<<b;for(i.sort(function(D,E){return p[E.s]-p[D.s]||D.f-E.f});n<s;++n){var C=i[n].s;if(p[C]>t)g+=y-(1<<v-p[C]),p[C]=t;else break}for(g>>=b;g>0;){var w=i[n].s;p[w]<t?g-=1<<t-p[w]++-1:++n}for(;n>=0&&g;--n){var k=i[n].s;p[k]==t&&(--p[k],++g)}v=t}return{t:new ko(p),l:v}},p3=function(e,t,r){return e.s==-1?Math.max(p3(e.l,t,r+1),p3(e.r,t,r+1)):t[e.s]=r},k7=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Ql(++t),n=0,s=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,n),n:t}},_b=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},BK=function(e,t,r){var n=r.length,s=_I(t+2);e[s]=n&255,e[s+1]=n>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<n;++i)e[s+i+4]=r[i];return(s+4+n)*8},_7=function(e,t,r,n,s,i,o,l,c,d,u){Oh(t,u++,r),++s[256];for(var h=iD(s,15),m=h.t,p=h.l,v=iD(i,15),g=v.t,b=v.l,y=k7(m),C=y.c,w=y.n,k=k7(g),S=k.c,D=k.n,E=new Ql(19),T=0;T<C.length;++T)++E[C[T]&31];for(var T=0;T<S.length;++T)++E[S[T]&31];for(var A=iD(E,7),L=A.t,P=A.l,O=19;O>4&&!L[h3[O-1]];--O);var Z=d+5<<3,z=_b(s,Wm)+_b(i,My)+o,K=_b(s,m)+_b(i,g)+o+14+3*O+_b(E,L)+2*E[16]+3*E[17]+7*E[18];if(c>=0&&Z<=z&&Z<=K)return BK(t,u,e.subarray(c,c+d));var B,Q,U,J;if(Oh(t,u,1+(K<z)),u+=2,K<z){B=qu(m,p,0),Q=m,U=qu(g,b,0),J=g;var Y=qu(L,P,0);Oh(t,u,w-257),Oh(t,u+5,D-1),Oh(t,u+10,O-4),u+=14;for(var T=0;T<O;++T)Oh(t,u+3*T,L[h3[T]]);u+=3*O;for(var oe=[C,S],M=0;M<2;++M)for(var V=oe[M],T=0;T<V.length;++T){var H=V[T]&31;Oh(t,u,Y[H]),u+=L[H],H>15&&(Oh(t,u,V[T]>>5&127),u+=V[T]>>12)}}else B=H6e,Q=Wm,U=G6e,J=My;for(var T=0;T<l;++T){var ee=n[T];if(ee>255){var H=ee>>18&31;kb(t,u,B[H+257]),u+=Q[H+257],H>7&&(Oh(t,u,ee>>23&31),u+=ZS[H]);var re=ee&31;kb(t,u,U[re]),u+=J[re],re>3&&(kb(t,u,ee>>5&8191),u+=eC[re])}else kb(t,u,B[ee]),u+=Q[ee]}return kb(t,u,B[256]),u+Q[256]},Q6e=new kI([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),UK=new ko(0),J6e=function(e,t,r,n,s,i){var o=i.z||e.length,l=new ko(n+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(n,l.length-s),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var h=Q6e[t-1],m=h>>13,p=h&8191,v=(1<<r)-1,g=i.p||new Ql(32768),b=i.h||new Ql(v+1),y=Math.ceil(r/3),C=2*y,w=function(Se){return(e[Se]^e[Se+1]<<y^e[Se+2]<<C)&v},k=new kI(25e3),S=new Ql(288),D=new Ql(32),E=0,T=0,A=i.i||0,L=0,P=i.w||0,O=0;A+2<o;++A){var Z=w(A),z=A&32767,K=b[Z];if(g[z]=K,b[Z]=z,P<=A){var B=o-A;if((E>7e3||L>24576)&&(B>423||!d)){u=_7(e,c,0,k,S,D,T,L,O,A-O,u),L=E=T=0,O=A;for(var Q=0;Q<286;++Q)S[Q]=0;for(var Q=0;Q<30;++Q)D[Q]=0}var U=2,J=0,Y=p,oe=z-K&32767;if(B>2&&Z==w(A-oe))for(var M=Math.min(m,B)-1,V=Math.min(32767,A),H=Math.min(258,B);oe<=V&&--Y&&z!=K;){if(e[A+U]==e[A+U-oe]){for(var ee=0;ee<H&&e[A+ee]==e[A+ee-oe];++ee);if(ee>U){if(U=ee,J=oe,ee>M)break;for(var re=Math.min(oe,ee-2),ae=0,Q=0;Q<re;++Q){var ne=A-oe+Q&32767,ie=g[ne],G=ne-ie&32767;G>ae&&(ae=G,K=ne)}}}z=K,K=g[z],oe+=z-K&32767}if(J){k[L++]=268435456|f3[U]<<18|C7[J];var de=f3[U]&31,X=C7[J]&31;T+=ZS[de]+eC[X],++S[257+de],++D[X],P=A+U,++E}else k[L++]=e[A],++S[e[A]]}}for(A=Math.max(A,P);A<o;++A)k[L++]=e[A],++S[e[A]];u=_7(e,c,d,k,S,D,T,L,O,A-O,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=b,i.p=g,i.i=A,i.w=P)}else{for(var A=i.w||0;A<o+d;A+=65535){var le=A+65535;le>=o&&(c[u/8|0]=d,le=o),u=BK(c,u+1,e.subarray(A,le))}i.i=o}return LK(l,0,n+_I(u)+s)},$K=function(){var e=1,t=0;return{p:function(r){for(var n=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=n+=r[o];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}e=n,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Z6e=function(e,t,r,n,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new ko(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return J6e(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,s)},VK=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},e8e=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=$K();s.p(t.dictionary),VK(e,2,s.d())}},t8e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Sd(6,"invalid zlib data"),(e[1]>>5&1)==1&&Sd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function x3(e,t){t||(t={});var r=$K();r.p(e);var n=Z6e(e,t,t.dictionary?6:2,4);return e8e(n,t),VK(n,n.length-4,r.d()),n}function r8e(e,t){return X6e(e.subarray(t8e(e),-4),{i:2},t,t)}var a8e=typeof TextDecoder<"u"&&new TextDecoder,n8e=0;try{a8e.decode(UK,{stream:!0}),n8e=1}catch{}var na=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function oD(){na.console&&typeof na.console.log=="function"&&na.console.log.apply(na.console,arguments)}var En={log:oD,warn:function(e){na.console&&(typeof na.console.warn=="function"?na.console.warn.apply(na.console,arguments):oD.call(null,arguments))},error:function(e){na.console&&(typeof na.console.error=="function"?na.console.error.apply(na.console,arguments):oD(e))}};function lD(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Bp(n.response,t,r)},n.onerror=function(){En.error("could not download file")},n.send()}function E7(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function xN(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Kb,v3,Bp=na.saveAs||((typeof window>"u"?"undefined":Ua(window))!=="object"||window!==na?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=na.URL||na.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?E7(s.href)?lD(e,t,r):xN(s,s.target="_blank"):xN(s)):(s.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){xN(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(E7(e))lD(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){xN(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Ua(i)!=="object"&&(En.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return lD(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(na.HTMLElement)||na.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Ua(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=u:location=u,n=null},l.readAsDataURL(e)}else{var c=na.URL||na.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function qK(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function cD(e,t){var r=e[0],n=e[1],s=e[2],i=e[3];r=lo(r,n,s,i,t[0],7,-680876936),i=lo(i,r,n,s,t[1],12,-389564586),s=lo(s,i,r,n,t[2],17,606105819),n=lo(n,s,i,r,t[3],22,-1044525330),r=lo(r,n,s,i,t[4],7,-176418897),i=lo(i,r,n,s,t[5],12,1200080426),s=lo(s,i,r,n,t[6],17,-1473231341),n=lo(n,s,i,r,t[7],22,-45705983),r=lo(r,n,s,i,t[8],7,1770035416),i=lo(i,r,n,s,t[9],12,-1958414417),s=lo(s,i,r,n,t[10],17,-42063),n=lo(n,s,i,r,t[11],22,-1990404162),r=lo(r,n,s,i,t[12],7,1804603682),i=lo(i,r,n,s,t[13],12,-40341101),s=lo(s,i,r,n,t[14],17,-1502002290),r=co(r,n=lo(n,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=co(i,r,n,s,t[6],9,-1069501632),s=co(s,i,r,n,t[11],14,643717713),n=co(n,s,i,r,t[0],20,-373897302),r=co(r,n,s,i,t[5],5,-701558691),i=co(i,r,n,s,t[10],9,38016083),s=co(s,i,r,n,t[15],14,-660478335),n=co(n,s,i,r,t[4],20,-405537848),r=co(r,n,s,i,t[9],5,568446438),i=co(i,r,n,s,t[14],9,-1019803690),s=co(s,i,r,n,t[3],14,-187363961),n=co(n,s,i,r,t[8],20,1163531501),r=co(r,n,s,i,t[13],5,-1444681467),i=co(i,r,n,s,t[2],9,-51403784),s=co(s,i,r,n,t[7],14,1735328473),r=uo(r,n=co(n,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=uo(i,r,n,s,t[8],11,-2022574463),s=uo(s,i,r,n,t[11],16,1839030562),n=uo(n,s,i,r,t[14],23,-35309556),r=uo(r,n,s,i,t[1],4,-1530992060),i=uo(i,r,n,s,t[4],11,1272893353),s=uo(s,i,r,n,t[7],16,-155497632),n=uo(n,s,i,r,t[10],23,-1094730640),r=uo(r,n,s,i,t[13],4,681279174),i=uo(i,r,n,s,t[0],11,-358537222),s=uo(s,i,r,n,t[3],16,-722521979),n=uo(n,s,i,r,t[6],23,76029189),r=uo(r,n,s,i,t[9],4,-640364487),i=uo(i,r,n,s,t[12],11,-421815835),s=uo(s,i,r,n,t[15],16,530742520),r=ho(r,n=uo(n,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=ho(i,r,n,s,t[7],10,1126891415),s=ho(s,i,r,n,t[14],15,-1416354905),n=ho(n,s,i,r,t[5],21,-57434055),r=ho(r,n,s,i,t[12],6,1700485571),i=ho(i,r,n,s,t[3],10,-1894986606),s=ho(s,i,r,n,t[10],15,-1051523),n=ho(n,s,i,r,t[1],21,-2054922799),r=ho(r,n,s,i,t[8],6,1873313359),i=ho(i,r,n,s,t[15],10,-30611744),s=ho(s,i,r,n,t[6],15,-1560198380),n=ho(n,s,i,r,t[13],21,1309151649),r=ho(r,n,s,i,t[4],6,-145523070),i=ho(i,r,n,s,t[11],10,-1120210379),s=ho(s,i,r,n,t[2],15,718787259),n=ho(n,s,i,r,t[9],21,-343485551),e[0]=Dm(r,e[0]),e[1]=Dm(n,e[1]),e[2]=Dm(s,e[2]),e[3]=Dm(i,e[3])}function tC(e,t,r,n,s,i){return t=Dm(Dm(t,e),Dm(n,i)),Dm(t<<s|t>>>32-s,r)}function lo(e,t,r,n,s,i,o){return tC(t&r|~t&n,e,t,s,i,o)}function co(e,t,r,n,s,i,o){return tC(t&n|r&~n,e,t,s,i,o)}function uo(e,t,r,n,s,i,o){return tC(t^r^n,e,t,s,i,o)}function ho(e,t,r,n,s,i,o){return tC(r^(t|~n),e,t,s,i,o)}function zK(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)cD(n,s8e(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(cD(n,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,cD(n,s),n}function s8e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Kb=na.atob.bind(na),v3=na.btoa.bind(na);var D7="0123456789abcdef".split("");function i8e(e){for(var t="",r=0;r<4;r++)t+=D7[e>>8*r+4&15]+D7[e>>8*r&15];return t}function o8e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function g3(e){return zK(e).map(o8e).join("")}var l8e=function(e){for(var t=0;t<e.length;t++)e[t]=i8e(e[t]);return e.join("")}(zK("hello"))!="5d41402abc4b2a76b9719d911017c592";function Dm(e,t){if(l8e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function b3(e,t){var r,n,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,n=l}else l=n;var h=t.length,m=0,p=0,v="";for(c=0;c<h;c++)p=(p+(u=l[m=(m+1)%256]))%256,l[m]=l[p],l[p]=u,o=l[(l[m]+l[p])%256],v+=String.fromCharCode(t.charCodeAt(c)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var A7={print:4,modify:8,copy:16,"annot-forms":32};function Yv(e,t,r,n){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(A7.perm!==void 0)throw new Error("Invalid permission: "+l);s+=A7[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=g3(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=b3(this.encryptionKey,this.padding)}function Kv(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var s=e.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[n]}return t}function T7(e){if(Ua(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){na.console&&En.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function _2(e){if(!(this instanceof _2))return new _2(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function HK(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Vp(e,t,r,n,s){if(!(this instanceof Vp))return new Vp(e,t,r,n,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,HK.call(this,n,s)}function t0(e,t,r,n,s){if(!(this instanceof t0))return new t0(e,t,r,n,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,HK.call(this,n,s)}function ta(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;Ua(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,s=e.format||s,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var h=e.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=T7;var v="1.3",g=p.__private__.getPdfVersion=function(){return v};p.__private__.setPdfVersion=function(W){v=W};var b={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return b};var y=p.__private__.getPageFormat=function(W){return b[W]};s=s||"a4";var C={COMPAT:"compat",ADVANCED:"advanced"},w=C.COMPAT;function k(){this.saveGraphicsState(),se(new Ft(pe,0,0,-pe,0,Wd()*pe).toString()+" cm"),this.setFontSize(this.getFontSize()/pe),d="n",w=C.ADVANCED}function S(){this.restoreGraphicsState(),d="S",w=C.COMPAT}var D=p.__private__.combineFontStyleAndFontWeight=function(W,be){if(W=="bold"&&be=="normal"||W=="bold"&&be==400||W=="normal"&&be=="italic"||W=="bold"&&be=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return be&&(W=be==400||be==="normal"?W==="italic"?"italic":"normal":be!=700&&be!=="bold"||W!=="normal"?(be==700?"bold":be)+""+W:"bold"),W};p.advancedAPI=function(W){var be=w===C.COMPAT;return be&&k.call(this),typeof W!="function"||(W(this),be&&S.call(this)),this},p.compatAPI=function(W){var be=w===C.ADVANCED;return be&&S.call(this),typeof W!="function"||(W(this),be&&k.call(this)),this},p.isAdvancedAPI=function(){return w===C.ADVANCED};var E,T=function(W){if(w!==C.ADVANCED)throw new Error(W+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},A=p.roundToPrecision=p.__private__.roundToPrecision=function(W,be){var We=t||be;if(isNaN(W)||isNaN(We))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return W.toFixed(We).replace(/0+$/,"")};E=p.hpf=p.__private__.hpf=typeof c=="number"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return A(W,c)}:c==="smart"?function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return A(W,W>-1&&W<1?16:5)}:function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.hpf");return A(W,16)};var L=p.f2=p.__private__.f2=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f2");return A(W,2)},P=p.__private__.f3=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.f3");return A(W,3)},O=p.scale=p.__private__.scale=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.scale");return w===C.COMPAT?W*pe:w===C.ADVANCED?W:void 0},Z=function(W){return w===C.COMPAT?Wd()-W:w===C.ADVANCED?W:void 0},z=function(W){return O(Z(W))};p.__private__.setPrecision=p.setPrecision=function(W){typeof parseInt(W,10)=="number"&&(t=parseInt(W,10))};var K,B="00000000000000000000000000000000",Q=p.__private__.getFileId=function(){return B},U=p.__private__.setFileId=function(W){return B=W!==void 0&&/^[a-fA-F0-9]{32}$/.test(W)?W.toUpperCase():B.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),u!==null&&(ms=new Yv(u.userPermissions,u.userPassword,u.ownerPassword,B)),B};p.setFileId=function(W){return U(W),this},p.getFileId=function(){return Q()};var J=p.__private__.convertDateToPDFDate=function(W){var be=W.getTimezoneOffset(),We=be<0?"+":"-",tt=Math.floor(Math.abs(be/60)),jt=Math.abs(be%60),$t=[We,H(tt),"'",H(jt),"'"].join("");return["D:",W.getFullYear(),H(W.getMonth()+1),H(W.getDate()),H(W.getHours()),H(W.getMinutes()),H(W.getSeconds()),$t].join("")},Y=p.__private__.convertPDFDateToDate=function(W){var be=parseInt(W.substr(2,4),10),We=parseInt(W.substr(6,2),10)-1,tt=parseInt(W.substr(8,2),10),jt=parseInt(W.substr(10,2),10),$t=parseInt(W.substr(12,2),10),lr=parseInt(W.substr(14,2),10);return new Date(be,We,tt,jt,$t,lr,0)},oe=p.__private__.setCreationDate=function(W){var be;if(W===void 0&&(W=new Date),W instanceof Date)be=J(W);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(W))throw new Error("Invalid argument passed to jsPDF.setCreationDate");be=W}return K=be},M=p.__private__.getCreationDate=function(W){var be=K;return W==="jsDate"&&(be=Y(K)),be};p.setCreationDate=function(W){return oe(W),this},p.getCreationDate=function(W){return M(W)};var V,H=p.__private__.padd2=function(W){return("0"+parseInt(W)).slice(-2)},ee=p.__private__.padd2Hex=function(W){return("00"+(W=W.toString())).substr(W.length)},re=0,ae=[],ne=[],ie=0,G=[],de=[],X=!1,le=ne,Se=function(){re=0,ie=0,ne=[],ae=[],G=[],Te=Lt(),_e=Lt()};p.__private__.setCustomOutputDestination=function(W){X=!0,le=W};var ue=function(W){X||(le=W)};p.__private__.resetCustomOutputDestination=function(){X=!1,le=ne};var se=p.__private__.out=function(W){return W=W.toString(),ie+=W.length+1,le.push(W),le},ye=p.__private__.write=function(W){return se(arguments.length===1?W.toString():Array.prototype.join.call(arguments," "))},Ne=p.__private__.getArrayBuffer=function(W){for(var be=W.length,We=new ArrayBuffer(be),tt=new Uint8Array(We);be--;)tt[be]=W.charCodeAt(be);return We},Ue=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ue};var Qe=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(W){return Qe=w===C.ADVANCED?W/pe:W,this};var ot,xt=p.__private__.getFontSize=p.getFontSize=function(){return w===C.COMPAT?Qe:Qe*pe},Le=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(W){return Le=W,this},p.__private__.getR2L=p.getR2L=function(){return Le};var dt,Tt=p.__private__.setZoomMode=function(W){var be=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(W))ot=W;else if(isNaN(W)){if(be.indexOf(W)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+W+'" is not recognized.');ot=W}else ot=parseInt(W,10)};p.__private__.getZoomMode=function(){return ot};var At,Vt=p.__private__.setPageMode=function(W){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(W)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+W+'" is not recognized.');dt=W};p.__private__.getPageMode=function(){return dt};var xe=p.__private__.setLayoutMode=function(W){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(W)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+W+'" is not recognized.');At=W};p.__private__.getLayoutMode=function(){return At},p.__private__.setDisplayMode=p.setDisplayMode=function(W,be,We){return Tt(W),xe(be),Vt(We),this};var he={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(W){if(Object.keys(he).indexOf(W)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return he[W]},p.__private__.getDocumentProperties=function(){return he},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(W){for(var be in he)he.hasOwnProperty(be)&&W[be]&&(he[be]=W[be]);return this},p.__private__.setDocumentProperty=function(W,be){if(Object.keys(he).indexOf(W)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return he[W]=be};var ve,pe,De,Ye,Nt,Je={},Xe={},Be=[],qe={},ft={},Ie={},Ke={},Ge=null,lt=0,Mt=[],Ae=new T7(p),ke=e.hotfixes||[],it={},bt={},Xt=[],Ft=function W(be,We,tt,jt,$t,lr){if(!(this instanceof W))return new W(be,We,tt,jt,$t,lr);isNaN(be)&&(be=1),isNaN(We)&&(We=0),isNaN(tt)&&(tt=0),isNaN(jt)&&(jt=1),isNaN($t)&&($t=0),isNaN(lr)&&(lr=0),this._matrix=[be,We,tt,jt,$t,lr]};Object.defineProperty(Ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty(Ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty(Ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty(Ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty(Ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty(Ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty(Ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(W){this._matrix[0]=W}}),Object.defineProperty(Ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(W){this._matrix[1]=W}}),Object.defineProperty(Ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(W){this._matrix[2]=W}}),Object.defineProperty(Ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(W){this._matrix[3]=W}}),Object.defineProperty(Ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(W){this._matrix[4]=W}}),Object.defineProperty(Ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(W){this._matrix[5]=W}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ft.prototype.join=function(W){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(E).join(W)},Ft.prototype.multiply=function(W){var be=W.sx*this.sx+W.shy*this.shx,We=W.sx*this.shy+W.shy*this.sy,tt=W.shx*this.sx+W.sy*this.shx,jt=W.shx*this.shy+W.sy*this.sy,$t=W.tx*this.sx+W.ty*this.shx+this.tx,lr=W.tx*this.shy+W.ty*this.sy+this.ty;return new Ft(be,We,tt,jt,$t,lr)},Ft.prototype.decompose=function(){var W=this.sx,be=this.shy,We=this.shx,tt=this.sy,jt=this.tx,$t=this.ty,lr=Math.sqrt(W*W+be*be),wr=(W/=lr)*We+(be/=lr)*tt;We-=W*wr,tt-=be*wr;var Rr=Math.sqrt(We*We+tt*tt);return wr/=Rr,W*(tt/=Rr)<be*(We/=Rr)&&(W=-W,be=-be,wr=-wr,lr=-lr),{scale:new Ft(lr,0,0,Rr,0,0),translate:new Ft(1,0,0,1,jt,$t),rotate:new Ft(W,be,-be,W,0,0),skew:new Ft(1,0,wr,1,0,0)}},Ft.prototype.toString=function(W){return this.join(" ")},Ft.prototype.inversed=function(){var W=this.sx,be=this.shy,We=this.shx,tt=this.sy,jt=this.tx,$t=this.ty,lr=1/(W*tt-be*We),wr=tt*lr,Rr=-be*lr,ua=-We*lr,la=W*lr;return new Ft(wr,Rr,ua,la,-wr*jt-ua*$t,-Rr*jt-la*$t)},Ft.prototype.applyToPoint=function(W){var be=W.x*this.sx+W.y*this.shx+this.tx,We=W.x*this.shy+W.y*this.sy+this.ty;return new Pf(be,We)},Ft.prototype.applyToRectangle=function(W){var be=this.applyToPoint(W),We=this.applyToPoint(new Pf(W.x+W.w,W.y+W.h));return new ip(be.x,be.y,We.x-be.x,We.y-be.y)},Ft.prototype.clone=function(){var W=this.sx,be=this.shy,We=this.shx,tt=this.sy,jt=this.tx,$t=this.ty;return new Ft(W,be,We,tt,jt,$t)},p.Matrix=Ft;var rr=p.matrixMult=function(W,be){return be.multiply(W)},pr=new Ft(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=pr;var jr=function(W,be){if(!ft[W]){var We=(be instanceof Vp?"Sh":"P")+(Object.keys(qe).length+1).toString(10);be.id=We,ft[W]=We,qe[We]=be,Ae.publish("addPattern",be)}};p.ShadingPattern=Vp,p.TilingPattern=t0,p.addShadingPattern=function(W,be){return T("addShadingPattern()"),jr(W,be),this},p.beginTilingPattern=function(W){T("beginTilingPattern()"),Of(W.boundingBox[0],W.boundingBox[1],W.boundingBox[2]-W.boundingBox[0],W.boundingBox[3]-W.boundingBox[1],W.matrix)},p.endTilingPattern=function(W,be){T("endTilingPattern()"),be.stream=de[V].join(`
`),jr(W,be),Ae.publish("endTilingPattern",be),Xt.pop().restore()};var vt=p.__private__.newObject=function(){var W=Lt();return fe(W,!0),W},Lt=p.__private__.newObjectDeferred=function(){return re++,ae[re]=function(){return ie},re},fe=function(W,be){return be=typeof be=="boolean"&&be,ae[W]=ie,be&&se(W+" 0 obj"),W},Me=p.__private__.newAdditionalObject=function(){var W={objId:Lt(),content:""};return G.push(W),W},Te=Lt(),_e=Lt(),Fe=p.__private__.decodeColorString=function(W){var be=W.split(" ");if(be.length!==2||be[1]!=="g"&&be[1]!=="G")be.length===5&&(be[4]==="k"||be[4]==="K")&&(be=[(1-be[0])*(1-be[3]),(1-be[1])*(1-be[3]),(1-be[2])*(1-be[3]),"r"]);else{var We=parseFloat(be[0]);be=[We,We,We,"r"]}for(var tt="#",jt=0;jt<3;jt++)tt+=("0"+Math.floor(255*parseFloat(be[jt])).toString(16)).slice(-2);return tt},Ve=p.__private__.encodeColorString=function(W){var be;typeof W=="string"&&(W={ch1:W});var We=W.ch1,tt=W.ch2,jt=W.ch3,$t=W.ch4,lr=W.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof We=="string"&&We.charAt(0)!=="#"){var wr=new qK(We);if(wr.ok)We=wr.toHex();else if(!/^\d*\.?\d*$/.test(We))throw new Error('Invalid color "'+We+'" passed to jsPDF.encodeColorString.')}if(typeof We=="string"&&/^#[0-9A-Fa-f]{3}$/.test(We)&&(We="#"+We[1]+We[1]+We[2]+We[2]+We[3]+We[3]),typeof We=="string"&&/^#[0-9A-Fa-f]{6}$/.test(We)){var Rr=parseInt(We.substr(1),16);We=Rr>>16&255,tt=Rr>>8&255,jt=255&Rr}if(tt===void 0||$t===void 0&&We===tt&&tt===jt)if(typeof We=="string")be=We+" "+lr[0];else switch(W.precision){case 2:be=L(We/255)+" "+lr[0];break;case 3:default:be=P(We/255)+" "+lr[0]}else if($t===void 0||Ua($t)==="object"){if($t&&!isNaN($t.a)&&$t.a===0)return be=["1.","1.","1.",lr[1]].join(" ");if(typeof We=="string")be=[We,tt,jt,lr[1]].join(" ");else switch(W.precision){case 2:be=[L(We/255),L(tt/255),L(jt/255),lr[1]].join(" ");break;default:case 3:be=[P(We/255),P(tt/255),P(jt/255),lr[1]].join(" ")}}else if(typeof We=="string")be=[We,tt,jt,$t,lr[2]].join(" ");else switch(W.precision){case 2:be=[L(We),L(tt),L(jt),L($t),lr[2]].join(" ");break;case 3:default:be=[P(We),P(tt),P(jt),P($t),lr[2]].join(" ")}return be},mt=p.__private__.getFilters=function(){return o},wt=p.__private__.putStream=function(W){var be=(W=W||{}).data||"",We=W.filters||mt(),tt=W.alreadyAppliedFilters||[],jt=W.addLength1||!1,$t=be.length,lr=W.objectId,wr=function(rs){return rs};if(u!==null&&lr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(wr=ms.encryptor(lr,0));var Rr={};We===!0&&(We=["FlateEncode"]);var ua=W.additionalKeyValues||[],la=(Rr=ta.API.processDataByFilters!==void 0?ta.API.processDataByFilters(be,We):{data:be,reverseChain:[]}).reverseChain+(Array.isArray(tt)?tt.join(" "):tt.toString());if(Rr.data.length!==0&&(ua.push({key:"Length",value:Rr.data.length}),jt===!0&&ua.push({key:"Length1",value:$t})),la.length!=0)if(la.split("/").length-1==1)ua.push({key:"Filter",value:la});else{ua.push({key:"Filter",value:"["+la+"]"});for(var Ia=0;Ia<ua.length;Ia+=1)if(ua[Ia].key==="DecodeParms"){for(var Tn=[],Rn=0;Rn<Rr.reverseChain.split("/").length-1;Rn+=1)Tn.push("null");Tn.push(ua[Ia].value),ua[Ia].value="["+Tn.join(" ")+"]"}}se("<<");for(var ts=0;ts<ua.length;ts++)se("/"+ua[ts].key+" "+ua[ts].value);se(">>"),Rr.data.length!==0&&(se("stream"),se(wr(Rr.data)),se("endstream"))},nt=p.__private__.putPage=function(W){var be=W.number,We=W.data,tt=W.objId,jt=W.contentsObjId;fe(tt,!0),se("<</Type /Page"),se("/Parent "+W.rootDictionaryObjId+" 0 R"),se("/Resources "+W.resourceDictionaryObjId+" 0 R"),se("/MediaBox ["+parseFloat(E(W.mediaBox.bottomLeftX))+" "+parseFloat(E(W.mediaBox.bottomLeftY))+" "+E(W.mediaBox.topRightX)+" "+E(W.mediaBox.topRightY)+"]"),W.cropBox!==null&&se("/CropBox ["+E(W.cropBox.bottomLeftX)+" "+E(W.cropBox.bottomLeftY)+" "+E(W.cropBox.topRightX)+" "+E(W.cropBox.topRightY)+"]"),W.bleedBox!==null&&se("/BleedBox ["+E(W.bleedBox.bottomLeftX)+" "+E(W.bleedBox.bottomLeftY)+" "+E(W.bleedBox.topRightX)+" "+E(W.bleedBox.topRightY)+"]"),W.trimBox!==null&&se("/TrimBox ["+E(W.trimBox.bottomLeftX)+" "+E(W.trimBox.bottomLeftY)+" "+E(W.trimBox.topRightX)+" "+E(W.trimBox.topRightY)+"]"),W.artBox!==null&&se("/ArtBox ["+E(W.artBox.bottomLeftX)+" "+E(W.artBox.bottomLeftY)+" "+E(W.artBox.topRightX)+" "+E(W.artBox.topRightY)+"]"),typeof W.userUnit=="number"&&W.userUnit!==1&&se("/UserUnit "+W.userUnit),Ae.publish("putPage",{objId:tt,pageContext:Mt[be],pageNumber:be,page:We}),se("/Contents "+jt+" 0 R"),se(">>"),se("endobj");var $t=We.join(`
`);return w===C.ADVANCED&&($t+=`
Q`),fe(jt,!0),wt({data:$t,filters:mt(),objectId:jt}),se("endobj"),tt},St=p.__private__.putPages=function(){var W,be,We=[];for(W=1;W<=lt;W++)Mt[W].objId=Lt(),Mt[W].contentsObjId=Lt();for(W=1;W<=lt;W++)We.push(nt({number:W,data:de[W],objId:Mt[W].objId,contentsObjId:Mt[W].contentsObjId,mediaBox:Mt[W].mediaBox,cropBox:Mt[W].cropBox,bleedBox:Mt[W].bleedBox,trimBox:Mt[W].trimBox,artBox:Mt[W].artBox,userUnit:Mt[W].userUnit,rootDictionaryObjId:Te,resourceDictionaryObjId:_e}));fe(Te,!0),se("<</Type /Pages");var tt="/Kids [";for(be=0;be<lt;be++)tt+=We[be]+" 0 R ";se(tt+"]"),se("/Count "+lt),se(">>"),se("endobj"),Ae.publish("postPutPages")},Ct=function(W){Ae.publish("putFont",{font:W,out:se,newObject:vt,putStream:wt}),W.isAlreadyPutted!==!0&&(W.objectNumber=vt(),se("<<"),se("/Type /Font"),se("/BaseFont /"+Kv(W.postScriptName)),se("/Subtype /Type1"),typeof W.encoding=="string"&&se("/Encoding /"+W.encoding),se("/FirstChar 32"),se("/LastChar 255"),se(">>"),se("endobj"))},Jt=function(){for(var W in Je)Je.hasOwnProperty(W)&&(h===!1||h===!0&&m.hasOwnProperty(W))&&Ct(Je[W])},ir=function(W){W.objectNumber=vt();var be=[];be.push({key:"Type",value:"/XObject"}),be.push({key:"Subtype",value:"/Form"}),be.push({key:"BBox",value:"["+[E(W.x),E(W.y),E(W.x+W.width),E(W.y+W.height)].join(" ")+"]"}),be.push({key:"Matrix",value:"["+W.matrix.toString()+"]"});var We=W.pages[1].join(`
`);wt({data:We,additionalKeyValues:be,objectId:W.objectNumber}),se("endobj")},xr=function(){for(var W in it)it.hasOwnProperty(W)&&ir(it[W])},or=function(W,be){var We,tt=[],jt=1/(be-1);for(We=0;We<1;We+=jt)tt.push(We);if(tt.push(1),W[0].offset!=0){var $t={offset:0,color:W[0].color};W.unshift($t)}if(W[W.length-1].offset!=1){var lr={offset:1,color:W[W.length-1].color};W.push(lr)}for(var wr="",Rr=0,ua=0;ua<tt.length;ua++){for(We=tt[ua];We>W[Rr+1].offset;)Rr++;var la=W[Rr].offset,Ia=(We-la)/(W[Rr+1].offset-la),Tn=W[Rr].color,Rn=W[Rr+1].color;wr+=ee(Math.round((1-Ia)*Tn[0]+Ia*Rn[0]).toString(16))+ee(Math.round((1-Ia)*Tn[1]+Ia*Rn[1]).toString(16))+ee(Math.round((1-Ia)*Tn[2]+Ia*Rn[2]).toString(16))}return wr.trim()},ze=function(W,be){be||(be=21);var We=vt(),tt=or(W.colors,be),jt=[];jt.push({key:"FunctionType",value:"0"}),jt.push({key:"Domain",value:"[0.0 1.0]"}),jt.push({key:"Size",value:"["+be+"]"}),jt.push({key:"BitsPerSample",value:"8"}),jt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),jt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),wt({data:tt,additionalKeyValues:jt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:We}),se("endobj"),W.objectNumber=vt(),se("<< /ShadingType "+W.type),se("/ColorSpace /DeviceRGB");var $t="/Coords ["+E(parseFloat(W.coords[0]))+" "+E(parseFloat(W.coords[1]))+" ";W.type===2?$t+=E(parseFloat(W.coords[2]))+" "+E(parseFloat(W.coords[3])):$t+=E(parseFloat(W.coords[2]))+" "+E(parseFloat(W.coords[3]))+" "+E(parseFloat(W.coords[4]))+" "+E(parseFloat(W.coords[5])),se($t+="]"),W.matrix&&se("/Matrix ["+W.matrix.toString()+"]"),se("/Function "+We+" 0 R"),se("/Extend [true true]"),se(">>"),se("endobj")},dr=function(W,be){var We=Lt(),tt=vt();be.push({resourcesOid:We,objectOid:tt}),W.objectNumber=tt;var jt=[];jt.push({key:"Type",value:"/Pattern"}),jt.push({key:"PatternType",value:"1"}),jt.push({key:"PaintType",value:"1"}),jt.push({key:"TilingType",value:"1"}),jt.push({key:"BBox",value:"["+W.boundingBox.map(E).join(" ")+"]"}),jt.push({key:"XStep",value:E(W.xStep)}),jt.push({key:"YStep",value:E(W.yStep)}),jt.push({key:"Resources",value:We+" 0 R"}),W.matrix&&jt.push({key:"Matrix",value:"["+W.matrix.toString()+"]"}),wt({data:W.stream,additionalKeyValues:jt,objectId:W.objectNumber}),se("endobj")},ur=function(W){var be;for(be in qe)qe.hasOwnProperty(be)&&(qe[be]instanceof Vp?ze(qe[be]):qe[be]instanceof t0&&dr(qe[be],W))},Vr=function(W){for(var be in W.objectNumber=vt(),se("<<"),W)switch(be){case"opacity":se("/ca "+L(W[be]));break;case"stroke-opacity":se("/CA "+L(W[be]))}se(">>"),se("endobj")},va=function(){var W;for(W in Ie)Ie.hasOwnProperty(W)&&Vr(Ie[W])},en=function(){for(var W in se("/XObject <<"),it)it.hasOwnProperty(W)&&it[W].objectNumber>=0&&se("/"+W+" "+it[W].objectNumber+" 0 R");Ae.publish("putXobjectDict"),se(">>")},zs=function(){ms.oid=vt(),se("<<"),se("/Filter /Standard"),se("/V "+ms.v),se("/R "+ms.r),se("/U <"+ms.toHexString(ms.U)+">"),se("/O <"+ms.toHexString(ms.O)+">"),se("/P "+ms.P),se(">>"),se("endobj")},zn=function(){for(var W in se("/Font <<"),Je)Je.hasOwnProperty(W)&&(h===!1||h===!0&&m.hasOwnProperty(W))&&se("/"+W+" "+Je[W].objectNumber+" 0 R");se(">>")},fs=function(){if(Object.keys(qe).length>0){for(var W in se("/Shading <<"),qe)qe.hasOwnProperty(W)&&qe[W]instanceof Vp&&qe[W].objectNumber>=0&&se("/"+W+" "+qe[W].objectNumber+" 0 R");Ae.publish("putShadingPatternDict"),se(">>")}},ks=function(W){if(Object.keys(qe).length>0){for(var be in se("/Pattern <<"),qe)qe.hasOwnProperty(be)&&qe[be]instanceof p.TilingPattern&&qe[be].objectNumber>=0&&qe[be].objectNumber<W&&se("/"+be+" "+qe[be].objectNumber+" 0 R");Ae.publish("putTilingPatternDict"),se(">>")}},yt=function(){if(Object.keys(Ie).length>0){var W;for(W in se("/ExtGState <<"),Ie)Ie.hasOwnProperty(W)&&Ie[W].objectNumber>=0&&se("/"+W+" "+Ie[W].objectNumber+" 0 R");Ae.publish("putGStateDict"),se(">>")}},mr=function(W){fe(W.resourcesOid,!0),se("<<"),se("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),zn(),fs(),ks(W.objectOid),yt(),en(),se(">>"),se("endobj")},hr=function(){var W=[];Jt(),va(),xr(),ur(W),Ae.publish("putResources"),W.forEach(mr),mr({resourcesOid:_e,objectOid:Number.MAX_SAFE_INTEGER}),Ae.publish("postPutResources")},Yr=function(){Ae.publish("putAdditionalObjects");for(var W=0;W<G.length;W++){var be=G[W];fe(be.objId,!0),se(be.content),se("endobj")}Ae.publish("postPutAdditionalObjects")},Mr=function(W){Xe[W.fontName]=Xe[W.fontName]||{},Xe[W.fontName][W.fontStyle]=W.id},on=function(W,be,We,tt,jt){var $t={id:"F"+(Object.keys(Je).length+1).toString(10),postScriptName:W,fontName:be,fontStyle:We,encoding:tt,isStandardFont:jt||!1,metadata:{}};return Ae.publish("addFont",{font:$t,instance:this}),Je[$t.id]=$t,Mr($t),$t.id},Ho=function(W){for(var be=0,We=Ue.length;be<We;be++){var tt=on.call(this,W[be][0],W[be][1],W[be][2],Ue[be][3],!0);h===!1&&(m[tt]=!0);var jt=W[be][0].split("-");Mr({id:tt,fontName:jt[0],fontStyle:jt[1]||""})}Ae.publish("addFonts",{fonts:Je,dictionary:Xe})},es=function(W){return W.foo=function(){try{return W.apply(this,arguments)}catch(tt){var be=tt.stack||"";~be.indexOf(" at ")&&(be=be.split(" at ")[1]);var We="Error in function "+be.split(`
`)[0].split("<")[0]+": "+tt.message;if(!na.console)throw new Error(We);na.console.error(We,tt),na.alert&&alert(We)}},W.foo.bar=W,W.foo},Io=function(W,be){var We,tt,jt,$t,lr,wr,Rr,ua,la;if(jt=(be=be||{}).sourceEncoding||"Unicode",lr=be.outputEncoding,(be.autoencode||lr)&&Je[ve].metadata&&Je[ve].metadata[jt]&&Je[ve].metadata[jt].encoding&&($t=Je[ve].metadata[jt].encoding,!lr&&Je[ve].encoding&&(lr=Je[ve].encoding),!lr&&$t.codePages&&(lr=$t.codePages[0]),typeof lr=="string"&&(lr=$t[lr]),lr)){for(Rr=!1,wr=[],We=0,tt=W.length;We<tt;We++)(ua=lr[W.charCodeAt(We)])?wr.push(String.fromCharCode(ua)):wr.push(W[We]),wr[We].charCodeAt(0)>>8&&(Rr=!0);W=wr.join("")}for(We=W.length;Rr===void 0&&We!==0;)W.charCodeAt(We-1)>>8&&(Rr=!0),We--;if(!Rr)return W;for(wr=be.noBOM?[]:[254,255],We=0,tt=W.length;We<tt;We++){if((la=(ua=W.charCodeAt(We))>>8)>>8)throw new Error("Character at position "+We+" of string '"+W+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");wr.push(la),wr.push(ua-(la<<8))}return String.fromCharCode.apply(void 0,wr)},xa=p.__private__.pdfEscape=p.pdfEscape=function(W,be){return Io(W,be).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ni=p.__private__.beginPage=function(W){de[++lt]=[],Mt[lt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(W[0]),topRightY:Number(W[1])}},Oi(lt),ue(de[V])},Wo=function(W,be){var We,tt,jt;switch(r=be||r,typeof W=="string"&&(We=y(W.toLowerCase()),Array.isArray(We)&&(tt=We[0],jt=We[1])),Array.isArray(W)&&(tt=W[0]*pe,jt=W[1]*pe),isNaN(tt)&&(tt=s[0],jt=s[1]),(tt>14400||jt>14400)&&(En.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),tt=Math.min(14400,tt),jt=Math.min(14400,jt)),s=[tt,jt],r.substr(0,1)){case"l":jt>tt&&(s=[jt,tt]);break;case"p":tt>jt&&(s=[jt,tt])}ni(s),Df(hc),se(Sl),sp!==0&&se(sp+" J"),If!==0&&se(If+" j"),Ae.publish("addPage",{pageNumber:lt})},Go=function(W){W>0&&W<=lt&&(de.splice(W,1),Mt.splice(W,1),lt--,V>lt&&(V=lt),this.setPage(V))},Oi=function(W){W>0&&W<=lt&&(V=W)},Va=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return de.length-1},Mi=function(W,be,We){var tt,jt=void 0;return We=We||{},W=W!==void 0?W:Je[ve].fontName,be=be!==void 0?be:Je[ve].fontStyle,tt=W.toLowerCase(),Xe[tt]!==void 0&&Xe[tt][be]!==void 0?jt=Xe[tt][be]:Xe[W]!==void 0&&Xe[W][be]!==void 0?jt=Xe[W][be]:We.disableWarning===!1&&En.warn("Unable to look up font label for font '"+W+"', '"+be+"'. Refer to getFontList() for available fonts."),jt||We.noFallback||(jt=Xe.times[be])==null&&(jt=Xe.times.normal),jt},_s=p.__private__.putInfo=function(){var W=vt(),be=function(tt){return tt};for(var We in u!==null&&(be=ms.encryptor(W,0)),se("<<"),se("/Producer ("+xa(be("jsPDF "+ta.version))+")"),he)he.hasOwnProperty(We)&&he[We]&&se("/"+We.substr(0,1).toUpperCase()+We.substr(1)+" ("+xa(be(he[We]))+")");se("/CreationDate ("+xa(be(K))+")"),se(">>"),se("endobj")},oc=p.__private__.putCatalog=function(W){var be=(W=W||{}).rootDictionaryObjId||Te;switch(vt(),se("<<"),se("/Type /Catalog"),se("/Pages "+be+" 0 R"),ot||(ot="fullwidth"),ot){case"fullwidth":se("/OpenAction [3 0 R /FitH null]");break;case"fullheight":se("/OpenAction [3 0 R /FitV null]");break;case"fullpage":se("/OpenAction [3 0 R /Fit]");break;case"original":se("/OpenAction [3 0 R /XYZ null null 1]");break;default:var We=""+ot;We.substr(We.length-1)==="%"&&(ot=parseInt(ot)/100),typeof ot=="number"&&se("/OpenAction [3 0 R /XYZ null null "+L(ot)+"]")}switch(At||(At="continuous"),At){case"continuous":se("/PageLayout /OneColumn");break;case"single":se("/PageLayout /SinglePage");break;case"two":case"twoleft":se("/PageLayout /TwoColumnLeft");break;case"tworight":se("/PageLayout /TwoColumnRight")}dt&&se("/PageMode /"+dt),Ae.publish("putCatalog"),se(">>"),se("endobj")},ed=p.__private__.putTrailer=function(){se("trailer"),se("<<"),se("/Size "+(re+1)),se("/Root "+re+" 0 R"),se("/Info "+(re-1)+" 0 R"),u!==null&&se("/Encrypt "+ms.oid+" 0 R"),se("/ID [ <"+B+"> <"+B+"> ]"),se(">>")},yl=p.__private__.putHeader=function(){se("%PDF-"+v),se("%ºß¬à")},td=p.__private__.putXRef=function(){var W="0000000000";se("xref"),se("0 "+(re+1)),se("0000000000 65535 f ");for(var be=1;be<=re;be++)typeof ae[be]=="function"?se((W+ae[be]()).slice(-10)+" 00000 n "):ae[be]!==void 0?se((W+ae[be]).slice(-10)+" 00000 n "):se("0000000000 00000 n ")},jl=p.__private__.buildDocument=function(){Se(),ue(ne),Ae.publish("buildDocument"),yl(),St(),Yr(),hr(),u!==null&&zs(),_s(),oc();var W=ie;return td(),ed(),se("startxref"),se(""+W),se("%%EOF"),ue(de[V]),ne.join(`
`)},lc=p.__private__.getBlob=function(W){return new Blob([Ne(W)],{type:"application/pdf"})},Nl=p.output=p.__private__.output=es(function(W,be){switch(typeof(be=be||{})=="string"?be={filename:be}:be.filename=be.filename||"generated.pdf",W){case void 0:return jl();case"save":p.save(be.filename);break;case"arraybuffer":return Ne(jl());case"blob":return lc(jl());case"bloburi":case"bloburl":if(na.URL!==void 0&&typeof na.URL.createObjectURL=="function")return na.URL&&na.URL.createObjectURL(lc(jl()))||void 0;En.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var We="",tt=jl();try{We=v3(tt)}catch{We=v3(unescape(encodeURIComponent(tt)))}return"data:application/pdf;filename="+be.filename+";base64,"+We;case"pdfobjectnewwindow":if(Object.prototype.toString.call(na)==="[object Window]"){var jt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$t=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';be.pdfObjectUrl&&(jt=be.pdfObjectUrl,$t="");var lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+jt+'"'+$t+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(be)+");<\/script></body></html>",wr=na.open();return wr!==null&&wr.document.write(lr),wr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(na)==="[object Window]"){var Rr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(be.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+be.filename+'" width="500px" height="400px" /></body></html>',ua=na.open();if(ua!==null){ua.document.write(Rr);var la=this;ua.document.documentElement.querySelector("#pdfViewer").onload=function(){ua.document.title=be.filename,ua.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(la.output("bloburl"))}}return ua}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(na)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ia='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",be)+'"></iframe></body></html>',Tn=na.open();if(Tn!==null&&(Tn.document.write(Ia),Tn.document.title=be.filename),Tn||typeof safari>"u")return Tn;break;case"datauri":case"dataurl":return na.document.location.href=this.output("datauristring",be);default:return null}}),cc=function(W){return Array.isArray(ke)===!0&&ke.indexOf(W)>-1};switch(n){case"pt":pe=1;break;case"mm":pe=72/25.4;break;case"cm":pe=72/2.54;break;case"in":pe=72;break;case"px":pe=cc("px_scaling")==1?.75:96/72;break;case"pc":case"em":pe=12;break;case"ex":pe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);pe=n}var ms=null;oe(),U();var dc=function(W){return u!==null?ms.encryptor(W,0):function(be){return be}},wl=p.__private__.getPageInfo=p.getPageInfo=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Mt[W].objId,pageNumber:W,pageContext:Mt[W]}},Jr=p.__private__.getPageInfoByObjId=function(W){if(isNaN(W)||W%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var be in Mt)if(Mt[be].objId===W)break;return wl(be)},ih=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Mt[V].objId,pageNumber:V,pageContext:Mt[V]}};p.addPage=function(){return Wo.apply(this,arguments),this},p.setPage=function(){return Oi.apply(this,arguments),ue.call(this,de[V]),this},p.insertPage=function(W){return this.addPage(),this.movePage(V,W),this},p.movePage=function(W,be){var We,tt;if(W>be){We=de[W],tt=Mt[W];for(var jt=W;jt>be;jt--)de[jt]=de[jt-1],Mt[jt]=Mt[jt-1];de[be]=We,Mt[be]=tt,this.setPage(be)}else if(W<be){We=de[W],tt=Mt[W];for(var $t=W;$t<be;$t++)de[$t]=de[$t+1],Mt[$t]=Mt[$t+1];de[be]=We,Mt[be]=tt,this.setPage(be)}return this},p.deletePage=function(){return Go.apply(this,arguments),this},p.__private__.text=p.text=function(W,be,We,tt,jt){var $t,lr,wr,Rr,ua,la,Ia,Tn,Rn,ts=(tt=tt||{}).scope||this;if(typeof W=="number"&&typeof be=="number"&&(typeof We=="string"||Array.isArray(We))){var rs=We;We=be,be=W,W=rs}if(arguments[3]instanceof Ft?(T("The transform parameter of text() with a Matrix value"),Rn=jt):(wr=arguments[4],Rr=arguments[5],Ua(Ia=arguments[3])==="object"&&Ia!==null||(typeof wr=="string"&&(Rr=wr,wr=null),typeof Ia=="string"&&(Rr=Ia,Ia=null),typeof Ia=="number"&&(wr=Ia,Ia=null),tt={flags:Ia,angle:wr,align:Rr})),isNaN(be)||isNaN(We)||W==null)throw new Error("Invalid arguments passed to jsPDF.text");if(W.length===0)return ts;var Hs="",Cl=!1,Oo=typeof tt.lineHeightFactor=="number"?tt.lineHeightFactor:vi,kl=ts.internal.scaleFactor;function cp(Ca){return Ca=Ca.split("	").join(Array(tt.TabLen||9).join(" ")),xa(Ca,Ia)}function ad(Ca){for(var ka,jn=Ca.concat(),as=[],Zo=jn.length;Zo--;)typeof(ka=jn.shift())=="string"?as.push(ka):Array.isArray(Ca)&&(ka.length===1||ka[1]===void 0&&ka[2]===void 0)?as.push(ka[0]):as.push([ka[0],ka[1],ka[2]]);return as}function nd(Ca,ka){var jn;if(typeof Ca=="string")jn=ka(Ca)[0];else if(Array.isArray(Ca)){for(var as,Zo,ru=Ca.concat(),au=[],od=ru.length;od--;)typeof(as=ru.shift())=="string"?au.push(ka(as)[0]):Array.isArray(as)&&typeof as[0]=="string"&&(Zo=ka(as[0],as[1],as[2]),au.push([Zo[0],Zo[1],Zo[2]]));jn=au}return jn}var Ff=!1,Gd=!0;if(typeof W=="string")Ff=!0;else if(Array.isArray(W)){var Lf=W.concat();lr=[];for(var dh,Ds=Lf.length;Ds--;)(typeof(dh=Lf.shift())!="string"||Array.isArray(dh)&&typeof dh[0]!="string")&&(Gd=!1);Ff=Gd}if(Ff===!1)throw new Error('Type of text must be string or Array. "'+W+'" is not recognized.');typeof W=="string"&&(W=W.match(/[\r?\n]/)?W.split(/\r\n|\r|\n/g):[W]);var Yd=Qe/ts.internal.scaleFactor,uh=Yd*(Oo-1);switch(tt.baseline){case"bottom":We-=uh;break;case"top":We+=Yd-uh;break;case"hanging":We+=Yd-2*uh;break;case"middle":We+=Yd/2-uh}if((la=tt.maxWidth||0)>0&&(typeof W=="string"?W=ts.splitTextToSize(W,la):Object.prototype.toString.call(W)==="[object Array]"&&(W=W.reduce(function(Ca,ka){return Ca.concat(ts.splitTextToSize(ka,la))},[]))),$t={text:W,x:be,y:We,options:tt,mutex:{pdfEscape:xa,activeFontKey:ve,fonts:Je,activeFontSize:Qe}},Ae.publish("preProcessText",$t),W=$t.text,wr=(tt=$t.options).angle,!(Rn instanceof Ft)&&wr&&typeof wr=="number"){wr*=Math.PI/180,tt.rotationDirection===0&&(wr=-wr),w===C.ADVANCED&&(wr=-wr);var hh=Math.cos(wr),Bf=Math.sin(wr);Rn=new Ft(hh,Bf,-Bf,hh,0,0)}else wr&&wr instanceof Ft&&(Rn=wr);w!==C.ADVANCED||Rn||(Rn=pr),(ua=tt.charSpace||Tf)!==void 0&&(Hs+=E(O(ua))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Tn=tt.horizontalScale)!==void 0&&(Hs+=E(100*Tn)+` Tz
`),tt.lang;var to=-1,vg=tt.renderingMode!==void 0?tt.renderingMode:tt.stroke,dp=ts.internal.getCurrentPageInfo().pageContext;switch(vg){case 0:case!1:case"fill":to=0;break;case 1:case!0:case"stroke":to=1;break;case 2:case"fillThenStroke":to=2;break;case 3:case"invisible":to=3;break;case 4:case"fillAndAddForClipping":to=4;break;case 5:case"strokeAndAddPathForClipping":to=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":to=6;break;case 7:case"addToPathForClipping":to=7}var Jx=dp.usedRenderingMode!==void 0?dp.usedRenderingMode:-1;to!==-1?Hs+=to+` Tr
`:Jx!==-1&&(Hs+=`0 Tr
`),to!==-1&&(dp.usedRenderingMode=to),Rr=tt.align||"left";var Jo,Ws=Qe*Oo,Kd=ts.internal.pageSize.getWidth(),up=Je[ve];ua=tt.charSpace||Tf,la=tt.maxWidth||0,Ia=Object.assign({autoencode:!0,noBOM:!0},tt.flags);var sd=[],Xd=function(Ca){return ts.getStringUnitWidth(Ca,{font:up,charSpace:ua,fontSize:Qe,doKerning:!1})*Qe/kl};if(Object.prototype.toString.call(W)==="[object Array]"){var Ri;lr=ad(W),Rr!=="left"&&(Jo=lr.map(Xd));var si,Qd=0;if(Rr==="right"){be-=Jo[0],W=[],Ds=lr.length;for(var ro=0;ro<Ds;ro++)ro===0?(si=Po(be),Ri=fc(We)):(si=O(Qd-Jo[ro]),Ri=-Ws),W.push([lr[ro],si,Ri]),Qd=Jo[ro]}else if(Rr==="center"){be-=Jo[0]/2,W=[],Ds=lr.length;for(var _l=0;_l<Ds;_l++)_l===0?(si=Po(be),Ri=fc(We)):(si=O((Qd-Jo[_l])/2),Ri=-Ws),W.push([lr[_l],si,Ri]),Qd=Jo[_l]}else if(Rr==="left"){W=[],Ds=lr.length;for(var mc=0;mc<Ds;mc++)W.push(lr[mc])}else if(Rr==="justify"&&up.encoding==="Identity-H"){W=[],Ds=lr.length,la=la!==0?la:Kd;for(var El=0,Hn=0;Hn<Ds;Hn++)if(Ri=Hn===0?fc(We):-Ws,si=Hn===0?Po(be):El,Hn<Ds-1){var Dl=O((la-Jo[Hn])/(lr[Hn].split(" ").length-1)),ps=lr[Hn].split(" ");W.push([ps[0]+" ",si,Ri]),El=0;for(var ao=1;ao<ps.length;ao++){var fh=(Xd(ps[ao-1]+" "+ps[ao])-Xd(ps[ao]))*kl+Dl;ao==ps.length-1?W.push([ps[ao],fh,0]):W.push([ps[ao]+" ",fh,0]),El-=fh}}else W.push([lr[Hn],si,Ri]);W.push(["",El,0])}else{if(Rr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(W=[],Ds=lr.length,la=la!==0?la:Kd,Hn=0;Hn<Ds;Hn++)Ri=Hn===0?fc(We):-Ws,si=Hn===0?Po(be):0,Hn<Ds-1?sd.push(E(O((la-Jo[Hn])/(lr[Hn].split(" ").length-1)))):sd.push(0),W.push([lr[Hn],si,Ri])}}var pc=typeof tt.R2L=="boolean"?tt.R2L:Le;pc===!0&&(W=nd(W,function(Ca,ka,jn){return[Ca.split("").reverse().join(""),ka,jn]})),$t={text:W,x:be,y:We,options:tt,mutex:{pdfEscape:xa,activeFontKey:ve,fonts:Je,activeFontSize:Qe}},Ae.publish("postProcessText",$t),W=$t.text,Cl=$t.mutex.isHex||!1;var Uf=Je[ve].encoding;Uf!=="WinAnsiEncoding"&&Uf!=="StandardEncoding"||(W=nd(W,function(Ca,ka,jn){return[cp(Ca),ka,jn]})),lr=ad(W),W=[];for(var Jd,Zd,eu,mh=0,$f=1,tu=Array.isArray(lr[0])?$f:mh,id="",ph=function(Ca,ka,jn){var as="";return jn instanceof Ft?(jn=typeof tt.angle=="number"?rr(jn,new Ft(1,0,0,1,Ca,ka)):rr(new Ft(1,0,0,1,Ca,ka),jn),w===C.ADVANCED&&(jn=rr(new Ft(1,0,0,-1,0,0),jn)),as=jn.join(" ")+` Tm
`):as=E(Ca)+" "+E(ka)+` Td
`,as},Wn=0;Wn<lr.length;Wn++){switch(id="",tu){case $f:eu=(Cl?"<":"(")+lr[Wn][0]+(Cl?">":")"),Jd=parseFloat(lr[Wn][1]),Zd=parseFloat(lr[Wn][2]);break;case mh:eu=(Cl?"<":"(")+lr[Wn]+(Cl?">":")"),Jd=Po(be),Zd=fc(We)}sd!==void 0&&sd[Wn]!==void 0&&(id=sd[Wn]+` Tw
`),Wn===0?W.push(id+ph(Jd,Zd,Rn)+eu):tu===mh?W.push(id+eu):tu===$f&&W.push(id+ph(Jd,Zd,Rn)+eu)}W=tu===mh?W.join(` Tj
T* `):W.join(` Tj
`),W+=` Tj
`;var Mo=`BT
/`;return Mo+=ve+" "+Qe+` Tf
`,Mo+=E(Qe*Oo)+` TL
`,Mo+=lh+`
`,Mo+=Hs,Mo+=W,se(Mo+="ET"),m[ve]=!0,ts};var _f=p.__private__.clip=p.clip=function(W){return se(W==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return _f("evenodd")},p.__private__.discardPath=p.discardPath=function(){return se("n"),this};var rt=p.__private__.isValidStyle=function(W){var be=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(W)!==-1&&(be=!0),be};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(W){return rt(W)&&(d=W),this};var fr=p.__private__.getStyle=p.getStyle=function(W){var be=d;switch(W){case"D":case"S":be="S";break;case"F":be="f";break;case"FD":case"DF":be="B";break;case"f":case"f*":case"B":case"B*":be=W}return be},ar=p.close=function(){return se("h"),this};p.stroke=function(){return se("S"),this},p.fill=function(W){return Er("f",W),this},p.fillEvenOdd=function(W){return Er("f*",W),this},p.fillStroke=function(W){return Er("B",W),this},p.fillStrokeEvenOdd=function(W){return Er("B*",W),this};var Er=function(W,be){Ua(be)==="object"?Yo(be,W):se(W)},kr=function(W){W===null||w===C.ADVANCED&&W===void 0||(W=fr(W),se(W))};function kn(W,be,We,tt,jt){var $t=new t0(be||this.boundingBox,We||this.xStep,tt||this.yStep,this.gState,jt||this.matrix);$t.stream=this.stream;var lr=W+"$$"+this.cloneIndex+++"$$";return jr(lr,$t),$t}var Yo=function(W,be){var We=ft[W.key],tt=qe[We];if(tt instanceof Vp)se("q"),se(Ef(be)),tt.gState&&p.setGState(tt.gState),se(W.matrix.toString()+" cm"),se("/"+We+" sh"),se("Q");else if(tt instanceof t0){var jt=new Ft(1,0,0,-1,0,Wd());W.matrix&&(jt=jt.multiply(W.matrix||pr),We=kn.call(tt,W.key,W.boundingBox,W.xStep,W.yStep,jt).id),se("q"),se("/Pattern cs"),se("/"+We+" scn"),tt.gState&&p.setGState(tt.gState),se(be),se("Q")}},Ef=function(W){switch(W){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},uc=p.moveTo=function(W,be){return se(E(O(W))+" "+E(z(be))+" m"),this},Ko=p.lineTo=function(W,be){return se(E(O(W))+" "+E(z(be))+" l"),this},Xo=p.curveTo=function(W,be,We,tt,jt,$t){return se([E(O(W)),E(z(be)),E(O(We)),E(z(tt)),E(O(jt)),E(z($t)),"c"].join(" ")),this};p.__private__.line=p.line=function(W,be,We,tt,jt){if(isNaN(W)||isNaN(be)||isNaN(We)||isNaN(tt)||!rt(jt))throw new Error("Invalid arguments passed to jsPDF.line");return w===C.COMPAT?this.lines([[We-W,tt-be]],W,be,[1,1],jt||"S"):this.lines([[We-W,tt-be]],W,be,[1,1]).stroke()},p.__private__.lines=p.lines=function(W,be,We,tt,jt,$t){var lr,wr,Rr,ua,la,Ia,Tn,Rn,ts,rs,Hs,Cl;if(typeof W=="number"&&(Cl=We,We=be,be=W,W=Cl),tt=tt||[1,1],$t=$t||!1,isNaN(be)||isNaN(We)||!Array.isArray(W)||!Array.isArray(tt)||!rt(jt)||typeof $t!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(uc(be,We),lr=tt[0],wr=tt[1],ua=W.length,rs=be,Hs=We,Rr=0;Rr<ua;Rr++)(la=W[Rr]).length===2?(rs=la[0]*lr+rs,Hs=la[1]*wr+Hs,Ko(rs,Hs)):(Ia=la[0]*lr+rs,Tn=la[1]*wr+Hs,Rn=la[2]*lr+rs,ts=la[3]*wr+Hs,rs=la[4]*lr+rs,Hs=la[5]*wr+Hs,Xo(Ia,Tn,Rn,ts,rs,Hs));return $t&&ar(),kr(jt),this},p.path=function(W){for(var be=0;be<W.length;be++){var We=W[be],tt=We.c;switch(We.op){case"m":uc(tt[0],tt[1]);break;case"l":Ko(tt[0],tt[1]);break;case"c":Xo.apply(this,tt);break;case"h":ar()}}return this},p.__private__.rect=p.rect=function(W,be,We,tt,jt){if(isNaN(W)||isNaN(be)||isNaN(We)||isNaN(tt)||!rt(jt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===C.COMPAT&&(tt=-tt),se([E(O(W)),E(z(be)),E(O(We)),E(O(tt)),"re"].join(" ")),kr(jt),this},p.__private__.triangle=p.triangle=function(W,be,We,tt,jt,$t,lr){if(isNaN(W)||isNaN(be)||isNaN(We)||isNaN(tt)||isNaN(jt)||isNaN($t)||!rt(lr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[We-W,tt-be],[jt-We,$t-tt],[W-jt,be-$t]],W,be,[1,1],lr,!0),this},p.__private__.roundedRect=p.roundedRect=function(W,be,We,tt,jt,$t,lr){if(isNaN(W)||isNaN(be)||isNaN(We)||isNaN(tt)||isNaN(jt)||isNaN($t)||!rt(lr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var wr=4/3*(Math.SQRT2-1);return jt=Math.min(jt,.5*We),$t=Math.min($t,.5*tt),this.lines([[We-2*jt,0],[jt*wr,0,jt,$t-$t*wr,jt,$t],[0,tt-2*$t],[0,$t*wr,-jt*wr,$t,-jt,$t],[2*jt-We,0],[-jt*wr,0,-jt,-$t*wr,-jt,-$t],[0,2*$t-tt],[0,-$t*wr,jt*wr,-$t,jt,-$t]],W+jt,be,[1,1],lr,!0),this},p.__private__.ellipse=p.ellipse=function(W,be,We,tt,jt){if(isNaN(W)||isNaN(be)||isNaN(We)||isNaN(tt)||!rt(jt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $t=4/3*(Math.SQRT2-1)*We,lr=4/3*(Math.SQRT2-1)*tt;return uc(W+We,be),Xo(W+We,be-lr,W+$t,be-tt,W,be-tt),Xo(W-$t,be-tt,W-We,be-lr,W-We,be),Xo(W-We,be+lr,W-$t,be+tt,W,be+tt),Xo(W+$t,be+tt,W+We,be+lr,W+We,be),kr(jt),this},p.__private__.circle=p.circle=function(W,be,We,tt){if(isNaN(W)||isNaN(be)||isNaN(We)||!rt(tt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(W,be,We,We,tt)},p.setFont=function(W,be,We){return We&&(be=D(be,We)),ve=Mi(W,be,{disableWarning:!1}),this};var Es=p.__private__.getFont=p.getFont=function(){return Je[Mi.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var W,be,We={};for(W in Xe)if(Xe.hasOwnProperty(W))for(be in We[W]=[],Xe[W])Xe[W].hasOwnProperty(be)&&We[W].push(be);return We},p.addFont=function(W,be,We,tt,jt){var $t=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$t.indexOf(arguments[3])!==-1?jt=arguments[3]:arguments[3]&&$t.indexOf(arguments[3])==-1&&(We=D(We,tt)),jt=jt||"Identity-H",on.call(this,W,be,We,jt)};var vi,hc=e.lineWidth||.200025,Qo=p.__private__.getLineWidth=p.getLineWidth=function(){return hc},Df=p.__private__.setLineWidth=p.setLineWidth=function(W){return hc=W,se(E(O(W))+" w"),this};p.__private__.setLineDash=ta.API.setLineDash=ta.API.setLineDashPattern=function(W,be){if(W=W||[],be=be||0,isNaN(be)||!Array.isArray(W))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return W=W.map(function(We){return E(O(We))}).join(" "),be=E(O(be)),se("["+W+"] "+be+" d"),this};var rd=p.__private__.getLineHeight=p.getLineHeight=function(){return Qe*vi};p.__private__.getLineHeight=p.getLineHeight=function(){return Qe*vi};var Af=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(W){return typeof(W=W||1.15)=="number"&&(vi=W),this},zd=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return vi};Af(e.lineHeight);var Po=p.__private__.getHorizontalCoordinate=function(W){return O(W)},fc=p.__private__.getVerticalCoordinate=function(W){return w===C.ADVANCED?W:Mt[V].mediaBox.topRightY-Mt[V].mediaBox.bottomLeftY-O(W)},fg=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(W){return E(Po(W))},Hd=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(W){return E(fc(W))},Sl=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Fe(Sl)},p.__private__.setStrokeColor=p.setDrawColor=function(W,be,We,tt){return Sl=Ve({ch1:W,ch2:be,ch3:We,ch4:tt,pdfColorType:"draw",precision:2}),se(Sl),this};var oh=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Fe(oh)},p.__private__.setFillColor=p.setFillColor=function(W,be,We,tt){return oh=Ve({ch1:W,ch2:be,ch3:We,ch4:tt,pdfColorType:"fill",precision:2}),se(oh),this};var lh=e.textColor||"0 g",mg=p.__private__.getTextColor=p.getTextColor=function(){return Fe(lh)};p.__private__.setTextColor=p.setTextColor=function(W,be,We,tt){return lh=Ve({ch1:W,ch2:be,ch3:We,ch4:tt,pdfColorType:"text",precision:3}),this};var Tf=e.charSpace,pg=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Tf||0)};p.__private__.setCharSpace=p.setCharSpace=function(W){if(isNaN(W))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Tf=W,this};var sp=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(W){var be=p.CapJoinStyles[W];if(be===void 0)throw new Error("Line cap style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return sp=be,se(be+" J"),this};var If=0;p.__private__.setLineJoin=p.setLineJoin=function(W){var be=p.CapJoinStyles[W];if(be===void 0)throw new Error("Line join style of '"+W+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return If=be,se(be+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(W){if(W=W||0,isNaN(W))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return se(E(O(W))+" M"),this},p.GState=_2,p.setGState=function(W){(W=typeof W=="string"?Ie[Ke[W]]:Qx(null,W)).equals(Ge)||(se("/"+W.id+" gs"),Ge=W)};var Qx=function(W,be){if(!W||!Ke[W]){var We=!1;for(var tt in Ie)if(Ie.hasOwnProperty(tt)&&Ie[tt].equals(be)){We=!0;break}if(We)be=Ie[tt];else{var jt="GS"+(Object.keys(Ie).length+1).toString(10);Ie[jt]=be,be.id=jt}return W&&(Ke[W]=be.id),Ae.publish("addGState",be),be}};p.addGState=function(W,be){return Qx(W,be),this},p.saveGraphicsState=function(){return se("q"),Be.push({key:ve,size:Qe,color:lh}),this},p.restoreGraphicsState=function(){se("Q");var W=Be.pop();return ve=W.key,Qe=W.size,lh=W.color,Ge=null,this},p.setCurrentTransformationMatrix=function(W){return se(W.toString()+" cm"),this},p.comment=function(W){return se("#"+W),this};var Pf=function(W,be){var We=W||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return We},set:function($t){isNaN($t)||(We=parseFloat($t))}});var tt=be||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return tt},set:function($t){isNaN($t)||(tt=parseFloat($t))}});var jt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return jt},set:function($t){jt=$t.toString()}}),this},ip=function(W,be,We,tt){Pf.call(this,W,be),this.type="rect";var jt=We||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return jt},set:function(lr){isNaN(lr)||(jt=parseFloat(lr))}});var $t=tt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $t},set:function(lr){isNaN(lr)||($t=parseFloat(lr))}}),this},op=function(){this.page=lt,this.currentPage=V,this.pages=de.slice(0),this.pagesContext=Mt.slice(0),this.x=De,this.y=Ye,this.matrix=Nt,this.width=ch(V),this.height=Wd(V),this.outputDestination=le,this.id="",this.objectNumber=-1};op.prototype.restore=function(){lt=this.page,V=this.currentPage,Mt=this.pagesContext,de=this.pages,De=this.x,Ye=this.y,Nt=this.matrix,Rf(V,this.width),lp(V,this.height),le=this.outputDestination};var Of=function(W,be,We,tt,jt){Xt.push(new op),lt=V=0,de=[],De=W,Ye=be,Nt=jt,ni([We,tt])},xg=function(W){if(bt[W])Xt.pop().restore();else{var be=new op,We="Xo"+(Object.keys(it).length+1).toString(10);be.id=We,bt[W]=We,it[We]=be,Ae.publish("addFormObject",be),Xt.pop().restore()}};for(var Mf in p.beginFormObject=function(W,be,We,tt,jt){return Of(W,be,We,tt,jt),this},p.endFormObject=function(W){return xg(W),this},p.doFormObject=function(W,be){var We=it[bt[W]];return se("q"),se(be.toString()+" cm"),se("/"+We.id+" Do"),se("Q"),this},p.getFormObject=function(W){var be=it[bt[W]];return{x:be.x,y:be.y,width:be.width,height:be.height,matrix:be.matrix}},p.save=function(W,be){return W=W||"generated.pdf",(be=be||{}).returnPromise=be.returnPromise||!1,be.returnPromise===!1?(Bp(lc(jl()),W),typeof Bp.unload=="function"&&na.setTimeout&&setTimeout(Bp.unload,911),this):new Promise(function(We,tt){try{var jt=Bp(lc(jl()),W);typeof Bp.unload=="function"&&na.setTimeout&&setTimeout(Bp.unload,911),We(jt)}catch($t){tt($t.message)}})},ta.API)ta.API.hasOwnProperty(Mf)&&(Mf==="events"&&ta.API.events.length?function(W,be){var We,tt,jt;for(jt=be.length-1;jt!==-1;jt--)We=be[jt][0],tt=be[jt][1],W.subscribe.apply(W,[We].concat(typeof tt=="function"?[tt]:tt))}(Ae,ta.API.events):p[Mf]=ta.API[Mf]);var ch=p.getPageWidth=function(W){return(Mt[W=W||V].mediaBox.topRightX-Mt[W].mediaBox.bottomLeftX)/pe},Rf=p.setPageWidth=function(W,be){Mt[W].mediaBox.topRightX=be*pe+Mt[W].mediaBox.bottomLeftX},Wd=p.getPageHeight=function(W){return(Mt[W=W||V].mediaBox.topRightY-Mt[W].mediaBox.bottomLeftY)/pe},lp=p.setPageHeight=function(W,be){Mt[W].mediaBox.topRightY=be*pe+Mt[W].mediaBox.bottomLeftY};return p.internal={pdfEscape:xa,getStyle:fr,getFont:Es,getFontSize:xt,getCharSpace:pg,getTextColor:mg,getLineHeight:rd,getLineHeightFactor:zd,getLineWidth:Qo,write:ye,getHorizontalCoordinate:Po,getVerticalCoordinate:fc,getCoordinateString:fg,getVerticalCoordinateString:Hd,collections:{},newObject:vt,newAdditionalObject:Me,newObjectDeferred:Lt,newObjectDeferredBegin:fe,getFilters:mt,putStream:wt,events:Ae,scaleFactor:pe,pageSize:{getWidth:function(){return ch(V)},setWidth:function(W){Rf(V,W)},getHeight:function(){return Wd(V)},setHeight:function(W){lp(V,W)}},encryptionOptions:u,encryption:ms,getEncryptor:dc,output:Nl,getNumberOfPages:Va,pages:de,out:se,f2:L,f3:P,getPageInfo:wl,getPageInfoByObjId:Jr,getCurrentPageInfo:ih,getPDFVersion:g,Point:Pf,Rectangle:ip,Matrix:Ft,hasHotfix:cc},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ch(V)},set:function(W){Rf(V,W)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Wd(V)},set:function(W){lp(V,W)},enumerable:!0,configurable:!0}),Ho.call(p,Ue),ve="F1",Wo(s,r),Ae.publish("initialized"),p}Yv.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Yv.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Yv.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Yv.prototype.processOwnerPassword=function(e,t){return b3(g3(t).substr(0,5),e)},Yv.prototype.encryptor=function(e,t){var r=g3(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return b3(r,n)}},_2.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Ua(e)!==Ua(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},ta.API={events:[]},ta.version="3.0.1";var ys=ta.API,EI=1,Xx=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Uv=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ma=function(e){return e.toFixed(2)},jm=function(e){return e.toFixed(5)};ys.__acroform__={};var bl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},I7=function(e){return e*EI},ju=function(e){var t=new GK,r=Tr.internal.getHeight(e)||0,n=Tr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ma(n)),Number(ma(r))],t},c8e=ys.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},d8e=ys.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},u8e=ys.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Rs=ys.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return u8e(e,t-1)},Fs=ys.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return c8e(e,t-1)},Ls=ys.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return d8e(e,t-1)},h8e=ys.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=n(i)||0,[Number(ma(c.lowerLeft_X)),Number(ma(c.lowerLeft_Y)),Number(ma(c.upperRight_X)),Number(ma(c.upperRight_Y))]},f8e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=y3(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+ma(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=ju(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},y3=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(P){return P.split(`
`)}):s.map(function(P){return[P]});var i=r,o=Tr.internal.getHeight(e)||0;o=o<0?-o:o;var l=Tr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(P,O,Z){if(P+1<s.length){var z=O+" "+s[P+1][0];return vN(z,e,Z).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,h=vN("3",e,i).height,m=e.multiline?o-i:(o-h)/2,p=m+=2,v=0,g=0,b=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+vN(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var y="",C=0,w=0;w<s.length;w++)if(s.hasOwnProperty(w)){var k=!1;if(s[w].length!==1&&b!==s[w].length-1){if((h+2)*(C+2)+2>o)continue e;y+=s[w][b],k=!0,g=w,w--}else{y=(y+=s[w][b]+" ").substr(y.length-1)==" "?y.substr(0,y.length-1):y;var S=parseInt(w),D=c(S,y,i),E=w>=s.length-1;if(D&&!E){y+=" ",b=0;continue}if(D||E){if(E)g=S;else if(e.multiline&&(h+2)*(C+2)+2>o)continue e}else{if(!e.multiline||(h+2)*(C+2)+2>o)continue e;g=S}}for(var T="",A=v;A<=g;A++){var L=s[A];if(e.multiline){if(A===g){T+=L[b]+" ",b=(b+1)%L.length;continue}if(A===v){T+=L[L.length-1]+" ";continue}}T+=L[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,u=vN(T,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;case"left":default:d=2}t+=ma(d)+" "+ma(p)+` Td
`,t+="("+Xx(T)+`) Tj
`,t+=-ma(d)+` 0 Td
`,p=-(i+2),u=0,v=k?g:g+1,C++,y=""}break}return n.text=t,n.fontSize=i,n},vN=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},m8e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},p8e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},x8e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),Ua(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[n]}},v8e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Vd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(m8e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");EI=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new YK,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&p8e(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var o in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=h8e(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Tr.createDefaultAppearanceStream(l),Ua(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=f8e(l);c.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var h="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var p=l.appearanceStreamContent[m];if(h+="/"+m+" ",h+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var v=p[o];typeof v=="function"&&(v=v.call(s,l)),h+="/"+o+" "+v+" ",s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v)}}else typeof(v=p)=="function"&&(v=v.call(s,l)),h+="/"+o+" "+v,s.internal.acroformPlugin.xForms.indexOf(v)>=0||s.internal.acroformPlugin.xForms.push(v);h+=">>"}c.push({key:"AP",value:`<<
`+h+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&x8e(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},WK=ys.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Ua(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),s+="("+Xx(n(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},dD=function(e,t,r){var n=function(s){return s};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Xx(n(e))+")"},Ru=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ru.prototype.toString=function(){return this.objId+" 0 R"},Ru.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ru.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],s=this[n];s&&(Array.isArray(s)?e.push({key:n,value:WK(s,this.objId,this.scope)}):s instanceof Ru?(s.scope=this.scope,e.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:n,value:s}))}return e};var GK=function(){Ru.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};bl(GK,Ru);var YK=function(){Ru.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Xx(r(e))+")"}},set:function(r){e=r}})};bl(YK,Ru);var Vd=function e(){Ru.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute F supplied.');t=y}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Rs(t,3)},set:function(y){y?this.F=Fs(t,3):this.F=Ls(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(y){if(isNaN(y))throw new Error('Invalid value "'+y+'" for attribute Ff supplied.');r=y}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(y){n=y!==void 0?y:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(y){n[0]=y}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(y){n[1]=y}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(y){n[2]=y}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(y){n[3]=y}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(y){switch(y){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=y;break;default:throw new Error('Invalid value "'+y+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof E2)return;i="FieldObject"+e.FieldNum++}var y=function(C){return C};return this.scope&&(y=this.scope.internal.getEncryptor(this.objId)),"("+Xx(y(i))+")"},set:function(y){i=y.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(y){i=y}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(y){o=y}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(y){l=y}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(y){c=y}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/EI:d},set:function(y){d=y}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(y){u=y}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof E2||this instanceof xx))return dD(h,this.objId,this.scope)},set:function(y){y=y.toString(),h=y}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ci?m:dD(m,this.objId,this.scope)},set:function(y){y=y.toString(),m=this instanceof Ci?y:y.substr(0,1)==="("?Uv(y.substr(1,y.length-2)):Uv(y)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ci?Uv(m.substr(1,m.length-1)):m},set:function(y){y=y.toString(),m=this instanceof Ci?"/"+y:y}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(y){this.V=y}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ci?p:dD(p,this.objId,this.scope)},set:function(y){y=y.toString(),p=this instanceof Ci?y:y.substr(0,1)==="("?Uv(y.substr(1,y.length-2)):Uv(y)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ci?Uv(p.substr(1,p.length-1)):p},set:function(y){y=y.toString(),p=this instanceof Ci?"/"+y:y}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(y){y=!!y,g=y}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(y){v=y}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,1)},set:function(y){y?this.Ff=Fs(this.Ff,1):this.Ff=Ls(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,2)},set:function(y){y?this.Ff=Fs(this.Ff,2):this.Ff=Ls(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,3)},set:function(y){y?this.Ff=Fs(this.Ff,3):this.Ff=Ls(this.Ff,3)}});var b=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(b!==null)return b},set:function(y){if([0,1,2].indexOf(y)===-1)throw new Error('Invalid value "'+y+'" for attribute Q supplied.');b=y}}),Object.defineProperty(this,"textAlign",{get:function(){var y;switch(b){case 0:default:y="left";break;case 1:y="center";break;case 2:y="right"}return y},configurable:!0,enumerable:!0,set:function(y){switch(y){case"right":case 2:b=2;break;case"center":case 1:b=1;break;case"left":case 0:default:b=0}}})};bl(Vd,Ru);var b0=function(){Vd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return WK(t,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(n,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,18)},set:function(r){r?this.Ff=Fs(this.Ff,18):this.Ff=Ls(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Fs(this.Ff,19):this.Ff=Ls(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,20)},set:function(r){r?(this.Ff=Fs(this.Ff,20),t.sort()):this.Ff=Ls(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,22)},set:function(r){r?this.Ff=Fs(this.Ff,22):this.Ff=Ls(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,23)},set:function(r){r?this.Ff=Fs(this.Ff,23):this.Ff=Ls(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,27)},set:function(r){r?this.Ff=Fs(this.Ff,27):this.Ff=Ls(this.Ff,27)}}),this.hasAppearanceStream=!1};bl(b0,Vd);var y0=function(){b0.call(this),this.fontName="helvetica",this.combo=!1};bl(y0,b0);var j0=function(){y0.call(this),this.combo=!0};bl(j0,y0);var LN=function(){j0.call(this),this.edit=!0};bl(LN,j0);var Ci=function(){Vd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,15)},set:function(r){r?this.Ff=Fs(this.Ff,15):this.Ff=Ls(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,16)},set:function(r){r?this.Ff=Fs(this.Ff,16):this.Ff=Ls(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,17)},set:function(r){r?this.Ff=Fs(this.Ff,17):this.Ff=Ls(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,26)},set:function(r){r?this.Ff=Fs(this.Ff,26):this.Ff=Ls(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,s=[];for(n in s.push("<<"),t)s.push("/"+n+" ("+Xx(r(t[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Ua(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};bl(Ci,Vd);var BN=function(){Ci.call(this),this.pushButton=!0};bl(BN,Ci);var N0=function(){Ci.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};bl(N0,Ci);var E2=function(){var e,t;Vd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Xx(s(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Ua(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Tr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bl(E2,Vd),N0.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},N0.prototype.createOption=function(e){var t=new E2;return t.Parent=this,t.optionName=e,this.Kids.push(t),g8e.call(this.scope,t),t};var UN=function(){Ci.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Tr.CheckBox.createAppearanceStream()};bl(UN,Ci);var xx=function(){Vd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,13)},set:function(t){t?this.Ff=Fs(this.Ff,13):this.Ff=Ls(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,21)},set:function(t){t?this.Ff=Fs(this.Ff,21):this.Ff=Ls(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,23)},set:function(t){t?this.Ff=Fs(this.Ff,23):this.Ff=Ls(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,24)},set:function(t){t?this.Ff=Fs(this.Ff,24):this.Ff=Ls(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,25)},set:function(t){t?this.Ff=Fs(this.Ff,25):this.Ff=Ls(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,26)},set:function(t){t?this.Ff=Fs(this.Ff,26):this.Ff=Ls(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bl(xx,Vd);var $N=function(){xx.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Rs(this.Ff,14)},set:function(e){e?this.Ff=Fs(this.Ff,14):this.Ff=Ls(this.Ff,14)}}),this.password=!0};bl($N,xx);var Tr={CheckBox:{createAppearanceStream:function(){return{N:{On:Tr.CheckBox.YesNormal},D:{On:Tr.CheckBox.YesPushDown,Off:Tr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=y3(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+ma(Tr.internal.getWidth(e))+" "+ma(Tr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+ma(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),s=[],i=Tr.internal.getHeight(e),o=Tr.internal.getWidth(e),l=y3(e,e.caption);return s.push("1 g"),s.push("0 0 "+ma(o)+" "+ma(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+ma(o-1)+" "+ma(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+ma(l.fontSize)+" Tf "+n),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ma(Tr.internal.getWidth(e))+" "+ma(Tr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Tr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Tr.RadioButton.Circle.YesNormal,t.D[e]=Tr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Tr.internal.getWidth(e)<=Tr.internal.getHeight(e)?Tr.internal.getWidth(e)/4:Tr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Tr.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+jm(Tr.internal.getWidth(e)/2)+" "+jm(Tr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Tr.internal.getWidth(e)<=Tr.internal.getHeight(e)?Tr.internal.getWidth(e)/4:Tr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Tr.internal.Bezier_C).toFixed(5)),o=Number((n*Tr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+jm(Tr.internal.getWidth(e)/2)+" "+jm(Tr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+jm(Tr.internal.getWidth(e)/2)+" "+jm(Tr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Tr.internal.getWidth(e)<=Tr.internal.getHeight(e)?Tr.internal.getWidth(e)/4:Tr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Tr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+jm(Tr.internal.getWidth(e)/2)+" "+jm(Tr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Tr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Tr.RadioButton.Cross.YesNormal,t.D[e]=Tr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=ju(e);t.scope=e.scope;var r=[],n=Tr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+ma(Tr.internal.getWidth(e)-2)+" "+ma(Tr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ma(n.x1.x)+" "+ma(n.x1.y)+" m"),r.push(ma(n.x2.x)+" "+ma(n.x2.y)+" l"),r.push(ma(n.x4.x)+" "+ma(n.x4.y)+" m"),r.push(ma(n.x3.x)+" "+ma(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=Tr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+ma(Tr.internal.getWidth(e))+" "+ma(Tr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+ma(Tr.internal.getWidth(e)-2)+" "+ma(Tr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(ma(r.x1.x)+" "+ma(r.x1.y)+" m"),n.push(ma(r.x2.x)+" "+ma(r.x2.y)+" l"),n.push(ma(r.x4.x)+" "+ma(r.x4.y)+" m"),n.push(ma(r.x3.x)+" "+ma(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=ju(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+ma(Tr.internal.getWidth(e))+" "+ma(Tr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Tr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Tr.internal.getWidth(e),r=Tr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Tr.internal.getWidth=function(e){var t=0;return Ua(e)==="object"&&(t=I7(e.Rect[2])),t},Tr.internal.getHeight=function(e){var t=0;return Ua(e)==="object"&&(t=I7(e.Rect[3])),t};var g8e=ys.addField=function(e){if(v8e(this,e),!(e instanceof Vd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};ys.AcroFormChoiceField=b0,ys.AcroFormListBox=y0,ys.AcroFormComboBox=j0,ys.AcroFormEditBox=LN,ys.AcroFormButton=Ci,ys.AcroFormPushButton=BN,ys.AcroFormRadioButton=N0,ys.AcroFormCheckBox=UN,ys.AcroFormTextField=xx,ys.AcroFormPasswordField=$N,ys.AcroFormAppearance=Tr,ys.AcroForm={ChoiceField:b0,ListBox:y0,ComboBox:j0,EditBox:LN,Button:Ci,PushButton:BN,RadioButton:N0,CheckBox:UN,TextField:xx,PasswordField:$N,Appearance:Tr},ta.AcroForm={ChoiceField:b0,ListBox:y0,ComboBox:j0,EditBox:LN,Button:Ci,PushButton:BN,RadioButton:N0,CheckBox:UN,TextField:xx,PasswordField:$N,Appearance:Tr};ta.AcroForm;function KK(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(P,O){var Z,z,K,B,Q,U=t;if((O=O||t)==="RGBA"||P.data!==void 0&&P.data instanceof Uint8ClampedArray&&"height"in P&&"width"in P)return"RGBA";if(D(P))for(Q in r)for(K=r[Q],Z=0;Z<K.length;Z+=1){for(B=!0,z=0;z<K[Z].length;z+=1)if(K[Z][z]!==void 0&&K[Z][z]!==P[z]){B=!1;break}if(B===!0){U=Q;break}}else for(Q in r)for(K=r[Q],Z=0;Z<K.length;Z+=1){for(B=!0,z=0;z<K[Z].length;z+=1)if(K[Z][z]!==void 0&&K[Z][z]!==P.charCodeAt(z)){B=!1;break}if(B===!0){U=Q;break}}return U===t&&O!==t&&(U=O),U},s=function P(O){for(var Z=this.internal.write,z=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var B=[];if(B.push({key:"Type",value:"/XObject"}),B.push({key:"Subtype",value:"/Image"}),B.push({key:"Width",value:O.width}),B.push({key:"Height",value:O.height}),O.colorSpace===b.INDEXED?B.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(B.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===b.DEVICE_CMYK&&B.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),B.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&B.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)){for(var Q="",U=0,J=O.transparency.length;U<J;U++)Q+=O.transparency[U]+" "+O.transparency[U]+" ";B.push({key:"Mask",value:"["+Q+"]"})}O.sMask!==void 0&&B.push({key:"SMask",value:O.objectId+1+" 0 R"});var Y=O.filter!==void 0?["/"+O.filter]:void 0;if(z({data:O.data,additionalKeyValues:B,alreadyAppliedFilters:Y,objectId:O.objectId}),Z("endobj"),"sMask"in O&&O.sMask!==void 0){var oe="/Predictor "+O.predictor+" /Colors 1 /BitsPerComponent "+O.bitsPerComponent+" /Columns "+O.width,M={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:O.bitsPerComponent,decodeParameters:oe,data:O.sMask};"filter"in O&&(M.filter=O.filter),P.call(this,M)}if(O.colorSpace===b.INDEXED){var V=this.internal.newObject();z({data:T(new Uint8Array(O.palette)),objectId:V}),Z("endobj")}},i=function(){var P=this.internal.collections.addImage_images;for(var O in P)s.call(this,P[O])},o=function(){var P,O=this.internal.collections.addImage_images,Z=this.internal.write;for(var z in O)Z("/I"+(P=O[z]).index,P.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var P=this.internal.collections.addImage_images;return l.call(this),P},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(P){return typeof e["process"+P.toUpperCase()]=="function"},h=function(P){return Ua(P)==="object"&&P.nodeType===1},m=function(P,O){if(P.nodeName==="IMG"&&P.hasAttribute("src")){var Z=""+P.getAttribute("src");if(Z.indexOf("data:image/")===0)return Kb(unescape(Z).split("base64,").pop());var z=e.loadFile(Z,!0);if(z!==void 0)return z}if(P.nodeName==="CANVAS"){if(P.width===0||P.height===0)throw new Error("Given canvas must have data. Canvas width: "+P.width+", height: "+P.height);var K;switch(O){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;case"JPEG":case"JPG":default:K="image/jpeg"}return Kb(P.toDataURL(K,1).split("base64,").pop())}},p=function(P){var O=this.internal.collections.addImage_images;if(O){for(var Z in O)if(P===O[Z].alias)return O[Z]}},v=function(P,O,Z){return P||O||(P=-96,O=-96),P<0&&(P=-1*Z.width*72/P/this.internal.scaleFactor),O<0&&(O=-1*Z.height*72/O/this.internal.scaleFactor),P===0&&(P=O*Z.width/Z.height),O===0&&(O=P*Z.height/Z.width),[P,O]},g=function(P,O,Z,z,K,B){var Q=v.call(this,Z,z,K),U=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,Y=c.call(this);if(Z=Q[0],z=Q[1],Y[K.index]=K,B){B*=Math.PI/180;var oe=Math.cos(B),M=Math.sin(B),V=function(ee){return ee.toFixed(4)},H=[V(oe),V(M),V(-1*M),V(oe),0,0,"cm"]}this.internal.write("q"),B?(this.internal.write([1,"0","0",1,U(P),J(O+z),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([U(Z),"0","0",U(z),"0","0","cm"].join(" "))):this.internal.write([U(Z),"0","0",U(z),U(P),J(O+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},b=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var y=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},C=e.__addimage__.sHashCode=function(P){var O,Z,z=0;if(typeof P=="string")for(Z=P.length,O=0;O<Z;O++)z=(z<<5)-z+P.charCodeAt(O),z|=0;else if(D(P))for(Z=P.byteLength/2,O=0;O<Z;O++)z=(z<<5)-z+P[O],z|=0;return z},w=e.__addimage__.validateStringAsBase64=function(P){(P=P||"").toString().trim();var O=!0;return P.length===0&&(O=!1),P.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(P.substr(0,P.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(P.substr(-2))===!1&&(O=!1),O},k=e.__addimage__.extractImageFromDataUrl=function(P){if(P==null||!(P=P.trim()).startsWith("data:"))return null;var O=P.indexOf(",");return O<0?null:P.substring(0,O).trim().endsWith("base64")?P.substring(O+1):null},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(P){return S()&&P instanceof ArrayBuffer};var D=e.__addimage__.isArrayBufferView=function(P){return S()&&typeof Uint32Array<"u"&&(P instanceof Int8Array||P instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&P instanceof Uint8ClampedArray||P instanceof Int16Array||P instanceof Uint16Array||P instanceof Int32Array||P instanceof Uint32Array||P instanceof Float32Array||P instanceof Float64Array)},E=e.__addimage__.binaryStringToUint8Array=function(P){for(var O=P.length,Z=new Uint8Array(O),z=0;z<O;z++)Z[z]=P.charCodeAt(z);return Z},T=e.__addimage__.arrayBufferToBinaryString=function(P){for(var O="",Z=D(P)?P:new Uint8Array(P),z=0;z<Z.length;z+=8192)O+=String.fromCharCode.apply(null,Z.subarray(z,z+8192));return O};e.addImage=function(){var P,O,Z,z,K,B,Q,U,J;if(typeof arguments[1]=="number"?(O=t,Z=arguments[1],z=arguments[2],K=arguments[3],B=arguments[4],Q=arguments[5],U=arguments[6],J=arguments[7]):(O=arguments[1],Z=arguments[2],z=arguments[3],K=arguments[4],B=arguments[5],Q=arguments[6],U=arguments[7],J=arguments[8]),Ua(P=arguments[0])==="object"&&!h(P)&&"imageData"in P){var Y=P;P=Y.imageData,O=Y.format||O||t,Z=Y.x||Z||0,z=Y.y||z||0,K=Y.w||Y.width||K,B=Y.h||Y.height||B,Q=Y.alias||Q,U=Y.compression||U,J=Y.rotation||Y.angle||J}var oe=this.internal.getFilters();if(U===void 0&&oe.indexOf("FlateEncode")!==-1&&(U="SLOW"),isNaN(Z)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var M=A.call(this,P,O,Q,U);return g.call(this,Z,z,K,B,M,J),this};var A=function(P,O,Z,z){var K,B,Q;if(typeof P=="string"&&n(P)===t){P=unescape(P);var U=L(P,!1);(U!==""||(U=e.loadFile(P,!0))!==void 0)&&(P=U)}if(h(P)&&(P=m(P,O)),O=n(P,O),!u(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((Q=Z)==null||Q.length===0)&&(Z=function(J){return typeof J=="string"||D(J)?C(J):D(J.data)?C(J.data):null}(P)),(K=p.call(this,Z))||(S()&&(P instanceof Uint8Array||O==="RGBA"||(B=P,P=E(P))),K=this["process"+O.toUpperCase()](P,d.call(this),Z,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in e.image_compression?J:y.NONE}(z),B)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},L=e.__addimage__.convertBase64ToBinaryString=function(P,O){O=typeof O!="boolean"||O;var Z,z="";if(typeof P=="string"){var K;Z=(K=k(P))!==null&&K!==void 0?K:P;try{z=Kb(Z)}catch(B){if(O)throw w(Z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+B.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return z};e.getImageProperties=function(P){var O,Z,z="";if(h(P)&&(P=m(P)),typeof P=="string"&&n(P)===t&&((z=L(P,!1))===""&&(z=e.loadFile(P)||""),P=z),Z=n(P),!u(Z))throw new Error("addImage does not support files of type '"+Z+"', please ensure that a plugin for '"+Z+"' support is added.");if(!S()||P instanceof Uint8Array||(P=E(P)),!(O=this["process"+Z.toUpperCase()](P)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=Z,O}})(ta.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};ta.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,h=0;h<d.length&&!u;h++)switch((n=d[h]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){n=d[m];var p=this.internal.pdfEscape,v=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),b=this.internal.newAdditionalObject(),y=this.internal.getEncryptor(g.objId),C=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+p(y(n.contents))+")",i+=" /Popup "+b.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(y(C))+") >>",g.content=i;var w=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+w,n.open&&(i+=" /Open true"),i+=" >>",b.content=i,this.internal.write(g.objId,"0 R",b.objId,"0 R");break;case"freetext":s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var k=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(v(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var S=this.annotations._nameMap[n.options.name];n.options.pageNumber=S.page,n.options.top=S.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(v(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var D=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+D+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+s),h:d(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,s,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,n,s,i),s+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,s-d,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(ta.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&s.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},h=e.__arabicParser__.resolveLigatures=function(g){var b=0,y=r,C="",w=0;for(b=0;b<g.length;b+=1)y[g.charCodeAt(b)]!==void 0?(w++,typeof(y=y[g.charCodeAt(b)])=="number"&&(C+=String.fromCharCode(y),y=r,w=0),b===g.length-1&&(y=r,C+=g.charAt(b-(w-1)),b-=w-1,w=0)):(y=r,C+=g.charAt(b-w),b-=w,w=0);return C};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(g,b,y){return o(g)?i(g)===!1?-1:!d(g)||!o(b)&&!o(y)||!o(y)&&l(b)||l(g)&&!o(b)||l(g)&&c(b)||l(g)&&l(b)?0:u(g)&&o(b)&&!l(b)&&o(y)&&d(y)?3:l(g)||!o(y)?1:2:-1},p=function(g){var b=0,y=0,C=0,w="",k="",S="",D=(g=g||"").split("\\s+"),E=[];for(b=0;b<D.length;b+=1){for(E.push(""),y=0;y<D[b].length;y+=1)w=D[b][y],k=D[b][y-1],S=D[b][y+1],o(w)?(C=m(w,k,S),E[b]+=C!==-1?String.fromCharCode(t[w.charCodeAt(0)][C]):w):E[b]+=w;E[b]=h(E[b])}return E.join(" ")},v=e.__arabicParser__.processArabic=e.processArabic=function(){var g,b=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,y=[];if(Array.isArray(b)){var C=0;for(y=[],C=0;C<b.length;C+=1)Array.isArray(b[C])?y.push([p(b[C][0]),b[C][1],b[C][2]]):y.push([p(b[C])]);g=y}else g=p(b);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",v])}(ta.API),ta.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(ta.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(g){m=g}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(g){v=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),h=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,p=0,v=0,g=0,b=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var y=d.maxWidth;y>0?typeof c=="string"?c=this.splitTextToSize(c,y):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,k){return w.concat(b.splitTextToSize(k,y))},[])):c=Array.isArray(c)?c:[c];for(var C=0;C<c.length;C++)p<(g=this.getStringUnitWidth(c[C],{font:h})*u)&&(p=g);return p!==0&&(v=c.length),{w:p/=m,h:Math.max((v*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,h=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=h.top,p&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,h,m){if(n.call(this),!u)throw new Error("No data for PDF table.");var p,v,g,b,y=[],C=[],w=[],k={},S={},D=[],E=[],T=(m=m||{}).autoSize||!1,A=m.printHeaders!==!1,L=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,P=m.margins||Object.assign({width:this.getPageWidth()},t),O=typeof m.padding=="number"?m.padding:3,Z=m.headerBackgroundColor||"#c8c8c8",z=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=A,this.internal.__cell__.margins=P,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=Z,this.internal.__cell__.headerTextColor=z,this.setFontSize(L),h==null)C=y=Object.keys(u[0]),w=y.map(function(){return"left"});else if(Array.isArray(h)&&Ua(h[0])==="object")for(y=h.map(function(Y){return Y.name}),C=h.map(function(Y){return Y.prompt||Y.name||""}),w=h.map(function(Y){return Y.align||"left"}),p=0;p<h.length;p+=1)S[h[p].name]=h[p].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(C=y=h,w=y.map(function(){return"left"}));if(T||Array.isArray(h)&&typeof h[0]=="string")for(p=0;p<y.length;p+=1){for(k[b=y[p]]=u.map(function(Y){return Y[b]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(C[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=k[b],this.setFont(void 0,"normal"),g=0;g<v.length;g+=1)D.push(this.getTextDimensions(v[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[b]=Math.max.apply(null,D)+O+O,D=[]}if(A){var K={};for(p=0;p<y.length;p+=1)K[y[p]]={},K[y[p]].text=C[p],K[y[p]].align=w[p];var B=l.call(this,K,S);E=y.map(function(Y){return new i(c,d,S[Y],B,K[Y].text,void 0,K[Y].align)}),this.setTableHeaderRow(E),this.printHeaderRow(1,!1)}var Q=h.reduce(function(Y,oe){return Y[oe.name]=oe.align,Y},{});for(p=0;p<u.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:u[p]},this);var U=l.call(this,u[p],S);for(g=0;g<y.length;g+=1){var J=u[p][y[g]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:g,data:J},this),o.call(this,new i(c,d,S[y[g]],U,J,p+2,Q[y[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(p){var v=c[p];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,d[p]-u-u)},this).map(function(p){return this.getLineHeightFactor()*p.length*h/m+u+u},this).reduce(function(p,v){return Math.max(p,v)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){u=this.internal.__cell__.tableHeaderRow[p].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,m.push(u)),u.lineNumber=c;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(v)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}}(ta.API);var XK={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},QK=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],j3=KK(QK),JK=[100,200,300,400,500,600,700,800,900],b8e=KK(JK);function N3(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return XK[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),s=function(i){return typeof j3[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,n].join(" ")}}}function P7(e,t,r,n){var s;for(s=r;s>=0&&s<t.length;s+=n)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=n)if(e[t[s]])return e[t[s]]}var y8e={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},O7={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function M7(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function j8e(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},y8e,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=N3(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+M7(i)+"' and default family '"+n+"'.");if(o=function(c,d){if(d[c])return d[c];var u=j3[c],h=u<=j3.normal?-1:1,m=P7(d,QK,u,h);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var u=XK[c],h=0;h<u.length;++h)if(d[u[h]])return d[u[h]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=b8e[c],h=P7(d,JK,u,c<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+c);return h}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+M7(i)+"'.");return o}function R7(e){return e.trimLeft()}function N8e(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function w8e(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var gN,F7,L7,uD=["times"];(function(e){var t,r,n,s,i,o,l,c,d,u=function(M){return M=M||{},this.isStrokeTransparent=M.isStrokeTransparent||!1,this.strokeOpacity=M.strokeOpacity||1,this.strokeStyle=M.strokeStyle||"#000000",this.fillStyle=M.fillStyle||"#000000",this.isFillTransparent=M.isFillTransparent||!1,this.fillOpacity=M.fillOpacity||1,this.font=M.font||"10px sans-serif",this.textBaseline=M.textBaseline||"alphabetic",this.textAlign=M.textAlign||"left",this.lineWidth=M.lineWidth||1,this.lineJoin=M.lineJoin||"miter",this.lineCap=M.lineCap||"butt",this.path=M.path||[],this.transform=M.transform!==void 0?M.transform.clone():new c,this.globalCompositeOperation=M.globalCompositeOperation||"normal",this.globalAlpha=M.globalAlpha||1,this.clip_path=M.clip_path||[],this.currentPoint=M.currentPoint||new o,this.miterLimit=M.miterLimit||10,this.lastPoint=M.lastPoint||new o,this.lineDashOffset=M.lineDashOffset||0,this.lineDash=M.lineDash||[],this.margin=M.margin||[0,0,0,0],this.prevPageLastElemOffset=M.prevPageLastElemOffset||0,this.ignoreClearRect=typeof M.ignoreClearRect!="boolean"||M.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new h(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var h=function(M){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=M;Object.defineProperty(this,"pdf",{get:function(){return V}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(ue){H=!!ue}});var ee=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ee},set:function(ue){ee=!!ue}});var re=0;Object.defineProperty(this,"posX",{get:function(){return re},set:function(ue){isNaN(ue)||(re=ue)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(ue){isNaN(ue)||(ae=ue)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ue){var se;typeof ue=="number"?se=[ue,ue,ue,ue]:((se=new Array(4))[0]=ue[0],se[1]=ue.length>=2?ue[1]:se[0],se[2]=ue.length>=3?ue[2]:se[0],se[3]=ue.length>=4?ue[3]:se[1]),d.margin=se}});var ne=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ne},set:function(ue){ne=ue}});var ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return ie},set:function(ue){ie=ue}});var G=[];Object.defineProperty(this,"pageBreaks",{get:function(){return G},set:function(ue){G=ue}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ue){ue instanceof u&&(d=ue)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ue){d.path=ue}});var de=[];Object.defineProperty(this,"ctxStack",{get:function(){return de},set:function(ue){de=ue}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ue){var se;se=m(ue),this.ctx.fillStyle=se.style,this.ctx.isFillTransparent=se.a===0,this.ctx.fillOpacity=se.a,this.pdf.setFillColor(se.r,se.g,se.b,{a:se.a}),this.pdf.setTextColor(se.r,se.g,se.b,{a:se.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ue){var se=m(ue);this.ctx.strokeStyle=se.style,this.ctx.isStrokeTransparent=se.a===0,this.ctx.strokeOpacity=se.a,se.a===0?this.pdf.setDrawColor(255,255,255):(se.a,this.pdf.setDrawColor(se.r,se.g,se.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ue){["butt","round","square"].indexOf(ue)!==-1&&(this.ctx.lineCap=ue,this.pdf.setLineCap(ue))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ue){isNaN(ue)||(this.ctx.lineWidth=ue,this.pdf.setLineWidth(ue))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ue){["bevel","round","miter"].indexOf(ue)!==-1&&(this.ctx.lineJoin=ue,this.pdf.setLineJoin(ue))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ue){isNaN(ue)||(this.ctx.miterLimit=ue,this.pdf.setMiterLimit(ue))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ue){this.ctx.textBaseline=ue}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ue){["right","end","center","left","start"].indexOf(ue)!==-1&&(this.ctx.textAlign=ue)}});var X=null;function le(ue,se){if(X===null){var ye=function(Ne){var Ue=[];return Object.keys(Ne).forEach(function(Qe){Ne[Qe].forEach(function(ot){var xt=null;switch(ot){case"bold":xt={family:Qe,weight:"bold"};break;case"italic":xt={family:Qe,style:"italic"};break;case"bolditalic":xt={family:Qe,weight:"bold",style:"italic"};break;case"":case"normal":xt={family:Qe}}xt!==null&&(xt.ref={name:Qe,style:ot},Ue.push(xt))})}),Ue}(ue.getFontList());X=function(Ne){for(var Ue={},Qe=0;Qe<Ne.length;++Qe){var ot=N3(Ne[Qe]),xt=ot.family,Le=ot.stretch,dt=ot.style,Tt=ot.weight;Ue[xt]=Ue[xt]||{},Ue[xt][Le]=Ue[xt][Le]||{},Ue[xt][Le][dt]=Ue[xt][Le][dt]||{},Ue[xt][Le][dt][Tt]=ot}return Ue}(ye.concat(se))}return X}var Se=null;Object.defineProperty(this,"fontFaces",{get:function(){return Se},set:function(ue){X=null,Se=ue}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ue){var se;if(this.ctx.font=ue,(se=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ue))!==null){var ye=se[1];se[2];var Ne=se[3],Ue=se[4];se[5];var Qe=se[6],ot=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ue)[2];Ue=Math.floor(ot==="px"?parseFloat(Ue)*this.pdf.internal.scaleFactor:ot==="em"?parseFloat(Ue)*this.pdf.getFontSize():parseFloat(Ue)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ue);var xt=function(he){var ve,pe,De=[],Ye=he.trim();if(Ye==="")return uD;if(Ye in O7)return[O7[Ye]];for(;Ye!=="";){switch(pe=null,ve=(Ye=R7(Ye)).charAt(0)){case'"':case"'":pe=N8e(Ye.substring(1),ve);break;default:pe=w8e(Ye)}if(pe===null||(De.push(pe[0]),(Ye=R7(pe[1]))!==""&&Ye.charAt(0)!==","))return uD;Ye=Ye.replace(/^,/,"")}return De}(Qe);if(this.fontFaces){var Le=j8e(le(this.pdf,this.fontFaces),xt.map(function(he){return{family:he,stretch:"normal",weight:Ne,style:ye}}));this.pdf.setFont(Le.ref.name,Le.ref.style)}else{var dt="";(Ne==="bold"||parseInt(Ne,10)>=700||ye==="bold")&&(dt="bold"),ye==="italic"&&(dt+="italic"),dt.length===0&&(dt="normal");for(var Tt="",At={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Vt=0;Vt<xt.length;Vt++){if(this.pdf.internal.getFont(xt[Vt],dt,{noFallback:!0,disableWarning:!0})!==void 0){Tt=xt[Vt];break}if(dt==="bolditalic"&&this.pdf.internal.getFont(xt[Vt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Tt=xt[Vt],dt="bold";else if(this.pdf.internal.getFont(xt[Vt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Tt=xt[Vt],dt="normal";break}}if(Tt===""){for(var xe=0;xe<xt.length;xe++)if(At[xt[xe]]){Tt=At[xt[xe]];break}}Tt=Tt===""?"Times":Tt,this.pdf.setFont(Tt,dt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ue){this.ctx.globalCompositeOperation=ue}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ue){this.ctx.globalAlpha=ue}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ue){this.ctx.lineDashOffset=ue,oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ue){this.ctx.lineDash=ue,oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ue){this.ctx.ignoreClearRect=!!ue}})};h.prototype.setLineDash=function(M){this.lineDash=M},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){k.call(this,"fill",!1)},h.prototype.stroke=function(){k.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(M,V){if(isNaN(M)||isNaN(V))throw En.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new o(M,V)},h.prototype.closePath=function(){var M=new o(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&Ua(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){M=new o(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(M.x,M.y)},h.prototype.lineTo=function(M,V){if(isNaN(M)||isNaN(V))throw En.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new o(H.x,H.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},h.prototype.quadraticCurveTo=function(M,V,H,ee){if(isNaN(H)||isNaN(ee)||isNaN(M)||isNaN(V))throw En.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var re=this.ctx.transform.applyToPoint(new o(H,ee)),ae=this.ctx.transform.applyToPoint(new o(M,V));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:re.x,y:re.y}),this.ctx.lastPoint=new o(re.x,re.y)},h.prototype.bezierCurveTo=function(M,V,H,ee,re,ae){if(isNaN(re)||isNaN(ae)||isNaN(M)||isNaN(V)||isNaN(H)||isNaN(ee))throw En.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ne=this.ctx.transform.applyToPoint(new o(re,ae)),ie=this.ctx.transform.applyToPoint(new o(M,V)),G=this.ctx.transform.applyToPoint(new o(H,ee));this.path.push({type:"bct",x1:ie.x,y1:ie.y,x2:G.x,y2:G.y,x:ne.x,y:ne.y}),this.ctx.lastPoint=new o(ne.x,ne.y)},h.prototype.arc=function(M,V,H,ee,re,ae){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(ee)||isNaN(re))throw En.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var ne=this.ctx.transform.applyToPoint(new o(M,V));M=ne.x,V=ne.y;var ie=this.ctx.transform.applyToPoint(new o(0,H)),G=this.ctx.transform.applyToPoint(new o(0,0));H=Math.sqrt(Math.pow(ie.x-G.x,2)+Math.pow(ie.y-G.y,2))}Math.abs(re-ee)>=2*Math.PI&&(ee=0,re=2*Math.PI),this.path.push({type:"arc",x:M,y:V,radius:H,startAngle:ee,endAngle:re,counterclockwise:ae})},h.prototype.arcTo=function(M,V,H,ee,re){throw new Error("arcTo not implemented.")},h.prototype.rect=function(M,V,H,ee){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(ee))throw En.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(M,V),this.lineTo(M+H,V),this.lineTo(M+H,V+ee),this.lineTo(M,V+ee),this.lineTo(M,V),this.lineTo(M+H,V),this.lineTo(M,V)},h.prototype.fillRect=function(M,V,H,ee){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(ee))throw En.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var re={};this.lineCap!=="butt"&&(re.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(re.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(M,V,H,ee),this.fill(),re.hasOwnProperty("lineCap")&&(this.lineCap=re.lineCap),re.hasOwnProperty("lineJoin")&&(this.lineJoin=re.lineJoin)}},h.prototype.strokeRect=function(M,V,H,ee){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(ee))throw En.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(M,V,H,ee),this.stroke())},h.prototype.clearRect=function(M,V,H,ee){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(ee))throw En.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(M,V,H,ee))},h.prototype.save=function(M){M=typeof M!="boolean"||M;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),M){this.ctx.fontSize=this.pdf.internal.getFontSize();var ee=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ee}},h.prototype.restore=function(M){M=typeof M!="boolean"||M;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(V),M&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(M){var V,H,ee,re;if(M.isCanvasGradient===!0&&(M=M.getColor()),!M)return{r:0,g:0,b:0,a:0,style:M};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(M))V=0,H=0,ee=0,re=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(M);if(ae!==null)V=parseInt(ae[1]),H=parseInt(ae[2]),ee=parseInt(ae[3]),re=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(M))!==null)V=parseInt(ae[1]),H=parseInt(ae[2]),ee=parseInt(ae[3]),re=parseFloat(ae[4]);else{if(re=1,typeof M=="string"&&M.charAt(0)!=="#"){var ne=new qK(M);M=ne.ok?ne.toHex():"#000000"}M.length===4?(V=M.substring(1,2),V+=V,H=M.substring(2,3),H+=H,ee=M.substring(3,4),ee+=ee):(V=M.substring(1,3),H=M.substring(3,5),ee=M.substring(5,7)),V=parseInt(V,16),H=parseInt(H,16),ee=parseInt(ee,16)}}return{r:V,g:H,b:ee,a:re,style:M}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(M,V,H,ee){if(isNaN(V)||isNaN(H)||typeof M!="string")throw En.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ee=isNaN(ee)?void 0:ee,!p.call(this)){var re=U(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;O.call(this,{text:M,x:V,y:H,scale:ae,angle:re,align:this.textAlign,maxWidth:ee})}},h.prototype.strokeText=function(M,V,H,ee){if(isNaN(V)||isNaN(H)||typeof M!="string")throw En.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){ee=isNaN(ee)?void 0:ee;var re=U(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;O.call(this,{text:M,x:V,y:H,scale:ae,renderingMode:"stroke",angle:re,align:this.textAlign,maxWidth:ee})}},h.prototype.measureText=function(M){if(typeof M!="string")throw En.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,H=this.pdf.internal.scaleFactor,ee=V.internal.getFontSize(),re=V.getStringUnitWidth(M)*ee/V.internal.scaleFactor,ae=function(ne){var ie=(ne=ne||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this};return new ae({width:re*=Math.round(96*H/72*1e4)/1e4})},h.prototype.scale=function(M,V){if(isNaN(M)||isNaN(V))throw En.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new c(M,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},h.prototype.rotate=function(M){if(isNaN(M))throw En.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new c(Math.cos(M),Math.sin(M),-Math.sin(M),Math.cos(M),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},h.prototype.translate=function(M,V){if(isNaN(M)||isNaN(V))throw En.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new c(1,0,0,1,M,V);this.ctx.transform=this.ctx.transform.multiply(H)},h.prototype.transform=function(M,V,H,ee,re,ae){if(isNaN(M)||isNaN(V)||isNaN(H)||isNaN(ee)||isNaN(re)||isNaN(ae))throw En.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ne=new c(M,V,H,ee,re,ae);this.ctx.transform=this.ctx.transform.multiply(ne)},h.prototype.setTransform=function(M,V,H,ee,re,ae){M=isNaN(M)?1:M,V=isNaN(V)?0:V,H=isNaN(H)?0:H,ee=isNaN(ee)?1:ee,re=isNaN(re)?0:re,ae=isNaN(ae)?0:ae,this.ctx.transform=new c(M,V,H,ee,re,ae)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(M,V,H,ee,re,ae,ne,ie,G){var de=this.pdf.getImageProperties(M),X=1,le=1,Se=1,ue=1;ee!==void 0&&ie!==void 0&&(Se=ie/ee,ue=G/re,X=de.width/ee*ie/ee,le=de.height/re*G/re),ae===void 0&&(ae=V,ne=H,V=0,H=0),ee!==void 0&&ie===void 0&&(ie=ee,G=re),ee===void 0&&ie===void 0&&(ie=de.width,G=de.height);for(var se,ye=this.ctx.transform.decompose(),Ne=U(ye.rotate.shx),Ue=new c,Qe=(Ue=(Ue=(Ue=Ue.multiply(ye.translate)).multiply(ye.skew)).multiply(ye.scale)).applyToRectangle(new l(ae-V*Se,ne-H*ue,ee*X,re*le)),ot=b.call(this,Qe),xt=[],Le=0;Le<ot.length;Le+=1)xt.indexOf(ot[Le])===-1&&xt.push(ot[Le]);if(w(xt),this.autoPaging)for(var dt=xt[0],Tt=xt[xt.length-1],At=dt;At<Tt+1;At++){this.pdf.setPage(At);var Vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],xe=At===1?this.posY+this.margin[0]:this.margin[0],he=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ve=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pe=At===1?0:he+(At-2)*ve;if(this.ctx.clip_path.length!==0){var De=this.path;se=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(se,this.posX+this.margin[3],-pe+xe+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=De}var Ye=JSON.parse(JSON.stringify(Qe));Ye=C([Ye],this.posX+this.margin[3],-pe+xe+this.ctx.prevPageLastElemOffset)[0];var Nt=(At>dt||At<Tt)&&g.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Vt,ve,null).clip().discardPath()),this.pdf.addImage(M,"JPEG",Ye.x,Ye.y,Ye.w,Ye.h,null,null,Ne),Nt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(M,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,Ne)};var b=function(M,V,H){var ee=[];V=V||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var re=this.posY+this.ctx.prevPageLastElemOffset;switch(M.type){default:case"mt":case"lt":ee.push(Math.floor((M.y+re)/H)+1);break;case"arc":ee.push(Math.floor((M.y+re-M.radius)/H)+1),ee.push(Math.floor((M.y+re+M.radius)/H)+1);break;case"qct":var ae=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x,M.y);ee.push(Math.floor((ae.y+re)/H)+1),ee.push(Math.floor((ae.y+ae.h+re)/H)+1);break;case"bct":var ne=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,M.x1,M.y1,M.x2,M.y2,M.x,M.y);ee.push(Math.floor((ne.y+re)/H)+1),ee.push(Math.floor((ne.y+ne.h+re)/H)+1);break;case"rect":ee.push(Math.floor((M.y+re)/H)+1),ee.push(Math.floor((M.y+M.h+re)/H)+1)}for(var ie=0;ie<ee.length;ie+=1)for(;this.pdf.internal.getNumberOfPages()<ee[ie];)y.call(this);return ee},y=function(){var M=this.fillStyle,V=this.strokeStyle,H=this.font,ee=this.lineCap,re=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=M,this.strokeStyle=V,this.font=H,this.lineCap=ee,this.lineWidth=re,this.lineJoin=ae},C=function(M,V,H){for(var ee=0;ee<M.length;ee++)switch(M[ee].type){case"bct":M[ee].x2+=V,M[ee].y2+=H;case"qct":M[ee].x1+=V,M[ee].y1+=H;case"mt":case"lt":case"arc":default:M[ee].x+=V,M[ee].y+=H}return M},w=function(M){return M.sort(function(V,H){return V-H})},k=function(M,V){for(var H,ee,re=this.fillStyle,ae=this.strokeStyle,ne=this.lineCap,ie=this.lineWidth,G=Math.abs(ie*this.ctx.transform.scaleX),de=this.lineJoin,X=JSON.parse(JSON.stringify(this.path)),le=JSON.parse(JSON.stringify(this.path)),Se=[],ue=0;ue<le.length;ue++)if(le[ue].x!==void 0)for(var se=b.call(this,le[ue]),ye=0;ye<se.length;ye+=1)Se.indexOf(se[ye])===-1&&Se.push(se[ye]);for(var Ne=0;Ne<Se.length;Ne++)for(;this.pdf.internal.getNumberOfPages()<Se[Ne];)y.call(this);if(w(Se),this.autoPaging)for(var Ue=Se[0],Qe=Se[Se.length-1],ot=Ue;ot<Qe+1;ot++){this.pdf.setPage(ot),this.fillStyle=re,this.strokeStyle=ae,this.lineCap=ne,this.lineWidth=G,this.lineJoin=de;var xt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Le=ot===1?this.posY+this.margin[0]:this.margin[0],dt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],At=ot===1?0:dt+(ot-2)*Tt;if(this.ctx.clip_path.length!==0){var Vt=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(H,this.posX+this.margin[3],-At+Le+this.ctx.prevPageLastElemOffset),S.call(this,M,!0),this.path=Vt}if(ee=JSON.parse(JSON.stringify(X)),this.path=C(ee,this.posX+this.margin[3],-At+Le+this.ctx.prevPageLastElemOffset),V===!1||ot===0){var xe=(ot>Ue||ot<Qe)&&g.call(this);xe&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],xt,Tt,null).clip().discardPath()),S.call(this,M,V),xe&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}else this.lineWidth=G,S.call(this,M,V),this.lineWidth=ie;this.path=X},S=function(M,V){if((M!=="stroke"||V||!v.call(this))&&(M==="stroke"||V||!p.call(this))){for(var H,ee,re=[],ae=this.path,ne=0;ne<ae.length;ne++){var ie=ae[ne];switch(ie.type){case"begin":re.push({begin:!0});break;case"close":re.push({close:!0});break;case"mt":re.push({start:ie,deltas:[],abs:[]});break;case"lt":var G=re.length;if(ae[ne-1]&&!isNaN(ae[ne-1].x)&&(H=[ie.x-ae[ne-1].x,ie.y-ae[ne-1].y],G>0)){for(;G>=0;G--)if(re[G-1].close!==!0&&re[G-1].begin!==!0){re[G-1].deltas.push(H),re[G-1].abs.push(ie);break}}break;case"bct":H=[ie.x1-ae[ne-1].x,ie.y1-ae[ne-1].y,ie.x2-ae[ne-1].x,ie.y2-ae[ne-1].y,ie.x-ae[ne-1].x,ie.y-ae[ne-1].y],re[re.length-1].deltas.push(H);break;case"qct":var de=ae[ne-1].x+2/3*(ie.x1-ae[ne-1].x),X=ae[ne-1].y+2/3*(ie.y1-ae[ne-1].y),le=ie.x+2/3*(ie.x1-ie.x),Se=ie.y+2/3*(ie.y1-ie.y),ue=ie.x,se=ie.y;H=[de-ae[ne-1].x,X-ae[ne-1].y,le-ae[ne-1].x,Se-ae[ne-1].y,ue-ae[ne-1].x,se-ae[ne-1].y],re[re.length-1].deltas.push(H);break;case"arc":re.push({deltas:[],abs:[],arc:!0}),Array.isArray(re[re.length-1].abs)&&re[re.length-1].abs.push(ie)}}ee=V?null:M==="stroke"?"stroke":"fill";for(var ye=!1,Ne=0;Ne<re.length;Ne++)if(re[Ne].arc)for(var Ue=re[Ne].abs,Qe=0;Qe<Ue.length;Qe++){var ot=Ue[Qe];ot.type==="arc"?T.call(this,ot.x,ot.y,ot.radius,ot.startAngle,ot.endAngle,ot.counterclockwise,void 0,V,!ye):Z.call(this,ot.x,ot.y),ye=!0}else if(re[Ne].close===!0)this.pdf.internal.out("h"),ye=!1;else if(re[Ne].begin!==!0){var xt=re[Ne].start.x,Le=re[Ne].start.y;z.call(this,re[Ne].deltas,xt,Le),ye=!0}ee&&A.call(this,ee),V&&L.call(this)}},D=function(M){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return M-H;case"top":return M+V-H;case"hanging":return M+V-2*H;case"middle":return M+V/2-H;case"ideographic":return M;case"alphabetic":default:return M}},E=function(M){return M+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var M=function(){};return M.colorStops=[],M.addColorStop=function(V,H){this.colorStops.push([V,H])},M.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},M.isCanvasGradient=!0,M},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(M,V,H,ee,re,ae,ne,ie,G){for(var de=B.call(this,H,ee,re,ae),X=0;X<de.length;X++){var le=de[X];X===0&&(G?P.call(this,le.x1+M,le.y1+V):Z.call(this,le.x1+M,le.y1+V)),K.call(this,M,V,le.x2,le.y2,le.x3,le.y3,le.x4,le.y4)}ie?L.call(this):A.call(this,ne)},A=function(M){switch(M){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(M,V){this.pdf.internal.out(r(M)+" "+n(V)+" m")},O=function(M){var V;switch(M.align){case"right":case"end":V="right";break;case"center":V="center";break;case"left":case"start":default:V="left"}var H=this.pdf.getTextDimensions(M.text),ee=D.call(this,M.y),re=E.call(this,ee)-H.h,ae=this.ctx.transform.applyToPoint(new o(M.x,ee)),ne=this.ctx.transform.decompose(),ie=new c;ie=(ie=(ie=ie.multiply(ne.translate)).multiply(ne.skew)).multiply(ne.scale);for(var G,de,X,le=this.ctx.transform.applyToRectangle(new l(M.x,ee,H.w,H.h)),Se=ie.applyToRectangle(new l(M.x,re,H.w,H.h)),ue=b.call(this,Se),se=[],ye=0;ye<ue.length;ye+=1)se.indexOf(ue[ye])===-1&&se.push(ue[ye]);if(w(se),this.autoPaging)for(var Ne=se[0],Ue=se[se.length-1],Qe=Ne;Qe<Ue+1;Qe++){this.pdf.setPage(Qe);var ot=Qe===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Le=this.pdf.internal.pageSize.height-this.margin[2],dt=Le-this.margin[0],Tt=this.pdf.internal.pageSize.width-this.margin[1],At=Tt-this.margin[3],Vt=Qe===1?0:xt+(Qe-2)*dt;if(this.ctx.clip_path.length!==0){var xe=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(G,this.posX+this.margin[3],-1*Vt+ot),S.call(this,"fill",!0),this.path=xe}var he=C([JSON.parse(JSON.stringify(Se))],this.posX+this.margin[3],-Vt+ot+this.ctx.prevPageLastElemOffset)[0];M.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*M.scale),X=this.lineWidth,this.lineWidth=X*M.scale);var ve=this.autoPaging!=="text";if(ve||he.y+he.h<=Le){if(ve||he.y>=ot&&he.x<=Tt){var pe=ve?M.text:this.pdf.splitTextToSize(M.text,M.maxWidth||Tt-he.x)[0],De=C([JSON.parse(JSON.stringify(le))],this.posX+this.margin[3],-Vt+ot+this.ctx.prevPageLastElemOffset)[0],Ye=ve&&(Qe>Ne||Qe<Ue)&&g.call(this);Ye&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,dt,null).clip().discardPath()),this.pdf.text(pe,De.x,De.y,{angle:M.angle,align:V,renderingMode:M.renderingMode}),Ye&&this.pdf.restoreGraphicsState()}}else he.y<Le&&(this.ctx.prevPageLastElemOffset+=Le-he.y);M.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=X)}else M.scale>=.01&&(de=this.pdf.internal.getFontSize(),this.pdf.setFontSize(de*M.scale),X=this.lineWidth,this.lineWidth=X*M.scale),this.pdf.text(M.text,ae.x+this.posX,ae.y+this.posY,{angle:M.angle,align:V,renderingMode:M.renderingMode,maxWidth:M.maxWidth}),M.scale>=.01&&(this.pdf.setFontSize(de),this.lineWidth=X)},Z=function(M,V,H,ee){H=H||0,ee=ee||0,this.pdf.internal.out(r(M+H)+" "+n(V+ee)+" l")},z=function(M,V,H){return this.pdf.lines(M,V,H,null,null)},K=function(M,V,H,ee,re,ae,ne,ie){this.pdf.internal.out([t(s(H+M)),t(i(ee+V)),t(s(re+M)),t(i(ae+V)),t(s(ne+M)),t(i(ie+V)),"c"].join(" "))},B=function(M,V,H,ee){for(var re=2*Math.PI,ae=Math.PI/2;V>H;)V-=re;var ne=Math.abs(H-V);ne<re&&ee&&(ne=re-ne);for(var ie=[],G=ee?-1:1,de=V;ne>1e-5;){var X=de+G*Math.min(ne,ae);ie.push(Q.call(this,M,de,X)),ne-=Math.abs(X-de),de=X}return ie},Q=function(M,V,H){var ee=(H-V)/2,re=M*Math.cos(ee),ae=M*Math.sin(ee),ne=re,ie=-ae,G=ne*ne+ie*ie,de=G+ne*re+ie*ae,X=4/3*(Math.sqrt(2*G*de)-de)/(ne*ae-ie*re),le=ne-X*ie,Se=ie+X*ne,ue=le,se=-Se,ye=ee+V,Ne=Math.cos(ye),Ue=Math.sin(ye);return{x1:M*Math.cos(V),y1:M*Math.sin(V),x2:le*Ne-Se*Ue,y2:le*Ue+Se*Ne,x3:ue*Ne-se*Ue,y3:ue*Ue+se*Ne,x4:M*Math.cos(H),y4:M*Math.sin(H)}},U=function(M){return 180*M/Math.PI},J=function(M,V,H,ee,re,ae){var ne=M+.5*(H-M),ie=V+.5*(ee-V),G=re+.5*(H-re),de=ae+.5*(ee-ae),X=Math.min(M,re,ne,G),le=Math.max(M,re,ne,G),Se=Math.min(V,ae,ie,de),ue=Math.max(V,ae,ie,de);return new l(X,Se,le-X,ue-Se)},Y=function(M,V,H,ee,re,ae,ne,ie){var G,de,X,le,Se,ue,se,ye,Ne,Ue,Qe,ot,xt,Le,dt=H-M,Tt=ee-V,At=re-H,Vt=ae-ee,xe=ne-re,he=ie-ae;for(de=0;de<41;de++)Ne=(se=(X=M+(G=de/40)*dt)+G*((Se=H+G*At)-X))+G*(Se+G*(re+G*xe-Se)-se),Ue=(ye=(le=V+G*Tt)+G*((ue=ee+G*Vt)-le))+G*(ue+G*(ae+G*he-ue)-ye),de==0?(Qe=Ne,ot=Ue,xt=Ne,Le=Ue):(Qe=Math.min(Qe,Ne),ot=Math.min(ot,Ue),xt=Math.max(xt,Ne),Le=Math.max(Le,Ue));return new l(Math.round(Qe),Math.round(ot),Math.round(xt-Qe),Math.round(Le-ot))},oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var M,V,H=(M=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:M,lineDashOffset:V}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(ta.API),function(e){var t=function(i){var o,l,c,d,u,h,m,p,v,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(h=(u=((u=((u=((u=(u-(g=u%85))/85)-(v=u%85))/85)-(p=u%85))/85)-(m=u%85))/85)%85,l.push(h+33,m+33,p+33,v+33,g+33)):l.push(122);return function(b,y){for(var C=y;C>0;C--)b.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,h=String,m="length",p=255,v="charCodeAt",g="slice",b="replace";for(i[g](-2),i=i[g](0,-2)[b](/\s/g,"")[b]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[g](i[m]%5||5))[m];u>d;d+=5)l=52200625*(i[v](d)-33)+614125*(i[v](d+1)-33)+7225*(i[v](d+2)-33)+85*(i[v](d+3)-33)+(i[v](d+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return function(y,C){for(var w=C;w>0;w--)y.pop()}(c,o[m]),h.fromCharCode.apply(h,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=x3(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(ta.API),function(e){e.loadFile=function(t,r,n){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,u){var h=new XMLHttpRequest,m=0,p=function(v){var g=v.length,b=[],y=String.fromCharCode;for(m=0;m<g;m+=1)b.push(y(255&v.charCodeAt(m)));return b.join("")};if(h.open("GET",c,!d),h.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(h.onload=function(){h.status===200?u(p(this.responseText)):u(void 0)}),h.send(null),d&&h.status===200)return p(h.responseText)}(s,i,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(ta.API),function(e){function t(){return(na.html2canvas?Promise.resolve(na.html2canvas):u3(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(na.DOMPurify?Promise.resolve(na.DOMPurify):u3(()=>import("./purify.es-CQJ0hv7W.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=Ua(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,u){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),m=d.firstChild;m;m=m.nextSibling)u!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||h.appendChild(c(m,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var p=d[m],v=p.src.find(function(g){return g.format==="truetype"});v&&c.addFont(v.url,p.ref.name,p.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,c.context2d.save(!0),l(this.prop.container,h)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||ta.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(h){return c.updateProgress(null,d),h}).then(d,u).then(function(h){return c.updateProgress(1),h})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,ta.getPageSize=function(o,l,c){if(Ua(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,h=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var p,v=0,g=0;if(m.hasOwnProperty(h))v=m[h][1]/u,g=m[h][0]/u;else try{v=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>v&&(p=g,g=v,v=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>g&&(p=g,g=v,v=p)}return{width:g,height:v,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(N3):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(ta.API),ta.API.addJS=function(e){return L7=e,this.internal.events.subscribe("postPutResources",function(){gN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(gN+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),F7=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+L7+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){gN!==void 0&&F7!==void 0&&this.internal.out("/Names <</JavaScript "+gN+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var h=r.internal.newObject();u.push(h);var m=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var o={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(ta.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,s,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(h){for(var m,p=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,g={width:0,height:0,numcomponents:1},b=4;b<v;b+=2){if(b+=p,t.indexOf(h.charCodeAt(b+1))!==-1){m=256*h.charCodeAt(b+5)+h.charCodeAt(b+6),g={width:256*h.charCodeAt(b+7)+h.charCodeAt(b+8),height:m,numcomponents:h.charCodeAt(b+9)};break}p=256*h.charCodeAt(b+2)+h.charCodeAt(b+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:s}}return u}}(ta.API);var $v,bN,B7,U7,$7,S8e=function(){var e,t,r;function n(i){var o,l,c,d,u,h,m,p,v,g,b,y,C,w;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),v=(function(){var k,S;for(S=[],k=0;k<4;++k)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,h.delay=1e3*u/d,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),i=h?.data||this.imgData,y=0;0<=o?y<o:y>o;0<=o?++y:--y)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(C=0;0<=g?C<g:C>g;0<=g?++C:--C)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(b=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,b.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,b.slice(m+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(h,m,p,v){var g,b,y,C,w,k,S,D,E,T,A,L,P,O,Z,z,K,B,Q,U,J,Y=Math.ceil((d.width-h)/p),oe=Math.ceil((d.height-m)/v),M=d.width==Y&&d.height==oe;for(O=o*Y,L=M?l:new Uint8Array(O*oe),k=i.length,P=0,b=0;P<oe&&c<k;){switch(i[c++]){case 0:for(C=K=0;K<O;C=K+=1)L[b++]=i[c++];break;case 1:for(C=B=0;B<O;C=B+=1)g=i[c++],w=C<o?0:L[b-o],L[b++]=(g+w)%256;break;case 2:for(C=Q=0;Q<O;C=Q+=1)g=i[c++],y=(C-C%o)/o,Z=P&&L[(P-1)*O+y*o+C%o],L[b++]=(Z+g)%256;break;case 3:for(C=U=0;U<O;C=U+=1)g=i[c++],y=(C-C%o)/o,w=C<o?0:L[b-o],Z=P&&L[(P-1)*O+y*o+C%o],L[b++]=(g+Math.floor((w+Z)/2))%256;break;case 4:for(C=J=0;J<O;C=J+=1)g=i[c++],y=(C-C%o)/o,w=C<o?0:L[b-o],P===0?Z=z=0:(Z=L[(P-1)*O+y*o+C%o],z=y&&L[(P-1)*O+(y-1)*o+C%o]),S=w+Z-z,D=Math.abs(S-w),T=Math.abs(S-Z),A=Math.abs(S-z),E=D<=T&&D<=A?w:T<=A?Z:z,L[b++]=(g+E)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!M){var V=((m+P*v)*d.width+h)*o,H=P*O;for(C=0;C<Y;C+=1){for(var ee=0;ee<o;ee+=1)l[V++]=L[H++];V+=(p-1)*o}}P++}}return i=r8e(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,d,u,h,m,p;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=h=0,m=l.length;h<m;o=h+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(p=u[i++])!=null?p:255;return d},n.prototype.copyToImageData=function(i,o){var l,c,d,u,h,m,p,v,g,b,y;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(y=this._decodedPalette)!=null?y:this._decodedPalette=this.decodePalette(),c=4,l=!0),v=(d=i.data||i).length,h=g||o,u=m=0,c===1)for(;u<v;)p=g?4*o[u/4]:m,b=h[p++],d[u++]=b,d[u++]=b,d[u++]=b,d[u++]=l?h[p++]:255,m=p;else for(;u<v;)p=g?4*o[u/4]:m,d[u++]=h[p++],d[u++]=h[p++],d[u++]=h[p++],d[u++]=l?h[p++]:255,m=p},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(na)==="[object Window]"){try{t=na.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,d,u,h,m,p;if(this.animation){for(p=[],l=u=0,h=(m=this.animation.frames).length;u<h;l=++u)o=m[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,p.push(o.image=e(c));return p}},n.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),d?.disposeOp===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,d,u,h,m=this;return l=0,h=this.animation,d=h.numFrames,c=h.frames,u=h.numPlays,(o=function(){var p,v;if(p=l++%d,v=c[p],m.renderFrame(i,p),d>1&&l/d<u)return m.animation._timeout=setTimeout(o,v.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function C8e(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],h=0,m=null,p=0,v=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,v=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];h=e[t++]|e[t++]<<8,m=e[t++],(1&g)==0&&(m=null),p=g>>2&7,t++;break;case 254:for(;;){if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var b=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,k=e[t++],S=k>>6&1,D=1<<(7&k)+1,E=l,T=c,A=!1;k>>7&&(A=!0,E=t,T=D,t+=3*D);var L=t;for(t++;;){var P;if(!((P=e[t++])>=0))throw Error("Invalid block size");if(P===0)break;t+=P}u.push({x:b,y,width:C,height:w,has_local_palette:A,palette_offset:E,palette_size:T,data_offset:L,data_length:t-L,transparent_index:m,interlaced:!!S,delay:h,disposal:p});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return v},this.frameInfo=function(O){if(O<0||O>=u.length)throw new Error("Frame index out of range.");return u[O]},this.decodeAndBlitFrameBGRA=function(O,Z){var z=this.frameInfo(O),K=z.width*z.height,B=new Uint8Array(K);V7(e,z.data_offset,B,K);var Q=z.palette_offset,U=z.transparent_index;U===null&&(U=256);var J=z.width,Y=r-J,oe=J,M=4*(z.y*r+z.x),V=4*((z.y+z.height)*r+z.x),H=M,ee=4*Y;z.interlaced===!0&&(ee+=4*r*7);for(var re=8,ae=0,ne=B.length;ae<ne;++ae){var ie=B[ae];if(oe===0&&(oe=J,(H+=ee)>=V&&(ee=4*Y+4*r*(re-1),H=M+(J+Y)*(re<<1),re>>=1)),ie===U)H+=4;else{var G=e[Q+3*ie],de=e[Q+3*ie+1],X=e[Q+3*ie+2];Z[H++]=X,Z[H++]=de,Z[H++]=G,Z[H++]=255}--oe}},this.decodeAndBlitFrameRGBA=function(O,Z){var z=this.frameInfo(O),K=z.width*z.height,B=new Uint8Array(K);V7(e,z.data_offset,B,K);var Q=z.palette_offset,U=z.transparent_index;U===null&&(U=256);var J=z.width,Y=r-J,oe=J,M=4*(z.y*r+z.x),V=4*((z.y+z.height)*r+z.x),H=M,ee=4*Y;z.interlaced===!0&&(ee+=4*r*7);for(var re=8,ae=0,ne=B.length;ae<ne;++ae){var ie=B[ae];if(oe===0&&(oe=J,(H+=ee)>=V&&(ee=4*Y+4*r*(re-1),H=M+(J+Y)*(re<<1),re>>=1)),ie===U)H+=4;else{var G=e[Q+3*ie],de=e[Q+3*ie+1],X=e[Q+3*ie+2];Z[H++]=G,Z[H++]=de,Z[H++]=X,Z[H++]=255}--oe}}}function V7(e,t,r,n){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,u=0,h=0,m=0,p=e[t++],v=new Int32Array(4096),g=null;;){for(;u<16&&p!==0;)h|=e[t++]<<u,u+=8,p===1?p=e[t++]:--p;if(u<c)break;var b=h&d;if(h>>=c,u-=c,b!==i){if(b===o)break;for(var y=b<l?b:g,C=0,w=y;w>i;)w=v[w]>>8,++C;var k=w;if(m+C+(y!==b?1:0)>n)return void En.log("Warning, gif stream longer than expected.");r[m++]=k;var S=m+=C;for(y!==b&&(r[m++]=k),w=y;C--;)w=v[w],r[--S]=255&w,w>>=8;g!==null&&l<4096&&(v[l++]=g<<8|k,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=b}else l=o+1,d=(1<<(c=s+1))-1,g=null}return m!==n&&En.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function hD(e){var t,r,n,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),h=new Array(65535),m=new Array(65535),p=new Array(64),v=new Array(64),g=[],b=0,y=7,C=new Array(64),w=new Array(64),k=new Array(64),S=new Array(256),D=new Array(2048),E=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],P=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Z=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function B(M,V){for(var H=0,ee=0,re=new Array,ae=1;ae<=16;ae++){for(var ne=1;ne<=M[ae];ne++)re[V[ee]]=[],re[V[ee]][0]=H,re[V[ee]][1]=ae,ee++,H++;H*=2}return re}function Q(M){for(var V=M[0],H=M[1]-1;H>=0;)V&1<<H&&(b|=1<<y),H--,--y<0&&(b==255?(U(255),U(0)):U(b),y=7,b=0)}function U(M){g.push(M)}function J(M){U(M>>8&255),U(255&M)}function Y(M,V,H,ee,re){for(var ae,ne=re[0],ie=re[240],G=function(Ue,Qe){var ot,xt,Le,dt,Tt,At,Vt,xe,he,ve,pe=0;for(he=0;he<8;++he){ot=Ue[pe],xt=Ue[pe+1],Le=Ue[pe+2],dt=Ue[pe+3],Tt=Ue[pe+4],At=Ue[pe+5],Vt=Ue[pe+6];var De=ot+(xe=Ue[pe+7]),Ye=ot-xe,Nt=xt+Vt,Je=xt-Vt,Xe=Le+At,Be=Le-At,qe=dt+Tt,ft=dt-Tt,Ie=De+qe,Ke=De-qe,Ge=Nt+Xe,lt=Nt-Xe;Ue[pe]=Ie+Ge,Ue[pe+4]=Ie-Ge;var Mt=.707106781*(lt+Ke);Ue[pe+2]=Ke+Mt,Ue[pe+6]=Ke-Mt;var Ae=.382683433*((Ie=ft+Be)-(lt=Je+Ye)),ke=.5411961*Ie+Ae,it=1.306562965*lt+Ae,bt=.707106781*(Ge=Be+Je),Xt=Ye+bt,Ft=Ye-bt;Ue[pe+5]=Ft+ke,Ue[pe+3]=Ft-ke,Ue[pe+1]=Xt+it,Ue[pe+7]=Xt-it,pe+=8}for(pe=0,he=0;he<8;++he){ot=Ue[pe],xt=Ue[pe+8],Le=Ue[pe+16],dt=Ue[pe+24],Tt=Ue[pe+32],At=Ue[pe+40],Vt=Ue[pe+48];var rr=ot+(xe=Ue[pe+56]),pr=ot-xe,jr=xt+Vt,vt=xt-Vt,Lt=Le+At,fe=Le-At,Me=dt+Tt,Te=dt-Tt,_e=rr+Me,Fe=rr-Me,Ve=jr+Lt,mt=jr-Lt;Ue[pe]=_e+Ve,Ue[pe+32]=_e-Ve;var wt=.707106781*(mt+Fe);Ue[pe+16]=Fe+wt,Ue[pe+48]=Fe-wt;var nt=.382683433*((_e=Te+fe)-(mt=vt+pr)),St=.5411961*_e+nt,Ct=1.306562965*mt+nt,Jt=.707106781*(Ve=fe+vt),ir=pr+Jt,xr=pr-Jt;Ue[pe+40]=xr+St,Ue[pe+24]=xr-St,Ue[pe+8]=ir+Ct,Ue[pe+56]=ir-Ct,pe++}for(he=0;he<64;++he)ve=Ue[he]*Qe[he],p[he]=ve>0?ve+.5|0:ve-.5|0;return p}(M,V),de=0;de<64;++de)v[E[de]]=G[de];var X=v[0]-H;H=v[0],X==0?Q(ee[0]):(Q(ee[m[ae=32767+X]]),Q(h[ae]));for(var le=63;le>0&&v[le]==0;)le--;if(le==0)return Q(ne),H;for(var Se,ue=1;ue<=le;){for(var se=ue;v[ue]==0&&ue<=le;)++ue;var ye=ue-se;if(ye>=16){Se=ye>>4;for(var Ne=1;Ne<=Se;++Ne)Q(ie);ye&=15}ae=32767+v[ue],Q(re[(ye<<4)+m[ae]]),Q(h[ae]),ue++}return le!=63&&Q(ne),H}function oe(M){M=Math.min(Math.max(M,1),100),i!=M&&(function(V){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ee=0;ee<64;ee++){var re=o((H[ee]*V+50)/100);re=Math.min(Math.max(re,1),255),l[E[ee]]=re}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ne=0;ne<64;ne++){var ie=o((ae[ne]*V+50)/100);ie=Math.min(Math.max(ie,1),255),c[E[ne]]=ie}for(var G=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],de=0,X=0;X<8;X++)for(var le=0;le<8;le++)d[de]=1/(l[E[de]]*G[X]*G[le]*8),u[de]=1/(c[E[de]]*G[X]*G[le]*8),de++}(M<50?Math.floor(5e3/M):Math.floor(200-2*M)),i=M)}this.encode=function(M,V){V&&oe(V),g=new Array,b=0,y=7,J(65496),J(65504),J(16),U(74),U(70),U(73),U(70),U(0),U(1),U(1),U(0),J(1),J(1),U(0),U(0),function(){J(65499),J(132),U(0);for(var xt=0;xt<64;xt++)U(l[xt]);U(1);for(var Le=0;Le<64;Le++)U(c[Le])}(),function(xt,Le){J(65472),J(17),U(8),J(Le),J(xt),U(3),U(1),U(17),U(0),U(2),U(17),U(1),U(3),U(17),U(1)}(M.width,M.height),function(){J(65476),J(418),U(0);for(var xt=0;xt<16;xt++)U(T[xt+1]);for(var Le=0;Le<=11;Le++)U(A[Le]);U(16);for(var dt=0;dt<16;dt++)U(L[dt+1]);for(var Tt=0;Tt<=161;Tt++)U(P[Tt]);U(1);for(var At=0;At<16;At++)U(O[At+1]);for(var Vt=0;Vt<=11;Vt++)U(Z[Vt]);U(17);for(var xe=0;xe<16;xe++)U(z[xe+1]);for(var he=0;he<=161;he++)U(K[he])}(),J(65498),J(12),U(3),U(1),U(0),U(2),U(17),U(3),U(17),U(0),U(63),U(0);var H=0,ee=0,re=0;b=0,y=7,this.encode.displayName="_encode_";for(var ae,ne,ie,G,de,X,le,Se,ue,se=M.data,ye=M.width,Ne=M.height,Ue=4*ye,Qe=0;Qe<Ne;){for(ae=0;ae<Ue;){for(de=Ue*Qe+ae,le=-1,Se=0,ue=0;ue<64;ue++)X=de+(Se=ue>>3)*Ue+(le=4*(7&ue)),Qe+Se>=Ne&&(X-=Ue*(Qe+1+Se-Ne)),ae+le>=Ue&&(X-=ae+le-Ue+4),ne=se[X++],ie=se[X++],G=se[X++],C[ue]=(D[ne]+D[ie+256>>0]+D[G+512>>0]>>16)-128,w[ue]=(D[ne+768>>0]+D[ie+1024>>0]+D[G+1280>>0]>>16)-128,k[ue]=(D[ne+1280>>0]+D[ie+1536>>0]+D[G+1792>>0]>>16)-128;H=Y(C,d,H,t,n),ee=Y(w,u,ee,r,s),re=Y(k,u,re,r,s),ae+=32}Qe+=8}if(y>=0){var ot=[];ot[1]=y+1,ot[0]=(1<<y+1)-1,Q(ot)}return J(65497),new Uint8Array(g)},e=e||50,function(){for(var M=String.fromCharCode,V=0;V<256;V++)S[V]=M(V)}(),t=B(T,A),r=B(O,Z),n=B(L,P),s=B(z,K),function(){for(var M=1,V=2,H=1;H<=15;H++){for(var ee=M;ee<V;ee++)m[32767+ee]=H,h[32767+ee]=[],h[32767+ee][1]=H,h[32767+ee][0]=ee;for(var re=-(V-1);re<=-M;re++)m[32767+re]=H,h[32767+re]=[],h[32767+re][1]=H,h[32767+re][0]=V-1+re;M<<=1,V<<=1}}(),function(){for(var M=0;M<256;M++)D[M]=19595*M,D[M+256>>0]=38470*M,D[M+512>>0]=7471*M+32768,D[M+768>>0]=-11059*M,D[M+1024>>0]=-21709*M,D[M+1280>>0]=32768*M+8421375,D[M+1536>>0]=-27439*M,D[M+1792>>0]=-5329*M}(),oe(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function wd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function q7(e){function t(T){if(!T)throw Error("assert :P")}function r(T,A,L){for(var P=0;4>P;P++)if(T[A+P]!=L.charCodeAt(P))return!0;return!1}function n(T,A,L,P,O){for(var Z=0;Z<O;Z++)T[A+Z]=L[P+Z]}function s(T,A,L,P){for(var O=0;O<P;O++)T[A+O]=L}function i(T){return new Int32Array(T)}function o(T,A){for(var L=[],P=0;P<T;P++)L.push(new A);return L}function l(T,A){var L=[];return function P(O,Z,z){for(var K=z[Z],B=0;B<K&&(O.push(z.length>Z+1?[]:new A),!(z.length<Z+1));B++)P(O[B],Z+1,z)}(L,0,T),L}var c=function(){var T=this;function A(I,F){for(var te=1<<F-1>>>0;I&te;)te>>>=1;return te?(I&te-1)+te:I}function L(I,F,te,ce,ge){t(!(ce%te));do I[F+(ce-=te)]=ge;while(0<ce)}function P(I,F,te,ce,ge){if(t(2328>=ge),512>=ge)var je=i(512);else if((je=i(ge))==null)return 0;return function(we,Ce,Pe,$e,at,Et){var kt,pt,Zt=Ce,Rt=1<<Pe,st=i(16),ut=i(16);for(t(at!=0),t($e!=null),t(we!=null),t(0<Pe),pt=0;pt<at;++pt){if(15<$e[pt])return 0;++st[$e[pt]]}if(st[0]==at)return 0;for(ut[1]=0,kt=1;15>kt;++kt){if(st[kt]>1<<kt)return 0;ut[kt+1]=ut[kt]+st[kt]}for(pt=0;pt<at;++pt)kt=$e[pt],0<$e[pt]&&(Et[ut[kt]++]=pt);if(ut[15]==1)return($e=new O).g=0,$e.value=Et[0],L(we,Zt,1,Rt,$e),Rt;var Ht,er=-1,Yt=Rt-1,Sr=0,br=1,qr=1,yr=1<<Pe;for(pt=0,kt=1,at=2;kt<=Pe;++kt,at<<=1){if(br+=qr<<=1,0>(qr-=st[kt]))return 0;for(;0<st[kt];--st[kt])($e=new O).g=kt,$e.value=Et[pt++],L(we,Zt+Sr,at,yr,$e),Sr=A(Sr,kt)}for(kt=Pe+1,at=2;15>=kt;++kt,at<<=1){if(br+=qr<<=1,0>(qr-=st[kt]))return 0;for(;0<st[kt];--st[kt]){if($e=new O,(Sr&Yt)!=er){for(Zt+=yr,Ht=1<<(er=kt)-Pe;15>er&&!(0>=(Ht-=st[er]));)++er,Ht<<=1;Rt+=yr=1<<(Ht=er-Pe),we[Ce+(er=Sr&Yt)].g=Ht+Pe,we[Ce+er].value=Zt-Ce-er}$e.g=kt-Pe,$e.value=Et[pt++],L(we,Zt+(Sr>>Pe),at,yr,$e),Sr=A(Sr,kt)}}return br!=2*ut[15]-1?0:Rt}(I,F,te,ce,ge,je)}function O(){this.value=this.g=0}function Z(){this.value=this.g=0}function z(){this.G=o(5,O),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ds,Z)}function K(I,F,te,ce){t(I!=null),t(F!=null),t(2147483648>ce),I.Ca=254,I.I=0,I.b=-8,I.Ka=0,I.oa=F,I.pa=te,I.Jd=F,I.Yc=te+ce,I.Zc=4<=ce?te+ce-4+1:te,ae(I)}function B(I,F){for(var te=0;0<F--;)te|=ie(I,128)<<F;return te}function Q(I,F){var te=B(I,F);return ne(I)?-te:te}function U(I,F,te,ce){var ge,je=0;for(t(I!=null),t(F!=null),t(4294967288>ce),I.Sb=ce,I.Ra=0,I.u=0,I.h=0,4<ce&&(ce=4),ge=0;ge<ce;++ge)je+=F[te+ge]<<8*ge;I.Ra=je,I.bb=ce,I.oa=F,I.pa=te}function J(I){for(;8<=I.u&&I.bb<I.Sb;)I.Ra>>>=8,I.Ra+=I.oa[I.pa+I.bb]<<hh-8>>>0,++I.bb,I.u-=8;H(I)&&(I.h=1,I.u=0)}function Y(I,F){if(t(0<=F),!I.h&&F<=uh){var te=V(I)&Yd[F];return I.u+=F,J(I),te}return I.h=1,I.u=0}function oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function M(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function V(I){return I.Ra>>>(I.u&hh-1)>>>0}function H(I){return t(I.bb<=I.Sb),I.h||I.bb==I.Sb&&I.u>hh}function ee(I,F){I.u=F,I.h=H(I)}function re(I){I.u>=Bf&&(t(I.u>=Bf),J(I))}function ae(I){t(I!=null&&I.oa!=null),I.pa<I.Zc?(I.I=(I.oa[I.pa++]|I.I<<8)>>>0,I.b+=8):(t(I!=null&&I.oa!=null),I.pa<I.Yc?(I.b+=8,I.I=I.oa[I.pa++]|I.I<<8):I.Ka?I.b=0:(I.I<<=8,I.b+=8,I.Ka=1))}function ne(I){return B(I,1)}function ie(I,F){var te=I.Ca;0>I.b&&ae(I);var ce=I.b,ge=te*F>>>8,je=(I.I>>>ce>ge)+0;for(je?(te-=ge,I.I-=ge+1<<ce>>>0):te=ge+1,ce=te,ge=0;256<=ce;)ge+=8,ce>>=8;return ce=7^ge+to[ce],I.b-=ce,I.Ca=(te<<ce)-1,je}function G(I,F,te){I[F+0]=te>>24&255,I[F+1]=te>>16&255,I[F+2]=te>>8&255,I[F+3]=te>>0&255}function de(I,F){return I[F+0]<<0|I[F+1]<<8}function X(I,F){return de(I,F)|I[F+2]<<16}function le(I,F){return de(I,F)|de(I,F+2)<<16}function Se(I,F){var te=1<<F;return t(I!=null),t(0<F),I.X=i(te),I.X==null?0:(I.Mb=32-F,I.Xa=F,1)}function ue(I,F){t(I!=null),t(F!=null),t(I.Xa==F.Xa),n(F.X,0,I.X,0,1<<F.Xa)}function se(){this.X=[],this.Xa=this.Mb=0}function ye(I,F,te,ce){t(te!=null),t(ce!=null);var ge=te[0],je=ce[0];return ge==0&&(ge=(I*je+F/2)/F),je==0&&(je=(F*ge+I/2)/I),0>=ge||0>=je?0:(te[0]=ge,ce[0]=je,1)}function Ne(I,F){return I+(1<<F)-1>>>F}function Ue(I,F){return((4278255360&I)+(4278255360&F)>>>0&4278255360)+((16711935&I)+(16711935&F)>>>0&16711935)>>>0}function Qe(I,F){T[F]=function(te,ce,ge,je,we,Ce,Pe){var $e;for($e=0;$e<we;++$e){var at=T[I](Ce[Pe+$e-1],ge,je+$e);Ce[Pe+$e]=Ue(te[ce+$e],at)}}}function ot(){this.ud=this.hd=this.jd=0}function xt(I,F){return((4278124286&(I^F))>>>1)+(I&F)>>>0}function Le(I){return 0<=I&&256>I?I:0>I?0:255<I?255:void 0}function dt(I,F){return Le(I+(I-F+.5>>1))}function Tt(I,F,te){return Math.abs(F-te)-Math.abs(I-te)}function At(I,F,te,ce,ge,je,we){for(ce=je[we-1],te=0;te<ge;++te)je[we+te]=ce=Ue(I[F+te],ce)}function Vt(I,F,te,ce,ge){var je;for(je=0;je<te;++je){var we=I[F+je],Ce=we>>8&255,Pe=16711935&(Pe=(Pe=16711935&we)+((Ce<<16)+Ce));ce[ge+je]=(4278255360&we)+Pe>>>0}}function xe(I,F){F.jd=I>>0&255,F.hd=I>>8&255,F.ud=I>>16&255}function he(I,F,te,ce,ge,je){var we;for(we=0;we<ce;++we){var Ce=F[te+we],Pe=Ce>>>8,$e=Ce,at=255&(at=(at=Ce>>>16)+((I.jd<<24>>24)*(Pe<<24>>24)>>>5));$e=255&($e=($e=$e+((I.hd<<24>>24)*(Pe<<24>>24)>>>5))+((I.ud<<24>>24)*(at<<24>>24)>>>5)),ge[je+we]=(4278255360&Ce)+(at<<16)+$e}}function ve(I,F,te,ce,ge){T[F]=function(je,we,Ce,Pe,$e,at,Et,kt,pt){for(Pe=Et;Pe<kt;++Pe)for(Et=0;Et<pt;++Et)$e[at++]=ge(Ce[ce(je[we++])])},T[I]=function(je,we,Ce,Pe,$e,at,Et){var kt=8>>je.b,pt=je.Ea,Zt=je.K[0],Rt=je.w;if(8>kt)for(je=(1<<je.b)-1,Rt=(1<<kt)-1;we<Ce;++we){var st,ut=0;for(st=0;st<pt;++st)st&je||(ut=ce(Pe[$e++])),at[Et++]=ge(Zt[ut&Rt]),ut>>=kt}else T["VP8LMapColor"+te](Pe,$e,Zt,Rt,at,Et,we,Ce,pt)}}function pe(I,F,te,ce,ge){for(te=F+te;F<te;){var je=I[F++];ce[ge++]=je>>16&255,ce[ge++]=je>>8&255,ce[ge++]=je>>0&255}}function De(I,F,te,ce,ge){for(te=F+te;F<te;){var je=I[F++];ce[ge++]=je>>16&255,ce[ge++]=je>>8&255,ce[ge++]=je>>0&255,ce[ge++]=je>>24&255}}function Ye(I,F,te,ce,ge){for(te=F+te;F<te;){var je=(we=I[F++])>>16&240|we>>12&15,we=we>>0&240|we>>28&15;ce[ge++]=je,ce[ge++]=we}}function Nt(I,F,te,ce,ge){for(te=F+te;F<te;){var je=(we=I[F++])>>16&248|we>>13&7,we=we>>5&224|we>>3&31;ce[ge++]=je,ce[ge++]=we}}function Je(I,F,te,ce,ge){for(te=F+te;F<te;){var je=I[F++];ce[ge++]=je>>0&255,ce[ge++]=je>>8&255,ce[ge++]=je>>16&255}}function Xe(I,F,te,ce,ge,je){if(je==0)for(te=F+te;F<te;)G(ce,((je=I[F++])[0]>>24|je[1]>>8&65280|je[2]<<8&16711680|je[3]<<24)>>>0),ge+=32;else n(ce,ge,I,F,te)}function Be(I,F){T[F][0]=T[I+"0"],T[F][1]=T[I+"1"],T[F][2]=T[I+"2"],T[F][3]=T[I+"3"],T[F][4]=T[I+"4"],T[F][5]=T[I+"5"],T[F][6]=T[I+"6"],T[F][7]=T[I+"7"],T[F][8]=T[I+"8"],T[F][9]=T[I+"9"],T[F][10]=T[I+"10"],T[F][11]=T[I+"11"],T[F][12]=T[I+"12"],T[F][13]=T[I+"13"],T[F][14]=T[I+"0"],T[F][15]=T[I+"0"]}function qe(I){return I==fp||I==nu||I==cd||I==qf}function ft(){this.eb=[],this.size=this.A=this.fb=0}function Ie(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ke(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new ft,this.f.kb=new Ie,this.sd=null}function Ge(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Mt(I){return alert("todo:WebPSamplerProcessPlane"),I.T}function Ae(I,F){var te=I.T,ce=F.ba.f.RGBA,ge=ce.eb,je=ce.fb+I.ka*ce.A,we=Ys[F.ba.S],Ce=I.y,Pe=I.O,$e=I.f,at=I.N,Et=I.ea,kt=I.W,pt=F.cc,Zt=F.dc,Rt=F.Mc,st=F.Nc,ut=I.ka,Ht=I.ka+I.T,er=I.U,Yt=er+1>>1;for(ut==0?we(Ce,Pe,null,null,$e,at,Et,kt,$e,at,Et,kt,ge,je,null,null,er):(we(F.ec,F.fc,Ce,Pe,pt,Zt,Rt,st,$e,at,Et,kt,ge,je-ce.A,ge,je,er),++te);ut+2<Ht;ut+=2)pt=$e,Zt=at,Rt=Et,st=kt,at+=I.Rc,kt+=I.Rc,je+=2*ce.A,we(Ce,(Pe+=2*I.fa)-I.fa,Ce,Pe,pt,Zt,Rt,st,$e,at,Et,kt,ge,je-ce.A,ge,je,er);return Pe+=I.fa,I.j+Ht<I.o?(n(F.ec,F.fc,Ce,Pe,er),n(F.cc,F.dc,$e,at,Yt),n(F.Mc,F.Nc,Et,kt,Yt),te--):1&Ht||we(Ce,Pe,null,null,$e,at,Et,kt,$e,at,Et,kt,ge,je+ce.A,null,null,er),te}function ke(I,F,te){var ce=I.F,ge=[I.J];if(ce!=null){var je=I.U,we=F.ba.S,Ce=we==vh||we==cd;F=F.ba.f.RGBA;var Pe=[0],$e=I.ka;Pe[0]=I.T,I.Kb&&($e==0?--Pe[0]:(--$e,ge[0]-=I.width),I.j+I.ka+I.T==I.o&&(Pe[0]=I.o-I.j-$e));var at=F.eb;$e=F.fb+$e*F.A,I=ka(ce,ge[0],I.width,je,Pe,at,$e+(Ce?0:3),F.A),t(te==Pe),I&&qe(we)&&Mo(at,$e,Ce,je,Pe,F.A)}return 0}function it(I){var F=I.ma,te=F.ba.S,ce=11>te,ge=te==Vf||te==hp||te==vh||te==ld||te==12||qe(te);if(F.memory=null,F.Ib=null,F.Jb=null,F.Nd=null,!Gd(F.Oa,I,ge?11:12))return 0;if(ge&&qe(te)&&lr(),I.da)alert("todo:use_scaling");else{if(ce){if(F.Ib=Mt,I.Kb){if(te=I.U+1>>1,F.memory=i(I.U+2*te),F.memory==null)return 0;F.ec=F.memory,F.fc=0,F.cc=F.ec,F.dc=F.fc+I.U,F.Mc=F.cc,F.Nc=F.dc+te,F.Ib=Ae,lr()}}else alert("todo:EmitYUV");ge&&(F.Jb=ke,ce&&jt())}if(ce&&!_1){for(I=0;256>I;++I)aC[I]=89858*(I-128)+Ts>>yc,xp[I]=-22014*(I-128)+Ts,bg[I]=-45773*(I-128),Is[I]=113618*(I-128)+Ts>>yc;for(I=ou;I<sv;++I)F=76283*(I-16)+Ts>>yc,vp[I-ou]=Oo(F,255),yg[I-ou]=Oo(F+8>>4,15);_1=1}return 1}function bt(I){var F=I.ma,te=I.U,ce=I.T;return t(!(1&I.ka)),0>=te||0>=ce?0:(te=F.Ib(I,F),F.Jb!=null&&F.Jb(I,F,te),F.Dc+=te,1)}function Xt(I){I.ma.memory=null}function Ft(I,F,te,ce){return Y(I,8)!=47?0:(F[0]=Y(I,14)+1,te[0]=Y(I,14)+1,ce[0]=Y(I,1),Y(I,3)!=0?0:!I.h)}function rr(I,F){if(4>I)return I+1;var te=I-2>>1;return(2+(1&I)<<te)+Y(F,te)+1}function pr(I,F){return 120<F?F-120:1<=(te=((te=ud[F-1])>>4)*I+(8-(15&te)))?te:1;var te}function jr(I,F,te){var ce=V(te),ge=I[F+=255&ce].g-8;return 0<ge&&(ee(te,te.u+8),ce=V(te),F+=I[F].value,F+=ce&(1<<ge)-1),ee(te,te.u+I[F].g),I[F].value}function vt(I,F,te){return te.g+=I.g,te.value+=I.value<<F>>>0,t(8>=te.g),I.g}function Lt(I,F,te){var ce=I.xc;return t((F=ce==0?0:I.vc[I.md*(te>>ce)+(F>>ce)])<I.Wb),I.Ya[F]}function fe(I,F,te,ce){var ge=I.ab,je=I.c*F,we=I.C;F=we+F;var Ce=te,Pe=ce;for(ce=I.Ta,te=I.Ua;0<ge--;){var $e=I.gc[ge],at=we,Et=F,kt=Ce,pt=Pe,Zt=(Pe=ce,Ce=te,$e.Ea);switch(t(at<Et),t(Et<=$e.nc),$e.hc){case 2:Jx(kt,pt,(Et-at)*Zt,Pe,Ce);break;case 0:var Rt=at,st=Et,ut=Pe,Ht=Ce,er=(yr=$e).Ea;Rt==0&&(vg(kt,pt,null,null,1,ut,Ht),At(kt,pt+1,0,0,er-1,ut,Ht+1),pt+=er,Ht+=er,++Rt);for(var Yt=1<<yr.b,Sr=Yt-1,br=Ne(er,yr.b),qr=yr.K,yr=yr.w+(Rt>>yr.b)*br;Rt<st;){var Fa=qr,Ya=yr,Sa=1;for(dp(kt,pt,ut,Ht-er,1,ut,Ht);Sa<er;){var ya=(Sa&~Sr)+Yt;ya>er&&(ya=er),(0,sd[Fa[Ya++]>>8&15])(kt,pt+ +Sa,ut,Ht+Sa-er,ya-Sa,ut,Ht+Sa),Sa=ya}pt+=er,Ht+=er,++Rt&Sr||(yr+=br)}Et!=$e.nc&&n(Pe,Ce-Zt,Pe,Ce+(Et-at-1)*Zt,Zt);break;case 1:for(Zt=kt,st=pt,er=(kt=$e.Ea)-(Ht=kt&~(ut=(pt=1<<$e.b)-1)),Rt=Ne(kt,$e.b),Yt=$e.K,$e=$e.w+(at>>$e.b)*Rt;at<Et;){for(Sr=Yt,br=$e,qr=new ot,yr=st+Ht,Fa=st+kt;st<yr;)xe(Sr[br++],qr),Xd(qr,Zt,st,pt,Pe,Ce),st+=pt,Ce+=pt;st<Fa&&(xe(Sr[br++],qr),Xd(qr,Zt,st,er,Pe,Ce),st+=er,Ce+=er),++at&ut||($e+=Rt)}break;case 3:if(kt==Pe&&pt==Ce&&0<$e.b){for(st=Pe,kt=Zt=Ce+(Et-at)*Zt-(Ht=(Et-at)*Ne($e.Ea,$e.b)),pt=Pe,ut=Ce,Rt=[],Ht=(er=Ht)-1;0<=Ht;--Ht)Rt[Ht]=pt[ut+Ht];for(Ht=er-1;0<=Ht;--Ht)st[kt+Ht]=Rt[Ht];Jo($e,at,Et,Pe,Zt,Pe,Ce)}else Jo($e,at,Et,kt,pt,Pe,Ce)}Ce=ce,Pe=te}Pe!=te&&n(ce,te,Ce,Pe,je)}function Me(I,F){var te=I.V,ce=I.Ba+I.c*I.C,ge=F-I.C;if(t(F<=I.l.o),t(16>=ge),0<ge){var je=I.l,we=I.Ta,Ce=I.Ua,Pe=je.width;if(fe(I,ge,te,ce),ge=Ce=[Ce],t((te=I.C)<(ce=F)),t(je.v<je.va),ce>je.o&&(ce=je.o),te<je.j){var $e=je.j-te;te=je.j,ge[0]+=$e*Pe}if(te>=ce?te=0:(ge[0]+=4*je.v,je.ka=te-je.j,je.U=je.va-je.v,je.T=ce-te,te=1),te){if(Ce=Ce[0],11>(te=I.ca).S){var at=te.f.RGBA,Et=(ce=te.S,ge=je.U,je=je.T,$e=at.eb,at.A),kt=je;for(at=at.fb+I.Ma*at.A;0<kt--;){var pt=we,Zt=Ce,Rt=ge,st=$e,ut=at;switch(ce){case gi:Ri(pt,Zt,Rt,st,ut);break;case Vf:si(pt,Zt,Rt,st,ut);break;case fp:si(pt,Zt,Rt,st,ut),Mo(st,ut,0,Rt,1,0);break;case xc:_l(pt,Zt,Rt,st,ut);break;case hp:Xe(pt,Zt,Rt,st,ut,1);break;case nu:Xe(pt,Zt,Rt,st,ut,1),Mo(st,ut,0,Rt,1,0);break;case vh:Xe(pt,Zt,Rt,st,ut,0);break;case cd:Xe(pt,Zt,Rt,st,ut,0),Mo(st,ut,1,Rt,1,0);break;case ld:Qd(pt,Zt,Rt,st,ut);break;case qf:Qd(pt,Zt,Rt,st,ut),Ca(st,ut,Rt,1,0);break;case ev:ro(pt,Zt,Rt,st,ut);break;default:t(0)}Ce+=Pe,at+=Et}I.Ma+=je}else alert("todo:EmitRescaledRowsYUVA");t(I.Ma<=te.height)}}I.C=F,t(I.C<=I.i)}function Te(I){var F;if(0<I.ua)return 0;for(F=0;F<I.Wb;++F){var te=I.Ya[F].G,ce=I.Ya[F].H;if(0<te[1][ce[1]+0].g||0<te[2][ce[2]+0].g||0<te[3][ce[3]+0].g)return 0}return 1}function _e(I,F,te,ce,ge,je){if(I.Z!=0){var we=I.qd,Ce=I.rd;for(t(gc[I.Z]!=null);F<te;++F)gc[I.Z](we,Ce,ce,ge,ce,ge,je),we=ce,Ce=ge,ge+=je;I.qd=we,I.rd=Ce}}function Fe(I,F){var te=I.l.ma,ce=te.Z==0||te.Z==1?I.l.j:I.C;if(ce=I.C<ce?ce:I.C,t(F<=I.l.o),F>ce){var ge=I.l.width,je=te.ca,we=te.tb+ge*ce,Ce=I.V,Pe=I.Ba+I.c*ce,$e=I.gc;t(I.ab==1),t($e[0].hc==3),Kd($e[0],ce,F,Ce,Pe,je,we),_e(te,ce,F,je,we,ge)}I.C=I.Ma=F}function Ve(I,F,te,ce,ge,je,we){var Ce=I.$/ce,Pe=I.$%ce,$e=I.m,at=I.s,Et=te+I.$,kt=Et;ge=te+ce*ge;var pt=te+ce*je,Zt=280+at.ua,Rt=I.Pb?Ce:16777216,st=0<at.ua?at.Wa:null,ut=at.wc,Ht=Et<pt?Lt(at,Pe,Ce):null;t(I.C<je),t(pt<=ge);var er=!1;e:for(;;){for(;er||Et<pt;){var Yt=0;if(Ce>=Rt){var Sr=Et-te;t((Rt=I).Pb),Rt.wd=Rt.m,Rt.xd=Sr,0<Rt.s.ua&&ue(Rt.s.Wa,Rt.s.vb),Rt=Ce+S1}if(Pe&ut||(Ht=Lt(at,Pe,Ce)),t(Ht!=null),Ht.Qb&&(F[Et]=Ht.qb,er=!0),!er)if(re($e),Ht.jc){Yt=$e,Sr=F;var br=Et,qr=Ht.pd[V(Yt)&Ds-1];t(Ht.jc),256>qr.g?(ee(Yt,Yt.u+qr.g),Sr[br]=qr.value,Yt=0):(ee(Yt,Yt.u+qr.g-256),t(256<=qr.value),Yt=qr.value),Yt==0&&(er=!0)}else Yt=jr(Ht.G[0],Ht.H[0],$e);if($e.h)break;if(er||256>Yt){if(!er)if(Ht.nd)F[Et]=(Ht.qb|Yt<<8)>>>0;else{if(re($e),er=jr(Ht.G[1],Ht.H[1],$e),re($e),Sr=jr(Ht.G[2],Ht.H[2],$e),br=jr(Ht.G[3],Ht.H[3],$e),$e.h)break;F[Et]=(br<<24|er<<16|Yt<<8|Sr)>>>0}if(er=!1,++Et,++Pe>=ce&&(Pe=0,++Ce,we!=null&&Ce<=je&&!(Ce%16)&&we(I,Ce),st!=null))for(;kt<Et;)Yt=F[kt++],st.X[(506832829*Yt&4294967295)>>>st.Mb]=Yt}else if(280>Yt){if(Yt=rr(Yt-256,$e),Sr=jr(Ht.G[4],Ht.H[4],$e),re($e),Sr=pr(ce,Sr=rr(Sr,$e)),$e.h)break;if(Et-te<Sr||ge-Et<Yt)break e;for(br=0;br<Yt;++br)F[Et+br]=F[Et+br-Sr];for(Et+=Yt,Pe+=Yt;Pe>=ce;)Pe-=ce,++Ce,we!=null&&Ce<=je&&!(Ce%16)&&we(I,Ce);if(t(Et<=ge),Pe&ut&&(Ht=Lt(at,Pe,Ce)),st!=null)for(;kt<Et;)Yt=F[kt++],st.X[(506832829*Yt&4294967295)>>>st.Mb]=Yt}else{if(!(Yt<Zt))break e;for(er=Yt-280,t(st!=null);kt<Et;)Yt=F[kt++],st.X[(506832829*Yt&4294967295)>>>st.Mb]=Yt;Yt=Et,t(!(er>>>(Sr=st).Xa)),F[Yt]=Sr.X[er],er=!0}er||t($e.h==H($e))}if(I.Pb&&$e.h&&Et<ge)t(I.m.h),I.a=5,I.m=I.wd,I.$=I.xd,0<I.s.ua&&ue(I.s.vb,I.s.Wa);else{if($e.h)break e;we?.(I,Ce>je?je:Ce),I.a=0,I.$=Et-te}return 1}return I.a=3,0}function mt(I){t(I!=null),I.vc=null,I.yc=null,I.Ya=null;var F=I.Wa;F!=null&&(F.X=null),I.vb=null,t(I!=null)}function wt(){var I=new xg;return I==null?null:(I.a=0,I.xb=zf,Be("Predictor","VP8LPredictors"),Be("Predictor","VP8LPredictors_C"),Be("PredictorAdd","VP8LPredictorsAdd"),Be("PredictorAdd","VP8LPredictorsAdd_C"),Jx=Vt,Xd=he,Ri=pe,si=De,Qd=Ye,ro=Nt,_l=Je,T.VP8LMapColor32b=Ws,T.VP8LMapColor8b=up,I)}function nt(I,F,te,ce,ge){var je=1,we=[I],Ce=[F],Pe=ce.m,$e=ce.s,at=null,Et=0;e:for(;;){if(te)for(;je&&Y(Pe,1);){var kt=we,pt=Ce,Zt=ce,Rt=1,st=Zt.m,ut=Zt.gc[Zt.ab],Ht=Y(st,2);if(Zt.Oc&1<<Ht)je=0;else{switch(Zt.Oc|=1<<Ht,ut.hc=Ht,ut.Ea=kt[0],ut.nc=pt[0],ut.K=[null],++Zt.ab,t(4>=Zt.ab),Ht){case 0:case 1:ut.b=Y(st,3)+2,Rt=nt(Ne(ut.Ea,ut.b),Ne(ut.nc,ut.b),0,Zt,ut.K),ut.K=ut.K[0];break;case 3:var er,Yt=Y(st,8)+1,Sr=16<Yt?0:4<Yt?1:2<Yt?2:3;if(kt[0]=Ne(ut.Ea,Sr),ut.b=Sr,er=Rt=nt(Yt,1,0,Zt,ut.K)){var br,qr=Yt,yr=ut,Fa=1<<(8>>yr.b),Ya=i(Fa);if(Ya==null)er=0;else{var Sa=yr.K[0],ya=yr.w;for(Ya[0]=yr.K[0][0],br=1;br<1*qr;++br)Ya[br]=Ue(Sa[ya+br],Ya[br-1]);for(;br<4*Fa;++br)Ya[br]=0;yr.K[0]=null,yr.K[0]=Ya,er=1}}Rt=er;break;case 2:break;default:t(0)}je=Rt}}if(we=we[0],Ce=Ce[0],je&&Y(Pe,1)&&!(je=1<=(Et=Y(Pe,4))&&11>=Et)){ce.a=3;break e}var ln;if(ln=je)t:{var Ka,da,hn,Gr=ce,aa=we,Ra=Ce,La=Et,Ks=te,Ps=Gr.m,ns=Gr.s,ss=[null],xs=1,rl=0,Xa=bh[La];r:for(;;){if(Ks&&Y(Ps,1)){var vs=Y(Ps,3)+2,Al=Ne(aa,vs),lu=Ne(Ra,vs),Nh=Al*lu;if(!nt(Al,lu,0,Gr,ss))break r;for(ss=ss[0],ns.xc=vs,Ka=0;Ka<Nh;++Ka){var cu=ss[Ka]>>8&65535;ss[Ka]=cu,cu>=xs&&(xs=cu+1)}}if(Ps.h)break r;for(da=0;5>da;++da){var In=Ro[da];!da&&0<La&&(In+=1<<La),rl<In&&(rl=In)}var gp=o(xs*Xa,O),iv=xs,Li=o(iv,z);if(Li==null)var Fn=null;else t(65536>=iv),Fn=Li;var wh=i(rl);if(Fn==null||wh==null||gp==null){Gr.a=1;break r}var du=gp;for(Ka=hn=0;Ka<xs;++Ka){var no=Fn[Ka],uu=no.G,so=no.H,bp=0,Wf=1,ov=0;for(da=0;5>da;++da){In=Ro[da],uu[da]=du,so[da]=hn,!da&&0<La&&(In+=1<<La);n:{var yp,lv=In,jp=Gr,Gf=wh,A1=du,T1=hn,Np=0,pd=jp.m,sC=Y(pd,1);if(s(Gf,0,0,lv),sC){var I1=Y(pd,1)+1,P1=Y(pd,1),jg=Y(pd,P1==0?1:8);Gf[jg]=1,I1==2&&(Gf[jg=Y(pd,8)]=1);var Yf=1}else{var Ng=i(19),wg=Y(pd,4)+4;if(19<wg){jp.a=3;var wp=0;break n}for(yp=0;yp<wg;++yp)Ng[dd[yp]]=Y(pd,3);var cv=void 0,Kf=void 0,O1=jp,M1=Ng,xd=lv,Sp=Gf,dv=0,Tl=O1.m,Xf=8,Sg=o(128,O);a:for(;P(Sg,0,7,M1,19);){if(Y(Tl,1)){var R1=2+2*Y(Tl,3);if((cv=2+Y(Tl,R1))>xd)break a}else cv=xd;for(Kf=0;Kf<xd&&cv--;){re(Tl);var Cg=Sg[0+(127&V(Tl))];ee(Tl,Tl.u+Cg.g);var Sh=Cg.value;if(16>Sh)Sp[Kf++]=Sh,Sh!=0&&(Xf=Sh);else{var F1=Sh==16,kg=Sh-16,_g=tl[kg],Eg=Y(Tl,tv[kg])+_g;if(Kf+Eg>xd)break a;for(var L1=F1?Xf:0;0<Eg--;)Sp[Kf++]=L1}}dv=1;break a}dv||(O1.a=3),Yf=dv}(Yf=Yf&&!pd.h)&&(Np=P(A1,T1,8,Gf,lv)),Yf&&Np!=0?wp=Np:(jp.a=3,wp=0)}if(wp==0)break r;if(Wf&&gh[da]==1&&(Wf=du[hn].g==0),bp+=du[hn].g,hn+=wp,3>=da){var Ch,uv=wh[0];for(Ch=1;Ch<In;++Ch)wh[Ch]>uv&&(uv=wh[Ch]);ov+=uv}}if(no.nd=Wf,no.Qb=0,Wf&&(no.qb=(uu[3][so[3]+0].value<<24|uu[1][so[1]+0].value<<16|uu[2][so[2]+0].value)>>>0,bp==0&&256>uu[0][so[0]+0].value&&(no.Qb=1,no.qb+=uu[0][so[0]+0].value<<8)),no.jc=!no.Qb&&6>ov,no.jc){var Cp,vd=no;for(Cp=0;Cp<Ds;++Cp){var jc=Cp,gd=vd.pd[jc],kp=vd.G[0][vd.H[0]+jc];256<=kp.value?(gd.g=kp.g+256,gd.value=kp.value):(gd.g=0,gd.value=0,jc>>=vt(kp,8,gd),jc>>=vt(vd.G[1][vd.H[1]+jc],16,gd),jc>>=vt(vd.G[2][vd.H[2]+jc],0,gd),vt(vd.G[3][vd.H[3]+jc],24,gd))}}}ns.vc=ss,ns.Wb=xs,ns.Ya=Fn,ns.yc=gp,ln=1;break t}ln=0}if(!(je=ln)){ce.a=3;break e}if(0<Et){if($e.ua=1<<Et,!Se($e.Wa,Et)){ce.a=1,je=0;break e}}else $e.ua=0;var _p=ce,Dg=we,B1=Ce,Ag=_p.s,Tg=Ag.xc;if(_p.c=Dg,_p.i=B1,Ag.md=Ne(Dg,Tg),Ag.wc=Tg==0?-1:(1<<Tg)-1,te){ce.xb=k1;break e}if((at=i(we*Ce))==null){ce.a=1,je=0;break e}je=(je=Ve(ce,at,0,we,Ce,Ce,null))&&!Pe.h;break e}return je?(ge!=null?ge[0]=at:(t(at==null),t(te)),ce.$=0,te||mt($e)):mt($e),je}function St(I,F){var te=I.c*I.i,ce=te+F+16*F;return t(I.c<=F),I.V=i(ce),I.V==null?(I.Ta=null,I.Ua=0,I.a=1,0):(I.Ta=I.V,I.Ua=I.Ba+te+F,1)}function Ct(I,F){var te=I.C,ce=F-te,ge=I.V,je=I.Ba+I.c*te;for(t(F<=I.l.o);0<ce;){var we=16<ce?16:ce,Ce=I.l.ma,Pe=I.l.width,$e=Pe*we,at=Ce.ca,Et=Ce.tb+Pe*te,kt=I.Ta,pt=I.Ua;fe(I,we,ge,je),jn(kt,pt,at,Et,$e),_e(Ce,te,te+we,at,Et,Pe),ce-=we,ge+=we*I.c,te+=we}t(te==F),I.C=I.Ma=F}function Jt(){this.ub=this.yd=this.td=this.Rb=0}function ir(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function xr(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function or(){this.Yb=function(){var I=[];return function F(te,ce,ge){for(var je=ge[ce],we=0;we<je&&(te.push(ge.length>ce+1?[]:0),!(ge.length<ce+1));we++)F(te[we],ce+1,ge)}(I,0,[3,11]),I}()}function ze(){this.jb=i(3),this.Wc=l([4,8],or),this.Xc=l([4,17],or)}function dr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ur(){this.ld=this.La=this.dd=this.tc=0}function Vr(){this.Na=this.la=0}function va(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function en(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function zs(){this.uc=this.M=this.Nb=0,this.wa=Array(new ur),this.Y=0,this.ya=Array(new en),this.aa=0,this.l=new ks}function zn(){this.y=i(16),this.f=i(8),this.ea=i(8)}function fs(){this.cb=this.a=0,this.sc="",this.m=new oe,this.Od=new Jt,this.Kc=new ir,this.ed=new dr,this.Qa=new xr,this.Ic=this.$c=this.Aa=0,this.D=new zs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,oe),this.ia=0,this.pb=o(4,va),this.Pa=new ze,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zn),this.Hd=0,this.rb=Array(new Vr),this.sb=0,this.wa=Array(new ur),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new en),this.L=this.aa=0,this.gd=l([4,2],ur),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ks(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function yt(){var I=new fs;return I!=null&&(I.a=0,I.sc="OK",I.cb=0,I.Xb=0,As||(As=Mr)),I}function mr(I,F,te){return I.a==0&&(I.a=F,I.sc=te,I.cb=0),0}function hr(I,F,te){return 3<=te&&I[F+0]==157&&I[F+1]==1&&I[F+2]==42}function Yr(I,F){if(I==null)return 0;if(I.a=0,I.sc="OK",F==null)return mr(I,2,"null VP8Io passed to VP8GetHeaders()");var te=F.data,ce=F.w,ge=F.ha;if(4>ge)return mr(I,7,"Truncated header.");var je=te[ce+0]|te[ce+1]<<8|te[ce+2]<<16,we=I.Od;if(we.Rb=!(1&je),we.td=je>>1&7,we.yd=je>>4&1,we.ub=je>>5,3<we.td)return mr(I,3,"Incorrect keyframe parameters.");if(!we.yd)return mr(I,4,"Frame not displayable.");ce+=3,ge-=3;var Ce=I.Kc;if(we.Rb){if(7>ge)return mr(I,7,"cannot parse picture header");if(!hr(te,ce,ge))return mr(I,3,"Bad code word");Ce.c=16383&(te[ce+4]<<8|te[ce+3]),Ce.Td=te[ce+4]>>6,Ce.i=16383&(te[ce+6]<<8|te[ce+5]),Ce.Ud=te[ce+6]>>6,ce+=7,ge-=7,I.za=Ce.c+15>>4,I.Ub=Ce.i+15>>4,F.width=Ce.c,F.height=Ce.i,F.Da=0,F.j=0,F.v=0,F.va=F.width,F.o=F.height,F.da=0,F.ib=F.width,F.hb=F.height,F.U=F.width,F.T=F.height,s((je=I.Pa).jb,0,255,je.jb.length),t((je=I.Qa)!=null),je.Cb=0,je.Bb=0,je.Fb=1,s(je.Zb,0,0,je.Zb.length),s(je.Lb,0,0,je.Lb)}if(we.ub>ge)return mr(I,7,"bad partition length");K(je=I.m,te,ce,we.ub),ce+=we.ub,ge-=we.ub,we.Rb&&(Ce.Ld=ne(je),Ce.Kd=ne(je)),Ce=I.Qa;var Pe,$e=I.Pa;if(t(je!=null),t(Ce!=null),Ce.Cb=ne(je),Ce.Cb){if(Ce.Bb=ne(je),ne(je)){for(Ce.Fb=ne(je),Pe=0;4>Pe;++Pe)Ce.Zb[Pe]=ne(je)?Q(je,7):0;for(Pe=0;4>Pe;++Pe)Ce.Lb[Pe]=ne(je)?Q(je,6):0}if(Ce.Bb)for(Pe=0;3>Pe;++Pe)$e.jb[Pe]=ne(je)?B(je,8):255}else Ce.Bb=0;if(je.Ka)return mr(I,3,"cannot parse segment header");if((Ce=I.ed).zd=ne(je),Ce.Tb=B(je,6),Ce.wb=B(je,3),Ce.Pc=ne(je),Ce.Pc&&ne(je)){for($e=0;4>$e;++$e)ne(je)&&(Ce.vd[$e]=Q(je,6));for($e=0;4>$e;++$e)ne(je)&&(Ce.od[$e]=Q(je,6))}if(I.L=Ce.Tb==0?0:Ce.zd?1:2,je.Ka)return mr(I,3,"cannot parse filter header");var at=ge;if(ge=Pe=ce,ce=Pe+at,Ce=at,I.Xb=(1<<B(I.m,2))-1,at<3*($e=I.Xb))te=7;else{for(Pe+=3*$e,Ce-=3*$e,at=0;at<$e;++at){var Et=te[ge+0]|te[ge+1]<<8|te[ge+2]<<16;Et>Ce&&(Et=Ce),K(I.Jc[+at],te,Pe,Et),Pe+=Et,Ce-=Et,ge+=3}K(I.Jc[+$e],te,Pe,Ce),te=Pe<ce?0:5}if(te!=0)return mr(I,te,"cannot parse partitions");for(te=B(Pe=I.m,7),ge=ne(Pe)?Q(Pe,4):0,ce=ne(Pe)?Q(Pe,4):0,Ce=ne(Pe)?Q(Pe,4):0,$e=ne(Pe)?Q(Pe,4):0,Pe=ne(Pe)?Q(Pe,4):0,at=I.Qa,Et=0;4>Et;++Et){if(at.Cb){var kt=at.Zb[Et];at.Fb||(kt+=te)}else{if(0<Et){I.pb[Et]=I.pb[0];continue}kt=te}var pt=I.pb[Et];pt.Sc[0]=mp[Oo(kt+ge,127)],pt.Sc[1]=pp[Oo(kt+0,127)],pt.Eb[0]=2*mp[Oo(kt+ce,127)],pt.Eb[1]=101581*pp[Oo(kt+Ce,127)]>>16,8>pt.Eb[1]&&(pt.Eb[1]=8),pt.Qc[0]=mp[Oo(kt+$e,117)],pt.Qc[1]=pp[Oo(kt+Pe,127)],pt.lc=kt+Pe}if(!we.Rb)return mr(I,4,"Not a key frame.");for(ne(je),we=I.Pa,te=0;4>te;++te){for(ge=0;8>ge;++ge)for(ce=0;3>ce;++ce)for(Ce=0;11>Ce;++Ce)$e=ie(je,yh[te][ge][ce][Ce])?B(je,8):vc[te][ge][ce][Ce],we.Wc[te][ge].Yb[ce][Ce]=$e;for(ge=0;17>ge;++ge)we.Xc[te][ge]=we.Wc[te][C1[ge]]}return I.kc=ne(je),I.kc&&(I.Bd=B(je,8)),I.cb=1}function Mr(I,F,te,ce,ge,je,we){var Ce=F[ge].Yb[te];for(te=0;16>ge;++ge){if(!ie(I,Ce[te+0]))return ge;for(;!ie(I,Ce[te+1]);)if(Ce=F[++ge].Yb[0],te=0,ge==16)return 16;var Pe=F[ge+1].Yb;if(ie(I,Ce[te+2])){var $e=I,at=0;if(ie($e,(kt=Ce)[(Et=te)+3]))if(ie($e,kt[Et+6])){for(Ce=0,Et=2*(at=ie($e,kt[Et+8]))+(kt=ie($e,kt[Et+9+at])),at=0,kt=Gn[Et];kt[Ce];++Ce)at+=at+ie($e,kt[Ce]);at+=3+(8<<Et)}else ie($e,kt[Et+7])?(at=7+2*ie($e,165),at+=ie($e,145)):at=5+ie($e,159);else at=ie($e,kt[Et+4])?3+ie($e,kt[Et+5]):2;Ce=Pe[2]}else at=1,Ce=Pe[1];Pe=we+qa[ge],0>($e=I).b&&ae($e);var Et,kt=$e.b,pt=(Et=$e.Ca>>1)-($e.I>>kt)>>31;--$e.b,$e.Ca+=pt,$e.Ca|=1,$e.I-=(Et+1&pt)<<kt,je[Pe]=((at^pt)-pt)*ce[(0<ge)+0]}return 16}function on(I){var F=I.rb[I.sb-1];F.la=0,F.Na=0,s(I.zc,0,0,I.zc.length),I.ja=0}function Ho(I,F){if(I==null)return 0;if(F==null)return mr(I,2,"NULL VP8Io parameter in VP8Decode().");if(!I.cb&&!Yr(I,F))return 0;if(t(I.cb),F.ac==null||F.ac(F)){F.ob&&(I.L=0);var te=md[I.L];if(I.L==2?(I.yb=0,I.zb=0):(I.yb=F.v-te>>4,I.zb=F.j-te>>4,0>I.yb&&(I.yb=0),0>I.zb&&(I.zb=0)),I.Va=F.o+15+te>>4,I.Hb=F.va+15+te>>4,I.Hb>I.za&&(I.Hb=I.za),I.Va>I.Ub&&(I.Va=I.Ub),0<I.L){var ce=I.ed;for(te=0;4>te;++te){var ge;if(I.Qa.Cb){var je=I.Qa.Lb[te];I.Qa.Fb||(je+=ce.Tb)}else je=ce.Tb;for(ge=0;1>=ge;++ge){var we=I.gd[te][ge],Ce=je;if(ce.Pc&&(Ce+=ce.vd[0],ge&&(Ce+=ce.od[0])),0<(Ce=0>Ce?0:63<Ce?63:Ce)){var Pe=Ce;0<ce.wb&&(Pe=4<ce.wb?Pe>>2:Pe>>1)>9-ce.wb&&(Pe=9-ce.wb),1>Pe&&(Pe=1),we.dd=Pe,we.tc=2*Ce+Pe,we.ld=40<=Ce?2:15<=Ce?1:0}else we.tc=0;we.La=ge}}}te=0}else mr(I,6,"Frame setup failed"),te=I.a;if(te=te==0){if(te){I.$c=0,0<I.Aa||(I.Ic=E1);e:{te=I.Ic,ce=4*(Pe=I.za);var $e=32*Pe,at=Pe+1,Et=0<I.L?Pe*(0<I.Aa?2:1):0,kt=(I.Aa==2?2:1)*Pe;if((we=ce+832+(ge=3*(16*te+md[I.L])/2*$e)+(je=I.Fa!=null&&0<I.Fa.length?I.Kc.c*I.Kc.i:0))!=we)te=0;else{if(we>I.Vb){if(I.Vb=0,I.Ec=i(we),I.Fc=0,I.Ec==null){te=mr(I,1,"no memory during frame initialization.");break e}I.Vb=we}we=I.Ec,Ce=I.Fc,I.Ac=we,I.Bc=Ce,Ce+=ce,I.Gd=o($e,zn),I.Hd=0,I.rb=o(at+1,Vr),I.sb=1,I.wa=Et?o(Et,ur):null,I.Y=0,I.D.Nb=0,I.D.wa=I.wa,I.D.Y=I.Y,0<I.Aa&&(I.D.Y+=Pe),t(!0),I.oc=we,I.pc=Ce,Ce+=832,I.ya=o(kt,en),I.aa=0,I.D.ya=I.ya,I.D.aa=I.aa,I.Aa==2&&(I.D.aa+=Pe),I.R=16*Pe,I.B=8*Pe,Pe=($e=md[I.L])*I.R,$e=$e/2*I.B,I.sa=we,I.ta=Ce+Pe,I.qa=I.sa,I.ra=I.ta+16*te*I.R+$e,I.Ha=I.qa,I.Ia=I.ra+8*te*I.B+$e,I.$c=0,Ce+=ge,I.mb=je?we:null,I.nb=je?Ce:null,t(Ce+je<=I.Fc+I.Vb),on(I),s(I.Ac,I.Bc,0,ce),te=1}}if(te){if(F.ka=0,F.y=I.sa,F.O=I.ta,F.f=I.qa,F.N=I.ra,F.ea=I.Ha,F.Vd=I.Ia,F.fa=I.R,F.Rc=I.B,F.F=null,F.J=0,!od){for(te=-255;255>=te;++te)as[255+te]=0>te?-te:te;for(te=-1020;1020>=te;++te)Zo[1020+te]=-128>te?-128:127<te?127:te;for(te=-112;112>=te;++te)ru[112+te]=-16>te?-16:15<te?15:te;for(te=-255;510>=te;++te)au[255+te]=0>te?0:255<te?255:te;od=1}mc=_s,El=Go,Dl=Oi,ps=Va,ao=Mi,Hn=Wo,fh=oh,pc=lh,Uf=pg,Jd=sp,Zd=mg,eu=Tf,mh=If,$f=Qx,tu=zd,id=Po,ph=fc,Wn=fg,Fi[0]=rt,Fi[1]=ed,Fi[2]=ih,Fi[3]=_f,Fi[4]=fr,Fi[5]=Er,Fi[6]=ar,Fi[7]=kr,Fi[8]=Yo,Fi[9]=kn,hd[0]=cc,hd[1]=td,hd[2]=jl,hd[3]=lc,hd[4]=ms,hd[5]=dc,hd[6]=wl,Fo[0]=Xo,Fo[1]=yl,Fo[2]=Ef,Fo[3]=uc,Fo[4]=vi,Fo[5]=Es,Fo[6]=hc,te=1}else te=0}te&&(te=function(pt,Zt){for(pt.M=0;pt.M<pt.Va;++pt.M){var Rt,st=pt.Jc[pt.M&pt.Xb],ut=pt.m,Ht=pt;for(Rt=0;Rt<Ht.za;++Rt){var er=ut,Yt=Ht,Sr=Yt.Ac,br=Yt.Bc+4*Rt,qr=Yt.zc,yr=Yt.ya[Yt.aa+Rt];if(Yt.Qa.Bb?yr.$b=ie(er,Yt.Pa.jb[0])?2+ie(er,Yt.Pa.jb[2]):ie(er,Yt.Pa.jb[1]):yr.$b=0,Yt.kc&&(yr.Ad=ie(er,Yt.Bd)),yr.Za=!ie(er,145)+0,yr.Za){var Fa=yr.Ob,Ya=0;for(Yt=0;4>Yt;++Yt){var Sa,ya=qr[0+Yt];for(Sa=0;4>Sa;++Sa){ya=gg[Sr[br+Sa]][ya];for(var ln=su[ie(er,ya[0])];0<ln;)ln=su[2*ln+ie(er,ya[ln])];ya=-ln,Sr[br+Sa]=ya}n(Fa,Ya,Sr,br,4),Ya+=4,qr[0+Yt]=ya}}else ya=ie(er,156)?ie(er,128)?1:3:ie(er,163)?2:0,yr.Ob[0]=ya,s(Sr,br,ya,4),s(qr,0,ya,4);yr.Dd=ie(er,142)?ie(er,114)?ie(er,183)?1:3:2:0}if(Ht.m.Ka)return mr(pt,7,"Premature end-of-partition0 encountered.");for(;pt.ja<pt.za;++pt.ja){if(Ht=st,er=(ut=pt).rb[ut.sb-1],Sr=ut.rb[ut.sb+ut.ja],Rt=ut.ya[ut.aa+ut.ja],br=ut.kc?Rt.Ad:0)er.la=Sr.la=0,Rt.Za||(er.Na=Sr.Na=0),Rt.Hc=0,Rt.Gc=0,Rt.ia=0;else{var Ka,da;if(er=Sr,Sr=Ht,br=ut.Pa.Xc,qr=ut.ya[ut.aa+ut.ja],yr=ut.pb[qr.$b],Yt=qr.ad,Fa=0,Ya=ut.rb[ut.sb-1],ya=Sa=0,s(Yt,Fa,0,384),qr.Za)var hn=0,Gr=br[3];else{ln=i(16);var aa=er.Na+Ya.Na;if(aa=As(Sr,br[1],aa,yr.Eb,0,ln,0),er.Na=Ya.Na=(0<aa)+0,1<aa)mc(ln,0,Yt,Fa);else{var Ra=ln[0]+3>>3;for(ln=0;256>ln;ln+=16)Yt[Fa+ln]=Ra}hn=1,Gr=br[0]}var La=15&er.la,Ks=15&Ya.la;for(ln=0;4>ln;++ln){var Ps=1&Ks;for(Ra=da=0;4>Ra;++Ra)La=La>>1|(Ps=(aa=As(Sr,Gr,aa=Ps+(1&La),yr.Sc,hn,Yt,Fa))>hn)<<7,da=da<<2|(3<aa?3:1<aa?2:Yt[Fa+0]!=0),Fa+=16;La>>=4,Ks=Ks>>1|Ps<<7,Sa=(Sa<<8|da)>>>0}for(Gr=La,hn=Ks>>4,Ka=0;4>Ka;Ka+=2){for(da=0,La=er.la>>4+Ka,Ks=Ya.la>>4+Ka,ln=0;2>ln;++ln){for(Ps=1&Ks,Ra=0;2>Ra;++Ra)aa=Ps+(1&La),La=La>>1|(Ps=0<(aa=As(Sr,br[2],aa,yr.Qc,0,Yt,Fa)))<<3,da=da<<2|(3<aa?3:1<aa?2:Yt[Fa+0]!=0),Fa+=16;La>>=2,Ks=Ks>>1|Ps<<5}ya|=da<<4*Ka,Gr|=La<<4<<Ka,hn|=(240&Ks)<<Ka}er.la=Gr,Ya.la=hn,qr.Hc=Sa,qr.Gc=ya,qr.ia=43690&ya?0:yr.ia,br=!(Sa|ya)}if(0<ut.L&&(ut.wa[ut.Y+ut.ja]=ut.gd[Rt.$b][Rt.Za],ut.wa[ut.Y+ut.ja].La|=!br),Ht.Ka)return mr(pt,7,"Premature end-of-file encountered.")}if(on(pt),ut=Zt,Ht=1,Rt=(st=pt).D,er=0<st.L&&st.M>=st.zb&&st.M<=st.Va,st.Aa==0)e:{if(Rt.M=st.M,Rt.uc=er,nd(st,Rt),Ht=1,Rt=(da=st.D).Nb,er=(ya=md[st.L])*st.R,Sr=ya/2*st.B,ln=16*Rt*st.R,Ra=8*Rt*st.B,br=st.sa,qr=st.ta-er+ln,yr=st.qa,Yt=st.ra-Sr+Ra,Fa=st.Ha,Ya=st.Ia-Sr+Ra,Ks=(La=da.M)==0,Sa=La>=st.Va-1,st.Aa==2&&nd(st,da),da.uc)for(Ps=(aa=st).D.M,t(aa.D.uc),da=aa.yb;da<aa.Hb;++da){hn=da,Gr=Ps;var ns=(ss=(In=aa).D).Nb;Ka=In.R;var ss=ss.wa[ss.Y+hn],xs=In.sa,rl=In.ta+16*ns*Ka+16*hn,Xa=ss.dd,vs=ss.tc;if(vs!=0)if(t(3<=vs),In.L==1)0<hn&&id(xs,rl,Ka,vs+4),ss.La&&Wn(xs,rl,Ka,vs),0<Gr&&tu(xs,rl,Ka,vs+4),ss.La&&ph(xs,rl,Ka,vs);else{var Al=In.B,lu=In.qa,Nh=In.ra+8*ns*Al+8*hn,cu=In.Ha,In=In.Ia+8*ns*Al+8*hn;ns=ss.ld,0<hn&&(pc(xs,rl,Ka,vs+4,Xa,ns),Jd(lu,Nh,cu,In,Al,vs+4,Xa,ns)),ss.La&&(eu(xs,rl,Ka,vs,Xa,ns),$f(lu,Nh,cu,In,Al,vs,Xa,ns)),0<Gr&&(fh(xs,rl,Ka,vs+4,Xa,ns),Uf(lu,Nh,cu,In,Al,vs+4,Xa,ns)),ss.La&&(Zd(xs,rl,Ka,vs,Xa,ns),mh(lu,Nh,cu,In,Al,vs,Xa,ns))}}if(st.ia&&alert("todo:DitherRow"),ut.put!=null){if(da=16*La,La=16*(La+1),Ks?(ut.y=st.sa,ut.O=st.ta+ln,ut.f=st.qa,ut.N=st.ra+Ra,ut.ea=st.Ha,ut.W=st.Ia+Ra):(da-=ya,ut.y=br,ut.O=qr,ut.f=yr,ut.N=Yt,ut.ea=Fa,ut.W=Ya),Sa||(La-=ya),La>ut.o&&(La=ut.o),ut.F=null,ut.J=null,st.Fa!=null&&0<st.Fa.length&&da<La&&(ut.J=lp(st,ut,da,La-da),ut.F=st.mb,ut.F==null&&ut.F.length==0)){Ht=mr(st,3,"Could not decode alpha data.");break e}da<ut.j&&(ya=ut.j-da,da=ut.j,t(!(1&ya)),ut.O+=st.R*ya,ut.N+=st.B*(ya>>1),ut.W+=st.B*(ya>>1),ut.F!=null&&(ut.J+=ut.width*ya)),da<La&&(ut.O+=ut.v,ut.N+=ut.v>>1,ut.W+=ut.v>>1,ut.F!=null&&(ut.J+=ut.v),ut.ka=da-ut.j,ut.U=ut.va-ut.v,ut.T=La-da,Ht=ut.put(ut))}Rt+1!=st.Ic||Sa||(n(st.sa,st.ta-er,br,qr+16*st.R,er),n(st.qa,st.ra-Sr,yr,Yt+8*st.B,Sr),n(st.Ha,st.Ia-Sr,Fa,Ya+8*st.B,Sr))}if(!Ht)return mr(pt,6,"Output aborted.")}return 1}(I,F)),F.bc!=null&&F.bc(F),te&=1}return te?(I.cb=0,te):0}function es(I,F,te,ce,ge){ge=I[F+te+32*ce]+(ge>>3),I[F+te+32*ce]=-256&ge?0>ge?0:255:ge}function Io(I,F,te,ce,ge,je){es(I,F,0,te,ce+ge),es(I,F,1,te,ce+je),es(I,F,2,te,ce-je),es(I,F,3,te,ce-ge)}function xa(I){return(20091*I>>16)+I}function ni(I,F,te,ce){var ge,je=0,we=i(16);for(ge=0;4>ge;++ge){var Ce=I[F+0]+I[F+8],Pe=I[F+0]-I[F+8],$e=(35468*I[F+4]>>16)-xa(I[F+12]),at=xa(I[F+4])+(35468*I[F+12]>>16);we[je+0]=Ce+at,we[je+1]=Pe+$e,we[je+2]=Pe-$e,we[je+3]=Ce-at,je+=4,F++}for(ge=je=0;4>ge;++ge)Ce=(I=we[je+0]+4)+we[je+8],Pe=I-we[je+8],$e=(35468*we[je+4]>>16)-xa(we[je+12]),es(te,ce,0,0,Ce+(at=xa(we[je+4])+(35468*we[je+12]>>16))),es(te,ce,1,0,Pe+$e),es(te,ce,2,0,Pe-$e),es(te,ce,3,0,Ce-at),je++,ce+=32}function Wo(I,F,te,ce){var ge=I[F+0]+4,je=35468*I[F+4]>>16,we=xa(I[F+4]),Ce=35468*I[F+1]>>16;Io(te,ce,0,ge+we,I=xa(I[F+1]),Ce),Io(te,ce,1,ge+je,I,Ce),Io(te,ce,2,ge-je,I,Ce),Io(te,ce,3,ge-we,I,Ce)}function Go(I,F,te,ce,ge){ni(I,F,te,ce),ge&&ni(I,F+16,te,ce+4)}function Oi(I,F,te,ce){El(I,F+0,te,ce,1),El(I,F+32,te,ce+128,1)}function Va(I,F,te,ce){var ge;for(I=I[F+0]+4,ge=0;4>ge;++ge)for(F=0;4>F;++F)es(te,ce,F,ge,I)}function Mi(I,F,te,ce){I[F+0]&&ps(I,F+0,te,ce),I[F+16]&&ps(I,F+16,te,ce+4),I[F+32]&&ps(I,F+32,te,ce+128),I[F+48]&&ps(I,F+48,te,ce+128+4)}function _s(I,F,te,ce){var ge,je=i(16);for(ge=0;4>ge;++ge){var we=I[F+0+ge]+I[F+12+ge],Ce=I[F+4+ge]+I[F+8+ge],Pe=I[F+4+ge]-I[F+8+ge],$e=I[F+0+ge]-I[F+12+ge];je[0+ge]=we+Ce,je[8+ge]=we-Ce,je[4+ge]=$e+Pe,je[12+ge]=$e-Pe}for(ge=0;4>ge;++ge)we=(I=je[0+4*ge]+3)+je[3+4*ge],Ce=je[1+4*ge]+je[2+4*ge],Pe=je[1+4*ge]-je[2+4*ge],$e=I-je[3+4*ge],te[ce+0]=we+Ce>>3,te[ce+16]=$e+Pe>>3,te[ce+32]=we-Ce>>3,te[ce+48]=$e-Pe>>3,ce+=64}function oc(I,F,te){var ce,ge=F-32,je=Gs,we=255-I[ge-1];for(ce=0;ce<te;++ce){var Ce,Pe=je,$e=we+I[F-1];for(Ce=0;Ce<te;++Ce)I[F+Ce]=Pe[$e+I[ge+Ce]];F+=32}}function ed(I,F){oc(I,F,4)}function yl(I,F){oc(I,F,8)}function td(I,F){oc(I,F,16)}function jl(I,F){var te;for(te=0;16>te;++te)n(I,F+32*te,I,F-32,16)}function lc(I,F){var te;for(te=16;0<te;--te)s(I,F,I[F-1],16),F+=32}function Nl(I,F,te){var ce;for(ce=0;16>ce;++ce)s(F,te+32*ce,I,16)}function cc(I,F){var te,ce=16;for(te=0;16>te;++te)ce+=I[F-1+32*te]+I[F+te-32];Nl(ce>>5,I,F)}function ms(I,F){var te,ce=8;for(te=0;16>te;++te)ce+=I[F-1+32*te];Nl(ce>>4,I,F)}function dc(I,F){var te,ce=8;for(te=0;16>te;++te)ce+=I[F+te-32];Nl(ce>>4,I,F)}function wl(I,F){Nl(128,I,F)}function Jr(I,F,te){return I+2*F+te+2>>2}function ih(I,F){var te,ce=F-32;for(ce=new Uint8Array([Jr(I[ce-1],I[ce+0],I[ce+1]),Jr(I[ce+0],I[ce+1],I[ce+2]),Jr(I[ce+1],I[ce+2],I[ce+3]),Jr(I[ce+2],I[ce+3],I[ce+4])]),te=0;4>te;++te)n(I,F+32*te,ce,0,ce.length)}function _f(I,F){var te=I[F-1],ce=I[F-1+32],ge=I[F-1+64],je=I[F-1+96];G(I,F+0,16843009*Jr(I[F-1-32],te,ce)),G(I,F+32,16843009*Jr(te,ce,ge)),G(I,F+64,16843009*Jr(ce,ge,je)),G(I,F+96,16843009*Jr(ge,je,je))}function rt(I,F){var te,ce=4;for(te=0;4>te;++te)ce+=I[F+te-32]+I[F-1+32*te];for(ce>>=3,te=0;4>te;++te)s(I,F+32*te,ce,4)}function fr(I,F){var te=I[F-1+0],ce=I[F-1+32],ge=I[F-1+64],je=I[F-1-32],we=I[F+0-32],Ce=I[F+1-32],Pe=I[F+2-32],$e=I[F+3-32];I[F+0+96]=Jr(ce,ge,I[F-1+96]),I[F+1+96]=I[F+0+64]=Jr(te,ce,ge),I[F+2+96]=I[F+1+64]=I[F+0+32]=Jr(je,te,ce),I[F+3+96]=I[F+2+64]=I[F+1+32]=I[F+0+0]=Jr(we,je,te),I[F+3+64]=I[F+2+32]=I[F+1+0]=Jr(Ce,we,je),I[F+3+32]=I[F+2+0]=Jr(Pe,Ce,we),I[F+3+0]=Jr($e,Pe,Ce)}function ar(I,F){var te=I[F+1-32],ce=I[F+2-32],ge=I[F+3-32],je=I[F+4-32],we=I[F+5-32],Ce=I[F+6-32],Pe=I[F+7-32];I[F+0+0]=Jr(I[F+0-32],te,ce),I[F+1+0]=I[F+0+32]=Jr(te,ce,ge),I[F+2+0]=I[F+1+32]=I[F+0+64]=Jr(ce,ge,je),I[F+3+0]=I[F+2+32]=I[F+1+64]=I[F+0+96]=Jr(ge,je,we),I[F+3+32]=I[F+2+64]=I[F+1+96]=Jr(je,we,Ce),I[F+3+64]=I[F+2+96]=Jr(we,Ce,Pe),I[F+3+96]=Jr(Ce,Pe,Pe)}function Er(I,F){var te=I[F-1+0],ce=I[F-1+32],ge=I[F-1+64],je=I[F-1-32],we=I[F+0-32],Ce=I[F+1-32],Pe=I[F+2-32],$e=I[F+3-32];I[F+0+0]=I[F+1+64]=je+we+1>>1,I[F+1+0]=I[F+2+64]=we+Ce+1>>1,I[F+2+0]=I[F+3+64]=Ce+Pe+1>>1,I[F+3+0]=Pe+$e+1>>1,I[F+0+96]=Jr(ge,ce,te),I[F+0+64]=Jr(ce,te,je),I[F+0+32]=I[F+1+96]=Jr(te,je,we),I[F+1+32]=I[F+2+96]=Jr(je,we,Ce),I[F+2+32]=I[F+3+96]=Jr(we,Ce,Pe),I[F+3+32]=Jr(Ce,Pe,$e)}function kr(I,F){var te=I[F+0-32],ce=I[F+1-32],ge=I[F+2-32],je=I[F+3-32],we=I[F+4-32],Ce=I[F+5-32],Pe=I[F+6-32],$e=I[F+7-32];I[F+0+0]=te+ce+1>>1,I[F+1+0]=I[F+0+64]=ce+ge+1>>1,I[F+2+0]=I[F+1+64]=ge+je+1>>1,I[F+3+0]=I[F+2+64]=je+we+1>>1,I[F+0+32]=Jr(te,ce,ge),I[F+1+32]=I[F+0+96]=Jr(ce,ge,je),I[F+2+32]=I[F+1+96]=Jr(ge,je,we),I[F+3+32]=I[F+2+96]=Jr(je,we,Ce),I[F+3+64]=Jr(we,Ce,Pe),I[F+3+96]=Jr(Ce,Pe,$e)}function kn(I,F){var te=I[F-1+0],ce=I[F-1+32],ge=I[F-1+64],je=I[F-1+96];I[F+0+0]=te+ce+1>>1,I[F+2+0]=I[F+0+32]=ce+ge+1>>1,I[F+2+32]=I[F+0+64]=ge+je+1>>1,I[F+1+0]=Jr(te,ce,ge),I[F+3+0]=I[F+1+32]=Jr(ce,ge,je),I[F+3+32]=I[F+1+64]=Jr(ge,je,je),I[F+3+64]=I[F+2+64]=I[F+0+96]=I[F+1+96]=I[F+2+96]=I[F+3+96]=je}function Yo(I,F){var te=I[F-1+0],ce=I[F-1+32],ge=I[F-1+64],je=I[F-1+96],we=I[F-1-32],Ce=I[F+0-32],Pe=I[F+1-32],$e=I[F+2-32];I[F+0+0]=I[F+2+32]=te+we+1>>1,I[F+0+32]=I[F+2+64]=ce+te+1>>1,I[F+0+64]=I[F+2+96]=ge+ce+1>>1,I[F+0+96]=je+ge+1>>1,I[F+3+0]=Jr(Ce,Pe,$e),I[F+2+0]=Jr(we,Ce,Pe),I[F+1+0]=I[F+3+32]=Jr(te,we,Ce),I[F+1+32]=I[F+3+64]=Jr(ce,te,we),I[F+1+64]=I[F+3+96]=Jr(ge,ce,te),I[F+1+96]=Jr(je,ge,ce)}function Ef(I,F){var te;for(te=0;8>te;++te)n(I,F+32*te,I,F-32,8)}function uc(I,F){var te;for(te=0;8>te;++te)s(I,F,I[F-1],8),F+=32}function Ko(I,F,te){var ce;for(ce=0;8>ce;++ce)s(F,te+32*ce,I,8)}function Xo(I,F){var te,ce=8;for(te=0;8>te;++te)ce+=I[F+te-32]+I[F-1+32*te];Ko(ce>>4,I,F)}function Es(I,F){var te,ce=4;for(te=0;8>te;++te)ce+=I[F+te-32];Ko(ce>>3,I,F)}function vi(I,F){var te,ce=4;for(te=0;8>te;++te)ce+=I[F-1+32*te];Ko(ce>>3,I,F)}function hc(I,F){Ko(128,I,F)}function Qo(I,F,te){var ce=I[F-te],ge=I[F+0],je=3*(ge-ce)+Zx[1020+I[F-2*te]-I[F+te]],we=xh[112+(je+4>>3)];I[F-te]=Gs[255+ce+xh[112+(je+3>>3)]],I[F+0]=Gs[255+ge-we]}function Df(I,F,te,ce){var ge=I[F+0],je=I[F+te];return el[255+I[F-2*te]-I[F-te]]>ce||el[255+je-ge]>ce}function rd(I,F,te,ce){return 4*el[255+I[F-te]-I[F+0]]+el[255+I[F-2*te]-I[F+te]]<=ce}function Af(I,F,te,ce,ge){var je=I[F-3*te],we=I[F-2*te],Ce=I[F-te],Pe=I[F+0],$e=I[F+te],at=I[F+2*te],Et=I[F+3*te];return 4*el[255+Ce-Pe]+el[255+we-$e]>ce?0:el[255+I[F-4*te]-je]<=ge&&el[255+je-we]<=ge&&el[255+we-Ce]<=ge&&el[255+Et-at]<=ge&&el[255+at-$e]<=ge&&el[255+$e-Pe]<=ge}function zd(I,F,te,ce){var ge=2*ce+1;for(ce=0;16>ce;++ce)rd(I,F+ce,te,ge)&&Qo(I,F+ce,te)}function Po(I,F,te,ce){var ge=2*ce+1;for(ce=0;16>ce;++ce)rd(I,F+ce*te,1,ge)&&Qo(I,F+ce*te,1)}function fc(I,F,te,ce){var ge;for(ge=3;0<ge;--ge)zd(I,F+=4*te,te,ce)}function fg(I,F,te,ce){var ge;for(ge=3;0<ge;--ge)Po(I,F+=4,te,ce)}function Hd(I,F,te,ce,ge,je,we,Ce){for(je=2*je+1;0<ge--;){if(Af(I,F,te,je,we))if(Df(I,F,te,Ce))Qo(I,F,te);else{var Pe=I,$e=F,at=te,Et=Pe[$e-2*at],kt=Pe[$e-at],pt=Pe[$e+0],Zt=Pe[$e+at],Rt=Pe[$e+2*at],st=27*(Ht=Zx[1020+3*(pt-kt)+Zx[1020+Et-Zt]])+63>>7,ut=18*Ht+63>>7,Ht=9*Ht+63>>7;Pe[$e-3*at]=Gs[255+Pe[$e-3*at]+Ht],Pe[$e-2*at]=Gs[255+Et+ut],Pe[$e-at]=Gs[255+kt+st],Pe[$e+0]=Gs[255+pt-st],Pe[$e+at]=Gs[255+Zt-ut],Pe[$e+2*at]=Gs[255+Rt-Ht]}F+=ce}}function Sl(I,F,te,ce,ge,je,we,Ce){for(je=2*je+1;0<ge--;){if(Af(I,F,te,je,we))if(Df(I,F,te,Ce))Qo(I,F,te);else{var Pe=I,$e=F,at=te,Et=Pe[$e-at],kt=Pe[$e+0],pt=Pe[$e+at],Zt=xh[112+((Rt=3*(kt-Et))+4>>3)],Rt=xh[112+(Rt+3>>3)],st=Zt+1>>1;Pe[$e-2*at]=Gs[255+Pe[$e-2*at]+st],Pe[$e-at]=Gs[255+Et+Rt],Pe[$e+0]=Gs[255+kt-Zt],Pe[$e+at]=Gs[255+pt-st]}F+=ce}}function oh(I,F,te,ce,ge,je){Hd(I,F,te,1,16,ce,ge,je)}function lh(I,F,te,ce,ge,je){Hd(I,F,1,te,16,ce,ge,je)}function mg(I,F,te,ce,ge,je){var we;for(we=3;0<we;--we)Sl(I,F+=4*te,te,1,16,ce,ge,je)}function Tf(I,F,te,ce,ge,je){var we;for(we=3;0<we;--we)Sl(I,F+=4,1,te,16,ce,ge,je)}function pg(I,F,te,ce,ge,je,we,Ce){Hd(I,F,ge,1,8,je,we,Ce),Hd(te,ce,ge,1,8,je,we,Ce)}function sp(I,F,te,ce,ge,je,we,Ce){Hd(I,F,1,ge,8,je,we,Ce),Hd(te,ce,1,ge,8,je,we,Ce)}function If(I,F,te,ce,ge,je,we,Ce){Sl(I,F+4*ge,ge,1,8,je,we,Ce),Sl(te,ce+4*ge,ge,1,8,je,we,Ce)}function Qx(I,F,te,ce,ge,je,we,Ce){Sl(I,F+4,1,ge,8,je,we,Ce),Sl(te,ce+4,1,ge,8,je,we,Ce)}function Pf(){this.ba=new Ke,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function ip(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function op(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Of(){this.ua=0,this.Wa=new se,this.vb=new se,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new O}function xg(){this.xb=this.a=0,this.l=new ks,this.ca=new Ke,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new M,this.Pb=0,this.wd=new M,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Of,this.ab=0,this.gc=o(4,op),this.Oc=0}function Mf(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ks,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ch(I,F,te,ce,ge,je,we){for(I=I==null?0:I[F+0],F=0;F<we;++F)ge[je+F]=I+te[ce+F]&255,I=ge[je+F]}function Rf(I,F,te,ce,ge,je,we){var Ce;if(I==null)ch(null,null,te,ce,ge,je,we);else for(Ce=0;Ce<we;++Ce)ge[je+Ce]=I[F+Ce]+te[ce+Ce]&255}function Wd(I,F,te,ce,ge,je,we){if(I==null)ch(null,null,te,ce,ge,je,we);else{var Ce,Pe=I[F+0],$e=Pe,at=Pe;for(Ce=0;Ce<we;++Ce)$e=at+(Pe=I[F+Ce])-$e,at=te[ce+Ce]+(-256&$e?0>$e?0:255:$e)&255,$e=Pe,ge[je+Ce]=at}}function lp(I,F,te,ce){var ge=F.width,je=F.o;if(t(I!=null&&F!=null),0>te||0>=ce||te+ce>je)return null;if(!I.Cc){if(I.ga==null){var we;if(I.ga=new Mf,(we=I.ga==null)||(we=F.width*F.o,t(I.Gb.length==0),I.Gb=i(we),I.Uc=0,I.Gb==null?we=0:(I.mb=I.Gb,I.nb=I.Uc,I.rc=null,we=1),we=!we),!we){we=I.ga;var Ce=I.Fa,Pe=I.P,$e=I.qc,at=I.mb,Et=I.nb,kt=Pe+1,pt=$e-1,Zt=we.l;if(t(Ce!=null&&at!=null&&F!=null),gc[0]=null,gc[1]=ch,gc[2]=Rf,gc[3]=Wd,we.ca=at,we.tb=Et,we.c=F.width,we.i=F.height,t(0<we.c&&0<we.i),1>=$e)F=0;else if(we.$a=Ce[Pe+0]>>0&3,we.Z=Ce[Pe+0]>>2&3,we.Lc=Ce[Pe+0]>>4&3,Pe=Ce[Pe+0]>>6&3,0>we.$a||1<we.$a||4<=we.Z||1<we.Lc||Pe)F=0;else if(Zt.put=bt,Zt.ac=it,Zt.bc=Xt,Zt.ma=we,Zt.width=F.width,Zt.height=F.height,Zt.Da=F.Da,Zt.v=F.v,Zt.va=F.va,Zt.j=F.j,Zt.o=F.o,we.$a)e:{t(we.$a==1),F=wt();t:for(;;){if(F==null){F=0;break e}if(t(we!=null),we.mc=F,F.c=we.c,F.i=we.i,F.l=we.l,F.l.ma=we,F.l.width=we.c,F.l.height=we.i,F.a=0,U(F.m,Ce,kt,pt),!nt(we.c,we.i,1,F,null)||(F.ab==1&&F.gc[0].hc==3&&Te(F.s)?(we.ic=1,Ce=F.c*F.i,F.Ta=null,F.Ua=0,F.V=i(Ce),F.Ba=0,F.V==null?(F.a=1,F=0):F=1):(we.ic=0,F=St(F,we.c)),!F))break t;F=1;break e}we.mc=null,F=0}else F=pt>=we.c*we.i;we=!F}if(we)return null;I.ga.Lc!=1?I.Ga=0:ce=je-te}t(I.ga!=null),t(te+ce<=je);e:{if(F=(Ce=I.ga).c,je=Ce.l.o,Ce.$a==0){if(kt=I.rc,pt=I.Vc,Zt=I.Fa,Pe=I.P+1+te*F,$e=I.mb,at=I.nb+te*F,t(Pe<=I.P+I.qc),Ce.Z!=0)for(t(gc[Ce.Z]!=null),we=0;we<ce;++we)gc[Ce.Z](kt,pt,Zt,Pe,$e,at,F),kt=$e,pt=at,at+=F,Pe+=F;else for(we=0;we<ce;++we)n($e,at,Zt,Pe,F),kt=$e,pt=at,at+=F,Pe+=F;I.rc=kt,I.Vc=pt}else{if(t(Ce.mc!=null),F=te+ce,t((we=Ce.mc)!=null),t(F<=we.i),we.C>=F)F=1;else if(Ce.ic||jt(),Ce.ic){Ce=we.V,kt=we.Ba,pt=we.c;var Rt=we.i,st=(Zt=1,Pe=we.$/pt,$e=we.$%pt,at=we.m,Et=we.s,we.$),ut=pt*Rt,Ht=pt*F,er=Et.wc,Yt=st<Ht?Lt(Et,$e,Pe):null;t(st<=ut),t(F<=Rt),t(Te(Et));t:for(;;){for(;!at.h&&st<Ht;){if($e&er||(Yt=Lt(Et,$e,Pe)),t(Yt!=null),re(at),256>(Rt=jr(Yt.G[0],Yt.H[0],at)))Ce[kt+st]=Rt,++st,++$e>=pt&&($e=0,++Pe<=F&&!(Pe%16)&&Fe(we,Pe));else{if(!(280>Rt)){Zt=0;break t}Rt=rr(Rt-256,at);var Sr,br=jr(Yt.G[4],Yt.H[4],at);if(re(at),!(st>=(br=pr(pt,br=rr(br,at)))&&ut-st>=Rt)){Zt=0;break t}for(Sr=0;Sr<Rt;++Sr)Ce[kt+st+Sr]=Ce[kt+st+Sr-br];for(st+=Rt,$e+=Rt;$e>=pt;)$e-=pt,++Pe<=F&&!(Pe%16)&&Fe(we,Pe);st<Ht&&$e&er&&(Yt=Lt(Et,$e,Pe))}t(at.h==H(at))}Fe(we,Pe>F?F:Pe);break t}!Zt||at.h&&st<ut?(Zt=0,we.a=at.h?5:3):we.$=st,F=Zt}else F=Ve(we,we.V,we.Ba,we.c,we.i,F,Ct);if(!F){ce=0;break e}}te+ce>=je&&(I.Cc=1),ce=1}if(!ce)return null;if(I.Cc&&((ce=I.ga)!=null&&(ce.mc=null),I.ga=null,0<I.Ga))return alert("todo:WebPDequantizeLevels"),null}return I.nb+te*ge}function W(I,F,te,ce,ge,je){for(;0<ge--;){var we,Ce=I,Pe=F+(te?1:0),$e=I,at=F+(te?0:3);for(we=0;we<ce;++we){var Et=$e[at+4*we];Et!=255&&(Et*=32897,Ce[Pe+4*we+0]=Ce[Pe+4*we+0]*Et>>23,Ce[Pe+4*we+1]=Ce[Pe+4*we+1]*Et>>23,Ce[Pe+4*we+2]=Ce[Pe+4*we+2]*Et>>23)}F+=je}}function be(I,F,te,ce,ge){for(;0<ce--;){var je;for(je=0;je<te;++je){var we=I[F+2*je+0],Ce=15&($e=I[F+2*je+1]),Pe=4369*Ce,$e=(240&$e|$e>>4)*Pe>>16;I[F+2*je+0]=(240&we|we>>4)*Pe>>16&240|(15&we|we<<4)*Pe>>16>>4&15,I[F+2*je+1]=240&$e|Ce}F+=ge}}function We(I,F,te,ce,ge,je,we,Ce){var Pe,$e,at=255;for($e=0;$e<ge;++$e){for(Pe=0;Pe<ce;++Pe){var Et=I[F+Pe];je[we+4*Pe]=Et,at&=Et}F+=te,we+=Ce}return at!=255}function tt(I,F,te,ce,ge){var je;for(je=0;je<ge;++je)te[ce+je]=I[F+je]>>8}function jt(){Mo=W,Ca=be,ka=We,jn=tt}function $t(I,F,te){T[I]=function(ce,ge,je,we,Ce,Pe,$e,at,Et,kt,pt,Zt,Rt,st,ut,Ht,er){var Yt,Sr=er-1>>1,br=Ce[Pe+0]|$e[at+0]<<16,qr=Et[kt+0]|pt[Zt+0]<<16;t(ce!=null);var yr=3*br+qr+131074>>2;for(F(ce[ge+0],255&yr,yr>>16,Rt,st),je!=null&&(yr=3*qr+br+131074>>2,F(je[we+0],255&yr,yr>>16,ut,Ht)),Yt=1;Yt<=Sr;++Yt){var Fa=Ce[Pe+Yt]|$e[at+Yt]<<16,Ya=Et[kt+Yt]|pt[Zt+Yt]<<16,Sa=br+Fa+qr+Ya+524296,ya=Sa+2*(Fa+qr)>>3;yr=ya+br>>1,br=(Sa=Sa+2*(br+Ya)>>3)+Fa>>1,F(ce[ge+2*Yt-1],255&yr,yr>>16,Rt,st+(2*Yt-1)*te),F(ce[ge+2*Yt-0],255&br,br>>16,Rt,st+(2*Yt-0)*te),je!=null&&(yr=Sa+qr>>1,br=ya+Ya>>1,F(je[we+2*Yt-1],255&yr,yr>>16,ut,Ht+(2*Yt-1)*te),F(je[we+2*Yt+0],255&br,br>>16,ut,Ht+(2*Yt+0)*te)),br=Fa,qr=Ya}1&er||(yr=3*br+qr+131074>>2,F(ce[ge+er-1],255&yr,yr>>16,Rt,st+(er-1)*te),je!=null&&(yr=3*qr+br+131074>>2,F(je[we+er-1],255&yr,yr>>16,ut,Ht+(er-1)*te)))}}function lr(){Ys[gi]=fd,Ys[Vf]=bc,Ys[xc]=iu,Ys[hp]=rv,Ys[vh]=av,Ys[ld]=Hf,Ys[ev]=nv,Ys[fp]=bc,Ys[nu]=rv,Ys[cd]=av,Ys[qf]=Hf}function wr(I){return I&-16384?0>I?0:255:I>>rC}function Rr(I,F){return wr((19077*I>>8)+(26149*F>>8)-14234)}function ua(I,F,te){return wr((19077*I>>8)-(6419*F>>8)-(13320*te>>8)+8708)}function la(I,F){return wr((19077*I>>8)+(33050*F>>8)-17685)}function Ia(I,F,te,ce,ge){ce[ge+0]=Rr(I,te),ce[ge+1]=ua(I,F,te),ce[ge+2]=la(I,F)}function Tn(I,F,te,ce,ge){ce[ge+0]=la(I,F),ce[ge+1]=ua(I,F,te),ce[ge+2]=Rr(I,te)}function Rn(I,F,te,ce,ge){var je=ua(I,F,te);F=je<<3&224|la(I,F)>>3,ce[ge+0]=248&Rr(I,te)|je>>5,ce[ge+1]=F}function ts(I,F,te,ce,ge){var je=240&la(I,F)|15;ce[ge+0]=240&Rr(I,te)|ua(I,F,te)>>4,ce[ge+1]=je}function rs(I,F,te,ce,ge){ce[ge+0]=255,Ia(I,F,te,ce,ge+1)}function Hs(I,F,te,ce,ge){Tn(I,F,te,ce,ge),ce[ge+3]=255}function Cl(I,F,te,ce,ge){Ia(I,F,te,ce,ge),ce[ge+3]=255}function Oo(I,F){return 0>I?0:I>F?F:I}function kl(I,F,te){T[I]=function(ce,ge,je,we,Ce,Pe,$e,at,Et){for(var kt=at+(-2&Et)*te;at!=kt;)F(ce[ge+0],je[we+0],Ce[Pe+0],$e,at),F(ce[ge+1],je[we+0],Ce[Pe+0],$e,at+te),ge+=2,++we,++Pe,at+=2*te;1&Et&&F(ce[ge+0],je[we+0],Ce[Pe+0],$e,at)}}function cp(I,F,te){return te==0?I==0?F==0?6:5:F==0?4:0:te}function ad(I,F,te,ce,ge){switch(I>>>30){case 3:El(F,te,ce,ge,0);break;case 2:Hn(F,te,ce,ge);break;case 1:ps(F,te,ce,ge)}}function nd(I,F){var te,ce,ge=F.M,je=F.Nb,we=I.oc,Ce=I.pc+40,Pe=I.oc,$e=I.pc+584,at=I.oc,Et=I.pc+600;for(te=0;16>te;++te)we[Ce+32*te-1]=129;for(te=0;8>te;++te)Pe[$e+32*te-1]=129,at[Et+32*te-1]=129;for(0<ge?we[Ce-1-32]=Pe[$e-1-32]=at[Et-1-32]=129:(s(we,Ce-32-1,127,21),s(Pe,$e-32-1,127,9),s(at,Et-32-1,127,9)),ce=0;ce<I.za;++ce){var kt=F.ya[F.aa+ce];if(0<ce){for(te=-1;16>te;++te)n(we,Ce+32*te-4,we,Ce+32*te+12,4);for(te=-1;8>te;++te)n(Pe,$e+32*te-4,Pe,$e+32*te+4,4),n(at,Et+32*te-4,at,Et+32*te+4,4)}var pt=I.Gd,Zt=I.Hd+ce,Rt=kt.ad,st=kt.Hc;if(0<ge&&(n(we,Ce-32,pt[Zt].y,0,16),n(Pe,$e-32,pt[Zt].f,0,8),n(at,Et-32,pt[Zt].ea,0,8)),kt.Za){var ut=we,Ht=Ce-32+16;for(0<ge&&(ce>=I.za-1?s(ut,Ht,pt[Zt].y[15],4):n(ut,Ht,pt[Zt+1].y,0,4)),te=0;4>te;te++)ut[Ht+128+te]=ut[Ht+256+te]=ut[Ht+384+te]=ut[Ht+0+te];for(te=0;16>te;++te,st<<=2)ut=we,Ht=Ce+jh[te],Fi[kt.Ob[te]](ut,Ht),ad(st,Rt,16*+te,ut,Ht)}else if(ut=cp(ce,ge,kt.Ob[0]),hd[ut](we,Ce),st!=0)for(te=0;16>te;++te,st<<=2)ad(st,Rt,16*+te,we,Ce+jh[te]);for(te=kt.Gc,ut=cp(ce,ge,kt.Dd),Fo[ut](Pe,$e),Fo[ut](at,Et),st=Rt,ut=Pe,Ht=$e,255&(kt=te>>0)&&(170&kt?Dl(st,256,ut,Ht):ao(st,256,ut,Ht)),kt=at,st=Et,255&(te>>=8)&&(170&te?Dl(Rt,320,kt,st):ao(Rt,320,kt,st)),ge<I.Ub-1&&(n(pt[Zt].y,0,we,Ce+480,16),n(pt[Zt].f,0,Pe,$e+224,8),n(pt[Zt].ea,0,at,Et+224,8)),te=8*je*I.B,pt=I.sa,Zt=I.ta+16*ce+16*je*I.R,Rt=I.qa,kt=I.ra+8*ce+te,st=I.Ha,ut=I.Ia+8*ce+te,te=0;16>te;++te)n(pt,Zt+te*I.R,we,Ce+32*te,16);for(te=0;8>te;++te)n(Rt,kt+te*I.B,Pe,$e+32*te,8),n(st,ut+te*I.B,at,Et+32*te,8)}}function Ff(I,F,te,ce,ge,je,we,Ce,Pe){var $e=[0],at=[0],Et=0,kt=Pe!=null?Pe.kd:0,pt=Pe??new ip;if(I==null||12>te)return 7;pt.data=I,pt.w=F,pt.ha=te,F=[F],te=[te],pt.gb=[pt.gb];e:{var Zt=F,Rt=te,st=pt.gb;if(t(I!=null),t(Rt!=null),t(st!=null),st[0]=0,12<=Rt[0]&&!r(I,Zt[0],"RIFF")){if(r(I,Zt[0]+8,"WEBP")){st=3;break e}var ut=le(I,Zt[0]+4);if(12>ut||4294967286<ut){st=3;break e}if(kt&&ut>Rt[0]-8){st=7;break e}st[0]=ut,Zt[0]+=12,Rt[0]-=12}st=0}if(st!=0)return st;for(ut=0<pt.gb[0],te=te[0];;){e:{var Ht=I;Rt=F,st=te;var er=$e,Yt=at,Sr=Zt=[0];if((yr=Et=[Et])[0]=0,8>st[0])st=7;else{if(!r(Ht,Rt[0],"VP8X")){if(le(Ht,Rt[0]+4)!=10){st=3;break e}if(18>st[0]){st=7;break e}var br=le(Ht,Rt[0]+8),qr=1+X(Ht,Rt[0]+12);if(2147483648<=qr*(Ht=1+X(Ht,Rt[0]+15))){st=3;break e}Sr!=null&&(Sr[0]=br),er!=null&&(er[0]=qr),Yt!=null&&(Yt[0]=Ht),Rt[0]+=18,st[0]-=18,yr[0]=1}st=0}}if(Et=Et[0],Zt=Zt[0],st!=0)return st;if(Rt=!!(2&Zt),!ut&&Et)return 3;if(je!=null&&(je[0]=!!(16&Zt)),we!=null&&(we[0]=Rt),Ce!=null&&(Ce[0]=0),we=$e[0],Zt=at[0],Et&&Rt&&Pe==null){st=0;break}if(4>te){st=7;break}if(ut&&Et||!ut&&!Et&&!r(I,F[0],"ALPH")){te=[te],pt.na=[pt.na],pt.P=[pt.P],pt.Sa=[pt.Sa];e:{br=I,st=F,ut=te;var yr=pt.gb;er=pt.na,Yt=pt.P,Sr=pt.Sa,qr=22,t(br!=null),t(ut!=null),Ht=st[0];var Fa=ut[0];for(t(er!=null),t(Sr!=null),er[0]=null,Yt[0]=null,Sr[0]=0;;){if(st[0]=Ht,ut[0]=Fa,8>Fa){st=7;break e}var Ya=le(br,Ht+4);if(4294967286<Ya){st=3;break e}var Sa=8+Ya+1&-2;if(qr+=Sa,0<yr&&qr>yr){st=3;break e}if(!r(br,Ht,"VP8 ")||!r(br,Ht,"VP8L")){st=0;break e}if(Fa[0]<Sa){st=7;break e}r(br,Ht,"ALPH")||(er[0]=br,Yt[0]=Ht+8,Sr[0]=Ya),Ht+=Sa,Fa-=Sa}}if(te=te[0],pt.na=pt.na[0],pt.P=pt.P[0],pt.Sa=pt.Sa[0],st!=0)break}te=[te],pt.Ja=[pt.Ja],pt.xa=[pt.xa];e:if(yr=I,st=F,ut=te,er=pt.gb[0],Yt=pt.Ja,Sr=pt.xa,br=st[0],Ht=!r(yr,br,"VP8 "),qr=!r(yr,br,"VP8L"),t(yr!=null),t(ut!=null),t(Yt!=null),t(Sr!=null),8>ut[0])st=7;else{if(Ht||qr){if(yr=le(yr,br+4),12<=er&&yr>er-12){st=3;break e}if(kt&&yr>ut[0]-8){st=7;break e}Yt[0]=yr,st[0]+=8,ut[0]-=8,Sr[0]=qr}else Sr[0]=5<=ut[0]&&yr[br+0]==47&&!(yr[br+4]>>5),Yt[0]=ut[0];st=0}if(te=te[0],pt.Ja=pt.Ja[0],pt.xa=pt.xa[0],F=F[0],st!=0)break;if(4294967286<pt.Ja)return 3;if(Ce==null||Rt||(Ce[0]=pt.xa?2:1),we=[we],Zt=[Zt],pt.xa){if(5>te){st=7;break}Ce=we,kt=Zt,Rt=je,I==null||5>te?I=0:5<=te&&I[F+0]==47&&!(I[F+4]>>5)?(ut=[0],yr=[0],er=[0],U(Yt=new M,I,F,te),Ft(Yt,ut,yr,er)?(Ce!=null&&(Ce[0]=ut[0]),kt!=null&&(kt[0]=yr[0]),Rt!=null&&(Rt[0]=er[0]),I=1):I=0):I=0}else{if(10>te){st=7;break}Ce=Zt,I==null||10>te||!hr(I,F+3,te-3)?I=0:(kt=I[F+0]|I[F+1]<<8|I[F+2]<<16,Rt=16383&(I[F+7]<<8|I[F+6]),I=16383&(I[F+9]<<8|I[F+8]),1&kt||3<(kt>>1&7)||!(kt>>4&1)||kt>>5>=pt.Ja||!Rt||!I?I=0:(we&&(we[0]=Rt),Ce&&(Ce[0]=I),I=1))}if(!I||(we=we[0],Zt=Zt[0],Et&&($e[0]!=we||at[0]!=Zt)))return 3;Pe!=null&&(Pe[0]=pt,Pe.offset=F-Pe.w,t(4294967286>F-Pe.w),t(Pe.offset==Pe.ha-te));break}return st==0||st==7&&Et&&Pe==null?(je!=null&&(je[0]|=pt.na!=null&&0<pt.na.length),ce!=null&&(ce[0]=we),ge!=null&&(ge[0]=Zt),0):st}function Gd(I,F,te){var ce=F.width,ge=F.height,je=0,we=0,Ce=ce,Pe=ge;if(F.Da=I!=null&&0<I.Da,F.Da&&(Ce=I.cd,Pe=I.bd,je=I.v,we=I.j,11>te||(je&=-2,we&=-2),0>je||0>we||0>=Ce||0>=Pe||je+Ce>ce||we+Pe>ge))return 0;if(F.v=je,F.j=we,F.va=je+Ce,F.o=we+Pe,F.U=Ce,F.T=Pe,F.da=I!=null&&0<I.da,F.da){if(!ye(Ce,Pe,te=[I.ib],je=[I.hb]))return 0;F.ib=te[0],F.hb=je[0]}return F.ob=I!=null&&I.ob,F.Kb=I==null||!I.Sd,F.da&&(F.ob=F.ib<3*ce/4&&F.hb<3*ge/4,F.Kb=0),1}function Lf(I){if(I==null)return 2;if(11>I.S){var F=I.f.RGBA;F.fb+=(I.height-1)*F.A,F.A=-F.A}else F=I.f.kb,I=I.height,F.O+=(I-1)*F.fa,F.fa=-F.fa,F.N+=(I-1>>1)*F.Ab,F.Ab=-F.Ab,F.W+=(I-1>>1)*F.Db,F.Db=-F.Db,F.F!=null&&(F.J+=(I-1)*F.lb,F.lb=-F.lb);return 0}function dh(I,F,te,ce){if(ce==null||0>=I||0>=F)return 2;if(te!=null){if(te.Da){var ge=te.cd,je=te.bd,we=-2&te.v,Ce=-2&te.j;if(0>we||0>Ce||0>=ge||0>=je||we+ge>I||Ce+je>F)return 2;I=ge,F=je}if(te.da){if(!ye(I,F,ge=[te.ib],je=[te.hb]))return 2;I=ge[0],F=je[0]}}ce.width=I,ce.height=F;e:{var Pe=ce.width,$e=ce.height;if(I=ce.S,0>=Pe||0>=$e||!(I>=gi&&13>I))I=2;else{if(0>=ce.Rd&&ce.sd==null){we=je=ge=F=0;var at=(Ce=Pe*D1[I])*$e;if(11>I||(je=($e+1)/2*(F=(Pe+1)/2),I==12&&(we=(ge=Pe)*$e)),($e=i(at+2*je+we))==null){I=1;break e}ce.sd=$e,11>I?((Pe=ce.f.RGBA).eb=$e,Pe.fb=0,Pe.A=Ce,Pe.size=at):((Pe=ce.f.kb).y=$e,Pe.O=0,Pe.fa=Ce,Pe.Fd=at,Pe.f=$e,Pe.N=0+at,Pe.Ab=F,Pe.Cd=je,Pe.ea=$e,Pe.W=0+at+je,Pe.Db=F,Pe.Ed=je,I==12&&(Pe.F=$e,Pe.J=0+at+2*je),Pe.Tc=we,Pe.lb=ge)}if(F=1,ge=ce.S,je=ce.width,we=ce.height,ge>=gi&&13>ge)if(11>ge)I=ce.f.RGBA,F&=(Ce=Math.abs(I.A))*(we-1)+je<=I.size,F&=Ce>=je*D1[ge],F&=I.eb!=null;else{I=ce.f.kb,Ce=(je+1)/2,at=(we+1)/2,Pe=Math.abs(I.fa),$e=Math.abs(I.Ab);var Et=Math.abs(I.Db),kt=Math.abs(I.lb),pt=kt*(we-1)+je;F&=Pe*(we-1)+je<=I.Fd,F&=$e*(at-1)+Ce<=I.Cd,F=(F&=Et*(at-1)+Ce<=I.Ed)&Pe>=je&$e>=Ce&Et>=Ce,F&=I.y!=null,F&=I.f!=null,F&=I.ea!=null,ge==12&&(F&=kt>=je,F&=pt<=I.Tc,F&=I.F!=null)}else F=0;I=F?0:2}}return I!=0||te!=null&&te.fd&&(I=Lf(ce)),I}var Ds=64,Yd=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],uh=24,hh=32,Bf=8,to=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qe("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(I){return I},T.Predictor2=function(I,F,te){return F[te+0]},T.Predictor3=function(I,F,te){return F[te+1]},T.Predictor4=function(I,F,te){return F[te-1]},T.Predictor5=function(I,F,te){return xt(xt(I,F[te+1]),F[te+0])},T.Predictor6=function(I,F,te){return xt(I,F[te-1])},T.Predictor7=function(I,F,te){return xt(I,F[te+0])},T.Predictor8=function(I,F,te){return xt(F[te-1],F[te+0])},T.Predictor9=function(I,F,te){return xt(F[te+0],F[te+1])},T.Predictor10=function(I,F,te){return xt(xt(I,F[te-1]),xt(F[te+0],F[te+1]))},T.Predictor11=function(I,F,te){var ce=F[te+0];return 0>=Tt(ce>>24&255,I>>24&255,(F=F[te-1])>>24&255)+Tt(ce>>16&255,I>>16&255,F>>16&255)+Tt(ce>>8&255,I>>8&255,F>>8&255)+Tt(255&ce,255&I,255&F)?ce:I},T.Predictor12=function(I,F,te){var ce=F[te+0];return(Le((I>>24&255)+(ce>>24&255)-((F=F[te-1])>>24&255))<<24|Le((I>>16&255)+(ce>>16&255)-(F>>16&255))<<16|Le((I>>8&255)+(ce>>8&255)-(F>>8&255))<<8|Le((255&I)+(255&ce)-(255&F)))>>>0},T.Predictor13=function(I,F,te){var ce=F[te-1];return(dt((I=xt(I,F[te+0]))>>24&255,ce>>24&255)<<24|dt(I>>16&255,ce>>16&255)<<16|dt(I>>8&255,ce>>8&255)<<8|dt(I>>0&255,ce>>0&255))>>>0};var vg=T.PredictorAdd0;T.PredictorAdd1=At,Qe("Predictor2","PredictorAdd2"),Qe("Predictor3","PredictorAdd3"),Qe("Predictor4","PredictorAdd4"),Qe("Predictor5","PredictorAdd5"),Qe("Predictor6","PredictorAdd6"),Qe("Predictor7","PredictorAdd7"),Qe("Predictor8","PredictorAdd8"),Qe("Predictor9","PredictorAdd9"),Qe("Predictor10","PredictorAdd10"),Qe("Predictor11","PredictorAdd11"),Qe("Predictor12","PredictorAdd12"),Qe("Predictor13","PredictorAdd13");var dp=T.PredictorAdd2;ve("ColorIndexInverseTransform","MapARGB","32b",function(I){return I>>8&255},function(I){return I}),ve("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(I){return I},function(I){return I>>8&255});var Jx,Jo=T.ColorIndexInverseTransform,Ws=T.MapARGB,Kd=T.VP8LColorIndexInverseTransformAlpha,up=T.MapAlpha,sd=T.VP8LPredictorsAdd=[];sd.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var Xd,Ri,si,Qd,ro,_l,mc,El,Hn,Dl,ps,ao,fh,pc,Uf,Jd,Zd,eu,mh,$f,tu,id,ph,Wn,Mo,Ca,ka,jn,as=i(511),Zo=i(2041),ru=i(225),au=i(767),od=0,Zx=Zo,xh=ru,Gs=au,el=as,gi=0,Vf=1,xc=2,hp=3,vh=4,ld=5,ev=6,fp=7,nu=8,cd=9,qf=10,tv=[2,3,7],tl=[3,3,11],Ro=[280,256,256,256,40],gh=[0,1,1,1,0],dd=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ud=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],bh=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],S1=8,mp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],pp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],As=null,Gn=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],qa=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],su=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],vc=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],gg=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],yh=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],C1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hd=[],Fi=[],Fo=[],k1=1,zf=2,gc=[],Ys=[];$t("UpsampleRgbLinePair",Ia,3),$t("UpsampleBgrLinePair",Tn,3),$t("UpsampleRgbaLinePair",Cl,4),$t("UpsampleBgraLinePair",Hs,4),$t("UpsampleArgbLinePair",rs,4),$t("UpsampleRgba4444LinePair",ts,2),$t("UpsampleRgb565LinePair",Rn,2);var fd=T.UpsampleRgbLinePair,iu=T.UpsampleBgrLinePair,bc=T.UpsampleRgbaLinePair,rv=T.UpsampleBgraLinePair,av=T.UpsampleArgbLinePair,Hf=T.UpsampleRgba4444LinePair,nv=T.UpsampleRgb565LinePair,yc=16,Ts=1<<yc-1,ou=-227,sv=482,rC=6,_1=0,aC=i(256),Is=i(256),bg=i(256),xp=i(256),vp=i(sv-ou),yg=i(sv-ou);kl("YuvToRgbRow",Ia,3),kl("YuvToBgrRow",Tn,3),kl("YuvToRgbaRow",Cl,4),kl("YuvToBgraRow",Hs,4),kl("YuvToArgbRow",rs,4),kl("YuvToRgba4444Row",ts,2),kl("YuvToRgb565Row",Rn,2);var jh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],md=[0,2,8],nC=[8,7,6,4,4,2,2,2,1,1,1,1],E1=1;this.WebPDecodeRGBA=function(I,F,te,ce,ge){var je=Vf,we=new Pf,Ce=new Ke;we.ba=Ce,Ce.S=je,Ce.width=[Ce.width],Ce.height=[Ce.height];var Pe=Ce.width,$e=Ce.height,at=new Ge;if(at==null||I==null)var Et=2;else t(at!=null),Et=Ff(I,F,te,at.width,at.height,at.Pd,at.Qd,at.format,null);if(Et!=0?Pe=0:(Pe!=null&&(Pe[0]=at.width[0]),$e!=null&&($e[0]=at.height[0]),Pe=1),Pe){Ce.width=Ce.width[0],Ce.height=Ce.height[0],ce!=null&&(ce[0]=Ce.width),ge!=null&&(ge[0]=Ce.height);e:{if(ce=new ks,(ge=new ip).data=I,ge.w=F,ge.ha=te,ge.kd=1,F=[0],t(ge!=null),((I=Ff(ge.data,ge.w,ge.ha,null,null,null,F,null,ge))==0||I==7)&&F[0]&&(I=4),(F=I)==0){if(t(we!=null),ce.data=ge.data,ce.w=ge.w+ge.offset,ce.ha=ge.ha-ge.offset,ce.put=bt,ce.ac=it,ce.bc=Xt,ce.ma=we,ge.xa){if((I=wt())==null){we=1;break e}if(function(kt,pt){var Zt=[0],Rt=[0],st=[0];t:for(;;){if(kt==null)return 0;if(pt==null)return kt.a=2,0;if(kt.l=pt,kt.a=0,U(kt.m,pt.data,pt.w,pt.ha),!Ft(kt.m,Zt,Rt,st)){kt.a=3;break t}if(kt.xb=zf,pt.width=Zt[0],pt.height=Rt[0],!nt(Zt[0],Rt[0],1,kt,null))break t;return 1}return t(kt.a!=0),0}(I,ce)){if(ce=(F=dh(ce.width,ce.height,we.Oa,we.ba))==0){t:{ce=I;r:for(;;){if(ce==null){ce=0;break t}if(t(ce.s.yc!=null),t(ce.s.Ya!=null),t(0<ce.s.Wb),t((te=ce.l)!=null),t((ge=te.ma)!=null),ce.xb!=0){if(ce.ca=ge.ba,ce.tb=ge.tb,t(ce.ca!=null),!Gd(ge.Oa,te,hp)){ce.a=2;break r}if(!St(ce,te.width)||te.da)break r;if((te.da||qe(ce.ca.S))&&jt(),11>ce.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),ce.ca.f.kb.F!=null&&jt()),ce.Pb&&0<ce.s.ua&&ce.s.vb.X==null&&!Se(ce.s.vb,ce.s.Wa.Xa)){ce.a=1;break r}ce.xb=0}if(!Ve(ce,ce.V,ce.Ba,ce.c,ce.i,te.o,Me))break r;ge.Dc=ce.Ma,ce=1;break t}t(ce.a!=0),ce=0}ce=!ce}ce&&(F=I.a)}else F=I.a}else{if((I=new yt)==null){we=1;break e}if(I.Fa=ge.na,I.P=ge.P,I.qc=ge.Sa,Yr(I,ce)){if((F=dh(ce.width,ce.height,we.Oa,we.ba))==0){if(I.Aa=0,te=we.Oa,t((ge=I)!=null),te!=null){if(0<(Pe=0>(Pe=te.Md)?0:100<Pe?255:255*Pe/100)){for($e=at=0;4>$e;++$e)12>(Et=ge.pb[$e]).lc&&(Et.ia=Pe*nC[0>Et.lc?0:Et.lc]>>3),at|=Et.ia;at&&(alert("todo:VP8InitRandom"),ge.ia=1)}ge.Ga=te.Id,100<ge.Ga?ge.Ga=100:0>ge.Ga&&(ge.Ga=0)}Ho(I,ce)||(F=I.a)}}else F=I.a}F==0&&we.Oa!=null&&we.Oa.fd&&(F=Lf(we.ba))}we=F}je=we!=0?null:11>je?Ce.f.RGBA.eb:Ce.f.kb.y}else je=null;return je};var D1=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(T,A){for(var L="",P=0;P<4;P++)L+=String.fromCharCode(T[A++]);return L}function u(T,A){return(T[A+0]<<0|T[A+1]<<8|T[A+2]<<16)>>>0}function h(T,A){return(T[A+0]<<0|T[A+1]<<8|T[A+2]<<16|T[A+3]<<24)>>>0}new c;var m=[0],p=[0],v=[],g=new c,b=e,y=function(T,A){var L={},P=0,O=!1,Z=0,z=0;if(L.frames=[],!function(V,H,ee,re){for(var ae=0;ae<re;ae++)if(V[H+ae]!=ee.charCodeAt(ae))return!0;return!1}(T,A,"RIFF",4)){for(h(T,A+=4),A+=8;A<T.length;){var K=d(T,A),B=h(T,A+=4);A+=4;var Q=B+(1&B);switch(K){case"VP8 ":case"VP8L":L.frames[P]===void 0&&(L.frames[P]={}),(Y=L.frames[P]).src_off=O?z:A-8,Y.src_size=Z+B+8,P++,O&&(O=!1,Z=0,z=0);break;case"VP8X":(Y=L.header={}).feature_flags=T[A];var U=A+4;Y.canvas_width=1+u(T,U),U+=3,Y.canvas_height=1+u(T,U),U+=3;break;case"ALPH":O=!0,Z=Q+8,z=A-8;break;case"ANIM":(Y=L.header).bgcolor=h(T,A),U=A+4,Y.loop_count=(oe=T)[(M=U)+0]<<0|oe[M+1]<<8,U+=2;break;case"ANMF":var J,Y;(Y=L.frames[P]={}).offset_x=2*u(T,A),A+=3,Y.offset_y=2*u(T,A),A+=3,Y.width=1+u(T,A),A+=3,Y.height=1+u(T,A),A+=3,Y.duration=u(T,A),A+=3,J=T[A++],Y.dispose=1&J,Y.blend=J>>1&1}K!="ANMF"&&(A+=Q)}var oe,M;return L}}(b,0);y.response=b,y.rgbaoutput=!0,y.dataurl=!1;var C=y.header?y.header:null,w=y.frames?y.frames:null;if(C){C.loop_counter=C.loop_count,m=[C.canvas_height],p=[C.canvas_width];for(var k=0;k<w.length&&w[k].blend!=0;k++);}var S=w[0],D=g.WebPDecodeRGBA(b,S.src_off,S.src_size,p,m);S.rgba=D,S.imgwidth=p[0],S.imgheight=m[0];for(var E=0;E<p[0]*m[0]*4;E++)v[E]=D[E];return this.width=p,this.height=m,this.data=v,this}(function(e){var t=function(){return typeof x3=="function"},r=function(m,p,v,g){var b=4,y=o;switch(g){case e.image_compression.FAST:b=1,y=i;break;case e.image_compression.MEDIUM:b=6,y=l;break;case e.image_compression.SLOW:b=9,y=c}m=n(m,p,v,y);var C=x3(m,{level:b});return e.__addimage__.arrayBufferToBinaryString(C)},n=function(m,p,v,g){for(var b,y,C,w=m.length/p,k=new Uint8Array(m.length+w),S=u(),D=0;D<w;D+=1){if(C=D*p,b=m.subarray(C,C+p),g)k.set(g(b,v,y),C+D);else{for(var E,T=S.length,A=[];E<T;E+=1)A[E]=S[E](b,v,y);var L=h(A.concat());k.set(A[L],C+D)}y=b}return k},s=function(m){var p=Array.apply([],m);return p.unshift(0),p},i=function(m,p){var v,g=[],b=m.length;g[0]=1;for(var y=0;y<b;y+=1)v=m[y-p]||0,g[y+1]=m[y]-v+256&255;return g},o=function(m,p,v){var g,b=[],y=m.length;b[0]=2;for(var C=0;C<y;C+=1)g=v&&v[C]||0,b[C+1]=m[C]-g+256&255;return b},l=function(m,p,v){var g,b,y=[],C=m.length;y[0]=3;for(var w=0;w<C;w+=1)g=m[w-p]||0,b=v&&v[w]||0,y[w+1]=m[w]+256-(g+b>>>1)&255;return y},c=function(m,p,v){var g,b,y,C,w=[],k=m.length;w[0]=4;for(var S=0;S<k;S+=1)g=m[S-p]||0,b=v&&v[S]||0,y=v&&v[S-p]||0,C=d(g,b,y),w[S+1]=m[S]-C+256&255;return w},d=function(m,p,v){if(m===p&&p===v)return m;var g=Math.abs(p-v),b=Math.abs(m-v),y=Math.abs(m+p-v-v);return g<=b&&g<=y?m:b<=y?p:v},u=function(){return[s,i,o,l,c]},h=function(m){var p=m.map(function(v){return v.reduce(function(g,b){return g+Math.abs(b)},0)});return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(m,p,v,g){var b,y,C,w,k,S,D,E,T,A,L,P,O,Z,z,K=this.decode.FLATE_DECODE,B="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(C=new S8e(m)).imgData,y=C.bits,b=C.colorSpace,k=C.colors,[4,6].indexOf(C.colorType)!==-1){if(C.bits===8){T=(E=C.pixelBitlength==32?new Uint32Array(C.decodePixels().buffer):C.pixelBitlength==16?new Uint16Array(C.decodePixels().buffer):new Uint8Array(C.decodePixels().buffer)).length,L=new Uint8Array(T*C.colors),A=new Uint8Array(T);var Q,U=C.pixelBitlength-C.bits;for(Z=0,z=0;Z<T;Z++){for(O=E[Z],Q=0;Q<U;)L[z++]=O>>>Q&255,Q+=C.bits;A[Z]=O>>>Q&255}}if(C.bits===16){T=(E=new Uint32Array(C.decodePixels().buffer)).length,L=new Uint8Array(T*(32/C.pixelBitlength)*C.colors),A=new Uint8Array(T*(32/C.pixelBitlength)),P=C.colors>1,Z=0,z=0;for(var J=0;Z<T;)O=E[Z++],L[z++]=O>>>0&255,P&&(L[z++]=O>>>16&255,O=E[Z++],L[z++]=O>>>0&255),A[J++]=O>>>16&255;y=8}g!==e.image_compression.NONE&&t()?(m=r(L,C.width*C.colors,C.colors,g),D=r(A,C.width,1,g)):(m=L,D=A,K=void 0)}if(C.colorType===3&&(b=this.color_spaces.INDEXED,S=C.palette,C.transparency.indexed)){var Y=C.transparency.indexed,oe=0;for(Z=0,T=Y.length;Z<T;++Z)oe+=Y[Z];if((oe/=255)===T-1&&Y.indexOf(0)!==-1)w=[Y.indexOf(0)];else if(oe!==T){for(E=C.decodePixels(),A=new Uint8Array(E.length),Z=0,T=E.length;Z<T;Z++)A[Z]=Y[E[Z]];D=r(A,C.width,1)}}var M=function(V){var H;switch(V){case e.image_compression.FAST:H=11;break;case e.image_compression.MEDIUM:H=13;break;case e.image_compression.SLOW:H=14;break;default:H=12}return H}(g);return K===this.decode.FLATE_DECODE&&(B="/Predictor "+M+" "),B+="/Colors "+k+" /BitsPerComponent "+y+" /Columns "+C.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(D&&this.__addimage__.isArrayBuffer(D)||this.__addimage__.isArrayBufferView(D))&&(D=this.__addimage__.arrayBufferToBinaryString(D)),{alias:v,data:m,index:p,filter:K,decodeParameters:B,transparency:w,palette:S,sMask:D,predictor:M,width:C.width,height:C.height,bitsPerComponent:y,colorSpace:b}}}})(ta.API),function(e){e.processGIF89A=function(t,r,n,s){var i=new C8e(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new hD(100).encode(d,100);return e.processJPEG.call(this,u,r,n,s)},e.processGIF87A=e.processGIF89A}(ta.API),wd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},wd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){En.log("bit decode error:"+r)}},wd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},wd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},wd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},wd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=n*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},wd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=s*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},wd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},wd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=n,this.data[l+3]=o}},wd.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,s){var i=new wd(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new hD(100).encode(c,100);return e.processJPEG.call(this,d,r,n,s)}}(ta.API),q7.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,s){var i=new q7(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new hD(100).encode(c,100);return e.processJPEG.call(this,d,r,n,s)}}(ta.API),ta.API.processRGBA=function(e,t,r){for(var n=e.data,s=n.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var u=n[d],h=n[d+1],m=n[d+2],p=n[d+3];i[l++]=u,i[l++]=h,i[l++]=m,o[c++]=p}var v=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},ta.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},$v=ta.API,bN=$v.getCharWidthsArray=function(e,t){var r,n,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,h=t.doKerning!==!1,m=0,p=e.length,v=0,g=l[0]||c,b=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?b.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(m=h&&Ua(d[n])==="object"&&!isNaN(parseInt(d[n][v],10))?d[n][v]/u:0,b.push((l[n]||g)/c+m)),v=n;return b},B7=$v.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return $v.processArabic&&(e=$v.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,s)/r:bN.apply(this,arguments).reduce(function(i,o){return i+o},0)},U7=function(e,t,r,n){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},$7=function(e,t,r){r||(r={});var n,s,i,o,l,c,d,u=[],h=[u],m=r.textIndent||0,p=0,v=0,g=e.split(" "),b=bN.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var y=Array(c).join(" "),C=[];g.map(function(k){(k=k.split(/\s*\n/)).length>1?C=C.concat(k.map(function(S,D){return(D&&S.length?`
`:"")+S})):C.push(k[0])}),g=C,c=B7.apply(this,[y,r])}for(i=0,o=g.length;i<o;i++){var w=0;if(n=g[i],c&&n[0]==`
`&&(n=n.substr(1),w=1),m+p+(v=(s=bN.apply(this,[n,r])).reduce(function(k,S){return k+S},0))>t||w){if(v>t){for(l=U7.apply(this,[n,s,t-(m+p),t]),u.push(l.shift()),u=[l.pop()];l.length;)h.push([l.shift()]);v=s.slice(n.length-(u[0]?u[0].length:0)).reduce(function(k,S){return k+S},0)}else u=[n];h.push(u),m=v+c,p=b}else u.push(n),m+=p+v,p=b}return d=c?function(k,S){return(S?y:"")+k.join(" ")}:function(k){return k.join(" ")},h.map(d)},$v.splitTextToSize=function(e,t,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var h=this.internal.getFont(u.fontName,u.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat($7.apply(this,[n[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=t[s];var i=function(h){return"0x"+parseInt(h,10).toString(16)},o=e.__fontmetrics__.compress=function(h){var m,p,v,g,b=["{"];for(var y in h){if(m=h[y],isNaN(parseInt(y,10))?p="'"+y+"'":(y=parseInt(y,10),p=(p=i(y).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof m=="number")m<0?(v=i(m).slice(3),g="-"):(v=i(m).slice(2),g=""),v=g+v.slice(0,-1)+n[v.slice(-1)];else{if(Ua(m)!=="object")throw new Error("Don't know what to do with value type "+Ua(m)+".");v=o(m)}b.push(p+v)}return b.push("}"),b.join("")},l=e.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,v,g,b={},y=1,C=b,w=[],k="",S="",D=h.length-1,E=1;E<D;E+=1)(g=h[E])=="'"?m?(v=m.join(""),m=void 0):m=[]:m?m.push(g):g=="{"?(w.push([C,v]),C={},v=void 0):g=="}"?((p=w.pop())[0][p[1]]=C,v=void 0,C=p[0]):g=="-"?y=-1:v===void 0?r.hasOwnProperty(g)?(k+=r[g],v=parseInt(k,16)*y,y=1,k=""):k+=g:r.hasOwnProperty(g)?(S+=r[g],C[v]=parseInt(S,16)*y,y=1,v=void 0,S=""):S+=g;return b},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(h){var m=h.font,p=u.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var v=d.Unicode[m.postScriptName];v&&(m.metadata.Unicode.encoding=v,m.encoding=v.codePages[0])}])}(ta.API),function(e){var t=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Kb(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,n)}}])}(ta),function(e){function t(){return(na.canvg?Promise.resolve(na.canvg):u3(()=>import("./index.es-DXvDi7fX.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}ta.API.addSvgAsImage=function(r,n,s,i,o,l,c,d){if(isNaN(n)||isNaN(s))throw En.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw En.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var h=u.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,u.width,u.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then(function(v){return v.fromString(h,r,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(m)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),n,s,i,o,c,d)})}}(),ta.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(t,r);return this},ta.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,h=0;function m(v,g){var b,y=!1;for(b=0;b<v.length;b+=1)v[b]===g&&(y=!0);return y}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(h=0;h<p;h+=1)r[l[h]].value=r[l[h]].defaultValue,r[l[h]].explicitSet=!1}if(Ua(e)==="object"){for(s in e)if(i=e[s],m(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&m(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,g=[];for(v in r)r[v].explicitSet===!0&&(r[v].type==="name"?g.push("/"+v+" /"+r[v].value):g.push("/"+v+" "+r[v].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(ta.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],h=0,m=i.length;h<m;++h){if(l=o.metadata.characterToGlyph(i.charCodeAt(h)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(h),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},n=function(i){var o,l,c,d,u,h,m;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],h=0,m=(l=Object.keys(i).sort(function(p,v){return p-v})).length;h<m;h++)o=l[h],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var h=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",v=0;v<m.length;v++)p+=String.fromCharCode(m[v]);var g=d();u({data:p,addLength1:!0,objectId:g}),c("endobj");var b=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:b}),c("endobj");var y=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Kv(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var C=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+Kv(l.fontName)),c("/FontDescriptor "+y+" 0 R"),c("/W "+e.API.PDFObject.convert(h)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+b+" 0 R"),c("/BaseFont /"+Kv(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+C+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var h=l.metadata.rawData,m="",p=0;p<h.length;p++)m+=String.fromCharCode(h[p]);var v=d();u({data:m,addLength1:!0,objectId:v}),c("endobj");var g=d();u({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var b=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+v+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Kv(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var y=0;y<l.metadata.hmtx.widths.length;y++)l.metadata.hmtx.widths[y]=parseInt(l.metadata.hmtx.widths[y]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+Kv(l.fontName)+"/FontDescriptor "+b+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},h=i.mutex||{},m=h.pdfEscape,p=h.activeFontKey,v=h.fonts,g=p,b="",y=0,C="",w=v[g].encoding;if(v[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:h};for(C=l,g=p,Array.isArray(l)&&(C=l[0]),y=0;y<C.length;y+=1)v[g].metadata.hasOwnProperty("cmap")&&(o=v[g].metadata.cmap.unicode.codeMap[C[y].charCodeAt(0)]),o||C[y].charCodeAt(0)<256&&v[g].metadata.hasOwnProperty("Unicode")?b+=C[y]:b+="";var k="";return parseInt(g.slice(1))<14||w==="WinAnsiEncoding"?k=m(b,g).split("").map(function(S){return S.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(k=r(b,v[g])),h.isHex=!0,{text:k,x:c,y:d,options:u,mutex:h}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])}(ta),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(ta.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var s,i,o,l,c,d,u,h=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},b=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],y=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,w=0;this.__bidiEngine__={};var k=function(P){var O=P.charCodeAt(),Z=O>>8,z=g[Z];return z!==void 0?h[256*z+(255&O)]:Z===252||Z===253?"AL":y.test(Z)?"L":Z===8?"R":"N"},S=function(P){for(var O,Z=0;Z<P.length;Z++){if((O=k(P.charAt(Z)))==="L")return!1;if(O==="R")return!0}return!1},D=function(P,O,Z,z){var K,B,Q,U,J=O[z];switch(J){case"L":case"R":C=!1;break;case"N":case"AN":break;case"EN":C&&(J="AN");break;case"AL":C=!0,J="R";break;case"WS":J="N";break;case"CS":z<1||z+1>=O.length||(K=Z[z-1])!=="EN"&&K!=="AN"||(B=O[z+1])!=="EN"&&B!=="AN"?J="N":C&&(B="AN"),J=B===K?B:"N";break;case"ES":J=(K=z>0?Z[z-1]:"B")==="EN"&&z+1<O.length&&O[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&Z[z-1]==="EN"){J="EN";break}if(C){J="N";break}for(Q=z+1,U=O.length;Q<U&&O[Q]==="ET";)Q++;J=Q<U&&O[Q]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(U=O.length,Q=z+1;Q<U&&O[Q]==="NSM";)Q++;if(Q<U){var Y=P[z],oe=Y>=1425&&Y<=2303||Y===64286;if(K=O[Q],oe&&(K==="R"||K==="AL")){J="R";break}}}J=z<1||(K=O[z-1])==="B"?"N":Z[z-1];break;case"B":C=!1,s=!0,J=w;break;case"S":i=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"BN":J="N"}return J},E=function(P,O,Z){var z=P.split("");return Z&&T(z,Z,{hiLevel:w}),z.reverse(),O&&O.reverse(),z.join("")},T=function(P,O,Z){var z,K,B,Q,U,J=-1,Y=P.length,oe=0,M=[],V=w?p:m,H=[];for(C=!1,s=!1,i=!1,K=0;K<Y;K++)H[K]=k(P[K]);for(B=0;B<Y;B++){if(U=oe,M[B]=D(P,H,M,B),z=240&(oe=V[U][v[M[B]]]),oe&=15,O[B]=Q=V[oe][5],z>0)if(z===16){for(K=J;K<B;K++)O[K]=1;J=-1}else J=-1;if(V[oe][6])J===-1&&(J=B);else if(J>-1){for(K=J;K<B;K++)O[K]=Q;J=-1}H[B]==="B"&&(O[B]=0),Z.hiLevel|=Q}i&&function(ee,re,ae){for(var ne=0;ne<ae;ne++)if(ee[ne]==="S"){re[ne]=w;for(var ie=ne-1;ie>=0&&ee[ie]==="WS";ie--)re[ie]=w}}(H,O,Y)},A=function(P,O,Z,z,K){if(!(K.hiLevel<P)){if(P===1&&w===1&&!s)return O.reverse(),void(Z&&Z.reverse());for(var B,Q,U,J,Y=O.length,oe=0;oe<Y;){if(z[oe]>=P){for(U=oe+1;U<Y&&z[U]>=P;)U++;for(J=oe,Q=U-1;J<Q;J++,Q--)B=O[J],O[J]=O[Q],O[Q]=B,Z&&(B=Z[J],Z[J]=Z[Q],Z[Q]=B);oe=U}oe++}}},L=function(P,O,Z){var z=P.split(""),K={hiLevel:w};return Z||(Z=[]),T(z,Z,K),function(B,Q,U){if(U.hiLevel!==0&&u)for(var J,Y=0;Y<B.length;Y++)Q[Y]===1&&(J=b.indexOf(B[Y]))>=0&&(B[Y]=b[J+1])}(z,Z,K),A(2,z,O,Z,K),A(1,z,O,Z,K),z.join("")};return this.__bidiEngine__.doBidiReorder=function(P,O,Z){if(function(K,B){if(B)for(var Q=0;Q<K.length;Q++)B[Q]=Q;l===void 0&&(l=S(K)),d===void 0&&(d=S(K))}(P,O),o||!c||d)if(o&&c&&l^d)w=l?1:0,P=E(P,O,Z);else if(!o&&c&&d)w=l?1:0,P=L(P,O,Z),P=E(P,O);else if(!o||l||c||d){if(o&&!c&&l^d)P=E(P,O),l?(w=0,P=L(P,O,Z)):(w=1,P=L(P,O,Z),P=E(P,O));else if(o&&l&&!c&&d)w=1,P=L(P,O,Z),P=E(P,O);else if(!o&&!c&&l^d){var z=u;l?(w=1,P=L(P,O,Z),w=0,u=!1,P=L(P,O,Z),u=z):(w=0,P=L(P,O,Z),P=E(P,O),w=1,u=!1,P=L(P,O,Z),u=z,P=E(P,O))}}else w=0,P=L(P,O,Z);else w=l?1:0,P=L(P,O,Z);return P},this.__bidiEngine__.setOptions=function(P){P&&(o=P.isInputVisual,c=P.isOutputVisual,l=P.isInputRtl,d=P.isOutputRtl,u=P.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);n.text=o}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(ta),ta.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Gm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new U8e(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new k8e(this.contents),this.head=new E8e(this),this.name=new P8e(this),this.cmap=new ZK(this),this.toUnicode={},this.hhea=new D8e(this),this.maxp=new O8e(this),this.hmtx=new M8e(this),this.post=new T8e(this),this.os2=new A8e(this),this.loca=new B8e(this),this.glyf=new R8e(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var qd,Gm=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,s;for(s=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,s,i;for(i=[],n=0,s=t.length;n<s;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),k8e=function(){var e;function t(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,s,i,o,l,c,d,u,h,m,p,v,g;for(g in p=Object.keys(r).length,c=Math.log(2),h=16*Math.floor(Math.log(p)/c),o=Math.floor(h/c),u=16*p-h,(s=new Gm).writeInt(this.scalarType),s.writeShort(p),s.writeShort(h),s.writeShort(o),s.writeShort(u),i=16*p,d=s.pos+i,l=null,v=[],r)for(m=r[g],s.writeString(g),s.writeInt(e(m)),s.writeInt(d),s.writeInt(m.length),v=v.concat(m),g==="head"&&(l=d),d+=m.length;d%4;)v.push(0),d++;return s.write(v),n=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(n),s.data},e=function(r){var n,s,i,o;for(r=eX.call(r);r.length%4;)r.push(0);for(i=new Gm(r),s=0,n=0,o=r.length;n<o;n=n+=4)s+=i.readUInt32();return 4294967295&s},t}(),_8e={}.hasOwnProperty,sh=function(e,t){for(var r in t)_8e.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};qd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var E8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,qd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new Gm).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),z7=function(){function e(t,r){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),h=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),m=p/2,t.pos+=6,i=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),t.pos+=2,g=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),d=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),u=function(){var k,S;for(S=[],c=k=0;0<=m?k<m:k>m;c=0<=m?++k:--k)S.push(t.readUInt16());return S}(),s=(this.length-t.pos+this.offset)/2,l=function(){var k,S;for(S=[],c=k=0;0<=s?k<s:k>s;c=0<=s?++k:--k)S.push(t.readUInt16());return S}(),c=y=0,w=i.length;y<w;c=++y)for(b=i[c],n=C=v=g[c];v<=b?C<=b:C>=b;n=v<=b?++C:--C)u[c]===0?o=n+d[c]:(o=l[u[c]/2+(n-v)-(m-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}t.pos=h}return e.encode=function(t,r){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y,C,w,k,S,D,E,T,A,L,P,O,Z,z,K,B,Q,U,J,Y,oe,M,V,H,ee,re,ae,ne,ie,G,de,X;switch(z=new Gm,o=Object.keys(t).sort(function(le,Se){return le-Se}),r){case"macroman":for(g=0,b=function(){var le=[];for(v=0;v<256;++v)le.push(0);return le}(),C={0:0},i={},K=0,J=o.length;K<J;K++)C[ie=t[s=o[K]]]==null&&(C[ie]=++g),i[s]={old:t[s],new:C[t[s]]},b[s]=C[t[s]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(b),{charMap:i,subtable:z.data,maxGlyphID:g+1};case"unicode":for(O=[],h=[],w=0,C={},n={},y=d=null,B=0,Y=o.length;B<Y;B++)C[S=t[s=o[B]]]==null&&(C[S]=++w),n[s]={old:S,new:C[S]},l=C[S]-s,y!=null&&l===d||(y&&h.push(y),O.push(s),d=l),y=s;for(y&&h.push(y),h.push(65535),O.push(65535),L=2*(A=O.length),T=2*Math.pow(Math.log(A)/Math.LN2,2),m=Math.log(T/2)/Math.LN2,E=2*A-T,c=[],D=[],p=[],v=Q=0,oe=O.length;Q<oe;v=++Q){if(P=O[v],u=h[v],P===65535){c.push(0),D.push(0);break}if(P-(Z=n[P].new)>=32768)for(c.push(0),D.push(2*(p.length+A-v)),s=U=P;P<=u?U<=u:U>=u;s=P<=u?++U:--U)p.push(n[s].new);else c.push(Z-P),D.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*A+2*p.length),z.writeUInt16(0),z.writeUInt16(L),z.writeUInt16(T),z.writeUInt16(m),z.writeUInt16(E),ae=0,M=h.length;ae<M;ae++)s=h[ae],z.writeUInt16(s);for(z.writeUInt16(0),ne=0,V=O.length;ne<V;ne++)s=O[ne],z.writeUInt16(s);for(G=0,H=c.length;G<H;G++)l=c[G],z.writeUInt16(l);for(de=0,ee=D.length;de<ee;de++)k=D[de],z.writeUInt16(k);for(X=0,re=p.length;X<re;X++)g=p[X],z.writeUInt16(g);return{charMap:n,subtable:z.data,maxGlyphID:w+1}}},e}(),ZK=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,qd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new z7(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=z7.encode(r,n),(i=new Gm).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t}(),D8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,qd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),A8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,qd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),T8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,qd),t.prototype.tag="post",t.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),I8e=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},P8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,qd),t.prototype.tag="name",t.prototype.parse=function(r){var n,s,i,o,l,c,d,u,h,m,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),s=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=h=0,m=s.length;h<m;o=++h)i=s[o],r.pos=i.offset,u=r.readString(i.length),l=new I8e(u,i),d[p=i.nameID]==null&&(d[p]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),O8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,qd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),M8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,qd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,s,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,h;for(h=[],n=u=0;0<=i?u<i:u>i;n=0<=i?++u:--u)h.push(r.readInt16());return h}(),this.widths=(function(){var u,h,m,p;for(p=[],u=0,h=(m=this.metrics).length;u<h;u++)o=m[u],p.push(o.advance);return p}).call(this),s=this.widths[this.widths.length-1],d=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),eX=[].slice,R8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,qd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,s,i,o,l,c,d,u,h,m;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,l=(c=new Gm(n.read(i))).readShort(),u=c.readShort(),m=c.readShort(),d=c.readShort(),h=c.readShort(),this.cache[r]=l===-1?new L8e(c,u,m,d,h):new F8e(c,l,u,m,d,h),this.cache[r]))},t.prototype.encode=function(r,n,s){var i,o,l,c,d;for(l=[],o=[],c=0,d=n.length;c<d;c++)i=r[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t}(),F8e=function(){function e(t,r,n,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),L8e=function(){function e(t,r,n,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Gm(eX.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),B8e=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return sh(t,qd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<n.length&&n[o]==l){++o,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*s.length),h=0;h<s.length;++h)u[4*h+3]=255&s[h],u[4*h+2]=(65280&s[h])>>8,u[4*h+1]=(16711680&s[h])>>16,u[4*h]=(4278190080&s[h])>>24;return u},t}(),U8e=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=s[n];return t},e.prototype.glyphsFor=function(t){var r,n,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],s[i]=n;return s},e.prototype.encode=function(t,r){var n,s,i,o,l,c,d,u,h,m,p,v,g,b,y;for(s in n=ZK.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},y=n.charMap)p[(c=y[s]).old]=c.new;for(v in m=n.maxGlyphID,o)v in p||(p[v]=m++);return u=function(C){var w,k;for(w in k={},C)k[C[w]]=w;return k}(p),h=Object.keys(u).sort(function(C,w){return C-w}),g=function(){var C,w,k;for(k=[],C=0,w=h.length;C<w;C++)l=h[C],k.push(u[l]);return k}(),i=this.font.glyf.encode(o,g,p),d=this.font.loca.encode(i.offsets,g),b={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(b["OS/2"]=this.font.os2.raw()),this.font.directory.encode(b)},e}();ta.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,s,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)n=r[l],d.push(t.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();function $8e(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(""),[o,l]=N.useState(""),[c,d]=N.useState([]),[u,h]=N.useState(!1),[m,p]=N.useState(!1),[v,g]=N.useState(null),[b,y]=N.useState(null),[C,w]=N.useState([]),[k,S]=N.useState(0),[D,E]=N.useState(0),[T,A]=N.useState(0),[L,P]=N.useState(0),[O,Z]=N.useState(1),[z,K]=N.useState({salary:"",date:new Date().toISOString().split("T")[0],month:new Date().toLocaleString("en-US",{month:"long"}),year:new Date().getFullYear().toString()}),[B,Q]=N.useState(localStorage.getItem("activeRole")||"");JSON.parse(localStorage.getItem("user"));const U=["January","February","March","April","May","June","July","August","September","October","November","December"],J=[],Y=new Date().getFullYear();for(let he=Y-5;he<=Y+1;he++)J.push(he.toString());N.useEffect(()=>{M(),V(),oe()},[]);const oe=async()=>{try{const he=await Oe.get("/api/departments");d(Array.isArray(he.data)?he.data:[])}catch(he){console.error("Error fetching departments:",he)}},M=async()=>{try{const he=localStorage.getItem("activeRole")||"";let ve;he==="SuperAdmin"?ve=await Oe.get("/api/faculties"):ve=await Oe.get("/api/faculties"),t(Array.isArray(ve.data)?ve.data:[])}catch(he){console.error("Error fetching faculties:",he)}},V=async()=>{try{const he=await Oe.get("/api/salary-records");n(Array.isArray(he.data)?he.data:[])}catch(he){console.error("Error fetching salary records:",he)}},H=async he=>{try{const ve=await Oe.get(`/api/salary-records/employee/${he}`);w(Array.isArray(ve.data)?ve.data:[])}catch(ve){console.error("Error fetching employee salary history:",ve),w([])}},ee=he=>{const ve=he.joinDate||new Date().toISOString().split("T")[0],pe=new Date(ve),De=pe.toLocaleString("en-US",{month:"long"}),Ye=pe.getFullYear().toString();g(he),K({salary:he.salary||"",date:new Date().toISOString().split("T")[0],month:new Date().toLocaleString("en-US",{month:"long"}),year:new Date().getFullYear().toString(),minDate:ve,joinMonth:De,joinYear:Ye}),P(0),S(0),E(0),A(0),Z(1),h(!0),ae(he.employeeId,new Date().toLocaleString("en-US",{month:"long"}),new Date().getFullYear().toString())},re=he=>{g(he),y(he.employeeId),H(he.employeeId),p(!0)},ae=async(he,ve,pe)=>{try{const De=U.indexOf(ve)+1,Ye=De<10?`0${De}`:`${De}`,Nt=await Oe.get("/api/salary-records/leave-count",{params:{employeeId:he,month:Ye,year:pe}});S(Nt.data.leaveCount||0),E(Nt.data.sundayCount||0),A(Nt.data.totalDays||0)}catch(De){console.error("Error fetching leave count:",De),S(0),E(0),A(0)}},ne=()=>{h(!1),g(null)},ie=()=>{p(!1),y(null),g(null),w([])},G=he=>{K({...z,[he.target.name]:he.target.value})},de=he=>{const ve=he.target.value;K({...z,month:ve}),v&&ae(v.employeeId,ve,z.year)},X=he=>{const ve=he.target.value;if(ve===z.joinYear){const pe=U.indexOf(z.month),De=U.indexOf(z.joinMonth);if(pe<De){K({...z,year:ve,month:z.joinMonth}),v&&ae(v.employeeId,z.joinMonth,ve);return}}K({...z,year:ve}),v&&ae(v.employeeId,z.month,ve)},le=he=>{P(he.target.value)},Se=he=>{const ve=parseInt(he.target.value);Z(isNaN(ve)||ve<0?0:ve)},ue=()=>Math.max(0,k-O),se=()=>{const he=ue()*L;return z.salary-he},ye=async()=>{try{const pe=ue(),De=pe*L,Ye=se();await Oe.post("/api/salary-records/save",{facultyId:v._id,employeeId:v.employeeId,month:z.month,year:z.year,salary:z.salary,leaveCount:k,sundayCount:D,totalLeaveCount:T,paidLeaveCount:O,deductibleDays:pe,deductionPerDay:L,totalDeduction:De,payableSalary:Ye,date:z.date});var he=document.getElementById("standard-modal"),ve=bootstrap.Modal.getInstance(he);ve||(ve=new bootstrap.Modal(he)),ve.hide(),V(),alert("Salary saved successfully!"),ne()}catch(pe){pe.response&&pe.response.status===400?alert("Salary already recorded for this employee in the same month!"):console.error("Error saving salary:",pe)}},Ne=async(he,ve,pe,De=null)=>{const Ye=De?{firstName:De.facultyId?.firstName||"Unknown",lastName:De.facultyId?.lastName||"Unknown",employeeId:De.employeeId,department:De.facultyId?.department||"Unknown"}:v;if(!Ye)throw new Error("Employee information is required");try{const Nt=De?De.date:z.date,Je=De?De.month:z.month,Xe=De?De.year:z.year,Be=De?De.salary:z.salary,qe=De?De.leaveCount:k,ft=De?De.sundayCount||0:D,Ie=De?De.paidLeaveCount||0:O,Ke=De?De.deductibleDays||0:ve,Ge=De?De.deductionPerDay||0:L,lt=De?De.totalDeduction||0:pe,Mt=De?De.payableSalary:he,Ae=new ta;Ae.setFontSize(16),Ae.setFont(void 0,"bold"),Ae.text("Your Company Name",Ae.internal.pageSize.width/2,20,{align:"center"}),Ae.setFontSize(10),Ae.setFont(void 0,"normal"),Ae.text("Company Address Line 1",Ae.internal.pageSize.width/2,30,{align:"center"}),Ae.text("Company Address Line 2",Ae.internal.pageSize.width/2,35,{align:"center"}),Ae.text("Phone: (123) 456-7890 | Email: company@email.com",Ae.internal.pageSize.width/2,40,{align:"center"}),Ae.setLineWidth(.5),Ae.line(20,45,190,45),Ae.setFontSize(14),Ae.setFont(void 0,"bold"),Ae.text("Salary Receipt",Ae.internal.pageSize.width/2,55,{align:"center"}),Ae.setFontSize(10),Ae.setFont(void 0,"normal");const ke=new Date(Nt),it=`${String(ke.getDate()).padStart(2,"0")}-${String(ke.getMonth()+1).padStart(2,"0")}-${ke.getFullYear()}`;Ae.text(`Date: ${it}`,170,55,{align:"right"}),Ae.setFontSize(11),Ae.text("Employee Name:",20,70),Ae.text(`${Ye.firstName} ${Ye.lastName}`,80,70),Ae.text("Employee ID:",20,77),Ae.text(`${Ye.employeeId}`,80,77),Ae.text("Department:",20,84),Ae.text(`${Ye.department}`,80,84),Ae.text("Month & Year:",20,91),Ae.text(`${Je} ${Xe}`,80,91),Ae.setLineWidth(.1),Ae.line(20,105,190,105),Ae.setFont(void 0,"bold"),Ae.text("Description",25,112),Ae.text("Amount",170,112),Ae.line(20,115,190,115),Ae.setFont(void 0,"normal"),Ae.text("Basic Salary",25,122),Ae.text(`${Be?.toFixed(2)}/-`,185,122,{align:"right"}),Ae.text("Leave Information",25,129),Ae.text("Paid Leave",25,136),Ae.text(`${Ie}`,185,136,{align:"right"}),Ae.text("Deductible Leave Days",25,143),Ae.text(`${Ke}`,185,143,{align:"right"}),Ae.text("Deduction Per Day",25,150),Ae.text(`${Ge.toFixed(2)}/-`,185,150,{align:"right"}),Ae.line(20,155,190,155),Ae.text("Total Deduction",25,162),Ae.text(`${lt.toFixed(2)}/-`,185,162,{align:"right"}),Ae.line(20,167,190,167),Ae.setFont(void 0,"bold"),Ae.text("Payable Salary",25,174),Ae.text(`${Mt.toFixed(2)}/-`,185,174,{align:"right"}),Ae.line(20,178,190,178),Ae.setFontSize(8),Ae.text("This is a computer-generated document. No signature required.",Ae.internal.pageSize.width/2,270,{align:"center"}),Ae.save(`Salary_Receipt_${Ye.firstName}_${Je}_${Xe}.pdf`)}catch(Nt){throw console.error("Error generating salary receipt:",Nt),new Error(`Failed to generate salary receipt: ${Nt.message}`)}},Ue=async he=>{if(!he)return;const ve=he.deductibleDays||0,pe=he.totalDeduction||0,De=he.payableSalary||he.salary;try{await Ne(De,ve,pe,he)}catch(Ye){console.error("Error downloading salary receipt:",Ye),alert("Failed to generate salary receipt. Please try again.")}},Qe=e.filter(he=>{const ve=`${he.firstName} ${he.lastName}`.toLowerCase(),pe=s.toLowerCase(),De=!s||ve.includes(pe)||he.employeeId&&he.employeeId.toLowerCase().includes(pe)||he.phone&&he.phone.includes(pe),Ye=!o||he.department===o;return De&&Ye}),[ot,xt]=N.useState(1),[Le]=N.useState(5),dt=he=>xt(he),Tt=ot*Le,At=Tt-Le,Vt=Qe.slice(At,Tt),xe=Math.ceil(Qe.length/Le);return a.jsx("div",{className:"contanier",children:a.jsx("div",{className:"d-flex justify-content-between align-items-center",children:a.jsxs("div",{className:"content container-fluid",children:[a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsx("div",{className:"page-header",children:a.jsx("div",{className:"row align-items-center",children:a.jsx("div",{className:"col-md-12",children:a.jsx("h3",{className:"page-title",children:"Payroll Management"})})})})})}),a.jsx("div",{className:"row",children:a.jsx("div",{className:"col-md-12",children:a.jsxs("div",{className:"card",children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"Search"}),a.jsx("input",{type:"text",className:"form-control",placeholder:"Search by name, employee ID, phone",value:s,onChange:he=>i(he.target.value)})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"form-group",children:[a.jsx("label",{children:"All Departments"}),a.jsxs("select",{className:"form-select",value:o,onChange:he=>l(he.target.value),children:[a.jsx("option",{value:"",children:"All Departments"}),c.map(he=>a.jsx("option",{value:he.name,children:he.departmentName},he._id))]})]})})]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-hover table-bordered",children:[a.jsx("thead",{className:"thead-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Employee ID"}),a.jsx("th",{children:"Name"}),a.jsx("th",{children:"Role"}),a.jsx("th",{children:"Department"}),a.jsx("th",{children:"Base Salary"}),a.jsx("th",{className:"text-center",children:"Actions"})]})}),a.jsx("tbody",{children:Vt.length>0?Vt.map(he=>a.jsxs("tr",{children:[a.jsx("td",{children:he.employeeId}),a.jsxs("td",{children:[he.firstName," ",he.lastName]}),a.jsx("td",{children:he.role}),a.jsx("td",{children:he.department}),a.jsx("td",{children:a.jsxs("strong",{children:["₹",he.salary]})}),a.jsx("td",{className:"text-center",children:a.jsxs("div",{className:"d-flex justify-content-center gap-2",children:[a.jsx("button",{className:"btn btn-primary btn-icon btn-sm",onClick:()=>ee(he),"data-bs-toggle":"modal","data-bs-target":"#standard-modal",title:"Generate Payslip",children:a.jsx("i",{className:"ti ti-file-dollar"})}),a.jsx("button",{className:"btn btn-secondary btn-icon btn-sm",onClick:()=>re(he),"data-bs-toggle":"modal","data-bs-target":"#history-modal",title:"View History",children:a.jsx("i",{className:"ti ti-history"})})]})})]},he._id)):a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"text-center",children:"No employees found matching your criteria"})})})]})}),a.jsx("div",{className:"col-md-12",children:a.jsx("nav",{"aria-label":"Page navigation",children:a.jsxs("ul",{className:"pagination justify-content-left",children:[a.jsx("li",{className:`page-item ${ot===1?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>dt(ot-1),disabled:ot===1,children:"«"})}),(()=>{const he=ot,ve=xe,pe=[];if(ve<=3)for(let De=1;De<=ve;De++)pe.push(a.jsx("li",{className:`page-item ${he===De?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>dt(De),children:De})},De));else pe.push(a.jsx("li",{className:`page-item ${he===1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>dt(1),children:"1"})},1)),he<=2&&pe.push(a.jsx("li",{className:`page-item ${he===2?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>dt(2),children:"2"})},2)),he>3&&pe.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"start-ellipsis")),he>2&&he<ve-1&&pe.push(a.jsx("li",{className:"page-item active",children:a.jsx("button",{className:"page-link",onClick:()=>dt(he),children:he})},he)),he<ve-2&&pe.push(a.jsx("li",{className:"page-item disabled",children:a.jsx("span",{className:"page-link",children:"..."})},"end-ellipsis")),he>=ve-1&&pe.push(a.jsx("li",{className:`page-item ${he===ve-1?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>dt(ve-1),children:ve-1})},ve-1)),ve>1&&pe.push(a.jsx("li",{className:`page-item ${he===ve?"active":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>dt(ve),children:ve})},ve));return pe})(),a.jsx("li",{className:`page-item ${ot>=xe?"disabled":""}`,children:a.jsx("button",{className:"page-link",onClick:()=>dt(ot+1),disabled:ot>=xe,children:"»"})})]})})})]})]})})}),a.jsx("div",{id:"standard-modal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"standard-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-lg",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-primary text-white",children:[a.jsx("h4",{className:"modal-title",id:"standard-modalLabel",children:"Generate Salary"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsx("div",{className:"modal-body",children:v&&a.jsxs("div",{children:[a.jsx("div",{className:"card mb-3",children:a.jsx("div",{className:"card-body bg-light-primary",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-2",children:v.profileImage?a.jsx("div",{className:"avatar avatar-lg",children:a.jsx("img",{src:v.profileImage,alt:"Profile",className:"avatar-img rounded-circle"})}):a.jsx("div",{className:"avatar avatar-lg bg-soft-primary",children:a.jsxs("span",{className:"avatar-text rounded-circle",children:[v.firstName?.charAt(0),v.lastName?.charAt(0)]})})}),a.jsxs("div",{className:"col-md-10",children:[a.jsxs("h4",{children:[v.firstName," ",v.lastName]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Employee ID:"})," ",v.employeeId]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Department:"})," ",v.department]})]}),a.jsx("div",{className:"col-md-6",children:a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Role:"})," ",v.role]})})]})]})]})})}),a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Month:"}),a.jsx("select",{className:"form-select",name:"month",value:z.month,onChange:de,children:U.filter(he=>{if(z.year===z.joinYear){const ve=U.indexOf(he),pe=U.indexOf(z.joinMonth);return ve>=pe}return!0}).map(he=>a.jsx("option",{value:he,children:he},he))})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Year:"}),a.jsx("select",{className:"form-select",name:"year",value:z.year,onChange:X,children:J.filter(he=>parseInt(he)>=parseInt(z.joinYear)).map(he=>a.jsx("option",{value:he,children:he},he))})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Payment Date:"}),a.jsx("input",{type:"date",name:"date",className:"form-control",value:z.date,onChange:G,min:z.minDate})]}),a.jsxs("div",{className:"col-md-3",children:[a.jsx("label",{className:"form-label",children:"Base Salary (₹):"}),a.jsx("input",{type:"number",name:"salary",className:"form-control",value:z.salary,onChange:G,readOnly:!0})]}),a.jsxs("div",{className:"col-md-2",children:[a.jsx("label",{className:"form-label",children:"Per Day (₹):"}),a.jsx("input",{type:"number",className:"form-control",value:L,onChange:le})]})]}),a.jsxs("div",{className:"row mb-3",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Base Salary (₹):"}),a.jsx("input",{type:"number",name:"salary",className:"form-control",value:z.salary,onChange:G,readOnly:!0})]}),a.jsxs("div",{className:"col-md-6",children:[a.jsx("label",{className:"form-label",children:"Deduction Per Day (₹):"}),a.jsx("input",{type:"number",className:"form-control",value:L,onChange:le})]})]}),a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header bg-light",children:a.jsx("h5",{className:"card-title mb-0",children:"Attendance & Leave Information"})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Total Leave Days:"}),a.jsx("input",{type:"number",className:"form-control",value:k,readOnly:!0}),a.jsxs("small",{className:"text-muted",children:["Excluding ",D," Sundays"]})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-3",children:[a.jsx("label",{className:"form-label",children:"Paid Leave Allowed:"}),a.jsx("input",{type:"number",className:"form-control",value:O,onChange:Se}),a.jsx("small",{className:"text-muted",children:"Default: 1 paid leave per month"})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-0",children:[a.jsx("label",{className:"form-label",children:"Deductible Leave Days:"}),a.jsx("input",{type:"number",className:"form-control",value:ue(),readOnly:!0}),a.jsx("small",{className:"text-muted",children:"After deducting paid leave"})]})}),a.jsx("div",{className:"col-md-3",children:a.jsxs("div",{className:"mb-0",children:[a.jsx("label",{className:"form-label",children:"Total Deduction (₹):"}),a.jsx("input",{type:"number",className:"form-control",value:ue()*L,readOnly:!0})]})})]})})]}),a.jsxs("div",{className:"card mb-3",children:[a.jsx("div",{className:"card-header bg-light-success",children:a.jsx("h5",{className:"card-title mb-0",children:"Final Salary"})}),a.jsx("div",{className:"card-body",children:a.jsxs("div",{className:"row align-items-center",children:[a.jsxs("div",{className:"col-md-8",children:[a.jsx("label",{className:"form-label",children:"Payable Salary (₹):"}),a.jsx("input",{type:"number",className:"form-control form-control-lg",value:se(),readOnly:!0}),a.jsxs("small",{className:"text-info",children:["Sundays and ",O," paid leave days are not included in salary deductions"]})]}),a.jsx("div",{className:"col-md-4",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"h1 mb-0 text-success",children:["₹",se()]}),a.jsx("div",{className:"small text-muted",children:"Final Amount"})]})})]})})]})]})}),a.jsxs("div",{className:"d-flex justify-content-end p-3 gap-2",children:[a.jsx("button",{className:"btn btn-light","data-bs-dismiss":"modal",children:"Cancel"}),a.jsxs("button",{className:"btn btn-primary",onClick:ye,children:[a.jsx("i",{className:"ti ti-device-floppy me-1"})," Save"]})]})]})})}),a.jsx("div",{id:"history-modal",className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"history-modalLabel","aria-hidden":"true",children:a.jsx("div",{className:"modal-dialog modal-xl",children:a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"modal-header bg-secondary text-white",children:[a.jsx("h4",{className:"modal-title",id:"history-modalLabel",children:"Salary History"}),a.jsx("button",{type:"button",className:"btn-close custom-btn-close border p-1 me-0 text-dark","data-bs-dismiss":"modal","aria-label":"Close",children:a.jsx("i",{className:"ti ti-x"})})]}),a.jsxs("div",{className:"modal-body",children:[v&&a.jsx("div",{className:"card mb-3",children:a.jsx("div",{className:"card-body bg-light",children:a.jsxs("div",{className:"row",children:[a.jsx("div",{className:"col-md-2",children:v.profileImage?a.jsx("div",{className:"avatar avatar-lg",children:a.jsx("img",{src:v.profileImage,alt:"Profile",className:"avatar-img rounded-circle"})}):a.jsx("div",{className:"avatar avatar-lg bg-soft-secondary",children:a.jsxs("span",{className:"avatar-text rounded-circle",children:[v.firstName?.charAt(0),v.lastName?.charAt(0)]})})}),a.jsxs("div",{className:"col-md-10",children:[a.jsxs("h4",{children:[v.firstName," ",v.lastName]}),a.jsxs("div",{className:"row",children:[a.jsxs("div",{className:"col-md-6",children:[a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Employee ID:"})," ",v.employeeId]}),a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Department:"})," ",v.department]})]}),a.jsx("div",{className:"col-md-6",children:a.jsxs("p",{className:"mb-1",children:[a.jsx("strong",{children:"Role:"})," ",v.role]})})]})]})]})})}),C.length>0?a.jsx("div",{className:"table-responsive",children:a.jsxs("table",{className:"table table-bordered table-hover",children:[a.jsx("thead",{className:"thead-light",children:a.jsxs("tr",{children:[a.jsx("th",{children:"Month & Year"}),a.jsx("th",{children:"Basic Salary"}),a.jsx("th",{children:"Leave Days"}),a.jsx("th",{children:"Total Deduction"}),a.jsx("th",{children:"Payable Salary"}),a.jsx("th",{children:"Payment Date"}),a.jsx("th",{children:"Action"})]})}),a.jsx("tbody",{children:[...C].sort((he,ve)=>new Date(ve.date)-new Date(he.date)).map(he=>a.jsxs("tr",{children:[a.jsxs("td",{children:[he.month," ",he.year]}),a.jsxs("td",{children:["₹",he.salary]}),a.jsxs("td",{children:["Total: ",he.leaveCount||0,a.jsx("span",{className:"text-muted d-block small",children:he.sundayCount>0&&` (Sundays: ${he.sundayCount})`})]}),a.jsx("td",{children:a.jsxs("span",{className:"text-danger",children:["₹",he.totalDeduction||0]})}),a.jsx("td",{children:a.jsxs("strong",{className:"text-success",children:["₹",he.payableSalary||he.salary]})}),a.jsx("td",{children:new Date(he.date).toLocaleDateString()}),a.jsx("td",{children:a.jsxs("button",{className:"btn btn-sm btn-primary",onClick:()=>Ue(he),children:[a.jsx("i",{className:"ti ti-download me-1"})," ","Download"]})})]},he._id))})]})}):a.jsxs("div",{className:"text-center py-5",children:[a.jsx("div",{className:"mb-3",children:a.jsx("i",{className:"ti ti-file-off text-muted",style:{fontSize:"48px"}})}),a.jsx("h5",{children:"No salary records found"}),a.jsx("p",{className:"text-muted",children:"No salary has been processed for this employee yet."})]})]}),a.jsx("div",{children:a.jsx("button",{className:"btn btn-secondary m-3",onClick:ie,"data-bs-dismiss":"modal",style:{width:"200px"},children:"Close"})})]})})})]})})})}function V8e(){const[e,t]=N.useState(!1),r=({children:n})=>a.jsx(vee,{children:a.jsxs("div",{className:`  main-wrapper ${e?"slide-nav":""}`,children:[a.jsx(pee,{}),a.jsx(xee,{toggleSidebar:()=>t(s=>!s)}),a.jsx("div",{className:"page-wrapper ",children:n})]})});return a.jsx(a.Fragment,{children:a.jsx(EJ,{children:a.jsxs(nJ,{children:[a.jsx(cr,{path:"/login",element:a.jsx(Ipe,{})}),a.jsx(cr,{path:"/register",element:a.jsx(Ope,{})}),a.jsx(cr,{path:"/Access",element:a.jsx(PDe,{})}),a.jsx(cr,{path:"/gst",element:a.jsx(r,{children:a.jsx(ODe,{})})}),a.jsx(cr,{path:"loginscreen",element:a.jsx(Ppe,{})}),a.jsx(cr,{path:"/company-form",element:a.jsx(r,{children:a.jsx(yDe,{})})}),a.jsx(cr,{path:"/",element:a.jsx(r,{children:a.jsx(Tpe,{})})}),a.jsx(cr,{path:"/eway",element:a.jsx(r,{children:a.jsx(IDe,{})})}),a.jsx(cr,{path:"/MaterialCategory",element:a.jsx(r,{children:a.jsx(qB,{})})}),a.jsx(cr,{path:"/PurchaseIndentsummary",element:a.jsx(r,{children:a.jsx(USe,{})})}),a.jsx(cr,{path:"/PurchaseOrderList",element:a.jsx(r,{children:a.jsx(hDe,{})})}),a.jsx(cr,{path:"/SaleContractCategory",element:a.jsx(r,{children:a.jsx(zB,{})})}),a.jsx(cr,{path:"/PurchaseQuotation",element:a.jsx(r,{children:a.jsx($Se,{})})}),a.jsx(cr,{path:"/PurchaseQuotationsDisplay",element:a.jsx(r,{children:a.jsx(dDe,{})})}),a.jsx(cr,{path:"/PurchaseOrder",element:a.jsx(r,{children:a.jsx(uDe,{})})}),a.jsx(cr,{path:"/PurchaseEnquiry",element:a.jsx(r,{children:a.jsx(BSe,{})})}),a.jsx(cr,{path:"/PurchaseContractsummary",element:a.jsx(r,{children:a.jsx(MDe,{})})}),a.jsx(cr,{path:"/PurchaseContract",element:a.jsx(r,{children:a.jsx(RDe,{})})}),a.jsx(cr,{path:"/SalesContract",element:a.jsx(r,{children:a.jsx(FDe,{})})}),a.jsx(cr,{path:"/SalesContractsummary",element:a.jsx(r,{children:a.jsx(LDe,{})})}),a.jsx(cr,{path:"/SalesEnquiry",element:a.jsx(r,{children:a.jsx(fDe,{})})}),a.jsx(cr,{path:"/SalesEnquiryList",element:a.jsx(r,{children:a.jsx(mDe,{})})}),a.jsx(cr,{path:"/SalesQuotation",element:a.jsx(r,{children:a.jsx(pDe,{})})}),a.jsx(cr,{path:"/SalesQuotationList",element:a.jsx(r,{children:a.jsx(xDe,{})})}),a.jsx(cr,{path:"/SalesOrder",element:a.jsx(r,{children:a.jsx(vDe,{})})}),a.jsx(cr,{path:"/SalesOrderList",element:a.jsx(r,{children:a.jsx(gDe,{})})}),a.jsx(cr,{path:"/MatrialIssue",element:a.jsx(r,{children:a.jsx(M8,{})})}),a.jsx(cr,{path:"/MatrialReceipt",element:a.jsx(r,{children:a.jsx(F8,{})})}),a.jsx(cr,{path:"/MatrialTransfer",element:a.jsx(r,{children:a.jsx(B8,{})})}),a.jsx(cr,{path:"/MatrialTransferList",element:a.jsx(r,{children:a.jsx(DMe,{})})}),a.jsx(cr,{path:"/MaterialIssueList",element:a.jsx(r,{children:a.jsx(R8,{})})}),a.jsx(cr,{path:"/MatrialReceiptList",element:a.jsx(r,{children:a.jsx(L8,{})})}),a.jsx(cr,{path:"/StockListERP",element:a.jsx(r,{children:a.jsx(U8,{})})}),a.jsx(cr,{path:"/GeneralCondition",element:a.jsx(r,{children:a.jsx(LSe,{})})}),a.jsx(cr,{path:"/ProcessList",element:a.jsx(r,{children:a.jsx(FSe,{})})}),a.jsx(cr,{path:"/customer-form",element:a.jsx(r,{children:a.jsx(jDe,{})})}),a.jsx(cr,{path:"/customer-price-list",element:a.jsx(r,{children:a.jsx(NDe,{})})}),a.jsx(cr,{path:"/locationmaster",element:a.jsx(r,{children:a.jsx(wDe,{})})}),a.jsx(cr,{path:"/material-form",element:a.jsx(r,{children:a.jsx(MSe,{})})}),a.jsx(cr,{path:"/tax-form",element:a.jsx(r,{children:a.jsx(SDe,{})})}),a.jsx(cr,{path:"/vendor-form",element:a.jsx(r,{children:a.jsx(CDe,{})})}),a.jsx(cr,{path:"/vendor-price-list",element:a.jsx(r,{children:a.jsx(kDe,{})})}),a.jsx(cr,{path:"/GoodsIssueFormUI",element:a.jsx(r,{children:a.jsx(M8,{})})}),a.jsx(cr,{path:"/goods-issue-list",element:a.jsx(r,{children:a.jsx(R8,{})})}),a.jsx(cr,{path:"/GoodsReciept",element:a.jsx(r,{children:a.jsx(F8,{})})}),a.jsx(cr,{path:"/GoodsReceiptList",element:a.jsx(r,{children:a.jsx(L8,{})})}),a.jsx(cr,{path:"/GoodsTransfer",element:a.jsx(r,{children:a.jsx(B8,{})})}),a.jsx(cr,{path:"/StockListERP",element:a.jsx(r,{children:a.jsx(U8,{})})}),a.jsx(cr,{path:"/InvoiceList",element:a.jsx(r,{children:a.jsx(EDe,{})})}),a.jsx(cr,{path:"/InvoiceForm",element:a.jsx(r,{children:a.jsx(DDe,{})})}),a.jsx(cr,{path:"/BillingForm",element:a.jsx(r,{children:a.jsx(ADe,{})})}),a.jsx(cr,{path:"/BillingDisplay",element:a.jsx(r,{children:a.jsx(TDe,{})})}),a.jsx(cr,{path:"/Ledger",element:a.jsx(r,{children:a.jsx(UDe,{})})}),a.jsx(cr,{path:"/Payments",element:a.jsx(r,{children:a.jsx(VDe,{})})}),a.jsx(cr,{path:"/MRP",element:a.jsx(r,{children:a.jsx($De,{})})}),a.jsx(cr,{path:"/PaymentDisplay",element:a.jsx(r,{children:a.jsx(BDe,{})})}),a.jsx(cr,{path:"/MaterialCategory",element:a.jsx(r,{children:a.jsx(qB,{})})}),a.jsx(cr,{path:"/customer-category-form",element:a.jsx(r,{children:a.jsx(vMe,{})})}),a.jsx(cr,{path:"/GoodsIssueCategory",element:a.jsx(r,{children:a.jsx(gMe,{})})}),a.jsx(cr,{path:"/GoodsReceiptCategory",element:a.jsx(r,{children:a.jsx(bMe,{})})}),a.jsx(cr,{path:"/InvoiceCategory",element:a.jsx(r,{children:a.jsx(yMe,{})})}),a.jsx(cr,{path:"/BillingCategory",element:a.jsx(r,{children:a.jsx(xMe,{})})}),a.jsx(cr,{path:"/POCategory",element:a.jsx(r,{children:a.jsx(jMe,{})})}),a.jsx(cr,{path:"/Purchaserequestcat",element:a.jsx(r,{children:a.jsx(NMe,{})})}),a.jsx(cr,{path:"/sale-quotation-category-form",element:a.jsx(r,{children:a.jsx(SMe,{})})}),a.jsx(cr,{path:"/SalesCategory",element:a.jsx(r,{children:a.jsx(CMe,{})})}),a.jsx(cr,{path:"/SalesOrderCategoryForm",element:a.jsx(r,{children:a.jsx(kMe,{})})}),a.jsx(cr,{path:"/SaleContractCategoryForm",element:a.jsx(r,{children:a.jsx(zB,{})})}),a.jsx(cr,{path:"/TransferCategory",element:a.jsx(r,{children:a.jsx(_Me,{})})}),a.jsx(cr,{path:"/vendor-category",element:a.jsx(r,{children:a.jsx(EMe,{})})}),a.jsx(cr,{path:"/RFQCategoryForm",element:a.jsx(r,{children:a.jsx(wMe,{})})}),a.jsx(cr,{path:"/PurchaseContractCategory",element:a.jsx(r,{children:a.jsx(qDe,{})})}),a.jsx(cr,{path:"/contacts",element:a.jsx(r,{children:a.jsx(AMe,{})})}),a.jsx(cr,{path:"/leads",element:a.jsx(r,{children:a.jsx(TMe,{})})}),a.jsx(cr,{path:"/proposals",element:a.jsx(r,{children:a.jsx(OMe,{})})}),a.jsx(cr,{path:"/sources",element:a.jsx(r,{children:a.jsx(MMe,{})})}),a.jsx(cr,{path:"/lost-reason",element:a.jsx(r,{children:a.jsx(RMe,{})})}),a.jsx(cr,{path:"/contact-stage",element:a.jsx(r,{children:a.jsx(FMe,{})})}),a.jsx(cr,{path:"/industry",element:a.jsx(r,{children:a.jsx(LMe,{})})}),a.jsx(cr,{path:"/calls",element:a.jsx(r,{children:a.jsx(BMe,{})})}),a.jsx(cr,{path:"/milestones",element:a.jsx(r,{children:a.jsx(UMe,{})})}),a.jsx(cr,{path:"/tasks",element:a.jsx(r,{children:a.jsx($Me,{})})}),a.jsx(cr,{path:"/time-entries",element:a.jsx(r,{children:a.jsx(VMe,{})})}),a.jsx(cr,{path:"/projects",element:a.jsx(r,{children:a.jsx(qMe,{})})}),a.jsx(cr,{path:"/campaigns",element:a.jsx(r,{children:a.jsx(zMe,{})})}),a.jsx(cr,{path:"/analytics",element:a.jsx(r,{children:a.jsx(HMe,{})})}),a.jsx(cr,{path:"/SalesDelivery",element:a.jsx(r,{children:a.jsx(bDe,{})})}),a.jsx(cr,{path:"/SalesDeliveryList",element:a.jsx(r,{children:a.jsx(WMe,{})})}),a.jsx(cr,{path:"/employee",element:a.jsx(r,{children:a.jsx(GMe,{})})}),a.jsx(cr,{path:"/leaverequest",element:a.jsx(r,{children:a.jsx(XMe,{})})}),a.jsx(cr,{path:"/leavemanagement",element:a.jsx(r,{children:a.jsx($6e,{})})}),a.jsx(cr,{path:"/payroll",element:a.jsx(r,{children:a.jsx($8e,{})})}),a.jsx(cr,{path:"/departments",element:a.jsx(r,{children:a.jsx(YMe,{})})}),a.jsx(cr,{path:"/designation",element:a.jsx(r,{children:a.jsx(KMe,{})})}),a.jsx(cr,{path:"/attendancereg",element:a.jsx(r,{children:a.jsx(fMe,{})})}),a.jsx(cr,{path:"/attendancetaking",element:a.jsx(r,{children:a.jsx(mMe,{})})}),a.jsx(cr,{path:"/attendancereport",element:a.jsx(r,{children:a.jsx(pMe,{})})})]})})})}hQ.createRoot(document.getElementById("root")).render(a.jsx(N.StrictMode,{children:a.jsx(V8e,{})}));export{Pb as _,q8e as c,Yu as g};
